<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>DUSt3Rç³»åˆ—å·¥ä½œç›˜ç‚¹</title>
      <link href="2025/04/14/paper-reading-dust3r-series-01/"/>
      <url>2025/04/14/paper-reading-dust3r-series-01/</url>
      
        <content type="html"><![CDATA[<h2 id="DUSt3R-åŸºç¡€"><a href="#DUSt3R-åŸºç¡€" class="headerlink" title="DUSt3R åŸºç¡€"></a>DUSt3R åŸºç¡€</h2><h3 id="DUSt3R-Geometric-3D-Vision-Made-Easy"><a href="#DUSt3R-Geometric-3D-Vision-Made-Easy" class="headerlink" title="DUSt3R: Geometric 3D Vision Made Easy"></a>DUSt3R: Geometric 3D Vision Made Easy</h3><p><img src="/images/paper-reading-dust3r-series-01/image-20250324154136111.png"></p><p><img src="/images/paper-reading-dust3r-series-01/image-20250324154146525.png"></p><h3 id="Grounding-Image-Matching-in-3D-with-MASt3R"><a href="#Grounding-Image-Matching-in-3D-with-MASt3R" class="headerlink" title="Grounding Image Matching in 3D with MASt3R"></a>Grounding Image Matching in 3D with MASt3R</h3><p><img src="/images/paper-reading-dust3r-series-01/image-20250324154218264.png"></p><h2 id="DUSt3Rç›¸å…³å·¥ä½œ"><a href="#DUSt3Rç›¸å…³å·¥ä½œ" class="headerlink" title="DUSt3Rç›¸å…³å·¥ä½œ"></a>DUSt3Rç›¸å…³å·¥ä½œ</h2><h3 id="MASt3R-SfM-a-Fully-Integrated-Solution-for-Unconstrained-Structure-from-Motion"><a href="#MASt3R-SfM-a-Fully-Integrated-Solution-for-Unconstrained-Structure-from-Motion" class="headerlink" title="MASt3R-SfM: a Fully-Integrated Solution for Unconstrained Structure-from-Motion"></a>MASt3R-SfM: a Fully-Integrated Solution for Unconstrained Structure-from-Motion</h3><p><img src="/images/paper-reading-dust3r-series-01/image-20250324160355105.png"></p><blockquote><p>è¿™ä¸ªå·¥ä½œåƒæˆ‘ä»¬ä¹‹å‰åšçš„é¡¹ç›®ï¼Œç”¨dust3ræ¥åšï¼Œä¹Ÿæ˜¯æ„å»ºäº†åˆç†çš„image pairå»é‡å»ºã€‚</p></blockquote><h3 id="MASt3R-SLAM-Real-Time-Dense-SLAM-with-3D-Reconstruction-Priors"><a href="#MASt3R-SLAM-Real-Time-Dense-SLAM-with-3D-Reconstruction-Priors" class="headerlink" title="MASt3R-SLAM: Real-Time Dense SLAM with 3D Reconstruction Priors"></a>MASt3R-SLAM: Real-Time Dense SLAM with 3D Reconstruction Priors</h3><p><strong>è¿™ç¯‡è®ºæ–‡ç”¨äº†å¾ˆå¤šmast3r-sfmé‡Œé¢çš„ä¸œè¥¿ã€‚</strong></p><p>**motivation: **However, SLAM is yet to become a plug-and-play algorithm as it requires hardware expertise and calibration. Even for a minimal single camera setup with no additional sensing such as an IMU, a SLAM solution that reliably provides both accurate poses and consistent dense maps in-the-wild does not exist. Achieving such a reliable dense SLAM system would open new research avenues for spatial intelligence.</p><p>**slamå’Œsfmç›¸æ¯”: **While previous work has applied these priors to SfM in an offline setting with unordered image collections [10], SLAM receives data incrementally and must maintain real-time operation. This requires new perspectives on low-latency matching, careful map maintenance, and efficient methods for large-scale optimisation.</p><p>**pipeline: **æœ¬è´¨ä¸Šè¿™æ˜¯ä¸€ä¸ªä¼ ç»Ÿçš„SLAMæ–¹æ³•ï¼Œmast3rå–ä»£äº†å…¶ä¸­æ·±åº¦è·å–ã€featureè®¡ç®—ã€å›ç¯æ£€æµ‹çš„åŠŸèƒ½ã€‚ä¹Ÿæ²¡æœ‰å¯¹mast3rè¿›è¡Œè®­ç»ƒã€‚</p><p><img src="/images/paper-reading-dust3r-series-01/image-20250324161002504.png"></p><p><strong>Pointmap Matching</strong></p><p>è¿™éƒ¨åˆ†æ¯”è¾ƒæœ‰æ„æ€ï¼Œä¸è¿‡æ€è·¯éå¸¸ç®€å•ï¼Œå…ˆé€šè¿‡æŠ•å½±ä¼˜åŒ–å¾—åˆ°ä¸€ä¸ªç²—åŒ¹é…ï¼Œå†æ ¹æ®featureå®ç°ç»†åŒ¹é…ã€‚è¿™ä¸ªç®—æ³•å¯ä»¥ç”¨cudaå®ç°å¹¶è¡ŒåŒ–ï¼Œé€Ÿåº¦éå¸¸å¿«ã€‚æ¯”mast3rè®ºæ–‡é‡Œé¢çš„fast nnå¿«ä¸å°‘ã€‚</p><img src="/images/paper-reading-dust3r-series-01/image-20250325153224276.png" style="zoom:50%;"><p><strong>ä¸è¿‡è¿™ä¹Ÿå¯¼è‡´è¿™ç¯‡è®ºæ–‡å¼•å…¥äº†ä¸€ä¸ªå‡è®¾ï¼šç›¸æœºå¿…é¡»è¦æœ‰ä¸€ä¸ªå”¯ä¸€çš„å…‰å¿ƒã€‚</strong></p><img src="/images/paper-reading-dust3r-series-01/image-20250324161519198.png" style="zoom:50%;"><p><strong>Tracking and Pointmap Fusion</strong></p><img src="/images/paper-reading-dust3r-series-01/image-20250325152828469.png" style="zoom: 50%;"><p>Trackingéƒ¨åˆ†ï¼Œæœ€å°åŒ–3Dç‚¹è¯¯å·®å¯èƒ½æ²¡æœ‰é‚£ä¹ˆé²æ£’ï¼Œå› ä¸ºæ·±åº¦é¢„æµ‹ä¸ä¸€è‡´çš„æƒ…å†µæ˜¯é¢‘ç¹çš„ã€‚æ‰€ä»¥è®ºæ–‡åŸºäºä¸Šé¢è¿™ä¸ªå…¬å¼è¿›è¡Œäº†ä¿®æ”¹ï¼Œè¿˜æ˜¯åƒPointmap Matchingé‚£æ ·è®¡ç®—directional ray errorï¼š</p><img src="/images/paper-reading-dust3r-series-01/image-20250325153103167.png" style="zoom:50%;"><p>æœ€ç»ˆï¼Œä½å§¿æ±‚è§£é€šè¿‡ä¸‹é¢çš„å…¬å¼ï¼š</p><img src="/images/paper-reading-dust3r-series-01/image-20250325153401821.png" style="zoom:50%;"><p>Pointmap Fusionéƒ¨åˆ†ï¼Œè®ºæ–‡æåˆ°åˆå§‹çš„pointmapå…·æœ‰è¾ƒå¤§çš„è¯¯å·®å’Œè¾ƒä½çš„ç½®ä¿¡åº¦ï¼Œä»–ä»¬å°è¯•äº†å„ç§æ–¹æ³•ï¼Œæœ€åå‘ç°åŠ æƒå¹³å‡æœ€é€‚åˆåœ¨è¿‡æ»¤å™ªå£°çš„åŒæ—¶ä¿æŒä¸€è‡´æ€§ã€‚å› æ­¤é€šè¿‡å¦‚ä¸‹çš„å…¬å¼æ¥è¿›è¡Œpointmap fusionï¼š</p><img src="/images/paper-reading-dust3r-series-01/image-20250325153608115.png" style="zoom:50%;"><p><strong>Graph Construction and Loop Closure</strong></p><p>å…³é”®å¸§æ·»åŠ æ ‡å‡†ï¼švalid matchesæ•°é‡ä½äºé˜ˆå€¼ï¼Œæˆ–è€…unique keyframe pixelsä½äºé˜ˆå€¼ï¼ˆè¿™é‡Œä¸å¤ªç†è§£ï¼Œå¯èƒ½å¾—çœ‹ä»£ç äº†ï¼‰ï¼›</p><p>é€šè¿‡mast3r-sfmä½¿ç”¨çš„ASMKæ¡†æ¶æ¥ä»encoded featuresä¸­æ£€ç´¢å›¾åƒï¼Œå®ç°loop detectionï¼›</p><p>æ£€ç´¢åˆ†æ•°é«˜äºé˜ˆå€¼ï¼Œå°†encoded features pairæäº¤ç»™mast3r decoderï¼Œå¦‚æœæ ¹æ®Pointmap Matchingçš„ç»“æœåŒ¹é…æ•°é‡é«˜äºé˜ˆå€¼ï¼Œåˆ™æ·»åŠ åŒå‘è¾¹ã€‚</p><p><strong>Backend Optimisation</strong></p><p>è¿™éƒ¨åˆ†çš„ç›®çš„æ˜¯ä¿è¯ä½å§¿å’Œå‡ ä½•å½¢çŠ¶çš„å…¨å±€ä¸€è‡´æ€§ã€‚</p><blockquote><p>å…¬å¼å†™å¤§äº†ï¼Œç¼–å·æŒ¤ä¸‹å»äº†å“ˆå“ˆå“ˆå“ˆå“ˆ</p></blockquote><img src="/images/paper-reading-dust3r-series-01/image-20250325153816338.png" style="zoom:50%;"><p><strong>Relocalisation</strong></p><p>åšçš„æ¯”è¾ƒä¼ ç»Ÿï¼Œè·Ÿä¸¢ä¹‹åæŸ¥æ•°æ®åº“ï¼ŒæŸ¥åˆ°æœ‰åŒ¹é…çš„å¸§å†æ·»åŠ æ–°çš„è¾¹åˆ°graphä¸­ã€‚</p><p><strong>Known Calibration</strong></p><p>ä»å®éªŒæ¥çœ‹ï¼Œè¿™ä¸ªå¯¹ä½å§¿ç²¾åº¦æå‡æ¯”è¾ƒå¤§ï¼Œä½†æ˜¯å¯¹é‡å»ºçš„ç²¾åº¦æå‡æœ‰é™ã€‚</p><p>è®ºæ–‡åšçš„å’Œæˆ‘æƒ³å¾—å·®ä¸å¤šï¼Œåˆ©ç”¨ç›¸æœºå†…å‚æ¥è°ƒæ•´pointmapï¼Œåå‘æŠ•å½±ï¼Œå¹¶ä¸”åœ¨åƒç´ ç©ºé—´ä¸Šè®¡ç®—æ®‹å·®ã€‚</p><img src="/images/paper-reading-dust3r-series-01/image-20250325154203475.png" style="zoom:50%;"><p><strong>Limitations and Future Work</strong></p><p>è®ºæ–‡æåˆ°çš„è¿™ä¸ªç‚¹å¾ˆæœ‰æ„æ€ï¼šWhile we can estimate accurate geometry by filtering pointmaps in the frontend, we do not currently refine all geometry in the full global optimisation. While DROIDSLAM optimises per-pixel depth via bundle adjustment, this framework permits incoherent geometry. A method that can make pointmaps globally consistent in 3D while retaining the coherence of the original MASt3R predictions all in real-time would be an interesting direction for future work.</p><p><strong>ç°åœ¨æˆ‘ä»¬è¿˜åªèƒ½æ‹¿mast3rå‡ºæ¥çš„pointmapç¨åŠ è°ƒæ•´ï¼Œç”¨äºé‡å»ºï¼Œä½†æ˜¯è¿™äº›ç‚¹çœŸçš„å¯¹å—ï¼Ÿè¿™äº›ç‚¹å¦‚æœä¸å¯¹ï¼Œåº”è¯¥æ€ä¹ˆå»è¿›è¡Œè°ƒæ•´å‘¢ï¼Ÿ</strong></p><blockquote><p>æœ€ç®€å•çš„æ€è·¯ï¼šåŠ å…¥3DGSï¼Œé€šè¿‡æ¸²æŸ“çš„è¯¯å·®æ¥ä¼˜åŒ–ç‚¹çš„ä½ç½®ï¼Œè¿˜èƒ½å¤Ÿç”Ÿæˆæ–°çš„ç‚¹ã€‚ã€‚ã€‚</p><p>å¤æ‚ç‚¹çš„æ€è·¯ç›®å‰æš‚æ—¶æ²¡æœ‰äº†ã€‚</p></blockquote><h3 id="SLAM3R-Real-Time-Dense-Scene-Reconstruction-from-Monocular-RGB-Videos"><a href="#SLAM3R-Real-Time-Dense-Scene-Reconstruction-from-Monocular-RGB-Videos" class="headerlink" title="SLAM3R: Real-Time Dense Scene Reconstruction from Monocular RGB Videos"></a>SLAM3R: Real-Time Dense Scene Reconstruction from Monocular RGB Videos</h3><p><img src="/images/paper-reading-dust3r-series-01/image-20250324155702081.png"></p><p>è¿™ç¯‡æ–‡ç« åšçš„è¿˜æ˜¯éå¸¸æœ‰æ„æ€éå¸¸æ–°é¢–çš„ã€‚</p><p>I2På’ŒL2Wéƒ½æ˜¯åŸºäºdust3rçš„ã€‚I2Pç›¸å½“äºåŸå§‹çš„dust3rï¼Œæ ¹æ®å›¾åƒå¾—åˆ°ç‚¹äº‘ï¼›è€ŒL2Wç›¸å½“äºç‚¹äº‘ç‰ˆæœ¬çš„dust3rï¼Œæ ¹æ®sceneå’Œlocalå¾—åˆ°èåˆåçš„sceneã€‚</p><h3 id="InstantSplat-Unbounded-Sparse-view-Pose-free-Gaussian-Splatting-in-40-Seconds"><a href="#InstantSplat-Unbounded-Sparse-view-Pose-free-Gaussian-Splatting-in-40-Seconds" class="headerlink" title="InstantSplat: Unbounded Sparse-view Pose-free Gaussian Splatting in 40 Seconds"></a>InstantSplat: Unbounded Sparse-view Pose-free Gaussian Splatting in 40 Seconds</h3><p>è¿™çœ‹ç€åªæ˜¯æŠŠdust3ræ‹¿è¿‡æ¥ç”¨äº†ä¸€ä¸‹ã€‚</p><p><img src="/images/paper-reading-dust3r-series-01/image-20250325173556315.png"></p><h3 id="Splatt3R-Zero-shot-Gaussian-Splatting-from-Uncalibrated-Image-Pairs"><a href="#Splatt3R-Zero-shot-Gaussian-Splatting-from-Uncalibrated-Image-Pairs" class="headerlink" title="Splatt3R: Zero-shot Gaussian Splatting from Uncalibrated Image Pairs"></a>Splatt3R: Zero-shot Gaussian Splatting from Uncalibrated Image Pairs</h3><p>è¿™ä¸ªåšçš„æ¯”InstantSplatæœ‰æ„æ€ï¼Œæ·»åŠ äº†ä¸€ä¸ªGaussian Head</p><p><img src="/images/paper-reading-dust3r-series-01/image-20250326210358052.png"></p><h3 id="Fast3R-Towards-3D-Reconstruction-of-1000-Images-in-One-Forward-Pass"><a href="#Fast3R-Towards-3D-Reconstruction-of-1000-Images-in-One-Forward-Pass" class="headerlink" title="Fast3R: Towards 3D Reconstruction of 1000+ Images in One Forward Pass"></a>Fast3R: Towards 3D Reconstruction of 1000+ Images in One Forward Pass</h3><p><img src="/images/paper-reading-dust3r-series-01/image-20250326210604839.png"></p><p>å…³äºFusion Transformer</p><img src="/images/paper-reading-dust3r-series-01/image-20250326211536047.png" style="zoom:50%;"><h3 id="Light3R-SfM-Towards-Feed-forward-Structure-from-Motion"><a href="#Light3R-SfM-Towards-Feed-forward-Structure-from-Motion" class="headerlink" title="Light3R-SfM: Towards Feed-forward Structure-from-Motion"></a>Light3R-SfM: Towards Feed-forward Structure-from-Motion</h3><p><img src="/images/paper-reading-dust3r-series-01/image-20250326214218768.png"></p><h3 id="Align3R-Aligned-Monocular-Depth-Estimation-for-Dynamic-Videos"><a href="#Align3R-Aligned-Monocular-Depth-Estimation-for-Dynamic-Videos" class="headerlink" title="Align3R: Aligned Monocular Depth Estimation for Dynamic Videos"></a>Align3R: Aligned Monocular Depth Estimation for Dynamic Videos</h3><p>è¿™å’ŒPow3Råšçš„å¥½åƒå•Šã€‚ä¸è¿‡è¿™ä¸ªå·¥ä½œå¯ä»¥ä»è§†é¢‘ä¸­ä¼°è®¡ä¸€è‡´æ€§çš„æ·±åº¦ã€ç‚¹äº‘å’Œç›¸æœºå§¿æ€ã€‚</p><p>äººå®¶Pow3Ræ›´å…³æ³¨æ€ä¹ˆåˆ©ç”¨é¢å¤–çš„ä¿¡æ¯æå‡é‡å»ºç²¾åº¦ã€‚</p><p><img src="/images/paper-reading-dust3r-series-01/image-20250326221400752.png"></p><h3 id="Spann3R-3D-Reconstruction-with-Spatial-Memory"><a href="#Spann3R-3D-Reconstruction-with-Spatial-Memory" class="headerlink" title="Spann3R: 3D Reconstruction with Spatial Memory"></a>Spann3R: 3D Reconstruction with Spatial Memory</h3><p>ä»å“ªé‡Œçœ‹åˆ°å¯¹Spann3Rçš„è¯„ä»·ï¼Œè¯´è¿™ä¸ªå·¥ä½œæ¯”è¾ƒé€‚åˆå¯¹ç‰©ä½“è¿›è¡Œé‡å»ºï¼Œå¯¹åœºæ™¯çš„é‡å»ºæ•ˆæœå¾ˆä¸å¥½ã€‚</p><p><img src="/images/paper-reading-dust3r-series-01/image-20250326214339434.png"></p><img src="/images/paper-reading-dust3r-series-01/image-20250326221037225.png" style="zoom:50%;"><h3 id="Pow3R-Empowering-Unconstrained-3D-Reconstruction-with-Camera-and-Scene-Priors"><a href="#Pow3R-Empowering-Unconstrained-3D-Reconstruction-with-Camera-and-Scene-Priors" class="headerlink" title="Pow3R: Empowering Unconstrained 3D Reconstruction with Camera and Scene Priors"></a>Pow3R: Empowering Unconstrained 3D Reconstruction with Camera and Scene Priors</h3><p>Dust3Rä¸éœ€è¦cameraå†…å¤–å‚ä¿¡æ¯å°±èƒ½å®Œæˆé‡å»ºï¼Œä½†å¦‚æœåœ¨åº”ç”¨ä¸­æœ‰å·²çŸ¥çš„å†…å¤–å‚æˆ–ç¨€ç–æ·±åº¦å¯ä»¥åœ¨Dust3Rçš„åŸºç¡€ä¸Šç»§ç»­æé«˜å—ï¼ŸPow3Rå¯¹Dust3Rçš„ç»“æ„åŠ è£…äº†é¢å¤–æ¨¡å—ï¼Œå¸¦æ¥äº†ä¸€äº›æå‡ï¼Œä½†ä¹Ÿåªæœ‰ä¸€ç‚¹ç‚¹ğŸ¤ğŸ»</p><p><img src="/images/paper-reading-dust3r-series-01/image-20250326211856918.png"></p>]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸‰ç»´é‡å»º </tag>
            
            <tag> å¤§æ¨¡å‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VGGTï¼šVisual Geometry Grounded Transformer</title>
      <link href="2025/04/06/paper-reading-vggt/"/>
      <url>2025/04/06/paper-reading-vggt/</url>
      
        <content type="html"><![CDATA[<h1 id="VGGT-Visual-Geometry-Grounded-Transformer"><a href="#VGGT-Visual-Geometry-Grounded-Transformer" class="headerlink" title="VGGT: Visual Geometry Grounded Transformer"></a>VGGT: Visual Geometry Grounded Transformer</h1><h2 id="Motivation-amp-Contributions"><a href="#Motivation-amp-Contributions" class="headerlink" title="Motivation &amp; Contributions"></a>Motivation &amp; Contributions</h2><p><strong>Motivation</strong>ï¼š3Dè§†è§‰ç ”ç©¶ä¸­ï¼Œæ¨¡å‹é€šå¸¸è¢«é™åˆ¶ç”¨äºå¤„ç†å•ä¸ªä»»åŠ¡ï¼Œä½†è¿™æ ·å¾ˆå¤šæ—¶å€™è¿˜éœ€è¦ä½¿ç”¨visual geometry optimizationçš„æ–¹æ³•æ¥å¾—åˆ°å¯ä»¥ç”¨çš„æ•ˆæœã€‚VGGTå¸Œæœ›åœ¨æ­¤åšå‡ºæ”¹å˜ï¼Œä»ä¸€ç»„åœºæ™¯çš„å›¾åƒï¼Œç›´æ¥é¢„æµ‹è¿™ç»„å›¾åƒçš„3Då±æ€§ã€‚</p><p><strong>Contributions</strong>ï¼šTo summarize, we make the following contributions: </p><ul><li>We introduce VGGT, a large feed-forward transformer that, given one, a few, or even hundreds of images of a scene, can predict all its key 3D attributes, including camera intrinsics and extrinsics, point maps, depth maps, and 3D point tracks, in seconds. </li><li>We demonstrate that VGGTâ€™s predictions are directly usable, being highly competitive and usually better than those of state-of-the-art methods that use slow post-processing optimization techniques. </li><li>We also show that, when further combined with BA post-processing, VGGT achieves state-of-the-art results across the board, even when compared to methods that specialize in a subset of 3D tasks, often improving quality substantially.</li></ul><blockquote><p><strong>æˆ‘å¯¹ç¬¬ä¸‰ç‚¹éå¸¸å¥½å¥‡ï¼Œä¸BAåå¤„ç†ç›¸ç»“åˆï¼Œæ˜¯æ€ä¹ˆåšçš„ï¼Œä¼¼ä¹æ²¡æœ‰å¼€æºçš„ä»£ç ã€‚è¿™ä¸ªæˆ‘å¿…é¡»å»githubæissueï¼Œè¯¢é—®ä¸€ä¸‹ï¼</strong></p></blockquote><h2 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h2><p>ç®€å•æ˜äº†çš„Architecture OverviewğŸ‘</p><p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405212205455.png"></p><h3 id="Problem-definition-and-notation"><a href="#Problem-definition-and-notation" class="headerlink" title="Problem definition and notation"></a>Problem definition and notation</h3><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405213528961.png" style="zoom:67%;"><p>ä¸€ä¸ªå¯èƒ½æ¯”è¾ƒå…³é”®çš„ä¿¡æ¯ï¼Œç½‘ç»œæ¶æ„è¢«è®¾è®¡ä¸ºï¼Œé™¤äº†ç¬¬ä¸€å¸§ä¹‹å¤–ï¼Œæ‰€æœ‰å¸§ä¸ç®¡æ€ä¹ˆæ’åºéƒ½æ˜¯ç­‰ä»·çš„ã€‚è¿™æ˜¯å¦è¯´æ˜ï¼Œç¬¬ä¸€å¸§ï¼ˆå‚è€ƒå¸§ï¼‰çš„é€‰å–ï¼Œæ¯”è¾ƒå…³é”®ï¼Ÿ</p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405215039601.png" style="zoom:67%;"><h3 id="Feature-Backbone"><a href="#Feature-Backbone" class="headerlink" title="Feature Backbone"></a>Feature Backbone</h3><p>ç•¥ï¼Œè®ºæ–‡é‡Œé¢æœ‰éå¸¸è¯¦ç»†çš„ä»‹ç»ï¼Œç›´è§‚æ˜“æ‡‚</p><h3 id="Prediction-heads"><a href="#Prediction-heads" class="headerlink" title="Prediction heads"></a>Prediction heads</h3><p>ç•¥ï¼Œè®ºæ–‡é‡Œé¢æœ‰éå¸¸è¯¦ç»†çš„ä»‹ç»ï¼Œç›´è§‚æ˜“æ‡‚</p><h3 id="Training"><a href="#Training" class="headerlink" title="Training"></a>Training</h3><h4 id="Training-Loss"><a href="#Training-Loss" class="headerlink" title="Training Loss"></a>Training Loss</h4><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250406152134514.png" style="zoom:67%;"><h4 id="Ground-Truth-Coordinate-Normalization"><a href="#Ground-Truth-Coordinate-Normalization" class="headerlink" title="Ground Truth Coordinate Normalization"></a>Ground Truth Coordinate Normalization</h4><p>è¿™éƒ¨åˆ†æäº†ä¸€ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„ç‚¹:Importantly, unlike DUSt3R, we do not apply such normalization to the predictions output by the transformer; instead, we force it to learn the normalization we choose from the training data.</p><blockquote><p>ä½œè€…å¼ºè¿«VGGTå»å­¦ä¹ ä½œè€…ä»è®­ç»ƒæ•°æ®é€‰æ‹©çš„normalizationï¼Œè€Œä¸æ˜¯åƒDUSt3Rä¸€æ ·æŠŠå½’ä¸€åŒ–åº”ç”¨åˆ°ç½‘ç»œçš„è¾“å‡ºä¸Šã€‚è¿™æ˜¯å¦è¯´æ˜ï¼Œå¯¹äºåŒä¸€ç»„æ•°æ®ï¼ŒVGGTæ¯æ¬¡é¢„æµ‹çš„è¾“å‡ºï¼ŒåŸºæœ¬æ˜¯ä¸€æ ·çš„å‘¢ï¼Ÿ</p></blockquote><h4 id="Implementation-Details"><a href="#Implementation-Details" class="headerlink" title="Implementation Details"></a>Implementation Details</h4><p>è®­ç»ƒçš„è¾“å…¥æ˜¯éšæœºçš„2-24å¸§ï¼›</p><p>è®­ç»ƒä½¿ç”¨äº†64å¼ A100ï¼ŒèŠ±äº†9å¤©æ—¶é—´ã€‚</p><h4 id="Training-Data"><a href="#Training-Data" class="headerlink" title="Training Data"></a>Training Data</h4><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250406153423825.png" style="zoom:50%;"><h2 id="Experiments"><a href="#Experiments" class="headerlink" title="Experiments"></a>Experiments</h2><p>VGGT+BAçš„æ•ˆæœæ˜¯æœ€å¥½çš„ï¼Œä¸è¿‡èŠ±è´¹é¢çš„æ—¶é—´å¯èƒ½ä¼šç¨å¾®é•¿ä¸€ç‚¹ã€‚</p><blockquote><p>å¾—å»æ‰¾æ‰¾BAçš„ä»£ç æ‰è¡Œï¼ï¼ï¼</p></blockquote><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250406153526905.png" style="zoom:67%;"><p>æ­¤å¤–ï¼Œä»ä¸‹é¢è¿™ä¸ªå®éªŒæ¥çœ‹ï¼Œé¢„æµ‹local geometry + poseçš„ç»“æœæ¯”é¢„æµ‹global geometryè¦å¥½ã€‚</p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250406153609477.png" style="zoom:67%;"><p>ä»æ¶ˆèå®éªŒæ¥çœ‹ï¼Œå°±åƒå»ºå…ƒæ±‡æŠ¥è¯´çš„é‚£æ ·ï¼Œå¦‚æœæ²¡æœ‰trackï¼ŒæŒ‡æ ‡ä¼šä¸‹é™ã€‚</p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250406153820020.png" style="zoom:67%;"><p>å…¶ä»–çš„å®éªŒçœ‹è®ºæ–‡å§~</p><h2 id="Discussions"><a href="#Discussions" class="headerlink" title="Discussions"></a>Discussions</h2><p>è¿™éƒ¨åˆ†ä½œè€…å†™äº†å¾ˆå¤šï¼Œéå¸¸å€¼å¾—çœ‹ä¸€çœ‹ã€‚</p><h3 id="Limitations"><a href="#Limitations" class="headerlink" title="Limitations"></a>Limitations</h3><ul><li>ä¸æ”¯æŒé±¼çœ¼ã€å…¨æ™¯å›¾åƒ</li><li>æç«¯çš„æ—‹è½¬ä¼šå¯¼è‡´é‡å»ºæ€§èƒ½ä¸‹é™</li><li>å¤§é‡çš„éåˆšæ€§å½¢å˜ä¼šåœ¨å¯¼è‡´é‡å»ºå¤±è´¥</li></ul><p>ä¸è¿‡ä½œè€…è¯´å¾®è°ƒå¯ä»¥è§£å†³è¿™äº›é—®é¢˜ã€‚</p><h3 id="Runtime-and-Memory"><a href="#Runtime-and-Memory" class="headerlink" title="Runtime and Memory"></a>Runtime and Memory</h3><p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250406154805976.png" alt="image-20250406154805976"></p><p>è¿™é‡Œæåˆ°ä¸€äº›æ¯”è¾ƒå€¼å¾—å…³æ³¨çš„ä¿¡æ¯ï¼š</p><ul><li><p>VGGTå¯ä»¥è‡ªç”±é€‰æ‹©ä¸åŒçš„branchï¼Œå…¶ä¸­camera headæ˜¯lightweightï¼Œåªå ç”¨5%çš„è¿è¡Œæ—¶é—´å’Œ2%çš„GPU memory</p><blockquote><p>ä½œè€…ä¹‹å‰æåˆ°è¿‡ï¼š</p><p>VGGTæ¨¡å‹è®­ç»ƒå¥½ä¹‹åï¼ŒåŠ äº†ä¸€ä¸ªç±»ä¼¼äºLoraçš„å±‚ï¼Œåšä¸€äº›ç®€å•çš„fine tune</p><p>æŠŠgt cameraä½œä¸ºinputï¼Œé€šè¿‡ç®€å•çš„MLPå±‚injectè¿›å»ï¼Œè¿™æ ·çš„information injectionï¼Œæœ€åçš„accuracyå¯ä»¥æé«˜çš„éå¸¸é«˜ã€‚</p><p>è¿™ä¸ªå®éªŒå¯ä»¥è¯æ˜ï¼Œè¿™ä¸ªæ¨¡å‹æ˜¯å¯ä»¥æœ‰up boundçš„ã€‚</p></blockquote></li><li><p>DPT headså¯ä»¥é€å¸§é¢„æµ‹ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœGPUå†…å­˜å ç”¨</p></li></ul><h3 id="Patchifying"><a href="#Patchifying" class="headerlink" title="Patchifying"></a>Patchifying</h3><p>DINOv2 model</p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250406155610010.png" style="zoom:67%;"><h3 id="Differentiable-BA"><a href="#Differentiable-BA" class="headerlink" title="Differentiable BA"></a>Differentiable BA</h3><p>çœ‹èµ·æ¥ï¼ŒVGGTçš„BAå’ŒVGGSfMçš„BAæ˜¯å·®ä¸å¤šçš„ï¼Ÿ</p><p>ä¸è¿‡ä½œè€…æåˆ°å°½ç®¡Differentiable BAè¡¨ç°äº†è‰¯å¥½çš„æ€§èƒ½ï¼Œä½†æ˜¯ä¼šå¯¼è‡´æ¯ä¸ªtraining stepæ…¢4å€ã€‚</p><p>ä½œè€…æåˆ°å°½ç®¡ä»–ä»¬é€‰æ‹©åœ¨VGGTä¸­ä¸åŒ…å«Differentiable BAï¼Œä½†æ˜¯è¿™ä¹Ÿæ˜¯å¤§è§„æ¨¡æ— ç›‘ç£è®­ç»ƒçš„ä¸€ä¸ªæœ‰å‰é€”çš„æ–¹å‘ï¼Œå¯ä»¥åœ¨ç¼ºä¹æ˜ç¡®3Dæ³¨é‡Šçš„åœºæ™¯ä¸­ä½œä¸ºæœ‰æ•ˆçš„ç›‘ç£ä¿¡å·ï¼</p><h3 id="Single-view-Reconstruction"><a href="#Single-view-Reconstruction" class="headerlink" title="Single-view Reconstruction"></a>Single-view Reconstruction</h3><p>ä¸DUSt3Rå’ŒMASt3Rä¸åŒçš„æ˜¯ï¼ŒVGGTä¸éœ€è¦duplicate single imageã€‚</p><h3 id="Normalizing-Prediction"><a href="#Normalizing-Prediction" class="headerlink" title="Normalizing Prediction"></a>Normalizing Prediction</h3><p>ä½œè€…å¯¹training dataåšäº†normalizationï¼Œä½œè€…çš„è§‚ç‚¹æ˜¯ï¼šåƒDUSt3Rè¿™æ ·æŠŠå½’ä¸€åŒ–ç”¨åœ¨ç½‘ç»œé¢„æµ‹çš„å·¥ä½œï¼Œä¸æ˜¯æ”¶æ•›æ‰€å¿…éœ€çš„ï¼Œä¹Ÿä¸åˆ©äºæœ€ç»ˆçš„æ¨¡å‹æ€§èƒ½ï¼Œå¯èƒ½ä¼šåœ¨è®­ç»ƒé˜¶æ®µå¼•å…¥é¢å¤–çš„ä¸ç¨³å®šæ€§ã€‚</p><h2 id="ä¸ªäººæ€»ç»“"><a href="#ä¸ªäººæ€»ç»“" class="headerlink" title="ä¸ªäººæ€»ç»“"></a>ä¸ªäººæ€»ç»“</h2><p>è®ºæ–‡å†™çš„æŒºå¥½çš„ã€‚è¿™ç¯‡å·¥ä½œéå¸¸æœ‰æŒ–æ˜çš„æ½œåŠ›ï¼Œç®€å•çš„ç½‘ç»œç»“æ„ï¼Œç®€å•çš„loss functionï¼Œå¤§é“è‡³ç®€ã€‚</p><p>æ•´ç†ä¸€ä¸‹ä½œè€…æ¼”è®²æ—¶æåˆ°çš„å†…å®¹ï¼š</p><ul><li><p>Pairwise Designè¿™ç§æ–¹æ³•åœ¨æ·±åº¦å­¦ä¹ æ—¶ä»£æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¾ˆéš¾å…¨å±€è®­ç»ƒæ•´ä¸ªåœºæ™¯ï¼Œæœ‰ä¸€ç§è·¯çº¿æ˜¯è®­ç»ƒçš„æ—¶å€™per pairï¼Œæµ‹è¯•çš„æ—¶å€™æŠŠå¤šä¸ªpairçš„ç»“æœfusionèµ·æ¥ï¼Œè¿™æ ·æ•ˆæœå¾ˆå¥½ï¼Œä½†æ¨¡å‹æœ¬èº«æ˜¯è§ä¸åˆ°è¿™ä¸ªåœºæ™¯çš„ï¼›å¦ä¸€ä¸ªè·¯çº¿æ˜¯è®­ç»ƒçš„æ—¶å€™å¯¹æ¯ä¸€ä¸ªpairè¿›è¡Œfusionï¼Œä½†æ˜¯ä½œè€…ä¹‹å‰åšè¿‡ä¸€äº›å°è¯•ï¼Œè¿™æ ·çš„å°è¯•å¯¹GPU Memoryçš„è´Ÿæ‹…å¤ªå¤§äº†ï¼Œä½œè€…è®¤ä¸ºä¸æ˜¯ä¸€ä¸ªå¯è¡Œçš„æ–¹æ¡ˆã€‚</p></li><li><p><strong>æ•´ä¸ªæ¡†æ¶ä¸­ï¼Œæœ€ç‰¹è´¨åŒ–çš„æ˜¯Alternating-Attention</strong></p><p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250403210459889.png"></p><p>ä¸ºä»€ä¹ˆç”¨global attentionå‘¢ï¼Œå› ä¸ºå¤šå¸§è¾“å…¥ï¼Œæˆ‘ä»¬å¸Œæœ›å¤šå¸§è¾“å‡ºä¹Ÿå¾ˆç®€å•ã€‚</p><p>ä¸ºä»€ä¹ˆéœ€è¦frame attentionå‘¢ï¼Œæœ‰ä¸¤ä¸ªåŸå› ï¼š</p><ul><li><p>ç›´è§‰ä¸Šï¼Œå¤§é‡çš„global self attentionå±‚ä¼šè®©æ¨¡å‹confusedï¼Œtokensçš„ä¿¡æ¯ä¼šåœ¨åœºæ™¯çš„å±‚é¢ä¸Šè¢«å¹³å‡ã€‚</p></li><li><p>å¦å¤–ä¸€ä¸ªæ›´é‡è¦çš„åŸå› æ˜¯ï¼Œä¸å¸Œæœ›ç”¨frame indexåšposition embeddingï¼Œè¿™æ¶‰åŠåˆ°permutation equivariantçš„é—®é¢˜ã€‚</p><p>å½“è¾“å…¥å¤šå¼ å›¾ç‰‡é‡å»ºæ•´ä¸ªåœºæ™¯çš„æ—¶å€™ï¼Œé‡å»ºçš„é¡ºåºä¸åº”è¯¥éšç€å›¾ç‰‡è¾“å…¥çš„é¡ºåºè€Œæ”¹å˜çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ€§è´¨ã€‚</p><p>å¦‚æœç»™transformerç”¨frame index embeddingï¼Œè¿™æ ·çš„æ€§è´¨æ— æ³•ä¿è¯ã€‚</p><p>æ‰€ä»¥å¾—ç”¨Frame Attentionï¼Œè®©æ¨¡å‹è‡ªå‘çš„å­¦ä¹ æ¯ä¸€å¸§ç‰¹å¾èšç±»ã€‚</p></li></ul></li><li><p>è¿™ç§å®Œå…¨tokenizeåŒ–çš„è®¾è®¡ï¼Œä»¥åŠFrame Attentionä¿è¯äº†è®­ç»ƒçš„æ—¶å€™å¯ä»¥<strong>ç”¨éšæœºçš„å¸§æ•°</strong>è¿›è¡Œè®­ç»ƒã€‚æµ‹è¯•çš„æ—¶å€™æ¨¡å‹å±•ç°äº†å¾ˆå¥½çš„æ³›åŒ–èƒ½åŠ›ã€‚</p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250403210723658.png" style="zoom:33%;"></li><li><p>å³ä½¿ä»æ¥æ²¡æœ‰è®­ç»ƒè¿‡VGGTå­¦ä¹ single view taskï¼Œä½†æ˜¯VGGTçš„è¡¨ç°å’Œé¢†åŸŸå†…çš„SOTAåŸºæœ¬ç›¸å½“ã€‚</p><p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250403212448594.png"></p><p>ä½œè€…çš„ç†è§£ï¼šç”±äºAlternating-Attentionçš„è®¾è®¡ï¼Œå½“è¾“å…¥çš„å›¾ç‰‡ä¸º1çš„æ—¶å€™ï¼Œä¸éœ€è¦duplicateè¿™å¼ å›¾ç‰‡ï¼Œglobal attentionä¼šè‡ªç„¶çš„é€€åŒ–ä¸ºframe wised attentionï¼Œä¿è¯äº†VGGTçš„æ³›åŒ–æ€§ã€‚</p><p>å’Œæµ™å¤§å½­æ€è¾¾äº¤æµè¿™ä¸ªé—®é¢˜ï¼Œå½­çš„æ„è§æ˜¯ï¼šå¾ˆå¯èƒ½æ˜¯å› ä¸ºå¤šå¸§è®­ç»ƒæ¶ˆé™¤äº†monocular supervisionçš„ambiguityï¼Œæ‰€ä»¥æ¨¡å‹åè€Œå­¦å¾—æ›´å¥½ã€‚è¿™ä¸ªå¯èƒ½ä¼šå¯¹monocular depthé¢†åŸŸæœ‰ä¸€äº›æ–°çš„å¯å‘ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸‰ç»´é‡å»º </tag>
            
            <tag> å¤§æ¨¡å‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Visual Geometry Grounded Deep Structure From Motion</title>
      <link href="2025/04/05/paper-reading-vggsfm/"/>
      <url>2025/04/05/paper-reading-vggsfm/</url>
      
        <content type="html"><![CDATA[<h1 id="Visual-Geometry-Grounded-Deep-Structure-From-Motion"><a href="#Visual-Geometry-Grounded-Deep-Structure-From-Motion" class="headerlink" title="Visual Geometry Grounded Deep Structure From Motion"></a>Visual Geometry Grounded Deep Structure From Motion</h1><h2 id="Motivation"><a href="#Motivation" class="headerlink" title="Motivation"></a>Motivation</h2><p>è¿‘æœŸSfMçš„å·¥ä½œä»…ä»…æ˜¯é€šè¿‡æ·±åº¦å­¦ä¹ æ¥å¢å¼ºSfMä¸­çš„ç‰¹å®šæµç¨‹ï¼Œä½†æ•´ç†çš„pipelineè¿˜æ˜¯åŸå§‹çš„ã€ä¸å¯å¾®åˆ†çš„ã€‚</p><p>å› æ­¤ï¼Œè¿™ç¯‡æ–‡ç« æƒ³è¦æå‡ºä¸€ç§æ–°çš„pipelineï¼Œå³VGGSfMï¼Œå…¶ä¸­æ¯ä¸€ä¸ªcomponentéƒ½æ˜¯fully differentiableï¼</p><h2 id="Problem-Setting"><a href="#Problem-Setting" class="headerlink" title="Problem Setting"></a>Problem Setting</h2><p>å¯¹äºä¸€ç»„æ— åºå›¾åƒï¼ŒVGGSfMä¼°è®¡ç›¸æœºå†…å¤–å‚æ•°å’Œåœºæ™¯çš„ç‚¹äº‘ã€‚</p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405193417214.png" style="zoom:50%;"><h2 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h2><blockquote><p>è¿™éƒ¨åˆ†å†™çš„è¿˜æŒºå¥½çš„ï¼Œå˜å˜æˆªå›¾å°±å¥½äº†ï¼Œéƒ½èƒ½çœ‹æ‡‚ã€‚</p></blockquote><h3 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h3><p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405192848640.png"></p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405194835724.png" style="zoom:50%;"><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405195020099.png" style="zoom:50%;"><p>VGGSfMå¯ä»¥åˆ†è§£ä¸‹é¢å››ä¸ªé˜¶æ®µï¼š</p><ul><li>ã€åˆ©ç”¨å›¾åƒï¼Œä¼°è®¡çº¦æŸã€‘point tracking</li><li>ã€åˆ©ç”¨å›¾åƒå’Œçº¦æŸï¼Œä¼°è®¡ä½å§¿ã€‘initial camera estimator</li><li>ã€åˆ©ç”¨çº¦æŸå’Œä½å§¿ï¼Œä¼°è®¡ç‚¹äº‘ã€‘triangulator</li><li>ã€æ ¹æ®çº¦æŸã€ä½å§¿ã€ç‚¹äº‘ï¼Œè¿›è¡ŒBAï¼Œä¼˜åŒ–ä½å§¿å’Œç‚¹äº‘ã€‘Bundle Adjustment</li></ul><h3 id="Tracking"><a href="#Tracking" class="headerlink" title="Tracking"></a>Tracking</h3><p>è¿™éƒ¨åˆ†ä½¿ç”¨deep feed-forward tracking functionï¼ŒåŸºäºä¹‹å‰video point trackingçš„æ–¹æ³•æ¥å®ç°ã€‚</p><blockquote><p>éš¾æ€ªå»ºå…ƒåœ¨VGGTæ±‡æŠ¥çš„æ—¶å€™ä¼šè¯´ï¼Œå¸Œæœ›é€šè¿‡å¤§é‡çš„YouTubeè§†é¢‘æ€ä¹ˆæ€ä¹ˆã€‚ã€‚ã€‚VGGTæœ¬æ¥æ˜¯æ‰“ç®—æ²¿ç€VGGSfMåšä¸‹æ¥çš„ã€‚ã€‚ã€‚</p></blockquote><p>ä¸è¿‡è¿™éƒ¨åˆ†è®¾è®¡å’Œvideo point trackingæ˜¯æœ‰åŒºåˆ«çš„ï¼Œå› ä¸ºSfMçš„å›¾åƒæ˜¯æ— åºçš„ï¼Œä¸èƒ½å‡å®štemporal smoothness or orderingï¼Œå¹¶ä¸”éœ€è¦sub-pixel accuracyã€‚</p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405201719035.png" style="zoom:67%;"><h3 id="Learnable-camera-amp-point-initialization"><a href="#Learnable-camera-amp-point-initialization" class="headerlink" title="Learnable camera &amp; point initialization"></a>Learnable camera &amp; point initialization</h3><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405205009391.png" style="zoom:50%;"><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405205018729.png" style="zoom:50%;"><h3 id="Bundle-adjustment"><a href="#Bundle-adjustment" class="headerlink" title="Bundle adjustment"></a>Bundle adjustment</h3><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405205101630.png" style="zoom:50%;"><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405205221360.png" style="zoom:50%;"><h3 id="Method-details"><a href="#Method-details" class="headerlink" title="Method details"></a>Method details</h3><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405205323286.png" style="zoom:50%;"><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405205329959.png" style="zoom:50%;"><h2 id="Experiments"><a href="#Experiments" class="headerlink" title="Experiments"></a>Experiments</h2><p>ç•¥ï¼Œçœ‹è®ºæ–‡å§ã€‚</p><h2 id="ä¸ªäººæ€»ç»“"><a href="#ä¸ªäººæ€»ç»“" class="headerlink" title="ä¸ªäººæ€»ç»“"></a>ä¸ªäººæ€»ç»“</h2><p>è¯´ç™½äº†è¿™ç¯‡æ–‡ç« åšçš„äº‹æƒ…å°±æ˜¯ï¼š</p><ul><li>åŸºäºä¹‹å‰çš„video point trackerï¼Œè®¾è®¡äº†ä¸€ä¸ªDeep point trackerï¼Œä¸è¿‡è¿™ä¸ªtrackeræ”¯æŒæ— åºå›¾åƒçš„track</li><li>è®¾è®¡äº†ä¸€ä¸ªdeep camera predictorï¼ŒåŸºäºtransformerï¼Œä¼°è®¡å‡ºä¸€ä¸ªæ¯”è¾ƒç²—ç³™çš„pose</li><li>è®¾è®¡äº†ä¸€ä¸ªdeep triangulatorï¼ŒåŒæ ·åŸºäºtransformerï¼Œä¼°è®¡ä¸€ä¸ªinitial point cloud</li><li>ç”±äºç½‘ç»œç›´æ¥ä¼°è®¡å‡ºæ¥çš„poseå’Œpoint cloudè¯¯å·®æ¯”è¾ƒå¤§ï¼Œå†é€šè¿‡Differentiable BAæ¥è¿›è¡Œä¼˜åŒ–</li></ul><p>æ„Ÿè§‰è¿™äº›ideaï¼Œä»ç›®å‰æ¥çœ‹ä¼¼ä¹â€œæ¯ä¸ªäººéƒ½æƒ³çš„åˆ°â€ï¼Œä½†ç°åœ¨å·²ç»ä¸æ˜¯2023å¹´äº†ã€‚</p><blockquote><p>è®­ç»ƒçš„éƒ¨åˆ†è¿˜æŒºå¥½çš„ï¼Œç”¨çš„éšæœºå¸§æ•°ã€‚FLAREéƒ½2025å¹´äº†ï¼Œè¿˜åœ¨å›ºå®š8viewsçš„è¾“å…¥ã€‚</p></blockquote><p><strong>ä»æ•ˆæœä¸Šæ¥çœ‹ï¼Œdifferentiable BAè¿˜æ˜¯æ¯”è¾ƒé‡è¦çš„ï¼Œéœ€è¦å…³æ³¨ä¸€ä¸‹ï¼</strong></p><ul><li>å¼•ç”¨ï¼šLuis Pineda, Taosha Fan, Maurizio Monge, Shobha Venkataraman, Paloma Sodhi, Ricky TQ Chen, Joseph Ortiz, Daniel DeTone, Austin Wang, Stuart Anderson, et al. Theseus: A library for differentiable nonlinear optimization. Advances in Neural Information Processing Systems, 35:3801â€“ 3818, 2022. 2, 5</li><li>ä»£ç ï¼š<a href="https://github.com/facebookresearch/theseus">https://github.com/facebookresearch/theseus</a></li><li>è®ºæ–‡ï¼š<a href="https://arxiv.org/abs/2207.09442">https://arxiv.org/abs/2207.09442</a></li></ul><p>==<strong>ç–‘é—®ï¼š</strong>ä¸ºä»€ä¹ˆéœ€è¦differential BAï¼Ÿ==</p>]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸‰ç»´é‡å»º </tag>
            
            <tag> å¤§æ¨¡å‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FLAREï¼šFeed-forward Geometry, Appearance and Camera Estimation from Uncalibrated Sparse Views</title>
      <link href="2025/04/03/paper-reading-flare/"/>
      <url>2025/04/03/paper-reading-flare/</url>
      
        <content type="html"><![CDATA[<h1 id="FLARE-Feed-forward-Geometry-Appearance-and-Camera-Estimation-from-Uncalibrated-Sparse-Views"><a href="#FLARE-Feed-forward-Geometry-Appearance-and-Camera-Estimation-from-Uncalibrated-Sparse-Views" class="headerlink" title="FLARE: Feed-forward Geometry, Appearance and Camera Estimation from Uncalibrated Sparse Views"></a>FLARE: Feed-forward Geometry, Appearance and Camera Estimation from Uncalibrated Sparse Views</h1><h2 id="Motivation-amp-Contributions"><a href="#Motivation-amp-Contributions" class="headerlink" title="Motivation &amp; Contributions"></a>Motivation &amp; Contributions</h2><p><strong>Problem Settingï¼š</strong>infer high-quality camera poses and 3D geometry from uncalibrated sparse-view images (i.e., as few as 2-8 inputs), which is a challenging yet practical setting in real-world applications.</p><p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250403153051119.png"></p><p>Primary Contributions:</p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405150551279.png" style="zoom:50%;"><h2 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h2><p><strong>å…³é”®è¯</strong>ï¼šfeed-forward modelï¼Œcascaded learning paradigm</p><p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405151215026.png"></p><h3 id="Neural-Pose-Predictor"><a href="#Neural-Pose-Predictor" class="headerlink" title="Neural Pose Predictor"></a>Neural Pose Predictor</h3><p>å—åˆ°posediffusionã€vggsfmç­‰å·¥ä½œçš„å½±å“ï¼Œè¿™ç¯‡å·¥ä½œä¹Ÿæ”¾å¼ƒäº†feature matchingï¼Œå¹¶ä¸”å°†ä½å§¿ä¼°è®¡é—®é¢˜è¡¨è¿°ä¸ºimage space to camera spaceçš„direct transformationé—®é¢˜ï¼Œé€šè¿‡end-to-end transformer modelæ¥æ±‚è§£ã€‚</p><blockquote><p>æ­¤å¤„ä½œè€…æåˆ°äº†ä¸€ä¸ªé‡è¦çš„è§‚å¯Ÿï¼šWe observe that the estimated poses do not need to be very accurateâ€”only approximating the ground truth distribution is enough. This aligns with our key insight: camera poses, even imperfect, provide essential geometric priors and spatial initialization, which significantly reduces the complexity for geometry and appearance reconstruction.</p><p>å³ä¼°è®¡çš„poseä¸éœ€è¦éå¸¸ç²¾ç¡®ï¼Œåªè¦èƒ½æä¾›å¿…è¦çš„å‡ ä½•å…ˆéªŒå’Œç©ºé—´åˆå§‹åŒ–ï¼Œä¹Ÿèƒ½å¤Ÿé™ä½å‡ ä½•å’Œå¤–è§‚é‡å»ºçš„å¤æ‚æ€§ã€‚</p></blockquote><p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405162614103.png"></p><h3 id="Multi-view-Geometry-Estimation"><a href="#Multi-view-Geometry-Estimation" class="headerlink" title="Multi-view Geometry Estimation"></a>Multi-view Geometry Estimation</h3><p>è¿™éƒ¨åˆ†çš„æ€è·¯ï¼š Our key idea is to first learn camera-centric geometry in local frames (camera coordinate system) and then build a neural scene projector to transform it into a global world coordinate system with the guidance of estimated poses.</p><blockquote><p>å…ˆå­¦ä¹ å±€éƒ¨çš„å‡ ä½•ï¼Œä¹‹åå†åœ¨poseçš„æŒ‡å¯¼ä¸‹è½¬æ¢åˆ°å…¨å±€åæ ‡ç³»</p><blockquote><p>ç–‘é—®ï¼šæ—¢ç„¶å·²ç»æœ‰äº†FLAREè¿™æ ·çš„å·¥ä½œï¼Œposeå¯ä»¥æŒ‡å¯¼ç½‘ç»œæ¥æ›´å¥½çš„é‡å»ºã€‚é‚£ä¹ˆï¼Œç»™VGGTæ¥ä¸ŠBAåå¤„ç†çš„æ„ä¹‰åˆåœ¨å“ªé‡Œå‘¢ï¼Ÿ</p></blockquote></blockquote><p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405162554447.png"></p><h4 id="Camera-centric-Geometry-Estimation"><a href="#Camera-centric-Geometry-Estimation" class="headerlink" title="Camera-centric Geometry Estimation"></a>Camera-centric Geometry Estimation</h4><p>image tokens + camera tokensè¾“å…¥ï¼Œè¾“å‡ºlocal point tokenså’Œrefined poseã€‚</p><p>é€šè¿‡DPT-based decoderå¾—åˆ°local dense point mapå’Œconfidence mapã€‚</p><p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405163131880.png"></p><h4 id="Global-Geometry-Projection"><a href="#Global-Geometry-Projection" class="headerlink" title="Global Geometry Projection"></a>Global Geometry Projection</h4><p>local point tokenså’Œrefined poseä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºglobal image tokensã€‚</p><p>é€šè¿‡DPT-based decoderå¾—åˆ°global dense point mapå’Œconfidence mapã€‚</p><p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405163139834.png"></p><h3 id="3D-Gaussians-for-Appearance-Modeling"><a href="#3D-Gaussians-for-Appearance-Modeling" class="headerlink" title="3D Gaussians for Appearance Modeling"></a>3D Gaussians for Appearance Modeling</h3><p>ç±»ä¼¼äºsplatt3rï¼Œé€šè¿‡gaussian headæ¥é¢„æµ‹gaussian parametersã€‚</p><p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405163345749.png"></p><h3 id="Training-Loss"><a href="#Training-Loss" class="headerlink" title="Training Loss"></a>Training Loss</h3><p>ç”±äºè¿™æ˜¯ä¸€ä¸ªjoint learning frameworkï¼Œå› æ­¤ä½¿ç”¨ç”±camera pose lossã€geometry lossã€Gaussian Splatting lossç»„åˆæˆçš„multi-task lossæ¥è¿›è¡Œè®­ç»ƒã€‚</p><p>å…¶ä¸­camera pose losså‚è€ƒVGGSFM</p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405164322954.png" style="zoom:50%;"><p>è€Œgeometry lossç±»ä¼¼dust3r</p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405164403330.png" style="zoom:50%;"><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405164505734.png" style="zoom:50%;"><p>Gaussian Splatting losså¦‚ä¸‹æ‰€ç¤ºï¼Œè¿˜åŒ…æ‹¬äº†depth lossï¼Œç”¨depth anythingæ¥ä¼°è®¡depth</p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405164654361.png" style="zoom:50%;"><p>æœ€ç»ˆï¼Œtotal lossä¸º</p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405164709142.png" style="zoom:67%;"><h2 id="Experiment"><a href="#Experiment" class="headerlink" title="Experiment"></a>Experiment</h2><p>æ¨¡å‹ä½¿ç”¨8 viewsä½œä¸ºinputï¼ˆè€ŒVGGTæ˜¯éšæœºçš„viewsï¼‰ã€‚</p><p>å…¶ä»–çš„å®éªŒçœ‹è®ºæ–‡å§ã€‚ã€‚ã€‚</p><p><img src="/images/paper-reading-FLARE-VGGSFM-VGGT/image-20250405165448598.png"></p><p>ä½¿ç”¨camera centricï¼Œå¯ä»¥è¿«ä½¿ç½‘ç»œå»å…³æ³¨å±€éƒ¨çš„å‡ ä½•ï¼Œè¿™æ ·å°±ä¸ä¼šè¿‡å¤šå…³æ³¨global geometryã€‚</p><p>ä¸Šé¢w/o camera centricæ˜¯åŒæ ·çš„å‚æ•°é‡è®­ç»ƒä¸€å‘¨çš„ç»“æœã€‚</p><h2 id="ä¸ªäººæ€»ç»“"><a href="#ä¸ªäººæ€»ç»“" class="headerlink" title="ä¸ªäººæ€»ç»“"></a>ä¸ªäººæ€»ç»“</h2><p>æˆ‘å¯¹ç½‘ç»œä¼°è®¡coarse poseï¼Œå†refineï¼Œä¹‹åæŠŠrefine poseç”¨äºä¼°è®¡global sceneçš„è¿‡ç¨‹éå¸¸çš„æ„Ÿå…´è¶£ã€‚</p><p>FLAREä¼°è®¡local geometryçš„æ€è·¯ï¼Œå…¶å®å’ŒVGGTä¼°è®¡depthä¸è°‹è€Œåˆï¼Œ<strong>è¿™ä¸¤ä¸ªå·¥ä½œæˆ–è®¸éªŒè¯äº†ä¸€ç‚¹ï¼šestimate pose &amp; local geometryï¼Œå†è¿›è¡Œglobal reconstructionï¼Œæ•ˆæœå¯èƒ½ä¼šæ›´å¥½ï¼</strong></p><p><strong>å¦å¤–ï¼Œå·²çŸ¥çš„poseå¦‚ä½•å¸®åŠ©ç½‘ç»œæ›´å¥½çš„é‡å»ºï¼Œæ˜¯ä¸ªäººè®¤ä¸ºéå¸¸å€¼å¾—å…³æ³¨çš„é—®é¢˜ã€‚ç±»ä¼¼äºprompt depth anythingï¼Œå…¶å®ä¹Ÿå¯ä»¥åšä¸€ä¸ªprompt pose anythingã€‚æˆ–è€…ï¼Œæˆ‘ä»¬åœ¨VGGTçš„åŸºç¡€ä¸Šï¼Œå¼•å…¥poseçš„æŒ‡å¯¼ï¼Œå¼•å…¥modern BAã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸‰ç»´é‡å»º </tag>
            
            <tag> å¤§æ¨¡å‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DenseSplatï¼šDensifying Gaussian Splatting SLAM with Neural Radiance Prior</title>
      <link href="2025/02/22/paper-reading-densesplat/"/>
      <url>2025/02/22/paper-reading-densesplat/</url>
      
        <content type="html"><![CDATA[<h1 id="DenseSplat-Densifying-Gaussian-Splatting-SLAM-with-Neural-Radiance-Prior"><a href="#DenseSplat-Densifying-Gaussian-Splatting-SLAM-with-Neural-Radiance-Prior" class="headerlink" title="DenseSplat: Densifying Gaussian Splatting SLAM with Neural Radiance Prior"></a>DenseSplat: Densifying Gaussian Splatting SLAM with Neural Radiance Prior</h1><img src="/images/paper-reading-DenseSplat/image-20250222160543971.png"><blockquote><p>ä»è¿™å¼ å›¾çœ‹ï¼ŒGPUå†…å­˜å ç”¨è¿˜æ˜¯æŒºé«˜ï¼Œè€Œä¸”fpsä¹Ÿæ²¡æœ‰ç‰¹åˆ«çªå‡ºã€‚</p></blockquote><p><strong>è®ºæ–‡çš„motivation</strong>ï¼šGaussian SLAM systems excel in real-time rendering and fine-grained reconstruction compared to NeRF-based systems. However, their reliance on extensive keyframes is impractical for deployment in real-world robotic systems, which typically operate under sparse-view conditions that can result in substantial holes in the map.</p><blockquote><p>è¿™ä¸ªmotivationçœ‹ç€ï¼Œä¸æ˜¯å¾ˆä»¤äººä¿¡æœ</p></blockquote><p><strong>è®ºæ–‡çš„æ ¸å¿ƒæ€è·¯</strong>ï¼šTo address these challenges, we propose <strong>employing NeRF priors to densify the Gaussian SLAM system</strong>. This densification is achieved through two primary mechanisms using the NeRF model: (1) its interpolation capabilities efficiently close the gaps in the map with densely positioned Gaussian primitives, and (2) it offers a robust initialization of Gaussian primitives that can be densified using extremely sparse keyframes. Moreover, NeRF-based sampling ensures an even distribution of Gaussian primitives aligned with the scene geometry and allows for manageable granularity in the scene representation through specific sampling ratios. Coupled with loop closure and bundle adjustment (BA), our method delivers state-of-the art performance across large-scale synthetic and real-world datasets.</p><blockquote><p>æ ¸å¿ƒæ€è·¯å°±æ˜¯æ ‡é»‘çš„è¿™å¥è¯ï¼šä½¿ç”¨NeRFå…ˆéªŒæ¥å®ç°Gaussiançš„è‡´å¯†åŒ–ã€‚</p></blockquote><p><strong>è®ºæ–‡çš„contribution</strong>ï¼š</p><ul><li><p>We propose DenseSplat, the first SLAM system combining the advantages of NeRF and 3DGS, capable of realtime tracking, mapping, and loop correction using only sparsely sampled keyframes.</p><blockquote><p>èƒ½å¤Ÿåªä½¿ç”¨ç¨€ç–å…³é”®å¸§è¿è¡Œæ•´ä¸ªSLAMç³»ç»Ÿã€‚</p></blockquote></li><li><p>By leveraging NeRF priors, DenseSplat effectively fills the gaps from unobserved or obstructed viewpoints.</p><blockquote><p>åœ¨NeRFçš„å…ˆéªŒä¸‹ï¼Œå¯ä»¥æœ‰æ•ˆåœ°å¡«è¡¥ç©ºæ´ã€‚</p></blockquote></li><li><p>We implement geometry-aware primitive sampling and pruning strategies that control the granularity of the Gaussian representation and prune inactive primitives, ensuring a high-fidelity map and real-time processing.</p><blockquote><p>å‡ ä½•æ„ŸçŸ¥çš„åŸè¯­é‡‡æ ·å’Œä¿®å‰ªç­–ç•¥ï¼Œæ§åˆ¶é«˜æ–¯è¡¨ç¤ºçš„ç²’åº¦å’Œä¿®å‰ªä¸æ´»è·ƒçš„åŸè¯­</p></blockquote></li><li><p>We compare our method with state-of-the-art (SOTA) approaches on multiple datasets, including a challenging large-scale apartment dataset, where DenseSplat achieves superior performance.</p><blockquote><p>SOTAï¼Œè€Œä¸”è·‘äº†ä¸€ä¸ªå¤§è§„æ¨¡å…¬å¯“çš„æ•°æ®é›†ï¼Ÿ</p></blockquote></li></ul><h2 id="System-Pipeline"><a href="#System-Pipeline" class="headerlink" title="System Pipeline"></a>System Pipeline</h2><p><img src="/images/paper-reading-DenseSplat//image-20250222161430992.png"></p><blockquote><p><strong>é—®é¢˜ï¼š</strong>NeRFä¸3DGSç›¸æ¯”ï¼Œæœ‰å¾ˆå¥½çš„æ’å€¼èƒ½åŠ›ï¼Œè¿™å¸¦æ¥äº†å¾ˆå¥½çš„ç©ºæ´å¡«è¡¥çš„èƒ½åŠ›ã€‚å¦‚æœä¸ç”¨NeRFï¼Œ3DGSå¯èƒ½åªèƒ½å¡«å……æ‹åˆ°çš„éƒ¨åˆ†ï¼Œå¯¹äºæ‹æ‘„æ­»è§’è¿˜æ˜¯æ— æ³•å¡«è¡¥ç©ºæ´ã€‚</p></blockquote><p>ç³»ç»Ÿåˆ†ä¸ºTrackingå’ŒMappingã€‚</p><ul><li><p>Trackingï¼š</p><p>è®ºæ–‡æåˆ°çš„åšæ³•ï¼šNeRF-based Camera Trackingï¼Œapply loop closure and bundle adjustment based on the fine-grained Gaussian map to correct accumulative drift.</p><blockquote><p>è¯´ç™½äº†å°±æ˜¯Trackingå°±æ˜¯ä¸€ä¸ªå°çš„NeRF SLAMã€‚ã€‚ã€‚ç„¶åæ‰‹åŠ¨æ¥äº†ä¸€ä¸ªgaussian mappingçš„åç«¯ã€‚</p></blockquote></li><li><p>Mappingï¼š</p><p>è®ºæ–‡æåˆ°çš„åšæ³•ï¼šFine-grained Gaussian Mapï¼Œè¿™éƒ¨åˆ†è®²çš„æœ‰ç‚¹ç‚¹æ··ä¹±ï¼Œè¿˜æ˜¯çœ‹è®ºæ–‡äº†ã€‚</p></li><li><p>Loop Closureï¼š</p><p>éå¸¸åƒµç¡¬çš„åœ°å›¾çŸ«æ­£ç­–ç•¥ï¼Œä¼å›¾é€šè¿‡ä¼˜åŒ–çš„æ–¹å¼æ¥å®ç°loop correctï¼Œè®ºæ–‡çš„è¯´æ³•æ˜¯ï¼šour method supports real-time re-rendering and the correction of BA-induced drift errors.</p></li></ul><p>ä»è¿™äº›ä¿¡æ¯æ¥çœ‹çš„è¯ï¼Œæˆ‘ä¸¥é‡æ€€ç–‘è¿™æ˜¯ä¸€ä¸ªåŸºäºCo-SLAMå¥—äº†ä¸ª3DGS mappingçš„å·¥ä½œã€‚</p><h2 id="Experiment"><a href="#Experiment" class="headerlink" title="Experiment"></a>Experiment</h2><p>çœ‹å®éªŒçš„è¯ï¼Œæ¯”è¾ƒçš„è¿˜æ˜¯è€ä¸€å¥—ï¼Œåšå¾—å¥½çš„SLAMç³»ç»Ÿå°±é‚£ä¹ˆå‡ ä¸ªï¼š</p><img src="/images/paper-reading-DenseSplat//image-20250222221852741.png" style="zoom:67%;"><img src="/images/paper-reading-DenseSplat/image-20250222221907343.png" style="zoom:67%;"><img src="/images/paper-reading-DenseSplat/image-20250222222139322.png" style="zoom:67%;"><blockquote><p>ä»è¿™ä¸ªå®éªŒæ¥çœ‹çš„è¯ï¼Œå¾ˆå¤šåœ°æ–¹éƒ½æ¯”è¾ƒæ¥è¿‘Co-SLAMçš„è¡¨ç°ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> 3D Gaussian Splatting </tag>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ³•çº¿å›¾çš„åæ ‡ç³»è½¬æ¢</title>
      <link href="2025/02/21/normal-transform/"/>
      <url>2025/02/21/normal-transform/</url>
      
        <content type="html"><![CDATA[<h1 id="æ³•çº¿å›¾çš„åæ ‡ç³»è½¬æ¢"><a href="#æ³•çº¿å›¾çš„åæ ‡ç³»è½¬æ¢" class="headerlink" title="æ³•çº¿å›¾çš„åæ ‡ç³»è½¬æ¢"></a>æ³•çº¿å›¾çš„åæ ‡ç³»è½¬æ¢</h1><p>ä¹™å·³æ­£æœˆå»¿å››æ—¥ï¼Œä½™å¯Ÿä½å§¿ã€æ·±åº¦è¯¸å›¾ï¼Œå…¶åˆ¶å¼å„å¼‚ï¼Œå­˜æ³•äº¦æ®Šã€‚å°¤ç”šè€…ï¼Œæ³•çº¿å›¾æ‰€è½½ä¹‹å‘ï¼Œæˆ–å—è¾•åŒ—è¾™ï¼Œä¸èƒ½ç›¸å¥‘ã€‚é‚ç©·å››åå…«å˜ï¼Œé€ä¸€è¯•ä¹‹ï¼Œç»ˆå¾—æ­£è§£ã€‚ä¹ƒçº‚å…¶æ³•ï¼Œå½•äºä¸‹æ–¹ï¼Œä»¥èµ„åå­¦ï¼Œåšè¯¸å›ä¸€å“‚è€³ã€‚</p><p><img src="/images/normal-transform/normals.png"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> os<span class="token keyword">import</span> cv2<span class="token keyword">from</span> itertools <span class="token keyword">import</span> permutations<span class="token punctuation">,</span> product<span class="token keyword">def</span> <span class="token function">apply_channel_swap</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> swap_order<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    Apply channel swap to the image based on the given channel swap order.    swap_order should be a tuple of indices, e.g., (0, 1, 2) means no swap.    """</span>    <span class="token keyword">return</span> img<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">,</span> swap_order<span class="token punctuation">]</span><span class="token keyword">def</span> <span class="token function">invert_channel</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> channel_indices<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    Invert specific channels in the image (255 - value for the given channels).    channel_indices is a list of channel indices to be inverted (e.g., [0, 1] for R and G).    """</span>    img_copy <span class="token operator">=</span> img<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> channel <span class="token keyword">in</span> channel_indices<span class="token punctuation">:</span>        img_copy<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">,</span> channel<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span> <span class="token operator">-</span> img_copy<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">,</span> channel<span class="token punctuation">]</span>    <span class="token keyword">return</span> img_copy<span class="token comment"># è¯»å–Aç»„å’ŒBç»„å›¾åƒ</span>base_path <span class="token operator">=</span> <span class="token string">'/media/Dataset/room'</span>A_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>base_path<span class="token punctuation">,</span> <span class="token string">'normals_from_gm-prepare'</span><span class="token punctuation">)</span>B_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>base_path<span class="token punctuation">,</span> <span class="token string">'normals_from_pretrain'</span><span class="token punctuation">)</span>img_name <span class="token operator">=</span> <span class="token string">'00000011.png'</span>A_img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>A_path<span class="token punctuation">,</span> img_name<span class="token punctuation">)</span><span class="token punctuation">)</span>B_img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>B_path<span class="token punctuation">,</span> img_name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># è·å–æ‰€æœ‰é€šé“äº¤æ¢ç»„åˆ</span>swap_orders <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>permutations<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># è·å–æ‰€æœ‰å–åæ“ä½œçš„ç»„åˆ</span>invert_combinations <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>product<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">]</span><span class="token punctuation">,</span> repeat<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># å¯¹æ¯ä¸ªé€šé“æ˜¯å¦å–å</span><span class="token comment"># ä¿å­˜æ¯ç§æ“ä½œç»„åˆçš„ç»“æœ</span>output_path <span class="token operator">=</span> <span class="token string">'output'</span>os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>output_path<span class="token punctuation">,</span> exist_ok<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token keyword">for</span> swap_order <span class="token keyword">in</span> swap_orders<span class="token punctuation">:</span>    <span class="token keyword">for</span> invert_comb <span class="token keyword">in</span> invert_combinations<span class="token punctuation">:</span>        <span class="token comment"># åº”ç”¨é€šé“äº¤æ¢</span>        swapped_B_img <span class="token operator">=</span> apply_channel_swap<span class="token punctuation">(</span>B_img<span class="token punctuation">,</span> swap_order<span class="token punctuation">)</span>        <span class="token comment"># æ ¹æ®å–åæ“ä½œé€‰æ‹©è¦å–åçš„é€šé“</span>        channels_to_invert <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i<span class="token punctuation">,</span> invert <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>invert_comb<span class="token punctuation">)</span> <span class="token keyword">if</span> invert<span class="token punctuation">]</span>        inverted_B_img <span class="token operator">=</span> invert_channel<span class="token punctuation">(</span>swapped_B_img<span class="token punctuation">,</span> channels_to_invert<span class="token punctuation">)</span>        <span class="token comment"># ç”Ÿæˆæ“ä½œåç§°å­—ç¬¦ä¸²</span>        swap_order_str <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'RGB'</span><span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> swap_order<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># e.g., 'RGB', 'RBG', etc.</span>        invert_str <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'1'</span> <span class="token keyword">if</span> invert <span class="token keyword">else</span> <span class="token string">'0'</span> <span class="token keyword">for</span> invert <span class="token keyword">in</span> invert_comb<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># e.g., '000', '010', etc.</span>        adjusted_img_name <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"adjusted_B_</span><span class="token interpolation"><span class="token punctuation">{</span>swap_order_str<span class="token punctuation">}</span></span><span class="token string">_invert_</span><span class="token interpolation"><span class="token punctuation">{</span>invert_str<span class="token punctuation">}</span></span><span class="token string">.png"</span></span>        <span class="token comment"># ä¿å­˜è°ƒæ•´åçš„æ³•çº¿å›¾</span>        cv2<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>output_path<span class="token punctuation">,</span> adjusted_img_name<span class="token punctuation">)</span><span class="token punctuation">,</span> inverted_B_img<span class="token punctuation">)</span>cv2<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>output_path<span class="token punctuation">,</span> <span class="token string">"A.png"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> A_img<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åæ ‡ç³»è½¬æ¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨macä¸ubuntuä¸Šéƒ¨ç½²DeepSeek-R1æ¨¡å‹ &amp; 7bå’Œ32bæ¨¡å‹çš„ç®€å•å¯¹æ¯”æµ‹è¯•</title>
      <link href="2025/01/28/deepseek-r1-deploy/"/>
      <url>2025/01/28/deepseek-r1-deploy/</url>
      
        <content type="html"><![CDATA[<h1 id="åœ¨macä¸ubuntuä¸Šéƒ¨ç½²DeepSeek-R1æ¨¡å‹-amp-7bå’Œ32bæ¨¡å‹çš„å¯¹æ¯”æµ‹è¯•"><a href="#åœ¨macä¸ubuntuä¸Šéƒ¨ç½²DeepSeek-R1æ¨¡å‹-amp-7bå’Œ32bæ¨¡å‹çš„å¯¹æ¯”æµ‹è¯•" class="headerlink" title="åœ¨macä¸ubuntuä¸Šéƒ¨ç½²DeepSeek-R1æ¨¡å‹ &amp; 7bå’Œ32bæ¨¡å‹çš„å¯¹æ¯”æµ‹è¯•"></a>åœ¨macä¸ubuntuä¸Šéƒ¨ç½²DeepSeek-R1æ¨¡å‹ &amp; 7bå’Œ32bæ¨¡å‹çš„å¯¹æ¯”æµ‹è¯•</h1><p><strong>ç¬”è€…çš„ç¡¬ä»¶é…ç½®</strong></p><p>macç«¯ï¼šmacbook air m1ï¼Œ16Gå†…å­˜</p><p>ubuntuç«¯ï¼ši7-13700kf + RTX 4090ï¼Œ32Gå†…å­˜</p><h2 id="å®‰è£…Ollama"><a href="#å®‰è£…Ollama" class="headerlink" title="å®‰è£…Ollama"></a>å®‰è£…Ollama</h2><p>è®¿é—®ä¸‹é¢çš„ç½‘ç«™ï¼Œä¸‹è½½å¯¹åº”æ“ä½œç³»ç»Ÿçš„å®‰è£…åŒ…ï¼Œæ ¹æ®æç¤ºå®‰è£…ã€‚</p><p><a href="https://ollama.com/download">https://ollama.com/download</a></p><h3 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h3><p>å®‰è£…å®Œä¹‹åï¼Œç›´æ¥æ‰“å¼€ï¼ŒçŠ¶æ€æ ä¼šå‡ºæ¥ä¸€åªå°ç¾Šé©¼ã€‚</p><p><img src="/images/deepseek-r1-deploy/image_1.png"></p><p>æ‰“å¼€macçš„ç»ˆç«¯è¾“å…¥<code>ollama -v</code>ï¼Œæœ‰å¦‚ä¸‹çš„è¾“å‡ºå°±è¯´æ˜å®‰è£…æˆåŠŸäº†ã€‚</p><p><img src="/images/deepseek-r1-deploy/image_2.png"></p><h3 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h3><p>ubuntué€šè¿‡ä¸‹é¢çš„æŒ‡ä»¤å¯ä»¥å¾ˆè½»æ¾çš„å®Œæˆå®‰è£…ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://ollama.com/install.sh <span class="token operator">|</span> <span class="token function">sh</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/images/deepseek-r1-deploy/image_3.png"></p><p>å’Œmacä¸€æ ·ï¼Œç»ˆç«¯è¾“å…¥<code>ollama -v</code>ï¼Œæœ‰å¦‚ä¸‹çš„è¾“å‡ºå°±è¯´æ˜å®‰è£…æˆåŠŸäº†ã€‚</p><p><img src="/images/deepseek-r1-deploy/image_4.png"></p><h2 id="æ¨¡å‹çš„é€‰æ‹©ä¸éƒ¨ç½²"><a href="#æ¨¡å‹çš„é€‰æ‹©ä¸éƒ¨ç½²" class="headerlink" title="æ¨¡å‹çš„é€‰æ‹©ä¸éƒ¨ç½²"></a>æ¨¡å‹çš„é€‰æ‹©ä¸éƒ¨ç½²</h2><p>æ‰“å¼€ä¸‹é¢çš„ç½‘ç«™ï¼Œæ ¹æ®ç”µè„‘çš„é…ç½®ï¼Œé€‰æ‹©åˆé€‚çš„æ¨¡å‹è¿›è¡Œéƒ¨ç½²ã€‚</p><p><a href="https://ollama.com/library/deepseek-r1:1.5b">https://ollama.com/library/deepseek-r1:1.5b</a></p><h3 id="macOS-1"><a href="#macOS-1" class="headerlink" title="macOS"></a>macOS</h3><p>ç¬”è€…è®¤ä¸ºmacæœ‰16Gå†…å­˜çš„è¯ï¼Œå¯ä»¥å…ˆå°è¯•ä¸€ä¸‹7bçš„æ¨¡å‹ã€‚</p><p><img src="/images/deepseek-r1-deploy/image_6.png"></p><p>çœ‹æ¥M1 16Gè¿˜æ˜¯å¯ä»¥é¡ºåˆ©è¿è¡Œ7bçš„æ¨¡å‹ï¼Œå ç”¨çš„å†…å­˜åœ¨2-4Gä¹‹é—´ã€‚</p><p><img src="/images/deepseek-r1-deploy/image_7.png"></p><p><img src="/images/deepseek-r1-deploy/image_8.png"></p><h3 id="Ubuntu-1"><a href="#Ubuntu-1" class="headerlink" title="Ubuntu"></a>Ubuntu</h3><p>Ubuntuçš„å†…å­˜æœ‰ç‚¹åƒç´§ï¼Œæ‹…å¿ƒæ¨¡å‹å¯¹å†…å­˜ä¹Ÿæœ‰è¦æ±‚ï¼Œç¬”è€…ç»™äº†64Gçš„swapç©ºé—´ï¼Œå°è¯•è¿è¡Œ32bçš„æ¨¡å‹ã€‚</p><p><img src="/images/deepseek-r1-deploy/image_5.png"></p><p>èƒ½å¤Ÿé¡ºåˆ©è¿è¡Œ32bçš„æ¨¡å‹ï¼Œå†…å­˜å ç”¨ä¸å¤šï¼Œæ˜¾å­˜å äº†22Gã€‚</p><p><img src="/images/deepseek-r1-deploy/image_9.png"></p><p><img src="/images/deepseek-r1-deploy/image_10.png"></p><h2 id="7bå’Œ32bæ¨¡å‹çš„å¯¹æ¯”æµ‹è¯•"><a href="#7bå’Œ32bæ¨¡å‹çš„å¯¹æ¯”æµ‹è¯•" class="headerlink" title="7bå’Œ32bæ¨¡å‹çš„å¯¹æ¯”æµ‹è¯•"></a>7bå’Œ32bæ¨¡å‹çš„å¯¹æ¯”æµ‹è¯•</h2><p>ç¬”è€…å‡†å¤‡äº†å‡ ç±»è‡ªå·±å¸¸é—®ChatGPTçš„é—®é¢˜ï¼Œæ¯”è¾ƒä¸€ä¸‹7bå’Œ32bæ¨¡å‹ã€‚</p><p><strong>æµ‹è¯•çš„é—®é¢˜æ¯”è¾ƒå°‘ï¼Œä»£ç éƒ¨åˆ†å†…å®¹è¾ƒå¤šï¼Œéšæœºæ€§è¿˜æŒºå¤§çš„ã€‚è¿™é‡Œåªæ€»ç»“è¿™ä¸‰ä¸ªé—®é¢˜çš„è¡¨ç°ï¼š</strong></p><ul><li><p>7bå’Œ32båœ¨ä»£ç è§£æä¸Šå·®ä¸å¤ªå¤šï¼Œä¸ªäººçœ‹ä¸å‡ºåŒºåˆ«æ¥ï¼›</p></li><li><p>7båœ¨ä»£ç æŠ¥é”™é—®é¢˜ä¸Šï¼Œåªç”Ÿæˆäº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå¯èƒ½éœ€è¦å¤šæ¬¡äº¤äº’æ‰èƒ½é¡ºåˆ©è§£å†³é—®é¢˜ï¼›</p><p>32bçš„ç»“æœå’ŒChatGPTæ¯”è¾ƒæ¥è¿‘ï¼Œç»™äº†å‡ ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªç›´æ¥èƒ½è§£å†³é—®é¢˜çš„ï¼›</p></li><li><p>åœ¨ä»£ç ç”Ÿæˆä¸Šï¼Œéœ€è¦è®¡ç®—çš„æ˜¯ç›¸æœºè§†é”¥ä½“ï¼Œæ€»å…±æ˜¯5ä¸ªç‚¹ã€‚7bç»™çš„ä»£ç æ˜¯é”™è¯¯çš„ï¼ŒæŠŠç›¸æœºåé¢ä¸å¯è§çš„åŒºåŸŸä¹Ÿè€ƒè™‘è¿›å»äº†ï¼Œç®—äº†8ä¸ªç‚¹ï¼›32bçš„ä»£ç æ²¡æœ‰é—®é¢˜ï¼Œè®¡ç®—çš„æ˜¯ç›¸æœºè§†é”¥ä½“ã€‚</p></li></ul><p>ä¸‹é¢çš„å†…å®¹æ„Ÿå…´è¶£å¯ä»¥çœ‹çœ‹ã€‚</p><h3 id="ä»£ç è§£æ"><a href="#ä»£ç è§£æ" class="headerlink" title="ä»£ç è§£æ"></a>ä»£ç è§£æ</h3><p>ç¬”è€…ä½¿ç”¨gaussian splattingä¸­çš„ä¸€æ®µä»£ç æ¥æµ‹è¯•è¿™ä¸¤ä¸ªæ¨¡å‹ï¼Œä¸‹é¢æ˜¯å‘é€ç»™è¿™ä¸¤ä¸ªæ¨¡å‹çš„å†…å®¹ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">é€è¡Œæ³¨é‡Šä¸‹é¢çš„ä»£ç ï¼Œå¹¶ä¸”æ€»ç»“è¿™ä¸ªå‡½æ•°å’Œå¯¹åº”çš„å…¬å¼ï¼Œä½¿ç”¨latexä»£ç å†™å‡ºæ¥ã€‚æ³¨æ„ï¼šæˆ‘å¸Œæœ›çš„æ˜¯ä½ æŠŠæ³¨é‡Šå¥½çš„ä»£ç æ”¾åœ¨ä¸€èµ·ï¼Œè¿”å›æˆ‘ä¸€æ•´ä¸ªä»£ç å—ï¼Œç„¶åå†æ€»ç»“å‡½æ•°çš„åŠŸèƒ½ï¼Œä»¥åŠå¯¹åº”çš„å…¬å¼ã€‚<span class="token keyword">def</span> <span class="token function">_ssim</span><span class="token punctuation">(</span>img1<span class="token punctuation">,</span> img2<span class="token punctuation">,</span> window<span class="token punctuation">,</span> window_size<span class="token punctuation">,</span> channel<span class="token punctuation">,</span> size_average<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    mu1 <span class="token operator">=</span> F<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> window<span class="token punctuation">,</span> padding<span class="token operator">=</span>window_size <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> groups<span class="token operator">=</span>channel<span class="token punctuation">)</span>    mu2 <span class="token operator">=</span> F<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span>img2<span class="token punctuation">,</span> window<span class="token punctuation">,</span> padding<span class="token operator">=</span>window_size <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> groups<span class="token operator">=</span>channel<span class="token punctuation">)</span>    mu1_sq <span class="token operator">=</span> mu1<span class="token punctuation">.</span><span class="token builtin">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    mu2_sq <span class="token operator">=</span> mu2<span class="token punctuation">.</span><span class="token builtin">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    mu1_mu2 <span class="token operator">=</span> mu1 <span class="token operator">*</span> mu2    sigma1_sq <span class="token operator">=</span> F<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span>img1 <span class="token operator">*</span> img1<span class="token punctuation">,</span> window<span class="token punctuation">,</span> padding<span class="token operator">=</span>window_size <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> groups<span class="token operator">=</span>channel<span class="token punctuation">)</span> <span class="token operator">-</span> mu1_sq    sigma2_sq <span class="token operator">=</span> F<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span>img2 <span class="token operator">*</span> img2<span class="token punctuation">,</span> window<span class="token punctuation">,</span> padding<span class="token operator">=</span>window_size <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> groups<span class="token operator">=</span>channel<span class="token punctuation">)</span> <span class="token operator">-</span> mu2_sq    sigma12 <span class="token operator">=</span> F<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span>img1 <span class="token operator">*</span> img2<span class="token punctuation">,</span> window<span class="token punctuation">,</span> padding<span class="token operator">=</span>window_size <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> groups<span class="token operator">=</span>channel<span class="token punctuation">)</span> <span class="token operator">-</span> mu1_mu2    C1 <span class="token operator">=</span> <span class="token number">0.01</span> <span class="token operator">**</span> <span class="token number">2</span>    C2 <span class="token operator">=</span> <span class="token number">0.03</span> <span class="token operator">**</span> <span class="token number">2</span>    ssim_map <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> mu1_mu2 <span class="token operator">+</span> C1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> sigma12 <span class="token operator">+</span> C2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>mu1_sq <span class="token operator">+</span> mu2_sq <span class="token operator">+</span> C1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>sigma1_sq <span class="token operator">+</span> sigma2_sq <span class="token operator">+</span> C2<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> size_average<span class="token punctuation">:</span>        <span class="token keyword">return</span> ssim_map<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> ssim_map<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>å¯¹äº7bï¼Œå®ƒçš„å›ç­”æ˜¯</strong></p><p><img src="/images/deepseek-r1-deploy/image_11.png"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">_ssim</span><span class="token punctuation">(</span>img1<span class="token punctuation">,</span> img2<span class="token punctuation">,</span> window<span class="token punctuation">,</span> window_size<span class="token punctuation">,</span> channel<span class="token punctuation">,</span> size_average<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># è®¡ç®—img1çš„åŠ æƒå‡å€¼</span>    mu1 <span class="token operator">=</span> F<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> window<span class="token punctuation">,</span> padding<span class="token operator">=</span>window_size <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> groups<span class="token operator">=</span>channel<span class="token punctuation">)</span>    <span class="token comment"># è®¡ç®—img2çš„åŠ æƒå‡å€¼</span>    mu2 <span class="token operator">=</span> F<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span>img2<span class="token punctuation">,</span> window<span class="token punctuation">,</span> padding<span class="token operator">=</span>window_size <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> groups<span class="token operator">=</span>channel<span class="token punctuation">)</span>    <span class="token comment"># è®¡ç®—img1çš„å¹³æ–¹å¹¶åŠ æƒå‡å€¼</span>    mu1_sq <span class="token operator">=</span> mu1<span class="token punctuation">.</span><span class="token builtin">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token comment"># è®¡ç®—img2çš„å¹³æ–¹å¹¶åŠ æƒå‡å€¼</span>    mu2_sq <span class="token operator">=</span> mu2<span class="token punctuation">.</span><span class="token builtin">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token comment"># è®¡ç®—img1å’Œimg2ä¹˜ç§¯çš„åŠ æƒå‡å€¼</span>    mu1_mu2 <span class="token operator">=</span> mu1 <span class="token operator">*</span> mu2    <span class="token comment"># è®¡ç®—img1çš„æ–¹å·®</span>    sigma1_sq <span class="token operator">=</span> F<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span>img1 <span class="token operator">*</span> img1<span class="token punctuation">,</span> window<span class="token punctuation">,</span> padding<span class="token operator">=</span>window_size <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> groups<span class="token operator">=</span>channel<span class="token punctuation">)</span> <span class="token operator">-</span> mu1_sq    <span class="token comment"># è®¡ç®—img2çš„æ–¹å·®</span>    sigma2_sq <span class="token operator">=</span> F<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span>img2 <span class="token operator">*</span> img2<span class="token punctuation">,</span> window<span class="token punctuation">,</span> padding<span class="token operator">=</span>window_size <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> groups<span class="token operator">=</span>channel<span class="token punctuation">)</span> <span class="token operator">-</span> mu2_sq    <span class="token comment"># è®¡ç®—img1å’Œimg2ä¹˜ç§¯çš„æ–¹å·®</span>    sigma12 <span class="token operator">=</span> F<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span>img1 <span class="token operator">*</span> img2<span class="token punctuation">,</span> window<span class="token punctuation">,</span> padding<span class="token operator">=</span>window_size <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> groups<span class="token operator">=</span>channel<span class="token punctuation">)</span> <span class="token operator">-</span> mu1_mu2    <span class="token comment"># é¿å…åˆ†æ¯ä¸ºé›¶çš„æƒ…å†µ</span>    C1 <span class="token operator">=</span> <span class="token number">0.01</span> <span class="token operator">**</span> <span class="token number">2</span>    C2 <span class="token operator">=</span> <span class="token number">0.03</span> <span class="token operator">**</span> <span class="token number">2</span>    <span class="token comment"># è®¡ç®—SSIMæ˜ å°„</span>    ssim_map <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> mu1_mu2 <span class="token operator">+</span> C1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> sigma12 <span class="token operator">+</span> C2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>mu1_sq <span class="token operator">+</span> mu2_sq <span class="token operator">+</span> C1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>sigma1_sq <span class="token operator">+</span> sigma2_sq <span class="token operator">+</span> C2<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># è¿”å›ç»“æœçš„å¹³å‡å€¼æˆ–é€šé“å¹³å‡å€¼</span>    <span class="token keyword">if</span> size_average<span class="token punctuation">:</span>        <span class="token keyword">return</span> ssim_map<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> ssim_map<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment"># SSIMå…¬å¼æ€»ç»“ï¼š</span><span class="token comment"># SSIM(img1, img2) = [ (2Î¼1Î¼2 + C1)(2Ïƒ12 + C2) ] / [ (Î¼1Â² + Î¼2Â² + C1)(Ïƒ1Â² + Ïƒ2Â² + C2) ]</span><span class="token comment"># å…¶ä¸­ï¼š</span><span class="token comment"># Î¼1å’ŒÎ¼2æ˜¯img1å’Œimg2çš„åŠ æƒå‡å€¼</span><span class="token comment"># Ïƒ1Â²å’ŒÏƒ2Â²æ˜¯img1å’Œimg2çš„åŠ æƒæ–¹å·®</span><span class="token comment"># Ïƒ12æ˜¯img1å’Œimg2ä¹˜ç§¯çš„åŠ æƒåæ–¹å·®</span><span class="token comment"># C1å’ŒC2æ˜¯é˜²æ­¢åˆ†æ¯ä¸ºé›¶çš„å¸¸æ•°</span><span class="token comment"># size_averageå‚æ•°å†³å®šè¿”å›çš„æ˜¯æ•´ä½“å¹³å‡å€¼è¿˜æ˜¯é€šé“çº§å¹³å‡å€¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»£ç æ€»ç»“ï¼š</p><ul><li>è¿™ä¸ªå‡½æ•°è®¡ç®—ä¸¤ä¸ªå›¾åƒä¹‹é—´çš„SSIMï¼ˆç»“æ„ç›¸ä¼¼æ€§ï¼‰å€¼ã€‚</li><li>å®ƒé€šè¿‡æ»‘åŠ¨çª—å£è®¡ç®—å‡å€¼ã€æ–¹å·®å’Œåæ–¹å·®ï¼Œå¹¶æ ¹æ®é¢„å®šä¹‰çš„å¸¸æ•°C1å’ŒC2è¿›è¡Œå½’ä¸€åŒ–ã€‚</li><li>æœ€ç»ˆè¿”å›çš„æ˜¯æ•´ä½“å¹³å‡å€¼æˆ–é€šé“çº§å¹³å‡å€¼ï¼Œå–å†³äºsize_averageå‚æ•°ã€‚</li></ul><p>å…¬å¼æ€»ç»“ï¼š<br>$$<br>SSIM(img1, img2) = \frac{(2\mu_1\mu_2 + C1)(2\sigma_{12} + C2)}{(\mu_1^2 + \mu_2^2 + C1)(\sigma_1^2 + \sigma_2^2 + C2)}<br>$$<br>å…¶ä¸­ï¼š</p><ul><li>$\mu_1$å’Œ$\mu_2$æ˜¯img1å’Œimg2çš„åŠ æƒå‡å€¼</li><li>$\sigma_1^2$å’Œ$\sigma_2^2$æ˜¯img1å’Œimg2çš„åŠ æƒæ–¹å·®</li><li>$\sigma_{12}$æ˜¯img1å’Œimg2ä¹˜ç§¯çš„åŠ æƒåæ–¹å·®</li><li>$C1 = (0.01)^2$å’Œ$C2 = (0.03)^2$æ˜¯é˜²æ­¢åˆ†æ¯ä¸ºé›¶çš„å¸¸æ•°</li></ul><p><strong>å¯¹äº32bï¼Œå®ƒçš„å›ç­”æ˜¯</strong></p><p><img src="/images/deepseek-r1-deploy/image_12.png"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">_ssim</span><span class="token punctuation">(</span>img1<span class="token punctuation">,</span> img2<span class="token punctuation">,</span> window<span class="token punctuation">,</span> window_size<span class="token punctuation">,</span> channel<span class="token punctuation">,</span> size_average<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># è®¡ç®—ç¬¬ä¸€ä¸ªå›¾åƒçš„å±€éƒ¨å‡å€¼ (Local mean of the first image)</span>    mu1 <span class="token operator">=</span> F<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> window<span class="token punctuation">,</span> padding<span class="token operator">=</span>window_size <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> groups<span class="token operator">=</span>channel<span class="token punctuation">)</span>        <span class="token comment"># è®¡ç®—ç¬¬äºŒä¸ªå›¾åƒçš„å±€éƒ¨å‡å€¼ (Local mean of the second image)</span>    mu2 <span class="token operator">=</span> F<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span>img2<span class="token punctuation">,</span> window<span class="token punctuation">,</span> padding<span class="token operator">=</span>window_size <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> groups<span class="token operator">=</span>channel<span class="token punctuation">)</span>    <span class="token comment"># è®¡ç®—ä¸¤ä¸ªå‡å€¼çš„å¹³æ–¹ (Square of means)</span>    mu1_sq <span class="token operator">=</span> mu1<span class="token punctuation">.</span><span class="token builtin">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    mu2_sq <span class="token operator">=</span> mu2<span class="token punctuation">.</span><span class="token builtin">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>        <span class="token comment"># è®¡ç®—ä¸¤ä¸ªå›¾åƒå‡å€¼çš„ä¹˜ç§¯ (Product of means)</span>    mu1_mu2 <span class="token operator">=</span> mu1 <span class="token operator">*</span> mu2    <span class="token comment"># è®¡ç®—ç¬¬ä¸€ä¸ªå›¾åƒçš„æ–¹å·® (Variance of the first image)</span>    sigma1_sq <span class="token operator">=</span> F<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span>img1 <span class="token operator">*</span> img1<span class="token punctuation">,</span> window<span class="token punctuation">,</span> padding<span class="token operator">=</span>window_size <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> groups<span class="token operator">=</span>channel<span class="token punctuation">)</span> <span class="token operator">-</span> mu1_sq        <span class="token comment"># è®¡ç®—ç¬¬äºŒä¸ªå›¾åƒçš„æ–¹å·® (Variance of the second image)</span>    sigma2_sq <span class="token operator">=</span> F<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span>img2 <span class="token operator">*</span> img2<span class="token punctuation">,</span> window<span class="token punctuation">,</span> padding<span class="token operator">=</span>window_size <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> groups<span class="token operator">=</span>channel<span class="token punctuation">)</span> <span class="token operator">-</span> mu2_sq    <span class="token comment"># è®¡ç®—ä¸¤ä¸ªå›¾åƒä¹‹é—´çš„åæ–¹å·® (Covariance between images)</span>    sigma12 <span class="token operator">=</span> F<span class="token punctuation">.</span>conv2d<span class="token punctuation">(</span>img1 <span class="token operator">*</span> img2<span class="token punctuation">,</span> window<span class="token punctuation">,</span> padding<span class="token operator">=</span>window_size <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> groups<span class="token operator">=</span>channel<span class="token punctuation">)</span> <span class="token operator">-</span> mu1_mu2    <span class="token comment"># å®šä¹‰å¸¸æ•°é¡¹ï¼Œé˜²æ­¢é™¤é›¶æ“ä½œï¼ˆä¸€èˆ¬å–è¿œå°äºå›¾åƒäº®åº¦å˜åŒ–èŒƒå›´çš„å€¼ï¼‰</span>    C1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0.01</span> <span class="token operator">*</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span>    C2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0.03</span> <span class="token operator">*</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span>    <span class="token comment"># è®¡ç®—SSIMç›¸ä¼¼åº¦æ˜ å°„å›¾</span>    ssim_map <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> mu1_mu2 <span class="token operator">+</span> C1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> sigma12 <span class="token operator">+</span> C2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> \               <span class="token punctuation">(</span><span class="token punctuation">(</span>mu1_sq <span class="token operator">+</span> mu2_sq <span class="token operator">+</span> C1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>sigma1_sq <span class="token operator">+</span> sigma2_sq <span class="token operator">+</span> C2<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># æ ¹æ®éœ€è¦è¿”å›æ•´ä½“å¹³å‡å€¼æˆ–é€šé“å¹³å‡å€¼</span>    <span class="token keyword">if</span> size_average<span class="token punctuation">:</span>        <span class="token keyword">return</span> ssim_map<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> ssim_map<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å‡½æ•°æ€»ç»“ï¼š</p><p>è¯¥å‡½æ•°å®ç°äº†ç»“æ„ç›¸ä¼¼æ€§æŒ‡æ•° (Structural Similarity Index, SSIM) çš„è®¡ç®—ã€‚SSIMæ˜¯ä¸€ç§è¡¡é‡ä¸¤å¹…å›¾åƒç›¸ä¼¼åº¦çš„æŒ‡æ ‡ï¼Œè€ƒè™‘äº†äº®åº¦ï¼ˆluminanceï¼‰ã€å¯¹æ¯”åº¦ï¼ˆcontrastï¼‰å’Œç»“æ„ï¼ˆstructureï¼‰ä¹‹é—´çš„å·®å¼‚ã€‚</p><p>å…¬å¼æ€»ç»“ï¼š</p><p>SSIMçš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š<br>$$<br>SSIM(x, y) = \frac{(2\mu_x\mu_y + C_1)(2\sigma_{xy} + C_2)}{(\mu_x^2 + \mu_y^2 + C_1)(\sigma_x^2 + \sigma_y^2 + C_2)}<br>$$<br>å…¶ä¸­ï¼š</p><ul><li>$\mu_x, \mu_y$ æ˜¯å›¾åƒxå’Œyçš„å±€éƒ¨å‡å€¼</li><li>$\sigma_x^2, \sigma_y^2$æ˜¯å›¾åƒxå’Œyçš„æ–¹å·®</li><li>$\sigma_{xy}$ æ˜¯å›¾åƒxå’Œyçš„åæ–¹å·®</li><li>$C_1 = (0.01L)^2, C_2 = (0.03L)^2$æ˜¯å¸¸æ•°é¡¹ï¼ŒLæ˜¯åƒç´ çš„æœ€å¤§å€¼ï¼ˆé»˜è®¤ä¸º255ï¼‰</li></ul><h3 id="ä»£ç æŠ¥é”™é—®é¢˜æ’æŸ¥-amp-å¦‚ä½•è§£å†³æŠ¥é”™"><a href="#ä»£ç æŠ¥é”™é—®é¢˜æ’æŸ¥-amp-å¦‚ä½•è§£å†³æŠ¥é”™" class="headerlink" title="ä»£ç æŠ¥é”™é—®é¢˜æ’æŸ¥&amp;å¦‚ä½•è§£å†³æŠ¥é”™"></a>ä»£ç æŠ¥é”™é—®é¢˜æ’æŸ¥&amp;å¦‚ä½•è§£å†³æŠ¥é”™</h3><p>è¿™æ˜¯ç¬”è€…è¿è¡ŒMonoGSçš„æ—¶å€™é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜ï¼Œä¸‹é¢çš„ä»£ç å—æ˜¯å‘é€ç»™æ¨¡å‹çš„å†…å®¹ã€‚</p><p>è¿™ä¸ªé—®é¢˜å·²ç»é€šè¿‡ChatGPTè§£å†³ï¼ŒåŸå› æ˜¯è¿™æ®µä»£ç è®¤ä¸ºç³»ç»Ÿæ²¡æœ‰æ˜¾ç¤ºå™¨æˆ–å›¾å½¢ç•Œé¢ï¼Œåˆ‡æ¢ <code>matplotlib</code> çš„åç«¯ä¸ºæ— æ˜¾ç¤ºåç«¯ï¼Œä¾‹å¦‚ <code>Agg</code>å°±å¯ä»¥äº†ã€‚ï¼ˆåæ§½ï¼šmatplotlibè¿™é‡Œæ²¡æœ‰åˆ›å»ºå›¾å½¢ç•Œé¢ï¼Œä¿å­˜å›¾ç‰‡å±…ç„¶è¿˜éœ€è¦xxxxxxï¼‰</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">ä¸‹é¢è¿™æ®µä»£ç ï¼Œä»¥å‰éƒ½æ²¡æœ‰æŠ¥é”™è¿‡ï¼Œç°åœ¨çªç„¶å°±æŠ¥é”™äº†ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿå¦‚ä½•è§£å†³æŠ¥é”™çš„é—®é¢˜ï¼Ÿ<span class="token keyword">def</span> <span class="token function">evaluate_evo</span><span class="token punctuation">(</span>poses_gt<span class="token punctuation">,</span> poses_est<span class="token punctuation">,</span> plot_dir<span class="token punctuation">,</span> label<span class="token punctuation">,</span> monocular<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment">## Plot</span>    traj_ref <span class="token operator">=</span> PosePath3D<span class="token punctuation">(</span>poses_se3<span class="token operator">=</span>poses_gt<span class="token punctuation">)</span>    traj_est <span class="token operator">=</span> PosePath3D<span class="token punctuation">(</span>poses_se3<span class="token operator">=</span>poses_est<span class="token punctuation">)</span>    traj_est_aligned <span class="token operator">=</span> trajectory<span class="token punctuation">.</span>align_trajectory<span class="token punctuation">(</span>        traj_est<span class="token punctuation">,</span> traj_ref<span class="token punctuation">,</span> correct_scale<span class="token operator">=</span>monocular    <span class="token punctuation">)</span>    <span class="token comment">## RMSE</span>    pose_relation <span class="token operator">=</span> metrics<span class="token punctuation">.</span>PoseRelation<span class="token punctuation">.</span>translation_part    data <span class="token operator">=</span> <span class="token punctuation">(</span>traj_ref<span class="token punctuation">,</span> traj_est_aligned<span class="token punctuation">)</span>    ape_metric <span class="token operator">=</span> metrics<span class="token punctuation">.</span>APE<span class="token punctuation">(</span>pose_relation<span class="token punctuation">)</span>    ape_metric<span class="token punctuation">.</span>process_data<span class="token punctuation">(</span>data<span class="token punctuation">)</span>    ape_stat <span class="token operator">=</span> ape_metric<span class="token punctuation">.</span>get_statistic<span class="token punctuation">(</span>metrics<span class="token punctuation">.</span>StatisticsType<span class="token punctuation">.</span>rmse<span class="token punctuation">)</span>    ape_stats <span class="token operator">=</span> ape_metric<span class="token punctuation">.</span>get_all_statistics<span class="token punctuation">(</span><span class="token punctuation">)</span>    Log<span class="token punctuation">(</span><span class="token string">"RMSE ATE \[m]"</span><span class="token punctuation">,</span> ape_stat<span class="token punctuation">,</span> tag<span class="token operator">=</span><span class="token string">"Eval"</span><span class="token punctuation">)</span>    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>            os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>plot_dir<span class="token punctuation">,</span> <span class="token string">"stats_{}.json"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">"w"</span><span class="token punctuation">,</span>            encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">,</span>    <span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>        json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ape_stats<span class="token punctuation">,</span> f<span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>    plot_mode <span class="token operator">=</span> evo<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>plot<span class="token punctuation">.</span>PlotMode<span class="token punctuation">.</span>xy    fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>æŠ¥é”™ä¸º  File <span class="token string">"slam.py"</span><span class="token punctuation">,</span> line <span class="token number">325</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>    slam <span class="token operator">=</span> SLAM<span class="token punctuation">(</span>config<span class="token punctuation">,</span> save_dir<span class="token operator">=</span>save_dir<span class="token punctuation">)</span>  File <span class="token string">"slam.py"</span><span class="token punctuation">,</span> line <span class="token number">145</span><span class="token punctuation">,</span> <span class="token keyword">in</span> __init__    self<span class="token punctuation">.</span>frontend<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span>  File <span class="token string">"/home/immortalqx/Projects/MonoGS-noted/utils/slam_frontend.py"</span><span class="token punctuation">,</span> line <span class="token number">554</span><span class="token punctuation">,</span> <span class="token keyword">in</span> run    monocular<span class="token operator">=</span>self<span class="token punctuation">.</span>monocular<span class="token punctuation">,</span>  File <span class="token string">"/home/immortalqx/Projects/MonoGS-noted/utils/eval_utils.py"</span><span class="token punctuation">,</span> line <span class="token number">110</span><span class="token punctuation">,</span> <span class="token keyword">in</span> eval_ate    monocular<span class="token operator">=</span>monocular<span class="token punctuation">,</span>  File <span class="token string">"/home/immortalqx/Projects/MonoGS-noted/utils/eval_utils.py"</span><span class="token punctuation">,</span> line <span class="token number">50</span><span class="token punctuation">,</span> <span class="token keyword">in</span> evaluate_evo    fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>  File <span class="token string">"/home/immortalqx/package/anaconda3/envs/MonoGS/lib/python3.7/site-packages/matplotlib/pyplot.py"</span><span class="token punctuation">,</span> line <span class="token number">809</span><span class="token punctuation">,</span> <span class="token keyword">in</span> figure    FigureClass<span class="token operator">=</span>FigureClass<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>  File <span class="token string">"/home/immortalqx/package/anaconda3/envs/MonoGS/lib/python3.7/site-packages/matplotlib/pyplot.py"</span><span class="token punctuation">,</span> line <span class="token number">325</span><span class="token punctuation">,</span> <span class="token keyword">in</span> new_figure_manager    <span class="token keyword">return</span> _get_backend_mod<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>new_figure_manager<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>  File <span class="token string">"/home/immortalqx/package/anaconda3/envs/MonoGS/lib/python3.7/site-packages/matplotlib/backend_bases.py"</span><span class="token punctuation">,</span> line <span class="token number">3494</span><span class="token punctuation">,</span> <span class="token keyword">in</span> new_figure_manager    <span class="token keyword">return</span> cls<span class="token punctuation">.</span>new_figure_manager_given_figure<span class="token punctuation">(</span>num<span class="token punctuation">,</span> fig<span class="token punctuation">)</span>  File <span class="token string">"/home/immortalqx/package/anaconda3/envs/MonoGS/lib/python3.7/site-packages/matplotlib/backends/_backend_tk.py"</span><span class="token punctuation">,</span> line <span class="token number">966</span><span class="token punctuation">,</span> <span class="token keyword">in</span> new_figure_manager_given_figure    manager <span class="token operator">=</span> cls<span class="token punctuation">.</span>FigureManager<span class="token punctuation">(</span>canvas<span class="token punctuation">,</span> num<span class="token punctuation">,</span> window<span class="token punctuation">)</span>  File <span class="token string">"/home/immortalqx/package/anaconda3/envs/MonoGS/lib/python3.7/site-packages/matplotlib/backends/_backend_tk.py"</span><span class="token punctuation">,</span> line <span class="token number">423</span><span class="token punctuation">,</span> <span class="token keyword">in</span> __init__    self<span class="token punctuation">.</span>toolbar <span class="token operator">=</span> self<span class="token punctuation">.</span>_get_toolbar<span class="token punctuation">(</span><span class="token punctuation">)</span>  File <span class="token string">"/home/immortalqx/package/anaconda3/envs/MonoGS/lib/python3.7/site-packages/matplotlib/backends/_backend_tk.py"</span><span class="token punctuation">,</span> line <span class="token number">446</span><span class="token punctuation">,</span> <span class="token keyword">in</span> _get_toolbar    toolbar <span class="token operator">=</span> NavigationToolbar2Tk<span class="token punctuation">(</span>self<span class="token punctuation">.</span>canvas<span class="token punctuation">,</span> self<span class="token punctuation">.</span>window<span class="token punctuation">)</span>  File <span class="token string">"/home/immortalqx/package/anaconda3/envs/MonoGS/lib/python3.7/site-packages/matplotlib/backends/_backend_tk.py"</span><span class="token punctuation">,</span> line <span class="token number">558</span><span class="token punctuation">,</span> <span class="token keyword">in</span> __init__    command<span class="token operator">=</span><span class="token builtin">getattr</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">,</span>  File <span class="token string">"/home/immortalqx/package/anaconda3/envs/MonoGS/lib/python3.7/site-packages/matplotlib/backends/_backend_tk.py"</span><span class="token punctuation">,</span> line <span class="token number">680</span><span class="token punctuation">,</span> <span class="token keyword">in</span> _Button    NavigationToolbar2Tk<span class="token punctuation">.</span>_set_image_for_button<span class="token punctuation">(</span>self<span class="token punctuation">,</span> b<span class="token punctuation">)</span>  File <span class="token string">"/home/immortalqx/package/anaconda3/envs/MonoGS/lib/python3.7/site-packages/matplotlib/backends/_backend_tk.py"</span><span class="token punctuation">,</span> line <span class="token number">659</span><span class="token punctuation">,</span> <span class="token keyword">in</span> _set_image_for_button    image <span class="token operator">=</span> ImageTk<span class="token punctuation">.</span>PhotoImage<span class="token punctuation">(</span>im<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token punctuation">(</span>size<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> master<span class="token operator">=</span>self<span class="token punctuation">)</span>  File <span class="token string">"/home/immortalqx/package/anaconda3/envs/MonoGS/lib/python3.7/site-packages/PIL/Image.py"</span><span class="token punctuation">,</span> line <span class="token number">2171</span><span class="token punctuation">,</span> <span class="token keyword">in</span> resize    im <span class="token operator">=</span> im<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>size<span class="token punctuation">,</span> resample<span class="token punctuation">,</span> box<span class="token punctuation">)</span>  File <span class="token string">"/home/immortalqx/package/anaconda3/envs/MonoGS/lib/python3.7/site-packages/PIL/Image.py"</span><span class="token punctuation">,</span> line <span class="token number">2193</span><span class="token punctuation">,</span> <span class="token keyword">in</span> resize    <span class="token keyword">return</span> self<span class="token punctuation">.</span>_new<span class="token punctuation">(</span>self<span class="token punctuation">.</span>im<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>size<span class="token punctuation">,</span> resample<span class="token punctuation">,</span> box<span class="token punctuation">)</span><span class="token punctuation">)</span>ValueError<span class="token punctuation">:</span> height <span class="token keyword">and</span> width must be <span class="token operator">&gt;</span> <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>7bæ¨¡å‹çš„å›ç­”</strong></p><p><img src="/images/deepseek-r1-deploy/image_13.png"></p><p>é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œä½ åº”è¯¥èƒ½å¤Ÿè§£å†³æŠ¥é”™çš„é—®é¢˜ã€‚å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·æä¾›æ›´å¤šç›¸å…³ä»£ç æˆ–ä¸Šä¸‹æ–‡ä»¥ä¾¿è¿›ä¸€æ­¥è¯Šæ–­ã€‚</p><p>æœ€ç»ˆç­”æ¡ˆï¼šåœ¨è°ƒç”¨<code>plt.figure()</code>æ—¶ï¼Œå¦‚æœæ²¡æœ‰ä¼ é€’é€‚å½“çš„<code>figsize</code>å‚æ•°ï¼Œå¯èƒ½å¯¼è‡´ç»˜å›¾åŒºåŸŸæ— æ•ˆã€‚é€šè¿‡æ·»åŠ åˆé€‚çš„<code>figsize</code>å‚æ•°ï¼ˆå¦‚10x6è‹±å¯¸ï¼‰å¯ä»¥è§£å†³é—®é¢˜ï¼š</p><p>ä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">evaluate_evo</span><span class="token punctuation">(</span>poses_gt<span class="token punctuation">,</span> poses_est<span class="token punctuation">,</span> plot_dir<span class="token punctuation">,</span> label<span class="token punctuation">,</span> monocular<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment">## Plot</span>    traj_ref <span class="token operator">=</span> PosePath3D<span class="token punctuation">(</span>poses_se3<span class="token operator">=</span>poses_gt<span class="token punctuation">)</span>    traj_est <span class="token operator">=</span> PosePath3D<span class="token punctuation">(</span>poses_se3<span class="token operator">=</span>poses_est<span class="token punctuation">)</span>    traj_est_aligned <span class="token operator">=</span> trajectory<span class="token punctuation">.</span>align_trajectory<span class="token punctuation">(</span>        traj_est<span class="token punctuation">,</span> traj_ref<span class="token punctuation">,</span> correct_scale<span class="token operator">=</span>monocular    <span class="token punctuation">)</span>    <span class="token comment">## RMSE</span>    pose_relation <span class="token operator">=</span> metrics<span class="token punctuation">.</span>PoseRelation<span class="token punctuation">.</span>translation_part    data <span class="token operator">=</span> <span class="token punctuation">(</span>traj_ref<span class="token punctuation">,</span> traj_est_aligned<span class="token punctuation">)</span>    ape_metric <span class="token operator">=</span> metrics<span class="token punctuation">.</span>APE<span class="token punctuation">(</span>pose_relation<span class="token punctuation">)</span>    ape_metric<span class="token punctuation">.</span>process_data<span class="token punctuation">(</span>data<span class="token punctuation">)</span>    ape_stat <span class="token operator">=</span> ape_metric<span class="token punctuation">.</span>get_statistic<span class="token punctuation">(</span>metrics<span class="token punctuation">.</span>StatisticsType rmse<span class="token punctuation">)</span>    ape_stats <span class="token operator">=</span> ape_metric<span class="token punctuation">.</span>get_all_statistics<span class="token punctuation">(</span><span class="token punctuation">)</span>    Log<span class="token punctuation">(</span><span class="token string">"RMSE ATE \[m\]"</span><span class="token punctuation">,</span> ape_stat<span class="token punctuation">,</span> tag<span class="token operator">=</span><span class="token string">"Eval"</span><span class="token punctuation">)</span>    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>            os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>plot_dir<span class="token punctuation">,</span> <span class="token string">"stats_{}.json"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">"w"</span><span class="token punctuation">,</span>            encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">,</span>    <span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>        json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>ape_stats<span class="token punctuation">,</span> f<span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>    plot_mode <span class="token operator">=</span> evo<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>plot<span class="token punctuation">.</span>PlotMode<span class="token punctuation">.</span>xy    fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># æ·»åŠ åˆé€‚çš„å›¾å°ºå¯¸</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>32bæ¨¡å‹çš„å›ç­”</strong></p><p><img src="/images/deepseek-r1-deploy/image_14.png"></p><p>ä¸ºäº†è§£å†³æŠ¥é”™çš„é—®é¢˜ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p><ol><li><p><strong>æ£€æŸ¥å½“å‰Pythonç¯å¢ƒ</strong>ï¼šç¡®ä¿ä½ ä½¿ç”¨çš„æ˜¯æ”¯æŒå›¾å½¢è¾“å‡ºçš„ç¯å¢ƒï¼Œæˆ–è€…åœ¨æ²¡æœ‰ GUI çš„ç¯å¢ƒä¸­æ­£ç¡®é…ç½®äº†matplotlibã€‚</p></li><li><p><strong>ä¿®æ”¹ä»£ç ä»¥è®¾ç½®åˆé€‚çš„backend</strong>ï¼š</p><p>åœ¨ä½ çš„ä»£ç ä¸­æ·»åŠ ä»¥ä¸‹ä¸¤è¡Œï¼Œæ”¾åœ¨ä»»ä½•å¯¼å…¥matplotlib.pyplotä¹‹å‰ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> matplotlibmatplotlib<span class="token punctuation">.</span>use<span class="token punctuation">(</span><span class="token string">'Agg'</span><span class="token punctuation">)</span>  <span class="token comment"># è®¾ç½®ä¸ºéäº¤äº’å¼backend</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p><strong>æ˜¾å¼æŒ‡å®šç»˜å›¾å¤§å°ï¼ˆå¯é€‰ï¼‰</strong>ï¼š</p><p>å¦‚æœä»ç„¶æœ‰é—®é¢˜ï¼Œå¯ä»¥åœ¨åˆ›å»ºfigureæ—¶æ˜ç¡®è®¾ç½®å¤§å°ï¼Œç¡®ä¿å®½é«˜éƒ½æ˜¯æ­£æ•°ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p><strong>å¤„ç†å¼‚å¸¸æƒ…å†µ</strong>ï¼š</p><p>åœ¨ç»˜å›¾ä¹‹å‰ï¼Œæ·»åŠ é”™è¯¯æ£€æŸ¥ï¼Œé˜²æ­¢è´Ÿå€¼æˆ–é›¶å°ºå¯¸è¢«ä¼ é€’ç»™ç»˜å›¾å‡½æ•°ã€‚</p></li><li><p><strong>é‡æ–°è¿è¡Œä»£ç </strong>ï¼š</p><p>åº”ç”¨ä¸Šè¿°ä¿®æ”¹åï¼Œå†æ¬¡æ‰§è¡Œä»£ç ï¼Œè§‚å¯Ÿæ˜¯å¦è¿˜å‡ºç°ç›¸åŒé”™è¯¯ã€‚</p></li></ol><p>å¦‚æœé—®é¢˜ä¾ç„¶å­˜åœ¨ï¼Œè¯·è¿›ä¸€æ­¥æ ¸å®PILåº“çš„ç‰ˆæœ¬ä»¥åŠç³»ç»Ÿç¯å¢ƒçš„å˜åŒ–ï¼Œå¹¶è€ƒè™‘å…¶ä»–å¯èƒ½çš„è§£å†³æ–¹æ¡ˆã€‚</p><h3 id="ä»£ç è¡¥å……-amp-ç”Ÿæˆ"><a href="#ä»£ç è¡¥å……-amp-ç”Ÿæˆ" class="headerlink" title="ä»£ç è¡¥å……&amp;ç”Ÿæˆ"></a>ä»£ç è¡¥å……&amp;ç”Ÿæˆ</h3><p>ç¬”è€…ä¸å–œæ¬¢è®©AIç”Ÿæˆæ‰€æœ‰çš„ä»£ç ï¼Œç¬”è€…ä¸€èˆ¬æ˜¯æ­å»ºä¸€ä¸ªæ¡†æ¶è®©AIæ¥è¡¥å……ï¼Œå¹¶æä¾›ä¸€äº›å¿…è¦çš„è¯´æ˜ã€‚å› æ­¤è¿™é‡Œå¯¹æ¯”ä¸€ä¸‹7bå’Œ32bæ¨¡å‹çš„ä»£ç è¡¥å……å’Œç”Ÿæˆçš„èƒ½åŠ›ï¼Œä¸‹é¢æ˜¯å‘é€ç»™æ¨¡å‹çš„å†…å®¹ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">æˆ‘éœ€è¦è¡¥å……ä¸‹é¢çš„ä»£ç ï¼Œæ ¹æ®ç›¸æœºæ—‹è½¬camera_rotationã€ç›¸æœºå¹³ç§»camera_positionã€ç›¸æœºçš„fov_xå’Œfov_yï¼Œæ¥è®¡ç®—ç›¸æœºè§†é”¥ä½“çš„bboxï¼Œåªéœ€è¦è®¡ç®—2Dçš„bboxï¼Œbuffer_distanceæ˜¯å¯¹bboxæ‰©å±•çš„æ¯”ä¾‹ã€‚<span class="token keyword">def</span> <span class="token function">visualHull</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> camera_rotation<span class="token punctuation">,</span> camera_position<span class="token punctuation">,</span> buffer_distance<span class="token punctuation">,</span> fov_x<span class="token punctuation">,</span> fov_y<span class="token punctuation">,</span> min_x<span class="token punctuation">,</span> max_x<span class="token punctuation">,</span> min_z<span class="token punctuation">,</span> max_z<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># è®¡ç®—ç›¸æœºåæ ‡ç³»ä¸‹çš„è§†é”¥ä½“</span>        <span class="token comment"># å°†ç›¸æœºåæ ‡ç³»ä¸‹çš„è§†é”¥ä½“å˜æ¢åˆ°ä¸–ç•Œåæ ‡ç³»ä¸­</span>        <span class="token comment"># è®¡ç®—ä¸–ç•Œåæ ‡ç³»ä¸‹è§†é”¥ä½“çš„bboxï¼Œå¹¶ä¸”æ ¹æ®buffer_distanceè¿›è¡Œæ‰©å±•</span>        <span class="token comment"># æ ¹æ®ä¼ å…¥çš„min_x, max_x, min_z, max_zï¼Œæ›´æ–°min_x, max_x, min_z, max_z</span>        <span class="token comment"># è¿”å›æ›´æ–°ä¹‹åçš„min_x, max_x, min_z, max_z</span>        <span class="token keyword">return</span> min_x<span class="token punctuation">,</span> max_x<span class="token punctuation">,</span> min_z<span class="token punctuation">,</span> max_z<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>7bæ¨¡å‹çš„å›ç­”</strong></p><p><img src="/images/deepseek-r1-deploy/image_16.png"></p><p>çœ‹èµ·æ¥ä½ æ­£åœ¨å°è¯•åœ¨ç›¸æœºåæ ‡ç³»ä¸­å®šä¹‰ä¸€ä¸ªè§†é”¥ä½“ï¼ˆè§†ç•Œç›’ï¼‰ï¼Œç„¶åå°†å…¶å˜æ¢åˆ°ä¸–ç•Œåæ ‡ç³»ä¸­ï¼Œå¹¶æ ¹æ®ç¼“å†²è·ç¦»æ‰©å±•è¿™ä¸ªè§†ç•Œç›’çš„è¾¹ç•Œæ¡†ï¼ˆbboxï¼‰ã€‚ä»¥ä¸‹æ˜¯å…·ä½“çš„å®ç°æ­¥éª¤å’Œä»£ç ç¤ºä¾‹ï¼š</p><p>å‡½æ•°å®ç°æ€è·¯</p><ol><li><strong>ç›¸æœºåæ ‡ç³»åˆ°ä¸–ç•Œåæ ‡ç³»è½¬æ¢</strong><br>é¦–å…ˆï¼Œéœ€è¦å°†ç›¸æœºä½ç½®å’Œæ—‹è½¬å‚æ•°è½¬æ¢ä¸ºé½æ¬¡å˜æ¢çŸ©é˜µã€‚é€šè¿‡è¿™ä¸ªçŸ©é˜µå¯ä»¥å°†ç›¸æœºåæ ‡ç³»ä¸­çš„ç‚¹è½¬æ¢åˆ°ä¸–ç•Œåæ ‡ç³»ã€‚</li><li><strong>ç”Ÿæˆè§†é”¥ä½“è¾¹ç•Œç‚¹</strong><br>æ ¹æ®ç›¸æœºçš„FOVï¼ˆæ°´å¹³å’Œå‚ç›´ï¼‰ã€ç¼“å†²è·ç¦»å’Œå…¶ä»–å‚æ•°ï¼Œè®¡ç®—å‡ºåœ¨ç›¸æœºåæ ‡ç³»ä¸­è§†é”¥ä½“çš„è¾¹ç•Œç‚¹ã€‚</li><li><strong>å˜æ¢åˆ°ä¸–ç•Œåæ ‡ç³»</strong><br>ä½¿ç”¨é½æ¬¡å˜æ¢çŸ©é˜µå°†è¿™äº›è¾¹ç•Œç‚¹è½¬æ¢åˆ°ä¸–ç•Œåæ ‡ç³»ä¸­ã€‚</li><li><strong>è®¡ç®—bboxå¹¶æ‰©å±•</strong><br>è®¡ç®—è¿™äº›ç‚¹çš„æœ€å°å’Œæœ€å¤§å€¼ï¼ˆx, y, zï¼‰ï¼Œç„¶åæ ¹æ®ç¼“å†²è·ç¦»æ‰©å±•bboxã€‚</li><li><strong>æ›´æ–°è¾¹ç•Œå‚æ•°</strong><br>æ ¹æ®ä¼ å…¥çš„min_xã€max_xç­‰å‚æ•°ï¼Œæ›´æ–°è¿™äº›å‚æ•°ã€‚</li></ol><p>å®ç°ä»£ç </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">def</span> <span class="token function">visualHull</span><span class="token punctuation">(</span>camera_rotation<span class="token punctuation">,</span> camera_position<span class="token punctuation">,</span> buffer_distance<span class="token punctuation">,</span> fov_x<span class="token punctuation">,</span> fov_y<span class="token punctuation">,</span> min_x<span class="token punctuation">,</span> max_x<span class="token punctuation">,</span> min_z<span class="token punctuation">,</span> max_z<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    è®¡ç®—ç›¸æœºè§†é”¥ä½“çš„bboxï¼Œå¹¶æ ¹æ®ç¼“å†²è·ç¦»è¿›è¡Œæ‰©å±•ã€‚        è¾“å…¥ï¼š        camera_rotation: ç›¸æœºæ—‹è½¬çŸ©é˜µï¼ˆ3x3ï¼‰        camera_position: ç›¸æœºä½ç½®å‘é‡ï¼ˆ3Dï¼‰        buffer_distance: æ‰©å±•çš„è·ç¦»æ¯”ä¾‹        fov_x: æ°´å¹³è§†åœºè§’ï¼ˆåº¦ï¼‰        fov_y: å‚ç›´è§†åœºè§’ï¼ˆåº¦ï¼‰        min_x, max_x, min_z, max_z: åˆå§‹è¾¹ç•Œå‚æ•°        è¾“å‡ºï¼š        æ›´æ–°åçš„min_x, max_x, min_z, max_z    """</span>    <span class="token comment"># å°†ç›¸æœºæ—‹è½¬çŸ©é˜µæ‰©å±•ä¸ºé½æ¬¡å˜æ¢çŸ©é˜µ</span>    homogeneous_matrix <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    homogeneous_matrix<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> camera_rotation    homogeneous_matrix<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1.0</span>    homogeneous_matrix<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> camera_position        <span class="token comment"># å®šä¹‰ç›¸æœºåæ ‡ç³»ä¸­çš„è§†é”¥ä½“è¾¹ç•Œç‚¹</span>    <span class="token comment"># è®¡ç®—æ°´å¹³å’Œå‚ç›´çš„åˆ‡ç‰‡èŒƒå›´</span>    h_width <span class="token operator">=</span> np<span class="token punctuation">.</span>tan<span class="token punctuation">(</span>np<span class="token punctuation">.</span>radians<span class="token punctuation">(</span>fov_x <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">-</span>min_z <span class="token operator">-</span> buffer_distance<span class="token punctuation">)</span>    v_height <span class="token operator">=</span> np<span class="token punctuation">.</span>tan<span class="token punctuation">(</span>np<span class="token punctuation">.</span>radians<span class="token punctuation">(</span>fov_y <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max_z <span class="token operator">+</span> buffer_distance<span class="token punctuation">)</span>        <span class="token comment"># ç”Ÿæˆè¾¹ç•Œç‚¹</span>    x_points <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span>h_width<span class="token punctuation">,</span> h_width<span class="token punctuation">,</span> <span class="token operator">-</span>h_width<span class="token punctuation">,</span> <span class="token operator">-</span>h_width<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># xæ–¹å‘çš„ä¸¤ä¸ªç«¯ç‚¹</span>        z_points <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span>min_z<span class="token punctuation">,</span> max_z<span class="token punctuation">,</span> <span class="token operator">-</span>min_z<span class="token punctuation">,</span> max_z<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> buffer_distance  <span class="token comment"># zæ–¹å‘çš„ä¸¤ä¸ªç«¯ç‚¹</span>        y_points <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span>v_height<span class="token punctuation">,</span> v_height<span class="token punctuation">,</span> <span class="token operator">-</span>v_height<span class="token punctuation">,</span> <span class="token operator">-</span>v_height<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># yæ–¹å‘çš„ä¸¤ä¸ªç«¯ç‚¹</span>        <span class="token comment"># åˆ›å»ºæ‰€æœ‰ç»„åˆ</span>    points <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> x <span class="token keyword">in</span> x_points<span class="token punctuation">:</span>        <span class="token keyword">for</span> z <span class="token keyword">in</span> z_points<span class="token punctuation">:</span>            <span class="token keyword">for</span> y <span class="token keyword">in</span> y_points<span class="token punctuation">:</span>                point <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                world_point <span class="token operator">=</span> homogeneous_matrix @ point                points<span class="token punctuation">.</span>append<span class="token punctuation">(</span>world_point<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># æ·»åŠ å˜æ¢åçš„ç‚¹</span>        <span class="token comment"># è®¡ç®—bboxï¼ˆä¸–ç•Œåæ ‡ç³»ä¸‹çš„è¾¹ç•Œï¼‰</span>    <span class="token keyword">if</span> <span class="token keyword">not</span> points<span class="token punctuation">:</span>        <span class="token keyword">return</span> min_x<span class="token punctuation">,</span> max_x<span class="token punctuation">,</span> min_z<span class="token punctuation">,</span> max_z        world_min_x <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">for</span> p <span class="token keyword">in</span> points<span class="token punctuation">]</span><span class="token punctuation">)</span>    world_max_x <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">for</span> p <span class="token keyword">in</span> points<span class="token punctuation">]</span><span class="token punctuation">)</span>    world_min_y <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">for</span> p <span class="token keyword">in</span> points<span class="token punctuation">]</span><span class="token punctuation">)</span>    world_max_y <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">for</span> p <span class="token keyword">in</span> points<span class="token punctuation">]</span><span class="token punctuation">)</span>    world_min_z <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token keyword">for</span> p <span class="token keyword">in</span> points<span class="token punctuation">]</span><span class="token punctuation">)</span>    world_max_z <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token keyword">for</span> p <span class="token keyword">in</span> points<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token comment"># æ ¹æ®ç¼“å†²è·ç¦»æ‰©å±•bbox</span>    extended_buffer_distance <span class="token operator">=</span> buffer_distance <span class="token operator">/</span> <span class="token number">2.0</span>        new_min_x <span class="token operator">=</span> world_min_x <span class="token operator">-</span> extended_buffer_distance    new_max_x <span class="token operator">=</span> world_max_x <span class="token operator">+</span> extended_buffer_distance    new_min_y <span class="token operator">=</span> world_min_y <span class="token operator">-</span> extended_buffer_distance    new_max_y <span class="token operator">=</span> world_max_y <span class="token operator">+</span> extended_buffer_distance    new_min_z <span class="token operator">=</span> world_min_z <span class="token operator">-</span> extended_buffer_distance    new_max_z <span class="token operator">=</span> world_max_z <span class="token operator">+</span> extended_buffer_distance        <span class="token comment"># æ ¹æ®ä¼ å…¥çš„å‚æ•°æ›´æ–°è¾¹ç•Œå€¼</span>    min_x_new <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>min_x<span class="token punctuation">,</span> new_min_x<span class="token punctuation">)</span>    max_x_new <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>max_x<span class="token punctuation">,</span> new_max_x<span class="token punctuation">)</span>    min_y_new <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>min_y<span class="token punctuation">,</span> new_min_y<span class="token punctuation">)</span>  <span class="token comment"># å¦‚æœéœ€è¦æ‰©å±•yæ–¹å‘ï¼Œå¯ä»¥è€ƒè™‘å¢åŠ è¿™ä¸¤ä¸ªå˜é‡</span>        <span class="token comment"># è¿”å›æ›´æ–°åçš„å‚æ•°ï¼ˆå‡è®¾åªå…³æ³¨xå’Œzï¼‰</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>min_x_new<span class="token punctuation">,</span> max_x_new<span class="token punctuation">,</span> min_z_new<span class="token punctuation">,</span> max_z_new<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨è¯´æ˜</p><ol><li><p><strong>è¾“å…¥å‚æ•°</strong>ï¼š</p><ul><li><code>camera_rotation</code>: ç›¸æœºæ—‹è½¬çŸ©é˜µï¼ˆ3x3ï¼‰ã€‚</li><li><code>camera_position</code>: ç›¸æœºä½ç½®å‘é‡ï¼ˆ3Dï¼‰ã€‚</li><li><code>buffer_distance</code>: æ‰©å±•çš„è·ç¦»æ¯”ä¾‹ã€‚</li><li><code>fov_x</code> å’Œ <code>fov_y</code>: æ°´å¹³å’Œå‚ç›´è§†åœºè§’ï¼Œä»¥åº¦ä¸ºå•ä½ã€‚</li><li><code>min_x, max_x, min_z, max_z</code>: åˆå§‹è¾¹ç•Œå‚æ•°ã€‚</li></ul></li><li><p><strong>è¾“å‡º</strong>ï¼š</p><ul><li>è¿”å›æ›´æ–°åçš„è¾¹ç•Œå‚æ•° <code>(min_x_new, max_x_new, min_z_new, max_z_new)</code>ã€‚</li></ul></li></ol><p>ç¤ºä¾‹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># åˆå§‹åŒ–å‚æ•°</span>min_x <span class="token operator">=</span> <span class="token number">0</span>max_x <span class="token operator">=</span> <span class="token number">10</span>min_z <span class="token operator">=</span> <span class="token number">5</span>max_z <span class="token operator">=</span> <span class="token number">20</span><span class="token comment"># ç›¸æœºå‚æ•°</span>camera_rotation <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                             <span class="token punctuation">[</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                             <span class="token punctuation">[</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># æ— æ—‹è½¬</span>camera_position <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">5.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">15.0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># ç›¸æœºä½ç½®</span><span class="token comment"># è®¡ç®—è§†è§‰é”¥ä½“å¹¶æ‰©å±•bbox</span>buffer_distance <span class="token operator">=</span> <span class="token number">1.0</span>fov_x <span class="token operator">=</span> <span class="token number">60.0</span>fov_y <span class="token operator">=</span> <span class="token number">45.0</span>new_min_x<span class="token punctuation">,</span> new_max_x<span class="token punctuation">,</span> new_min_z<span class="token punctuation">,</span> new_max_z <span class="token operator">=</span> visualHull<span class="token punctuation">(</span>camera_rotation<span class="token punctuation">,</span> camera_position<span class="token punctuation">,</span> buffer_distance<span class="token punctuation">,</span> fov_x<span class="token punctuation">,</span> fov_y<span class="token punctuation">,</span> min_x<span class="token punctuation">,</span> max_x<span class="token punctuation">,</span> min_z<span class="token punctuation">,</span> max_z<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ›´æ–°åçš„è¾¹ç•Œï¼š"</span><span class="token punctuation">,</span> new_min_x<span class="token punctuation">,</span> new_max_x<span class="token punctuation">,</span> new_min_z<span class="token punctuation">,</span> new_max_z<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„äº‹é¡¹</p><ol><li><strong>å•ä½è½¬æ¢</strong>ï¼šè§†åœºè§’éœ€è¦ä»åº¦è½¬æ¢ä¸ºå¼§åº¦ã€‚</li><li><strong>ç›¸æœºåæ ‡ç³»æ–¹å‘</strong>ï¼šå¦‚æœç›¸æœºçš„zè½´æŒ‡å‘ç‰©ä½“ï¼Œéœ€è°ƒæ•´è§†é”¥ä½“çš„æ–¹å‘ï¼ˆå¦‚å°† <code>min_z</code> å’Œ <code>max_z</code> æ›¿æ¢ä¸º <code>-min_z</code> å’Œ <code>-max_z</code>ï¼‰ã€‚</li><li><strong>æ‰©å±•è·ç¦»</strong>ï¼šbuffer_distance å¯ä»¥æ ¹æ®éœ€æ±‚è°ƒæ•´ï¼Œæ§åˆ¶bboxçš„æ‰©å±•ç¨‹åº¦ã€‚</li></ol><p>å¸Œæœ›è¿™ä¸ªå®ç°å¯¹æ‚¨æœ‰å¸®åŠ©ï¼</p><p><strong>32bæ¨¡å‹çš„å›ç­”</strong></p><p><img src="/images/deepseek-r1-deploy/image_15.png"></p><p>æ­¥éª¤è¯´æ˜ï¼š</p><ol><li><p><strong>å®šä¹‰å‚æ•°</strong>ï¼š<br>ç¡®å®šæ‰€æœ‰è¾“å…¥å‚æ•°çš„æ„ä¹‰å’Œå•ä½ã€‚</p></li><li><p><strong>è§†é”¥ä½“é¡¶ç‚¹ç”Ÿæˆ</strong>ï¼š</p><ul><li>æ ¹æ®<code>fov_x</code>å’Œ<code>fov_y</code>è®¡ç®—è§†é”¥ä½“åº•é¢çŸ©å½¢çš„å®½åº¦å’Œé«˜åº¦ã€‚</li><li>ç”ŸæˆçŸ©å½¢å››ä¸ªé¡¶ç‚¹åœ¨ç›¸æœºåæ ‡ç³»ä¸‹çš„åæ ‡ã€‚</li></ul></li><li><p><strong>åº”ç”¨æ—‹è½¬å’Œå¹³ç§»å˜æ¢</strong>ï¼š</p><ul><li>å¯¹æ¯ä¸ªé¡¶ç‚¹åº”ç”¨<code>camera_rotation</code>ï¼Œå°†å…¶ä»ç›¸æœºåæ ‡ç³»è½¬æ¢åˆ°ä¸–ç•Œåæ ‡ç³»ã€‚</li><li>å°†æ¯ä¸ªé¡¶ç‚¹åŠ ä¸Š<code>camera_position</code>å‘é‡ï¼Œå®Œæˆå¹³ç§»åˆ°ä¸–ç•Œåæ ‡ç³»çš„è½¬æ¢ã€‚</li></ul></li><li><p><strong>è®¡ç®—åŒ…å›´ç›’</strong>ï¼š</p><ul><li>æ”¶é›†æ‰€æœ‰å˜æ¢åçš„é¡¶ç‚¹å’ŒåŸç‚¹ï¼ˆè§†é”¥ä½“é¡¶ç‚¹ï¼‰åœ¨xå’Œzæ–¹å‘ä¸Šçš„æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚</li><li>è¿™äº›æå€¼æ„æˆäº†åŒ…å›´ç›’çš„èŒƒå›´ã€‚</li></ul></li><li><p><strong>æ‰©å±•åŒ…å›´ç›’</strong>ï¼š</p><ul><li>æ ¹æ®<code>buffer_distance</code>ï¼Œå‘å¤–æ‰©å±•åŒ…å›´ç›’çš„å°ºå¯¸ã€‚è¿™é‡Œå‡è®¾<code>buffer_distance</code>æ˜¯ä¸€ä¸ªæ¯”ä¾‹ï¼Œä¹˜ä»¥å½“å‰åŒ…å›´ç›’çš„å°ºå¯¸è¿›è¡Œæ‰©å±•ã€‚</li></ul></li><li><p><strong>æ›´æ–°å…¨å±€èŒƒå›´</strong>ï¼š</p><ul><li>å°†æ‰©å±•åçš„åŒ…å›´ç›’ä¸ä¼ å…¥çš„<code>min_x</code>, <code>max_x</code>, <code>min_z</code>, <code>max_z</code>è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶æ›´æ–°è¿™äº›å€¼ï¼Œç¡®ä¿å®ƒä»¬åŒ…å«æ›´å¤§çš„èŒƒå›´ã€‚</li></ul></li><li><p><strong>è¿”å›ç»“æœ</strong>ï¼š</p><ul><li>è¿”å›æ›´æ–°åçš„å››ä¸ªè¾¹ç•Œå€¼ã€‚</li></ul></li></ol><p>ä»£ç å®ç°ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">def</span> <span class="token function">visualHull</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> camera_rotation<span class="token punctuation">,</span> camera_position<span class="token punctuation">,</span> buffer_distance<span class="token punctuation">,</span> fov_x<span class="token punctuation">,</span> fov_y<span class="token punctuation">,</span> min_x<span class="token punctuation">,</span> max_x<span class="token punctuation">,</span> min_z<span class="token punctuation">,</span> max_z<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># è®¡ç®—è§†é”¥ä½“åº•é¢çŸ©å½¢çš„å®½åº¦å’Œé«˜åº¦ï¼ˆå‡è®¾è·ç¦»ä¸º1å•ä½é•¿åº¦ï¼‰</span>    half_width <span class="token operator">=</span> np<span class="token punctuation">.</span>tan<span class="token punctuation">(</span>fov_x <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>    half_height <span class="token operator">=</span> np<span class="token punctuation">.</span>tan<span class="token punctuation">(</span>fov_y <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>        <span class="token comment"># è§†é”¥ä½“é¡¶ç‚¹åœ¨ç›¸æœºåæ ‡ç³»ä¸‹</span>    vertices_camera <span class="token operator">=</span> <span class="token punctuation">[</span>        <span class="token punctuation">[</span>half_width<span class="token punctuation">,</span> <span class="token operator">-</span>half_height<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token punctuation">[</span>half_width<span class="token punctuation">,</span> half_height<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token punctuation">[</span><span class="token operator">-</span>half_width<span class="token punctuation">,</span> half_height<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token punctuation">[</span><span class="token operator">-</span>half_width<span class="token punctuation">,</span> <span class="token operator">-</span>half_height<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span>    <span class="token punctuation">]</span>        <span class="token comment"># å°†é¡¶ç‚¹å˜æ¢åˆ°ä¸–ç•Œåæ ‡ç³»</span>    vertices_world <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> vertex <span class="token keyword">in</span> vertices_camera<span class="token punctuation">:</span>        <span class="token comment"># åº”ç”¨æ—‹è½¬</span>        rotated_vertex <span class="token operator">=</span> np<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>camera_rotation<span class="token punctuation">,</span> vertex<span class="token punctuation">)</span>        <span class="token comment"># å¹³ç§»åˆ°ç›¸æœºä½ç½®</span>        world_vertex <span class="token operator">=</span> rotated_vertex <span class="token operator">+</span> camera_position        vertices_world<span class="token punctuation">.</span>append<span class="token punctuation">(</span>world_vertex<span class="token punctuation">)</span>        <span class="token comment"># è®¡ç®—åŒ…å›´ç›’çš„æå€¼ï¼ˆåŒ…æ‹¬è§†é”¥ä½“é¡¶ç‚¹åŸç‚¹ï¼‰</span>    x_coords <span class="token operator">=</span> <span class="token punctuation">[</span>v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">for</span> v <span class="token keyword">in</span> vertices_world<span class="token punctuation">]</span>    z_coords <span class="token operator">=</span> <span class="token punctuation">[</span>v<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token keyword">for</span> v <span class="token keyword">in</span> vertices_world<span class="token punctuation">]</span>        current_min_x <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>x_coords<span class="token punctuation">)</span>    current_max_x <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>x_coords<span class="token punctuation">)</span>    current_min_z <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>z_coords<span class="token punctuation">)</span>    current_max_z <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>z_coords<span class="token punctuation">)</span>        <span class="token comment"># åŒ…æ‹¬è§†é”¥ä½“é¡¶ç‚¹åŸç‚¹</span>    origin <span class="token operator">=</span> camera_position    x_coords<span class="token punctuation">.</span>append<span class="token punctuation">(</span>origin<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    z_coords<span class="token punctuation">.</span>append<span class="token punctuation">(</span>origin<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    current_min_x <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>current_min_x<span class="token punctuation">,</span> origin<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    current_max_x <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>current_max_x<span class="token punctuation">,</span> origin<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    current_min_z <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>current_min_z<span class="token punctuation">,</span> origin<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    current_max_z <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>current_max_z<span class="token punctuation">,</span> origin<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token comment"># æ‰©å±•åŒ…å›´ç›’</span>    width <span class="token operator">=</span> current_max_x <span class="token operator">-</span> current_min_x    height <span class="token operator">=</span> current_max_z <span class="token operator">-</span> current_min_z        expanded_width <span class="token operator">=</span> width <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> buffer_distance<span class="token punctuation">)</span>    expanded_height <span class="token operator">=</span> height <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> buffer_distance<span class="token punctuation">)</span>        expanded_min_x <span class="token operator">=</span> current_min_x <span class="token operator">-</span> <span class="token punctuation">(</span>expanded_width <span class="token operator">-</span> width<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>    expanded_max_x <span class="token operator">=</span> current_max_x <span class="token operator">+</span> <span class="token punctuation">(</span>expanded_width <span class="token operator">-</span> width<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>    expanded_min_z <span class="token operator">=</span> current_min_z <span class="token operator">-</span> <span class="token punctuation">(</span>expanded_height <span class="token operator">-</span> height<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>    expanded_max_z <span class="token operator">=</span> current_max_z <span class="token operator">+</span> <span class="token punctuation">(</span>expanded_height <span class="token operator">-</span> height<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>        <span class="token comment"># æ›´æ–°å…¨å±€èŒƒå›´</span>    <span class="token keyword">if</span> expanded_min_x <span class="token operator">&lt;</span> min_x<span class="token punctuation">:</span>        min_x <span class="token operator">=</span> expanded_min_x    <span class="token keyword">if</span> expanded_max_x <span class="token operator">&gt;</span> max_x<span class="token punctuation">:</span>        max_x <span class="token operator">=</span> expanded_max_x    <span class="token keyword">if</span> expanded_min_z <span class="token operator">&lt;</span> min_z<span class="token punctuation">:</span>        min_z <span class="token operator">=</span> expanded_min_z    <span class="token keyword">if</span> expanded_max_z <span class="token operator">&gt;</span> max_z<span class="token punctuation">:</span>        max_z <span class="token operator">=</span> expanded_max_z        <span class="token keyword">return</span> <span class="token punctuation">(</span>min_x<span class="token punctuation">,</span> max_x<span class="token punctuation">,</span> min_z<span class="token punctuation">,</span> max_z<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¯´æ˜ï¼š</p><ul><li><p><strong>è§†é”¥ä½“ç”Ÿæˆ</strong>ï¼šæ ¹æ®ç»™å®šçš„æ°´å¹³å’Œå‚ç›´è§†åœºè§’ï¼ˆ<code>fov_x</code> å’Œ <code>fov_y</code>ï¼‰ï¼Œè®¡ç®—å‡ºè§†é”¥ä½“åº•é¢çŸ©å½¢åœ¨ç›¸æœºåæ ‡ç³»ä¸‹çš„å››ä¸ªé¡¶ç‚¹ã€‚å‡è®¾è§†é”¥ä½“çš„é«˜åº¦ä¸º1å•ä½é•¿åº¦ã€‚</p></li><li><p><strong>åæ ‡å˜æ¢</strong>ï¼šæ¯ä¸ªé¡¶ç‚¹å…ˆé€šè¿‡æ—‹è½¬çŸ©é˜µ<code>camera_rotation</code>è½¬æ¢åˆ°ä¸–ç•Œåæ ‡ç³»ï¼Œç„¶åå†åº”ç”¨å¹³ç§»å˜æ¢ï¼ŒåŠ ä¸Šç›¸æœºçš„ä½ç½®å‘é‡<code>camera_position</code>ã€‚</p></li><li><p><strong>åŒ…å›´ç›’è®¡ç®—</strong>ï¼šæ”¶é›†æ‰€æœ‰å˜æ¢åçš„é¡¶ç‚¹å’ŒåŸç‚¹ï¼ˆè§†é”¥ä½“çš„é¡¶ç‚¹ï¼‰åœ¨xå’Œzæ–¹å‘ä¸Šçš„æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼Œä»è€Œå¾—åˆ°åŒ…å›´ç›’çš„èŒƒå›´ã€‚</p></li><li><p><strong>æ‰©å±•åŒ…å›´ç›’</strong>ï¼šæ ¹æ®ç»™å®šçš„<code>buffer_distance</code>ï¼ˆè¿™é‡Œä½œä¸ºæ¯”ä¾‹ï¼‰ï¼Œå‘å¤–æ‰©å±•åŒ…å›´ç›’çš„å°ºå¯¸ã€‚è®¡ç®—æ–°çš„æå€¼ï¼Œå¹¶ç¡®ä¿æ‰©å±•åçš„åŒ…å›´ç›’æ­£ç¡®è¦†ç›–åŸè§†é”¥ä½“åŒºåŸŸã€‚</p></li><li><p><strong>æ›´æ–°å…¨å±€èŒƒå›´</strong>ï¼šå°†æ‰©å±•åçš„åŒ…å›´ç›’ä¸ä¼ å…¥çš„å…¨å±€è¾¹ç•Œè¿›è¡Œæ¯”è¾ƒï¼Œæ›´æ–°è¿™äº›è¾¹ç•Œä»¥åŒ…å«æ›´å¤§çš„èŒƒå›´ã€‚</p></li><li><p><strong>è¿”å›ç»“æœ</strong>ï¼šæœ€åï¼Œè¿”å›æ›´æ–°åçš„å››ä¸ªè¾¹ç•Œå€¼<code>min_x</code>, <code>max_x</code>, <code>min_z</code>, å’Œ <code>max_z</code>ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤§æ¨¡å‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gaussian Splatting SLAM(MonoGS)ä»£ç æ¢³ç†</title>
      <link href="2025/01/18/code-reading-monogs/"/>
      <url>2025/01/18/code-reading-monogs/</url>
      
        <content type="html"><![CDATA[<h1 id="Gaussian-Splatting-SLAM-MonoGS-ä»£ç æ¢³ç†"><a href="#Gaussian-Splatting-SLAM-MonoGS-ä»£ç æ¢³ç†" class="headerlink" title="Gaussian Splatting SLAM(MonoGS)ä»£ç æ¢³ç†"></a>Gaussian Splatting SLAM(MonoGS)ä»£ç æ¢³ç†</h1><p><strong>Gaussian Splatting SLAM</strong></p><p>CVPR 2024 <font color="red">(Highlight &amp; Best Demo Award)</font></p><ul><li><strong>ä¸»é¡µ</strong>ï¼š<a href="https://rmurai.co.uk/projects/GaussianSplattingSLAM">https://rmurai.co.uk/projects/GaussianSplattingSLAM</a></li><li><strong>ä»£ç </strong>ï¼š<a href="https://github.com/muskie82/MonoGS">https://github.com/muskie82/MonoGS</a></li><li><strong>è®ºæ–‡</strong>ï¼š<a href="https://arxiv.org/abs/2312.06741">https://arxiv.org/abs/2312.06741</a></li><li><strong>è§†é¢‘</strong>ï¼š<a href="https://www.youtube.com/watch?v=x604ghp9R_Q">https://www.youtube.com/watch?v=x604ghp9R_Q</a></li></ul><h2 id="æ•´ä½“æ¡†æ¶"><a href="#æ•´ä½“æ¡†æ¶" class="headerlink" title="æ•´ä½“æ¡†æ¶"></a>æ•´ä½“æ¡†æ¶</h2><p>MonoGSæ•´ä½“åˆ†ä¸ºä¸¤ä¸ªçº¿ç¨‹ï¼šTrackingå’ŒMappingã€‚</p><p>Keyframingåªæ˜¯è¡”æ¥Trackingçº¿ç¨‹å’ŒMappingçº¿ç¨‹ï¼Œé€‰æ‹©Trackingçº¿ç¨‹ä¸­çš„æŸäº›frameä½œä¸ºkeyframeï¼Œè€ŒMappingä¹Ÿåªå¯¹keyframeåšé‡å»ºã€‚</p><p><img src="/images/code-reading-monogs/0.png"></p><h2 id="ä»£ç æ•´ä½“é€»è¾‘"><a href="#ä»£ç æ•´ä½“é€»è¾‘" class="headerlink" title="ä»£ç æ•´ä½“é€»è¾‘"></a>ä»£ç æ•´ä½“é€»è¾‘</h2><p>æ•´ä¸ªSLAMç³»ç»Ÿä½œä¸ºä¸€ä¸ªç±»å®ç°åœ¨<code>SLAM.py</code>ä¸­ï¼Œè€Œä¸”åœ¨<code>__init__()</code>çš„æ—¶å€™å°±è¿è¡Œäº†æ‰€æœ‰çš„çº¿ç¨‹ï¼š</p><ul><li>gui_process</li><li>backend_process</li><li>frontend_process</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ################## SYSTEM STEP 2.1.3 : å¯åŠ¨å„ä¸ªè¿›ç¨‹ ################## START</span><span class="token comment"># ä¸ºä»€ä¹ˆå…ˆåˆ›å»º backend_process, å†åˆ›å»º gui_processï¼Ÿ</span><span class="token comment"># æ”¹äº†ä¸€ä¸‹é¡ºåºè·‘ä»£ç ï¼Œçœ‹èµ·æ¥æ˜¯æ²¡æœ‰å½±å“çš„ã€‚</span><span class="token comment"># backend_process = mp.Process(target=self.backend.run) # å®˜æ–¹çš„é¡ºåº</span><span class="token keyword">if</span> self<span class="token punctuation">.</span>use_gui<span class="token punctuation">:</span>    <span class="token comment"># åˆ›å»ºä¸€ä¸ª GUI è¿›ç¨‹ï¼Œç›®æ ‡å‡½æ•°ä¸º slam_gui.runï¼Œä¼ é€’å‚æ•° self.params_gui</span>    gui_process <span class="token operator">=</span> mp<span class="token punctuation">.</span>Process<span class="token punctuation">(</span>target<span class="token operator">=</span>slam_gui<span class="token punctuation">.</span>run<span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>params_gui<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># å¯åŠ¨ GUI è¿›ç¨‹</span>    gui_process<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># ç­‰å¾…5ç§’ï¼Œä¸»è¦æ˜¯ç­‰ GUI ç•Œé¢åŠ è½½å¥½</span>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token comment"># åˆ›å»ºä¸€ä¸ªå¤šè¿›ç¨‹å¯¹è±¡ backend_processï¼Œç›®æ ‡å‡½æ•°ä¸º self.backend.run</span>backend_process <span class="token operator">=</span> mp<span class="token punctuation">.</span>Process<span class="token punctuation">(</span>target<span class="token operator">=</span>self<span class="token punctuation">.</span>backend<span class="token punctuation">.</span>run<span class="token punctuation">)</span>  <span class="token comment"># æˆ‘æ”¹åŠ¨çš„é¡ºåº</span><span class="token comment"># å¯åŠ¨ backend_process è¿›ç¨‹</span>backend_process<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># ä¸»è¿›ç¨‹è¿è¡Œfrontend</span>self<span class="token punctuation">.</span>frontend<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># å‰ç«¯è¿è¡Œç»“æŸäº†ï¼Œåˆ©ç”¨é˜Ÿåˆ—ä¼ é€’ä¿¡æ¯ï¼Œè®©åç«¯æš‚åœ</span>backend_queue<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"pause"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># è®°å½•ç»“æŸçš„æ—¶é—´</span>end<span class="token punctuation">.</span>record<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># åœ¨CUDAè®¾å¤‡ä¸ŠåŒæ­¥æ‰€æœ‰æµï¼ˆstreamsï¼‰</span>torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>synchronize<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># empty the frontend queue</span><span class="token comment"># ################## SYSTEM STEP 2.1.3 : å¯åŠ¨å„ä¸ªè¿›ç¨‹ ################## END</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œçº¿ç¨‹ä¹‹å‰ï¼Œå„ç§åˆå§‹åŒ–å·¥ä½œï¼›</p><p>è¿è¡Œçº¿ç¨‹ä¹‹åï¼Œevaluationå’Œçº¿ç¨‹çš„æ”¶å°¾å·¥ä½œï¼Œå½»åº•å…³é—­æ‰€æœ‰çº¿ç¨‹ã€‚</p><h2 id="Tracking-frontend-process"><a href="#Tracking-frontend-process" class="headerlink" title="Tracking(frontend process)"></a>Tracking(frontend process)</h2><p><strong>åˆå§‹åŒ–</strong>ï¼š</p><p>åœ¨<code>slam.py</code>çš„<code>__init__()</code>ä¸­è°ƒç”¨ï¼Œä»…ä»…æ˜¯è®¾ç½®å¥½å„ç§å‚æ•°ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">    <span class="token comment"># åˆå§‹åŒ–SLAMçš„å‰ç«¯</span>    self<span class="token punctuation">.</span>frontend <span class="token operator">=</span> FrontEnd<span class="token punctuation">(</span>self<span class="token punctuation">.</span>config<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token comment"># æŒ‡å®šå‰ç«¯çš„ä¸€ç³»åˆ—å‚æ•°</span>    self<span class="token punctuation">.</span>frontend<span class="token punctuation">.</span>dataset <span class="token operator">=</span> self<span class="token punctuation">.</span>dataset    self<span class="token punctuation">.</span>frontend<span class="token punctuation">.</span>background <span class="token operator">=</span> self<span class="token punctuation">.</span>background    self<span class="token punctuation">.</span>frontend<span class="token punctuation">.</span>pipeline_params <span class="token operator">=</span> self<span class="token punctuation">.</span>pipeline_params    self<span class="token punctuation">.</span>frontend<span class="token punctuation">.</span>frontend_queue <span class="token operator">=</span> frontend_queue    self<span class="token punctuation">.</span>frontend<span class="token punctuation">.</span>backend_queue <span class="token operator">=</span> backend_queue    self<span class="token punctuation">.</span>frontend<span class="token punctuation">.</span>q_main2vis <span class="token operator">=</span> q_main2vis    self<span class="token punctuation">.</span>frontend<span class="token punctuation">.</span>q_vis2main <span class="token operator">=</span> q_vis2main    self<span class="token punctuation">.</span>frontend<span class="token punctuation">.</span>set_hyperparams<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>è¿è¡Œ</strong>ï¼š</p><p>åœ¨<code>slam.py</code>çš„<code>__init__()</code>ä¸­è°ƒç”¨ï¼Œä¸»çº¿ç¨‹è¿è¡Œtrackingã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ä¸»è¿›ç¨‹è¿è¡Œfrontend</span>self<span class="token punctuation">.</span>frontend<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>è¿è¡Œé€»è¾‘</strong>ï¼š</p><p>Trackingçº¿ç¨‹çš„é€»è¾‘æ¯”Mappingçº¿ç¨‹è¦å¤æ‚ä¸€äº›ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>    cur_frame_idx <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment"># æ ¹æ®ç›¸æœºå†…å‚ç”Ÿæˆä¸€ä¸ªæŠ•å½±çŸ©é˜µï¼ˆProjection Matrixï¼‰ç”¨äºè®¡ç®— 3D å›¾åƒçš„æŠ•å½±å˜æ¢ï¼Œå›¾å½¢å­¦ç”¨çš„æ¯”è¾ƒå¤šï¼Ÿ</span>    <span class="token comment"># znear å’Œ zfar æ˜¯ 3D æŠ•å½±ä¸­è§†é”¥ä½“çš„è¿‘è£å‰ªå¹³é¢å’Œè¿œè£å‰ªå¹³é¢çš„è·ç¦»ï¼Œç”¨äºå®šä¹‰ç›¸æœºèƒ½å¤Ÿæ•è·çš„æ·±åº¦èŒƒå›´</span>    projection_matrix <span class="token operator">=</span> getProjectionMatrix2<span class="token punctuation">(</span>        znear<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">,</span>        zfar<span class="token operator">=</span><span class="token number">100.0</span><span class="token punctuation">,</span>        fx<span class="token operator">=</span>self<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>fx<span class="token punctuation">,</span>        fy<span class="token operator">=</span>self<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>fy<span class="token punctuation">,</span>        cx<span class="token operator">=</span>self<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>cx<span class="token punctuation">,</span>        cy<span class="token operator">=</span>self<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>cy<span class="token punctuation">,</span>        W<span class="token operator">=</span>self<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>width<span class="token punctuation">,</span>        H<span class="token operator">=</span>self<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>height<span class="token punctuation">,</span>    <span class="token punctuation">)</span><span class="token punctuation">.</span>transpose<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>    projection_matrix <span class="token operator">=</span> projection_matrix<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token operator">=</span>self<span class="token punctuation">.</span>device<span class="token punctuation">)</span>    tic <span class="token operator">=</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>Event<span class="token punctuation">(</span>enable_timing<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    toc <span class="token operator">=</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>Event<span class="token punctuation">(</span>enable_timing<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token comment">#################################</span>    <span class="token comment"># æ­£å¼è¿›å…¥trackingçº¿ç¨‹</span>    <span class="token comment">#################################</span>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>        <span class="token comment">#################################</span>        <span class="token comment"># å’ŒGUIç•Œé¢é€šä¿¡ï¼Œè·å–GUIç•Œé¢çš„æ§åˆ¶ä¿¡æ¯</span>        <span class="token comment">#################################</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>q_vis2main<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> self<span class="token punctuation">.</span>pause<span class="token punctuation">:</span>                <span class="token keyword">continue</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            data_vis2main <span class="token operator">=</span> self<span class="token punctuation">.</span>q_vis2main<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>pause <span class="token operator">=</span> data_vis2main<span class="token punctuation">.</span>flag_pause            <span class="token keyword">if</span> self<span class="token punctuation">.</span>pause<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>backend_queue<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"pause"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">continue</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                self<span class="token punctuation">.</span>backend_queue<span class="token punctuation">.</span>put<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"unpause"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token comment">#################################</span>        <span class="token comment">#################################</span>        <span class="token comment"># trackingçº¿ç¨‹çš„å†…éƒ¨é€»è¾‘</span>        <span class="token comment">#################################</span>        <span class="token comment"># å¦‚æœbackendæ²¡æœ‰å‘é€æ§åˆ¶ä¿¡æ¯ï¼Œè¿›è¡Œæ­£å¸¸çš„trackingæµç¨‹</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>frontend_queue<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment">#################################</span>            <span class="token comment"># trackingå‰çš„é€»è¾‘åˆ¤æ–­</span>            <span class="token comment">#################################</span>            tic<span class="token punctuation">.</span>record<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># å¦‚æœè¿è¡Œå®Œäº†æ•´ä¸ªåºåˆ—ï¼Œä¿å­˜ç»“æœï¼Œç»“æŸå¾ªç¯</span>            <span class="token comment"># TODO ç–‘é—®ï¼šä¸ºä»€ä¹ˆè®©frontendæ¥åšè¿™ä¸ªäº‹æƒ…ï¼Œä¸ç­‰backendæŠŠæœ€åå‡ ä¸ªkeyframeå¤„ç†ä¸€ä¸‹å—ï¼Ÿ</span>            <span class="token keyword">if</span> cur_frame_idx <span class="token operator">&gt;=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>dataset<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> self<span class="token punctuation">.</span>save_results<span class="token punctuation">:</span>                    eval_ate<span class="token punctuation">(</span>                        self<span class="token punctuation">.</span>cameras<span class="token punctuation">,</span>                        self<span class="token punctuation">.</span>kf_indices<span class="token punctuation">,</span>                        self<span class="token punctuation">.</span>save_dir<span class="token punctuation">,</span>                        <span class="token number">0</span><span class="token punctuation">,</span>                        final<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>                        monocular<span class="token operator">=</span>self<span class="token punctuation">.</span>monocular<span class="token punctuation">,</span>                    <span class="token punctuation">)</span>                    save_gaussians<span class="token punctuation">(</span>                        self<span class="token punctuation">.</span>gaussians<span class="token punctuation">,</span> self<span class="token punctuation">.</span>save_dir<span class="token punctuation">,</span> <span class="token string">"final"</span><span class="token punctuation">,</span> final<span class="token operator">=</span><span class="token boolean">True</span>                    <span class="token punctuation">)</span>                <span class="token keyword">break</span>            <span class="token comment"># å¦‚æœéœ€è¦åˆå§‹åŒ–ï¼Œè¿›è¡Œç­‰å¾…</span>            <span class="token comment"># åªæœ‰è¢«resetçš„æ—¶å€™æ‰ä¼šéœ€è¦åˆå§‹åŒ–</span>            <span class="token keyword">if</span> self<span class="token punctuation">.</span>requested_init<span class="token punctuation">:</span>                time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.01</span><span class="token punctuation">)</span>                <span class="token keyword">continue</span>            <span class="token comment"># å¦‚æœæ˜¯å•çº¿ç¨‹ï¼Œè€Œä¸”åˆšåˆ›å»ºå…³é”®å¸§ï¼Œå°±å…ˆè¿›è¡Œç­‰å¾…</span>            <span class="token keyword">if</span> self<span class="token punctuation">.</span>single_thread <span class="token keyword">and</span> self<span class="token punctuation">.</span>requested_keyframe <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>                time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.01</span><span class="token punctuation">)</span>                <span class="token keyword">continue</span>            <span class="token comment"># å¦‚æœæ²¡æœ‰å®Œæˆåˆå§‹åŒ–ï¼Œè€Œä¸”åˆšåˆ›å»ºå…³é”®å¸§ï¼Œä¹Ÿè¿›è¡Œç­‰å¾…</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>initialized <span class="token keyword">and</span> self<span class="token punctuation">.</span>requested_keyframe <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>                time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.01</span><span class="token punctuation">)</span>                <span class="token keyword">continue</span>            <span class="token comment"># åˆ›å»ºå½“å‰å¸§çš„viewpoint</span>            viewpoint <span class="token operator">=</span> Camera<span class="token punctuation">.</span>init_from_dataset<span class="token punctuation">(</span>                self<span class="token punctuation">.</span>dataset<span class="token punctuation">,</span> cur_frame_idx<span class="token punctuation">,</span> projection_matrix            <span class="token punctuation">)</span>            <span class="token comment"># æ ¹æ®è¾¹ç¼˜æ£€æµ‹ç­‰ç­–ç•¥ï¼Œåˆ›å»ºgrad mask</span>            viewpoint<span class="token punctuation">.</span>compute_grad_mask<span class="token punctuation">(</span>self<span class="token punctuation">.</span>config<span class="token punctuation">)</span>            self<span class="token punctuation">.</span>cameras<span class="token punctuation">[</span>cur_frame_idx<span class="token punctuation">]</span> <span class="token operator">=</span> viewpoint            <span class="token comment"># è¿›è¡Œåˆå§‹åŒ–ï¼Œæ³¨æ„ï¼šfrontendåˆå§‹åŒ–æ—¶ï¼Œresetä¸ºTrueã€‚</span>            <span class="token keyword">if</span> self<span class="token punctuation">.</span>reset<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>initialize<span class="token punctuation">(</span>cur_frame_idx<span class="token punctuation">,</span> viewpoint<span class="token punctuation">)</span>                self<span class="token punctuation">.</span>current_window<span class="token punctuation">.</span>append<span class="token punctuation">(</span>cur_frame_idx<span class="token punctuation">)</span>                cur_frame_idx <span class="token operator">+=</span> <span class="token number">1</span>                <span class="token keyword">continue</span>            <span class="token comment"># åˆ¤æ–­æ˜¯å¦å®Œæˆåˆå§‹åŒ–ã€‚</span>            <span class="token comment"># å¯¹äºrgb-dï¼Œè¿è¡Œäº†initializeå‡½æ•°å°±åˆå§‹åŒ–äº†ï¼›</span>            <span class="token comment"># å¯¹äºmonoï¼Œå¦‚æœcurrent_windowç§¯æ”’äº†è¶³å¤Ÿçš„æ•°æ®ï¼Œå°±è®¤ä¸ºèƒ½å¤Ÿæ”¯æŒæ­£ç¡®çš„åˆå§‹åŒ–ã€‚</span>            self<span class="token punctuation">.</span>initialized <span class="token operator">=</span> self<span class="token punctuation">.</span>initialized <span class="token keyword">or</span> <span class="token punctuation">(</span>                <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>current_window<span class="token punctuation">)</span> <span class="token operator">==</span> self<span class="token punctuation">.</span>window_size            <span class="token punctuation">)</span>            <span class="token comment">#################################</span>            <span class="token comment"># Tracking</span>            render_pkg <span class="token operator">=</span> self<span class="token punctuation">.</span>tracking<span class="token punctuation">(</span>cur_frame_idx<span class="token punctuation">,</span> viewpoint<span class="token punctuation">)</span>            <span class="token comment">#################################</span>            <span class="token comment"># å’ŒGUIç›¸å…³çš„ä»£ç ï¼Œå¯¹trackingä¸»è¦é€»è¾‘æ²¡æœ‰å½±å“</span>            <span class="token comment">#################################</span>            current_window_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>            current_window_dict<span class="token punctuation">[</span>self<span class="token punctuation">.</span>current_window<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>current_window<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>            keyframes <span class="token operator">=</span> <span class="token punctuation">[</span>self<span class="token punctuation">.</span>cameras<span class="token punctuation">[</span>kf_idx<span class="token punctuation">]</span> <span class="token keyword">for</span> kf_idx <span class="token keyword">in</span> self<span class="token punctuation">.</span>current_window<span class="token punctuation">]</span>            self<span class="token punctuation">.</span>q_main2vis<span class="token punctuation">.</span>put<span class="token punctuation">(</span>                gui_utils<span class="token punctuation">.</span>GaussianPacket<span class="token punctuation">(</span>                    gaussians<span class="token operator">=</span>clone_obj<span class="token punctuation">(</span>self<span class="token punctuation">.</span>gaussians<span class="token punctuation">)</span><span class="token punctuation">,</span>                    current_frame<span class="token operator">=</span>viewpoint<span class="token punctuation">,</span>                    keyframes<span class="token operator">=</span>keyframes<span class="token punctuation">,</span>                    kf_window<span class="token operator">=</span>current_window_dict<span class="token punctuation">,</span>                <span class="token punctuation">)</span>            <span class="token punctuation">)</span>            <span class="token comment">#################################</span>            <span class="token comment">#################################</span>            <span class="token comment"># keyframeåˆ›å»ºã€ç®¡ç†æµç¨‹</span>            <span class="token comment">#################################</span>            <span class="token comment"># å¦‚æœåˆ›å»ºäº†æ–°çš„keyframeï¼Œé‚£ä¹ˆé‡Šæ”¾å½“å‰å¸§çš„å†…å­˜ï¼Œå¹¶ä¸”è·³è¿‡ä¸‹é¢çš„æ­¥éª¤</span>            <span class="token keyword">if</span> self<span class="token punctuation">.</span>requested_keyframe <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>                self<span class="token punctuation">.</span>cleanup<span class="token punctuation">(</span>cur_frame_idx<span class="token punctuation">)</span>                cur_frame_idx <span class="token operator">+=</span> <span class="token number">1</span>                <span class="token keyword">continue</span>            <span class="token comment"># å¦‚æœç›®å‰æ²¡æœ‰æ–°çš„keyframeï¼Œå¼€å§‹åˆ¤æ–­æ˜¯å¦åˆ›å»ºkeyframe</span>            last_keyframe_idx <span class="token operator">=</span> self<span class="token punctuation">.</span>current_window<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>            check_time <span class="token operator">=</span> <span class="token punctuation">(</span>cur_frame_idx <span class="token operator">-</span> last_keyframe_idx<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>kf_interval            curr_visibility <span class="token operator">=</span> <span class="token punctuation">(</span>render_pkg<span class="token punctuation">[</span><span class="token string">"n_touched"</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">long</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># å¦‚æœä¸ä¸Šä¸€ä¸ªå…³é”®å¸§è·ç¦»è¿‡å¤§ï¼Œæˆ–è€…é‡å åº¦è¾ƒä½&amp;å’Œä¸Šä¸ªå…³é”®å¸§æœ‰ä¸€å®šçš„è·ç¦»ï¼Œå°±åˆ›å»ºå…³é”®å¸§</span>            create_kf <span class="token operator">=</span> self<span class="token punctuation">.</span>is_keyframe<span class="token punctuation">(</span>                cur_frame_idx<span class="token punctuation">,</span>                last_keyframe_idx<span class="token punctuation">,</span>                curr_visibility<span class="token punctuation">,</span>                self<span class="token punctuation">.</span>occ_aware_visibility<span class="token punctuation">,</span>            <span class="token punctuation">)</span>            <span class="token comment"># å¦‚æœå½“å‰çš„æ»‘åŠ¨çª—å£æ²¡æœ‰æ»¡ï¼Œä½¿ç”¨æ›´å®½æ¾çš„æ¡ä»¶åˆ¤æ–­æ˜¯å¦éœ€è¦åˆ›å»ºå…³é”®å¸§</span>            <span class="token comment"># TODO ç–‘é—®ï¼šå¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œå¯ä»¥æŠŠcreate_kfçš„æ¡ä»¶ä¹Ÿæ”¾è¿›æ¥å§ï¼Ÿ</span>            <span class="token comment">#           ä¸è¿‡åº”è¯¥ä¸å­˜åœ¨ä¸Šé¢çš„æ¡ä»¶æ»¡è¶³ï¼Œä½†ä¸‹é¢çš„æ¡ä»¶ä¸æ»¡è¶³çš„æƒ…å†µã€‚</span>            <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>current_window<span class="token punctuation">)</span> <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>window_size<span class="token punctuation">:</span>                union <span class="token operator">=</span> torch<span class="token punctuation">.</span>logical_or<span class="token punctuation">(</span>                    curr_visibility<span class="token punctuation">,</span> self<span class="token punctuation">.</span>occ_aware_visibility<span class="token punctuation">[</span>last_keyframe_idx<span class="token punctuation">]</span>                <span class="token punctuation">)</span><span class="token punctuation">.</span>count_nonzero<span class="token punctuation">(</span><span class="token punctuation">)</span>                intersection <span class="token operator">=</span> torch<span class="token punctuation">.</span>logical_and<span class="token punctuation">(</span>                    curr_visibility<span class="token punctuation">,</span> self<span class="token punctuation">.</span>occ_aware_visibility<span class="token punctuation">[</span>last_keyframe_idx<span class="token punctuation">]</span>                <span class="token punctuation">)</span><span class="token punctuation">.</span>count_nonzero<span class="token punctuation">(</span><span class="token punctuation">)</span>                point_ratio <span class="token operator">=</span> intersection <span class="token operator">/</span> union                create_kf <span class="token operator">=</span> <span class="token punctuation">(</span>                    check_time                    <span class="token keyword">and</span> point_ratio <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">"Training"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"kf_overlap"</span><span class="token punctuation">]</span>                <span class="token punctuation">)</span>            <span class="token comment"># å¦‚æœæ˜¯å•çº¿ç¨‹æ¨¡å¼ï¼Œè¿˜è¦å†æ£€æŸ¥ä¸€éæ—¶é—´é—´éš”æ˜¯å¦æ»¡è¶³è¦æ±‚ã€‚</span>            <span class="token comment"># WHYï¼Ÿå› ä¸ºå•çº¿ç¨‹ä¸æƒ³åˆ›å»ºå¤ªå¤šçš„å…³é”®å¸§ï¼Ÿ</span>            <span class="token keyword">if</span> self<span class="token punctuation">.</span>single_thread<span class="token punctuation">:</span>                create_kf <span class="token operator">=</span> check_time <span class="token keyword">and</span> create_kf            <span class="token comment"># å¦‚æœç¡®å®šå½“å‰å¸§æ˜¯å…³é”®å¸§ï¼Œåˆ›å»ºå…³é”®å¸§</span>            <span class="token keyword">if</span> create_kf<span class="token punctuation">:</span>                <span class="token comment"># å°†å½“å‰å¸§æ·»åŠ åˆ°æ»‘åŠ¨çª—å£ï¼Œå¹¶ä¸”åˆ é™¤ä¸å½“å‰å¸§é‡å åº¦å°äºé˜ˆå€¼çš„å…³é”®å¸§</span>                <span class="token comment"># å¦‚æœé‡å åº¦éƒ½å¤§äºé˜ˆå€¼ï¼Œè€Œä¸”æ»‘åŠ¨çª—å£çš„sizeè¶…äº†ï¼Œå°±åˆ é™¤é‡å çš„æœ€å°‘çš„é‚£ä¸ªå…³é”®å¸§ï¼ˆçœ‹èµ·æ¥åƒä¸ªBUGï¼Œä¸ºä»€ä¹ˆé‡å åº¦éƒ½è¿™ä¹ˆå¤§è¿˜ä¼šåˆ›å»ºå…³é”®å¸§å‘¢ï¼‰</span>                self<span class="token punctuation">.</span>current_window<span class="token punctuation">,</span> removed <span class="token operator">=</span> self<span class="token punctuation">.</span>add_to_window<span class="token punctuation">(</span>                    cur_frame_idx<span class="token punctuation">,</span>                    curr_visibility<span class="token punctuation">,</span>                    self<span class="token punctuation">.</span>occ_aware_visibility<span class="token punctuation">,</span>                    self<span class="token punctuation">.</span>current_window<span class="token punctuation">,</span>                <span class="token punctuation">)</span>                <span class="token comment"># monocularçš„æƒ…å†µä¸‹ï¼Œå¦‚æœæ²¡æœ‰å®Œæˆinitializedï¼Œè€Œä¸”åˆæœ‰keyframeè¢«åˆ é™¤ï¼Œè¯´æ˜æ–°è¿›æ¥çš„å¸§overlapè¾ƒå°‘ï¼Œéœ€è¦resettingã€‚</span>                <span class="token keyword">if</span> self<span class="token punctuation">.</span>monocular <span class="token keyword">and</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>initialized <span class="token keyword">and</span> removed <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>                    self<span class="token punctuation">.</span>reset <span class="token operator">=</span> <span class="token boolean">True</span>                    Log<span class="token punctuation">(</span>                        <span class="token string">"Keyframes lacks sufficient overlap to initialize the map, resetting."</span>                    <span class="token punctuation">)</span>                    <span class="token keyword">continue</span>                <span class="token comment"># å¦‚æœæ˜¯monocularï¼Œä½¿ç”¨æ¸²æŸ“çš„depthå’Œopacityæ¥ä¸ºå½“å‰å…³é”®å¸§åˆ›å»ºdepth</span>                <span class="token comment"># å¦‚æœæ˜¯RGB-Dï¼Œç›´æ¥ä½¿ç”¨è§‚æµ‹çš„depthï¼Œæ¸²æŸ“çš„ç»“æœå°±ä¸ç”¨äº†</span>                depth_map <span class="token operator">=</span> self<span class="token punctuation">.</span>add_new_keyframe<span class="token punctuation">(</span>                    cur_frame_idx<span class="token punctuation">,</span>                    depth<span class="token operator">=</span>render_pkg<span class="token punctuation">[</span><span class="token string">"depth"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    opacity<span class="token operator">=</span>render_pkg<span class="token punctuation">[</span><span class="token string">"opacity"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    init<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>                <span class="token punctuation">)</span>                <span class="token comment"># å‘backendå‘é€æ¶ˆæ¯ï¼Œå°†new keyframeå‘é€è¿‡å»</span>                self<span class="token punctuation">.</span>request_keyframe<span class="token punctuation">(</span>                    cur_frame_idx<span class="token punctuation">,</span> viewpoint<span class="token punctuation">,</span> self<span class="token punctuation">.</span>current_window<span class="token punctuation">,</span> depth_map                <span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment"># å¦åˆ™ï¼Œé‡Šæ”¾å½“å‰å¸§çš„å†…å­˜</span>                self<span class="token punctuation">.</span>cleanup<span class="token punctuation">(</span>cur_frame_idx<span class="token punctuation">)</span>            cur_frame_idx <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token comment">#################################</span>            <span class="token comment"># ä¿å­˜å½“å‰å¸§çš„è¯„ä¼°ç»“æœ</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>                self<span class="token punctuation">.</span>save_results                <span class="token keyword">and</span> self<span class="token punctuation">.</span>save_trj                <span class="token keyword">and</span> create_kf                <span class="token keyword">and</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>kf_indices<span class="token punctuation">)</span> <span class="token operator">%</span> self<span class="token punctuation">.</span>save_trj_kf_intv <span class="token operator">==</span> <span class="token number">0</span>            <span class="token punctuation">)</span><span class="token punctuation">:</span>                Log<span class="token punctuation">(</span><span class="token string">"Evaluating ATE at frame: "</span><span class="token punctuation">,</span> cur_frame_idx<span class="token punctuation">)</span>                eval_ate<span class="token punctuation">(</span>                    self<span class="token punctuation">.</span>cameras<span class="token punctuation">,</span>                    self<span class="token punctuation">.</span>kf_indices<span class="token punctuation">,</span>                    self<span class="token punctuation">.</span>save_dir<span class="token punctuation">,</span>                    cur_frame_idx<span class="token punctuation">,</span>                    monocular<span class="token operator">=</span>self<span class="token punctuation">.</span>monocular<span class="token punctuation">,</span>                <span class="token punctuation">)</span>            toc<span class="token punctuation">.</span>record<span class="token punctuation">(</span><span class="token punctuation">)</span>            torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>synchronize<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># FIXME çœ‹èµ·æ¥å¦‚æœåˆ›å»ºäº†å…³é”®å¸§ï¼Œfrontendè¿˜éœ€è¦ç­‰ä¸€ç­‰ï¼Œè¿™æ ·çš„è¯trackingçš„é€Ÿç‡å°±è¢«é™åˆ¶äº†</span>            <span class="token comment">#  è¿™é‡Œå¯èƒ½æ˜¯ä¸€ä¸ªå°trickï¼Œkeyframeåˆ°äº†backendä¹‹åï¼Œå°±è¦ä¼˜åŒ–åœºæ™¯çš„gaussianäº†</span>            <span class="token comment">#  è€Œè¿™ä¸ªæœŸé—´ï¼Œåœºæ™¯çš„gaussianå¯èƒ½ä¸å¤ªé€‚åˆtrackingï¼Œä¼šå½±å“trackingçš„ç»“æœ</span>            <span class="token comment">#</span>            <span class="token comment">#  å¯èƒ½çš„æ”¹è¿›æ€è·¯ï¼šåˆ›å»ºä¸€ä¸ªmaskï¼Œæ–°å¢çš„åŒºåŸŸä¸å‚ä¸trackingï¼Œè¿™æ ·å°±å¯ä»¥å…¨é€Ÿtrackingäº†ã€‚</span>            <span class="token comment">#   ä½†æ˜¯è¿™æ ·å¯èƒ½ä¹Ÿæœ‰é—®é¢˜ï¼Œoverlappingå˜å°äº†ï¼Œtrackingçš„ç»“æœä¸ä¸€å®šæ›´å¥½ã€‚</span>            <span class="token comment">#   è¯´åˆ°åº•è¿˜æ˜¯inverse 3DGSçš„trackingå¤ªè„†å¼±äº†ã€‚ã€‚ã€‚</span>            <span class="token keyword">if</span> create_kf<span class="token punctuation">:</span>                <span class="token comment"># throttle at 3fps when keyframe is added</span>                duration <span class="token operator">=</span> tic<span class="token punctuation">.</span>elapsed_time<span class="token punctuation">(</span>toc<span class="token punctuation">)</span>                time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">1.0</span> <span class="token operator">/</span> <span class="token number">3.0</span> <span class="token operator">-</span> duration <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment"># å¦‚æœæ¥æ”¶åˆ°äº†æ§åˆ¶ä¿¡æ¯ï¼Œä¼˜å…ˆå¤„ç†æ§åˆ¶ä¿¡æ¯</span>            data <span class="token operator">=</span> self<span class="token punctuation">.</span>frontend_queue<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"sync_backend"</span><span class="token punctuation">:</span>                self<span class="token punctuation">.</span>sync_backend<span class="token punctuation">(</span>data<span class="token punctuation">)</span>            <span class="token keyword">elif</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"keyframe"</span><span class="token punctuation">:</span>                self<span class="token punctuation">.</span>sync_backend<span class="token punctuation">(</span>data<span class="token punctuation">)</span>                self<span class="token punctuation">.</span>requested_keyframe <span class="token operator">-=</span> <span class="token number">1</span>            <span class="token keyword">elif</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"init"</span><span class="token punctuation">:</span>                self<span class="token punctuation">.</span>sync_backend<span class="token punctuation">(</span>data<span class="token punctuation">)</span>                self<span class="token punctuation">.</span>requested_init <span class="token operator">=</span> <span class="token boolean">False</span>            <span class="token keyword">elif</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"stop"</span><span class="token punctuation">:</span>                Log<span class="token punctuation">(</span><span class="token string">"Frontend Stopped."</span><span class="token punctuation">)</span>                <span class="token keyword">break</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Mapping-backend-process"><a href="#Mapping-backend-process" class="headerlink" title="Mapping(backend process)"></a>Mapping(backend process)</h2><p><strong>åˆå§‹åŒ–</strong>ï¼š</p><p>ä¸Trackingç›¸åŒï¼Œåœ¨<code>slam.py</code>çš„<code>__init__()</code>ä¸­è°ƒç”¨ï¼Œä»…ä»…æ˜¯è®¾ç½®å¥½å„ç§å‚æ•°ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># åˆå§‹åŒ–SLAMçš„åç«¯</span>self<span class="token punctuation">.</span>backend <span class="token operator">=</span> BackEnd<span class="token punctuation">(</span>self<span class="token punctuation">.</span>config<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># æŒ‡å®šåç«¯çš„ä¸€ç³»åˆ—å‚æ•°</span>self<span class="token punctuation">.</span>backend<span class="token punctuation">.</span>gaussians <span class="token operator">=</span> self<span class="token punctuation">.</span>gaussiansself<span class="token punctuation">.</span>backend<span class="token punctuation">.</span>background <span class="token operator">=</span> self<span class="token punctuation">.</span>backgroundself<span class="token punctuation">.</span>backend<span class="token punctuation">.</span>cameras_extent <span class="token operator">=</span> <span class="token number">6.0</span>self<span class="token punctuation">.</span>backend<span class="token punctuation">.</span>pipeline_params <span class="token operator">=</span> self<span class="token punctuation">.</span>pipeline_paramsself<span class="token punctuation">.</span>backend<span class="token punctuation">.</span>opt_params <span class="token operator">=</span> self<span class="token punctuation">.</span>opt_paramsself<span class="token punctuation">.</span>backend<span class="token punctuation">.</span>frontend_queue <span class="token operator">=</span> frontend_queueself<span class="token punctuation">.</span>backend<span class="token punctuation">.</span>backend_queue <span class="token operator">=</span> backend_queueself<span class="token punctuation">.</span>backend<span class="token punctuation">.</span>live_mode <span class="token operator">=</span> self<span class="token punctuation">.</span>live_modeself<span class="token punctuation">.</span>backend<span class="token punctuation">.</span>set_hyperparams<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>è¿è¡Œ</strong>ï¼š</p><p>åœ¨<code>slam.py</code>çš„<code>__init__()</code>ä¸­è°ƒç”¨ï¼Œåˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹è¿è¡Œmappingã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># åˆ›å»ºä¸€ä¸ªå¤šè¿›ç¨‹å¯¹è±¡ backend_processï¼Œç›®æ ‡å‡½æ•°ä¸º self.backend.run</span>backend_process <span class="token operator">=</span> mp<span class="token punctuation">.</span>Process<span class="token punctuation">(</span>target<span class="token operator">=</span>self<span class="token punctuation">.</span>backend<span class="token punctuation">.</span>run<span class="token punctuation">)</span><span class="token comment"># å¯åŠ¨ backend_process è¿›ç¨‹</span>backend_process<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>è¿è¡Œé€»è¾‘</strong>ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment">#################################</span>    <span class="token comment"># ç›´å¥”ä¸»é¢˜ï¼Œè¿›å…¥Mappingçš„ä¸»è¦æµç¨‹</span>    <span class="token comment">#################################</span>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>        <span class="token comment"># å¦‚æœæ²¡æœ‰æ§åˆ¶ä¿¡æ¯å‘é€è¿‡æ¥</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>backend_queue<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># å¦‚æœæ˜¯pauseã€å½“å‰å…³é”®å¸§çª—å£ä¸ºç©ºã€å•çº¿ç¨‹æ¨¡å¼ï¼Œè¿›è¡Œç­‰å¾…</span>            <span class="token keyword">if</span> self<span class="token punctuation">.</span>pause<span class="token punctuation">:</span>                time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.01</span><span class="token punctuation">)</span>                <span class="token keyword">continue</span>            <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>current_window<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>                time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.01</span><span class="token punctuation">)</span>                <span class="token keyword">continue</span>            <span class="token keyword">if</span> self<span class="token punctuation">.</span>single_thread<span class="token punctuation">:</span>                time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.01</span><span class="token punctuation">)</span>                <span class="token keyword">continue</span>            <span class="token comment"># å¦åˆ™ï¼Œå¤šçº¿ç¨‹&amp;å…³é”®å¸§çª—å£ä¸ä¸ºç©ºï¼Œä¼˜åŒ–å½“å‰å…³é”®å¸§çª—å£ï¼Œè¿­ä»£1æ¬¡</span>            self<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>current_window<span class="token punctuation">)</span>            <span class="token comment"># å¦‚æœè·ç¦»ä¸Šä¸€æ¬¡å‘é€å…³é”®å¸§å·²ç»è¿­ä»£ä¼˜åŒ–äº†10æ¬¡ä»¥ä¸Šï¼Œè¿˜æ˜¯ä¼˜åŒ–å½“å‰å…³é”®å¸§çª—å£ï¼Œå¹¶ä¸”è¿›è¡Œpruneï¼Œè¿­ä»£10æ¬¡</span>            <span class="token comment"># å…¶å®last_sentæ˜¯è®°å½•ä¸Šæ¬¡å’ŒfrontendåŒæ­¥åˆ°ç°åœ¨ï¼Œmappingè¿­ä»£äº†å¤šå°‘è½®ã€‚</span>            <span class="token comment"># ä¸è¿‡åŒæ­¥ä¸€èˆ¬å‘ç”Ÿåœ¨frontendå‘backendå‘é€keyframeã€‚</span>            <span class="token keyword">if</span> self<span class="token punctuation">.</span>last_sent <span class="token operator">&gt;=</span> <span class="token number">10</span><span class="token punctuation">:</span>                self<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>current_window<span class="token punctuation">,</span> prune<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> iters<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>                self<span class="token punctuation">.</span>push_to_frontend<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment"># å¦‚æœæœ‰æ§åˆ¶ä¿¡æ¯å‘è¿‡æ¥</span>            data <span class="token operator">=</span> self<span class="token punctuation">.</span>backend_queue<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"stop"</span><span class="token punctuation">:</span>                <span class="token keyword">break</span>            <span class="token keyword">elif</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"pause"</span><span class="token punctuation">:</span>                self<span class="token punctuation">.</span>pause <span class="token operator">=</span> <span class="token boolean">True</span>            <span class="token keyword">elif</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"unpause"</span><span class="token punctuation">:</span>                self<span class="token punctuation">.</span>pause <span class="token operator">=</span> <span class="token boolean">False</span>            <span class="token keyword">elif</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"color_refinement"</span><span class="token punctuation">:</span> <span class="token comment"># ç»“æŸæ•´ä¸ªSLAMä¹‹å‰è°ƒç”¨ï¼Œåˆ·ä¸€æ³¢æŒ‡æ ‡</span>                self<span class="token punctuation">.</span>color_refinement<span class="token punctuation">(</span><span class="token punctuation">)</span>                self<span class="token punctuation">.</span>push_to_frontend<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">elif</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"init"</span><span class="token punctuation">:</span> <span class="token comment"># frontendåœ¨initçš„æ—¶å€™ä¼šç»™è¿™é‡Œå‘ä¸€ä¸ªinitæŒ‡ä»¤</span>                cur_frame_idx <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>                viewpoint <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>                depth_map <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>                Log<span class="token punctuation">(</span><span class="token string">"Resetting the system"</span><span class="token punctuation">)</span>                self<span class="token punctuation">.</span>reset<span class="token punctuation">(</span><span class="token punctuation">)</span>                self<span class="token punctuation">.</span>viewpoints<span class="token punctuation">[</span>cur_frame_idx<span class="token punctuation">]</span> <span class="token operator">=</span> viewpoint                <span class="token comment"># å¾€åœºæ™¯ä¸­æ·»åŠ new keyframeçš„ç‚¹äº‘</span>                self<span class="token punctuation">.</span>add_next_kf<span class="token punctuation">(</span>                    cur_frame_idx<span class="token punctuation">,</span> viewpoint<span class="token punctuation">,</span> depth_map<span class="token operator">=</span>depth_map<span class="token punctuation">,</span> init<span class="token operator">=</span><span class="token boolean">True</span>                <span class="token punctuation">)</span>                <span class="token comment"># åˆå§‹åŒ–åœ°å›¾</span>                self<span class="token punctuation">.</span>initialize_map<span class="token punctuation">(</span>cur_frame_idx<span class="token punctuation">,</span> viewpoint<span class="token punctuation">)</span>                self<span class="token punctuation">.</span>push_to_frontend<span class="token punctuation">(</span><span class="token string">"init"</span><span class="token punctuation">)</span>            <span class="token keyword">elif</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"keyframe"</span><span class="token punctuation">:</span> <span class="token comment"># å¦‚æœfrontendå¾€è¿™é‡Œå‘é€äº†keyframe</span>                cur_frame_idx <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>                viewpoint <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>                current_window <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>                depth_map <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>                self<span class="token punctuation">.</span>viewpoints<span class="token punctuation">[</span>cur_frame_idx<span class="token punctuation">]</span> <span class="token operator">=</span> viewpoint                self<span class="token punctuation">.</span>current_window <span class="token operator">=</span> current_window                self<span class="token punctuation">.</span>add_next_kf<span class="token punctuation">(</span>cur_frame_idx<span class="token punctuation">,</span> viewpoint<span class="token punctuation">,</span> depth_map<span class="token operator">=</span>depth_map<span class="token punctuation">)</span>                opt_params <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>                frames_to_optimize <span class="token operator">=</span> self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">"Training"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"pose_window"</span><span class="token punctuation">]</span>                iter_per_kf <span class="token operator">=</span> self<span class="token punctuation">.</span>mapping_itr_num <span class="token keyword">if</span> self<span class="token punctuation">.</span>single_thread <span class="token keyword">else</span> <span class="token number">10</span>                <span class="token keyword">if</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>initialized<span class="token punctuation">:</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>                        <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>current_window<span class="token punctuation">)</span>                        <span class="token operator">==</span> self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">"Training"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"window_size"</span><span class="token punctuation">]</span>                    <span class="token punctuation">)</span><span class="token punctuation">:</span>                        frames_to_optimize <span class="token operator">=</span> <span class="token punctuation">(</span>                            self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">"Training"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"window_size"</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span>                        <span class="token punctuation">)</span>                        iter_per_kf <span class="token operator">=</span> <span class="token number">50</span> <span class="token keyword">if</span> self<span class="token punctuation">.</span>live_mode <span class="token keyword">else</span> <span class="token number">300</span>                        Log<span class="token punctuation">(</span><span class="token string">"Performing initial BA for initialization"</span><span class="token punctuation">)</span>                    <span class="token keyword">else</span><span class="token punctuation">:</span>                        iter_per_kf <span class="token operator">=</span> self<span class="token punctuation">.</span>mapping_itr_num                <span class="token keyword">for</span> cam_idx <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>current_window<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    <span class="token keyword">if</span> self<span class="token punctuation">.</span>current_window<span class="token punctuation">[</span>cam_idx<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>                        <span class="token keyword">continue</span>                    viewpoint <span class="token operator">=</span> self<span class="token punctuation">.</span>viewpoints<span class="token punctuation">[</span>current_window<span class="token punctuation">[</span>cam_idx<span class="token punctuation">]</span><span class="token punctuation">]</span>                    <span class="token keyword">if</span> cam_idx <span class="token operator">&lt;</span> frames_to_optimize<span class="token punctuation">:</span>                        opt_params<span class="token punctuation">.</span>append<span class="token punctuation">(</span>                            <span class="token punctuation">{</span>                                <span class="token string">"params"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>viewpoint<span class="token punctuation">.</span>cam_rot_delta<span class="token punctuation">]</span><span class="token punctuation">,</span>                                <span class="token string">"lr"</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">"Training"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"lr"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"cam_rot_delta"</span><span class="token punctuation">]</span>                                <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">,</span>                                <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"rot_{}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>viewpoint<span class="token punctuation">.</span>uid<span class="token punctuation">)</span><span class="token punctuation">,</span>                            <span class="token punctuation">}</span>                        <span class="token punctuation">)</span>                        opt_params<span class="token punctuation">.</span>append<span class="token punctuation">(</span>                            <span class="token punctuation">{</span>                                <span class="token string">"params"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>viewpoint<span class="token punctuation">.</span>cam_trans_delta<span class="token punctuation">]</span><span class="token punctuation">,</span>                                <span class="token string">"lr"</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">"Training"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"lr"</span><span class="token punctuation">]</span><span class="token punctuation">[</span>                                    <span class="token string">"cam_trans_delta"</span>                                <span class="token punctuation">]</span>                                <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">,</span>                                <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"trans_{}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>viewpoint<span class="token punctuation">.</span>uid<span class="token punctuation">)</span><span class="token punctuation">,</span>                            <span class="token punctuation">}</span>                        <span class="token punctuation">)</span>                    opt_params<span class="token punctuation">.</span>append<span class="token punctuation">(</span>                        <span class="token punctuation">{</span>                            <span class="token string">"params"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>viewpoint<span class="token punctuation">.</span>exposure_a<span class="token punctuation">]</span><span class="token punctuation">,</span>                            <span class="token string">"lr"</span><span class="token punctuation">:</span> <span class="token number">0.01</span><span class="token punctuation">,</span>                            <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"exposure_a_{}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>viewpoint<span class="token punctuation">.</span>uid<span class="token punctuation">)</span><span class="token punctuation">,</span>                        <span class="token punctuation">}</span>                    <span class="token punctuation">)</span>                    opt_params<span class="token punctuation">.</span>append<span class="token punctuation">(</span>                        <span class="token punctuation">{</span>                            <span class="token string">"params"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>viewpoint<span class="token punctuation">.</span>exposure_b<span class="token punctuation">]</span><span class="token punctuation">,</span>                            <span class="token string">"lr"</span><span class="token punctuation">:</span> <span class="token number">0.01</span><span class="token punctuation">,</span>                            <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"exposure_b_{}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>viewpoint<span class="token punctuation">.</span>uid<span class="token punctuation">)</span><span class="token punctuation">,</span>                        <span class="token punctuation">}</span>                    <span class="token punctuation">)</span>                self<span class="token punctuation">.</span>keyframe_optimizers <span class="token operator">=</span> torch<span class="token punctuation">.</span>optim<span class="token punctuation">.</span>Adam<span class="token punctuation">(</span>opt_params<span class="token punctuation">)</span>                <span class="token comment"># è¿™é‡Œä¸ºä»€ä¹ˆè¦mapä¸¤æ¬¡å‘¢ï¼Ÿçœ‹èµ·æ¥åƒæ˜¯è¿­ä»£ä¸€å®šæ¬¡æ•°ååšä¸€æ¬¡pruneï¼Œä¸ºäº†ä»£ç æ–¹ä¾¿å°±åˆ†ä¸¤æ¬¡å†™äº†ï¼Ÿ</span>                self<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>current_window<span class="token punctuation">,</span> iters<span class="token operator">=</span>iter_per_kf<span class="token punctuation">)</span>                self<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>current_window<span class="token punctuation">,</span> prune<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>                self<span class="token punctuation">.</span>push_to_frontend<span class="token punctuation">(</span><span class="token string">"keyframe"</span><span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string">"Unprocessed data"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>    <span class="token comment">#################################</span>    <span class="token comment"># æ¸…ç†ç”¨äºé€šä¿¡çš„ä¸¤ä¸ªé˜Ÿåˆ—ä¸­çš„ä¿¡æ¯</span>    <span class="token keyword">while</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>backend_queue<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>backend_queue<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">while</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>frontend_queue<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>frontend_queue<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 3D Gaussian Splatting </tag>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NeRF &amp; 3DGS in SLAM &amp; Robotics</title>
      <link href="2024/11/26/nerf-3dgs-in-slam-robotics/"/>
      <url>2024/11/26/nerf-3dgs-in-slam-robotics/</url>
      
        <content type="html"><![CDATA[<h1 id="NeRF-amp-3DGS-in-SLAM-amp-Robotics"><a href="#NeRF-amp-3DGS-in-SLAM-amp-Robotics" class="headerlink" title="NeRF &amp; 3DGS in SLAM &amp; Robotics"></a>NeRF &amp; 3DGS in SLAM &amp; Robotics</h1><h2 id="How-NeRFs-and-3DGS-are-Reshaping-SLAM"><a href="#How-NeRFs-and-3DGS-are-Reshaping-SLAM" class="headerlink" title="How NeRFs and 3DGS are Reshaping SLAM"></a>How NeRFs and 3DGS are Reshaping SLAM</h2><p><img src="/images/nerf-3dgs-in-slam-robotics/image-20241126212310183.png"></p><p><strong>å…³äº ideal SLAM criteria</strong>ï¼šAs we outline the ideal SLAM criteria, several key aspects emerge. These include global consistency, robust camera tracking, accurate surface modeling, real-time performance, accurate prediction in unobserved regions, scalability to large scenes, and robustness to noisy data. å³ï¼Œå…¨å±€ä¸€è‡´æ€§ã€ç¨³å¥çš„ç›¸æœºè·Ÿè¸ªã€ç²¾ç¡®çš„è¡¨é¢å»ºæ¨¡ã€å®æ—¶æ€§èƒ½ã€æœªè§‚å¯ŸåŒºåŸŸçš„å‡†ç¡®é¢„æµ‹ã€å¤§å‹åœºæ™¯çš„å¯æ‰©å±•æ€§ä»¥åŠå¯¹å™ªå£°æ•°æ®çš„é²æ£’æ€§ã€‚</p><p><strong>NeRFã€3DGSä¸ä¼ ç»Ÿæ–¹æ³•ç›¸æ¯”å…·å¤‡çš„ä¼˜ç‚¹</strong>ï¼šincluding continuous surface modeling, reduced memory requirements, improved noise/outlier handling, and enhanced hole filling and scene inpainting capabilities for occluded or sparse observations. In addition, they have the potential to produce denser and more compact maps that can be reconstructed as 3D meshes at arbitrary resolutions. However, it is important to note that at this early stage, the strengths of each technique coexist with specific challenges and limitations. å³ï¼Œè¿ç»­è¡¨é¢å»ºæ¨¡ï¼Œå‡å°‘å†…å­˜éœ€æ±‚ï¼Œæ”¹è¿›å™ªå£°/å¼‚å¸¸å€¼å¤„ç†ï¼Œå¢å¼ºå­”å¡«å……å’Œåœºæ™¯ç»˜åˆ¶èƒ½åŠ›ï¼Œç”¨äºé®æŒ¡æˆ–ç¨€ç–è§‚æµ‹ã€‚æ­¤å¤–ï¼Œå®ƒä»¬æœ‰å¯èƒ½äº§ç”Ÿæ›´å¯†é›†ã€æ›´ç´§å‡‘çš„åœ°å›¾ï¼Œå¯ä»¥ä»¥ä»»æ„åˆ†è¾¨ç‡é‡å»ºä¸º3Dç½‘æ ¼ã€‚</p><blockquote><p>ä¸ªäººè®¤ä¸ºï¼Œä¸èƒ½ä»…ä»…å±€é™åœ¨SLAMè¿™ä¸ªè¯é¢˜ä¸Šï¼ŒSLAMä¸»è¦æ˜¯é¢å‘Roboticsçš„ã€‚</p><p>åœ¨Roboticsä¸­ï¼Œå¦‚æœæœ‰äº†NeRFã€3DGSè¡¨ç¤ºçš„åœ°å›¾ï¼Œå¯ä»¥è¿›è¡Œæ›´å¤šçš„æ‹“å±•ã€‚</p></blockquote><p><strong>æ–°ä¸€ä»£çš„SLAMæœ€ä¸»è¦çš„é—®é¢˜</strong>ï¼šThis analysis highlights how, despite the great promise brought by this new generation of SLAM systems, most of them are still unsatisfactory in terms of hardware and runtime requirements, making them not yet ready for realtime applications. å³ï¼Œå¤§å¤šæ•°æ–¹æ³•åœ¨ç¡¬ä»¶å’Œè¿è¡Œæ—¶éœ€æ±‚æ–¹é¢ä»ç„¶ä»¤äººä¸æ»¡æ„ï¼Œè¿™ä½¿å¾—å®ƒä»¬å°šæœªä¸ºå®æ—¶åº”ç”¨ç¨‹åºåšå¥½å‡†å¤‡ã€‚</p><img src="/images/nerf-3dgs-in-slam-robotics/image-20241122200927453.png" style="zoom: 67%;"><p><strong>3DGSçš„é—®é¢˜</strong>ï¼šHowever, these methods have several limitations, including a heavy reliance on initialization and a lack of control over primitive growth in unobserved regions. Furthermore, the original 3DGS-based scene representation requires a large number of 3D Gaussian primitives to achieve high-fidelity reconstruction, resulting in substantial memory consumption. </p><blockquote><p>è¿™ä¸ªé—®é¢˜æˆ‘ä¹Ÿè§‚å¯Ÿåˆ°äº†ï¼Œåˆå§‹åŒ–å¾ˆå¤§ç¨‹åº¦å†³å®šäº†è®­ç»ƒçš„ä¸Šé™ï¼Œè§‚å¯ŸåŒºåŸŸè¾¹ç¼˜çš„3DGSä¼šä¸€ç›´è†¨èƒ€ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸ä¸å¥½çš„ç°è±¡ã€‚</p></blockquote><p><strong>NeRF vs. 3DGS in SLAM</strong>ï¼šNeRF-style SLAM, which relies mostly on MLP(s), is well suited for novel view synthesis, mapping and tracking but faces challenges such as oversmoothing, susceptibility to catastrophic forgetting, and computational inefficiency due to its reliance on perpixel ray marching. 3DGS bypasses per-pixel ray marching and exploits sparsity through differentiable rasterization over primitives. This benefits SLAM with an explicit volumetric representation, fast rendering, rich optimization, direct gradient flow, increased map capacity, and explicit spatial extent control. Thus, while NeRF shows a remarkable ability to synthesize novel views, its slow training speed and difficulty in adapting to SLAM are significant drawbacks. 3DGS, with its efficient rendering, explicit representation, and rich optimization capabilities, emerges as a powerful alternative. Despite its advantages, current 3DGS-style SLAM approaches have limitations. These include scalability issues for large scenes, the lack of a direct mesh extraction algorithm (although recent methods such as [192] have been proposed), the inability to accurately encode precise geometry and, among others, the potential for uncontrollable Gaussian growth into unobserved areas, causing artifacts in rendered views and the underlying 3D structure. Moreover, the computational complexity of 3DGS-based SLAM systems is significantly higher than NeRF-based methods, which can hinder real-time performance and practical deployment, especially on resource-constrained devices. In order to mitigate these issues, recent research efforts, such as CompactGSSLAM [114], have focused on developing compact 3D Gaussian scene representations that optimize storage efficiency while maintaining high-quality reconstruction, rapid training convergence, and real-time rendering capabilities.</p><blockquote><p>æ€»ç»“å°±æ˜¯ï¼š</p><ul><li><p>NeRF SLAMåœ¨æ–°è§†è§’åˆæˆã€è·Ÿè¸ªã€å»ºå›¾ä¸Šæœ‰ä¼˜åŠ¿ï¼›ä½†æ˜¯å­˜åœ¨è¿‡åº¦å¹³æ»‘ã€å®¹æ˜“é—å¿˜å’Œè®¡ç®—æ•ˆç‡è¿‡ä½çš„é—®é¢˜ï¼›</p><p>è¿™å¯¼è‡´NeRFçš„æ–¹æ³•ç›¸å¯¹äº3DGSæ¥è¯´ï¼Œå…¶å®ä¸æ˜¯å¾ˆé€‚åˆSLAMã€‚</p></li><li><p>3DGS SLAMæœ‰æ˜¾ç¤ºè¡¨ç¤ºï¼Œæ¸²æŸ“å’Œä¼˜åŒ–æ›´å¿«ï¼Œæœ‰ç›´æ¥çš„æ¢¯åº¦æµåŠ¨ï¼Œæ›´é«˜çš„åœ°å›¾å®¹é‡ï¼Œå¯ä»¥æ˜¾ç¤ºæ§åˆ¶åœ°å›¾èŒƒå›´ï¼›ä½†æ˜¯3DGSç›®å‰æ‰©å±•æ€§å·®ã€å¤§åœºæ™¯ä¸‹è¡¨ç°ä¸å¥½ã€ç¼ºä¹ç›´æ¥çš„meshæå–ç®—æ³•ã€å‡ ä½•ç²¾åº¦æ¯”è¾ƒå·®ã€æœªè§‚æµ‹åŒºåŸŸçš„é«˜æ–¯å¢é•¿å¯èƒ½å¯¼è‡´ä¼ªå½±ã€è®¡ç®—å¤æ‚åº¦é«˜ã€‚</p><p>ä¸è¿‡3DGSä¸»è¦å‡­å€Ÿé«˜æ•ˆçš„æ¸²æŸ“å’Œæ˜¾ç¤ºçš„è¡¨ç¤ºï¼Œåœ¨SLAMä¸­æ›´åŠ æœ‰ä¼˜åŠ¿ã€‚</p></li></ul></blockquote><h2 id="SLAM-Meets-NeRF"><a href="#SLAM-Meets-NeRF" class="headerlink" title="SLAM Meets NeRF"></a>SLAM Meets NeRF</h2><p><strong>åœ¨NeRF SLAMä¸­ï¼Œç”¨SDFå–ä»£volume densityçš„ä¼˜åŠ¿</strong>ï¼š</p><ul><li>SDF values and volume densities decoded by MLP networks cannot be mutated without losing texture features. However, since zero iso-surface decision boundaries are abrupt, the use of SDF values can enable the extraction of surfaces containing texture features.</li><li>A loss function based on SDF values constrains the on-surface points and off-surface points, so SDF values can provide more geometric information.</li><li>The loss function of an SDF sets the SDF value away from the surface of the object as a cut-off value. Combined with the voxel skipping strategy, unnecessary calculations can be avoided, while the volume density is affected by floating objects in the air, which requires more sampling points and more calculations. Combined with the voxel skipping strategy, unnecessary calculations can be avoided. And because the volume density is affected by floating objects in the air, the calculation cost is large.</li><li>An SDF value can visually describe the distance between a sampling point and an objectâ€™s surface, which is conducive to the realization of AR and VR.</li></ul><p>ä¸è¿‡è¿™æ ·ä¹Ÿä¼šå¯¼è‡´æ–°çš„é—®é¢˜ï¼šSDFä»£æ›¿volume densityä¼šå¯¼è‡´å­”æ´å¡«è¡¥çš„èƒ½åŠ›å‡å¼±ã€‚</p><h2 id="Neural-Fields-in-Robotics"><a href="#Neural-Fields-in-Robotics" class="headerlink" title="Neural Fields in Robotics"></a>Neural Fields in Robotics</h2><blockquote><p>è¿™ç¯‡ç»¼è¿°ä¸»è¦å…³æ³¨ï¼špose estimation, manipulation, navigation, physics, and autonomous driving</p></blockquote><p><img src="/images/nerf-3dgs-in-slam-robotics/image-20241126212040417.png"></p><p><strong>Typical robotic pipeline</strong>ï¼šAt the core of a typical robotic pipeline is <strong>the synergy between perception and action.</strong> The perception system gathers sensory data from devices such as RGB cameras, LiDAR, and depth sensors and transforms them into a coherent model of the environment â€” such as a 3D map that enables the robot to maneuver through dynamic, obstacle-rich spaces. The quality of this representation directly impacts the robotâ€™s decision-making or policy, which translates the perceived environment into actions, enabling it to avoid moving forklifts, pick up scattered objects, or plan a safe path in an emergency.</p><p><strong>Typical robotic pipelineä¸­å¯¹ç¯å¢ƒå»ºæ¨¡çš„æ–¹æ³•å­˜åœ¨çš„é—®é¢˜</strong>ï¼šTraditionally, robots have modeled their environments using data structures like point clouds, voxel grids, meshes, and Truncated Signed Distance Functions (TSDF). While these representations have advanced robotic capabilities, they struggle to capture fine geometric details, particularly in complex or dynamic environments, leading to suboptimal performance in adaptable scenarios. å³ï¼Œè¿™äº›æ–¹æ³•éš¾ä»¥æ•æ‰ç²¾ç»†çš„å‡ ä½•ç»†èŠ‚ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤æ‚æˆ–åŠ¨æ€ç¯å¢ƒä¸­ï¼Œå¯¼è‡´åœ¨é€‚åº”åœºæ™¯ä¸­æ€§èƒ½ä¸ä½³ã€‚</p><p><strong>ä¸ä¼ ç»Ÿåœ°å›¾è¡¨ç¤ºæ–¹æ³•ç›¸æ¯”ï¼ŒNeRFåœ¨Roboticsä¸­çš„ä¼˜åŠ¿</strong>ï¼š</p><ul><li><p><strong>High-Quality 3D Reconstructions</strong>: NFs generate detailed 3D representations of environments, which are crucial for tasks like <strong>navigation, manipulation, and scene understanding</strong> [24â€“28].</p><blockquote><p>å¯¹æœºå™¨äººçš„å¯¼èˆªã€æ“ä½œã€åœºæ™¯ç†è§£å¾ˆæœ‰å¸®åŠ©ã€‚</p></blockquote></li><li><p><strong>Multi-Sensor Integration</strong>: NFs can seamlessly integrate data from multiple sensors, such as LiDAR and RGB cameras, providing a more robust and adaptable perception of the environment [29, 30].</p><blockquote><p>åœ¨3DGSä¸­ï¼Œè¿™ä¸ªä¼˜åŠ¿æ›´åŠ æ˜æ˜¾äº†ï¼ŒLidarå’ŒCameraæ›´å®¹æ˜“ç»“åˆèµ·æ¥äº†ã€‚</p><p><strong>æ³¨</strong>ï¼šè¿™ä¸ªç‚¹è¿˜ä¸ç¡®å®šï¼Œå¯èƒ½å¾—çœ‹çœ‹LVI-SAMã€R2liveã€R3liveç­‰åŸºäºä¼ ç»Ÿæ–¹æ³•çš„å·¥ä½œã€‚</p></blockquote></li><li><p><strong>Continuous and Compact Representations</strong>: Unlike voxel grids or point clouds, which are inherently discrete, NFs offer continuous representations that capture fine spatial details using fewer parameters, enhancing computational efficiency [22, 31].</p><blockquote><p>æ›´å°‘çš„å‚æ•°ï¼Œæ›´ç²¾ç»†çš„ç©ºé—´ç»†èŠ‚</p></blockquote></li><li><p><strong>Generalization and Adaptation</strong>: Once trained, NFs can generate novel viewpoints of a scene, even from previously unseen perspectives, which is particularly valuable for exploration or manipulation tasks. This ability is enabled by generalizable NeRF methods [32â€“34].</p><blockquote><p>æ–°è§†è§’ç”Ÿæˆå¯¹æ¢ç´¢ã€æ“ä½œç­‰ä»»åŠ¡ç‰¹åˆ«æœ‰ä»·å€¼</p></blockquote></li><li><p><strong>Integration with Foundation Models</strong>: NFs can be combined with foundation models like CLIP [35] or DINO [36], enabling robots to interpret and respond to natural language queries or other semantic inputs [37, 38].</p><blockquote><p>å¯ä»¥å’Œfoundation modelè¿›è¡Œç»“åˆ</p></blockquote></li></ul><p><img src="/images/nerf-3dgs-in-slam-robotics/image-20241126212027493.png"></p><p><img src="/images/nerf-3dgs-in-slam-robotics/image-20241126212150042.png"></p><h3 id="Neural-Fields-for-Pose-Estimation"><a href="#Neural-Fields-for-Pose-Estimation" class="headerlink" title="Neural Fields for Pose Estimation"></a>Neural Fields for Pose Estimation</h3><p><strong>Camera Pose Estimation</strong>ï¼šå¯¹å®šä½ã€å»ºå›¾ç­‰ä»»åŠ¡å¾ˆé‡è¦ã€‚</p><p>ç•¥ï¼Œè¿™éƒ¨åˆ†å¤ªç†Ÿæ‚‰äº†ã€‚ã€‚ã€‚</p><p><strong>Object Pose Estimation</strong>ï¼šå¯¹æ“ä½œã€äº¤äº’ç­‰ä»»åŠ¡å¾ˆé‡è¦ã€‚</p><p>è®ºæ–‡æè¿°çš„å·¥ä½œåŸºæœ¬ä¸Šæ˜¯å›´ç»•å¦‚ä½•ä¼°è®¡åœºæ™¯ä¸­ç‰©ä½“çš„3D bounding boxï¼Œä¹Ÿæåˆ°äº†ä¸€äº›åŒæ—¶ä¼°è®¡ç‰©ä½“å§¿æ€å’Œå¯¹ç‰©ä½“è¿›è¡Œé‡å»ºçš„ã€‚</p><p><strong>Takeaways and Open Challenges in Neural Fields for Pose Estimation</strong>ï¼š</p><ul><li>åœ¨é™æ€åœºæ™¯ä¸­æœ‰äº†é‡å¤§è¿›å±•ï¼Œä½†æ˜¯é¢å¯¹åŠ¨æ€åœºæ™¯ï¼Œè¿˜æœ‰å¾ˆå¤šå€¼å¾—æ¢ç´¢çš„ç©ºé—´ï¼›</li><li>open-vocabulary 6D object pose estimationã€‚</li></ul><h3 id="Neural-Fields-for-Robotic-Manipulation"><a href="#Neural-Fields-for-Robotic-Manipulation" class="headerlink" title="Neural Fields for Robotic Manipulation"></a>Neural Fields for Robotic Manipulation</h3><p><strong>Manipulationçš„å…³é”®é—®é¢˜</strong>ï¼šOne of the key challenges in robotic manipulation is obtaining a precise geometric representation of both the objects and the environment involved in the task. An effective representation must also capture the environment dynamics, offering a robust 3D understanding of the objects. å³ï¼Œè·å¾—ä»»åŠ¡ä¸­æ¶‰åŠçš„ç‰©ä½“å’Œç¯å¢ƒçš„ç²¾ç¡®å‡ ä½•è¡¨ç¤ºï¼Œå¹¶ä¸”æœ€å¥½æ˜¯æ•æ‰ç¯å¢ƒçš„åŠ¨æ€å˜åŒ–ï¼Œæä¾›å¯¹objectçš„é²æ£’3Dç†è§£ã€‚</p><p>æœºæ¢°è‡‚ã€çµå·§æ‰‹å¦‚æœæƒ³è¦æ“çºµç‰©ä½“ã€æ§åˆ¶ç‰©ä½“çš„è¯ï¼Œéœ€è¦ç”Ÿæˆâ€œæŠ“ç‚¹â€ï¼Œgraspsã€‚æœ‰ä¸€äº›æ–¹æ³•å·²ç»å¯ä»¥åˆæˆ3-DoFçš„graspsäº†ï¼Œä½†æ˜¯ç¼ºä¹ç²¾ç¡®çš„æ–¹å‘æ§åˆ¶ã€‚è€Œ6-DoFçš„æ–¹æ³•å¯ä»¥å®Œå…¨æ§åˆ¶RPYï¼Œæ“çºµèƒ½åŠ›æ›´å¼ºã€‚</p><p>ç»¼è¿°æåˆ°äº†å¾ˆå¤šè®ºæ–‡é’ˆå¯¹â€œé€æ˜â€æˆ–è€…â€œé•œé¢â€ç‰©ä½“å±•å¼€äº†å·¥ä½œï¼Œçœ‹èµ·æ¥NeRFã€3DGSå¯èƒ½åœ¨è¿™æ–¹é¢åšå¾—æ¯”è¾ƒå¥½ã€‚</p><p>å¦å¤–ï¼Œç»¼è¿°æåˆ°äº†GaussianGrasperï¼Œè¿™ä¸ªå·¥ä½œæå‡ºäº†6-DoFçš„æŠ“å–æ–¹æ³•ï¼Œæ”¯æŒå¯¹open-vocabulary objectè¿›è¡ŒæŠ“å–ï¼Œè¿™èƒ½å¤Ÿè®©æœºå™¨äººç†è§£å’Œæ‰§è¡ŒåŸºäºè‡ªç„¶è¯­è¨€æŒ‡ä»¤çš„ä»»åŠ¡ã€‚</p><p>ä¹Ÿæœ‰ä¸€äº›å·¥ä½œæ¯”å¦‚SplatSimï¼Œç”¨äºå®ç°Sim2Realä¼ è¾“ï¼Œå‡å°‘åˆæˆæ•°æ®å’ŒçœŸå®æ•°æ®ä¹‹é—´çš„åç§»ã€‚</p><blockquote><p>è¿™ä¸ªåœ¨çŸ¥ä¹ä¸Šä¹Ÿæœ‰äººè®¨è®ºï¼Œä¸è¿‡å•çœ‹æŒ‡æ ‡è¿˜æ˜¯å­˜åœ¨è¾ƒå¤§çš„åç§»ï¼Œåªä¸è¿‡è‚‰çœ¼çœ‹è¿™æ„Ÿè§‰è¦å¥½å¾ˆå¤šäº†ã€‚ã€‚ã€‚</p></blockquote><p><strong>Takeaways and Open Challenges in Neural Fields for Manipulation</strong>:</p><ul><li><p>NFs have emerged as powerful techniques for robust 3D understanding in robotic manipulation tasks, such as grasping and pick-and-place. These representations capture detailed geometrical information and support generalization across diverse object shapes and categories. NFs have also been employed to identify optimal grasp points, improving the success rate of robotic grasps in cluttered environments. Additionally, some methods integrate these representations with language models, enabling open-vocabulary manipulation through natural language instructions.</p><p>å³ï¼Œä¸ºæœºå™¨äººæ“çºµæŠ“å–ç­‰ä»»åŠ¡æä¾›äº†å¼ºå¤§çš„3Dç†è§£èƒ½åŠ›ã€‚è¿™äº›è¡¨ç¤ºæ–¹æ³•æ•è·äº†è¯¦ç»†çš„å‡ ä½•ä¿¡æ¯ï¼Œå¹¶ä¸”æ”¯æŒè·¨ä¸åŒå¯¹è±¡å½¢çŠ¶å’Œç±»åˆ«çš„æ³›åŒ–ã€‚å¦å¤–ä¹Ÿå¯ä»¥ç”¨äºè¯†åˆ«æœ€ä½³æŠ“å–ç‚¹ï¼Œæé«˜äº†æœºå™¨äººåœ¨æ‚ä¹±ç¯å¢ƒä¸­æŠ“å–çš„æˆåŠŸç‡ã€‚ä¹Ÿå¯ä»¥å’Œä¸€äº›è¯­è¨€æ¨¡å‹é›†æˆåœ¨ä¸€èµ·ï¼Œé€šè¿‡è‡ªç„¶è¯­è¨€æŒ‡ä»¤å®ç°å¼€æ”¾è¯æ±‡æ“ä½œã€‚</p></li><li><p>Despite these advancements, significant challenges remain. Current approaches rely on extensive multi-view inputs or costly per-scene optimization, limiting their applicability in complex, dynamic, or unstructured environments. Furthermore, incorporating physical intuitions about object affordances and robot dynamics into the learned representations could lead to more physically grounded manipulation policies (see Sec. III-D). Finally, scaling these methods to dynamic scenes with multiple agents or articulated objects is an ongoing challenge that must be addressed for real-world deployment.</p><p>å³ï¼Œå½“å‰çš„æ–¹æ³•ä¾èµ–äºè¶³å¤Ÿçš„å¤šè§†å›¾è¾“å…¥å’Œé€åœºæ™¯çš„ä¼˜åŒ–ï¼Œé™åˆ¶äº†è¿™ç§æ–¹æ³•åœ¨å¤æ‚ã€åŠ¨æ€æˆ–è€…éç»“æ„åŒ–ç¯å¢ƒä¸­çš„é€‚ç”¨æ€§ã€‚</p></li></ul><h3 id="Neural-Fields-for-Navigation"><a href="#Neural-Fields-for-Navigation" class="headerlink" title="Neural Fields for Navigation"></a>Neural Fields for Navigation</h3><p>è¿™ç¯‡ç»¼è¿°å°†Navigationåˆ†ä¸ºå››ä¸ªéƒ¨åˆ†ï¼šPlanning, Exploration, Visual Localization, and Feature Fieldsã€‚</p><p><strong>Takeaways and Open Challenges in Neural Fields for Navigation</strong>:</p><ul><li><p>While Neural Fields have made significant strides in navigation, key challenges still remain. Current methods focus mainly on static environments and tasks like image-goal and vision-language navigation. Future work could extend NFs to dynamic settings, incorporating fast reconstruction techniques for real-time updates in evolving environments [186]. Another crucial direction is dynamic scene pose estimation (Sec. III-A3) to aid reconstruction and navigation in dynamic environments.</p><p>å³ï¼Œå½“å‰çš„æ–¹æ³•ä¾§é‡äºé™æ€ç¯å¢ƒå’Œå›¾åƒç›®æ ‡å’Œè§†è§‰è¯­è¨€å¯¼èˆªç­‰ä»»åŠ¡ï¼Œæœªæ¥å¯ä»¥è€ƒè™‘æ‰©å±•åˆ°åŠ¨æ€åœºæ™¯ã€‚</p></li><li><p>The integration of generative NFs also holds great potential. Recent diffusion model advances [39, 187] could facilitate efficient scene editing and environment creation, narrowing the sim-to-real gap. Additionally, leveraging foundation models for large-scale mobile manipulation and scene generalization could unlock further advancements. Integrating Vision-Language Models (VLMs) with implicit representations for enhanced commonsense reasoning within NFs offers another promising frontier for future exploration.</p><p>å³ï¼Œå°†VLMå’Œéšå¼è¡¨ç¤ºç›¸ç»“åˆã€‚</p></li></ul><h3 id="Neural-Fields-for-Physics"><a href="#Neural-Fields-for-Physics" class="headerlink" title="Neural Fields for Physics"></a>Neural Fields for Physics</h3><p>ç•¥ï¼Œä¸å¤ªçœ‹å¾—æ‡‚ã€‚æ”¾è¿‡è‡ªå·±ã€‚</p><h3 id="Neural-Fields-in-Autonomous-Driving"><a href="#Neural-Fields-in-Autonomous-Driving" class="headerlink" title="Neural Fields in Autonomous Driving"></a>Neural Fields in Autonomous Driving</h3><p>ç»¼è¿°å¼€å¤´è¿™ä¸€æ®µçš„è§‚ç‚¹å’ŒçŸ¥ä¹ä¸Šä¸€äº›è®¨è®ºå¾ˆç›¸è¿‘ï¼šHigh-quality mapping of large-scale environments is essential for autonomous driving systems. A high-fidelity map of the entire operating domain serves as a powerful prior for various tasks, including robot localization (see Sec. III-A), navigation, and collision avoidance (see Sec. III-C). Additionally, largescale scene reconstructions facilitate closed-loop robotic simulations. Autonomous driving systems are often evaluated by re-simulating previously encountered scenarios; however, any deviation from the original encounter can alter the vehicleâ€™s trajectory, necessitating high-fidelity novel view renderings along the adjusted path. In addition to basic view synthesis, scene-conditioned NeRFs can modify environmental lighting conditions, such as camera exposure, weather, or time of day, further enhancing simulation scenarios.</p><p>Neural Fields have become a prominent framework in autonomous driving due to their ability to generate photorealistic 3D environments from RGB images. These environments are highly valuable for constructing immersive simulation systems with several key features, as previously discussed: First, NFs offer extensive manipulability and compositionality (Sec. III-E1), allowing for the seamless integration and manipulation of objects within a scene. This facilitates the simulation of complex scenarios, such as collisions, which are difficult to replicate in physical settings. Second, they produce scenes with impressive photorealism (Sec. III-E2), enabling realistic simulations from visual data. Finally, their strong generalizability (Sec. III-E3) from sparse inputs allows for creating accurate, scalable environments, enhancing research in embodied AI. These traits, as discussed in the following subsections, enable the creation of simulated environments that faithfully represent real-world scenarios, thereby facilitating research in embodied AI.</p><blockquote><p>ä¸»è¦è¯´çš„æ˜¯ï¼Œæœ‰åŠ©äºé—­ç¯æ¨¡æ‹Ÿï¼Œè€Œä¸”NeRFã€3DGSå¯ä»¥è¿›è¡Œåœºæ™¯ç¼–è¾‘ç”šè‡³ä¿®æ”¹ç…§æ˜æ¡ä»¶ã€‚</p><p>NeRFã€3DGSåœ¨è‡ªåŠ¨é©¾é©¶ä¸­å…³æ³¨åº¦ç¡®å®éå¸¸é«˜çš„ã€‚</p></blockquote><p><strong>Takeaways and Open Challenges in Neural Fields for Autonomous Driving</strong>:</p><ul><li>Despite the promising progress in NFs for autonomous driving, several open challenges remain. Current methods focus on photorealistic simulators, which are dynamic, compositional, and realistic. One avenue of future work is training policies in such NF-based simulators and transferring them to the real-world. Connecting the success of NFs in autonomous driving with real-world deployment is an exciting avenue for future work. Generalizable reconstruction has seen some early signs of life with recent works but still remains largely underexplored. Future works could look at the efficiency of generalizable outdoor scene reconstruction methods, as well as advances that focus on sim2real transfer and pose-free reconstruction. This avenue of research is exciting as it opens the door for creating photorealistic simulators from a few images in the real world.</li><li>Another promising direction for autonomous driving research is integrating generative methods like diffusion models with the NFsâ€™ paradigm. Future work could look at creating new scenarios via NF editing that are difficult to create in the real world, such as collision avoidance to train policies via reward models in NFsâ€™ simulation. Generative asset creation through a few images from the real world is another potential avenue for NFâ€™s research for autonomous driving.</li><li>Furthermore, the integration of NFs into generative models such as shown in Lift3D [220] and Adv3D [221] facilitates data augmentation, addressing the challenges posed by the diversity of driving scenes. Given the high costs associated with capturing all potential scenarios, data augmentation emerges as a valuable strategy and promising future direction for expanding training datasets and improving model performance.</li></ul><h3 id="OPEN-CHALLENGES-OF-NEURAL-FIELDS-IN-ROBOTICS"><a href="#OPEN-CHALLENGES-OF-NEURAL-FIELDS-IN-ROBOTICS" class="headerlink" title="OPEN CHALLENGES OF NEURAL FIELDS IN ROBOTICS"></a>OPEN CHALLENGES OF NEURAL FIELDS IN ROBOTICS</h3><ul><li><strong>Efficiency</strong>: NFs are computationally intensive and may not naturally operate in real-time, which is often a critical requirement for robotics applications. There is a need for significant optimization or simplification to make these models run efficiently on robotics hardware, which may have limited computational resources compared to dedicated GPUs used in data centers.</li><li><strong>Dynamic environments</strong>: Robotics often involve operating in dynamic environments where objects and scene configurations change over time. Capturing and updating NFs to reflect these changes in real-time remains a challenging task.</li><li><strong>Sensor integration</strong>: Effectively integrating data from various sensors (e.g., LiDAR, RGB cameras, depth sensors) to enhance the robustness and performance of NFs is relatively under-explored. Advanced sensor fusion techniques could potentially bridge this gap.</li><li><strong>Generalization</strong>: Existing techniques often require dense input data and struggle with sensor noise or occlusions. Developing methods that can leverage priors learned from web-scale datasets to generalize across varied scenarios offers a promising direction.</li><li><strong>Physical information</strong>: While NFs excel at representing visual aspects, they do not inherently understand physical properties like weight or friction. Extending NFs to incorporate physics simulations could enable more realistic interactions for robots.</li><li><strong>Data efficiency and augmentation</strong>: Current approaches are data-hungry, which is impractical for real-world applications. Innovations in data-efficient learning techniques and realistic data augmentation could help in overcoming these limitations.</li><li><strong>Multi-modal, multi-task, and efficient scene understanding</strong>: Developing neural field approaches that can handle multiple tasks and modalities simultaneously while maintaining efficiency in scene understanding is crucial for holistic robotic perception.</li><li><strong>Performance evaluation</strong>: Establishing standardized metrics and benchmarks for evaluating the performance of NFs in robotic applications will be essential for tracking progress and comparing different approaches.</li><li><strong>Collaborative frameworks</strong>: There is a need for frameworks that support collaboration between robots using NFs, enabling them to share learnings and improve collective understanding and decision-making in complex environments.</li></ul><h2 id="NeRF-in-Robotics"><a href="#NeRF-in-Robotics" class="headerlink" title="NeRF in Robotics"></a>NeRF in Robotics</h2><p><img src="/images/nerf-3dgs-in-slam-robotics/image-20241126153553406.png"></p><p>è¿™ç¯‡æ–‡ç« åŸºæœ¬ä¸Šæ˜¯å¯¹å„ç§å·¥ä½œçš„æ€»ç»“ã€‚</p><h2 id="3D-Gaussian-Splatting-in-Robotics-A-Survey"><a href="#3D-Gaussian-Splatting-in-Robotics-A-Survey" class="headerlink" title="3D Gaussian Splatting in Robotics: A Survey"></a>3D Gaussian Splatting in Robotics: A Survey</h2><p><img src="/images/nerf-3dgs-in-slam-robotics/image-20241126163019699.png"></p><p>è¿™ç¯‡æ–‡ç« å’Œä¸Šä¸€ç¯‡æ–‡ç« ç»“æ„å‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼Œä¸è¿‡åšäº†ä¸€äº›è®¨è®ºã€‚</p><p><strong>å…³äºRobust Tracking</strong>ï¼šExisting 3DGS-based SLAM methods, although demonstrating high accuracy in dense mapping, typically fail to achieve accurate and robust tracking, especially in complex real-world scenarios. This limitation in current 3DGS-based SLAM systems is due to their reliance on directly using RGB information of image for pose optimization. Such reliance heavily depends on the quality and texture information of the images. However, in real-world robotic applications, image quality is prone to camera motion blur, degrading the performance of 3DGS-based SLAM. Moreover, there are some scenes with limited texture information, such as sky or walls, leading to insufficient constraints for pose estimation. The following presents corresponding directions to improve the robustness of tracking.</p><ul><li><strong>Camera motion blur.</strong> Camera motion blur is primarily caused by rapid movements of the robot and slow shutter speed of the camera, leading to blurry images. Although deblurring methods have been researched (Section 4.1.1) and used in SLAM [116], these methods fail to directly convert captured blurry images into sharp ones. Instead, they simulate motion blur by averaging virtual sharp images captured during the camera exposure time to synthesize blurry images. These synthesized blurry images are then used to construct loss with the observed blurry images for Gaussian optimization, ensuring that the constructed scene is deblurred. However, such methods fail to address the degradation of image quality in the observed images caused by motion blur, which adversely affects tracking performance that relies on high-quality images for pose optimization. A suitable research direction is to leverage the advantages of 3DGS representation, such as geometric information and spatial distribution, to perform tracking. This method can reduce the reliance on image quality.</li><li><strong>Limited texture information.</strong> In real-world scenes, there are some corner cases where the environmental texture information is limited, leading to insufficient constraints for pose optimization that solely relies on image quality. Although some 3DGS-based SLAM methods [128], [129] have utilized multi-sensor fusion traditional SLAM as odometry for tracking, these methods fail when traditional SLAM is unable to handle complex corner cases. A potential research direction is to incorporate original sensor data of multiple sensors, such as IMU, wheel encoders, and LiDAR, with 3D Gaussian representation to provide sufficient constraints for pose optimization. This approach not only leverages the spatial structural information and dense scene representation offered by 3DGS, but also exploits the various constraints from multi-sensor information.</li></ul><p><strong>å…³äºLifelong Mapping and Localization</strong>ï¼šCurrent 3DGS methods primarily focus on short-term reconstruction and localization. However, in most real-world scenarios, the environment undergoes constant changes over time. A prebuilt map that fails to consider these changes may quickly become outdated and unreliable. Consequently, it is crucial to maintain an up-to-date model of the environment to facilitate the long-term operation or navigation of robots. Although some traditional methods [217], [218] have achieved long-term mapping, these approaches focus on constructing and updating sparse maps, which are insufficient for downstream robotic tasks. Therefore, a promising research direction is lifelong 3DGS-based dense mapping and localization. Since 3DGS is an explicit and dense representation, the dynamic update and refinement of the Gaussian map can be achieved through explicit editing of Gaussian primitives. Additionally, we believe that the inconsistencies in the Gaussian map caused by longterm dynamic changes can be optimized by leveraging the inner constraints between Gaussian primitives. Therefore, by harnessing the explicit representation and inherent constraints among Gaussian primitives, lifelong mapping and localization can be achieved.</p><blockquote><p>æœ‰ä¸€ç‚¹ä¸ªäººå¾ˆå–œæ¬¢ï¼šè™½ç„¶ä¸€äº›ä¼ ç»Ÿæ–¹æ³•[217]ï¼Œ[218]å·²ç»å®ç°äº†é•¿æœŸçš„æ˜ å°„ï¼Œä½†è¿™äº›æ–¹æ³•ä¸»è¦é›†ä¸­åœ¨<strong>æ„å»ºå’Œæ›´æ–°ç¨€ç–åœ°å›¾ï¼Œè¿™å¯¹äºä¸‹æ¸¸æœºå™¨äººä»»åŠ¡æ¥è¯´æ˜¯ä¸å¤Ÿçš„</strong>ã€‚å› æ­¤ï¼ŒåŸºäº3dgsçš„ç»ˆèº«å¯†é›†æ˜ å°„ä¸å®šä½æ˜¯ä¸€ä¸ªå¾ˆæœ‰å‰æ™¯çš„ç ”ç©¶æ–¹å‘ã€‚</p></blockquote><p><strong>å…³äºLarge-scale Relocalization</strong>ï¼šIn robotic applications, it is necessary for robots to relocate their current poses upon entering a pre-established map. However, existing 3DGS-based relocalization methods [144], [145] either require a coarse initial pose or are only capable of achieving relocalization in small indoor scenes. These methods struggle to perform relocalization in large-scale outdoor scenes without an initial pose. Unfortunately, it is challenging to obtain a coarse initial pose for relocalization in practical robotic applications. Therefore, a meaningful research direction is large-scale relocalization without prior poses. We believe that constructing a submap index library or descriptor based on 3DGS representation facilitates coarse pose regression. In addition, the coarse pose can be refined through a registration process that leverages geometric and appearance features within the 3DGS representation.</p><blockquote><p>æ— å…ˆéªŒå§¿æ€çš„å¤§è§„æ¨¡å†å®šä½æ˜¯ä¸€ä¸ªæœ‰æ„ä¹‰çš„ç ”ç©¶æ–¹å‘</p></blockquote><p><strong>å…³äºSim-to-Real Manipulation</strong>ï¼šCollecting real-world manipulation datasets is challenging, leading to a scarcity of data for training effective grasping in real scenarios. Therefore, grasping methods often require initial training in simulation environments before being transferred to real-world settings. Although 3DGS-based sim-to-real method [219] has been explored, it has limitation in generalization. Specifically, this approach heavily depends on scene-specific training, which hinders its ability to generalize and transfer learned knowledge between similar task scenarios. Consequently, this method still requires a substantial amount of real-world datasets for training. Furthermore, the discrepancies in material and physical properties between simulation and reality environments can lead to significant differences in training data distributions for manipulation tasks. These discrepancies may potentially result in entirely different operation strategies. However, existing method [220] only enables modeling the physical properties of real-world scenarios. Therefore, a promising research direction involves directly incorporating uncertainty and environmental features into the 3DGS representation to enhance generalization and property modeling.</p><h2 id="Foundation-Models-in-Robotics-Applications-Challenges-and-the-Future"><a href="#Foundation-Models-in-Robotics-Applications-Challenges-and-the-Future" class="headerlink" title="Foundation Models in Robotics: Applications, Challenges, and the Future"></a>Foundation Models in Robotics: Applications, Challenges, and the Future</h2><p><img src="/images/nerf-3dgs-in-slam-robotics/image-20241126170838896.png"></p><p>çœ‹èµ·æ¥NeRFç›¸å…³çš„å†…å®¹ä¸»è¦é›†ä¸­åœ¨â€œPerceptionâ€éƒ¨åˆ†ï¼š</p><ul><li><p><strong>Open-Vocabulary 3D Scene and Object Representations</strong></p><p>Scene representations allow robots to understand their surroundings, facilitate spatial reasoning, and provide contextual awareness. Language-driven scene representations align textual descriptions with visual scenes, enabling robots to associate words with objects, locations, and relationships.</p><ul><li><p><strong>Language Grounding in 3D Scene:</strong> </p><p>NeRFå¯ä»¥ä¸ºæœºå™¨äººæä¾›å¼ºå‡ ä½•å…ˆéªŒï¼Œä½†å…¶å¹¶ä¸æ˜¯foundation modelã€‚ç„¶è€Œï¼ŒCLIPè¿™æ ·çš„foundation modelå´å¯ä»¥å’ŒNeRFç›¸ç»“åˆï¼Œä»ç¯å¢ƒä¸­æå–è¯­ä¹‰ä¿¡æ¯ã€‚å› æ­¤åé¢å‡ºç°äº†LERFï¼Œç»“åˆCLIPå’ŒNeRFã€‚</p><p>ç›®å‰çš„VLMå¯ä»¥å¯¹2Då›¾åƒè¿›è¡Œæ¨ç†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä¸“é—¨å»è€ƒè™‘3Dä¸Šçš„é—®é¢˜ã€‚ä½†æ˜¯å¯ä»¥ç”¨2Dçš„VLMæ¥ç›‘ç£3Dçš„æ¨¡å‹ï¼Œæ¯”å¦‚FeatureNeRFã€‚</p></li><li><p><strong>Scene Editing</strong></p><p>When an embodied agent relies on an implicit representation of the world, the capability to edit and update this representation enhances the robotâ€™s adaptability. For instance, consider a scenario where a robot utilizes a pretrained NeRF model of an environment for navigation and manipulation. If a portion of the environment changes, being able to adjust the NeRF without retraining the model from scratch saves time and resources.</p></li></ul></li></ul><h2 id="ç›¸å…³èµ„æ–™"><a href="#ç›¸å…³èµ„æ–™" class="headerlink" title="ç›¸å…³èµ„æ–™"></a>ç›¸å…³èµ„æ–™</h2><p>Paper &amp; Workshopï¼š</p><ul><li>How NeRFs and 3D Gaussian Splatting are Reshaping SLAM: a Survey, <em>arXiv, 2024</em>. [<a href="https://arxiv.org/pdf/2402.13255.pdf">Paper</a>]</li><li>SLAM Meets NeRF: A Survey of Implicit SLAM Methods, <em>World Electric Vehicle Journal, 2024</em>. [<a href="https://www.mdpi.com/2032-6653/15/3/85">Paper</a>]</li><li>Neural Fields in Robotics: A Survey, <em>arXiv, 2024</em>.[<a href="https://arxiv.org/abs/2410.20220">Paper</a>]</li><li>NeRF in Robotics: A Survey, <em>arXiv, 2024</em>.[<a href="https://arxiv.org/pdf/2405.01333">Paper</a>]</li><li>3D Gaussian Splatting in Robotics: A Survey, arXiv, 2024.[<a href="https://arxiv.org/abs/2410.12262">Paper</a>]</li><li>Foundation Models in Robotics: Applications, Challenges, and the Future, arXiv, 2023. [<a href="https://arxiv.org/abs/2312.07843">Paper</a>]</li><li><strong>RoboNerF</strong>: 1st Workshop on Neural Fields in Robotics, <em>ICRA, 2024</em>. [<a href="https://robonerf.github.io/2024/">Website</a>] [<a href="https://www.youtube.com/watch?v=jyEZtbXs3fg">Video</a>]</li></ul><p>çŸ¥ä¹ä¸Šç›¸å…³çš„è®¨è®ºï¼š</p><ul><li><p>nerfæˆ–è€…æ˜¯è·Ÿå…¶ç›¸å…³çš„3Dé‡å»ºæ–¹æ³•æ€ä¹ˆåº”ç”¨åœ¨è‡ªåŠ¨é©¾é©¶æˆ–è€…æœºå™¨äººé¢†åŸŸï¼Ÿ - åˆ˜æ–¯å¦çš„å›ç­” - çŸ¥ä¹<br><a href="https://www.zhihu.com/question/578721901/answer/3476777188">https://www.zhihu.com/question/578721901/answer/3476777188</a></p><blockquote><p>è¿™ä¸ªå›ç­”è®²çš„ä¸»è¦æ˜¯å¦‚ä½•å°†NeRFç”¨äºé—­ç¯ä»¿çœŸã€‚æ‰€è°“é—­ç¯ä»¿çœŸï¼Œå°±æ˜¯ç©¿è¶Šå›åˆ°æŸä¸ªå†å²èŠ‚ç‚¹åï¼Œä¼˜åŒ–ä½ çš„è¡Œä¸ºï¼Œç„¶åå¯¹é€ æˆçš„åæœè¿›è¡Œä»¿çœŸï¼Œä¿®æ”¹å†å²ã€‚å¹¶ä¸”è®¨è®ºäº†NeRFçš„Domain Gapæœ‰å¤šå¤§ï¼Œæåˆ°äº†ä¸€ä¸ªå«åšNDSçš„æŒ‡æ ‡ï¼Œè¡¨ç¤ºNeRFç›®å‰åªæ˜¯å ªå ªå¯ç”¨çš„ã€‚å¦å¤–æåˆ°äº†æœ‰å¾ˆå¤šç°å®ç”Ÿæ´»ä¸­çš„ç‰©ä½“å¹¶ä¸é€‚åˆmeshå»ºæ¨¡ï¼Œæ¯”å¦‚æ ‘å¶ã€å¤´å‘ä¸ã€‚</p></blockquote></li><li><p>NeRF/3DGS&amp;Beyond10.17ï¼ˆ3DGSæœºå™¨äººç»¼è¿°ã€GS^3ã€Long-LRMã€SplatPose+ã€LoGSã€GSORB-SLAMã€4-LEGSã€Magnituder Layersç­‰ï¼‰ - NeRF 3DGSæ—¥æŠ¥çš„æ–‡ç«  - çŸ¥ä¹<br><a href="https://zhuanlan.zhihu.com/p/1563839191">https://zhuanlan.zhihu.com/p/1563839191</a></p><blockquote><p>è¿™ç¯‡æ–‡ç« æåˆ°çš„ç¬¬äºŒç¯‡è®ºæ–‡ï¼Œè¿˜æŒºæœ‰æ„æ€ï¼Œä¼ ç»Ÿæ–¹æ³•ä¸èƒ½æ“ä½œè±†å­ã€åšæœã€å¤§ç±³ï¼Œä½†æ˜¯ä»–ä»¬åœ¨3DGSä¸Šé¢åšåˆ°äº†ã€‚</p></blockquote></li><li><p>æœºå™¨äººæŠ€æœ¯ä¸­çš„ 3D é«˜æ–¯splattingï¼šç»¼è¿° - é»„æµ´çš„æ–‡ç«  - çŸ¥ä¹<br><a href="https://zhuanlan.zhihu.com/p/4309431179">https://zhuanlan.zhihu.com/p/4309431179</a></p><blockquote><p>æ˜¨å¤©æ—©ä¸Šå‘çš„ï¼Œè¿˜æŒºå·§ã€‚</p></blockquote></li></ul>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 3D Gaussian Splatting </tag>
            
            <tag> NeRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»PIN-SLAM(TRO 2024)</title>
      <link href="2024/11/21/paper-reading-pin-slam/"/>
      <url>2024/11/21/paper-reading-pin-slam/</url>
      
        <content type="html"><![CDATA[<h1 id="è®ºæ–‡é˜…è¯»ã€ŠPIN-SLAM-LiDAR-SLAM-Using-a-Point-Based-Implicit-Neural-Representation-for-Achieving-Global-Map-Consistencyã€‹"><a href="#è®ºæ–‡é˜…è¯»ã€ŠPIN-SLAM-LiDAR-SLAM-Using-a-Point-Based-Implicit-Neural-Representation-for-Achieving-Global-Map-Consistencyã€‹" class="headerlink" title="è®ºæ–‡é˜…è¯»ã€ŠPIN-SLAM: LiDAR SLAM Using a Point-Based Implicit Neural Representation for Achieving Global Map Consistencyã€‹"></a>è®ºæ–‡é˜…è¯»ã€ŠPIN-SLAM: LiDAR SLAM Using a Point-Based Implicit Neural Representation for Achieving Global Map Consistencyã€‹</h1><p><img src="/images/paper-reading-pin-slam/image-20241115195333282.png"></p><p><strong>è®ºæ–‡æƒ³è¦è§£å†³çš„é—®é¢˜</strong>ï¼šThese SLAM approaches <strong>lack support for direct loop closure corrections</strong> and are <strong>not able to build globally consistent maps of larger scenes</strong>. This is mainly due to the usage of regular grid-based local feature embeddings, which are not elastic and resilient to loop corrections.</p><p><strong>è®ºæ–‡çš„æ ¸å¿ƒç›®æ ‡</strong>ï¼šThe main focus of this work is a LiDAR SLAM system for building globally consistent maps using a PIN map representation.</p><p><strong>è®ºæ–‡ä¸ºä»€ä¹ˆé€‰æ‹©neural pointè¡¨ç¤ºåœºæ™¯</strong>ï¼šWe opt to use a neural point-based implicit representation, which has two main advantages over grid-based representations: <strong>the flexibility of spatial distribution and the elasticity for transformations</strong>. Recent work (Point-SLAM) only makes use of the first advantage for neural RGB-D SLAM at the cost of scalability and inefficient neighborhood querying. Instead, we exploit the second and more important advantage to build a globally consistentmap that can be corrected while online mapping after closing a loop, which is essential for large-scale LiDAR-based SLAM.</p><p>è®ºæ–‡åœ¨Introductionæåˆ°ï¼ŒMappingéƒ¨åˆ†ä¸»è¦æ˜¯åŸºäºä¹‹å‰çš„å·¥ä½œSHINE-Mappingï¼Œè€ŒOdometryéƒ¨åˆ†æ˜¯æ‰©å±•äº†ä¹‹å‰çš„å·¥ä½œLocNDFã€‚</p><blockquote><p>å·¥ä½œæ˜¯å»¶ç»­çš„ï¼Œéå¸¸æ‰å®ï¼Œä»¤äººç¾¡æ…•ã€‚</p></blockquote><p><strong>è®ºæ–‡æå‡ºäº†å››ä¸ªkey claims</strong>ï¼š</p><ol><li>Our SLAM system achieves <strong>localization accuracy better or on par with state-of-the-art</strong> LiDAR odometry/SLAM approaches and is more accurate than recent implicit neural SLAM methods on various datasets using different range sensors.</li><li>Our method can conduct <strong>large-scale globally consistent mapping with loop closure</strong> thanks to the elastic neural point representation.</li><li>Our map representation is <strong>more compact than the previous counterparts</strong> and <strong>can be used to reconstruct accurate and complete meshes at an arbitrary resolution</strong>.</li><li>Our correspondence-free scan-to-implicit map registration and the efficient neural point indexing by voxel hashing enable our algorithm to <strong>run at the sensor frame rate on a single NVIDIA A4000</strong> graphics processing unit (GPU).</li></ol><p><strong>è®ºæ–‡å¯¹åŸºäºSubmapçš„æ–¹æ³•çš„è¯„ä»·</strong>ï¼šThe submap-based methods accumulate the observations as a submap and assume the submap is a locally defined rigid body. The pseudoglobal consistency is maintained by optimizing a graph linking submaps and their associated poses through submap-to-submap registrations. The usage of submaps decreases the number of nodes and edges in PGO, thus saving computational effort. However, these methods have issues of ambiguity in the overlapping region of the adjacent submaps and determining appropriate criteria for submap division to balance the rigidity and efficiency.</p><p><strong>è®ºæ–‡çš„Pipeline</strong>ï¼š</p><p><img src="/images/paper-reading-pin-slam/image-20241115205159958.png"></p><p>è®ºæ–‡å°†ä»–ä»¬çš„æ–¹æ³•åˆ†æˆ5ä¸ªéƒ¨åˆ†ï¼š</p><ol><li><strong>Preprocessing</strong>ï¼šå¯¹äºè¾“å…¥ç‚¹äº‘$P$ï¼Œé€šè¿‡ä½“ç´ ä¸‹é‡‡æ ·åˆ°ç”¨äºregistrationçš„ç‚¹äº‘$P_r$å’Œç”¨äºmappingçš„ç‚¹äº‘$P_m$ï¼›</li><li><strong>Odometry</strong>ï¼šé€šè¿‡å°†ç‚¹äº‘$P_r$ä¸local map $M_l$çš„implicit SDFè¿›è¡Œé…å‡†æ¥ä¼°è®¡å…¨å±€çš„ä½å§¿$T_{WC_t}$ï¼Œå¹¶å°†å‰åä¸¤å¸§çš„å˜æ¢$T_{C_{t-1}C_t}$ä½œä¸ºä¸€æ¡è¾¹æ·»åŠ åˆ°Pose Graph $G$ä¸­ã€‚</li><li><strong>Mapping</strong>ï¼šæ ¹æ®åœ°å›¾$M$è¿‡æ»¤æ‰ç”¨äºmappingçš„ç‚¹äº‘$P_m$ä¸­çš„åŠ¨æ€ç‚¹ï¼Œå¹¶æ²¿ç€ä»ä¼ æ„Ÿå™¨åˆ°$P_m$ä¸­æ¯ä¸ªç‚¹çš„å°„çº¿è¿›è¡Œé‡‡æ ·ï¼Œå¾—åˆ°è®­ç»ƒæ ·æœ¬$D$ï¼Œå¹¶ä½¿ç”¨åœ¨Odometryä¸­è®¡ç®—çš„ä½å§¿$T_{WC_t}$å°†å…¶è½¬æ¢åˆ°ä¸–ç•Œåæ ‡ç³»ä¸­ã€‚ä½¿ç”¨é è¿‘åœºæ™¯è¡¨é¢çš„æ ·æœ¬$D_s \subset D$æ¥åˆå§‹åŒ–æ–°çš„neural pointï¼Œå¹¶ä¸”å°†ä»–ä»¬é™„åŠ åˆ°åœ°å›¾$M$ä¸Šï¼Œå¹¶ä¸”é‡ç½®local map $M_l$ï¼Œè®©å…¶ä»¥å½“å‰ä½ç½®$T_{WC_t}$ä¸ºä¸­å¿ƒã€‚ä½¿ç”¨é‡‡æ ·çš„ç‚¹$D_s$æ¥æ›´æ–°è®­ç»ƒæ ·æœ¬æ± $D_p$ï¼Œå¹¶ä¸”ä½¿ç”¨$D_p$å’ŒSDFç›‘ç£æ¥ä¼˜åŒ–local map $M_l$ä¸­çš„neural point featureã€‚æœ€åå°†æ›´æ–°ä¹‹åçš„local map $M_l$åˆ†é…å›global map $M$ä¸­ã€‚</li><li><strong>Loop closure detection</strong>ï¼šé€šè¿‡local map $M_l$ç”Ÿæˆä¸€ä¸ªæœ¬åœ°æåæ ‡ä¸Šä¸‹æ–‡æè¿°ç¬¦$U_t$ã€‚ä¹‹åé€šè¿‡æ¯”è¾ƒå½“å‰å¸§å’Œå€™é€‰å¸§æè¿°ç¬¦ä¹‹é—´çš„ç‰¹å¾è·ç¦»æ¥æœç´¢æ½œåœ¨çš„loop closureã€‚ä¸€æ—¦æ£€æµ‹åˆ°å½“å‰å¸§$C_t$å’Œå€™é€‰å¸§$C_k$ä¹‹é—´çš„å­˜åœ¨é—­ç¯ï¼Œå°±é€šè¿‡å°†å½“å‰å¸§ç‚¹äº‘$P_r$å’Œä»¥å€™é€‰å¸§ä½ç½®$t_{WC_k}$ä¸ºä¸­å¿ƒçš„local map $M_l$è¿›è¡Œé…å‡†ï¼Œæ¥éªŒè¯æ˜¯å¦çœŸçš„å­˜åœ¨é—­ç¯ã€‚å¦‚æœé…å‡†æˆåŠŸï¼Œå°±å°†é…å‡†äº§ç”Ÿçš„å˜æ¢$T_{C_kC_t}$ä½œä¸ºæ–°çš„è¾¹æ·»åŠ åˆ°Pose Graph $G$ä¸­ã€‚</li><li><strong>Pose graph optimization</strong>ï¼šåŠ å…¥loop closure edgeä¹‹åï¼Œå¯¹pose graph $G$è¿›è¡Œä¼˜åŒ–ã€‚ä¼˜åŒ–ä¹‹åå¯¹global map $M$ä¸­æ¯ä¸ªneural pointçš„ä½ç½®å’Œæ–¹å‘åŠå…¶å…³è”å¸§è¿›è¡Œå˜æ¢ï¼Œä»¥ä¿è¯å…¨å±€ä¸€è‡´æ€§ã€‚åœ¨å®Œæˆloop correctionä¹‹åï¼Œå¯¹è®­ç»ƒæ ·æœ¬æ± $D_p$è¿›è¡Œå˜æ¢ï¼Œå¹¶ä¸”é‡ç½®local map $M_l$ã€‚</li></ol><h2 id="Neural-Point-Based-Map-Representation"><a href="#Neural-Point-Based-Map-Representation" class="headerlink" title="Neural Point-Based Map Representation"></a>Neural Point-Based Map Representation</h2><p><strong>Map Representation</strong>ï¼š</p><p>neural point $m_i$ä¿å­˜äº†è‡ªå·±çš„ä½ç½®$x_i$ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªå››å…ƒæ•°$q_i$è¡¨ç¤ºè‡ªèº«åæ ‡æ¡†æ¶çš„æ–¹å‘ï¼Œç‰¹å¾å‘é‡$f^g_i$ç¼–ç äº†å±€éƒ¨çš„å‡ ä½•å½¢çŠ¶ï¼Œæ—¶é—´æˆ³$t^c_i$è¡¨ç¤ºè¿™ä¸ªneural pointåˆ›å»ºçš„æ—¶é—´ï¼Œæ—¶é—´æˆ³$t^u_i$è¡¨ç¤ºè¿™ä¸ªneural pointæœ€åæ›´æ–°çš„æ—¶é—´ï¼Œ$\mu_i$è¡¨ç¤ºè¯¥ç‚¹æ˜¯å¦æ´»è·ƒã€æ˜¯å¦ç¨³å®šã€‚é€šè¿‡å°†neural point $m_i$ä¸$t^m_i$æ—¶åˆ»çš„ä½å§¿$T_{WC_{t^m_i}}$ç›¸å…³è”ï¼Œå¯ä»¥é€šè¿‡æ›´æ–°æ‰€æœ‰æ—¶åˆ»çš„ä½å§¿æ¥ç›´æ¥æ“çºµåœ°å›¾ï¼Œå…¶ä¸­$t^m_i = [(t^c_i + t^u_i)/2]$ã€‚</p><p><img src="/images/paper-reading-pin-slam/image-20241117154530033.png"></p><p>å…¶ä¸­è¿™ä¸ªå››å…ƒæ•°$q_i$ï¼Œæ˜¯ç”¨æ¥ä¿è¯neural pointç»è¿‡decoderè§£ç å¾—åˆ°çš„SDFå¯¹åˆšä½“å˜æ¢å…·æœ‰ä¸å˜æ€§ã€‚å¦‚ä¸‹å›¾(a)éƒ¨åˆ†æ‰€ç¤ºï¼Œdecoder$D^g_\theta$è¾“å…¥çš„æ˜¯ç›¸é‚»neural pointçš„feature $f^g_i$å’Œåœ¨è¯¥neural pointåæ ‡ç³»ä¸‹è¢«æŸ¥è¯¢ç‚¹çš„ä½ç½®$d_i$ï¼Œè¾“å‡ºçš„æ˜¯è¢«æŸ¥è¯¢ç‚¹åœ¨è¯¥neural pointå½±å“ä¸‹çš„SDFå€¼$s_i$ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸Point-NeRFå’ŒPoint-SLAMè®¡ç®—ä½“å¯†åº¦çš„è¿‡ç¨‹åŸºæœ¬ä¸€è‡´ã€‚ä»ä¸‹å›¾(b)éƒ¨åˆ†å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§ç­–ç•¥ä½¿å¾—é¢„æµ‹çš„SDFå€¼å¯¹å±€éƒ¨çš„å¹³ç§»å’Œæ—‹è½¬å…·æœ‰ä¸å˜æ€§ï¼Œä»è€Œä½¿å¾—ç»è¿‡loop closureä¹‹åçš„åœ°å›¾å…·æœ‰å¼¹æ€§ã€‚</p><p><img src="/images/paper-reading-pin-slam/image-20241117160700343.png"></p><p>ç¬”è€…è®¤ä¸ºè¿™ä¸€æ­¥åšçš„éå¸¸å·§å¦™ã€‚å››å…ƒæ•°$q_i$å®šä¹‰äº†æ¯ä¸€ä¸ªneural pointè‡ªå·±çš„åæ ‡ç³»ï¼ŒæŸ¥è¯¢SDFéœ€è¦æŠŠneural pointçš„featureå’ŒæŸ¥è¯¢ç‚¹åœ¨åæ ‡ç³»ä¸­çš„ä½ç½®è¾“å…¥åˆ°ç½‘ç»œï¼Œç›¸å½“äºæ˜¯æ¯ä¸€ä¸ªneural pointéƒ½æœ‰äº†è‡ªå·±çš„â€œå½¢çŠ¶â€ï¼Œè¿™äº›â€œå½¢çŠ¶â€å åˆ°ä¸€èµ·æ„æˆäº†ä¸€ä¸ªå±€éƒ¨çš„å‡ ä½•è¡¨é¢ã€‚ç»è¿‡loop closureä¹‹åæ¯ä¸ªâ€œå½¢çŠ¶â€ä¹Ÿä¼šç›¸åº”çš„è¢«æ—‹è½¬å¹³ç§»ï¼Œè€Œä¸æ˜¯ç®€å•çš„æŠŠâ€œå½¢çŠ¶â€çš„ä¸­å¿ƒæŒªåˆ°æ ¡æ­£ä¹‹åçš„ä½ç½®å»ï¼Œè¿™æ ·çš„è¯å°±ä¸éœ€è¦é€šè¿‡å­åœ°å›¾æŠŠæ¯ä¸ªç‚¹çš„ç›¸å¯¹ä½ç½®ç»‘èµ·æ¥ä¹Ÿèƒ½ä¿è¯loop closureä¹‹åå±€éƒ¨çš„å‡ ä½•ç¨³å®šäº†ã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹æœ‰ä¸€ç‚¹3DGSçš„å‘³é“äº†ï¼Œä½†æ˜¯å•ä¸ª3DGSå¾ˆéš¾åƒè¿™é‡Œçš„å•ä¸ªneural pointé‚£æ ·æœ‰éå¸¸æ˜ç¡®çš„å‡ ä½•æ„ä¹‰ã€‚</p><blockquote><p><strong>ç–‘é—®</strong>ï¼šä¸ºä»€ä¹ˆPoint-NeRFã€Point-SLAMã€Loopy-SLAMä»¥åŠPIN-SLAMå¯¹äºä½“å¯†åº¦æˆ–SDFå€¼ï¼Œéƒ½æ˜¯å•ç‹¬è§£ç ä¹‹åï¼Œå†é€šè¿‡é€†è·ç¦»åŠ æƒï¼Ÿè€Œé¢œè‰²ç›¸å…³çš„ï¼Œåˆ™æ˜¯é€šè¿‡ç½‘ç»œå¾—åˆ°ä¸€ä¸ªæ–°çš„featureï¼Œå°†è¿™ä¸ªfeatureè¿›è¡Œé€†è·ç¦»åŠ æƒä¹‹åå†è§£ç å¾—åˆ°é¢œè‰²ï¼Ÿ</p></blockquote><p><strong>Map Data Structure</strong>ï¼š</p><p>ä¸ºäº†å®ç°å¿«é€Ÿçš„neural pointç´¢å¼•å’Œé‚»åŸŸæœç´¢ï¼ŒPIN-SLAMç»´æŠ¤äº†ä¸€ä¸ªvoxel resolutionå›ºå®šä¸º$v_p$å’Œhash table sizeä¸º$T$çš„voxel hashing data structureã€‚è¿™ä¸ªæ•°æ®ç»“æ„ç”¨äºç»„ç»‡åœ°å›¾ä¸­çš„neural pointï¼Œä¿è¯æ¯ä¸ªvoxelä¸­çš„neural pointä¸è¶…è¿‡1ä¸ªã€‚</p><p>PIN-SLAMå€Ÿé‰´äº†ã€ŠInstant neural graphics primitives with a multiresolution hash encodingã€‹å’Œã€Šâ€œKISS-ICP: In defense ofpoint-to-point ICPâ€“simple, accurate, and robust registration if done the right wayã€‹è¿™ä¸¤ä¸ªå·¥ä½œï¼Œé€šè¿‡spatial hashing function $\kappa = h(p_W)$å°†$p_W \in \mathbb{R}^3$æ˜ å°„åˆ°hash tableä¸­çš„$\kappa \in \mathbb{Z}$ã€‚å…¶ä¸­hash tableä¸­æ¯ä¸€é¡¹å­˜å‚¨åœ°å›¾ä¸­neural pointçš„ç´¢å¼•ï¼Œé»˜è®¤å€¼ä¸º-1ï¼Œè¡¨ç¤ºè¿™ä¸€é¡¹æš‚æ—¶æ²¡æœ‰å¯¹åº”çš„neural pointã€‚</p><p>ä¸Point-SLAMç›¸æ¯”ï¼ŒPIN-SLAMå€ŸåŠ©voxel structureï¼Œå®ç°äº†æ›´å¿«çš„è¿›è¡ŒKè¿‘é‚»æœç´¢ã€‚</p><p><strong>Map Initialization and Update</strong>ï¼š</p><p>PIN-SLAMä¼šæ ¹æ®æ¯ä¸ªæ—¶åˆ»è¾“å…¥çš„ç‚¹äº‘åˆå§‹åŒ–æˆ–æ›´æ–°neural pointã€‚</p><p>å¯¹äºåœ¨æ—¶åˆ»$t$è·å–çš„ä¸–ç•Œåæ ‡ç³»$W$ä¸‹çš„æŸä¸€ä¸ªç‚¹$p_W$ï¼Œæ»¡è¶³ä»¥ä¸‹ä»»æ„ä¸€ç§æƒ…å†µæ—¶ï¼Œä¼šåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„neural point $m_k$æ”¾åˆ°åœ°å›¾$M$ä¸­ï¼Œå¹¶ä¸”å°†å¯¹åº”çš„hash tableä¸­çš„é¡¹è®¾ç½®ä¸ºè¯¥neural pointçš„ç´¢å¼•ï¼Œå³$\kappa = k$ã€‚</p><ol><li>å¯¹åº”çš„hash tableä¸­çš„é¡¹æ²¡æœ‰è¢«å ç”¨ï¼Œå³$\kappa = -1$ï¼›</li><li>å­˜åœ¨å“ˆå¸Œå†²çªï¼Œä½†æ˜¯åœ¨voxel structureä¸­ï¼Œå­˜å‚¨çš„neural pointä¸å¸Œæœ›è¢«æ·»åŠ çš„neural pointä¹‹é—´è·ç¦»å¾ˆè¿œï¼›</li><li>å­˜åœ¨å“ˆå¸Œå†²çªï¼Œä½†æ˜¯å­˜å‚¨çš„neural pointå·²ç»ä¸å†æ´»è·ƒï¼Œå³$D(t) - D(t^u_\kappa) &gt; d_l$ã€‚</li></ol><p>æ–°åˆå§‹åŒ–çš„neural point $m_k$ï¼Œä½ç½®$x = p_W$ï¼Œè€Œå››å…ƒæ•°è¢«è®¾ç½®ä¸ºå•ä½å››å…ƒæ•°$ q = (1,0,0,0)$ï¼Œç‰¹å¾å‘é‡è¢«åˆå§‹åŒ–ä¸ºé›¶å‘é‡$f^g=0$ï¼Œåˆ›å»ºæ—¶é—´å’Œæœ€åæ›´æ–°æ—¶é—´è¢«è®¾ç½®ä¸º$t^c = t^u = t$ï¼Œç¨³å®šæ€§$\mu = 0$ã€‚</p><p>å¯¹äºå­˜åœ¨å“ˆå¸Œå†²çªçš„æƒ…å†µ2å’Œ3ï¼ŒåŸæ¥å­˜å‚¨çš„neural pointä¸ä¼šè¢«åˆ é™¤ï¼Œåªä¼šè®©hash tableä¸å†ç´¢å¼•åˆ°è¯¥ç‚¹ï¼Œè¯¥ç‚¹ä»ç„¶ä¼šè¢«ä¿å­˜åœ¨global mapä¸­ã€‚è®ºæ–‡è¯´è¿™æ ·åšæ˜¯ä¸ºäº†loop closure correctionå’Œglobally consistent map adjustmentã€‚</p><p><strong>Local Map</strong>ï¼š</p><p>PIN-SLAMä½¿ç”¨local mapæ˜¯ä¸ºäº†â€œavoid the alignment to the inconsistent historical observations caused by odometry driftâ€ã€‚</p><blockquote><p>æœ‰å¾ˆå¤šNeRF SLAMå’Œ3DGS SLAMæ˜¯frame-to-modelçš„ï¼Œå¯ä»¥çœ‹ã€ŠHow NeRFs and 3D Gaussian Splatting are Reshaping SLAM: a Surveyã€‹çš„<a href="https://pic1.zhimg.com/v2-f388d6e1060fc226d00df0a36ba5582a_1440w.jpg">è¡¨æ ¼</a>ã€‚</p><p>frame-to-modelå¯èƒ½å­˜åœ¨çš„é—®é¢˜æ˜¯ï¼Œmodelæ„å»ºçš„ä¸å¤ªå¥½ï¼Œå¯¼è‡´frameçš„ä½å§¿è®¡ç®—çš„ä¹Ÿä¸å¥½ï¼Œè¿›è€Œå¯¼è‡´æ›´æ–°çš„modelä¹Ÿä¸å¥½ï¼Œä»è€Œframeåˆåœ¨å­˜åœ¨driftçš„modelä¸Šå†è®¡ç®—ä½å§¿ã€‚</p><p>è€ŒPIN-SLAMè¿™é‡Œä½¿ç”¨äº†local mapï¼Œä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ï¼ˆå—ï¼Ÿï¼‰</p></blockquote><p>è®ºæ–‡æåˆ°ä¹‹å‰ä¸€äº›å·¥ä½œä¸­ï¼Œlocal mapæ˜¯ä½¿ç”¨spatial windowï¼ˆæ¯”å¦‚MULLSã€KISS-ICPï¼‰æˆ–temporal windowï¼ˆæ¯”å¦‚ElasticFusionï¼‰æ¥å®šä¹‰çš„ï¼Œè®ºæ–‡è§‰å¾—è¿™ä¸¤ç§æ–¹æ³•å¯ä»¥ç»“åˆèµ·æ¥ä½¿ç”¨ï¼Œä½†åˆå‘ç°å®é™…ä¸Šé‡Œç¨‹è®¡çš„driftå¯èƒ½ä¸ç´¯è®¡ç»è¿‡çš„è·ç¦»æˆæ­£æ¯”ï¼Œè€Œä¸æ˜¯ä¸æ—¶é—´æˆæ­£æ¯”ã€‚å› æ­¤ï¼ŒPIN-SLAMçš„temporal windowç”¨travel distance thresholdæ¥ä»£æ›¿timestep thresholdã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œå¯¹äºä»¥$t$æ—¶åˆ»çš„ä½ç½®$t_{WC_t}$ä¸ºä¸­å¿ƒçš„local map $M_l$ï¼Œè¿™ä¸ªlocal mapåŒ…æ‹¬spatial window $| x_i - t_{WC_t} |_2 &lt; r_l$å’Œtemporal window $D(t) - D(t_i^c) &lt; d_l$ã€‚å…¶ä¸­$r_l$æ˜¯local spatial windowçš„åŠå¾„ï¼Œ$d_l$æ˜¯å‰é¢æåˆ°çš„travel distance thresholdã€‚</p><p><strong>Map Training Samples</strong>ï¼š</p><p>å’ŒPoint-SLAMçš„é‡‡æ ·ç­–ç•¥æ¯”è¾ƒç±»ä¼¼ï¼ŒPIN-SLAMæ˜¯åœ¨è¡¨é¢é‡‡æ ·ä¸€ä¸ªç‚¹ï¼Œå†åœ¨è¡¨é¢é™„è¿‘é‡‡æ ·$Ns$ä¸ªç‚¹ï¼Œè¡¨é¢é™„è¿‘çš„$N_s$ä¸ªç‚¹çš„æ·±åº¦æœä»æ­£æ€åˆ†å¸ƒã€‚å¦å¤–ï¼Œä¹Ÿä¼šåœ¨è¡¨é¢åˆ°ç›¸æœºä¹‹é—´çš„ç©ºé—´ä¸­å‡åŒ€é‡‡æ ·$N_f$ä¸ªç‚¹ï¼Œåœ¨è¡¨é¢åçš„ä¸€å®šç©ºé—´ä¸­å‡åŒ€é‡‡æ ·$N_b$ä¸ªç‚¹ã€‚</p><p>æœ€ç»ˆä¼šå¾—åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„è®­ç»ƒæ ·æœ¬ï¼š<br>$$<br>D = {(u_j,\hat s_j , t) | j = 1,â€¦,N_t}<br>$$<br>å…¶ä¸­ï¼Œ$N_t = M_t(1+N_s+N_f+N_b)$ï¼Œ$M_t$æ˜¯ç”¨äºmappingçš„ç‚¹äº‘$P_m$ä¸­ç‚¹çš„ä¸ªæ•°ï¼Œ$u_j$è¡¨ç¤ºç¬¬$j$ä¸ªé‡‡æ ·ç‚¹ï¼Œ$\hat s_j$è¡¨ç¤ºSDFå€¼ï¼Œè¢«å®šä¹‰ä¸º$\hat s_j = |p|_2 - d$ã€‚è®ºæ–‡æåˆ°$\hat s_j$å¯èƒ½æ€»æ˜¯ä¼šè¢«é«˜ä¼°ï¼Œä½†æ˜¯è®¡ç®—é€Ÿåº¦å¾ˆå¿«ï¼Œè€Œä¸”åœ¨æ ·æœ¬æ¥è¿‘è¡¨é¢çš„æ—¶å€™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è¿‘ä¼¼å€¼ã€‚</p><p>ä¸ºäº†è§£å†³incremental mappingä¸­çš„â€œcatastrophic forgettingâ€ï¼ŒPIN-SLAMç»´æŠ¤äº†ä¸€ä¸ªè®­ç»ƒæ ·æœ¬æ± $D_p$ï¼Œç±»ä¼¼äºPoint-SLAMç­‰æ–¹æ³•ä¸­çš„å…³é”®å¸§ã€‚</p><p><strong>Map Training Losses</strong>ï¼š</p><p><img src="/images/paper-reading-pin-slam/image-20241121153238442.png"></p><p><img src="/images/paper-reading-pin-slam/image-20241121153248786.png"></p><h2 id="Preprocessing"><a href="#Preprocessing" class="headerlink" title="Preprocessing"></a>Preprocessing</h2><p>åœ¨ä»‹ç»è®ºæ–‡pipelineåˆ°æ—¶å€™æåˆ°ï¼ŒPIN-SLAMå¯¹äºè¾“å…¥ç‚¹äº‘$P$ï¼Œé€šè¿‡ä½“ç´ ä¸‹é‡‡æ ·åˆ°ç”¨äºregistrationçš„ç‚¹äº‘$P_r$å’Œç”¨äºmappingçš„ç‚¹äº‘$P_m$ï¼Œå…¶ä¸­ç”¨äºregistrationçš„ç‚¹äº‘$P_r$ä½¿ç”¨äº†è¾ƒå¤§çš„voxel sizeï¼Œè€Œç”¨äºmappingçš„ç‚¹äº‘$P_m$ä½¿ç”¨äº†è¾ƒå°çš„voxel sizeã€‚é™é‡‡æ ·çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªvoxelåªä¿ç•™æœ€æ¥è¿‘ä½“ç´ ä¸­å¿ƒçš„é‚£ä¸ªç‚¹ã€‚</p><p>Lidarå­˜åœ¨å› ä¸ºè¿åŠ¨å¯¼è‡´çš„ç•¸å˜ï¼ŒPIN-SLAMåŸºäºåŒ€é€Ÿè¿åŠ¨æ¨¡å‹ï¼Œåœ¨è¯¥æ¨¡å‹çš„åŸºç¡€ä¸Šå…ˆé€šè¿‡é€ç‚¹æ—¶é—´æˆ³æ’å€¼è¿åŠ¨é¢„æµ‹ï¼Œåœ¨Odometryä¼°è®¡ä½å§¿ä¹‹å‰å¯¹$P_r$è¿›è¡Œå»ç•¸å˜ï¼Œå†é€šè¿‡Odometryä¼°è®¡çš„æ›´å‡†ç¡®çš„ä½å§¿æ¥å¯¹$P_m$è¿›è¡Œå»ç•¸å˜ã€‚</p><h2 id="Odometry-Estimation"><a href="#Odometry-Estimation" class="headerlink" title="Odometry Estimation"></a>Odometry Estimation</h2><p>è¯¥éƒ¨åˆ†æ˜¯åŸºäºå·²æœ‰çš„å·¥ä½œã€ŠLocNDF: Neural distance field mapping for robot localizationã€‹ï¼ŒLocNDFå®ç°çš„æ˜¯é’ˆå¯¹å·²çŸ¥åœ°å›¾è¿›è¡Œå®šä½çš„æ–¹æ³•ã€‚</p><p><img src="/images/paper-reading-pin-slam/image-20241121160918836.png"></p><p>ä¹‹å‰çš„ä¸€äº›neural implicit SLAMï¼Œæ¯”å¦‚iMAPã€Point-SLAMã€Vox-fusionã€NICE-SLAMç­‰ï¼Œä¼˜åŒ–ç›®æ ‡æ˜¯depth rendering lossï¼Œå¯ä»¥è®¤ä¸ºæ˜¯point-to-point metricã€‚è€ŒPIN-SLAMä¼˜åŒ–ç›®æ ‡æ˜¯point-to-model SDF lossï¼Œç±»ä¼¼äºICPä¸­çš„point-to-plane metricã€‚</p><p>æ ¹æ®è®ºæ–‡ã€ŠEfficient variants of the ICP algorithmã€‹çš„ç ”ç©¶ï¼Œåä¸€ç§æ–¹æ³•å…·æœ‰æ›´å¿«çš„æ”¶æ•›é€Ÿåº¦å’Œæ›´ç¨³å¥çš„ä¼˜åŒ–ã€‚</p><h2 id="Mapping-and-Local-BA"><a href="#Mapping-and-Local-BA" class="headerlink" title="Mapping and Local BA"></a>Mapping and Local BA</h2><p>PIN-SLAMé¦–å…ˆä¼šå»é™¤åŠ¨æ€ç‚¹ï¼Œåªä¿ç•™é™æ€ç‚¹ç”¨äºMappingã€‚</p><p>ä¸‹é¢æåˆ°äº†ä¸€ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„åšæ³•ï¼ŒPIN-SLAMæ˜¯åœ¨æœ€åˆçš„$F_{mlp}$ä¸ªæ—¶åˆ»å†…ï¼ŒåŒæ—¶ä¼˜åŒ–local map $M_l$ä¸­çš„neural point feature $f^g$å’Œdecoderçš„å‚æ•°$D^g_\theta$ï¼Œè€Œåœ¨$F_{mlp}$ä¸ªæ—¶åˆ»ä¹‹åï¼Œå°±freeze $D^g_\theta$äº†ï¼Œåªä¼˜åŒ–neural point featureäº†ã€‚è¿™æ ·å¯ä»¥é¿å…å› ä¸ºdecoderä¸æ–­å˜åŒ–å¯¼è‡´çš„ç¾éš¾æ€§é—å¿˜ã€‚</p><p><img src="/images/paper-reading-pin-slam/image-20241121170316273.png"></p><p>å¯¹äºlocal BAï¼Œè®ºæ–‡ä¸­æ˜¯è¿™ä¹ˆæè¿°çš„ï¼š</p><p><img src="/images/paper-reading-pin-slam/image-20241121171042766.png"></p><h2 id="Loop-Closure-Detection"><a href="#Loop-Closure-Detection" class="headerlink" title="Loop Closure Detection"></a>Loop Closure Detection</h2><p>PIN-SLAMé¦–å…ˆæ£€æµ‹local loop closureã€‚å³ï¼Œå¯¹äºå½“å‰ä½ç½®$t_t$å’Œå½“å‰å¸§$C_t$ï¼Œä¸å†å²ä½ç½®$t_{t_i}$å’Œå†å²å¸§$C_{t_i}$ï¼Œå…¶ä¸­$t_i &lt; t$è€Œä¸”$D(t) - D(t_i) &gt; d_l$ï¼Œåˆ¤æ–­ä¸¤ä¸ªä½ç½®æ˜¯å¦æ»¡è¶³ä»¥ä¸‹å…³ç³»ï¼š<br>$$<br>| t_t - t_{t_i} |<em>2 &lt; d</em>{loop}<br>$$<br>è¿™ç§local loop closureæ¯”è¾ƒé€‚åˆåœ¨driftè¾ƒå°çš„æƒ…å†µä¸‹ï¼Œåˆ¤æ–­æ˜¯å¦åˆå›åˆ°äº†è¿‡å»ç»è¿‡çš„ä½ç½®ã€‚</p><p>å¦‚æœæ²¡æœ‰æ£€æµ‹åˆ°local loop closureï¼ŒPIN-SLAMä¼šé€šè¿‡æ¯”è¾ƒframe-wise descriptorsæ¥æœç´¢global loop closureã€‚PIN-SLAMé’ˆå¯¹å…¸å‹çš„é©¾é©¶åœºæ™¯ï¼Œå‚è€ƒScan Contextå’ŒScan Context++ç­‰å·¥ä½œï¼Œæå‡ºäº†ä¸€ç§â€œneural point feature enhanced local map descriptorâ€ï¼Œè®ºæ–‡ä¸ºæ¯ä¸€ä¸ªæ—¶åˆ»$t$çš„local mapç”Ÿæˆå¯¹åº”çš„local context descriptor $U_t$ã€‚</p><p>å½“æ£€æµ‹åˆ°candidate loopï¼ŒPIN-SLAMå°†å½“å‰å¸§ç‚¹äº‘$P_r$ä¸å€™é€‰å¸§$C_k$å¯¹åº”çš„local map $M_l$è¿›è¡Œé…å‡†ã€‚</p><ul><li>å¯¹äºlocal loopï¼Œä½¿ç”¨å•ä½çŸ©é˜µè¿›è¡Œåˆå§‹åŒ–ï¼›</li><li>å¯¹äºglobal loopï¼Œä½¿ç”¨semimetric localizationçš„ç»“æœä½œä¸ºåˆå€¼ã€‚</li></ul><p>å¦‚æœé…å‡†æˆåŠŸï¼ŒPIN-SLAMä¼šå°†é…å‡†ä¹‹åçš„å˜æ¢$T_{C_kC_t}$ä½œä¸ºpose graph $G$ä¸­è¿æ¥èŠ‚ç‚¹$C_k$å’Œ$C_t$çš„loop closure edgeã€‚å¦åˆ™ï¼Œè¿™ä¸ªcandidate loopä¼šè¢«å¦å®šã€‚</p><h2 id="Globally-Consistent-Implicit-Neural-Map-Adjustment"><a href="#Globally-Consistent-Implicit-Neural-Map-Adjustment" class="headerlink" title="Globally Consistent Implicit Neural Map Adjustment"></a>Globally Consistent Implicit Neural Map Adjustment</h2><p>ç¬”è€…è®¤ä¸ºè¿™éƒ¨åˆ†æ˜¯PIN-SLAMä¸­æœ€å¸å¼•äººçš„ï¼Œä¸è¿‡åœ¨å‰é¢çš„ç« èŠ‚ä¸­å·²ç»æœ‰å¾ˆå¤šé“ºå«ï¼Œè®ºæ–‡åœ¨è¿™éƒ¨åˆ†ç€å¢¨å¹¶ä¸å¤šã€‚</p><p><img src="/images/paper-reading-pin-slam/image-20241121212323987.png"></p><h2 id="EXTENSION-TO-RGB-D-OR-METRIC-SEMANTIC-SLAM"><a href="#EXTENSION-TO-RGB-D-OR-METRIC-SEMANTIC-SLAM" class="headerlink" title="EXTENSION TO RGB-D OR METRIC-SEMANTIC SLAM"></a>EXTENSION TO RGB-D OR METRIC-SEMANTIC SLAM</h2><p>è®ºæ–‡åœ¨è¿™ä¸ªç« èŠ‚æ¼”ç¤ºäº†å¦‚ä½•å°†PIN-SLAMæ‰©å±•åˆ°RGB-Dæˆ–è€…Metric-Semantic SLAMã€‚æ€è·¯å…¶å®æŒºç®€å•çš„ï¼Œç»™æ¯ä¸€ä¸ªneural pointå¢åŠ å¯¹åº”çš„RGBæˆ–è€…Semanticçš„featureå°±å¯ä»¥äº†ï¼Œç„¶ååˆ›å»ºå¯¹åº”çš„MLPä½œä¸ºdecoderï¼Œå½“ç„¶ä¸ºäº†è¿›è¡Œè®­ç»ƒï¼Œä¹Ÿä¼šæ„å»ºå¯¹åº”çš„æŸå¤±å‡½æ•°ã€‚</p><p><img src="/images/paper-reading-pin-slam/image-20241121214746710.png"></p><p><img src="/images/paper-reading-pin-slam/image-20241121215057434.png"></p><h2 id="å®éªŒéƒ¨åˆ†"><a href="#å®éªŒéƒ¨åˆ†" class="headerlink" title="å®éªŒéƒ¨åˆ†"></a>å®éªŒéƒ¨åˆ†</h2><p>KITTIæ•°æ®é›†ä¸Šï¼Œè®ºæ–‡çš„odometryä¸å…¶ä»–LIDAR odometryæ¯”è¾ƒå¹³å‡ç›¸å¯¹å¹³ç§»æ¼‚ç§»è¯¯å·®ï¼ˆ%ï¼‰ï¼š</p><p><img src="/images/paper-reading-pin-slam/image-20241121215842185.png"></p><p>KITTIæ•°æ®é›†ä¸Šï¼Œä¸ä¸åŒçš„SLAMæ¯”è¾ƒATE RMSEï¼š</p><p><img src="/images/paper-reading-pin-slam/image-20241121220046078.png"></p><p>KITTIæ•°æ®é›†ä¸Šï¼ŒLoop Closureçš„ç›´è§‚æ•ˆæœï¼š</p><p><img src="/images/paper-reading-pin-slam/image-20241121220407142.png"></p><p>Replicaæ•°æ®é›†ä¸Šï¼Œæ‹“å±•åˆ°RGB-Dçš„PIN-SLAMä¸å…¶ä»–NeRF SLAMæ–¹æ³•æ¯”è¾ƒATE RMSEï¼š</p><p><img src="/images/paper-reading-pin-slam/image-20241121220626709.png"></p><p>åœ¨kittiæ•°æ®é›†çš„å››ä¸ªåºåˆ—ä¸Šï¼Œä¸ä¼ ç»Ÿæ–¹æ³•ï¼ˆä¸Šï¼‰å’ŒåŸºäºå­¦ä¹ çš„æ–¹æ³•ï¼ˆä¸­ï¼‰æ¯”è¾ƒloop closure detectionçš„å¬å›ç‡ï¼š</p><p><img src="/images/paper-reading-pin-slam/image-20241121220855248.png"></p><p>åœ¨NEWER COLLEGEæ•°æ®é›†ä¸Šå’Œå…¶ä»–æ–¹æ³•æ¯”è¾ƒä¸‰ç»´é‡å»ºçš„è´¨é‡ï¼š</p><p><img src="/images/paper-reading-pin-slam/image-20241121221021656.png"></p><p>åœ°å›¾å‹ç¼©ç‡å®éªŒï¼š</p><p><img src="/images/paper-reading-pin-slam/image-20241121221402200.png"></p><p>åœ¨KITTI seq 00ä¸Šä¸åŒå­æ¨¡å—çš„å¤„ç†æ—¶é—´ï¼š</p><p><img src="/images/paper-reading-pin-slam/image-20241121221557068.png"></p><p>å¯¹KITTI seq 00-10çš„å¹³å‡è¿ç®—é€Ÿåº¦å’Œå®šä½è¯¯å·®çš„æ¯”è¾ƒï¼š</p><p><img src="/images/paper-reading-pin-slam/image-20241121221643870.png"></p><h2 id="æ€»ç»“-amp-è®¨è®º"><a href="#æ€»ç»“-amp-è®¨è®º" class="headerlink" title="æ€»ç»“&amp;è®¨è®º"></a>æ€»ç»“&amp;è®¨è®º</h2><p>è¿™ç¯‡æ–‡ç« éå¸¸æ‰å®ï¼Œå·¥ä½œåšå¾—éå¸¸å®Œæ•´ï¼Œå®éªŒåšå¾—ä¹Ÿéå¸¸å……åˆ†ã€‚è®ºæ–‡çš„å·¥ä½œã€å®éªŒç´§ç´§å›´ç»•SLAM(Simultaneous Localization and Mapping)ä¸­çš„localizationå’Œmappingï¼Œæ²¡æœ‰åƒå…¶ä»–NeRF SLAMã€3DGS SLAMæ–¹æ³•ä¸€æ ·å±•ç¤ºPSNRã€SSIMç­‰ç»“æœï¼ˆç¬”è€…è®¤ä¸ºPSNRã€SSIMä¸»è¦æ˜¯æ–°è§†è§’åˆæˆçš„æŒ‡æ ‡äº†ï¼Œæ”¾åœ¨SLAMæ¥å±•ç¤ºæœ‰ç‚¹å¥‡æ€ªï¼Œä¸è¿‡å¥½åƒå¤§å®¶éƒ½çˆ±æ¯”è¾ƒè¿™å‡ ä¸ªæŒ‡æ ‡ï¼‰ã€‚ä»å®éªŒç»“æœä¸Šçœ‹ï¼Œæ— è®ºæ˜¯localizationè¿˜æ˜¯mappingéƒ½éå¸¸æœ‰ç«äº‰åŠ›ã€‚</p><p>ä»¤ç¬”è€…çœ¼å‰ä¸€äº®çš„æ˜¯è®ºæ–‡ä¸­elastic neural pointçš„è®¾è®¡ï¼Œé€šè¿‡è¿™ä¸€è®¾è®¡å®ç°çš„loop closureèƒ½å¤Ÿè°ƒæ•´åœºæ™¯ä¸­çš„neural pointï¼Œéå¸¸æƒŠè‰³ã€‚è¿™è¿˜æ˜¯ç¬”è€…ç¬¬ä¸€æ¬¡åœ¨NeRFã€3DGSçš„æ–¹æ³•ä¸­è§åˆ°å¯ä»¥è°ƒæ•´åœºæ™¯è¡¨ç¤ºï¼ˆæ¯”å¦‚MLPã€grid featureã€neural pointã€3DGSï¼‰çš„æ–¹æ³•ã€‚</p><blockquote><p>ç†è®ºä¸Šä¹Ÿå¯ä»¥è®©æ¯ä¸€å¸§å¯¹åº”ä¸€ä¸ªMLPï¼Œæˆ–è€…æ¯ä¸€å¸§å¯¹åº”ä¸€ä¸ªsubmapï¼Œä½†æ˜¯è¿™æ ·çš„æ–¹æ³•ç¬”è€…è§‰å¾—ä¸æ˜¯å¾ˆå¥½ã€‚</p></blockquote><p>è®ºæ–‡åœ¨Limitations and future workæåˆ°äº†å‡ ç‚¹ï¼š</p><ul><li>å¯ä»¥å¼•å…¥IMUæ¥å®ç°æ›´å‡†ç¡®ã€é«˜æ•ˆçš„SLAMç³»ç»Ÿï¼›</li><li>ç›®å‰PIN-SLAMä½¿ç”¨çš„æ˜¯å›ºå®šåˆ†è¾¨ç‡çš„neural pointï¼Œåç»­å¯ä»¥è€ƒè™‘åœ¨åœºæ™¯ä¸­è‡ªé€‚åº”çš„åˆ†å¸ƒå’Œç§»åŠ¨neural pointæ¥æé«˜é‡å»ºçš„è´¨é‡ï¼›</li><li>å¯ä»¥ä½¿ç”¨i-Kdtreeç­‰æ–¹æ³•ï¼Œåœ¨ä¸ä½¿ç”¨voxelçš„æƒ…å†µä¸‹å®ç°é«˜æ•ˆçš„æœ€è¿‘é‚»æœç´¢ï¼›</li><li>å¦å¤–ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘å€ŸåŠ©è¯­ä¹‰ä¿¡æ¯è¿›ä¸€æ­¥å¢å¼ºä½å§¿ä¼°è®¡å’Œå›ç¯æ£€æµ‹ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Neural Point SLAMå›é¡¾</title>
      <link href="2024/11/16/neural-point-slam/"/>
      <url>2024/11/16/neural-point-slam/</url>
      
        <content type="html"><![CDATA[<h1 id="Neural-Point-SLAMå›é¡¾"><a href="#Neural-Point-SLAMå›é¡¾" class="headerlink" title="Neural Point SLAMå›é¡¾"></a>Neural Point SLAMå›é¡¾</h1><h2 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p><a href="https://immortalqx.github.io/2024/11/11/neural-point-rendering">ä¸Šä¸€ç¯‡æ–‡ç« </a>ç¬”è€…å›é¡¾äº†Neural Point Renderingç›¸å…³çš„å·¥ä½œï¼Œè¿™ç¯‡æ–‡ç« ç¬”è€…å°†èšç„¦äºNeural Pointåœ¨SLAMä¸Šçš„ä¸€äº›åº”ç”¨ã€‚</p><p>åœ¨NeRFæ—¶ä»£å‡ºç°çš„iMAPã€NICE-SLAMã€Co-SLAMç­‰å·¥ä½œï¼Œä»–ä»¬çš„trackingåŸºæœ¬éƒ½æ˜¯æ¸²æŸ“å›¾åƒ-è®¡ç®—æŸå¤±-åå‘ä¼˜åŒ–ä½å§¿ï¼›å°½ç®¡ä¹Ÿæœ‰Orbeez-SLAMã€GO-SLAMç­‰å·¥ä½œï¼Œä½†ä»–ä»¬éƒ½å€ŸåŠ©äº†ORB-SLAMã€Droid-SLAMç­‰External Trackerï¼Œå¹¶ä¸æ˜¯åœ¨NeRFè¡¨ç¤ºçš„åœºæ™¯ä¹‹ä¸Šç›´æ¥åštrackingçš„ã€‚</p><p>è€Œåˆ°äº†3DGSæ—¶ä»£ï¼Œæˆ–è®¸æ˜¯å› ä¸ºç ”ç©¶æƒ¯æ€§ï¼Œæ—©æœŸçš„3DGS SLAMå·¥ä½œè¿˜æ˜¯æ²¿ç”¨äº†è€ä¸€å¥—çš„trackingæ–¹æ³•ï¼šæ¸²æŸ“å›¾åƒ-è®¡ç®—æŸå¤±-åå‘ä¼˜åŒ–ä½å§¿ã€‚</p><blockquote><p>æ˜¯ä¸æ˜¯NeRF SLAMåšä¸€åŠè½¬3DGSäº†ï¼Œå·çœ‹(/Ï‰ï¼¼*)â€¦â€¦â€¦ (/Ï‰â€¢ï¼¼*)</p></blockquote><p>è€Œåˆ°ç°åœ¨ç¬”è€…å†™è¿™ç¯‡æ–‡ç« ï¼Œä¹Ÿæ²¡æœ‰äº†è§£åˆ°å¤šå°‘ç›´æ¥åœ¨3DGSä¸Šè¿›è¡Œtrackingçš„SLAMå·¥ä½œã€‚å¦å¤–ï¼Œæ— è®ºæ˜¯NeRF SLAMè¿˜æ˜¯3DGS SLAMï¼Œç»å¤§éƒ¨åˆ†å·¥ä½œéƒ½æ˜¯é€šè¿‡å­åœ°å›¾æ‹¼æ¥æ¥å®ç°loop closureï¼Œæˆ–è€…åªæ˜¯é€šè¿‡ä½å§¿å›¾ä¼˜åŒ–(PGO)ç­‰æ–¹æ³•åœ¨å›ç¯æ—¶è°ƒæ•´äº†æ¯ä¸€å¸§çš„ä½å§¿ï¼Œå¹¶ä¸”éœ€è¦è¿›è¡Œé¢å¤–çš„è¿­ä»£ä¼˜åŒ–æ¥çŸ«æ­£åœ°å›¾ã€‚</p><blockquote><p>å¦‚æœæœ‰ç¬”è€…æ²¡æœ‰æ³¨æ„åˆ°çš„å·¥ä½œï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºåˆ†äº«ï¼ï¼ï¼</p><p>RGBD GS-ICP SLAMå¯ä»¥ç®—ä¸€ç¯‡åœ¨3DGSä¸Šè¿›è¡Œtrackingçš„å·¥ä½œï¼Œä½†ä»£ç å®ç°ä¸Šçœ‹ç€å¾ˆå¥‡æ€ªã€‚ã€‚ã€‚</p></blockquote><p><img src="/images/neural-point-slam/image-20241111205712720-1731733908093-1.png" alt="ã€ŠHow NeRFs and 3D Gaussian Splatting are Reshaping SLAM: a Surveyã€‹ä¸­çš„è¡¨æ ¼"></p><p>ä¸è¿‡ï¼Œè‡ªä»Point-NeRFç­‰å·¥ä½œå‡ºç°åï¼ŒåŸºäºNeural Pointçš„SLAMé€æ¸æ¶Œç°ã€‚Point-SLAMå°†Neural Pointçš„æ€è·¯å¼•å…¥SLAMé¢†åŸŸï¼Œè€ŒPoint-SLAMçš„ä½œè€…è¿›ä¸€æ­¥æå‡ºäº†åç»­å·¥ä½œâ€”â€”Loopy-SLAMï¼Œåœ¨Point-SLAMçš„åŸºç¡€ä¸Šå®ç°äº†åŸºäºå­åœ°å›¾æ‹¼æ¥çš„Loop Closureã€‚ä¹‹åPIN-SLAMåœ¨Neural Pointè¡¨ç¤ºåœºæ™¯çš„æ¡†æ¶ä¸‹ï¼Œå®ç°äº†æ— éœ€å­åœ°å›¾çš„Loop Closureã€‚</p><p>æ¥ä¸‹æ¥ç¬”è€…å°†ç€é‡ä»‹ç»è¿™ä¸‰ç¯‡å·¥ä½œã€‚</p><h2 id="Point-SLAM-Dense-Neural-Point-Cloud-based-SLAM-ICCV-2023"><a href="#Point-SLAM-Dense-Neural-Point-Cloud-based-SLAM-ICCV-2023" class="headerlink" title="Point-SLAM: Dense Neural Point Cloud-based SLAM (ICCV 2023)"></a>Point-SLAM: Dense Neural Point Cloud-based SLAM (ICCV 2023)</h2><p><img src="/images/neural-point-slam/image-20241113160839894-1731733908093-2.png"></p><p><strong>è®ºæ–‡æƒ³è¦è§£å†³çš„é—®é¢˜</strong>ï¼šCan point-based neural scene representations be used for tracking and mapping for real-time capable SLAM?</p><p><strong>è®ºæ–‡çš„è´¡çŒ®</strong>ï¼š</p><ul><li>We present Point-SLAM, a real-time capable dense RGBD SLAM approach which anchors neural features in a point cloud that grows iteratively in a data-driven manner during scene exploration. We demonstrate that the proposed neural point-based scene representation can be effectively used for both mapping and tracking.</li><li>We propose a dynamic point density strategy which allows for computational and memory efficiency gains and trade reconstruction accuracy against speed and memory.</li><li>Our approach shows clear benefits on a variety of datasets in terms of tracking, rendering and mapping accuracy.</li></ul><p><strong>è®ºæ–‡çš„Pipeline</strong>ï¼š</p><p><img src="/images/neural-point-slam/image-20241112210239564-1731733908093-3.png"></p><h3 id="Neural-Point-Cloud-Representation"><a href="#Neural-Point-Cloud-Representation" class="headerlink" title="Neural Point Cloud Representation"></a>Neural Point Cloud Representation</h3><p><strong>åœºæ™¯è¡¨ç¤º</strong>ï¼šåœºæ™¯è¢«è¡¨ç¤ºä¸ºneural point cloudï¼Œæ¯ä¸€ä¸ªneural pointåŒ…æ‹¬ä½ç½®ã€å‡ ä½•ç‰¹å¾ã€é¢œè‰²ç‰¹å¾ã€‚</p><p><img src="/images/neural-point-slam/image-20241112210614858-1731733908093-4.png"></p><p><strong>Point Adding Strategy</strong>ï¼š</p><ul><li>é‡‡æ ·é˜¶æ®µï¼šåœ¨å›¾åƒå¹³é¢ä¸Šå‡åŒ€é‡‡æ ·$X$ä¸ªåƒç´ ï¼Œå¹¶ä¸”åœ¨å…·æœ‰æœ€é«˜é¢œè‰²æ¢¯åº¦å¹…åº¦çš„å‰$10Y$ä¸ªåƒç´ ä¸­é‡‡æ ·$Y$ä¸ªåƒç´ ã€‚</li><li>åˆ¤æ–­æ˜¯å¦éœ€è¦æ·»åŠ ç‚¹ï¼šåˆ©ç”¨æ·±åº¦å›¾çš„ä¿¡æ¯ï¼Œå°†åƒç´ ç‚¹è½¬æ¢åˆ°ä¸‰ç»´ç©ºé—´ï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªç‚¹çš„åŠå¾„$r$å†…æŸ¥æ‰¾æ˜¯å¦æœ‰neural pointã€‚å¦‚æœæ²¡æœ‰neural pointï¼Œåˆ™éœ€è¦æ·»åŠ neural pointã€‚</li><li>æ·»åŠ æ–°çš„neural pointï¼šå¯¹äºåŠå¾„$r$å†…æ²¡æœ‰æŸ¥æ‰¾åˆ°neural pointçš„é‚£äº›åƒç´ ç‚¹ï¼Œéœ€è¦æ²¿ç€è¯¥åƒç´ çš„å°„çº¿æ·»åŠ 3ä¸ªneural pointï¼Œè¿™ä¸‰ä¸ªç‚¹ä»¥è¯¥åƒç´ ç‚¹çš„æ·±åº¦$D$ä¸ºä¸­å¿ƒï¼Œåç§»é‡ä¸º$(1-\rho)D$å’Œ$(1+\rho)D$ï¼Œå…¶ä¸­$\rho \in (0,1)$ï¼Œæ˜¯ä¸€ä¸ªè¶…å‚æ•°ï¼Œè¡¨ç¤ºæœŸæœ›æ·±åº¦å™ªå£°ã€‚</li><li>åˆå§‹åŒ–æ–°çš„neural pointï¼šä½¿ç”¨æ­£æ€åˆ†å¸ƒåˆå§‹åŒ–æ¯ä¸€ä¸ªneural pointçš„ç‰¹å¾å‘é‡ã€‚</li></ul><p>è¿™ä¸ªæ·»åŠ ç‚¹çš„ç­–ç•¥å…è®¸åœ¨ä¸æå‰çŸ¥é“åœºæ™¯è¾¹ç•Œçš„æƒ…å†µä¸‹è¿›è¡Œå»ºå›¾ï¼Œå¹¶ä¸”å¯ä»¥åœ¨åœºæ™¯æ¢ç´¢è¿‡ç¨‹ä¸­åŠ¨æ€åœ°è°ƒæ•´ç‰¹å¾ç‚¹çš„åˆ†å¸ƒï¼Œå³ä½¿æ˜¯ä¸å†è®¿é—®æ–°çš„åœºæ™¯éƒ¨åˆ†ï¼Œå®ƒä¹Ÿä¼šæ”¶æ•›åˆ°æœ‰é™çš„ç‚¹é›†ã€‚</p><p><strong>Dynamic Resolution</strong>ï¼š</p><p>ä¸ºäº†èŠ‚çœè®¡ç®—å’Œå†…å­˜èµ„æºï¼Œæ¯ä¸ªåŒºåŸŸç‚¹çš„æ•°é‡ã€å¯†åº¦éƒ½æ˜¯åŠ¨æ€è°ƒæ•´çš„ã€‚</p><p>é¢œè‰²æ¢¯åº¦æ¯”è¾ƒå¤§çš„åœ°æ–¹ï¼Œå¯èƒ½ä¿¡æ¯æ¯”è¾ƒä¸°å¯Œï¼Œå°±éœ€è¦æ›´å¤§çš„ç‚¹å¯†åº¦ï¼ŒPoint Adding Strategyçš„æœç´¢åŠå¾„å°±å¯ä»¥è®¾ç½®çš„å°ä¸€äº›ã€‚åè¿‡æ¥ï¼Œé¢œè‰²æ¢¯åº¦éå¸¸å°çš„åœ°æ–¹ï¼Œé‚£è¯´æ˜ä¿¡æ¯å¾ˆå°‘ï¼Œå¯ä»¥æ›´ä½çš„ç‚¹å¯†åº¦ï¼ŒPoint Adding Strategyçš„æœç´¢åŠå¾„å¯ä»¥æ›´å¤§ä¸€äº›ã€‚</p><p><img src="/images/neural-point-slam/image-20241112225654506-1731733908093-5.png"></p><h3 id="Rendering"><a href="#Rendering" class="headerlink" title="Rendering"></a>Rendering</h3><p><strong>è§£ç å™¨è®¾è®¡</strong>ï¼šPoint-SLAMå¸æ”¶äº†NICE-SLAMä¸­decoderçš„è®¾è®¡æ€è·¯ï¼Œä½¿ç”¨ä¸NICE-SLAMç›¸åŒç»“æ„çš„è§£ç å™¨ã€‚å…¶ä¸­geometry decoderè¡¨ç¤ºä¸º$h$ï¼Œå’ŒNICE-SLAMä¸€æ ·éƒ½æ˜¯é¢„è®­ç»ƒå¥½çš„ç½‘ç»œï¼Œç½‘ç»œå‚æ•°è¢«å›ºå®šä½ä¸å†ä¼˜åŒ–ï¼›è€Œcolor decoderè¡¨ç¤ºä¸º$g_\xi$ï¼Œå’ŒNICE-SLAMä¸€æ ·ï¼Œç½‘ç»œçš„å‚æ•°$\xi$æ˜¯éœ€è¦è®­ç»ƒçš„ã€‚</p><p><strong>é‡‡æ ·ç­–ç•¥</strong>ï¼šä¸NICE-SLAMé‡‡æ ·ç­–ç•¥ä¸åŒçš„æ˜¯ï¼ŒPoint-NeRFå¯¹äºæœ‰æ·±åº¦çš„åƒç´ ï¼Œåœ¨$(1-\rho)D$å’Œ$(1+\rho)D$ä¹‹é—´å‡åŒ€é‡‡æ ·5ä¸ªç‚¹ï¼Œè€Œå¯¹äºæ²¡æœ‰æ·±åº¦çš„åƒç´ ï¼Œåœ¨5cmå’Œ$1.2D_{max}$ä¹‹é—´é‡‡æ ·25ä¸ªç‚¹ã€‚</p><p><strong>Neural PointæŸ¥æ‰¾</strong>ï¼šå¯¹äºæ¯ä¸€ä¸ªé‡‡æ ·ç‚¹ï¼Œåœ¨åŠå¾„$2r$å†…æŸ¥æ‰¾neural pointï¼Œè‡³å°‘éœ€è¦æŸ¥æ‰¾åˆ°ä¸¤ä¸ªç‚¹ï¼Œå¦åˆ™è¯¥ç‚¹çš„å ç”¨ç‡ä¸º0ã€‚å¦‚æœå­˜åœ¨å¤šä¸ªç‚¹ï¼Œå°±åªå–æœ€è¿‘çš„8ä¸ªç‚¹æ¥è®¡ç®—ã€‚</p><p><strong>æ¸²æŸ“è¿‡ç¨‹</strong>ï¼šä¸NICE-SLAMã€Point-NeRFç­‰å·¥ä½œä¸€æ ·ï¼Œéƒ½æ˜¯é‡‡ç”¨ä½“æ¸²æŸ“å¾—åˆ°æ·±åº¦å’Œé¢œè‰²ã€‚</p><p><strong>ä¸Point-NeRFåœ¨æ¸²æŸ“ä¸Šçš„åŒºåˆ«</strong>ï¼šPoint-SLAMåƒNICE-SLAMä¸€æ ·ï¼Œè®¾è®¡äº†geometry featureå’Œcolor featureï¼Œè€ŒPoint-NeRFåªæœ‰color featureã€‚å¦å¤–ï¼ŒPoint-SLAMå¯¹color featureé‡‡ç”¨äº†â€œPer-point processingâ€çš„å¤„ç†ï¼Œè€Œgeometry featureæ²¡æœ‰ç»è¿‡è¿™ä¸ªå¤„ç†ã€‚</p><h3 id="Mapping-and-Tracking"><a href="#Mapping-and-Tracking" class="headerlink" title="Mapping and Tracking"></a>Mapping and Tracking</h3><p><strong>Mappingé˜¶æ®µ</strong>ï¼šåœ¨Mappingé˜¶æ®µï¼ŒPoint-SLAMåœ¨RGBDå¸§ä¸Šå‡åŒ€æ¸²æŸ“$M$ä¸ªåƒç´ ï¼Œå¹¶ä¸”ä½¿ç”¨å¦‚ä¸‹æ‰€ç¤ºçš„æŸå¤±å‡½æ•°ã€‚åœ¨æœ€å¼€å§‹çš„è¿­ä»£ä¸­ï¼ŒPoint-SLAMåªä½¿ç”¨æ·±åº¦é¡¹è¿›è¡Œä¼˜åŒ–ï¼Œä¹‹åå‰©ä¸‹çš„60%æ¬¡è¿­ä»£ä¸­æ‰ä¼šå¼•å…¥é¢œè‰²é¡¹ã€‚</p><p><img src="/images/neural-point-slam/image-20241113151534897-1731733908093-6.png"></p><p><strong>Trackingé˜¶æ®µ</strong>ï¼šPoint-SLAMåœ¨æ¯ä¸€å¸§ä¸­é‡‡æ ·$M_t$ä¸ªåƒç´ ï¼Œå¹¶ä¸”ä½¿ç”¨æ’é€Ÿè¿åŠ¨æ¨¡å‹æ¥åˆå§‹åŒ–ä½å§¿ã€‚trackingä½¿ç”¨çš„æŸå¤±å‡½æ•°ä¸ºï¼š</p><p><img src="/images/neural-point-slam/image-20241113151854777-1731733908093-7.png"></p><h3 id="Exposure-Compensation"><a href="#Exposure-Compensation" class="headerlink" title="Exposure Compensation"></a>Exposure Compensation</h3><p>å¯¹äºå¸§é—´æ›å…‰å˜åŒ–è¾ƒå¤§çš„åœºæ™¯ï¼Œè®ºæ–‡ä½¿ç”¨é¢å¤–çš„æ¨¡å—æ¥å‡å°‘ç›¸åº”åƒç´ ä¹‹é—´çš„è‰²å·®ã€‚</p><h3 id="å®éªŒéƒ¨åˆ†"><a href="#å®éªŒéƒ¨åˆ†" class="headerlink" title="å®éªŒéƒ¨åˆ†"></a>å®éªŒéƒ¨åˆ†</h3><blockquote><p>è®ºæ–‡å±•ç¤ºäº†éå¸¸å¤šçš„å®éªŒç»“æœï¼Œä¸‹é¢åªæˆªå–ä¸€éƒ¨åˆ†ã€‚</p></blockquote><p><img src="/images/neural-point-slam/image-20241113160505424-1731733908093-8.png"></p><p><img src="/images/neural-point-slam/image-20241113160526160-1731733908093-9.png"></p><p><img src="/images/neural-point-slam/image-20241113160601067-1731733908093-10.png"></p><p><img src="/images/neural-point-slam/image-20241113160540402-1731733908093-11.png"></p><p><img src="/images/neural-point-slam/image-20241113160627377-1731733908093-12.png"></p><blockquote><p>ä¸ºä»€ä¹ˆfr1/desk2å’Œfr1/roomï¼Œä¼ ç»Ÿçš„å‡ ä¸ªSLAMæ–¹æ³•éƒ½è·‘å¤±è´¥äº†ï¼Ÿï¼Ÿï¼Ÿ</p></blockquote><h3 id="å±€é™æ€§"><a href="#å±€é™æ€§" class="headerlink" title="å±€é™æ€§"></a>å±€é™æ€§</h3><ul><li><p>å¦‚æœå…è®¸å¯¹neural pointçš„ä½ç½®è¿›è¡ŒåŠ¨æ€ä¼˜åŒ–ï¼Œå¯ä»¥æ›´å¥½çš„å¤„ç†æ·±åº¦å™ªå£°ã€‚</p><blockquote><p>ä¸è¿‡3DGSä¼˜åŒ–äº†æ¯ä¸€ä¸ªé«˜æ–¯çš„ä½ç½®ï¼Œä¹Ÿè¿˜æ˜¯æœ‰æ¯”è¾ƒä¸¥é‡çš„å™ªå£°ã€‚</p></blockquote></li><li><p>ç‚¹å¯†åº¦çš„å±€éƒ¨è‡ªé€‚åº”åŸºäºç®€å•çš„å¯å‘å¼æ–¹æ³•ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œè¿™ä¸€è¿‡ç¨‹å¯ä»¥é€šè¿‡å­¦ä¹ çš„æ–¹æ³•æ¥å®ç°ã€‚</p></li><li><p>å¯¹è¿åŠ¨æ¨¡ç³Šå’Œé«˜å…‰åå°„æ¯”è¾ƒæ•æ„Ÿã€‚</p></li></ul><h2 id="Loopy-SLAM-Dense-Neural-SLAM-with-Loop-Closures-CVPR-2024"><a href="#Loopy-SLAM-Dense-Neural-SLAM-with-Loop-Closures-CVPR-2024" class="headerlink" title="Loopy-SLAM: Dense Neural SLAM with Loop Closures (CVPR 2024)"></a>Loopy-SLAM: Dense Neural SLAM with Loop Closures (CVPR 2024)</h2><p><img src="/images/neural-point-slam/image-20241113161118522-1731733908093-13.png"></p><p><strong>è®ºæ–‡æåˆ°çš„è§‚ç‚¹</strong>ï¼š</p><p>ä½œè€…è®¤ä¸ºSLAMå¯ä»¥åˆ†ä¸ºè€¦åˆå’Œè§£è€¦åˆçš„æ–¹æ³•ï¼Œå…¶ä¸­<strong>è€¦åˆçš„æ–¹æ³•æŒ‡çš„æ˜¯ä½¿ç”¨ç›¸åŒçš„åœºæ™¯è¡¨ç¤ºæ¥è¿›è¡Œtrackingå’Œmappingï¼Œè§£è€¦çš„æ–¹æ³•å¯¹æ¯ä¸ªä»»åŠ¡éƒ½ä½¿ç”¨ç‹¬ç«‹çš„æ¡†æ¶</strong>ã€‚</p><ul><li><p>ç›®å‰è§£è€¦çš„æ–¹æ³•èƒ½å¤Ÿå®ç°æ›´å¥½çš„è·Ÿè¸ªç²¾åº¦ï¼Œä½†æ˜¯ä¼šäº§ç”Ÿä¸æœŸæœ›çš„æ•°æ®å†—ä½™å’Œç‹¬ç«‹æ€§ã€‚è€¦åˆæ–¹æ³•ä¸­ï¼Œé™¤äº†MIPS_Fusionä¹‹å¤–ï¼Œå…¶ä»–æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯å®ç°çš„frame-to-model trackingï¼Œè¿™ä¼šå¯¼è‡´é¢å¯¹ç°å®åœºæ™¯ä¸­å¸¦æœ‰å™ªå£°çš„æ•°æ®ï¼Œä¼°è®¡çš„ä½å§¿ä¼šäº§ç”Ÿæ˜¾è‘—çš„æ¼‚ç§»ã€‚</p><blockquote><p>ä½†æ˜¯frame-to-frameä¸åº”è¯¥æ›´å®¹æ˜“æ¼‚ç§»ï¼Ÿåªä¸è¿‡frame-to-modelå¤ªå®¹æ˜“å—åˆ°å™ªå£°å½±å“äº†ï¼Œæ¯•ç«Ÿmodelæ„å»ºçš„ä¸å¥½ï¼Œæ–°æ¥çš„frameä¼°è®¡çš„ä½å§¿ä¹Ÿä¸å¥½ï¼Œåˆå¯¼è‡´æ›´æ–°ä¹‹åçš„modelæ›´å·®äº†ï¼Œå¼€å§‹æ»šé›ªçƒäº†ã€‚</p></blockquote><p>ä½œè€…æåˆ°çš„è§£è€¦çš„æ–¹æ³•ï¼š</p><ul><li>Orbeez-slam</li><li>Newton: Neural view-centric mapping for on-the-fly large-scale slam.</li><li>NeRF-SLAM: Real-Time Dense Monocular SLAM with Neural Radiance Fields</li><li>Go-slam: Global optimization for consistent 3d instant reconstruction.</li></ul></li><li><p>ä½œè€…è®¤ä¸ºtrackingå’Œmappingæ˜¯è€¦åˆçš„ä»»åŠ¡ï¼Œå¯ä»¥ç”¨ç›¸åŒçš„åœºæ™¯è¡¨ç¤ºã€‚ä½†æ˜¯è§£è€¦æ–¹æ³•åŸºæœ¬éƒ½ä½¿ç”¨å¤šåˆ†è¾¨ç‡å“ˆå¸Œç½‘æ ¼ï¼Œè¿™æ ·ä¸å®¹æ˜“è¿›è¡Œåœ°å›¾æ ¡æ­£ï¼Œè€Œ<strong>åŸºäºç‚¹çš„è¡¨ç¤ºæ–¹æ³•ç‰¹åˆ«é€‚åˆè¿›è¡Œåœ°å›¾æ ¡æ­£</strong>ã€‚ï¼ˆè®ºæ–‡çš„motivationï¼‰</p><p>ä½œè€…æåˆ°çš„è€¦åˆçš„æ–¹æ³•ï¼š</p><ul><li>Eslam: Efficient dense slam system based on hybrid representation of signed distance fields</li><li>Point-slam: Dense neural point cloud-based slam.</li><li>iMAP: Implicit Mapping and Positioning in Real-Time.</li><li>Co-slam: Joint coordinate and sparse parametric encodings for neural real-time slam</li><li>Vox-fusion: Dense tracking and mapping with voxel-based neural implicit representation.</li><li>Nice-slam: Neural implicit scalable encoding for slam.</li></ul></li></ul><p><strong>è®ºæ–‡çš„è´¡çŒ®</strong>ï¼š</p><ul><li>We propose Loopy-SLAM, a dense RGBD SLAM approach which anchors neural features in point cloud submaps that grow iteratively in a data-driven manner during scene exploration. We dynamically create submaps depending on the camera motion and progressively build a pose graph between the submap keyframes. Global place recognition is used to detect loop closures online and to globally align the trajectory and the submaps with simple and efficient rigid corrections directly on the scene representation.</li><li>We propose a direct way of implementing loop closure for dense neural SLAM that does not require any gradient updates of the scene representation or reintegration strategies, contrary to previous works.</li><li>Traditionally, rigid submap registration may create visible seams in the overlapping regions. Our approach based on neural point clouds avoids this and we apply feature refinement of color and geometry at the end of the trajectory capture. We further introduce a feature fusion strategy of the submaps in the overlapping regions to avoid excessive memory usage and to improve the rendering performance.</li></ul><p><strong>è®ºæ–‡çš„Pipeline</strong>ï¼š</p><p><img src="/images/neural-point-slam/image-20241114154645443-1731733908093-14.png"></p><h3 id="Neural-Point-Cloud-based-SLAM"><a href="#Neural-Point-Cloud-based-SLAM" class="headerlink" title="Neural Point Cloud-based SLAM"></a>Neural Point Cloud-based SLAM</h3><p>è¿™éƒ¨åˆ†åŸºæœ¬ä¸Point-SLAMæ˜¯ä¸€æ ·çš„ï¼Œå¤šäº†å­åœ°å›¾æ„å»ºçš„å†…å®¹ã€‚</p><p>å­åœ°å›¾çš„ç¬¬ä¸€å¸§ä½œä¸ºglobal keyframeï¼Œåœ¨å½“å‰å­åœ°å›¾ä¸­ï¼Œå½“å‰å¸§ä¸å¯¹åº”çš„global keyframeçš„æ—‹è½¬è§’åº¦æˆ–è€…ç›¸å¯¹å¹³ç§»è¶…è¿‡è®¾å®šçš„é˜ˆå€¼ï¼Œå°±ä¼šåˆ›å»ºæ–°çš„å­åœ°å›¾ã€‚</p><p>åœ¨æ¯ä¸ªå­åœ°å›¾ä¸­è¿˜ä¼šé—´éš”ä¸€å®šå¸§é€‰æ‹©ä¸€æ¬¡local keyframeï¼Œç”¨äºä¼˜åŒ–å­åœ°å›¾ã€‚ä½†æ˜¯å½“æ–°çš„å­åœ°å›¾è¢«åˆå§‹åŒ–æ—¶ï¼Œè¿™äº›local keyframeä¼šè¢«åˆ é™¤ã€‚</p><h3 id="Loop-Closure-and-Refinement"><a href="#Loop-Closure-and-Refinement" class="headerlink" title="Loop Closure and Refinement"></a>Loop Closure and Refinement</h3><p>ä¸MIPS-Fusionç›¸æ¯”çš„è¯ï¼ŒLoopy-SLAMçš„loop closureæ¯”è¾ƒåŠŸåˆ©ï¼Œæ¯æ¬¡å¼€å§‹æ–°çš„submapå°±æ£€æµ‹ä¸€æ¬¡å›ç¯ã€‚MIPS-Fusionæ˜¯å¼€å¯æ–°çš„submapä¹‹åï¼Œå¦‚æœå†å›åˆ°ä¹‹å‰submapçš„subvolumeä¸­æ‰ä¼šæ£€æµ‹ï¼Œè€Œä¸”è¿˜æœ‰é¢å¤–çš„æ¡ä»¶ã€‚</p><p><strong>Global Place Recognition</strong>ï¼šæ¯ä¸ªå…¨å±€å…³é”®å¸§éƒ½è¢«æ·»åŠ åˆ°è§†è§‰è¯è¢‹Bowæ•°æ®åº“ä¸­ç”¨äºå…¨å±€ä½ç½®è¯†åˆ«ã€‚è¿™é‡Œè®ºæ–‡cueäº†ä¸€ä¸‹MIPS-Fusionï¼Œä½œè€…è®¤ä¸ºMIPS-Fusionè¿™ç§é€šè¿‡é‡å çš„submapå»æ£€æµ‹å›ç¯ï¼Œåªé€‚åˆè¾ƒå°æ¼‚ç§»çš„æ ¡æ­£ã€‚</p><p><strong>Pose Graph Optimization</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹$T_s \in SE(3)$è¡¨ç¤ºglobal keyframeåœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹çš„ä½å§¿çš„correctionã€‚å§¿æ€å›¾ä¸­åŒ…æ‹¬äº†ä¸¤ç§è¾¹ï¼Œå…¶ä¸­odometry edgeè¿æ¥äº†ç›¸é‚»å­åœ°å›¾çš„global keyframeï¼Œå¹¶ä¸”ä½¿ç”¨å•ä½çŸ©é˜µä½œä¸ºçº¦æŸï¼›loop edgeè¿æ¥ä¸ç›¸é‚»çš„å­åœ°å›¾çš„global keyframeï¼Œæ¯æ¬¡å®Œæˆä¸€ä¸ªå­åœ°å›¾å°±æŸ¥è¯¢è¯è¢‹ï¼ˆBowï¼‰æ•°æ®åº“ï¼Œæ ¹æ®æŸ¥è¯¢ç»“æœæ·»åŠ loop edgeã€‚PGOæœ€ç»ˆçš„è¾“å‡ºæ˜¯å¯¹global keyframeå§¿æ€çš„ä¸€ç»„åˆšæ€§æ ¡æ­£å˜æ¢$T$ã€‚</p><p><strong>Loop Edge Constraints</strong>ï¼šå¯¹äºå­åœ°å›¾$P^s$å’Œ$P^t$ä¹‹é—´çš„loop edgeï¼Œéœ€è¦è®¡ç®—çº¦æŸæ¡ä»¶$T_{st}$ã€‚è®ºæ–‡æåˆ°ï¼Œç›´æ¥ä½¿ç”¨å­åœ°å›¾ä¸­çš„neural point cloudæ˜¯ä¸ç¨³å®šçš„ï¼Œæœ‰ä¸¤ä¸ªåŸå› ï¼š</p><ol><li>å¯†é›†è¡¨é¢é…å‡†æ–¹æ³•éœ€è¦åœ¨è¡¨é¢å‡åŒ€é‡‡æ ·ï¼Œä½†æ˜¯å­åœ°å›¾çš„åˆ†è¾¨ç‡æ˜¯åŠ¨æ€çš„ï¼›</li><li>å­åœ°å›¾ä¸­çš„é”šå®šç‚¹ï¼ˆåº”è¯¥å°±æ˜¯åœ°å›¾ä¸­çš„neural pointï¼‰æ¥è‡ªå•ä¸ªæ·±åº¦è§‚æµ‹ï¼Œå¯èƒ½ä¼šå­˜åœ¨å™ªå£°ï¼Œä»è€Œå½±å“é…å‡†çš„ç»“æœã€‚</li></ol><p>å› æ­¤ï¼Œè®ºæ–‡ä½¿ç”¨ç”±ç²—åˆ°ç²¾çš„æ–¹æ³•æ¥å¯¹é½ä¸¤ä¸ªå­åœ°å›¾ï¼Œä¸ºäº†å‡è½»ä¸Šé¢æåˆ°çš„é—®é¢˜ï¼Œè®ºæ–‡é€šè¿‡volumetric TSDF Fusionæ¥æ•´åˆä¸å­åœ°å›¾ç›¸å…³è”çš„æ‰€æœ‰æ·±åº¦å¸§ï¼Œå¹¶é€šè¿‡marching cubesæå–è¡¨é¢ï¼Œåœ¨è¡¨é¢ä¸Šå‡åŒ€é‡‡æ ·å¾—åˆ°æ–°çš„ç‚¹äº‘$S^s$å’Œ$S^t$ã€‚</p><p>ç²—å¯¹é½é˜¶æ®µï¼Œè®ºæ–‡ä½¿ç”¨Rusuç­‰äººï¼ˆFast point feature histograms (fpfh) for 3d registrationï¼‰çš„å…¨å±€é…å‡†æ–¹æ³•ã€‚</p><p>ç²¾é…å‡†é˜¶æ®µï¼Œè®ºæ–‡ä½¿ç”¨ICPåœ¨å®Œæ•´åˆ†è¾¨ç‡çš„ç‚¹äº‘ä¸Šè¿›è¡Œé…å‡†ã€‚</p><p><strong>Feature Fusion and Refinement</strong>ï¼šåœ¨Trackingç»“æŸä¹‹åï¼ŒLoopy SLAMä¼šå°†æ‰€æœ‰å­åœ°å›¾è¿æ¥åˆ°ä¸€èµ·ç»„æˆä¸€ä¸ªglobal neural point cloudã€‚è¿™ä¸ªè¿‡ç¨‹é¦–å…ˆåœ¨é‡å çš„å­åœ°å›¾åŒºåŸŸè¿›è¡Œç‰¹å¾èåˆæ¥å‹ç¼©æ¨¡å‹ï¼Œç”±äºLoopy SLAMæ˜¯åŸºäºPoint SLAMçš„å·¥ä½œï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯feature+decoderçš„ç»“æ„ï¼Œè¿™é‡Œè®ºæ–‡é€‰æ‹©çš„æ˜¯ç‰¹å¾èåˆä¹‹åå›ºå®šdecoderï¼Œç„¶åæŠŠcolorå’Œgeometry featureå†è¿›è¡Œä¼˜åŒ–ã€‚</p><h3 id="å®éªŒéƒ¨åˆ†-1"><a href="#å®éªŒéƒ¨åˆ†-1" class="headerlink" title="å®éªŒéƒ¨åˆ†"></a>å®éªŒéƒ¨åˆ†</h3><p>è®ºæ–‡ä¸»è¦åœ¨Replicaã€TUM-RGBDã€ScanNetä¸Šåšäº†å®éªŒã€‚</p><p>Trackingçš„ç»“æœï¼š</p><p><img src="/images/neural-point-slam/image-20241115160846971-1731733908093-15.png"></p><p><img src="/images/neural-point-slam/image-20241115160900284-1731733908093-16.png"></p><p><img src="/images/neural-point-slam/image-20241115160948491-1731733908093-17.png"></p><p>Renderingå’ŒReconstructionçš„ç»“æœï¼š</p><p><img src="/images/neural-point-slam/image-20241115161116456-1731733908093-18.png"></p><p><img src="/images/neural-point-slam/image-20241115161139043-1731733908093-19.png"></p><p><img src="/images/neural-point-slam/image-20241115161202262-1731733908093-20.png"></p><p>è¿è¡Œæ—¶é—´ã€å†…å­˜å ç”¨çš„ç»“æœï¼š</p><p><img src="/images/neural-point-slam/image-20241115161255244-1731733908093-21.png"></p><p>åœºæ™¯ä¸­ç‚¹çš„æ•°é‡ï¼š</p><p><img src="/images/neural-point-slam/image-20241115161410425-1731733908093-22.png"></p><h3 id="å±€é™æ€§-1"><a href="#å±€é™æ€§-1" class="headerlink" title="å±€é™æ€§"></a>å±€é™æ€§</h3><p>ä¸‹é¢æ˜¯è®ºæ–‡æåˆ°çš„å±€é™æ€§ï¼š</p><ul><li><p>å¯ä»¥ç»“åˆä½¿ç”¨frame-to-modelå’Œframe-to-frame queuesçš„ç»„åˆæ¥æ„å»ºæ›´å¥å£®çš„trackerï¼›</p><blockquote><p>ç±»ä¼¼äºæ„å»ºlocal mapï¼Œå®ç°frame-to-local modelï¼Ÿ</p></blockquote></li><li><p>loopy-slamåªåˆ©ç”¨äº†3Dç‚¹ç‰¹å¾ï¼Œå…¶å®è¿˜å¯ä»¥åˆ©ç”¨å…³è”å…³é”®å¸§çš„å›¾åƒç‰¹å¾ï¼Œä»è€Œå®ç°æ›´é²æ£’æ›´å¿«é€Ÿçš„é…å‡†ï¼›</p></li><li><p>ä½ç½®è¯†åˆ«å¯ä»¥é€šè¿‡å­¦ä¹ çš„æ–¹æ³•æ¥æå‡ï¼›</p></li><li><p>loopy-slamæ²¡æœ‰å®ç°relocalizationã€‚</p><blockquote><p>relocalizationæŒ‡çš„æ˜¯trackingå¤±è´¥çš„æ—¶å€™ï¼Œé‡æ–°å®šä½ç›¸æœºæ‰€åœ¨çš„ä½ç½®ï¼Œæ¢å¤trackingã€‚</p></blockquote></li></ul><p>ä¸‹é¢æ˜¯ç¬”è€…è®¤ä¸ºçš„å±€é™æ€§ï¼š</p><ul><li>æ²¡æœ‰åœ¨æ›´å¤§çš„åœºæ™¯ä¸­éªŒè¯loop closureçš„æœ‰æ•ˆæ€§ï¼Œæ¯”å¦‚TUM-RGBD fr3æœ‰ä¸¤ä¸ªä¸“é—¨ç”¨äºå›ç¯æ£€æµ‹çš„åœºæ™¯ï¼›</li><li>è¿˜æ˜¯åŸºäºå­åœ°å›¾æ‹¼æ¥çš„æ€è·¯å®ç°çš„loop closureï¼Œä¸èƒ½å¤Ÿè°ƒæ•´å­åœ°å›¾ä¸­neural pointä¹‹é—´çš„ç»“æ„ã€‚</li></ul><h2 id="PIN-SLAM-LiDAR-SLAM-Using-a-Point-Based-Implicit-Neural-Representation-for-Achieving-Global-Map-Consistency-TRO-2024"><a href="#PIN-SLAM-LiDAR-SLAM-Using-a-Point-Based-Implicit-Neural-Representation-for-Achieving-Global-Map-Consistency-TRO-2024" class="headerlink" title="PIN-SLAM: LiDAR SLAM Using a Point-Based Implicit Neural Representation for Achieving Global Map Consistency (TRO 2024)"></a>PIN-SLAM: LiDAR SLAM Using a Point-Based Implicit Neural Representation for Achieving Global Map Consistency (TRO 2024)</h2><p><img src="/images/neural-point-slam/image-20241115195333282-1731733908093-23.png"></p><p><strong>è®ºæ–‡æƒ³è¦è§£å†³çš„é—®é¢˜</strong>ï¼šThese SLAM approaches <strong>lack support for direct loop closure corrections</strong> and are <strong>not able to build globally consistent maps of larger scenes</strong>. This is mainly due to the usage of regular grid-based local feature embeddings, which are not elastic and resilient to loop corrections.</p><p><strong>è®ºæ–‡ä¸ºä»€ä¹ˆé€‰æ‹©neural pointè¡¨ç¤ºåœºæ™¯</strong>ï¼šWe opt to use a neural point-based implicit representation, which has two main advantages over grid-based representations: <strong>the flexibility of spatial distribution and the elasticity for transformations</strong>. Recent work (Point-SLAM) only makes use of the first advantage for neural RGB-D SLAM at the cost of scalability and inefficient neighborhood querying. Instead, we exploit the second and more important advantage to build a globally consistentmap that can be corrected while online mapping after closing a loop, which is essential for large-scale LiDAR-based SLAM.</p><p>è®ºæ–‡åœ¨Introductionæåˆ°ï¼ŒMappingéƒ¨åˆ†ä¸»è¦æ˜¯åŸºäºä¹‹å‰çš„å·¥ä½œSHINE-Mappingï¼Œè€ŒOdometryéƒ¨åˆ†æ˜¯æ‰©å±•äº†ä¹‹å‰çš„å·¥ä½œLocNDFã€‚</p><blockquote><p>å·¥ä½œæ˜¯å»¶ç»­çš„ï¼Œéå¸¸æ‰å®ï¼Œä»¤äººç¾¡æ…•ã€‚</p></blockquote><p><strong>è®ºæ–‡æå‡ºäº†å››ä¸ªkey claims</strong>ï¼š</p><ol><li>Our SLAM system achieves <strong>localization accuracy better or on par with state-of-the-art</strong> LiDAR odometry/SLAM approaches and is more accurate than recent implicit neural SLAM methods on various datasets using different range sensors.</li><li>Our method can conduct <strong>large-scale globally consistent mapping with loop closure</strong> thanks to the elastic neural point representation.</li><li>Our map representation is <strong>more compact than the previous counterparts</strong> and <strong>can be used to reconstruct accurate and complete meshes at an arbitrary resolution</strong>.</li><li>Our correspondence-free scan-to-implicit map registration and the efficient neural point indexing by voxel hashing enable our algorithm to <strong>run at the sensor frame rate on a single NVIDIA A4000</strong> graphics processing unit (GPU).</li></ol><p><strong>è®ºæ–‡å¯¹åŸºäºSubmapçš„æ–¹æ³•çš„è¯„ä»·</strong>ï¼šThe submap-based methods accumulate the observations as a submap and assume the submap is a locally defined rigid body. The pseudoglobal consistency is maintained by optimizing a graph linking submaps and their associated poses through submap-to-submap registrations. The usage of submaps decreases the number of nodes and edges in PGO, thus saving computational effort. However, these methods have issues of ambiguity in the overlapping region of the adjacent submaps and determining appropriate criteria for submap division to balance the rigidity and efficiency.</p><p><strong>è®ºæ–‡çš„Pipeline</strong>ï¼š</p><p><img src="/images/neural-point-slam/image-20241115205159958-1731733908093-24.png"></p><p>è®ºæ–‡å°†ä»–ä»¬çš„æ–¹æ³•åˆ†æˆ5ä¸ªéƒ¨åˆ†ï¼š</p><ol><li><strong>Preprocessing</strong>ï¼šå¯¹äºè¾“å…¥ç‚¹äº‘$P$ï¼Œé€šè¿‡ä½“ç´ ä¸‹é‡‡æ ·åˆ°ç”¨äºregistrationçš„ç‚¹äº‘$P_r$å’Œç”¨äºmappingçš„ç‚¹äº‘$P_m$ï¼›</li><li><strong>Odometry</strong>ï¼šé€šè¿‡å°†ç‚¹äº‘$P_r$ä¸local map $M_l$çš„implicit SDFè¿›è¡Œé…å‡†æ¥ä¼°è®¡å…¨å±€çš„ä½å§¿$T_{WC_t}$ï¼Œå¹¶å°†å‰åä¸¤å¸§çš„å˜æ¢$T_{C_{t-1}C_t}$ä½œä¸ºä¸€æ¡è¾¹æ·»åŠ åˆ°Pose Graph $G$ä¸­ã€‚</li><li><strong>Mapping</strong>ï¼šæ ¹æ®åœ°å›¾$M$è¿‡æ»¤æ‰ç”¨äºmappingçš„ç‚¹äº‘$P_m$ä¸­çš„åŠ¨æ€ç‚¹ï¼Œå¹¶æ²¿ç€ä»ä¼ æ„Ÿå™¨åˆ°$P_m$ä¸­æ¯ä¸ªç‚¹çš„å°„çº¿è¿›è¡Œé‡‡æ ·ï¼Œå¾—åˆ°è®­ç»ƒæ ·æœ¬$D$ï¼Œå¹¶ä½¿ç”¨åœ¨Odometryä¸­è®¡ç®—çš„ä½å§¿$T_{WC_t}$å°†å…¶è½¬æ¢åˆ°ä¸–ç•Œåæ ‡ç³»ä¸­ã€‚ä½¿ç”¨é è¿‘åœºæ™¯è¡¨é¢çš„æ ·æœ¬$D_s \subset D$æ¥åˆå§‹åŒ–æ–°çš„neural pointï¼Œå¹¶ä¸”å°†ä»–ä»¬é™„åŠ åˆ°åœ°å›¾$M$ä¸Šï¼Œå¹¶ä¸”é‡ç½®local map $M_l$ï¼Œè®©å…¶ä»¥å½“å‰ä½ç½®$T_{WC_t}$ä¸ºä¸­å¿ƒã€‚ä½¿ç”¨é‡‡æ ·çš„ç‚¹$D_s$æ¥æ›´æ–°è®­ç»ƒæ ·æœ¬æ± $D_p$ï¼Œå¹¶ä¸”ä½¿ç”¨$D_p$å’ŒSDFç›‘ç£æ¥ä¼˜åŒ–local map $M_l$ä¸­çš„neural point featureã€‚æœ€åå°†æ›´æ–°ä¹‹åçš„local map $M_l$åˆ†é…å›global map $M$ä¸­ã€‚</li><li><strong>Loop closure detection</strong>ï¼šé€šè¿‡local map $M_l$ç”Ÿæˆä¸€ä¸ªæœ¬åœ°æåæ ‡ä¸Šä¸‹æ–‡æè¿°ç¬¦$U_t$ã€‚ä¹‹åé€šè¿‡æ¯”è¾ƒå½“å‰å¸§å’Œå€™é€‰å¸§æè¿°ç¬¦ä¹‹é—´çš„ç‰¹å¾è·ç¦»æ¥æœç´¢æ½œåœ¨çš„loop closureã€‚ä¸€æ—¦æ£€æµ‹åˆ°å½“å‰å¸§$C_t$å’Œå€™é€‰å¸§$C_k$ä¹‹é—´çš„å­˜åœ¨é—­ç¯ï¼Œå°±é€šè¿‡å°†å½“å‰å¸§ç‚¹äº‘$P_r$å’Œä»¥å€™é€‰å¸§ä½ç½®$t_{WC_k}$ä¸ºä¸­å¿ƒçš„local map $M_l$è¿›è¡Œé…å‡†ï¼Œæ¥éªŒè¯æ˜¯å¦çœŸçš„å­˜åœ¨é—­ç¯ã€‚å¦‚æœé…å‡†æˆåŠŸï¼Œå°±å°†é…å‡†äº§ç”Ÿçš„å˜æ¢$T_{C_kC_t}$ä½œä¸ºæ–°çš„è¾¹æ·»åŠ åˆ°Pose Graph $G$ä¸­ã€‚</li><li><strong>Pose graph optimization</strong>ï¼šåŠ å…¥loop closure edgeä¹‹åï¼Œå¯¹pose graph $G$è¿›è¡Œä¼˜åŒ–ã€‚ä¼˜åŒ–ä¹‹åå¯¹global map $M$ä¸­æ¯ä¸ªneural pointçš„ä½ç½®å’Œæ–¹å‘åŠå…¶å…³è”å¸§è¿›è¡Œå˜æ¢ï¼Œä»¥ä¿è¯å…¨å±€ä¸€è‡´æ€§ã€‚åœ¨å®Œæˆloop correctionä¹‹åï¼Œå¯¹è®­ç»ƒæ ·æœ¬æ± $D_p$è¿›è¡Œå˜æ¢ï¼Œå¹¶ä¸”é‡ç½®local map $M_l$ã€‚</li></ol><blockquote><p>PIN-SLAMçš„å†…å®¹éå¸¸å¤šï¼Œå¯ä»¥ç§»æ­¥<a href="https://immortalqx.github.io/2024/11/21/paper-reading-pin-slam">è¿™ç¯‡æ–‡ç« </a>ã€‚</p></blockquote><h2 id="æ€»ç»“-amp-è®¨è®º"><a href="#æ€»ç»“-amp-è®¨è®º" class="headerlink" title="æ€»ç»“&amp;è®¨è®º"></a>æ€»ç»“&amp;è®¨è®º</h2><p>åœ¨PIN-SLAMå‡ºæ¥ä¹‹å‰ï¼Œç¬”è€…ä¸€ç›´è®¤ä¸ºä¸NeRFã€Neural Pointç›¸æ¯”ï¼Œ3DGSæ‰æ˜¯æœ€â€œå‡ ä½•â€çš„è¡¨ç¤ºæ–¹æ³•ï¼Œæ¯•ç«Ÿ3DGSæ˜¾ç¤ºçš„ç»™å‡ºäº†ç‚¹äº‘ï¼Œå°½ç®¡è¿™ä¸ªç‚¹äº‘æœ‰å¾ˆå¤šçš„å™ªå£°ã€‚</p><p>è€Œå½“æ—¶ä¸€äº›neural pointçš„å·¥ä½œï¼Œæ¯”å¦‚Point-NeRFè®ºæ–‡ä¸­è¯´â€œwe find that directly optimizing the location of the existing points makes the training unstable and cannot fill the large holesâ€ï¼Œç¬”è€…ä¾¿è®¤ä¸ºneural pointæ•ˆæœå¥½ä¸»è¦æ˜¯å› ä¸ºfeature + decoderè¿™ä¸€å¥—æµç¨‹çš„å·®å€¼èƒ½åŠ›å¥½ï¼Œä»¥åŠneural pointä¹Ÿé¿å…äº†åœ¨ç©ºç™½åŒºåŸŸé‡‡æ ·ã€‚è€Œneural pointçš„ä½ç½®å‡ ä¹æ— æ³•ä¼˜åŒ–ï¼Œç›´æ¥ä½¿ç”¨è¾“å…¥çš„ç‚¹äº‘ï¼Œå¹¶ä¸”é€šè¿‡ä¸€äº›ç®€å•çš„åŠ å‰ªæç­–ç•¥æ·»åŠ å’Œåˆ é™¤ç‚¹ï¼Œé‚£â€œå‡ ä½•â€è‚¯å®šæ˜¯å¾ˆå¥½çš„ï¼Œä¸è¿‡æ€ä¹ˆåˆ©ç”¨è¿™ä¸€ç‚¹æ˜¯ä¸ªéš¾è§£å†³çš„é—®é¢˜ã€‚</p><p>åœ¨Point-SLAMå’ŒLoopy-SLAMä¸­ï¼Œneural pointæ˜¯ä»RGB-Dè¾“å…¥å¾—åˆ°çš„ï¼Œä½†æ˜¯å®ƒä»¬æ²¡æœ‰ç”¨ä¼ ç»Ÿçš„ç‚¹äº‘é…å‡†æ–¹æ³•å®ç°trackingï¼Œè€Œæ˜¯æ¸²æŸ“å›¾åƒ-è®¡ç®—æŸå¤±-åå‘ä¼˜åŒ–ä½å§¿ï¼Œå…¶ä¸­Loopy-SLAMçš„loop closureä¹Ÿè¿˜æ˜¯é€šè¿‡å­åœ°å›¾çš„æ–¹å¼å®ç°çš„ï¼Œä¸ä¹‹å‰ä¸€äº›åŸºäºfeature gridçš„nerf slamæ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ï¼Œå¹¶æ²¡æœ‰åˆ©ç”¨åˆ°neural pointåœ¨å‡ ä½•ä¸Šçš„ä¼˜ç‚¹ã€‚</p><p>è€ŒPIN-SLAMå¯¹neural pointçš„å¼€å‘å¾ˆæ·±å…¥ï¼Œä¸ä½†å®ç°äº†åœ¨neural pointä¸Šè¿›è¡Œtrackingï¼Œä¹Ÿå®ç°äº†ä¸ä½¿ç”¨å­åœ°å›¾çš„loop closureï¼Œå·¥ä½œåšå¾—éå¸¸å®Œæ•´ã€‚PIN-SLAMä¸»è¦æ˜¯é¢å‘lidarçš„ï¼Œä¸è¿‡ä¹Ÿæ‰©å±•åˆ°äº†RGB-Dçš„è¾“å…¥ä¸Šï¼Œè®ºæ–‡çš„å®éªŒéƒ¨åˆ†å±•ç¤ºäº†åœ¨Replicaæ•°æ®é›†ä¸Šä¸ä¸€ä¼—RGB-D NeRF SLAMæ–¹æ³•çš„å¯¹æ¯”ï¼Œä½å§¿ç²¾åº¦é¥é¥é¢†å…ˆã€‚</p><p>ç¬”è€…è®¤ä¸ºç§‘ç ”åˆ›æ–°ä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œè§£å†³é—®é¢˜åº”è¯¥å»ºç«‹åœ¨å®Œå…¨è®¤çŸ¥é—®é¢˜çš„åŸºç¡€ä¸Šã€‚ç¬”è€…ç›®å‰åœ¨3DGS SLAMçš„ç ”ç©¶ä¸Šé‡åˆ°ä¸€äº›å›°éš¾ï¼Œå› æ­¤å›é¡¾äº†ä¸3DGSå¾ˆç›¸ä¼¼çš„Neural Pointç³»åˆ—çš„æ–¹æ³•ï¼Œå†™äº†è¿™ä¸¤ç¯‡æ–‡ç« ï¼Œå¸Œæœ›èƒ½ä»ä¸­å¾—åˆ°ä¸€äº›çµæ„Ÿï¼Œæ›´å…¨é¢çš„è®¤è¯†é—®é¢˜ï¼Œä¹ŸæœŸå¾…èƒ½å’Œå¤§å®¶äº¤æµè®¨è®ºã€‚</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ol><li>How NeRFs and 3D Gaussian Splatting are Reshaping SLAM: a Survey</li><li>Point-SLAM: Dense Neural Point Cloud-based SLAM</li><li>Loopy-SLAM: Dense Neural SLAM with Loop Closures</li><li>PIN-SLAM: LiDAR SLAM Using a Point-Based Implicit Neural Representation for Achieving Global Map Consistency</li></ol><p><strong>æ³¨ï¼šæœ¬æ–‡æ˜¯ç¬”è€…å­¦ä¹ ç ”ç©¶è¿‡ç¨‹ä¸­çš„æ€è€ƒæ•´ç†ï¼Œå¦‚æœ‰é”™è¯¯ç–æ¼ï¼Œè¯·å„è·¯å¤§ä½¬æ‰¹è¯„æ–§æ­£ï¼</strong></p>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> NeRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Neural Point Renderingå›é¡¾</title>
      <link href="2024/11/11/neural-point-rendering/"/>
      <url>2024/11/11/neural-point-rendering/</url>
      
        <content type="html"><![CDATA[<h1 id="Neural-Point-Renderingå›é¡¾"><a href="#Neural-Point-Renderingå›é¡¾" class="headerlink" title="Neural Point Renderingå›é¡¾"></a>Neural Point Renderingå›é¡¾</h1><h2 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>3D Gaussian Splattingè¿™ä¸¤å¹´éå¸¸ç«ï¼Œå·²ç»å–ä»£NeRFæˆä¸ºäº†è®¡ç®—æœºè§†è§‰ã€SLAMç­‰é¢†åŸŸçš„æ–°çƒ­ç‚¹ï¼Œæ¯å‘¨éƒ½èƒ½çœ‹åˆ°å¾ˆå¤š3DGSçš„å·¥ä½œå‡ºç°ã€‚</p><p>ç¬”è€…è‡ªå·±æ˜¯ç ”ç©¶3DGS SLAMçš„ï¼Œåœ¨å­¦ä¹ å’Œåšå®éªŒçš„è¿‡ç¨‹ä¸­å‘ç°ï¼Œ3DGSä½œä¸ºä¸€ç§æ˜¾ç¤ºçš„è¡¨ç¤ºæ–¹æ³•ï¼Œå…¶å‡ ä½•æ€§è´¨å´æ²¡æœ‰é‚£ä¹ˆå¥½ï¼Œä¸ä¼ ç»Ÿçš„ç‚¹äº‘æ•°æ®ç›¸æ¯”ï¼Œ3DGSçš„ç‚¹äº‘åªæ•è·äº†ç²—ç³™çš„å‡ ä½•ç»“æ„ï¼Œè€Œä¸”é€šå¸¸å­˜åœ¨å™ªå£°ï¼Œè¿™å¯¼è‡´3DGSè™½ç„¶æä¾›äº†æ˜¾ç¤ºçš„ç‚¹äº‘ï¼Œä½†æ˜¯åœ¨ä¸Šé¢åšé…å‡†å¾ˆå›°éš¾ã€‚ç›®å‰ç¬”è€…äº†è§£åˆ°åœ¨3DGSä¸Šåšé…å‡†çš„å·¥ä½œåªæœ‰ã€ŠGaussReg: Fast 3D Registration with Gaussian Splattingã€‹è¿™ä¸€ç¯‡ï¼Œå…·ä½“å¯ä»¥çœ‹ç¬”è€…çš„<a href="https://immortalqx.github.io/2024/08/16/paper-reading-gaussianreg">åšå®¢æ–‡ç« </a>ã€‚</p><p>ä¸3DGSç›¸æ¯”ï¼Œç¬”è€…è®¤ä¸ºNeural Pointçš„è¡¨ç¤ºæ–¹æ³•åœ¨å‡ ä½•ä¸Šæ›´æœ‰ä¼˜åŠ¿ï¼Œå› æ­¤ç¬”è€…é€‰æ‹©äº†neural pointç›¸å…³çš„å‡ ç¯‡å·¥ä½œï¼Œåšä¸€ä¸ªå›é¡¾æ•´ç†ã€‚</p><h2 id="ç›¸å…³å·¥ä½œ"><a href="#ç›¸å…³å·¥ä½œ" class="headerlink" title="ç›¸å…³å·¥ä½œ"></a>ç›¸å…³å·¥ä½œ</h2><h3 id="Neural-Point-Based-Graphics-ECCV-2020"><a href="#Neural-Point-Based-Graphics-ECCV-2020" class="headerlink" title="Neural Point-Based Graphics (ECCV 2020)"></a>Neural Point-Based Graphics (ECCV 2020)</h3><p><img src="/images/neural-point-rendering/image-20241107193256641.png"></p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¯¥æ–¹æ³•ä½¿ç”¨raw point cloudä½œä¸ºåœºæ™¯å‡ ä½•è¡¨ç¤ºï¼Œæ¯ä¸ªç‚¹éƒ½å¸¦æœ‰ä¸€ä¸ªlearnable neural descriptorï¼Œè¿™ä¸ªdescriptorç¼–ç äº†å±€éƒ¨çš„å‡ ä½•å½¢çŠ¶å’Œå¤–è§‚ï¼›ä¹‹åæ ¹æ®ç›¸æœºä½å§¿ï¼Œåœ¨ä¸åŒçš„åˆ†è¾¨ç‡ä¸‹é€šè¿‡z-bufferå¯¹ç‚¹äº‘è¿›è¡Œæ …æ ¼åŒ–ï¼Œå¾—åˆ°ä¸åŒåˆ†è¾¨ç‡ä¸‹çš„raw imagesï¼Œè¿™äº›raw imagesçš„åƒç´ å°±æ˜¯å¯¹åº”ç‚¹äº‘çš„descriptorï¼›ä¹‹åæŠŠè¿™ä¸€ç»„ä¸åŒåˆ†è¾¨ç‡ä¸‹çš„raw imagesé€šè¿‡ç±»ä¼¼U-netçš„Rendering networkï¼Œå¯ä»¥å¾—åˆ°æœ€ç»ˆæ¸²æŸ“çš„å›¾åƒã€‚</p><p><img src="/images/neural-point-rendering/image-20241105204710606.png"></p><p>æ ¹æ®è®ºæ–‡Methodéƒ¨åˆ†çš„æè¿°ï¼Œä¸Šé¢çš„å…·ä½“æµç¨‹ä¸ºï¼š</p><h4 id="é—®é¢˜æè¿°ï¼š"><a href="#é—®é¢˜æè¿°ï¼š" class="headerlink" title="é—®é¢˜æè¿°ï¼š"></a>é—®é¢˜æè¿°ï¼š</h4><p>åœºæ™¯è¢«è¡¨ç¤ºä¸ºå¸¦æœ‰$M$ç»´ç¥ç»æè¿°ç¬¦$D = {d_1,d_2,â€¦,d_N}$çš„ç‚¹äº‘$P={p_1,p_2,â€¦,p_N}$ã€‚éœ€è¦æ¸²æŸ“åœ¨ç›¸æœº$C$ï¼ˆæä¾›äº†ç›¸æœºä½å§¿å’Œå†…å‚ï¼‰ä¸‹çš„æ–°è§†å›¾ï¼Œæ–°è§†å›¾å…·æœ‰$W \times H$çš„åƒç´ ç½‘æ ¼ï¼Œå¹¶ä¸”viewpointä¸º$p_0$ã€‚</p><h4 id="æ¸²æŸ“è¿‡ç¨‹ï¼ˆforwardï¼‰"><a href="#æ¸²æŸ“è¿‡ç¨‹ï¼ˆforwardï¼‰" class="headerlink" title="æ¸²æŸ“è¿‡ç¨‹ï¼ˆforwardï¼‰"></a>æ¸²æŸ“è¿‡ç¨‹ï¼ˆforwardï¼‰</h4><p>åˆ›å»ºä¸€ä¸ª$M$é€šé“ã€åˆ†è¾¨ç‡ä¸º$W \times H$çš„raw imageï¼Œè®°ä¸º$S(\mathrm {P},\mathrm {D},C)$ï¼›</p><p>å°†åœºæ™¯ä¸­çš„ç‚¹æŠ•å½±åˆ°ç›®æ ‡è§†å›¾ä¸Šï¼Œæ¯”å¦‚å¯¹äºæŸä¸ªç‚¹$p_i$ï¼ŒæŠ•å½±åˆ°raw imageä¸­çš„$(x,y)$å¤„ï¼š<br>$$<br>S(\mathrm {P},\mathrm {D},C)[[x],[y]] = d_i<br>$$<br>ç”±äºå¯èƒ½å­˜åœ¨å¾ˆå¤šç‚¹æŠ•å½±åˆ°ç›¸åŒçš„åƒç´ ä¸Šï¼Œå› æ­¤è®ºæ–‡ä½¿ç”¨z-bufferç®—æ³•æ¥è¿‡æ»¤è¢«é®æŒ¡çš„ç‚¹ï¼Œåªä¿ç•™è·ç¦»åƒç´ å¹³é¢æœ€è¿‘çš„é‚£ä¸ªç‚¹ã€‚ä½†æ˜¯ç‚¹äº‘ç¼ºä¹æ‹“æ‰‘ä¿¡æ¯ï¼Œå¾ˆå®¹æ˜“å‡ºç°å­”æ´ï¼Œè¿™ä¼šå¯¼è‡´è¢«é®æŒ¡è¡¨é¢çš„ç‚¹æˆ–æ¥è‡ªèƒŒæ™¯çš„ç‚¹è¢«æŠ•å½±åˆ°äº†å›¾åƒä¸Šï¼Œå³bleeding problemã€‚</p><blockquote><p>å¯ä»¥çœ‹è¿™ä¸ª<a href="https://gamedev.stackexchange.com/questions/46963/how-to-avoid-texture-bleeding-in-a-texture-atlas">é“¾æ¥</a>ï¼Œç®€å•äº†è§£ä¸€ä¸‹texture bleedingçš„ç°è±¡</p></blockquote><p>è®ºæ–‡æåˆ°ï¼Œä¼ ç»Ÿçš„è§£å†³æ€è·¯æ˜¯é€šè¿‡splattingï¼Œè€Œä»–ä»¬é€‰æ‹©åˆ›å»ºå¾ˆå¤šä¸åŒåˆ†è¾¨ç‡çš„raw imageï¼Œ$S[1],S[2],â€¦S[T]$ï¼Œå…¶ä¸­å¯¹äºç¬¬iå¼ raw imageï¼Œåˆ†è¾¨ç‡ä¸º$\frac{W}{2^t} \times \frac{H}{2^t}$ã€‚è¿™æ ·çš„è¯ï¼Œåˆ†è¾¨ç‡è¶Šé«˜çš„raw imageï¼ŒåŒ…å«çš„ç»†èŠ‚æœ€å¤šï¼Œä½†æ˜¯bleedingçš„é—®é¢˜è¶Šä¸¥é‡ï¼Œè€Œåˆ†è¾¨ç‡è¶Šä½çš„å›¾åƒï¼ŒåŒ…å«äº†ç²—ç³™çš„å‡ ä½•ç»†èŠ‚ï¼ŒåŒæ—¶bleedingçš„é—®é¢˜è¶Šè½»å¾®ã€‚</p><blockquote><p>splattingï¼Ÿ3D Gaussian Splattingå¯åŠ¨ï¼</p><p>è¯è¯´è¿™é‡Œçš„splattingæ˜¯ä»€ä¹ˆï¼Ÿä¹Ÿæ²¡æœ‰è§å®ƒå¼•ç”¨æ–‡çŒ®ã€‚ã€‚ã€‚</p><blockquote><p>å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼š</p><p>Splatting æŠ›é›ªçƒæ³•ç®€ä»‹ - bo233çš„æ–‡ç«  - çŸ¥ä¹<br><a href="https://zhuanlan.zhihu.com/p/660512916">https://zhuanlan.zhihu.com/p/660512916</a></p></blockquote></blockquote><p>å¾—åˆ°ä¸åŒåˆ†è¾¨ç‡çš„raw imagesä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡è®ºæ–‡çš„rendering networkï¼Œå¾—åˆ°æœ€ç»ˆçš„RGBå›¾åƒäº†ã€‚</p><p><img src="/images/neural-point-rendering/image-20241105222855468.png"></p><h4 id="è®­ç»ƒè¿‡ç¨‹ï¼ˆbackwardï¼‰"><a href="#è®­ç»ƒè¿‡ç¨‹ï¼ˆbackwardï¼‰" class="headerlink" title="è®­ç»ƒè¿‡ç¨‹ï¼ˆbackwardï¼‰"></a>è®­ç»ƒè¿‡ç¨‹ï¼ˆbackwardï¼‰</h4><p><img src="/images/neural-point-rendering/image-20241105223310293.png"></p><p>è®ºæ–‡æ˜¯é€šè¿‡ä¼˜åŒ–rendering networkçš„å‚æ•°$\theta$å’Œç¥ç»æè¿°ç¬¦$D = {d_1,d_2,â€¦,d_N}$æ¥æ‹Ÿåˆåœºæ™¯çš„ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè®ºæ–‡æåˆ°rendering networkçš„è®­ç»ƒè¢«åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šç¬¬ä¸€é˜¶æ®µæ˜¯åœ¨ä¸€ç»„ç‰¹å®šç±»å‹çš„åœºæ™¯ä¸Šè¿›è¡Œé¢„è®­ç»ƒï¼Œç¬¬äºŒä¸ªé˜¶æ®µæ˜¯åœ¨æ–°åœºæ™¯ä¸Šè¿›è¡Œfine-tuneã€‚å› æ­¤å¯¹äºæ–°åœºæ™¯çš„æ‹Ÿåˆï¼Œæ˜¯fine-tuneé¢„è®­ç»ƒå¥½çš„rendering networkå’Œä»å¤´å¼€å§‹è®­ç»ƒæ¯ä¸€ä¸ªç‚¹çš„descriptorã€‚</p><h4 id="å®éªŒéƒ¨åˆ†"><a href="#å®éªŒéƒ¨åˆ†" class="headerlink" title="å®éªŒéƒ¨åˆ†"></a>å®éªŒéƒ¨åˆ†</h4><p>ç•¥ï¼Œçœ‹åŸè®ºæ–‡å§~</p><h4 id="å±€é™æ€§"><a href="#å±€é™æ€§" class="headerlink" title="å±€é™æ€§"></a>å±€é™æ€§</h4><ul><li><p>è®ºæ–‡æåˆ°ä»–ä»¬çš„æ¨¡å‹ä¸èƒ½å¡«è¡¥è¾ƒå¤§çš„ç©ºæ´ï¼Œå¦å¤–ä¹Ÿæ²¡æœ‰ç ”ç©¶åœ¨åŠ¨æ€åœºæ™¯ä¸­çš„æ€§èƒ½ã€‚</p></li><li><p>çœ‹è®ºæ–‡ä¸­çš„TABLE2ï¼Œæ¯ä¸€ä¸ªç‚¹çš„descriptorä¹Ÿä¸å¤§ï¼Œdescriptorçš„é•¿åº¦å’Œç‚¹çš„æ•°é‡å¯¹åœºæ™¯çš„å½±å“ä¼¼ä¹è¾ƒå°ã€‚ä»è¿™é‡Œçœ‹çš„è¯ï¼Œè¿™ä¸ªå·¥ä½œæ¸²æŸ“è´¨é‡çš„ç“¶é¢ˆåº”è¯¥æ˜¯Pipelineä¸­çš„Rendering networkã€‚</p><p><img src="/images/neural-point-rendering/image-20241107191530848.png"></p></li></ul><h3 id="Point-NeRF-Point-based-Neural-Radiance-Fields-CVPR-2022"><a href="#Point-NeRF-Point-based-Neural-Radiance-Fields-CVPR-2022" class="headerlink" title="Point-NeRF: Point-based Neural Radiance Fields (CVPR 2022)"></a>Point-NeRF: Point-based Neural Radiance Fields (CVPR 2022)</h3><p><img src="/images/neural-point-rendering/image-20241107193322757.png"></p><p><strong>è®ºæ–‡çš„Motivationï¼š</strong>long reconstruction times due to the slow per-scene network fitting and the unnecessary sampling of vast empty space.</p><p><strong>è®ºæ–‡çš„Pipelineï¼š</strong></p><p><img src="/images/neural-point-rendering/image-20241107193636916.png"></p><p>è®ºæ–‡åœ¨è¿™å¼ å›¾é‡ŒæŠŠè‡ªå·±çš„å·¥ä½œåˆ†æˆäº†ä¸¤ä¸ªéƒ¨åˆ†ï¼Œ(a) Neural Point Generationå’Œ(b) Point-NeRF Representation with Volume Renderingã€‚ä¸è¿‡è®ºæ–‡æ˜¯æŒ‰ç…§Point-NeRF Representationå’ŒPoint-NeRF Reconstructionæ¥è®²çš„ï¼Œä¸‹é¢ç¬”è€…ä¹ŸæŒ‰ç…§è®ºæ–‡çš„æ€è·¯æ¥ä»‹ç»ã€‚</p><h4 id="Point-NeRF-Representation"><a href="#Point-NeRF-Representation" class="headerlink" title="Point-NeRF Representation"></a>Point-NeRF Representation</h4><p><strong>åœºæ™¯è¡¨å¾</strong>ï¼šä½¿ç”¨neural point cloudè¡¨ç¤ºåœºæ™¯<br>$$<br>P = {(p_i, f_i, \gamma_i)|i = 1,â€¦,N}<br>$$<br>å¯¹äºç¬¬$i$ä¸ªneural pointï¼Œ$p_i$è¡¨ç¤ºè¯¥ç‚¹çš„åæ ‡ï¼Œ$f_i$æ˜¯å¯¹åº”çš„neural feature vectorï¼Œç¼–ç äº†å±€éƒ¨åœºæ™¯çš„ä¿¡æ¯ï¼Œ$\gamma_i$æ˜¯scale confidence valueï¼Œè¡¨ç¤ºè¯¥ç‚¹ä½äºå®é™…åœºæ™¯è¡¨é¢é™„è¿‘çš„å¯èƒ½æ€§ã€‚</p><p>å¯¹äºä¸‰ç»´ç©ºé—´ä¸­ä»»æ„çš„ä¸€ä¸ªç‚¹$x$ï¼ŒPoint-NeRFä¼šåœ¨åŠå¾„$R$å†…æŸ¥è¯¢å‘¨å›´$K$ä¸ªç›¸é‚»neural pointï¼Œä¹‹åé€šè¿‡è¯¥ç‚¹çš„åæ ‡$x$ã€è§‚å¯Ÿæ–¹å‘$d$å’Œ$K$ä¸ªç›¸é‚»çš„neural pointï¼Œå¾—åˆ°$x$å¤„çš„volume density $\sigma$å’Œview-dependent radiance $r$ã€‚è¿™ä¸ªè¿‡ç¨‹å¯¹åº”çš„å…¬å¼ä¸ºï¼š<br>$$<br>(\sigma,r) = \text{Point-NeRF}(x,d,p_1,f_1,\gamma_1,â€¦,p_K,f_K,\gamma_K)<br>$$<br><strong>Per-point processing</strong>ï¼šå¯¹äºç›¸é‚»ç‚¹çš„neural feature vectorï¼ŒPoint-NeRFä¸æ˜¯ç›´æ¥æ‹¿è¿‡æ¥å°±ç»™ä½ç½®$x$å¤„ç”¨çš„ï¼Œè€Œæ˜¯è¿‡äº†ä¸€ä¸ªMLPç½‘ç»œ$F$ï¼Œç›¸å½“äºæ˜¯æ ¹æ®è·ç¦»åŠ æƒï¼Œåšä¸€ä¸ªæ’å€¼ï¼Œæ‹¿åˆ°æ’å€¼ä¹‹åçš„neural feature vectorã€‚</p><blockquote><p>ä¸ªäººæ„Ÿè§‰è¿™ä¸€æ­¥æ²¡å¿…è¦ï¼Œä¸‹é¢è¿˜æœ‰ä¸€ä¸ªç±»ä¼¼çš„å¤„ç†ã€‚</p></blockquote><p>$$<br>f_{i,x} = F(f_i,x-p_i)<br>$$</p><p><strong>View-dependent radiance regression</strong>ï¼šPoint-NeRFä½¿ç”¨é€†è·ç¦»åŠ æƒæ¥å¾—åˆ°ä½ç½®$x$å¤„çš„neural feature vectorã€‚</p><img src="/images/neural-point-rendering/image-20241107210554355.png" style="zoom: 50%;"><p>ä¹‹åé€šè¿‡ä¸€ä¸ªMLPç½‘ç»œ$R$æ ¹æ®ç‰¹å¾$f_x$å’Œè§‚å¯Ÿæ–¹å‘$d$å›å½’å¾—åˆ°ä½ç½®$x$çš„radiance $r$ã€‚<br>$$<br>r = R(f_x,d)<br>$$<br><strong>Density regression</strong>ï¼šå’Œä¸Šé¢çš„è¿‡ç¨‹ç±»ä¼¼ï¼Œä¸è¿‡æ˜¯å…ˆè®¡ç®—æ¯ä¸ªç›¸é‚»ç‚¹çš„ä½“å¯†åº¦ï¼Œå†é€šè¿‡é€†è·ç¦»åŠ æƒæ¥å¾—åˆ°æœ€ç»ˆçš„ä½“å¯†åº¦ã€‚</p><img src="/images/neural-point-rendering/image-20241107211223065.png" style="zoom:67%;"><h4 id="Point-NeRF-Reconstruction"><a href="#Point-NeRF-Reconstruction" class="headerlink" title="Point-NeRF Reconstruction"></a>Point-NeRF Reconstruction</h4><p><img src="/images/neural-point-rendering/image-20241107211447810.png"></p><h5 id="åˆå§‹åŒ–ï¼šGenerating-initial-point-based-radiance-fields"><a href="#åˆå§‹åŒ–ï¼šGenerating-initial-point-based-radiance-fields" class="headerlink" title="åˆå§‹åŒ–ï¼šGenerating initial point-based radiance fields"></a>åˆå§‹åŒ–ï¼šGenerating initial point-based radiance fields</h5><p>è®ºæ–‡æåˆ°å®Œå…¨ä»å¤´å¼€å§‹è®­ç»ƒéšæœºåˆå§‹åŒ–çš„neural featureå’ŒMLPå¯èƒ½ä¼šéå¸¸æ…¢ï¼Œå› æ­¤ä»–ä»¬è®¾è®¡äº†è¿™ä¸ªåˆå§‹åŒ–çš„æ¨¡å—ã€‚è¿™é‡Œæ”¾ä¸€ä¸ªå“”å“©å“”å“©UPä¸»<a href="https://space.bilibili.com/355024665">æ„ã®èŒ—</a>çš„æ€»ç»“ï¼š</p><p><img src="/images/neural-point-rendering/image-20241107215153253.png"></p><h5 id="ä¼˜åŒ–ï¼šOptimizing-point-based-radiance-fields"><a href="#ä¼˜åŒ–ï¼šOptimizing-point-based-radiance-fields" class="headerlink" title="ä¼˜åŒ–ï¼šOptimizing point-based radiance fields"></a>ä¼˜åŒ–ï¼šOptimizing point-based radiance fields</h5><p>è®ºæ–‡åœ¨è¿™é‡Œæåˆ°åˆå§‹çš„ç‚¹äº‘ï¼Œç‰¹åˆ«æ˜¯å…¶ä»–é‡å»ºæ–¹æ³•çš„ç‚¹äº‘ï¼ˆæ¯”å¦‚Metashapeæˆ–è€…COLMAPç­‰æ–¹æ³•ï¼‰ï¼Œé€šå¸¸ä¼šåŒ…å«å­”æ´å’Œå¼‚å¸¸å€¼ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒPoint-NeRFå°è¯•è¿‡ç›´æ¥ä¼˜åŒ–ç°æœ‰ç‚¹çš„ä½ç½®ï¼Œä½†æ˜¯å‘ç°è¿™æ ·ä¼šå¯¼è‡´è®­ç»ƒä¸ç¨³å®šã€‚å› æ­¤æœ€ç»ˆçš„è§£å†³æ€è·¯æ˜¯ï¼šè®¾è®¡æ–°é¢–çš„point pruningå’Œpoint growingç­–ç•¥ã€‚</p><blockquote><p>3DGSä¼˜åŒ–äº†ç‚¹çš„ä½ç½®æ¬¸</p></blockquote><p><strong>Point pruning</strong></p><p>æ¯ä¸ªneural pointéƒ½ä¿å­˜äº†è‡ªå·±çš„ç½®ä¿¡åº¦$\gamma$ï¼Œè¿™ä¸ªç½®ä¿¡åº¦è¡¨ç¤ºè¯¥ç‚¹æ˜¯å¦é è¿‘åœºæ™¯çš„è¡¨é¢ã€‚Point-NeRFåˆ©ç”¨è¿™äº›ç½®ä¿¡åº¦æ¥ä¿®å‰ªå¼‚å¸¸ç‚¹ï¼Œç½®ä¿¡åº¦ä½è¯´æ˜è¯¥ç‚¹é™„è¿‘çš„åŒºåŸŸå¯èƒ½æ˜¯ç©ºçš„ã€‚å› æ­¤Point-NeRFæ¯10kæ¬¡è¿­ä»£å°±ä¿®å‰ªæ‰é‚£äº›$\gamma &lt; 0.1$çš„ç‚¹ã€‚</p><p>é’ˆå¯¹æ¯ä¸ªç‚¹çš„ç½®ä¿¡åº¦ï¼Œè®ºæ–‡è®¾è®¡äº†ä¸€ä¸ªsparsity lossï¼Œè¿™ä¸ªæŸå¤±å‡½æ•°ä¼šå¼ºè¿«æ¯ä¸ªç‚¹çš„ç½®ä¿¡åº¦æ¥è¿‘0æˆ–1ã€‚</p><img src="/images/neural-point-rendering/image-20241107221339051.png" style="zoom: 33%;"><p>è®ºæ–‡ä½œè€…è®¤ä¸ºè¿™ç§å‰ªææŠ€æœ¯å¯ä»¥å»é™¤å¼‚å¸¸ç‚¹ï¼Œå‡å°‘ç›¸åº”çš„ä¼ªå½±ã€‚</p><p><strong>Point growing</strong></p><p>Point growingçš„ç›®çš„æ˜¯åœ¨ä¸å­˜åœ¨ç‚¹çš„ç©ºç™½åŒºåŸŸæ¢å¤ä¿¡æ¯ï¼Œæ ¸å¿ƒæ€è·¯æ˜¯é€æ­¥å¢é•¿åœ¨ç‚¹äº‘è¾¹ç•Œé™„è¿‘çš„ç‚¹ã€‚</p><p>å…·ä½“çš„æ€è·¯æ˜¯ï¼ŒæŠŠæ¯æ¬¡æ²¿ç€å°„çº¿é‡‡æ ·çš„ç‚¹ä½œä¸ºæ–°çš„å€™é€‰ç‚¹ï¼Œè®¡ç®—è¿™æ¡å°„çº¿ä¸é€æ˜åº¦æœ€é«˜çš„ä½ç½®$x_{jg}$ï¼Œä»¥åŠè¯¥ä½ç½®åˆ°æœ€è¿‘neural pointçš„è·ç¦»ã€‚</p><img src="/images/neural-point-rendering/image-20241107222828251.png" style="zoom:50%;"><p>å¦‚æœä¸é€æ˜åº¦$\alpha_j$å’Œæœ€è¿‘neural pointçš„è·ç¦»éƒ½å¤§äºè®¾å®šçš„é˜ˆå€¼ï¼Œå°±è¯´æ˜ä½ç½®$x_{jg}$ä½äºåœºæ™¯çš„è¡¨é¢é™„è¿‘ï¼Œä½†æ˜¯è¿™ä¸ªä½ç½®é™„è¿‘åˆç¼ºå°‘neural pointï¼ŒPoint-NeRFå°±ä¼šåœ¨ä½ç½®$x_{jg}$æ–°å¢ä¸€ä¸ªneural pointã€‚</p><p>é€šè¿‡é‡å¤è¿™ç§ç”Ÿé•¿ç­–ç•¥ï¼ŒPoint-NeRFå¯ä»¥é€æ¸æ‰©å±•å¹¶è¦†ç›–åˆå§‹ç‚¹äº‘ä¸­ç¼ºå¤±çš„åŒºåŸŸï¼Œæ¯”å¦‚ä¸‹å›¾è¿™ç§æ¯”è¾ƒæç«¯çš„æƒ…å†µï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¯¥ç­–ç•¥é€æ­¥å¢é•¿æ–°çš„neural pointï¼Œä»è€Œè¦†ç›–æ•´ä¸ªç‰©ä½“è¡¨é¢ã€‚</p><p><img src="/images/neural-point-rendering/image-20241107223232630.png"></p><h4 id="å®éªŒéƒ¨åˆ†-1"><a href="#å®éªŒéƒ¨åˆ†-1" class="headerlink" title="å®éªŒéƒ¨åˆ†"></a>å®éªŒéƒ¨åˆ†</h4><blockquote><p>åªå†™å‡ ä¸ªä¸ªäººæ„Ÿå…´è¶£çš„å®éªŒï¼Œå…¶ä»–éƒ¨åˆ†çœ‹åŸè®ºæ–‡å§~</p></blockquote><p>Table 1è¿™é‡Œå¯ä»¥å‘ç°ï¼ŒPoint-NeRFåˆå§‹åŒ–ä¹‹åå°±æœ‰äº†ä¸€ä¸ªä¸é”™çš„ç»“æœï¼Œè€Œç»è¿‡ä¸€æ®µæ—¶é—´çš„ä¼˜åŒ–ä¹‹åï¼Œå„é¡¹æŒ‡æ ‡éƒ½å¾ˆçªå‡ºã€‚</p><p><img src="/images/neural-point-rendering/image-20241107223505876.png"></p><p>è®ºæ–‡çš„Table 4è¿˜å¯¹æ¯”äº†ç‚¹äº‘ç‚¹ä¿®å‰ªå’Œç”Ÿé•¿çš„æ•ˆæœï¼Œå¹¶ä¸”å±•ç¤ºäº†åœ¨Point-NeRFåˆå§‹åŒ–çš„ç‚¹å’ŒCOLMAPæä¾›çš„ç‚¹ä¸Šçš„æ•ˆæœã€‚å¯ä»¥çœ‹åˆ°ç‚¹äº‘ä¿®å»ºå’Œç”Ÿé•¿ç­–ç•¥å¯ä»¥ç»™å„é¡¹æŒ‡æ ‡å¸¦æ¥å¾ˆå¤§çš„æå‡ï¼Œè€Œä¸”ä½¿ç”¨Point-NeRFåˆå§‹åŒ–çš„ä¸Šé™æ¯”COLMAPè¦æ›´é«˜</p><blockquote><p>ä¹Ÿè®¸å› ä¸ºæœ¬è´¨ä¸Šè¿˜æ˜¯èµ°çš„ä½“æ¸²æŸ“æµç¨‹ï¼Œåˆå§‹åŒ–çš„ç‚¹å…¨éƒ¨åœ¨è¡¨é¢ä¸Šï¼Œé‡‡æ ·ä¸äº†å‡ ä¸ªç‚¹ï¼Œæ‰€ä»¥è®ºæ–‡P&amp;Gå…¶å®ä¸»è¦æ˜¯åœ¨ç‰©ä½“å†…éƒ¨ç–¯ç‹‚ç”Ÿæˆæ–°çš„ç‚¹ï¼Ÿæˆ–è€…åœ¨è¡¨é¢é™„è¿‘ç”Ÿæˆå¾ˆå¤šä¸ªç‚¹ï¼Ÿ</p></blockquote><img src="/images/neural-point-rendering/image-20241107224306676.png" style="zoom: 67%;"><h4 id="å±€é™æ€§-1"><a href="#å±€é™æ€§-1" class="headerlink" title="å±€é™æ€§"></a>å±€é™æ€§</h4><ul><li><p>æŸ¥è¯¢MLPçš„æ¬¡æ•°å’ŒåŸç‰ˆNeRFå·®ä¸å¤šï¼Œæ¸²æŸ“é€Ÿåº¦ä¸Šæ²¡æœ‰æå‡</p></li><li><p>ç‚¹äº‘å¯†åº¦å’Œæ¸²æŸ“è´¨é‡ä¹‹é—´éœ€è¦å¹³è¡¡ï¼Œå¤§åœºæ™¯é‡å»ºå¯èƒ½ä¼šæ¯”è¾ƒåƒåŠ›</p><ul><li>ç‚¹äº‘å¯†åº¦é«˜ï¼Œæ˜¾å­˜å ç”¨å¢åŠ </li><li>é™ä½ç‚¹äº‘å¯†åº¦ï¼Œä¼šé™ä½æ¸²æŸ“è´¨é‡</li></ul></li></ul><h3 id="INPC-Implicit-Neural-Point-Clouds-for-Radiance-Field-Rendering"><a href="#INPC-Implicit-Neural-Point-Clouds-for-Radiance-Field-Rendering" class="headerlink" title="INPC: Implicit Neural Point Clouds for Radiance Field Rendering"></a>INPC: Implicit Neural Point Clouds for Radiance Field Rendering</h3><blockquote><p>2024å¹´3æœˆ25æ—¥ï¼Œåœ¨3D Gaussian Splattingæµªæ½®å¸­å·ä¸‹ï¼Œä¸€ç¯‡Neural Pointç›¸å…³çš„å·¥ä½œè¢«æŒ‚åœ¨äº†arxivä¸Š~</p><blockquote><p>éƒ½å¹´åº•äº†ï¼Œè¿™ç¯‡æ–‡ç« æ€ä¹ˆè¿˜æ²¡ä¸­ç¨¿ï¼Ÿ</p></blockquote></blockquote><p><img src="/images/neural-point-rendering/image-20241108154550207.png"></p><p><strong>è®ºæ–‡çš„Motivation</strong>ï¼šå½“å‰æ–°è§†è§’ç”Ÿæˆçš„ç ”ç©¶ä¸»è¦åˆ†ä¸ºäº†ä¸¤ä¸ªæ–¹å‘ï¼Œä¸€ä¸ªæ˜¯implicit radiance fieldsçš„æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯explicit point-basedçš„æ–¹æ³•ã€‚ç„¶è€Œå‰è€…ä¾èµ–intensive ray-marchingï¼Œåè€…åˆ™éœ€è¦a-priori point proxiesã€‚å¯¹æ­¤è®ºæ–‡å¸Œæœ›åˆ›å»ºä¸€ç§æ–°çš„åœºæ™¯è¡¨ç¤ºæ–¹æ³•ï¼Œç»“åˆè¿™ä¸¤ç§æ–¹æ³•çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶ç»•è¿‡ray-marchingå’Œexplicit priorsã€‚</p><blockquote><p>çœ‹èµ·æ¥æ˜¯åœ¨å°è¯•ç»“åˆ3DGSå’ŒZip-NeRFï¼ŒåŸè®ºæ–‡æ˜¯è¿™ä¹ˆè¯´çš„ï¼š</p><p>More specifically, we take inspiration from current state-of-the-art approaches 3D Gaussian Splatting and Zip-NeRF: We decompose and optimize a scene into two parts, which constitutes a concept that we dub implicit point cloud.</p></blockquote><p><strong>è®ºæ–‡å¯¹Zip-NeRFçš„è¯„ä»·</strong>ï¼šThe current state-of-the-art in this field, Zip-NeRF, combines ideas from both quality and efficiency directions: It augments the underlying gridbased data structure with anti-aliasing through conical sampling, the addition of scaling information, and refined empty space skipping. While Zip-NeRF is comparably fast in training (taking about 5 hours), the rendering speed for novel views is limited to âˆ¼ 0.2 fps on consumer-grade hardware. This approach is closest in mind to our method, as we also recombine grid-based appearance information with implicit density formulation for scene reconstruction. In contrast to Zip-NeRF, however, our method enables rasterization-based rendering, making it faster in inference.</p><p><strong>è®ºæ–‡å¯¹3DGSçš„è¯„ä»·</strong>ï¼šEspecially important here is 3D Gaussian Splatting (3DGS) which extends point rendering with anisotropic 3D Gaussians as a radiance field rendering paradigm. Apart from removing the need for a CNN to fill holes, this formulation allows them to start with a sparser point cloud that is densified by repeatedly splitting large Gaussians during the optimization.</p><p><strong>è®ºæ–‡çš„Pipeline</strong>ï¼š</p><p><img src="/images/neural-point-rendering/image-20241108213938413.png"></p><p>ä¸ä¸Šé¢çš„ä¸¤ä¸ªå·¥ä½œä¸åŒï¼ŒINPCçš„neural pointæ˜¯éšå¼çš„ï¼Œç‚¹çš„ä½ç½®è¢«ä¿å­˜åœ¨åŸºäºå…«å‰æ ‘çš„æ¦‚ç‡åœºä¸­ï¼Œç‚¹çš„å¤–è§‚ï¼ˆé¢œè‰²ã€ç‰¹å¾ã€ä¸é€æ˜åº¦ï¼‰è¢«ä¿å­˜åœ¨ç±»ä¼¼äºinstant-ngpçš„neural fieldä¸­ã€‚</p><p>å¯¹äºæŸä¸ªç»™å®šçš„è§†è§’ï¼ŒINPCä¼šå¯¹Implicit Point Cloudè¿›è¡Œé‡‡æ ·ï¼Œå¾—åˆ°æ˜¾ç¤ºçš„ç‚¹äº‘ï¼ˆä½ç½®å’Œç‰¹å¾å‘é‡ï¼‰ï¼Œä¹‹åé€šè¿‡Bilinear Point Splattingå¾—åˆ°å¤šåˆ†è¾¨ç‡çš„2D feature mapï¼Œå†å’ŒBackground Modelçš„è¾“å‡ºè¿›è¡Œ$\alpha$-blendingï¼Œæœ€åé€šè¿‡U-Netç»“æ„çš„æ¸²æŸ“ç½‘ç»œæ¸²æŸ“å¾—åˆ°è¯¥è§†è§’ä¸‹çš„å›¾åƒã€‚</p><blockquote><p>Neural Point-Based Graphicsæ˜¯åˆ›å»ºå¾ˆå¤šä¸åŒåˆ†è¾¨ç‡çš„raw imageï¼Œä¸ä½¿ç”¨splattingã€‚</p><p>è¿™ä¸ªå·¥ä½œæ€ä¹ˆåˆsplattingï¼Œåˆå¤šåˆ†è¾¨ç‡ï¼Ÿ</p></blockquote><h4 id="Sparse-Point-Probability-Octree"><a href="#Sparse-Point-Probability-Octree" class="headerlink" title="Sparse Point Probability Octree"></a>Sparse Point Probability Octree</h4><p>ä½œè€…åœ¨è¿™éƒ¨åˆ†å¼€å¤´åˆæåˆ°ï¼Œç°æœ‰çš„NeRFæ–¹æ³•ä¸éœ€è¦æ˜ç¡®çš„å‡ ä½•å½¢çŠ¶ï¼Œç›¸æ¯”ä¹‹ä¸‹åŸºäºç‚¹çš„æ–¹æ³•åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­éœ€è¦é•¿æœŸä¿å­˜æ˜¾ç¤ºçš„ç‚¹äº‘ã€‚ä¹‹ååˆé‡ç”³äº†æœ¬å·¥ä½œçš„ä¸€ä¸ªç›®æ ‡æ˜¯ï¼Œåœ¨point-based neural rendering pipelineä¸­æ¶ˆé™¤å¯¹é•¿æœŸä¿å­˜æ˜¾ç¤ºç‚¹äº‘çš„éœ€æ±‚ã€‚</p><blockquote><p><strong>è´¨ç–‘ï¼š</strong>çœ‹åˆ°è¿™é‡Œä»ç„¶ä¸ç†è§£ä¸ºä»€ä¹ˆä½œè€…çš„ç›®æ ‡æ˜¯â€One goal of this work is removing the need for a persistent set of point positions within a typical point-based neural rendering pipeline.â€œ</p><p>è¿™ä¸ªå·¥ä½œä¼¼ä¹åœ¨è¿½æ±‚å®Œå…¨éšå¼çš„åœºæ™¯è¡¨ç¤ºæ–¹æ³•ï¼Œæ„Ÿè§‰æœ‰ç‚¹æç«¯äº†ã€‚è¿™æ ·æœ‰ä»€ä¹ˆä¼˜åŠ¿å‘¢ï¼Ÿè¿™ç¯‡è®ºæ–‡å¹¶æ²¡æœ‰å¤šå°‘ç¯‡å¹…è¿›è¡Œä»‹ç»ï¼Œè€Œä¸”ä¹Ÿæ²¡æœ‰è¯´æ¸…æ¥šexplicit point-basedçš„æ–¹æ³•éœ€è¦a-priori point proxiesä¸ºä»€ä¹ˆæ˜¯ä¸å¥½çš„ã€‚</p><blockquote><p>ä¹Ÿè®¸è¿™æ ·å¯ä»¥é¿å…point-nerfã€3DGSéœ€è¦çš„è‡´å¯†åŒ–ï¼Ÿè¿™æ˜¯ç¬”è€…å”¯ä¸€èƒ½æƒ³åˆ°çš„ä¸€ä¸ªç‚¹äº†ï¼Œæ˜¾ç¤ºçš„æ–¹æ³•éœ€è¦æ˜ç¡®æŸä¸ªåœ°æ–¹æœ‰å¤šå°‘ä¸ªç‚¹ï¼Œç‚¹çš„æ•°é‡æˆ–è€…å¯†åº¦ä¼šå½±å“æœ€åæ¸²æŸ“çš„ç»“æœï¼Œç‚¹çš„æ•°é‡è¿‡å¤šä¼šå¯¼è‡´æ˜¾å­˜å ç”¨ä¸Šå‡ã€‚</p></blockquote></blockquote><p><strong>åˆå§‹åŒ–</strong>ï¼šä½¿ç”¨3Dä½“ç´ ç½‘æ ¼åˆå§‹åŒ–æ¦‚ç‡åœºï¼Œç¨€ç–å…«å‰æ ‘çš„åˆå§‹å¶èŠ‚ç‚¹æ¦‚ç‡è®¾ç½®ä¸º1ã€‚ä¹Ÿå¯ä»¥å°†ç‚¹äº‘ä½œä¸ºå…ˆéªŒæ¥è®¡ç®—åˆå§‹å¶èŠ‚ç‚¹çš„æ¦‚ç‡ã€‚</p><p><strong>æ¦‚ç‡æ›´æ–°</strong>ï¼šå¶èŠ‚ç‚¹çš„æ¦‚ç‡è¡¨ç¤ºç›¸å¯¹äºå…¶ä»–çš„å¶èŠ‚ç‚¹ï¼Œåœºæ™¯å‡ ä½•å æ®å®ƒä½“ç§¯çš„å¤šå°‘ã€‚è®ºæ–‡å¯¹æ­¤è®¾è®¡äº†ä¸€ç§æ›´æ–°ç­–ç•¥ï¼Œé€šè¿‡å¦‚ä¸‹çš„å…¬å¼æ›´æ–°æ‰€æœ‰å¶èŠ‚ç‚¹çš„æ¦‚ç‡ã€‚</p><img src="/images/neural-point-rendering/image-20241111150018808.png" style="zoom: 50%;"><p>å…¶ä¸­${b_0,â€¦,b_n}$æ˜¯ä½¿ç”¨ç¬¬$i$ä¸ªå¶èŠ‚ç‚¹ç”Ÿæˆçš„æ‰€æœ‰ç‚¹çš„$\alpha \text{-blending}$æƒé‡çš„é›†åˆï¼Œè€Œ$\lambda_u$æ˜¯è¶…å‚æ•°ï¼Œè®ºæ–‡è®¾ç½®ä¸º0.9968ã€‚</p><p><strong>å¶èŠ‚ç‚¹ç»†åˆ†</strong>ï¼šä¸Šé¢çš„æ¦‚ç‡æ›´æ–°å…¬å¼ï¼Œä¼šä½¿å¾—åªæœ‰ä¸€éƒ¨åˆ†è¢«åœºæ™¯å æ®çš„å¶å­èŠ‚ç‚¹è·å¾—æ¯”è¾ƒé«˜çš„æ¦‚ç‡ã€‚è®ºæ–‡çš„ç­–ç•¥æ˜¯å¯¹æ¦‚ç‡å¤§äºè®¾å®šé˜ˆå€¼çš„æ‰€æœ‰å¶èŠ‚ç‚¹è¿›è¡Œç»†åˆ†ï¼Œå¹¶ä¸”å¶å­èŠ‚ç‚¹æ€»æ•°ä¸èƒ½è¶…è¿‡$256^3$ã€‚</p><p><strong>å‰ªæ</strong>ï¼šé€šè¿‡ä¸Šé¢çš„æ¦‚ç‡æ›´æ–°å…¬å¼ï¼Œæ²¡æœ‰è¦†ç›–åˆ°åœºæ™¯çš„å¶å­èŠ‚ç‚¹æ¦‚ç‡ä¼šæŒ‡æ•°è¡°å‡åˆ°0ï¼Œåˆ é™¤å°äºæŒ‡å®šé˜ˆå€¼çš„å¶å­èŠ‚ç‚¹å³å¯å®ç°å‰ªæã€‚</p><h4 id="Point-Sampling-Strategies"><a href="#Point-Sampling-Strategies" class="headerlink" title="Point Sampling Strategies"></a>Point Sampling Strategies</h4><p>è¯¥éƒ¨åˆ†çš„æ ¸å¿ƒæ€è·¯æ˜¯å¯¹Sparse Point Probability Octreeè¿›è¡Œé‡‡æ ·ï¼Œè®ºæ–‡è®¾è®¡äº†ä¸¤ç§é‡‡æ ·ç­–ç•¥ï¼šåŸºäºç‰¹å®šè§†è§’çš„é‡‡æ ·æ–¹æ¡ˆï¼ˆViewpoint-Specific Samplingï¼‰å’Œç‹¬ç«‹äºè§†è§’çš„é‡‡æ ·æ–¹æ¡ˆï¼ˆViewpoint-Independent Samplingï¼‰ã€‚å¯¹äºè®­ç»ƒï¼Œå¯ä»¥ç”Ÿæˆç‰¹å®šè§†è§’ä¸‹çš„ç‚¹äº‘ï¼›è€Œå…¨å±€çš„ã€ç‹¬ç«‹äºè§†è§’çš„ç‚¹äº‘å¯ä»¥å¢åŠ æ—¶é—´ç¨³å®šæ€§å’Œæ¸²æŸ“çš„æ€§èƒ½ï¼Œä¸éœ€è¦å¯¹éšå¼çš„ç‚¹äº‘è¿›è¡Œé€å¸§é‡‡æ ·ã€‚</p><p><strong>Viewpoint-Specific Sampling</strong>ï¼šé’ˆå¯¹ç‰¹å®šè§†è§’çš„åŠ æƒæ–¹æ¡ˆä¸»è¦è€ƒè™‘ä»¥ä¸‹ä¸‰ç‚¹ï¼š1ï¼‰ä¸èƒ½åœ¨ç›¸æœºè§†é”¥ä½“å¤–é‡‡æ ·ï¼›2ï¼‰è¿œç¦»ç›¸æœºçš„åŒºåŸŸå°‘é‡‡æ ·ï¼›3ï¼‰å…·æœ‰è¾ƒé«˜ç»†åˆ†çº§åˆ«çš„å¶å­ï¼Œå³ä»£è¡¨è¾ƒå°ä½“ç§¯çš„å¶å­ï¼Œéœ€è¦å°‘é‡‡æ ·ã€‚å¯¹åº”çš„å…¬å¼å¦‚ä¸‹ï¼š</p><img src="/images/neural-point-rendering/image-20241111152706562.png" style="zoom: 50%;"><p>å…¶ä¸­$\mathbb{1}_{visible}$æ˜¯ä¸€ä¸ªæŒ‡ç¤ºå‡½æ•°ï¼Œå¯è§å¶å­èŠ‚ç‚¹è¿”å›1ï¼Œä¸å¯è§å¶å­èŠ‚ç‚¹è¿”å›0ã€‚$\lambda_l$è¡¨ç¤ºåº”è¯¥é‡‡æ ·å¤šå°‘è¾ƒå°çš„ä½“ç´ ï¼Œè®ºæ–‡è®¾ç½®ä¸º0.5ï¼Œ$d_i$è¡¨ç¤ºå¶å­ä¸­å¿ƒåˆ°å›¾åƒå¹³é¢ä¹‹é—´çš„è·ç¦»ã€‚</p><p><strong>Viewpoint-Independent Sampling</strong>ï¼šä½œè€…è§‚å¯Ÿåˆ°åœ¨æ¨ç†çš„è¿‡ç¨‹ä¸­ï¼Œç‚¹äº‘é‡‡æ ·å ç”¨äº†ä¸€åŠä»¥ä¸Šçš„æ—¶é—´ï¼Œå› æ­¤ä½œè€…å¸Œæœ›ä¸ºæ‰€æœ‰çš„è§†è§’é¢„å…ˆæå–ä¸€ä¸ªå…¨å±€ç‚¹äº‘ã€‚è¿™é‡Œä»ç„¶æ˜¯ä½¿ç”¨ä¸Šé¢Viewpoint-Specific Samplingçš„å…¬å¼ï¼Œä¸è¿‡å¿½ç•¥äº†$\mathbb{1}_{visible}$å’Œ$d_i$ã€‚</p><h4 id="Appearance-Representation"><a href="#Appearance-Representation" class="headerlink" title="Appearance Representation"></a>Appearance Representation</h4><p>é‡‡æ ·ä¹‹åï¼Œå¯¹äºæ¯ä¸ªç‚¹ï¼Œä»å¤šåˆ†è¾¨ç‡å“ˆå¸Œç½‘æ ¼ä¸­æ£€ç´¢$M+1$ä¸ªappearance featureï¼Œç¬¬ä¸€ä¸ªfeatureä¼šè¢«è½¬æ¢ä¸ºä¸é€æ˜åº¦ï¼š<br>$$<br>\alpha_h = 1 - e^{-e^x}<br>$$<br>å‰©ä¸‹çš„Mä¸ªfeatureä¼šç”¨æ¥è®¡ç®—çƒè°ç³»æ•°ã€‚</p><p>å¯¹äºbackground modelï¼Œè®ºæ–‡ä½¿ç”¨äº†ä¸€ä¸ªå°å‹MLPï¼Œä½¿ç”¨ç›¸åº”çš„shç¼–ç çš„è§‚çœ‹æ–¹å‘ä½œä¸ºè¾“å…¥ï¼Œè®¡ç®—æ¯ä¸ªåƒç´ çš„4Dç‰¹å¾ã€‚</p><h4 id="Differentiable-Bilinear-Point-Splatting"><a href="#Differentiable-Bilinear-Point-Splatting" class="headerlink" title="Differentiable Bilinear Point Splatting"></a>Differentiable Bilinear Point Splatting</h4><p>è®ºæ–‡æåˆ°ä¹‹å‰å…³äºpoint rasterizationçš„å·¥ä½œï¼ˆåŒ…æ‹¬3DGSï¼‰å¯ä»¥è¯æ˜ï¼Œå¯¹è¾å°„åœºçš„ç‚¹æ¸²æŸ“å¯ä»¥éå¸¸è¿…é€Ÿï¼Œä½†æ˜¯å•åƒç´ ç‚¹æ¸²æŸ“ï¼ˆå°†å¤šä¸ªç‚¹æŠ•å½±å¹¶ç¦»æ•£åˆ°ä¸€ä¸ªåƒç´ ï¼‰ä¼šå¯¼è‡´æ··å ï¼Œå¹¶ä¸”éœ€è¦è¿‘ä¼¼æ¢¯åº¦ã€‚</p><p>ä¸ºäº†é¿å…è¿™ä¸ªæƒ…å†µï¼Œè®ºæ–‡ä½¿ç”¨åŒçº¿æ€§å…¬å¼ï¼Œåœ¨æŠ•å½±ä¹‹åå°†æ¯ä¸ªç‚¹ä¸å…¶æœ€è¿‘çš„$2\times2$ä¸ªç›¸é‚»ç‚¹ç›¸æ¥ã€‚å¯¹äºé‡‡æ ·ç‚¹$p_w = (x,y,z)^T$ï¼Œå°†å…¶æŠ•å½±åˆ°å›¾åƒåæ ‡$p=(u,v,d)^T$ä¸­ï¼š<br>$$<br>p = P \cdot V \cdot p_w<br>$$<br>å…¶ä¸­$P$æ˜¯ç›¸æœºå†…å‚ï¼Œ$V$æ˜¯ç›¸æœºå¤–å‚ã€‚å¯¹äºæœ€æ¥è¿‘çš„$2 \times 2$åƒç´ ç‚¹$p_{i \in {0â€¦3}} = (u_i,v_i)^T$ï¼Œé€šè¿‡å¦‚ä¸‹å…¬å¼è®¡ç®—ä¸é€æ˜åº¦ï¼š<br>$$<br>\alpha = \alpha_h \cdot (1 - |u-u_i|) \cdot (1 - |v - v_i|)<br>$$<br>è¿™ç§æ–¹æ³•å¯ä»¥è®©æ¯ä¸ªç‚¹èƒ½æ ¹æ®å®ƒä»¬æŠ•å½±çš„ä½ç½®è¢«æ­£ç¡®åŠ æƒã€‚</p><p>è¿™ç§åŒçº¿æ€§å–·æº…æ–¹æ³•æœ‰ä¸‰ä¸ªä¼˜ç‚¹ï¼š(1)å¯ä»¥è·å¾—æ›´é²æ£’çš„æ¢¯åº¦ï¼Œ(2)æé«˜æ¸²æŸ“çš„æ—¶é—´ç¨³å®šæ€§ï¼Œ(3)æ …æ ¼åŒ–åçš„å›¾åƒåŒ…å«çš„å­”æ´æ›´å°‘ï¼Œè¿™ä½¿å¾—å¡«å……å­”æ´çš„CNNå·¥ä½œæ›´å®¹æ˜“ã€‚</p><h4 id="Post-Processing-amp-Optimization-Loss"><a href="#Post-Processing-amp-Optimization-Loss" class="headerlink" title="Post-Processing &amp; Optimization Loss"></a>Post-Processing &amp; Optimization Loss</h4><p>è¿™ç¯‡å·¥ä½œä½¿ç”¨U-Netæ¶æ„çš„ç½‘ç»œè¿›è¡Œè§£ç ï¼Œå¾—åˆ°æœ€ç»ˆæ¸²æŸ“çš„å›¾åƒã€‚</p><p>å—åˆ°Plenoptic-pointså’Œ3DGSçš„å¯å‘ï¼Œè¿™ç¯‡å·¥ä½œç»“åˆäº†é€åƒç´ æŸå¤±å’Œä¸¤ä¸ªå›¾åƒæ§ä»¶çš„æŸå¤±å‡½æ•°ï¼š</p><img src="/images/neural-point-rendering/image-20241111165553227.png" style="zoom:50%;"><h4 id="å®éªŒéƒ¨åˆ†-2"><a href="#å®éªŒéƒ¨åˆ†-2" class="headerlink" title="å®éªŒéƒ¨åˆ†"></a>å®éªŒéƒ¨åˆ†</h4><blockquote><p>åªå†™å‡ ä¸ªä¸ªäººæ„Ÿå…´è¶£çš„å®éªŒï¼Œå…¶ä»–éƒ¨åˆ†çœ‹åŸè®ºæ–‡å§~</p></blockquote><p>è®ºæ–‡åœ¨Mip-NeRF360å’ŒTanks&amp;Templesæ•°æ®é›†ä¸Šä¸å¤šç§æ–¹æ³•è¿›è¡Œäº†å®šé‡å¯¹æ¯”ï¼Œåœ¨æ¸²æŸ“è´¨é‡ä¸Šï¼Œè¿™ç¯‡å·¥ä½œæ˜¯æ¯”è¾ƒæœ‰ç«äº‰åŠ›çš„ã€‚è¿™é‡Œä¹Ÿæ”¾å‡ºäº†è®­ç»ƒæ—¶é—´ã€æ¸²æŸ“é€Ÿåº¦å’Œå­˜å‚¨å ç”¨çš„æƒ…å†µï¼Œåœ¨è¿™ä¸‰ä¸ªç‚¹ä¸Šï¼Œè¿™ç¯‡å·¥ä½œè¡¨ç°å¾—ä¸å¤ªå¥½ã€‚</p><p><img src="/images/neural-point-rendering/image-20241111170002310.png"></p><p>è®ºæ–‡æ¶ˆèå®éªŒçš„ç»“æœå¦‚ä¸‹æ‰€ç¤ºã€‚å¯¹äºâ€G) No SfM Priorâ€ï¼Œå¯¹LPIPSã€SSIMã€PSNRè¿™ä¸‰é¡¹æŒ‡æ ‡çš„å½±å“ä¸æ˜¯å¾ˆå¤§ï¼Œè¯´æ˜è¿™ç¯‡å·¥ä½œä¸éœ€è¦åˆå§‹ç‚¹äº‘ä¹Ÿå¯ä»¥workï¼Œè¿™é‡Œè¿˜æ˜¯æŒºä¸é”™çš„ã€‚</p><p><img src="/images/neural-point-rendering/image-20241111170607252.png"></p><h4 id="å±€é™æ€§-2"><a href="#å±€é™æ€§-2" class="headerlink" title="å±€é™æ€§"></a>å±€é™æ€§</h4><p>å¦‚è®ºæ–‡Fig5æ‰€ç¤ºï¼Œè¿™ç¯‡å·¥ä½œåœ¨ç›¸æœºé™„è¿‘ç¼ºä¹æ›´ç²¾ç»†çš„å‡ ä½•ç»†èŠ‚ï¼Œå¹¶ä¸”åœ¨é«˜å…‰åº¦å˜åŒ–çš„æ•°æ®é›†ä¸Šè¡¨ç°è¾ƒå·®ã€‚</p><p><img src="/images/neural-point-rendering/image-20241111170943800.png"></p><h2 id="æ€»ç»“-amp-è®¨è®º"><a href="#æ€»ç»“-amp-è®¨è®º" class="headerlink" title="æ€»ç»“&amp;è®¨è®º"></a>æ€»ç»“&amp;è®¨è®º</h2><p>æœ¬æ–‡å›é¡¾äº†Neural Point Renderingç›¸å…³çš„å‡ ç¯‡å·¥ä½œã€‚</p><p>å…¶ä¸­Neural Point-Based Graphicså’ŒINPCéƒ½æ˜¯å°†åœºæ™¯ä¸­çš„neural pointæŠ•å½±åˆ°æ–°è§†è§’çš„å›¾åƒå¹³é¢ä¸Šï¼Œå¾—åˆ°å¤šåˆ†è¾¨ç‡çš„feature mapï¼Œä¹‹åé€šè¿‡U-Netè§£ç å¾—åˆ°æœ€ç»ˆæ¸²æŸ“çš„å›¾åƒã€‚æŠ•å½±çš„è¿‡ç¨‹å’Œ3DGSå¾ˆç±»ä¼¼ï¼Œæ¸²æŸ“è´¨é‡çš„ç“¶é¢ˆä¸»è¦åœ¨äºU-Netç½‘ç»œï¼Œneural pointç‰¹å¾å‘é‡çš„ç»´åº¦å¯¹æ¸²æŸ“è´¨é‡çš„å½±å“è¾ƒå°ã€‚</p><p>è€ŒPoint-NeRFç»“åˆäº†ä¼ ç»Ÿç‚¹äº‘å’ŒNeRFçš„ä¼˜ç‚¹ï¼Œé€šè¿‡neural pointè¡¨ç¤ºåœºæ™¯ï¼Œé¿å…å¯¹ç©ºç™½åŒºåŸŸçš„é‡‡æ ·ã€‚æ¸²æŸ“è´¨é‡ä¸»è¦å–å†³äºç‚¹äº‘å¯†åº¦ã€‚</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><p>ã€è®ºæ–‡è®²è§£ã€‘Point-NeRFï¼šç”¨ç‚¹äº‘åšNeRFé‡å»ºï¼Œæ—¢æŠ½è±¡åˆå…·ä½“ï¼Œæ—¢æ–°å¥‡åˆä¼ ç»Ÿï¼ˆ2022 CVPR Oralï¼‰</p><p><a href="https://www.bilibili.com/video/BV1X24y187RG">https://www.bilibili.com/video/BV1X24y187RG</a></p></li><li><p>ã€è®ºæ–‡è®²è§£ã€‘ç”¨ç‚¹äº‘ç»“åˆ3Dé«˜æ–¯æ„å»ºè¾å°„åœºï¼Œæˆä¸ºå¿«é€Ÿè®­ç»ƒã€å®æ—¶æ¸²æŸ“çš„æ–°SOTAï¼</p><p><a href="https://www.bilibili.com/video/BV1uV4y1Y7cA">https://www.bilibili.com/video/BV1uV4y1Y7cA</a></p></li><li><p>day4ï¼šZ-bufferingï¼ˆæ·±åº¦ç¼“å†²ï¼‰</p><p><a href="https://supercodepower.com/docs/toy-renderer/day4-Z-buffering">https://supercodepower.com/docs/toy-renderer/day4-Z-buffering</a></p></li><li><p>How to avoid texture bleeding in a texture atlas?</p><p><a href="https://gamedev.stackexchange.com/questions/46963/how-to-avoid-texture-bleeding-in-a-texture-atlas">https://gamedev.stackexchange.com/questions/46963/how-to-avoid-texture-bleeding-in-a-texture-atlas</a></p></li><li><p>Splatting æŠ›é›ªçƒæ³•ç®€ä»‹ - bo233çš„æ–‡ç«  - çŸ¥ä¹<br><a href="https://zhuanlan.zhihu.com/p/660512916">https://zhuanlan.zhihu.com/p/660512916</a></p></li></ul><p><strong>æ³¨ï¼šæœ¬æ–‡æ˜¯ç¬”è€…å­¦ä¹ ç ”ç©¶è¿‡ç¨‹ä¸­çš„æ€è€ƒæ•´ç†ï¼Œå¦‚æœ‰é”™è¯¯ç–æ¼ï¼Œè¯·å„è·¯å¤§ä½¬æ‰¹è¯„æ–§æ­£ï¼</strong></p>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> NeRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ï¼šScaffold-GSå’ŒOctree-GS</title>
      <link href="2024/10/11/paper-reading-scaffold-octreegs/"/>
      <url>2024/10/11/paper-reading-scaffold-octreegs/</url>
      
        <content type="html"><![CDATA[<h1 id="è®ºæ–‡é˜…è¯»ï¼šScaffold-GSå’ŒOctree-GS"><a href="#è®ºæ–‡é˜…è¯»ï¼šScaffold-GSå’ŒOctree-GS" class="headerlink" title="è®ºæ–‡é˜…è¯»ï¼šScaffold-GSå’ŒOctree-GS"></a>è®ºæ–‡é˜…è¯»ï¼šScaffold-GSå’ŒOctree-GS</h1><h2 id="Scaffold-GS-Structured-3D-Gaussians-for-View-Adaptive-Rendering"><a href="#Scaffold-GS-Structured-3D-Gaussians-for-View-Adaptive-Rendering" class="headerlink" title="Scaffold-GS: Structured 3D Gaussians for View-Adaptive Rendering"></a>Scaffold-GS: Structured 3D Gaussians for View-Adaptive Rendering</h2><blockquote><p>æˆ‘æ„Ÿè§‰æœ‰ç‚¹ç±»ä¼¼point-nerfï¼Œæœ¬è´¨ä¸Šä¼¼ä¹ï¼Œéå¸¸æ¥è¿‘ã€‚ã€‚ã€‚</p></blockquote><p><strong>è®ºæ–‡çš„motivationï¼š</strong>While this approach(3DGS) offers several advantages, it tends to excessively expand Gaussian balls to accommodate every training view, <strong>thereby neglecting scene structure</strong>. This <strong>results in significant redundancy and limits its scalability</strong>, particularly in the context of complex large-scale scenes. Furthermore, view-dependent effects are baked into individual Gaussian parameters with little interpolation capabilities, making it less robust to substantial view changes and lighting effects.</p><p><strong>è®ºæ–‡çš„è´¡çŒ®ï¼š</strong>In conclusion, our contributions are</p><ol><li>Leveraging scene structure, we <strong>initiate anchor points from a sparse voxel grid</strong> to guide the distribution of local 3D Gaussians, forming a hierarchical and region-aware scene representation;</li><li>Within the view frustum, we <strong>predict neural Gaussians from each anchor on-the-fly</strong> to accommodate diverse viewing directions and distances, resulting in more robust novel view synthesis;</li><li>We develop a more reliable <strong>anchor growing and pruning strategy</strong> utilizing the predicted neural Gaussians for better scene coverage.</li></ol><p><img src="/images/paper-reading-Scaffold-OctreeGS/image-20241011170715529.png"></p><p>çœ‹èµ·æ¥ï¼Œvoxelä»…ä»…æ˜¯è¡¨ç¤ºå“ªå„¿åº”è¯¥æœ‰ç‚¹ï¼Œsfm pointsæ²¡æœ‰è¢«åˆå§‹åŒ–ä¸ºé«˜æ–¯ï¼Œè€Œæ˜¯å¤„ç†æˆvoxelã€‚æ¯ä¸ªvoxelçš„ä¸­å¿ƒä½œä¸ºé”šç‚¹ï¼Œç„¶åå…·æœ‰ä¸€äº›å¯å­¦ä¹ çš„å‚æ•°ã€‚</p><p>MLPç”¨æ¥è§£ç è¿™äº›é”šç‚¹ï¼Œæ ¹æ®é”šç‚¹çš„å‚æ•°ï¼Œè·å¾—é”šç‚¹é™„è¿‘æŒ‡å®šæ•°é‡çš„é«˜æ–¯çš„å‚æ•°ã€‚</p><blockquote><p>point-nerfçš„æ—¢è§†æ„Ÿï¼Œå¹¶ä¸”æŒ‡å®šäº†æ¯ä¸ªé”šç‚¹ç”Ÿæˆå‡ ä¸ªé«˜æ–¯ã€‚</p><p>é‚£ä¸ºä»€ä¹ˆä¸åšä¸€ä¸ªgrid featureï¼Œè§£ç è¿™ä¸ªfeatureæ‹¿åˆ°é«˜æ–¯ã€‚ã€‚ã€‚</p></blockquote><p>è‡´å¯†åŒ–æœ¬è´¨ä¸Šè¿˜æ˜¯3dgsçš„é‚£ä¸€å¥—ï¼Œè®¡ç®—æ²¡æœ‰é”šç‚¹çš„ä½“ç´ ä¸­gaussiansçš„å¹³å‡æ¢¯åº¦ï¼Œå¦‚æœå¤§äºé˜ˆå€¼å°±å»ºç«‹ä¸€ä¸ªé”šç‚¹ã€‚è€Œå¦‚æœæŸä¸ªé”šç‚¹ç”Ÿæˆçš„gaussianä¸é€æ˜åº¦åä½ï¼Œé‚£å°±åˆ é™¤è¿™ä¸ªé”šç‚¹ã€‚</p><p><strong>20241018æ›´æ–°ï¼š</strong></p><ul><li><p>æ¯ä¸€ä¸ªanchoråŒ…æ‹¬çš„æ•°æ®æœ‰ï¼š</p><table><thead><tr><th>param</th><th>detail</th><th>num</th></tr></thead><tbody><tr><td>$v$</td><td>ç‚¹åæ ‡</td><td>3</td></tr><tr><td>$l_v$</td><td>scaling factor</td><td>3</td></tr><tr><td>$O_v$</td><td>learnable offsets</td><td>3k</td></tr><tr><td>$f_v$</td><td>feature</td><td>32</td></tr><tr><td></td><td></td><td>38+3k</td></tr></tbody></table><p>é«˜æ–¯ç‚¹æ•°ç›¸åŒæ—¶ï¼š</p><ul><li>$k &lt; 4$ï¼Œç”¨gaussianè¿›è¡Œè¡¨ç¤ºæ›´èŠ‚çœç©ºé—´</li><li>$k \geq 4$ï¼Œç”¨anchoræ›´èŠ‚çœç©ºé—´</li></ul></li><li><p>ä»anchoråˆ°gaussianï¼š</p><p>$\mu = x_v + O_v  l_v$</p><p>å…¶ä»–å‚æ•°é€šè¿‡ç½‘ç»œè§£ç featureæ‹¿åˆ°</p><img src="/images/paper-reading-Scaffold-OctreeGS/image-20241018150148940.png" style="zoom:67%;"></li><li><p>anchorçš„ç”Ÿé•¿ï¼š</p><p>çœ‹è®ºæ–‡æè¿°ï¼Œè¿˜æ˜¯ç±»ä¼¼äºGaussian Splattingçš„ADCï¼Œå¹³å‡æ¢¯åº¦å¤§äºé˜ˆå€¼ï¼Œæ‰ä¼šç”Ÿé•¿ä¸€ä¸ªæ–°çš„é”šç‚¹ã€‚</p><p>åŒæ—¶è®ºæ–‡è¿˜ä¼šå¯¹æ–°çš„é”šç‚¹è¿›è¡Œéšæœºæ·˜æ±°ï¼ˆçœ‹èµ·æ¥æ˜¯ç±»ä¼¼Compact 3DGSçš„learnable maskï¼‰ã€‚</p></li><li><p>anchorçš„åˆ é™¤ï¼š</p><p>å¦‚æœæŸä¸ªanchorä¸€ç›´åœ¨ç”Ÿæˆä¸é€æ˜åº¦æ¯”è¾ƒä½çš„é«˜æ–¯ï¼Œå°±æŠŠä»–åˆ æ‰ã€‚</p></li><li><p>çœ‹è¿™ä¸ªå®éªŒï¼Œç¡®å®æ˜¯SSIMä¼šç¨å¾®å¥½ä¸€äº›ï¼š</p><p><img src="/images/paper-reading-Scaffold-OctreeGS/image-20241018162049581.png"></p></li><li><p>è¿™ä¸ªå®éªŒç”¨çš„3D-GSä¸ä¼šæ˜¯sh degree=3çš„å§ï¼Ÿï¼Ÿï¼Ÿè‡ªå·±ç”¨sh degree=0ï¼Œ3DGSä¸æ”¹å›å»çš„è¯ï¼Œè¿™ä¹ˆæ¯”è¾ƒå°±ä¸æ˜¯å¾ˆæœ‰æ„ä¹‰äº†ã€‚</p><p>ä¸å¦‚åœ¨è¿™é‡Œæ¯”è¾ƒä¸€ä¸‹é”šç‚¹æ•°å’Œé«˜æ–¯çš„ç‚¹æ•°ï¼Œå¹¶ä¸”è¯´æ˜kè®¾ç½®çš„å¤šå°‘ï¼Œå³æ¯ä¸ªé”šç‚¹äº§ç”Ÿå¤šå°‘ä¸ªgaussianã€‚</p><blockquote><p>è®ºæ–‡é‡Œé¢æ²¡æ‰¾åˆ°scaffoldä¿å­˜çš„æ˜¯ä»€ä¹ˆï¼Œå¦‚æœæ˜¯anchor+MLPçš„è¯ï¼Œé‚£ç¡®å®å¯ä»¥åšåˆ°è¿˜æŒºå°çš„ã€‚ã€‚ã€‚</p><p>å¦‚æœæ˜¯æœ€ç»ˆä¿å­˜çš„plyï¼Œç”¨plyæ¥å¯¹æ¯”ï¼Œé‚£å°±éå¸¸ä¸åˆé€‚äº†ã€‚</p></blockquote><img src="/images/paper-reading-Scaffold-OctreeGS/image-20241018162143198.png" style="zoom: 67%;"><img src="/images/paper-reading-Scaffold-OctreeGS/image-20241018162256737.png" style="zoom:67%;"></li><li><p>è¿™ä¸ªå®éªŒå°±æ›´æœ‰æ„æ€äº†ï¼Œçœ‹èµ·æ¥æœ€ç»ˆä¸€ä¸ªé”šç‚¹åªä¼šäº§ç”Ÿ3-5ä¸ªé«˜æ–¯ã€‚è¿™æ ·çš„è¯ï¼Œé”šç‚¹çš„æ–¹æ³•å’Œé«˜æ–¯çš„æ–¹æ³•ï¼Œå‚æ•°é‡å…¶å®æ˜¯å·®ä¸å¤šçš„ã€‚</p><p>ä¸è¿‡è¿™ä¸ªå®éªŒä¹ŸæŒºæœ‰æ„ä¹‰çš„ï¼Œè¯´æ˜scaffoldå€¾å‘äºå»ç”Ÿæˆä¸å†—ä½™çš„é«˜æ–¯ã€‚</p><img src="/images/paper-reading-Scaffold-OctreeGS/image-20241018162833086.png" style="zoom:67%;"></li></ul><h2 id="Octree-GS-Towards-Consistent-Real-time-Rendering-with-LOD-Structured-3D-Gaussians"><a href="#Octree-GS-Towards-Consistent-Real-time-Rendering-with-LOD-Structured-3D-Gaussians" class="headerlink" title="Octree-GS: Towards Consistent Real-time Rendering with LOD-Structured 3D Gaussians"></a>Octree-GS: Towards Consistent Real-time Rendering with LOD-Structured 3D Gaussians</h2><p><strong>è®ºæ–‡çš„motivationï¼š</strong>However, both of them(Scaffold-GSã€Mip-Splattingç­‰å·¥ä½œ) <strong>inherit the view-frustum-only based Gaussian selection strategy</strong>, which gives rise to two primary issues. Firstly, this requires rendering every details of an object presented within the view frustum, regardless of whether it is observed from a near or far viewpoint. This redundancy in computation can result in potential inefficiencies and inconsistencies in rendering speed, especially in scenarios involving zoom-out trajectories in large-scale, detail-rich scenes. Secondly, the agnostic approach to LOD implies that all 3D Gaussians must compete to represent the scene across all observed views, leading to compromised rendering quality across different levels of detail.</p><p><strong>è®ºæ–‡çš„è´¡çŒ®ï¼š</strong>We found it 1) further enhances the alignment of 3D Gaussians with the content presented in the training images, improving the rendering quality without increasing performance overhead; 2) enables consistent rendering speed by dynamically adjusting the fetched LOD on-the-fly. We demonstrate its superiority in modeling large-scale scenes and extreme-view sequences.</p><img src="/images/paper-reading-Scaffold-OctreeGS/image-20241011210235377.png" style="zoom:67%;"><p>çœ‹å›¾æ³¨ï¼Œåˆ›å»ºçš„æ˜¯æœ‰ç•Œçš„å…«å‰æ ‘ã€‚ä¸è¿‡ç”¨å…«å‰æ ‘æ¥æ§åˆ¶ç»†èŠ‚ï¼Œè¿˜æŒºæ–¹ä¾¿çš„ã€‚</p><p>æ„Ÿè§‰å’Œscaffold-gsç›¸æ¯”ï¼Œå°±æ˜¯åœ¨å®ƒä¸Šé¢åŠ äº†ä¸ªå…«å‰æ ‘ï¼Œé”šç‚¹é€šè¿‡å…«å‰æ ‘æ¥è·å–ï¼Œæ ¹æ®è§‚çœ‹è·ç¦»å’Œåœºæ™¯çš„ä¸°å¯Œç¨‹åº¦æ¥ç»™å®šlodçš„çº§åˆ«ï¼Ÿå…¶ä»–å¹¶æ²¡æœ‰ä»€ä¹ˆå¾ˆæ–°é¢–çš„å†…å®¹äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> 3D Gaussian Splatting </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ã€ŠGaussianProï¼š3D Gaussian Splatting with Progressive Propagationã€‹</title>
      <link href="2024/09/18/paper-reading-gaussianpro/"/>
      <url>2024/09/18/paper-reading-gaussianpro/</url>
      
        <content type="html"><![CDATA[<h1 id="è®ºæ–‡é˜…è¯»ã€ŠGaussianPro-3D-Gaussian-Splatting-with-Progressive-Propagationã€‹"><a href="#è®ºæ–‡é˜…è¯»ã€ŠGaussianPro-3D-Gaussian-Splatting-with-Progressive-Propagationã€‹" class="headerlink" title="è®ºæ–‡é˜…è¯»ã€ŠGaussianPro: 3D Gaussian Splatting with Progressive Propagationã€‹"></a>è®ºæ–‡é˜…è¯»ã€ŠGaussianPro: 3D Gaussian Splatting with Progressive Propagationã€‹</h1><p><strong>ä¸‹é¢çš„ç¬”è®°æ²¡æœ‰åšå®Œæ•´ï¼Œè¿™é‡Œæ•´ç†ä¸€ä¸‹è¿™ç¯‡æ–‡ç« çš„æ€è·¯ï¼š</strong>ï¼ˆ20241006ï¼‰</p><p>è¿™ç¯‡æ–‡ç« è®¤ä¸ºå¼±çº¹ç†åŒºåŸŸï¼Œç‰¹åˆ«æ˜¯å¹³é¢ï¼Œæä¾›çš„ç‚¹æ¯”è¾ƒå°‘ï¼Œå¯¼è‡´åˆå§‹åŒ–ä¸å¥½ï¼Œå¯¹æ­¤è§£å†³æ€è·¯æ˜¯ï¼š</p><ul><li><p>è®¡ç®—3DGSçš„æ·±åº¦å’Œæ³•å‘ï¼Œæ ¹æ®alpha-blendingæ¸²æŸ“å¾—åˆ°æ·±åº¦å›¾å’Œæ³•å‘å›¾ï¼›</p></li><li><p>æ ¹æ®patch matchç®—æ³•ï¼Œè®¡ç®—æ¯ä¸€ä¸ªpixelå¯¹åº”çš„æœ€ä¼˜å¹³é¢ï¼›</p><blockquote><p>çœ‹èµ·æ¥æ˜¯æŠŠæ¯ä¸€å—åƒç´ è®¤ä¸ºæ˜¯æŸä¸ªå¹³é¢çš„ï¼Œæ·±åº¦ã€æ³•å‘éƒ½ç»Ÿä¸€äº†ä¸€ä¸‹ï¼Ÿ</p></blockquote></li><li><p>æ ¹æ®å¤šè§†å›¾å‡ ä½•ä¸€è‡´æ€§è¿‡æ»¤ä¸å‡†ç¡®çš„æ·±åº¦å’Œæ³•å‘ï¼Œæ ¹æ®è¿‡æ»¤ä¹‹åçš„ç»“æœä¸æœ€åˆæ¸²æŸ“çš„ç»“æœæ¯”è¾ƒï¼Œé‡æ–°å¢åŠ ä¸€äº›3DGSï¼›</p></li><li><p>æ˜ç¡®äº†3DGSæ³•å‘ä¸æ¸²æŸ“å¾—åˆ°çš„æ³•å‘ä¹‹é—´çš„ä¸€è‡´æ€§ï¼Œè®©å¹³é¢ä¸Šçš„3DGSæ›´æ‰å¹³ã€‚</p></li></ul><hr><h2 id="Abstract-amp-Introduction-amp-Related-Work"><a href="#Abstract-amp-Introduction-amp-Related-Work" class="headerlink" title="Abstract &amp; Introduction &amp; Related Work"></a>Abstract &amp; Introduction &amp; Related Work</h2><p>è¿™ç¯‡è®ºæ–‡çœ‹èµ·æ¥ä¹Ÿæ˜¯æƒ³è§£å†³3DGSç›®å‰å­˜åœ¨çš„ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚sfmåœ¨å¼±çº¹ç†åŒºåŸŸæä¾›çš„ç‚¹è¿‡å°‘ï¼Œè¿›è€Œå¯¼è‡´æ²¡åŠæ³•è‰¯å¥½çš„åˆå§‹åŒ–ï¼Œæ¯”å¦‚3DGSåŸæ¥çš„è‡´å¯†åŒ–ç­–ç•¥ç¼ºå°‘çº¦æŸã€‚è®ºæ–‡å—åˆ°classical multi-view stereo(MVS)çš„å¯å‘ï¼Œæå‡ºäº†æœ¬æ–‡çš„æ–¹æ³•GaussianProï¼Œé‡‡ç”¨æ¸è¿›å¼ä¼ æ’­ç­–ç•¥æ¥æŒ‡å¯¼3DGSçš„è‡´å¯†åŒ–ï¼ˆdensificationï¼‰è¿‡ç¨‹ã€‚</p><p><strong>è®ºæ–‡åœ¨Introductionéƒ¨åˆ†æåˆ°äº†3dgsçš„densificationç­–ç•¥å¯¼è‡´äº†ä¸¤ä¸ªé™åˆ¶ï¼š</strong></p><ol><li><p>Sensitive to Gaussian Initialization. The SfM techniques always fail to produce 3D points and leave empty in textureless regions, and therefore the densification strategy struggles to generate reliable Gaussians to cover the scene with a poor initialization.</p><p>å¯¹é«˜æ–¯åˆå§‹åŒ–æ•æ„Ÿã€‚SfMæŠ€æœ¯æ€»æ˜¯ä¸èƒ½äº§ç”Ÿ3Dç‚¹ï¼Œå¹¶ä¸”åœ¨æ— çº¹ç†çš„åŒºåŸŸç•™ä¸‹ç©ºç™½ï¼Œå› æ­¤è‡´å¯†åŒ–ç­–ç•¥å¾ˆéš¾äº§ç”Ÿå¯é çš„é«˜æ–¯å€¼æ¥è¦†ç›–åˆå§‹åŒ–è¾ƒå·®çš„åœºæ™¯ã€‚</p></li><li><p>Ignore the priors of the existing reconstructed geometry. The new Gaussians are either cloned to be the same as the old Gaussians or initialized with random positions and orientations. The less-constrained densification leads to difficulties in the optimization of 3D Gaussians, e.g., noisy geometries, and few Gaussians in texture-less regions, finally degrading the rendering quality. As shown in Figure 1, the results of 3DGS contain many noisy Gaussians and some regions are not covered by enough Gausians.</p><p>å¿½ç•¥ç°æœ‰é‡æ„å‡ ä½•çš„å…ˆéªŒã€‚æ–°çš„é«˜æ–¯è¦ä¹ˆè¢«å…‹éš†ä¸ºä¸æ—§çš„é«˜æ–¯ç›¸åŒï¼Œè¦ä¹ˆè¢«åˆå§‹åŒ–ä¸ºéšæœºçš„ä½ç½®å’Œæ–¹å‘ã€‚çº¦æŸè¾ƒå°‘çš„å¯†åº¦åŒ–å¯¼è‡´ä¸‰ç»´é«˜æ–¯å‡½æ•°çš„ä¼˜åŒ–å›°éš¾ï¼Œä¾‹å¦‚å‡ ä½•å½¢çŠ¶æœ‰å™ªå£°ï¼Œæ— çº¹ç†åŒºåŸŸçš„é«˜æ–¯å‡½æ•°å¾ˆå°‘ï¼Œæœ€ç»ˆé™ä½äº†æ¸²æŸ“è´¨é‡ã€‚å¦‚å›¾1æ‰€ç¤ºï¼Œ3DGSçš„ç»“æœåŒ…å«äº†å¾ˆå¤šæœ‰å™ªå£°çš„é«˜æ–¯å‡½æ•°ï¼Œæœ‰äº›åŒºåŸŸæ²¡æœ‰è¢«è¶³å¤Ÿçš„é«˜æ–¯å‡½æ•°è¦†ç›–ã€‚</p><p><img src="/images/paper-reading-GaussianPro/image-20240816102757561.png"></p></li></ol><p><strong>è®ºæ–‡åœ¨Related Workè¿™é‡Œæåˆ°äº†å‡ ç‚¹ï¼š</strong></p><ul><li>è®ºæ–‡ä»MVSçš„æ·±åº¦ä¼˜åŒ–ä¸­æ±²å–çµæ„Ÿï¼Œæ”¹è¿›gaussiançš„å‡ ä½•å½¢çŠ¶ï¼Œä»è€Œè·å¾—æ›´å¥½çš„æ¸²æŸ“æ•ˆæœï¼›</li><li>3DGSå¯¹é‡‡æ ·é¢‘ç‡å¾ˆæ•æ„Ÿï¼Œæ”¹å˜ç›¸æœºç„¦è·æˆ–è€…ç›¸æœºè·ç¦»å®¹æ˜“å¯¼è‡´æ¸²æŸ“ä¼ªå½±ï¼›</li><li>3DGSåœ¨æ²¡æœ‰æ˜ç¡®çº¦æŸåœºæ™¯å‡ ä½•ç»“æ„çš„æƒ…å†µä¸‹ä¼šè¿‡åº¦å¢é•¿ï¼Œå¯¼è‡´å¤§é‡å†—ä½™gaussianå’Œå†…å­˜æ¶ˆè€—ã€‚</li><li>ç›®å‰æœ‰ä¸€äº›é™ä½3DGSå­˜å‚¨å¼€é”€çš„å·¥ä½œï¼Œä½†æ˜¯æ˜ç¡®çº¦æŸé«˜æ–¯å‡½æ•°å‡ ä½•å½¢çŠ¶çš„å·¥ä½œå¾ˆå°‘ï¼Œ3DGSå¯èƒ½åœ¨è¿œç¦»ç‰©ä½“è¡¨é¢çš„åœ°æ–¹ç”Ÿé•¿ï¼Œä»è€Œå¯¼è‡´å†—ä½™å’Œæ–°è§†è§’çš„æ¸²æŸ“è´¨é‡ä¸‹é™ã€‚è®ºæ–‡è€ƒè™‘å¹³é¢å…ˆéªŒï¼Œæ˜ç¡®çº¦æŸäº†é«˜æ–¯åˆ†å¸ƒçš„å¢é•¿ï¼Œå¯ä»¥è®©é«˜æ–¯æ›´å¥½çš„é€‚åº”åœºæ™¯çš„çœŸå®å‡ ä½•å½¢çŠ¶ï¼Œå®ç°æ›´å¥½çš„æ¸²æŸ“å’Œæ›´ç´§å‡‘çš„è¡¨ç¤ºã€‚</li></ul><blockquote><p>åŸºäºä¸Šé¢å‡ ç‚¹ï¼Œæˆ‘è§‰å¾—æ”¾åœ¨RGBD-SLAMä¸­ï¼Œå…‰é é¢œè‰²å¹³å‡å€¼æ¥åˆå§‹åŒ–æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜æ˜¯éœ€è¦å†å¤šè€ƒè™‘ä¸€ä¸‹å‡ ä½•ã€‚æ¯•ç«Ÿæˆ‘æ‹¿åˆ°äº†ç¨ å¯†çš„æ·±åº¦å›¾ï¼Œæˆ‘æœ‰æ¡ä»¶æ¥è€ƒè™‘å‡ ä½•çº¦æŸã€‚</p></blockquote><p><strong>è®ºæ–‡æ€»ç»“äº†è‡ªå·±çš„è´¡çŒ®ï¼š</strong></p><ul><li>We propose a novel Gaussian propagation strategy that guides the densification to produce more compact and accurate Gaussians, particularly in low-texture regions.</li><li>We additionally leverage a planar loss that provides a further constraint in the optimization of Gaussians.</li><li>Our method achieves new state-of-the-art rendering performance on the Waymo and MipNeRF360 datasets. Our method also presents robustness to the varying numbers of input images.</li></ul><h2 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h2><p>æ•´ä¸ªç³»ç»Ÿçš„pipelineæ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š</p><p><img src="/images/paper-reading-GaussianPro/image-20240918104008376.png"></p><blockquote><p>ç›®å‰çš„ç–‘é—®ï¼Œç­‰çœ‹äº†åé¢åº”è¯¥å°±æ¸…æ¥šäº†ï¼š<br>è®ºæ–‡ä¸­è¿™ä¸ªæ®µè½æè¿°çš„æ˜¯ï¼šæ–°æ·±åº¦ä¸åˆå§‹æ·±åº¦æ˜æ˜¾ä¸åŒçš„åƒç´ è¢«æŠ•å½±å›3Dç©ºé—´ä½œä¸º3Dç‚¹ï¼Œè¿™äº›ç‚¹è¢«è¿›ä¸€æ­¥åˆå§‹åŒ–ä¸ºæ–°çš„é«˜æ–¯ç‚¹</p><p>è€Œä¸Šé¢çš„å›¾ç‰‡æè¿°çš„æ˜¯ï¼šæœ€åï¼Œæˆ‘ä»¬ç¡®å®šäº†å…¶æ¸²æŸ“æ·±åº¦å’Œæ³•çº¿æ˜æ˜¾åç¦»è¿‡æ»¤åçš„åŒºåŸŸï¼Œè¿™è¡¨æ˜ç°æœ‰çš„é«˜æ–¯å‡½æ•°å¯èƒ½ä¸ä¼šä¸å‡†ç¡®åœ°æ•è·å‡ ä½•å½¢çŠ¶ï¼Œå› æ­¤éœ€è¦æ›´å¤šçš„é«˜æ–¯å‡½æ•°ã€‚è¿™äº›åŒºåŸŸä¸­çš„åƒç´ è¢«æŠ•å½±åˆ°3Dç©ºé—´ä¸­ï¼Œä½¿ç”¨è¿‡æ»¤åçš„æ·±åº¦å’Œæ³•çº¿åˆå§‹åŒ–æ–°çš„é«˜æ–¯åˆ†å¸ƒã€‚</p><p>æˆ‘çš„çŒœæµ‹ï¼š</p><ul><li><p>è®ºæ–‡è®¤ä¸ºæ¸²æŸ“å‡ºæ¥çš„æ·±åº¦å›¾æ˜¯ä¸å‡†ç¡®çš„ï¼Œç„¶åä»–ä»¬æ ¹æ®ä¸€äº›è§„åˆ™ï¼Œä»æ¸²æŸ“çš„æ·±åº¦å’Œæ³•çº¿ä¸­é€‰æ‹©å‡ºæ¥äº†å‡†ç¡®çš„é‚£äº›æ·±åº¦å’Œæ³•çº¿ï¼Œå†å’Œæœ€å¼€å§‹æ¸²æŸ“çš„åˆå§‹æ·±åº¦è¿›è¡Œæ¯”è¾ƒï¼Œæœ‰æ˜æ˜¾å·®å¼‚çš„å°±åˆå§‹åŒ–ä¸ºæ–°çš„é«˜æ–¯ç‚¹ã€‚</p><blockquote><p>ä¸€ç§é€»è¾‘è‡ªæ´½çš„æ„Ÿè§‰ï¼Œè®ºæ–‡ä¼¼ä¹æƒ³è®©é«˜æ–¯æ¸²æŸ“å‡ºâ€œåˆç†çš„â€æ·±åº¦å›¾å’Œæ³•çº¿å›¾ã€‚</p><p>ä¸è¿‡ï¼Œå¦‚æœå·²ç»æœ‰æ·±åº¦å›¾çš„è¯ï¼Œè®ºæ–‡è¿™æ ·çš„æ€è·¯åº”è¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿï¼Ÿï¼Ÿ</p></blockquote></li></ul></blockquote><h3 id="Hybrid-Geometric-Representation"><a href="#Hybrid-Geometric-Representation" class="headerlink" title="Hybrid Geometric Representation"></a>Hybrid Geometric Representation</h3><p>è®ºæ–‡æåˆ°ä¸€ä¸ªé—®é¢˜ï¼šDue to the discrete and irregular topology of the 3D Gaussians, it is inconvenient to perceive the connectivity of geometries, like searching neighboring Gaussians on a local surface. As a result, itâ€™s difficult to perceive the existing geometry to guide the Gaussian densification.</p><p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œè®ºæ–‡ç»™å‡ºäº†è§£å†³æ–¹æ¡ˆï¼šHybrid Geometric Representationï¼Œå³å°†3D GaussianæŠ•å½±åˆ°ç»“æ„åŒ–çš„äºŒç»´å›¾åƒç©ºé—´ï¼ˆæ·±åº¦å’Œæ³•çº¿ï¼‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> 3D Gaussian Splatting </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ã€ŠGaussRegï¼šFast 3D Registration with Gaussian Splattingã€‹</title>
      <link href="2024/08/16/paper-reading-gaussianreg/"/>
      <url>2024/08/16/paper-reading-gaussianreg/</url>
      
        <content type="html"><![CDATA[<h1 id="è®ºæ–‡é˜…è¯»ã€ŠGaussReg-Fast-3D-Registration-with-Gaussian-Splattingã€‹"><a href="#è®ºæ–‡é˜…è¯»ã€ŠGaussReg-Fast-3D-Registration-with-Gaussian-Splattingã€‹" class="headerlink" title="è®ºæ–‡é˜…è¯»ã€ŠGaussReg: Fast 3D Registration with Gaussian Splattingã€‹"></a>è®ºæ–‡é˜…è¯»ã€ŠGaussReg: Fast 3D Registration with Gaussian Splattingã€‹</h1><blockquote><p>ECCV 2024ï¼Œç¬¬ä¸€ç¯‡åš3DGSé…å‡†çš„å·¥ä½œ</p></blockquote><h2 id="Abstract-amp-Introduction"><a href="#Abstract-amp-Introduction" class="headerlink" title="Abstract &amp; Introduction"></a>Abstract &amp; Introduction</h2><p><strong>è®ºæ–‡æåˆ°NeRFåœ¨å¤§è§„æ¨¡åœºæ™¯é‡å»ºæ—¶çš„é—®é¢˜ï¼š</strong></p><ul><li><p>åœ¨è€ƒè™‘åŸºäºNeRFçš„å¤§è§„æ¨¡åœºæ™¯é‡å»ºæ—¶ï¼Œä¸»è¦é¢ä¸´ä¸¤ä¸ªæŒ‘æˆ˜:</p><ul><li>1)ç”±äºç°å®åœºæ™¯ä¸­å­˜åœ¨å¤æ‚çš„é®æŒ¡ï¼Œé€šå¸¸éœ€è¦æ•è·å¤§é‡å›¾åƒæˆ–è§†é¢‘è¿›è¡Œå¤§è§„æ¨¡é‡å»ºï¼Œå¯¼è‡´æ•°æ®æ”¶é›†è¿‡ç¨‹è€—æ—¶ã€‚</li><li>2)ä½¿ç”¨å¤§é‡å›¾åƒä¼˜åŒ–NeRFæ˜¯è®¡ç®—å¯†é›†å‹çš„ã€‚</li></ul><p>ä¸€ç§ç›´æ¥çš„æ–¹æ³•æ˜¯å°†ä¸€ä¸ªå¤§å°ºåº¦çš„åœºæ™¯åˆ†æˆå‡ ä¸ªè¾ƒå°çš„åœºæ™¯ï¼Œåˆ†åˆ«é‡å»ºï¼Œç„¶åç”¨é…å‡†å°†è¿™äº›å°åœºæ™¯ç»„åˆåœ¨ä¸€èµ·ã€‚</p></li><li><p>è€Œè€ƒè™‘ä¸¤ä¸ªé‡å çš„åœºæ™¯ï¼Œæ¯ä¸ªåœºæ™¯éƒ½æœ‰è‡ªå·±çš„NeRFæ¨¡å‹ï¼Œæ ¹æ®ç›®å‰å·²æœ‰çš„å·¥ä½œï¼Œå¯ä»¥åˆ†æˆä¸¤ç§æ–¹æ³•ï¼š</p><ul><li><p>NeRFuserï¼Œæ¸²æŸ“å›¾è±¡ï¼Œå†é‡æ–°è·‘SfMã€‚è¿™ç§æ–¹æ³•çš„é—®é¢˜æ˜¯ï¼Œè€—æ—¶è¿‡é«˜ã€‚</p><blockquote><p>å¥½ç›´ç™½çš„æ€è·¯ï¼Œè¿™ä¹Ÿèƒ½å‘paperï¼Ÿ</p></blockquote></li><li><p>Dreg-NeRFï¼Œè½¬æˆæ˜¾ç¤ºçš„ä½“ç´ ï¼Œæå–ç‰¹å¾è¿›è¡ŒåŒ¹é…ã€‚è¿™ç§æ–¹æ³•çš„é—®é¢˜æœ‰ä¸¤ä¸ªï¼š</p><p>a)éš¾ä»¥å°†æ— ç•Œåœºæ™¯çš„NeRFè½¬æ¢ä¸ºæœ‰ç•Œä½“ç´ ;</p><p>b)ä½“ç´ ç½‘æ ¼çš„åˆ†è¾¨ç‡é™åˆ¶ä½¿å¾—è¯¥æ–¹æ³•ä¸é€‚åˆè¾ƒå¤§çš„åœºæ™¯ã€‚</p></li></ul></li></ul><p><strong>è®ºæ–‡æåˆ°äº†ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ï¼š</strong>As GS provides a point-like representation, can we conduct GS registration resorting to point-cloud registration methods? æ—¢ç„¶GSæä¾›äº†ç‚¹äº‘è¡¨ç¤ºï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥å€ŸåŠ©ç‚¹äº‘é…å‡†æ–¹æ³•è¿›è¡ŒGSé…å‡†?</p><blockquote><p>é„™äººä¹Ÿå¾ˆæ—©å°±è€ƒè™‘åˆ°äº†ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰è¶£çš„é—®é¢˜ï¼Œä½†æ˜¯å¾ˆæ£˜æ‰‹ï¼Œä¸å¥½è§£å†³ã€‚</p></blockquote><p><img src="/images/paper-reading-GaussianReg/image-20240815191810175.png"></p><p><strong>è®ºæ–‡å¯¹3DGSç‚¹äº‘çš„è¯„ä»·ï¼š</strong></p><ul><li><p>Compared with traditionally collected point cloud data, point clouds from GS only capture rough geometric structure and are usually noisy.</p><blockquote><p>æ˜¯çš„æ˜¯çš„ï¼ä¸ä¼ ç»Ÿé‡‡é›†çš„ç‚¹äº‘æ•°æ®ç›¸æ¯”ï¼Œ3DGSé‡‡é›†çš„ç‚¹äº‘åªæ•è·äº†ç²—ç³™çš„å‡ ä½•ç»“æ„ï¼Œè€Œä¸”é€šå¸¸å­˜åœ¨å™ªå£°ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œ3DGSé‡‡é›†çš„ç‚¹äº‘å¤ªè¿‡ç¨ å¯†äº†ï¼Œå­˜åœ¨å†—ä½™ï¼Œä½†æ˜¯åˆä»å›¾åƒæ¸²æŸ“çš„ç»“æœæ¥çœ‹ï¼Œå…¶å®è¿˜å­˜åœ¨å¯†åº¦ä¸è¶³çš„æƒ…å†µã€‚</p><p>å› æ­¤ï¼Œå¦‚æœæƒ³ç”¨ç®€å•ä¸€äº›çš„ç‚¹äº‘é…å‡†æ–¹æ³•æ¥é…å‡†3DGSï¼Œå¯ä»¥åšçš„äº‹æƒ…æœ‰ï¼š</p><ul><li>è®©3DGSæ•è·æ›´å¥½çš„å‡ ä½•ç»“æ„ï¼›</li><li>è®©3DGSåœ¨å……åˆ†è¡¨ç¤ºåœºæ™¯çš„æƒ…å†µä¸‹å‡å°‘æ•°é‡ï¼ˆå³å»é™¤å†—ä½™ï¼Œå¹¶ä¸”ä¿è¯å±€éƒ¨çš„å¯†åº¦æ˜¯åˆç†çš„ï¼‰ï¼›</li></ul></blockquote></li></ul><p><strong>è®ºæ–‡å¯¹3DGSé…å‡†çš„è®¾è®¡ï¼š</strong></p><ul><li><p>ç²—é…å‡†ï¼šä»3DGSä¸­æå–ç‚¹äº‘ï¼Œç”¨åŸºäºç‚¹äº‘é…å‡†çš„æ–¹æ³•è¿›è¡Œç²—é…å‡†ï¼Œåœ¨å·²æœ‰ç‚¹äº‘é…å‡†çš„åŸºç¡€ä¸Šè€ƒè™‘äº†3DGSçš„é¢å¤–å±æ€§ï¼Œæ¯”å¦‚ä¸é€æ˜åº¦ã€‚</p><blockquote><p>å› ä¸º3DGSçš„ç‚¹äº‘åªæ•è·äº†ç²—ç³™çš„å‡ ä½•ç»“æ„ï¼Œé€šå¸¸è¿˜å­˜åœ¨å™ªå£°ï¼Œå› æ­¤ç²—é…å‡†æ²¡åŠæ³•è·å¾—è¶³å¤Ÿç²¾ç¡®çš„ç»“æœï¼Œè¿˜éœ€è¦è¿›è¡Œç²¾é…å‡†ã€‚</p></blockquote></li><li><p>ç²¾é…å‡†ï¼šå›¾åƒå¼•å¯¼çš„ç²¾é…å‡†pipelineï¼Œå€ŸåŠ©3DGSæ¥æ¸²æŸ“å°‘é‡çš„å›¾åƒï¼ŒThen, the fine registration pipeline projects images into 3D volumetric features for final matching and transformation estimation.</p><blockquote><p>è®ºæ–‡ç§°ä¸»è¦æƒ³æ³•æ¥è‡ªäºè§‚å¯Ÿï¼ŒGSä¸ä»…åŒ…å«å‡ ä½•ä¿¡æ¯ï¼Œè¿˜åŒ…å«å›ºæœ‰çš„è¯¦ç»†å›¾åƒä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥æ”¯æŒæ›´ç²¾ç¡®çš„å¯¹å‡†ã€‚</p></blockquote></li></ul><p><strong>è®ºæ–‡çš„è´¡çŒ®ï¼š</strong></p><ul><li>ç¬¬ä¸€ä¸ªç ”ç©¶åœ¨3DGSä¸Šè¿›è¡Œé…å‡†çš„ï¼›</li><li>ç²¾å¿ƒè®¾è®¡äº†ä¸€ä¸ªä»ç²—åˆ°ç»†çš„pipelineï¼Œå……åˆ†è€ƒè™‘äº†3DGSçš„ç‰¹ç‚¹ï¼›</li><li>æå‡ºäº†ä¸€ç§å›¾åƒå¼•å¯¼çš„ç²¾ç»†é…å‡†æ–¹æ³•ï¼›</li><li>ä¸ºä»–ä»¬æå‡ºçš„æ–°ä»»åŠ¡åˆ›å»ºäº†ä¸€ä¸ªbenchmarkã€‚</li></ul><h2 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h2><h3 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h3><p><img src="/images/paper-reading-GaussianReg/image-20240815191752212.png"></p><p>è®ºæ–‡åœ¨è¿™é‡Œå¯¹æ•´ä¸ªè¿‡ç¨‹åšäº†ä¸€ä¸ªç®€å•çš„ä»‹ç»ã€‚</p><p>å‡è®¾ï¼šä¸¤ä¸ªå­˜åœ¨overlapçš„åœºæ™¯Aå’ŒBï¼Œæ¯ä¸ªåœºæ™¯éƒ½æœ‰è‡ªå·±çš„3DGSæ¨¡å‹ï¼Œå³$Gaussian_A$å’Œ$Gaussian_B$ï¼Œå¯¹åº”å¯¼å‡ºçš„ç‚¹äº‘ä¸º$Points_A$å’Œ$Points_B$ï¼Œå¹¶ä¸”ä¿ç•™æ‰€æœ‰è®­ç»ƒå›¾åƒçš„camera poseï¼Œå³${C_i^A = (R_i^A,T_i^A)}_{i=0}^N$å’Œ${C_j^B = (R_j^B,T_j^B)}_{j=0}^N$ã€‚</p><blockquote><p>çœ‹èµ·æ¥ä¿ç•™camera poseï¼Œæ˜¯ä¸ºäº†æ ¹æ®ç²—é…å‡†ï¼Œæ‰¾åˆ°èƒ½å¤Ÿè§‚å¯Ÿåˆ°overlapåŒºåŸŸçš„camera poseï¼Œç„¶åæ¸²æŸ“å›¾è±¡è¿›è¡Œé…å‡†ã€‚</p><blockquote><p>å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œçœ‹èµ·æ¥éå¸¸çš„ä¸ä¼˜é›…ã€‚ç†è®ºä¸Šä¸éœ€è¦ä¿ç•™camera poseï¼Œå¯ä»¥è‡ªå·±è®¡ç®—ä¸€äº›overlapåŒºåŸŸçš„è§†è§’ã€‚</p><p>è€Œä¸”æ—¢ç„¶ä¿ç•™äº†camera poseï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥ä¿ç•™å›¾åƒæ¥è¿›è¡Œé…å‡†å‘¢ï¼Ÿ</p></blockquote></blockquote><p>ç›®æ ‡ï¼šæ‰¾å‡ºè®©åœºæ™¯Bèƒ½å’ŒAå¯¹é½çš„åˆšæ€§å˜æ¢${s,R,T}$ï¼Œå…¶ä¸­$s$æ˜¯æ¯”ä¾‹å› å­ï¼Œ$R$æ˜¯æ—‹è½¬çŸ©é˜µï¼Œ$T$æ˜¯å¹³ç§»å‘é‡ã€‚</p><p>ç²—é…å‡†é˜¶æ®µï¼šè¾“å…¥$Points_A$å’Œ$Points_B$ï¼Œè¾“å‡ºç²—å˜æ¢${s_c,R_c,T_c}$ã€‚</p><p>ç²¾é…å‡†é˜¶æ®µï¼šæ ¹æ®ç²—é…å‡†ç»“æœæ‰¾åˆ°highly overlapping regionï¼Œåœ¨è¿™ä¸ªåŒºåŸŸå‘¨å›´é€‰æ‹©åˆé€‚çš„camera poseæ¸²æŸ“å›¾è±¡ã€‚ä¹‹åæ ¹æ®Image-Guided 3D(I3D) Feature Extractionæ¥æå–volumetric featuresï¼Œç”¨äºåç»­çš„local matchingï¼Œæœ€ç»ˆè¾“å‡ºç²—å˜æ¢${s_f,R_f,T_f}$ã€‚</p><h3 id="Coarse-Registration"><a href="#Coarse-Registration" class="headerlink" title="Coarse Registration"></a>Coarse Registration</h3><p>é€‰æ‹©ä¸é€æ˜åº¦$\alpha$å¤§äº0.7ï¼ˆç»éªŒå‚æ•°ï¼‰çš„é«˜æ–¯ç‚¹ï¼Œæ ¹æ®ä½ç½®å’Œçƒè°ï¼Œå¾—åˆ°å½©è‰²ç‚¹äº‘$(x,y,z,r,g,b)$ã€‚</p><blockquote><p>ï¼ï¼ï¼ä¹‹å‰æˆ‘è®¾è®¡3DGSé…å‡†çš„æ—¶å€™ï¼Œä¸é€æ˜åº¦ç”¨ä¸ä¸Šï¼Œç°åœ¨çœ‹æ¥å…¶å®æ˜¯å¯ä»¥ç”¨æ¥åšä¸€ä¸ªç®€å•çš„è¿‡æ»¤ï¼Œåªç”¨ä¸é€æ˜åº¦é«˜çš„æ¥é…å‡†ã€‚</p></blockquote><p>ç²—é…å‡†è¿™è¾¹éµå¾ªäº†GeoTransformerçš„æµç¨‹ã€‚</p><blockquote><p>==TODOï¼šè¿™éƒ¨åˆ†ç›®å‰ä¸æ„Ÿå…´è¶£ï¼Œå…ˆç•¥è¿‡äº†ã€‚è¿™éƒ¨åˆ†çœ‹èµ·æ¥åº”è¯¥å°±æ˜¯ç›´æ¥ç”¨çš„GeoTransformer==</p></blockquote><h3 id="Image-Guided-Fine-Registration"><a href="#Image-Guided-Fine-Registration" class="headerlink" title="Image-Guided Fine Registration"></a>Image-Guided Fine Registration</h3><p>è®ºæ–‡åœ¨è¿™é‡Œæåˆ°å› ä¸º3DGSè®­ç»ƒè¿‡ç¨‹ä¸­æ²¡æœ‰æ·»åŠ ç‰¹å®šçš„å‡ ä½•çº¦æŸï¼Œå› æ­¤äº§ç”Ÿçš„ç‚¹äº‘å¯èƒ½ä¼šå‡ºç°ä¸€å®šç¨‹åº¦çš„å¤±çœŸã€‚</p><blockquote><p>è¿™é‡Œä¸ªäººè®¤ä¸ºï¼Œåœ¨RGBD SLAMé‡Œé¢ï¼Œå°½ç®¡æœ‰æ·±åº¦çš„è¾“å…¥ï¼Œä½†æ˜¯æœ¬è´¨ä¸Šå’Œsfmè¾“å…¥è¿˜æ˜¯å·®ä¸å¤šçš„ï¼Œä»ç„¶å­˜åœ¨ä¸€å®šç¨‹åº¦çš„å¤±çœŸã€‚</p><p>è¿™è¿˜æ˜¯å› ä¸ºï¼Œè®­ç»ƒè¿‡ç¨‹ä¸­æ²¡æœ‰æ·»åŠ å‡ ä½•çº¦æŸï¼Œ3DGSç”šè‡³å¯èƒ½ä¼šä¸ºäº†æ¸²æŸ“çš„æ›´å¥½æŠŠæŸäº›æ­£ç¡®ä½ç½®çš„ç‚¹äº‘å¾€ä¸æ­£ç¡®çš„ä½ç½®ç§»åŠ¨ã€‚</p></blockquote><p>æ ¸å¿ƒæ€è·¯å¦‚ä¸‹æ‰€ç¤ºï¼Œåˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼š<strong>Overlap Image Selection</strong>å’Œ<strong>Image-Guided 3D Feature Extraction</strong>ã€‚</p><blockquote><p>ç»“åˆè®ºæ–‡å’Œè¿™å¼ å›¾å°±å¯ä»¥æŠŠè¿™éƒ¨åˆ†çœ‹å¾—å¾ˆæ˜ç™½äº†ï¼Œå…¨æ˜¯å¹²è´§ï¼Œéƒ½ä¸ç”¨å†™ç¬”è®°ã€‚</p><p>ä¸è¿‡è¿™ä¸ªè¿‡ç¨‹çœ‹èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒåƒµç¡¬ï¼Œä¼¼ä¹å¯ä»¥æ€»ç»“æˆï¼š</p><ul><li>ç¡®å®šé‡å çš„è§†è§’</li><li>æ¸²æŸ“å›¾è±¡</li><li>ç”Ÿæˆæ·±åº¦å›¾</li><li>é€‰æ‹©åˆé€‚çš„ç‚¹ï¼Œå¾—åˆ°ç‚¹äº‘</li><li>æŒ‰ç…§ç²—é…å‡†çš„æ­¥éª¤ï¼Œç‚¹äº‘å’Œç‚¹äº‘ä¹‹å‰é…å‡†</li></ul><p>å¹¶ä¸”è¿™ä¸ªfine registration networkè¿˜éœ€è¦è®­ç»ƒã€‚ã€‚ã€‚ï¼ˆå› ä¸ºï¼Œç±»ä¼¼å•ç›®æ·±åº¦ä¼°è®¡ï¼Ÿï¼‰</p></blockquote><p><img src="/images/paper-reading-GaussianReg/image-20240815193728803.png"></p><h3 id="Gaussian-Splatting-Fusion-and-Filtering"><a href="#Gaussian-Splatting-Fusion-and-Filtering" class="headerlink" title="Gaussian Splatting Fusion and Filtering"></a>Gaussian Splatting Fusion and Filtering</h3><blockquote><p>è¿™ç¡®å®æ˜¯ä¸¤ä¸ªåœºæ™¯çš„3DGSé…å‡†ä¹‹åéœ€è¦åšçš„äº‹æƒ…ï¼Œä¸è¿‡æˆ‘ä¸å¤ªå…³æ³¨è¿™éƒ¨åˆ†ï¼Œç•¥è¿‡äº†ã€‚</p><p>ä¸è¿‡è¿™é‡Œæåˆ°äº†çƒè°å‡½æ•°çš„æ—‹è½¬ï¼Œä»¥åæœ‰éœ€æ±‚å¯ä»¥å›æ¥çœ‹ä¸€çœ¼ã€‚</p><p>emmmï¼Œç®€å•çœ‹äº†ä¸€éï¼Œè¿™é‡Œå†™çš„å¾ˆå°‘ï¼Œçœ‹èµ·æ¥ä»…ä»…æ˜¯æ—‹è½¬äº†ä¸€ä¸‹gaussianï¼Œï¼Œï¼Œè¿™ä¸ªä»£ç æˆ‘ä¹Ÿå†™è¿‡ï¼Œï¼Œï¼Œçƒè°çš„æ—‹è½¬ç¡®å®è¦æ³¨æ„ã€‚å›å¤´æ£€æŸ¥ä¸€ä¸‹è‡ªå·±æ—‹è½¬çš„Gaussianï¼ŒæŠŠçƒè°éƒ¨åˆ†çš„æ—‹è½¬è€ƒè™‘ä¸Šï¼ï¼ˆä¸è¿‡æœ‰å…¶ä»–æ–¹æ³•å¯ä»¥é¿å…æ—‹è½¬é«˜æ–¯ï¼Œæ—‹è½¬é«˜æ–¯å¤ªæ…¢äº†ï¼Œä¸å¦‚æ—‹è½¬ç‚¹äº‘å†å¤„ç†ï¼Œï¼Œï¼Œï¼‰</p></blockquote><h2 id="Discussion"><a href="#Discussion" class="headerlink" title="Discussion"></a>Discussion</h2><p>è®ºæ–‡æåˆ°äº†ï¼Œä»–ä»¬èåˆgaussiançš„ç­–ç•¥æ˜¯ç®€å•çš„ã€‚</p><blockquote><p>æ·±è¡¨è®¤åŒï¼Œæˆ‘ä¹Ÿä¼šï¼Œä¸è¿‡çƒè°æˆ‘æ²¡è€ƒè™‘ï¼Œè¿™é‡Œå›å¤´æ³¨æ„ä¸€ä¸‹ã€‚</p></blockquote><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><p><strong>è®ºæ–‡æåˆ°çš„ä¸€äº›å·¥ä½œï¼š</strong></p><ul><li><p>NeRFuser</p><p>NeRFuser[10]ä¸­æå‡ºçš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸ªåœºæ™¯æ¸²æŸ“å¤§é‡çš„å›¾åƒï¼Œç„¶åä»SfM (structure-from-motion)ä¸­æ¢å¤æ‰€æœ‰è¿™äº›å›¾åƒçš„å§¿æ€ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•éå¸¸è€—æ—¶;</p></li><li><p>Dreg-NeRF</p><p>ä¸DReg-NeRFæ–¹æ³•[6]ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸¤ä¸ªåœºæ™¯çš„NeRFä¸­æŸ¥è¯¢ä½“ç´ ç½‘æ ¼ï¼Œå°†éšå¼äº®åº¦åœºè½¬æ¢ä¸ºæ˜¾å¼ä½“ç´ ï¼Œæå–ç‰¹å¾ï¼Œå»ºç«‹åŒ¹é…å…³ç³»è¿›è¡Œé…å‡†ã€‚ä½†è¯¥æ–¹æ³•é¢ä¸´ä¸¤ä¸ªé—®é¢˜:a)éš¾ä»¥å°†æ— ç•Œåœºæ™¯çš„NeRFè½¬æ¢ä¸ºæœ‰ç•Œä½“ç´ ;B)ä½“ç´ ç½‘æ ¼çš„åˆ†è¾¨ç‡é™åˆ¶ä½¿å¾—è¯¥æ–¹æ³•ä¸é€‚åˆè¾ƒå¤§çš„åœºæ™¯ã€‚</p></li><li><p>GeoTransformer</p><blockquote><p>å¾å‡¯ç»„çš„å·¥ä½œï¼Œä¹Ÿæ˜¯è¿™ç¯‡è®ºæ–‡ç²—é…å‡†çš„pipeline</p><p>è¿™é‡Œé¢åº”è¯¥æ˜¯ç”¨äº†Transformerï¼Œçœ‹æ¥å¾ˆå¤šä¸œè¥¿æˆ‘æƒ³èº²çš„èº²ä¸æ‰äº†ï¼Œéƒ½å¾—çœ‹ã€‚ã€‚ã€‚</p></blockquote></li><li><p>NeRF2NeRF</p><blockquote><p>åˆ©ç”¨äººå·¥æ³¨é‡Šçš„å…³é”®ç‚¹è·å¾—åˆå§‹è½¬æ¢ï¼Œå¹¶ä½¿ç”¨ä»é¢„è®­ç»ƒçš„NeRFä¸­æå–çš„è¡¨é¢åœºå¯¹å…¶è¿›è¡Œç»†åŒ–ã€‚</p></blockquote></li></ul><p><strong>ä¸ªäººè¯„ä»·ï¼š</strong></p><ul><li><p><strong>åšçš„éå¸¸æœ‰æ„æ€ï¼Œå’Œæˆ‘æƒ³è§£å†³çš„é—®é¢˜ä¸€æ ·ï¼Œä½†æ˜¯èµ°äº†å®Œå…¨ä¸ä¸€æ ·é“è·¯ã€‚</strong></p><p>æˆ‘è®¤ä¸º3DGSè¿˜å­˜åœ¨å¤ªå¤šçš„é—®é¢˜ï¼Œå› æ­¤éœ€è¦é€æ­¥è§£å†³è¿™äº›é—®é¢˜ï¼Œç„¶åç”¨ä¼ ç»Ÿçš„ç‚¹äº‘é…å‡†æ–¹æ³•è¿›è¡Œé…å‡†ï¼›</p><p>è€Œè®ºæ–‡è®¤ä¸º3DGSå›ºç„¶æœ‰å¾ˆå¤šçš„é—®é¢˜ï¼Œä½†æ˜¯å¯ä»¥ç²¾å¿ƒè®¾è®¡ä¸€äº›è§£å†³æ–¹æ³•ï¼Œç”¨ä¼ ç»Ÿçš„ç‚¹äº‘é…å‡†æ–¹æ³•è¿›è¡Œç²—é…å‡†ï¼Œå†ç”¨åŸºäºå›¾åƒå¼•å¯¼çš„æ–¹æ³•è¿›è¡Œç²¾é…å‡†ã€‚</p></li><li><p><strong>å› ä¸º3DGSçš„è¡¨ç¤ºç›®å‰è¿˜ä¸å®Œç¾ï¼Œå› æ­¤è®ºæ–‡å…¶å®åšäº†ä¸€äº›å¦¥åã€‚</strong></p><p>æ¸²æŸ“å›¾è±¡å†æ ¹æ®å›¾åƒè¿›è¡Œé…å‡†ï¼Œå…¶å®<strong>æ”¾åˆ°SLAMé‡Œé¢æ¥è¯´ï¼Œéå¸¸çš„åˆé€‚ï¼Œåé¢å¯ä»¥è€ƒè™‘ä¸€ä¸‹ã€‚</strong></p><p>ä½†æ˜¯ä¸ºä»€ä¹ˆè¦æ¸²æŸ“å›¾è±¡å‘¢ï¼Ÿå…¶å®è¿˜æ˜¯å› ä¸º3DGSçš„è¡¨ç¤ºç›®å‰è¿˜æœ‰å¾ˆå¤šå°é—®é¢˜ï¼Œåªèƒ½è¿›è¡Œå¦¥åã€‚ä½†æ˜¯æ¸²æŸ“å›¾è±¡æœ¬è´¨ä¸Šè¿˜æ˜¯åœ¨æŠŠ3DGSå½“æˆéšå¼çš„è¡¨ç¤ºæ–¹æ³•ï¼Œæœ€ååšå‡ºæ¥ä¸ªäººè§‰å¾—ä¸æ˜¯ç›´æ¥åŸºäº3DGSçš„é…å‡†ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 3D Gaussian Splatting </tag>
            
            <tag> ç‚¹äº‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ã€ŠPixel-GSï¼šDensity Control with Pixel-aware Gradient for 3D Gaussian Splattingã€‹</title>
      <link href="2024/07/23/paper-reading-pixel-gs/"/>
      <url>2024/07/23/paper-reading-pixel-gs/</url>
      
        <content type="html"><![CDATA[<h1 id="è®ºæ–‡é˜…è¯»ã€ŠPixel-GS-Density-Control-with-Pixel-aware-Gradient-for-3D-Gaussian-Splattingã€‹"><a href="#è®ºæ–‡é˜…è¯»ã€ŠPixel-GS-Density-Control-with-Pixel-aware-Gradient-for-3D-Gaussian-Splattingã€‹" class="headerlink" title="è®ºæ–‡é˜…è¯»ã€ŠPixel-GS: Density Control with Pixel-aware Gradient for 3D Gaussian Splattingã€‹"></a>è®ºæ–‡é˜…è¯»ã€ŠPixel-GS: Density Control with Pixel-aware Gradient for 3D Gaussian Splattingã€‹</h1><blockquote><p>çœ‹æ ‡é¢˜ï¼Œæ„Ÿè§‰è¿˜æ˜¯æ²¡æœ‰è„±ç¦»3DGSåŸºäºæ¢¯åº¦çš„Density Controlç­–ç•¥</p><p>ä¸è¿‡è¿™ä¸ªå·¥ä½œæ˜¯ä»åƒç´ çš„è§’åº¦æ¥è€ƒè™‘ç‚¹äº‘çš„ç”Ÿé•¿æ¡ä»¶ï¼Œæ›´ç»†èŠ‚ä¸€äº›äº†</p><p>çœ‹äº†ä¸€ä¸‹é¡¹ç›®ä¸»é¡µ<a href="https://pixelgs.github.io,åšçš„å®éªŒæŒºç²¾å½©çš„,ç‰¹åˆ«æ˜¯ä¸¢å¼ƒä¸€å®šæ¯”ä¾‹çš„sfmç‚¹,èƒ½çœ‹åˆ°æ•ˆæœå¾ˆæ˜¾è‘—.ä¸è¿‡åªçœ‹æŒ‡æ ‡çš„è¯,ä¸3dgsç›¸æ¯”ä¹Ÿåªæ˜¯æœ‰ä¸€ç‚¹ç‚¹çš„æå‡.å’Œä¹‹å‰çš„mini-gsä¸€æ ·åªæ˜¯æå‡äº†ä¸€ç‚¹ç‚¹./">https://pixelgs.github.ioï¼Œåšçš„å®éªŒæŒºç²¾å½©çš„ï¼Œç‰¹åˆ«æ˜¯ä¸¢å¼ƒä¸€å®šæ¯”ä¾‹çš„sfmç‚¹ï¼Œèƒ½çœ‹åˆ°æ•ˆæœå¾ˆæ˜¾è‘—ã€‚ä¸è¿‡åªçœ‹æŒ‡æ ‡çš„è¯ï¼Œä¸3DGSç›¸æ¯”ä¹Ÿåªæ˜¯æœ‰ä¸€ç‚¹ç‚¹çš„æå‡ã€‚å’Œä¹‹å‰çš„Mini-GSä¸€æ ·åªæ˜¯æå‡äº†ä¸€ç‚¹ç‚¹ã€‚</a></p></blockquote><blockquote><p>ä¸æƒ³è®°å½•å¤ªå¤šä¸œè¥¿ï¼Œé›¶æ•£çš„è®°å½•ä¸€äº›å§ã€‚</p></blockquote><p><strong>è®ºæ–‡ä¸­æåˆ°çš„è§‚ç‚¹ï¼š</strong></p><ul><li><p>å¯¹äºOriginal 3DGSï¼Œå¦‚æœè¾“å…¥çš„SfMç‚¹äº‘è¿‡äºç¨€ç–ï¼Œæ ¹æ®å®ƒçš„åˆå§‹åŒ–ç­–ç•¥ï¼Œä¼šäº§ç”Ÿæ¤­çƒè½´é•¿è¿‡å¤§çš„åˆå§‹åŒ–é«˜æ–¯ï¼Œä»è€Œå¯¼è‡´è¿™äº›é«˜æ–¯ä»å¤ªå¤šçš„viewpointså‚ä¸äº†è®¡ç®—ã€‚è¿™äº›é«˜æ–¯åˆåªåœ¨ä¸­å¿ƒç‚¹åœ¨æŠ•å½±åä½äºåƒç´ ç©ºé—´å†…æˆ–é™„è¿‘çš„viewpointä¸­ä¼šè¡¨ç°å‡ºæ¯”è¾ƒå¤§çš„æ¢¯åº¦ï¼Œè¿™æ„å‘³ç€ä»è¿™äº›viewpointçœ‹ï¼Œå¤§é«˜æ–¯åœ¨æŠ•å½±åçš„åƒç´ ç©ºé—´ä¸­è¦†ç›–äº†è¾ƒå¤§çš„åŒºåŸŸã€‚</p><p>ä½†æ˜¯åˆç”±äºOriginal 3DGSçš„Adaptive Density Controlç­–ç•¥ï¼Œè¿™äº›é«˜æ–¯å› ä¸ºä»å¤ªå¤šçš„viewpointå‚ä¸äº†è®¡ç®—ï¼Œåˆåªåœ¨å•ä¸ªviewpointä¸­å…·æœ‰æ˜¾è‘—çš„æ¢¯åº¦å¤§å°ï¼Œå› æ­¤è¿™äº›ç‚¹å¾ˆéš¾è¢«splitæˆ–cloneï¼Œå¯¼è‡´é‡å»ºçš„ç»“æœå¾ˆå·®ã€‚</p><blockquote><p>ç®€å•æ€»ç»“å°±æ˜¯ï¼š</p><p><strong>è¾“å…¥çš„ç‚¹è¿‡äºç¨€ç–ä¼šå¯¼è‡´åˆå§‹åŒ–çš„é«˜æ–¯å°ºåº¦è¿‡å¤§ï¼Œè€Œå°ºåº¦è¿‡å¤§çš„é«˜æ–¯å¹³å‡æ¢¯åº¦åˆè¾ƒå°ï¼Œä»è€Œå¯¼è‡´å¾ˆéš¾å‚ä¸Densificationã€‚</strong></p><blockquote><p>è¿™ä¸ªå’ŒMini-Splattingçš„è§‚ç‚¹æ˜¯ä¸€è‡´çš„ï¼ŒMini-Splattingä¹Ÿæåˆ°äº†â€œåŸºäºæ¢¯åº¦çš„åˆ†å‰²å’Œå…‹éš†ç­–ç•¥å¯èƒ½ä¼šåœ¨é¢œè‰²è¿‡æ¸¡å¹³æ»‘çš„åŒºåŸŸä¸­å¤±è´¥ï¼Œè¿™ä¼šå¯¼è‡´ç›¸åº”çš„è¿‡å¤§å°ºå¯¸çš„é«˜æ–¯ä¼šåœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­ä¿ç•™â€ã€‚</p></blockquote><p>åŸæ–‡ï¼š</p><p>We observed that areas inadequately modeled often have very sparse initial SfM point clouds, leading to the initialization of Gaussians in these areas with ellipsoids having larger axis lengths. This results in their involvement in the computation from too many viewpoints. These Gaussians exhibit larger gradients only in viewpoints where the center point, after projection, is within or near the pixel space. This implies that, from these viewpoints, the large Gaussians cover a larger area in the pixel space after projection. This results in these points having a smaller average gradient size of their NDC coordinates during the â€œAdaptive Density Controlâ€ process every 100 iterations (Eq. 3), because they participate in the computation from too many viewpoints and only have significant gradient sizes in individual viewpoints. Consequently, it is difficult for these points to split or clone, leading to poor modeling in these areas.</p></blockquote><p>è®ºæ–‡é‡Œé¢è¿˜å¯¹è¿™ä¸ªç°è±¡åšäº†å…¬å¼åˆ†æã€‚</p></li></ul><p><strong>å¯¹è®ºæ–‡ä¸­çš„ä¸€äº›è®¨è®ºï¼š</strong></p><ul><li><p>ä»Fig1å¯ä»¥çœ‹å‡ºï¼ŒPixel-GSä¸originalçš„3DGSç›¸æ¯”ï¼Œå¢åŠ äº†ä¸€å€çš„ç‚¹æ•°ï¼Œæ‰å¾—åˆ°äº†äº›å¾®çš„æŒ‡æ ‡æå‡ã€‚ã€‚ã€‚</p><p>ä¸ªäººè®¤ä¸ºè¿™é‡Œåšçš„ä¸æ˜¯å¾ˆå¥½ï¼Œå¦‚æœèƒ½æå‡æŒ‡æ ‡çš„åŒæ—¶ï¼Œç‚¹æ•°çš„å¢é•¿æ²¡è¿™ä¹ˆå¤¸å¼ ï¼Œå°±å¾ˆä¸é”™äº†ã€‚</p><img src="/images/paper-reading-pixel-gs/image-20240723151434072.png" style="zoom:80%;"></li><li><p>è®ºæ–‡3.3 Scaled Gradient Fieldéƒ¨åˆ†ä¹Ÿæåˆ°äº†ï¼Œä»–ä»¬é€šè¿‡â€œPixel-aware Gradientâ€çš„æ–¹æ³•å¯ä»¥è§£å†³viewpointä¸è¶³æˆ–é‡å¤çº¹ç†åŒºåŸŸçš„ä¼ªå½±ï¼Œä½†æ˜¯è¿™ä¹Ÿå¯¼è‡´ç›¸æœºé™„è¿‘çš„floatersè¿‡å¤šã€‚è¿™ä¸»è¦æ˜¯å› ä¸ºé è¿‘ç›¸æœºçš„æ¼‚æµ®ç‰©å æ®è¾ƒå¤§çš„å±å¹•ç©ºé—´ï¼Œä¸”å…¶NDCåæ ‡æ¢¯åº¦è¾ƒå¤§ï¼Œå¯¼è‡´ç‚¹äº‘ç”Ÿé•¿è¿‡ç¨‹ä¸­æ¼‚æµ®ç‰©æ•°é‡ä¸æ–­å¢åŠ ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªæ–°çš„é—®é¢˜ï¼Œä»–ä»¬åšäº†è¿™éƒ¨åˆ†çš„å·¥ä½œã€‚</p><blockquote><p>emmmï¼Œçœ‹åˆ°è¿™é‡Œä¸æƒ³ç»§ç»­çœ‹ä¸‹å»äº†ï¼Œä¸ªäººè§‰å¾—ï¼Œè¿™ç¯‡è®ºæ–‡çš„å·¥ä½œå¯¹æˆ‘è€Œè¨€ä¸æ˜¯å¾ˆæœ‰ä»·å€¼ã€‚</p><p>pixel-awareç¡®å®æœ‰æ•ˆæœï¼Œä½†æ˜¯ä¹Ÿä¼šå¯¼è‡´æ–°çš„é—®é¢˜ï¼Œè€Œä¸”æ•ˆæœå¹¶ä¸æ˜¯å¾ˆçªå‡ºï¼Œè¿˜å¯¼è‡´é«˜æ–¯æ•°é‡å¢é•¿æ›´å¤šã€‚</p></blockquote></li></ul><p><strong>æ”¶è·ï¼š</strong></p><ul><li><p>è¿˜æ˜¯ä¹‹å‰è®ºæ–‡çœ‹åˆ°çš„è§‚ç‚¹ï¼Œç›®å‰æ›´åšå®šäº†ï¼š</p><p>Original 3DGSçš„Adaptive Density Controlå®¹æ˜“å¯¼è‡´è¿‡å¤§çš„é«˜æ–¯è¢«ä¿ç•™ä¸‹æ¥ï¼Œæ ¸å¿ƒé—®é¢˜æ˜¯å¤§çš„é«˜æ–¯å¹³å‡æ¢¯åº¦å¯èƒ½è¿‡å°ã€‚äº§ç”Ÿçš„åŸå› å¯èƒ½æ˜¯å› ä¸ºå‚ä¸äº†è¿‡å¤šviewpointçš„è®¡ç®—ï¼Œè€Œå¤§éƒ¨åˆ†viewpointä¸­è¿™ä¸ªé«˜æ–¯å½±å“çš„åƒç´ è¾ƒå°ï¼Œå¯¼è‡´æ¢¯åº¦ä¹Ÿè¾ƒå°ï¼Œæœ€ç»ˆå¹³å‡æ¢¯åº¦ä¹Ÿå˜å¾—å¾ˆå°ã€‚ä¹Ÿå¯èƒ½æ˜¯å› ä¸ºçº¹ç†æ¯”è¾ƒå¼±ï¼Œé¢œè‰²è¿‡æ¸¡è¿‡äºå¹³æ»‘ï¼Œä»è€Œå¯¼è‡´å¹³å‡æ¢¯åº¦è¿‡å°ã€‚</p></li><li><p>å¦å¤–ï¼Œè®ºæ–‡åšäº†ä¸€äº›å…¬å¼æ¨å¯¼ï¼Œä»ç†è®ºå±‚é¢è®¨è®ºäº†ä¸Šé¢çš„é—®é¢˜ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> 3D Gaussian Splatting </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ã€ŠMini-Splattingï¼šRepresenting Scenes with a Constrained Number of Gaussiansã€‹</title>
      <link href="2024/07/21/paper-reading-mini-splatting/"/>
      <url>2024/07/21/paper-reading-mini-splatting/</url>
      
        <content type="html"><![CDATA[<h1 id="è®ºæ–‡é˜…è¯»ã€ŠMini-Splatting-Representing-Scenes-with-a-Constrained-Number-of-Gaussiansã€‹"><a href="#è®ºæ–‡é˜…è¯»ã€ŠMini-Splatting-Representing-Scenes-with-a-Constrained-Number-of-Gaussiansã€‹" class="headerlink" title="è®ºæ–‡é˜…è¯»ã€ŠMini-Splatting: Representing Scenes with a Constrained Number of Gaussiansã€‹"></a>è®ºæ–‡é˜…è¯»ã€ŠMini-Splatting: Representing Scenes with a Constrained Number of Gaussiansã€‹</h1><h2 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h2><h3 id="Densification"><a href="#Densification" class="headerlink" title="Densification"></a>Densification</h3><h4 id="Blur-Split"><a href="#Blur-Split" class="headerlink" title="Blur Split"></a>Blur Split</h4><p>è¿™ä¸ªç­–ç•¥çš„ç›®çš„æ˜¯ï¼šè§£å†³é«˜æ–¯ä¼ªå½±ã€‚</p><p>è®ºæ–‡æåˆ°äº†ï¼ŒåŸºäºæ¢¯åº¦çš„åˆ†å‰²å’Œå…‹éš†ç­–ç•¥å¯èƒ½ä¼šåœ¨é¢œè‰²è¿‡æ¸¡å¹³æ»‘çš„åŒºåŸŸä¸­å¤±è´¥ï¼Œè¿™ä¼šå¯¼è‡´ç›¸åº”çš„è¿‡å¤§å°ºå¯¸çš„é«˜æ–¯ä¼šåœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­ä¿ç•™ã€‚ä¸è¿‡3DGSä¹Ÿä¼šæ ¹æ®æŠ•å½±çš„2Dé«˜æ–¯åˆ†å¸ƒï¼Œå¯¹å±å¹•ç©ºé—´ä¸­å°ºå¯¸è¿‡å¤§çš„é«˜æ–¯è¿›è¡Œå‰ªæï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•ä¹Ÿè§£å†³ä¸äº†é‡å»ºä¸è¶³çš„é—®é¢˜ã€‚</p><blockquote><p>è®ºæ–‡åœ¨è¿™é‡Œè¯´åºŸè¯ï¼Œè¿™ä¸æ˜¯è§£å†³overlappingçš„é—®é¢˜æ‰è¿™ä¹ˆåšçš„ï¼Ÿ</p><p>3DGSçœ‹èµ·æ¥åªæ˜¯æ²¡æœ‰ç€é‡å»è§£å†³under-reconstructionçš„é—®é¢˜ï¼Œå°±åƒè®ºæ–‡åˆ†æçš„ï¼ŒåŸºäºæ¢¯åº¦çš„åˆ†å‰²å’Œå…‹éš†ç­–ç•¥åœ¨å¼±çº¹ç†çš„åŒºåŸŸæ•ˆæœä¸å¥½ï¼Œæ²¡æœ‰åˆ†è£‚æˆ–å…‹éš†è¶³å¤Ÿçš„é«˜æ–¯ç‚¹ï¼Œå°±å¯¼è‡´äº†under-reconstructionçš„é—®é¢˜ã€‚</p></blockquote><p>è®ºæ–‡è¯´ä»–ä»¬è®°å½•äº†æ¯ä¸ªåƒç´ æƒé‡æœ€å¤§çš„é«˜æ–¯å‡½æ•°çš„ç´¢å¼•$i_{max}(x)$ï¼Œä»¥åŠå¯¹è¿™ä¸ªåƒç´ å®é™…å½±å“æœ€å¤§çš„é«˜æ–¯å‡½æ•°çš„ç´¢å¼•$i(x)$ï¼Œå¹¶ä¸”è§‚å¯Ÿåˆ°é«˜æ–¯ä¼ªå½±ä¸$i_{max}(x)$æ›´ç›¸å…³ï¼Œè¿™è¯´æ˜å…·æœ‰è¾ƒå¤§çš„â€æœ€å¤§è´¡çŒ®é¢ç§¯â€œçš„é«˜æ–¯å‡½æ•°ä¼šå¯¼è‡´under-reconstructionã€‚</p><blockquote><p>æˆ‘ä¹Ÿè§‰å¾—ï¼Œå› ä¸ºæ—¢ç„¶å·²ç»é€ æˆäº†å½±å“ï¼Œè¯´æ˜è¿™ä¸ªé«˜æ–¯çš„æƒé‡ä¼šæ¯”è¾ƒå¤§ã€‚</p><p>è€Œä¼ªå½±é€šå¸¸çœ‹èµ·æ¥ä¸é€æ˜åº¦éƒ½ä¸æ˜¯é‚£ä¹ˆé«˜ï¼ˆå› ä¸ºçœ‹ç€å¾ˆæ¨¡ç³Šï¼‰ï¼Œæœ‰å¯èƒ½ä»–ä»¬çš„ä¸é€æ˜åº¦å¾ˆä½ï¼Œåªæ˜¯åœ¨æ·±åº¦æ’åºé‡Œé¢æ¯”è¾ƒé å‰ï¼Œå¯¼è‡´alpha-blendingä¸­çš„æƒé‡å°±æ¯”è¾ƒå¤§äº†ã€‚</p></blockquote><p>å› æ­¤ï¼ŒåŸºäºè¿™ä¸ªè§‚å¯Ÿï¼Œè®ºæ–‡æ ¹æ®å…¬å¼ï¼ˆ2ï¼‰è¯†åˆ«å¯¼è‡´æ¨¡ç³Šçš„é«˜æ–¯å‡½æ•°ï¼Œå¹¶ä¸”åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­å¯¹å…¶è¿›è¡Œåˆ†å‰²ï¼Œè¿™æ ·å¯ä»¥å¢å¼ºå›¾åƒæ¸…æ™°åº¦ã€‚</p><p><img src="/images/paper-reading-mini-splatting/image-20240721171315625.png"></p><p>è¿™éƒ¨åˆ†çš„å®éªŒå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/images/paper-reading-mini-splatting/image-20240721163151587.png" alt="image-20240721163151587"></p><h4 id="Depth-Reinitialization"><a href="#Depth-Reinitialization" class="headerlink" title="Depth Reinitialization"></a>Depth Reinitialization</h4><blockquote><p>è¿™éƒ¨åˆ†åšçš„æ²¡æœ‰æ„æ€ï¼Œä¸ªäººæ„Ÿè§‰æ¯”è¾ƒç‰µå¼ºäº†ã€‚</p><p>å¤§å®¶æ¸²æŸ“æ·±åº¦åŸºæœ¬éƒ½æ˜¯ç”¨é«˜æ–¯ä¸­å¿ƒçš„æ·±åº¦æ¥è¿›è¡Œæ¸²æŸ“çš„ï¼Œä½†æ˜¯è®ºæ–‡ä½œè€…è®¤ä¸ºè¿™ä¸ªä¼šäº§ç”Ÿè¯¯å¯¼ï¼Œå¯¼è‡´æ·±åº¦ç‚¹äº‘å­˜åœ¨ä¼ªå½±ã€‚å› æ­¤ä»–ä»¬è®¡ç®—äº†ç›¸æœºå°„çº¿ä¸å¤´çƒçš„äº¤ç‚¹ï¼Œä»¥äº¤ç‚¹çš„ä¸­ç‚¹ä½œä¸ºé«˜æ–¯çš„æ·±åº¦ã€‚</p><blockquote><p>å¥½å¥½çœ‹çœ‹3Dé«˜æ–¯å¾€2Dé«˜æ–¯çš„æŠ•å½±ï¼Œå°±ä¼šæ„Ÿè§‰ï¼Œå¤§å®¶ç”¨çš„æ–¹æ³•ä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚ã€‚ã€‚</p><p>ä¸è¿‡åªæ˜¯æ„Ÿè§‰ã€‚</p></blockquote><p>è¿™é‡Œè®ºæ–‡æåˆ°å…¶å®ç”¨é«˜æ–¯ä¸­å¿ƒçš„æ·±åº¦é¡µæœ‰ç›¸ä¼¼çš„æ¸²æŸ“è´¨é‡ã€‚</p><blockquote><p>æ‰€ä»¥å…¶å®è®ºæ–‡æ•ˆæœå¥½åªæ˜¯å•çº¯çš„åªç”¨æƒé‡æœ€å¤§çš„é«˜æ–¯æ·±åº¦ä½œä¸ºç›¸ä¼¼çš„æ·±åº¦äº†ï¼Œä»–è¿™ä¸ªè®¡ç®—äº¤ç‚¹ä¸­ç‚¹çš„æ–¹æ³•ï¼Œä¸ªäººæ„Ÿè§‰æ²¡å¿…è¦ã€‚ã€‚ã€‚</p></blockquote></blockquote><h3 id="Simplification"><a href="#Simplification" class="headerlink" title="Simplification"></a>Simplification</h3><p>è¿™é‡Œæ²¡æ„Ÿè§‰åˆ°è®ºæ–‡åšäº†ä»€ä¹ˆå¾ˆçªå‡ºçš„è´¡çŒ®ï¼Œè®°å½•å‡ ä¸ªè®ºæ–‡æåˆ°çš„è§‚ç‚¹ï¼š</p><ul><li>é€šè¿‡ç»™æ¯ä¸ªé«˜æ–¯åˆ†å¸ƒåˆ†é…ä¸€ä¸ªé¢„å®šä¹‰çš„é‡è¦æ€§å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°ä¿®å‰ªä½é‡è¦æ€§çš„é«˜æ–¯åˆ†å¸ƒã€‚è™½ç„¶è¿™ç§ç­–ç•¥å¯¹äºå»é™¤æœ‰é™æ•°é‡çš„é«˜æ–¯å‡½æ•°æ˜¯æœ‰æ•ˆçš„ï¼Œä½†å½“å‰ªææ¯”ç›¸å¯¹è¾ƒå¤§æ—¶ï¼Œå®ƒå¯èƒ½å¯¼è‡´æ¸²æŸ“è´¨é‡çš„å´©æºƒã€‚ä¸»è¦é—®é¢˜åœ¨äº<strong>é«˜æ–¯é‡è¦æ€§åªåæ˜ äº†ç®€åŒ–å‰çš„é‡è¦æ€§ã€‚ç›´æ¥å‰ªæå¾ˆå®¹æ˜“ç ´åå±€éƒ¨å‡ ä½•</strong>ï¼Œè¿™åè¿‡æ¥åˆé™ä½äº†è¿›ä¸€æ­¥ä¼˜åŒ–åçš„æœ€ç»ˆæ¸²æŸ“è´¨é‡ã€‚</li><li><strong>ä¸ç¡®å®šæ€§å‰ªæç›¸æ¯”ï¼Œéšæœºé‡‡æ ·ç­–ç•¥å¯ä»¥æ›´å¥½åœ°ä¿æŒæ•´ä½“å‡ ä½•å½¢çŠ¶</strong>ã€‚æˆ‘ä»¬å°†é«˜æ–¯é‡è¦æ€§çº³å…¥æ¯ä¸ªé«˜æ–¯çš„æŠ½æ ·æ¦‚ç‡ï¼Œè¿™ç§é‡è¦æ€§åŠ æƒé‡‡æ ·ç­–ç•¥å…·æœ‰æ›´å¼ºçš„ä¿æŒå‡ ä½•è´¨é‡çš„èƒ½åŠ›ï¼Œä»è€Œå¢å¼ºäº†æœ€ç»ˆçš„æ¸²æŸ“ç»“æœ</li></ul><p>æ€»ç»“å°±æ˜¯ï¼šæ ¹æ®é‡è¦æ€§æ¥å‰ªæä¸å¥½ï¼Œå®¹æ˜“ç ´åå±€éƒ¨çš„å‡ ä½•ç»“æ„ã€‚æœ€å¥½çš„åŠæ³•æ˜¯ç»“åˆé«˜æ–¯çš„æƒé‡è¿›è¡Œéšæœºé‡‡æ ·å‰ªæã€‚</p><blockquote><p>æ”¾åˆ°SLAMé‡Œé¢é‚£å°±æ˜¯learnable-mask * weight</p><p>åˆæ˜¯ä¸€ä¸ªå¾ˆæ–¹ä¾¿å®ç°è€Œä¸”æ¯”è¾ƒæœ‰æ•ˆçš„å°æŠ€å·§</p><p>learnable-maskå¤ªæ£’äº†ï¼</p></blockquote><h2 id="Experiment"><a href="#Experiment" class="headerlink" title="Experiment"></a>Experiment</h2><p>è¿™ç¯‡è®ºæ–‡åšäº†å¾ˆå¤šæœ‰æ„æ€çš„å®éªŒï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹</p><h3 id="å‰ªæå’Œé‡‡æ ·ç­–ç•¥"><a href="#å‰ªæå’Œé‡‡æ ·ç­–ç•¥" class="headerlink" title="å‰ªæå’Œé‡‡æ ·ç­–ç•¥"></a>å‰ªæå’Œé‡‡æ ·ç­–ç•¥</h3><p>è®ºæ–‡æåˆ°å‡å°‘é«˜æ–¯æ•°æœ€ç›´æ¥çš„æ–¹æ³•æ˜¯è¿›è¡Œå‰ªæå’Œé‡‡æ ·ï¼Œè¿™é‡Œä»–ä»¬å°è¯•äº†å››ç§æ–¹æ³•ï¼š(b) è®¡ç®—æ¯ä¸ªé«˜æ–¯çš„é‡è¦æ€§ï¼Œé‡è¦æ€§ä½çš„å‰ªæï¼›(c) éšæœºé‡‡æ ·ï¼›(d) ç½‘æ ¼é‡‡æ ·ï¼›(e) å¯†åº¦ä¿æŒé‡‡æ ·ã€‚è¿™äº›ç»“æœè¡¨æ˜ï¼Œåœ¨ä¿æŒæ¸²æŸ“è´¨é‡çš„åŒæ—¶ï¼Œè§£å†³é«˜æ–¯åˆ†å¸ƒçš„ä½æ•ˆå’Œå®ç°æœ€å°é«˜æ–¯è¡¨ç¤ºéœ€è¦è¿›ä¸€æ­¥çš„åŠªåŠ›ã€‚</p><p><img src="/images/paper-reading-mini-splatting/image-20240721154422922.png"></p><p>è®ºæ–‡ä¹Ÿæåˆ°äº†ï¼Œä¿®å‰ªç­–ç•¥å¯ä»¥å°†é«˜æ–¯æ•°é‡å¤§å¹…å‡å°‘ï¼Œæ¯”å¦‚(b)æ–¹æ³•å¯ä»¥ä»610wé™ä½åˆ°60wï¼Œä½†æ˜¯PSNRä¼šé™ä½ï¼Œè€Œä¸”ä»ç„¶ä¼šå­˜åœ¨overlappingå’Œunder-reconstructionçš„é—®é¢˜ã€‚</p><blockquote><p>å¾ˆæ˜¾ç„¶å•Šï¼Œå› ä¸ºåªæ˜¯è¿›è¡Œäº†ä¿®å‰ªï¼Œè€Œä¸æ˜¯è¿›è¡Œäº†æ›´åˆç†çš„density controlã€‚ä¸ç®¡æ•°é‡å¤šå¯¡ï¼Œåªè¦densityæ˜¯ä¸åˆç†çš„ï¼Œå°±ä¸€å®šä¼šå­˜åœ¨overlappingå’Œunder-reconstructionã€‚</p><p>ä»è¿™ä¸ªå®éªŒå’Œä½œè€…çš„åˆ†æå¯ä»¥è¿›ä¸€æ­¥çš„å‡ºä¸€ä¸ªç»“è®ºï¼š</p><ul><li><p>é¦–å…ˆï¼Œé«˜æ–¯çš„æ•°é‡æ˜¯å¯ä»¥é€šè¿‡ç®€å•çš„ä¿®å‰ªæˆ–é‡‡æ ·æ•°é‡æ˜¾è‘—å‡å°‘çš„ï¼Œå¯¹PSNRç­‰æŒ‡æ ‡å½±å“ä¸å¤§ï¼›</p></li><li><p>å¦å¤–ï¼Œé‡å»ºçš„ç»“æœå¥½åï¼Œå—é«˜æ–¯æ•°é‡å¤šå¯¡çš„å½±å“å°ï¼Œå—densityæ˜¯å¦åˆç†çš„å½±å“å¤§ï¼›</p></li><li><p>ä¸å½±å“å…¶ä»–æŒ‡æ ‡çš„åŒæ—¶å‡å°‘é«˜æ–¯çš„æ•°é‡å€¼å¾—ç ”ç©¶ï¼Œè€Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šå®ç°æ›´åˆç†çš„densityåˆ†å¸ƒæ›´å€¼å¾—ç ”ç©¶ï¼Œå‡å°‘é«˜æ–¯ç‚¹æ•°å’Œæ›´åˆç†çš„density controlæ˜¯ç›¸è¾…ç›¸æˆçš„ã€‚</p><blockquote><p>è®ºæ–‡ä¹Ÿæ˜¯åŒæ—¶ç ”ç©¶äº†Densificationå’ŒSimplification</p></blockquote></li></ul></blockquote><h2 id="ä¸ªäººè¯„ä»·"><a href="#ä¸ªäººè¯„ä»·" class="headerlink" title="ä¸ªäººè¯„ä»·"></a>ä¸ªäººè¯„ä»·</h2><p>è®ºæ–‡åšäº†å¾ˆå¤šå®éªŒï¼Œè®²äº†è‡ªå·±è§‚å¯Ÿåˆ°çš„å¾ˆå¤šé—®é¢˜ï¼Œå¹¶ä¸”é’ˆå¯¹æ€§çš„ç ”ç©¶äº†Densificationå’ŒSimplificationç­–ç•¥ã€‚</p><p>ä¸è¿‡å…¶ä¸­ä¸ªäººè§‰å¾—æœ€åˆ›æ–°çš„è¿˜æ˜¯Densificationä¸­çš„Blur Splitï¼Œè€ŒDepth Reinitializationå°±æœ‰ç‚¹ç‰µå¼ºäº†ã€‚å¦å¤–ï¼ŒSimplificationè¿™é‡Œä¹Ÿæåˆ°äº†è§‚å¯Ÿåˆ°çš„ä¸€ä¸ªé‡è¦ç°è±¡ï¼Œå³<strong>éšæœºé‡‡æ ·ç­–ç•¥å¯ä»¥æ›´å¥½åœ°ä¿æŒæ•´ä½“å‡ ä½•å½¢çŠ¶</strong>ï¼Œè¿™ä¸ªåœ¨Compact 3DGSä¸€ç³»åˆ—çš„å·¥ä½œä¸­å¾—åˆ°äº†éªŒè¯ã€‚</p><p>åç»­çš„è¯å¯ä»¥å€Ÿé‰´è¿™ç¯‡è®ºæ–‡çš„æ€è·¯ï¼Œå›´ç»•ï¼š</p><ul><li><p>æ›´å…¨é¢çš„Densificationï¼Œè€Œä¸æ˜¯ä»…ä»…å…³æ³¨äº§ç”Ÿä¼ªå½±çš„éƒ¨åˆ†é«˜æ–¯ï¼›</p><blockquote><p>è¿™ä¸ªç›®å‰è¿˜æ˜¯æ²¡æœ‰çœ‹åˆ°åšçš„æ¯”è¾ƒå¥½çš„å·¥ä½œå‡ºç°ã€‚</p></blockquote></li><li><p>ç»“åˆé«˜æ–¯æƒé‡å’Œlearnable-maskçš„Simplificationç­–ç•¥ã€‚</p><blockquote><p>è¿™ä¸ªåº”è¯¥å·²ç»ä¸åˆ›æ–°äº†ï¼Œä½†æ˜¯æ•ˆæœå¾ˆå¥½ã€‚</p></blockquote></li></ul>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> 3D Gaussian Splatting </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ã€ŠGaussian Splatting with Localized Points Managementã€‹</title>
      <link href="2024/07/20/paper-reading-lpm/"/>
      <url>2024/07/20/paper-reading-lpm/</url>
      
        <content type="html"><![CDATA[<h1 id="è®ºæ–‡é˜…è¯»ã€ŠGaussian-Splatting-with-Localized-Points-Managementã€‹"><a href="#è®ºæ–‡é˜…è¯»ã€ŠGaussian-Splatting-with-Localized-Points-Managementã€‹" class="headerlink" title="è®ºæ–‡é˜…è¯»ã€ŠGaussian Splatting with Localized Points Managementã€‹"></a>è®ºæ–‡é˜…è¯»ã€ŠGaussian Splatting with Localized Points Managementã€‹</h1><h2 id="Motivation-Adaptive-Density-Controlçš„å±€é™æ€§"><a href="#Motivation-Adaptive-Density-Controlçš„å±€é™æ€§" class="headerlink" title="Motivation: Adaptive Density Controlçš„å±€é™æ€§"></a>Motivation: Adaptive Density Controlçš„å±€é™æ€§</h2><p>è®ºæ–‡åœ¨Introductionéƒ¨åˆ†æåˆ°äº†Adaptive Density Controlå­˜åœ¨å‡ ä¸ªé—®é¢˜ï¼š</p><ol><li><p>Thresholding simply the average gradient for deciding the regions for point densification tends to overlook under-optimized points. For example, larger Gaussian points typically exhibit lower average gradients, frequently appearing across various views in screen space.</p><blockquote><p>å•çº¯é‡‡ç”¨å¹³å‡æ¢¯åº¦é˜ˆå€¼æ³•ç¡®å®šç‚¹å¯†åº¦åŒºåŸŸï¼Œ<strong>å®¹æ˜“å¿½ç•¥ä¼˜åŒ–ä¸è¶³çš„ç‚¹</strong>ã€‚ä¾‹å¦‚ï¼Œè¾ƒå¤§çš„é«˜æ–¯ç‚¹é€šå¸¸è¡¨ç°å‡ºè¾ƒä½çš„å¹³å‡æ¢¯åº¦ï¼Œç»å¸¸å‡ºç°åœ¨å±å¹•ç©ºé—´çš„ä¸åŒè§†å›¾ä¸­ã€‚</p></blockquote></li><li><p>Point sparsity makes it difficult to add sufficient and reliable points to comprehensively cover the scene. </p><blockquote><p>ç‚¹ç¨€ç–æ€§å¯¼è‡´<strong>éš¾ä»¥æ·»åŠ è¶³å¤Ÿã€å¯é çš„ç‚¹æ¥å…¨é¢è¦†ç›–åœºæ™¯</strong>ã€‚</p></blockquote></li><li><p>Falsely optimized Gaussian points could cause negative effects, e.g., occluding other good points and leading to incorrect depth estimates.</p><blockquote><p><strong>é”™è¯¯ä¼˜åŒ–çš„é«˜æ–¯ç‚¹å¯èƒ½ä¼šäº§ç”Ÿè´Ÿé¢å½±å“</strong>ï¼Œä¾‹å¦‚ï¼Œé®æŒ¡å…¶ä»–å¥½çš„ç‚¹å¹¶å¯¼è‡´ä¸æ­£ç¡®çš„æ·±åº¦ä¼°è®¡ã€‚</p></blockquote></li></ol><h2 id="Solution-è¯†åˆ«å¯¼è‡´æ¸²æŸ“é”™è¯¯çš„ç‚¹"><a href="#Solution-è¯†åˆ«å¯¼è‡´æ¸²æŸ“é”™è¯¯çš„ç‚¹" class="headerlink" title="Solution: è¯†åˆ«å¯¼è‡´æ¸²æŸ“é”™è¯¯çš„ç‚¹"></a>Solution: è¯†åˆ«å¯¼è‡´æ¸²æŸ“é”™è¯¯çš„ç‚¹</h2><p>åœ¨Introductionéƒ¨åˆ†è®ºæ–‡æåˆ°ï¼Œä»–ä»¬çš„<strong>æ ¸å¿ƒæ€è·¯æ˜¯ï¼šidentifying those 3D Gaussian points leading to rendering errorsï¼Œå³è¯†åˆ«é‚£äº›å¯¼è‡´æ¸²æŸ“é”™è¯¯çš„3Dé«˜æ–¯ç‚¹ã€‚</strong></p><h3 id="Point-management-Since-existing-3DGS-variantsã€åŸæ–¹æ³•ã€‘"><a href="#Point-management-Since-existing-3DGS-variantsã€åŸæ–¹æ³•ã€‘" class="headerlink" title="Point management Since existing 3DGS variantsã€åŸæ–¹æ³•ã€‘"></a>Point management Since existing 3DGS variantsã€åŸæ–¹æ³•ã€‘</h3><p>åŸæ–¹æ³•æ˜¯ä½¿ç”¨å¹³å‡æ¢¯åº¦çš„é˜ˆå€¼æ¥å†³å®šç‚¹çš„å¯†åº¦ã€‚å¯¹äºæ¯ä¸€ä¸ªé«˜æ–¯ç‚¹$G_i$ï¼Œ3DGSè·Ÿè¸ªæ‰€æœ‰æ¸²æŸ“è§†å›¾ä¸­ä½ç½®æ¢¯åº¦$\frac{\partial L_\pi}{\partial \mu_i}$çš„å¤§å°ï¼Œå°†å…¶å¹³å‡ä¸ºä¸€ä¸ªé‡$T_i$ã€‚æ¯æ¬¡è®­ç»ƒè¿­ä»£çš„æ—¶å€™ï¼Œåˆ¤æ–­$T_i$æ˜¯å¦è¶…è¿‡é¢„å®šä¹‰çš„é˜ˆå€¼ï¼Œå¦‚æœè¶…è¿‡å°±è®¤ä¸ºè¿™ä¸ªç‚¹ä¸èƒ½å……åˆ†ä»£è¡¨ç›¸åº”çš„3DåŒºåŸŸã€‚ä¹‹åä¼šæ ¹æ®é«˜æ–¯çš„å¤§å°æ¥è¿›è¡Œå¤„ç†ï¼Œå¤§çš„é«˜æ–¯ä¼šè¢«åˆ†è£‚ï¼Œå°çš„é«˜æ–¯ä¼šè¢«å…‹éš†ã€‚</p><p>è®ºæ–‡æåˆ°ä¸Šé¢è¿™ç§æ–¹æ³•<strong>æ— æ³•è¯†åˆ«æ‰€æœ‰éœ€è¦ç‚¹è‡´å¯†åŒ–çš„3DåŒºåŸŸã€‚</strong>è¿™æ˜¯å› ä¸ºï¼Œ<strong>é€šå¸¸åœºæ™¯å‡ ä½•çš„å±€éƒ¨å¤æ‚æ€§å˜åŒ–å¾ˆå¤§ï¼Œè¿™è¶…å‡ºäº†ä»»ä½•åŸºäºå•ä¸€å€¼çš„é˜ˆå€¼çš„èŒƒå›´ã€‚</strong>æ­¤å¤–ï¼Œ<strong>ç¼ºä¹é€‚å½“çš„æœºåˆ¶æ¥å¤„ç†å…·æœ‰è´Ÿé¢å½±å“çš„ç—…æ€ç‚¹</strong>ã€‚</p><h3 id="Localized-Gaussian-Point-Managementã€è®ºæ–‡æ–¹æ³•ã€‘"><a href="#Localized-Gaussian-Point-Managementã€è®ºæ–‡æ–¹æ³•ã€‘" class="headerlink" title="Localized Gaussian Point Managementã€è®ºæ–‡æ–¹æ³•ã€‘"></a>Localized Gaussian Point Managementã€è®ºæ–‡æ–¹æ³•ã€‘</h3><p>è®ºæ–‡æåˆ°ï¼Œä»–ä»¬å¼•å…¥äº†ä¸€ç§æ–°çš„æ¨¡å‹æ— å…³ç‚¹ç®¡ç†æ–¹æ³•â€”â€”å±€éƒ¨ç‚¹ç®¡ç†(localization point management, LPM)ï¼Œè¯¥æ–¹æ³•åˆ©ç”¨å¤šè§†å›¾å‡ ä½•çº¦æŸï¼Œåœ¨å›¾åƒæ¸²æŸ“é”™è¯¯çš„æŒ‡å¯¼ä¸‹ï¼Œè¯†åˆ«å¯¼è‡´3Dç‚¹é”™è¯¯çš„ç‚¹ã€‚è¿™ç§æ–¹æ³•å¯ä»¥ä¸ç°æœ‰çš„3DGSæ¨¡å‹æ— ç¼é›†æˆï¼Œè€Œæ— éœ€è¿›è¡Œæ¶æ„ä¿®æ”¹ã€‚</p><blockquote><p>çœ‹åˆ°è¿™é‡Œï¼Œåšä¸€ä¸ªçŒœæµ‹ï¼ŒæŒ‰ç…§è®ºæ–‡çš„æè¿°ï¼Œæœ€ç®€å•çš„æ–¹æ³•å¯ä»¥æ˜¯ï¼š</p><p>é¦–å…ˆï¼Œç”Ÿæˆæ¯ä¸€å¸§çš„error mapï¼Œæ ‡è®°æ¯ä¸€ä¸ªerror mapä¸­å¯¹åº”çš„é«˜æ–¯ç‚¹ã€‚</p><p>ä¹‹åï¼Œè®¡ç®—æ¯å‡ å¸§error mapå¯¹åº”çš„é«˜æ–¯ç‚¹é›†çš„äº¤é›†ï¼Œä¸­é—´å­˜åœ¨çš„é«˜æ–¯ç‚¹å°±æ˜¯é€šè¿‡â€œå¤šè§†å›¾å‡ ä½•çº¦æŸâ€è¯†åˆ«çš„å¯¼è‡´é”™è¯¯çš„é«˜æ–¯ç‚¹ã€‚</p><p>ä½†æ˜¯é”™è¯¯çš„é«˜æ–¯ç‚¹é€šå¸¸æ˜¯å½±å“å›ºå®šçš„ä¸€ä¸ªåŒºåŸŸï¼Œè€Œä¸Šé¢åšäº¤é›†å¤ªç®€å•ç²—æš´äº†ï¼Œæœ€å¥½è¿˜æ˜¯ä¸¤å¼ å›¾åƒä¹‹é—´å…ˆåšä¸€ä¸ªç‰¹å¾åŒ¹é…ï¼Œåªè®¡ç®—å¯¹åº”åŒºåŸŸä¸­é”™è¯¯é«˜æ–¯ç‚¹çš„äº¤é›†ã€‚ï¼ˆä½†æ˜¯è¿™æ ·å°±æœ‰ç‚¹éº»çƒ¦äº†ï¼Œç‰¹å¾åŒ¹é…ä¼šäº§ç”Ÿé¢å¤–çš„æ•°æ®ï¼Œå°±åƒä½¿ç”¨external trackerçš„3dgs slamä¸€æ ·ï¼‰</p><blockquote><p>å¦‚æœæ”¾åˆ°3dgs slamé‡Œé¢ï¼Œå°±æœ‰ä¸¤ä¸ªæ€è·¯äº†ï¼š</p><ul><li>æ¥å—external trackerï¼Œå¹¶ä¸”å°†å…¶ç»“æœç”¨äºLocalized Gaussian Point Managementï¼Œé¢„è®¡å¯¹mapperçš„ç»†èŠ‚æœ‰æå‡ï¼›</li><li>æ‹’ç»ä½¿ç”¨external trackerï¼Œé‚£ä¹ˆå°±åªèƒ½å®ç°ç²—æš´çš„ã€åŸºäºäº¤é›†çš„Localized Gaussian Point Managementï¼Œç¼–ç¨‹å®ç°å¾ˆç®€å•ï¼Œä½†æ˜¯ä¸ä¸€å®šèƒ½æå‡æ•ˆæœã€‚</li></ul></blockquote></blockquote><p>è®ºæ–‡æ•´ä½“çš„pipelineå¦‚ä¸‹æ‰€ç¤ºï¼š</p><img src="/images/paper-reading-lpm/image-20240720162653918.png" style="zoom: 67%;"><p><strong>Error map generation</strong>    ä½¿ç”¨è®ºæ–‡ã€ŠZ. Li, Z. Chen, Z. Li, and Y. Xu. Spacetime gaussian feature splatting for real-time dynamic view synthesis. arXiv preprint arXiv:2312.16812, 2023.ã€‹çš„è¯¯å·®å‡½æ•°æ¥ç”Ÿæˆè¯¯å·®å›¾</p><p><strong>Error contributing 3D zone identification</strong>    ä¸ºäº†å°†æ¸²æŸ“è¯¯å·®æŠ•å½±å›3Dç©ºé—´ï¼Œè®ºæ–‡åˆ©ç”¨äº†å¤šè§†å›¾å‡ ä½•çº¦æŸä¸‹ä¸åŒè§†å›¾ä¹‹é—´çš„åŒºåŸŸå¯¹åº”å…³ç³»ã€‚è¿™æ¶‰åŠä»¥ä¸‹ä¸¤ä¸ªå…³é”®æ­¥éª¤ï¼š</p><ul><li><p><strong>Cross-view region mapping</strong></p><p>é€‰ä¸€ä¸ªç›¸é‚»å¸§ä½œä¸ºReferred Viewï¼Œæ ¹æ®LightGlueçš„é¢„æµ‹æ¥ä»Current Viewå’ŒReffered Viewä¸­å¯»æ‰¾åŒ¹é…å…³ç³»ï¼Œé€šè¿‡åŒ¹é…ç‚¹æ¥é€‰æ‹©é…å¯¹çš„åŒºåŸŸï¼Œæœ€ç»ˆå¾—åˆ°å…·æœ‰æ¸²æŸ“è¯¯å·®çš„é…å¯¹åŒºåŸŸã€‚</p></li><li><p><strong>2D-to-3D projection</strong></p><p>è·å¾—å…·æœ‰æ¸²æŸ“è¯¯å·®çš„é…å¯¹åŒºåŸŸåï¼Œåˆ†åˆ«è®¡ç®—Current Viewå’ŒReffered Viewä¸­ç›¸å…³åŒºåŸŸå¯¹åº”çš„è§†é”¥ï¼Œå¹¶ä¸”å¾—åˆ°å°„çº¿çš„äº¤ç‚¹ï¼Œè®¡ç®—è¿™äº›äº¤ç‚¹çš„æœ€å°åŒ…å›´çƒé¢ï¼Œè¯¥çƒé¢è¢«è®¤å®šä¸ºè¯¯å·®æºçš„ä¸‰ç»´åŒºåŸŸã€‚</p></li></ul><p><strong>Points manipulation</strong>    è®ºæ–‡åœ¨3DGSçš„ADCåŸºç¡€ä¸Šï¼Œè¯†åˆ«å‡ºè¯¯å·®æº3DåŒºåŸŸï¼Œåœ¨åŒºåŸŸå†…è¿›è¡Œå±€éƒ¨çš„ç‚¹æ·»åŠ æˆ–è€…å‡ ä½•æ ¡æ­£ã€‚</p><p>å…¶ä¸­ï¼Œå¯¹äºç‚¹çš„æ·»åŠ ï¼Œè€ƒè™‘äº†ä¸¤ç§å¸¸è§çš„æƒ…å†µï¼š</p><ul><li>åœ¨å­˜åœ¨ç‚¹çš„æƒ…å†µä¸‹ï¼Œåº”ç”¨ç‚¹å¯†åº¦å¯¹åŸå§‹å¯¹åº”ç‚¹è¿›è¡Œå±€éƒ¨è¡¥å…¨ã€‚è®ºæ–‡è®¾ç½®äº†ä¸€ä¸ªè¾ƒä½çš„é˜ˆå€¼æ¥é€‰æ‹©éœ€è¦è‡´å¯†åŒ–çš„ç‚¹ï¼Œä»¥å¢å¼ºå‡ ä½•ç»†èŠ‚ã€‚è‡´å¯†åŒ–è§„å¾‹ä¸3DGSä¸€è‡´ï¼Œä½†èšç„¦äºæœ€éœ€è¦è‡´å¯†åŒ–çš„å±€éƒ¨3DåŒºåŸŸã€‚å…·ä½“æ¥è¯´ï¼Œå¯¹äºå°é«˜æ–¯å‡½æ•°ï¼Œè®ºæ–‡çš„ç­–ç•¥åŒ…æ‹¬å…‹éš†é«˜æ–¯å‡½æ•°ï¼ŒåŒæ—¶ä¿æŒå®ƒä»¬çš„å¤§å°ï¼Œå¹¶æ²¿ç€ä½ç½®æ¢¯åº¦é‡æ–°å®šä½å®ƒä»¬ï¼Œä»¥æ›´å¥½åœ°æ•æ‰æ–°å‡ºç°çš„å‡ ä½•ç‰¹å¾ã€‚ç›¸åï¼Œä½äºé«˜æ–¹å·®åŒºåŸŸçš„è¾ƒå¤§çš„é«˜æ–¯åˆ†å¸ƒè¢«åˆ†å‰²æˆè¾ƒå°çš„ç‚¹ï¼Œä»¥æ›´å‡†ç¡®åœ°è¡¨ç¤ºåº•å±‚å‡ ä½•å½¢çŠ¶ã€‚</li><li>åœ¨ç‚¹ç¨€ç–çš„æƒ…å†µä¸‹ï¼Œè®ºæ–‡åœ¨ä¸‰ç»´åŒºåŸŸçš„ä¸­å¿ƒæ·»åŠ æ–°çš„é«˜æ–¯ç‚¹ã€‚</li></ul><p>å¯¹äºå‡ ä½•æ ¡æ­£ï¼Œè®ºæ–‡è®¤ä¸ºåœ¨è¿›è¡Œalpha-blendingçš„æ—¶å€™ï¼Œå¦‚æœè¯¯å·®åŒºåŸŸæœ€å‰æ–¹çš„ç‚¹ä¸é€æ˜åº¦æœ€é«˜ï¼Œå°±å¯èƒ½ä¼šé®æŒ¡æœ‰æ•ˆçš„ç‚¹ï¼Œå¯¼è‡´æ·±åº¦ä¼°è®¡é”™è¯¯ã€‚å› æ­¤è®ºæ–‡è®¤ä¸ºè¿™äº›ç‚¹æ˜¯æ½œåœ¨çš„ç—…æ€ç‚¹ï¼Œå¯¹äºè¿™äº›ç‚¹ï¼Œè®ºæ–‡çš„æ–¹æ³•ä¼šé‡ç½®å®ƒä»¬çš„ä¸é€æ˜åº¦ï¼Œæä¾›æ ¡æ­£çš„æœºä¼šï¼Œè¿›ä¸€æ­¥æ ¡å‡†å‡ ä½•å½¢çŠ¶ã€‚</p><p>å¦å¤–ï¼Œä¸ºäº†minimize model expansionï¼Œè®ºæ–‡æ ¹æ®ä¸é€æ˜åº¦ä»ä½åˆ°é«˜çš„è‡ªé€‚åº”ä¿®å‰ªç‚¹ï¼Œä¿®å‰ªçš„æ•°é‡ç”±åŒºåŸŸä¸­çš„ç‚¹å¯†åº¦å†³å®šï¼Œè¿™ç§æ–¹æ³•å¯ä»¥ä¿è¯è®ºæ–‡çš„ç‚¹ç®¡ç†ç­–ç•¥ä¿æŒæˆæœ¬æ•ˆç›Šï¼Œé€‚åº”åœºæ™¯è¡¨ç¤ºä¸æ–­å˜åŒ–çš„éœ€æ±‚ã€‚</p><blockquote><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè®ºæ–‡çš„æ ¸å¿ƒæ€è·¯å…¶å®æ˜¯ï¼š</p><p>å¯¹äºå½“å‰å¸§çš„ä¼˜åŒ–è¿‡ç¨‹ï¼Œé¦–å…ˆå¯»æ‰¾å¯¼è‡´è¯¯å·®çš„ä¸‰ç»´åŒºåŸŸ</p><ul><li>è®¡ç®—current viewçš„error mapï¼›</li><li>æ‰¾ä¸€ä¸ªç›¸é‚»å¸§ä½œä¸ºreferred viewï¼Œå’Œcurrent viewé€šè¿‡lightglueåšç‰¹å¾åŒ¹é…ï¼Œå¾—åˆ°åŒ¹é…ç‚¹å¯¹ï¼›</li><li>æ ¹æ®åŒ¹é…ç‚¹å¯¹å’Œerror mapå¾—åˆ°è¯¯å·®åŒºåŸŸï¼ˆ2Dï¼‰ï¼Œè®¡ç®—current viewå’Œreffered viewåŒºåŸŸå†…çš„åƒç´ ç‚¹å¯¹åº”çš„å°„çº¿ï¼ˆè®¡ç®—è§†é”¥ï¼‰ï¼›</li><li>æ±‚å°„çº¿ï¼ˆè§†é”¥ï¼‰çš„äº¤ç‚¹ï¼Œè®¡ç®—äº¤ç‚¹çš„æœ€å°åŒ…å›´çƒé¢ï¼Œçƒé¢åŒ…å›´çš„åŒºåŸŸå°±æ˜¯è¯¯å·®æºçš„ä¸‰ç»´åŒºåŸŸã€‚</li></ul><p>ä¹‹ååœ¨3DGSçš„è‡ªé€‚åº”å¯†åº¦æ§åˆ¶ï¼ˆADCï¼‰åŸºç¡€ä¸Šï¼Œåœ¨è¯¯å·®æºçš„ä¸‰ç»´åŒºåŸŸä¸­è¿›è¡Œå±€éƒ¨çš„ç‚¹æ·»åŠ æˆ–æ ¡æ­£</p><ul><li>å­˜åœ¨é«˜æ–¯ç‚¹ï¼šç”¨ADCæ–¹æ³•è¿›è¡Œå±€éƒ¨è¡¥å…¨ï¼›</li><li>ä¸å­˜åœ¨é«˜æ–¯ç‚¹ï¼šåœ¨ä¸‰ç»´åŒºåŸŸä¸­å¿ƒæ·»åŠ æ–°çš„é«˜æ–¯ç‚¹ï¼›</li><li>è¯¯å·®åŒºåŸŸæœ€å‰æ–¹ç‚¹çš„ä¸é€æ˜åº¦æœ€é«˜ï¼šé‡ç½®ä»–ä»¬çš„ä¸é€æ˜åº¦ï¼Œæä¾›æ ¡æ­£çš„æœºä¼šã€‚</li></ul></blockquote><h2 id="ä¸ªäººè¯„ä»·"><a href="#ä¸ªäººè¯„ä»·" class="headerlink" title="ä¸ªäººè¯„ä»·"></a>ä¸ªäººè¯„ä»·</h2><p>è®ºæ–‡ä¸»è¦å…³æ³¨äºï¼Œå¯»æ‰¾å¯¼è‡´æ¸²æŸ“è¯¯å·®çš„å±€éƒ¨ä¸‰ç»´åŒºåŸŸï¼Œå¹¶ä¸”æ ¹æ®å±€éƒ¨ä¸‰ç»´åŒºåŸŸçš„æƒ…å†µï¼Œåšäº†å¯¹åº”çš„å¤„ç†ã€‚</p><p>ä»å®ç°æ–¹æ³•ä¸Šæ¥çœ‹ï¼šé€šè¿‡å½“å‰å¸§å’Œç›¸é‚»å¸§çš„å¤šè§†å›¾å‡ ä½•çº¦æŸæ¥è®¡ç®—è¯¯å·®æºä¸‰ç»´åŒºåŸŸï¼Œä¹‹åæ ¹æ®åŒºåŸŸå†…ä¸‰ç§å¸¸è§çš„æƒ…å†µæä¾›äº†ä¸‰ç§å¤„ç†æ–¹æ¡ˆï¼Œæ•´ä½“æ€è·¯è¿˜æ˜¯å¾ˆç®€å•ç›´è§‚çš„ã€‚ä½†æ˜¯ä½¿ç”¨äº†lightglueæ¥è®¡ç®—åŒ¹é…ç‚¹ï¼Œè¿™ä¸ªè¿‡ç¨‹å…¶å®ä¼šå¯¼è‡´é¢å¤–çš„è®¡ç®—èµ„æºæ¶ˆè€—ï¼ˆæ¯”å¦‚è¦è·‘lightglueè¿™ä¸ªæ¨¡å‹ï¼Œè¦ä¿å­˜lightglueä¸­é—´çš„ç»“æœï¼‰ï¼Œè€ƒè™‘åˆ°è®ºæ–‡æ˜¯è‡´åŠ›äºå®ç°ä¸€ä¸ª3dgsçš„æ’ä»¶ï¼Œèƒ½å¤Ÿå¾—åˆ°çš„ä¿¡æ¯æœ‰é™ï¼Œå› æ­¤å¯ä»¥ç†è§£ã€‚</p><blockquote><p>å¦‚æœæ˜¯æ”¾åˆ°gaussian splattingä¸Šçš„è¯ï¼Œè¾“å…¥çš„æ˜¯colmapé‡å»ºçš„ç»“æœï¼Œè¿™ä¸­é—´å¯ä»¥è®¿é—®colmapçš„æ•°æ®åº“æ‹¿åˆ°åŒ¹é…ç‚¹å¯¹ã€‚</p><p>å¦‚æœæ˜¯æ”¾åˆ°3dgs slamä¸­çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨external trackerï¼Œç”±external trackeræä¾›åŒ¹é…å…³ç³»ã€‚</p></blockquote><p>ä»å®éªŒç»“æœæ¥çœ‹ï¼šåŠ å…¥è®ºæ–‡å®ç°çš„LPMæ¨¡å—ä¹‹åï¼ŒPSNRã€LPIPSç­‰æŒ‡æ ‡åªæœ‰äº›å¾®çš„æå‡ï¼Œæ„Ÿè§‰å¯ä»¥å¿½ç•¥ä¸è®¡ï¼›ä¸è¿‡è®­ç»ƒæ—¶é—´ã€é«˜æ–¯ç‚¹æ•°ç­‰æŒ‡æ ‡ä¹Ÿæ²¡æœ‰ç‰¹åˆ«å¤§çš„å½±å“ã€‚å¦å¤–ï¼Œè®ºæ–‡è¿˜æµ‹è¯•äº†è‡ªé€‚åº”å¯†åº¦æ§åˆ¶lower thresholdä¸‹3DGSçš„ç»“æœï¼Œé«˜æ–¯ç‚¹æ•°ã€è®­ç»ƒæ—¶é—´æ˜æ˜¾æå‡ï¼Œä½†æ˜¯æ•ˆæœä¸ä¸€å®šæå‡ï¼Œè¿™ä¸ªç°è±¡æˆ‘ä¹‹å‰ä¹Ÿå‘ç°äº†ï¼Œæ‰€ä»¥è‡ªé€‚åº”å¯†åº¦æ§åˆ¶è¿™ç§æ–¹æ³•ï¼Œç¡®å®ä¸æ˜¯å¾ˆé€‚åˆæå‡ä¸€äº›å±€éƒ¨çš„ç»†èŠ‚ã€‚è¿™æ ·çœ‹çš„è¯ï¼Œè®ºæ–‡ä¸º3dgså±€éƒ¨ç»†èŠ‚çš„æå‡åšäº†ä¸€å®šçš„è´¡çŒ®ã€‚</p><p>æ­¤å¤–ï¼Œè®ºæ–‡åœ¨æœ€åçš„æ€»ç»“éƒ¨åˆ†ä¹Ÿæåˆ°äº†â€œWhile our method identifies the 3D Gaussian points that lead to rendering errors, it still follows the densification rules of 3DGSâ€ï¼Œè®ºæ–‡çš„æ–¹æ³•æœ¬è´¨ä¸Šè¿˜æ˜¯éµå¾ª3DGSçš„è‡´å¯†åŒ–è§„åˆ™ï¼Œåªæ˜¯è¯†åˆ«äº†å¯¼è‡´æ¸²æŸ“é”™è¯¯çš„3Dé«˜æ–¯ã€‚æ‰€ä»¥å¦‚ä½•å¯»æ‰¾æ›´å¥½çš„è‡´å¯†åŒ–è§„åˆ™ï¼Œè¿˜æ˜¯å€¼å¾—ç ”ç©¶çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> 3D Gaussian Splatting </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ã€ŠMotionGSï¼šCompact Gaussian Splatting SLAM by Motion Filterã€‹</title>
      <link href="2024/07/01/paper-reading-motiongs/"/>
      <url>2024/07/01/paper-reading-motiongs/</url>
      
        <content type="html"><![CDATA[<h1 id="è®ºæ–‡é˜…è¯»ã€ŠMotionGS-Compact-Gaussian-Splatting-SLAM-by-Motion-Filterã€‹"><a href="#è®ºæ–‡é˜…è¯»ã€ŠMotionGS-Compact-Gaussian-Splatting-SLAM-by-Motion-Filterã€‹" class="headerlink" title="è®ºæ–‡é˜…è¯»ã€ŠMotionGS : Compact Gaussian Splatting SLAM by Motion Filterã€‹"></a>è®ºæ–‡é˜…è¯»ã€ŠMotionGS : Compact Gaussian Splatting SLAM by Motion Filterã€‹</h1><blockquote><p>å…³é”®è¯ï¼šCompactã€Motion Filter</p><p>æå‡ºäº†ä¸€ç§èåˆæ·±åº¦è§†è§‰ç‰¹å¾ã€åŒå…³é”®å¸§é€‰æ‹©å’Œ3DGSçš„åŸºäº3då›¾åƒçš„SLAMæ–¹æ³•ã€‚</p><p>ä¸ç°æœ‰çš„è·Ÿè¸ªæ–¹æ³•ç›¸æ¯”ï¼Œè¯¥æ–¹æ³•é€šè¿‡å¯¹æ¯å¸§è¿›è¡Œç‰¹å¾æå–å’Œè¿åŠ¨æ»¤æ³¢æ¥å®ç°è·Ÿè¸ªã€‚å§¿æ€å’Œä¸‰ç»´é«˜æ–¯çš„è”åˆä¼˜åŒ–è´¯ç©¿äºæ•´ä¸ªæ˜ å°„è¿‡ç¨‹ã€‚æ­¤å¤–ï¼Œé€šè¿‡åŒå…³é”®å¸§é€‰æ‹©å’Œæ–°é¢–çš„æŸå¤±å‡½æ•°å®ç°äº†ä»ç²—åˆ°ç²¾çš„å§¿æ€ä¼°è®¡å’Œç´§å‡‘çš„é«˜æ–¯åœºæ™¯è¡¨ç¤ºã€‚å®éªŒç»“æœè¡¨æ˜ï¼Œè¯¥ç®—æ³•ä¸ä»…åœ¨è·Ÿè¸ªå’Œæ˜ å°„æ–¹é¢ä¼˜äºç°æœ‰æ–¹æ³•ï¼Œè€Œä¸”å ç”¨çš„å†…å­˜ä¹Ÿæ›´å°‘ã€‚</p></blockquote><p>æœ¬æ–‡æå‡ºäº†ä¸€ç§æ–°é¢–çš„åŸºäº3dgsçš„å¯†é›†SLAMæ–¹æ³•â€”â€”MotionGSã€‚è¯¥æ–¹æ³•é›†æˆäº†æ·±åº¦ç‰¹å¾æå–ã€åŒå…³é”®å¸§é€‰æ‹©å’Œä¸‰ç»´å›¾åƒã€‚åœ¨è·Ÿè¸ªçº¿ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä»æ¯å¼ å›¾åƒä¸­æå–æ·±åº¦ç‰¹å¾ï¼Œé€šè¿‡è¿åŠ¨æ»¤æ³¢è·å¾—è¿åŠ¨å…³é”®å¸§ï¼Œå¹¶é‡‡ç”¨é’ˆå¯¹3DGSçš„ç›´æ¥å§¿æ€ä¼˜åŒ–ï¼Œå‡å°‘å¤„ç†å¸§æ•°ï¼Œæé«˜è·Ÿè¸ªæ€§èƒ½ã€‚æœ€åï¼Œè·Ÿè¸ªçº¿ç¨‹é€šè¿‡ä¿¡æ¯è¿‡æ»¤å™¨ä¸æ–­æ›´æ–°å’Œç»´æŠ¤ä¸€ä¸ªä¿¡æ¯å…³é”®å¸§æ»‘åŠ¨çª—å£ã€‚åœ¨æ˜ å°„çº¿ç¨‹ä¸­ï¼Œè®¾è®¡äº†ä¸€ä¸ªæ–°çš„æŸå¤±å‡½æ•°æ¥åŒæ—¶ä¼˜åŒ–å…³é”®å¸§ä½å§¿å’Œdiff-gaussian-rasterizationä¸­çš„ä¸‰ç»´é«˜æ–¯ã€‚è·Ÿè¸ªå’Œæ˜ å°„çº¿ç¨‹çš„åŒé‡ä¼˜åŒ–å®ç°äº†ä»ç²—åˆ°ç²¾çš„å§¿æ€ä¼˜åŒ–ï¼Œå‡å°‘äº†å­˜å‚¨éœ€æ±‚ã€‚å¯¹å®¤å†…RGB-Dæ•°æ®é›†çš„å¹¿æ³›è¯„ä¼°è¡¨æ˜ï¼Œæˆ‘ä»¬çš„æ–¹æ³•åœ¨è·Ÿè¸ªã€æ¸²æŸ“å’Œæ˜ å°„æ–¹é¢å…·æœ‰ä¸€æµçš„æ€§èƒ½ã€‚<strong>ç»¼ä¸Šæ‰€è¿°ï¼Œä¸»è¦è´¡çŒ®å¦‚ä¸‹:</strong></p><ol><li>æå‡ºäº†ä¸€ç§æ–°çš„åŸºäº3DGSçš„å¯†é›†è§†è§‰SLAMæ–¹æ³•(å°†æ·±åº¦ç‰¹å¾æå–ã€åŒå…³é”®å¸§é€‰æ‹©å’Œ3DGSç›¸ç»“åˆ)ã€‚è¯¥æ–¹æ³•ä¸ä»…å®ç°äº†ç²¾ç¡®çš„å®æ—¶è·Ÿè¸ªå’Œé«˜ä¿çœŸé‡å»ºï¼Œè€Œä¸”åŒæ—¶æ”¯æŒRGBå’ŒRGB- dè¾“å…¥ã€‚</li><li>è®¾è®¡äº†ä¸€ç§æ–°çš„åŒå…³é”®å¸§ç­–ç•¥å’Œæ–°çš„æŸå¤±å‡½æ•°ï¼Œä»¥æé«˜è·Ÿè¸ªç²¾åº¦å’Œä¿æŒæ¸²æŸ“è´¨é‡ï¼ŒåŒæ—¶å‡å°‘å†…å­˜æ¶ˆè€—ã€‚</li><li>æˆ‘ä»¬çš„æ–¹æ³•åœ¨Replicaå’ŒTUM-RGBDæ•°æ®é›†ä¸Šå®ç°äº†æœ€å…ˆè¿›çš„è·Ÿè¸ªã€æ˜ å°„æ€§èƒ½ï¼Œè¿è¡Œé€Ÿåº¦ä¸º2.5 fpsï¼Œå†…å­˜ä½¿ç”¨æ›´å°‘ã€‚</li></ol><h2 id="System-Pipeline"><a href="#System-Pipeline" class="headerlink" title="System Pipeline"></a>System Pipeline</h2><p><img src="/images/paper-reading-MotionGS/image-20240701102610092.png"></p><h3 id="åœºæ™¯è¡¨ç¤º"><a href="#åœºæ™¯è¡¨ç¤º" class="headerlink" title="åœºæ™¯è¡¨ç¤º"></a>åœºæ™¯è¡¨ç¤º</h3><p>å—åˆ°äº†Compact 3DGSçš„å½±å“ï¼Œä½¿ç”¨äº†åŸç‰ˆçš„3DGS+learnable maskçš„ç»“æ„ï¼Œå…¶ä¸­learnable maskçš„æŸå¤±å‡½æ•°ç›´æ¥ç”¨çš„Compact 3DGSçš„ã€‚</p><p>æœ€ç»ˆçš„æŸå¤±å‡½æ•°å¾ˆç®€å•ï¼Œå¦‚ä¸‹ï¼š</p><img src="/images/paper-reading-MotionGS/image-20240701103618536.png" style="zoom:67%;"><h3 id="Dual-Keyframe-Strategyã€æš‚æ—¶ç•¥è¿‡ã€‘"><a href="#Dual-Keyframe-Strategyã€æš‚æ—¶ç•¥è¿‡ã€‘" class="headerlink" title="Dual Keyframe Strategyã€æš‚æ—¶ç•¥è¿‡ã€‘"></a>Dual Keyframe Strategyã€æš‚æ—¶ç•¥è¿‡ã€‘</h3><blockquote><p>åŒå…³é”®å¸§ç­–ç•¥ï¼Œç”±<strong>è¿åŠ¨æ»¤æ³¢å™¨</strong>å’Œ<strong>ä¿¡æ¯æ»¤æ³¢å™¨</strong>ç»„æˆï¼Œåˆ†åˆ«å¯¹åº”äº<strong>è¿åŠ¨å…³é”®å¸§</strong>å’Œ<strong>ä¿¡æ¯å…³é”®å¸§</strong>ã€‚</p><blockquote><p>ä¹‹å‰æœ‰å­¦é•¿æåˆ°ï¼Œè¿™éƒ¨åˆ†å…¶å®å°±æ˜¯Droid SLAMé‡Œé¢çš„å†…å®¹ï¼Œåªæ˜¯è¿™ç¯‡è®ºæ–‡å†™çš„å¾ˆéšæ™¦ã€‚</p><p>è¿™é‡Œæˆ‘è¿˜è¦è‡ªå·±ç¡®è®¤ä¸€ä¸‹ï¼ŒæŠŠDroid SLAMè¿™ç¯‡è®ºæ–‡å¥½å¥½çœ‹çœ‹æ‰è¡Œã€‚</p></blockquote></blockquote><p><strong>Motion Filter</strong></p><p>å¯¹æ¯ä¸€å¸§è¿›è¡Œç‰¹å¾æå–ï¼Œåªä¿ç•™è¶…è¿‡ç›¸å…³é˜ˆå€¼çš„å¸§ã€‚ä¸Droid SLAMç±»ä¼¼ï¼Œæˆ‘ä»¬å°†ä¸‰ç§ä¸åŒçš„ç½‘ç»œè®¾è®¡ä¸º:ç‰¹å¾ç½‘ç»œã€ä¸Šä¸‹æ–‡ç½‘ç»œå’Œæ›´æ–°ç½‘ç»œã€‚</p><img src="/images/paper-reading-MotionGS/image-20240701105342445.png" style="zoom:67%;"><p><strong>Correlation Pyramid</strong></p><p>ç•¥ã€‚ã€‚ã€‚</p><h3 id="3DGS-based-Direct-pose-optimization"><a href="#3DGS-based-Direct-pose-optimization" class="headerlink" title="3DGS-based Direct pose optimization"></a>3DGS-based Direct pose optimization</h3><p><strong>è¿™é‡Œæåˆ°äº†3DGSæ¸²æŸ“çš„ç»“æœæ˜¯æœ‰ä¸€å®šçš„æ¨¡ç³Šçš„ï¼Œå› æ­¤ä¼˜åŒ–gtå’Œæ¸²æŸ“ä¹‹é—´çš„éƒ¨åˆ†åƒç´ æ˜¯ä¸åˆ‡å®é™…çš„ã€‚</strong>è™½ç„¶ä¼˜åŒ–æ•´å¼ å›¾è±¡é€Ÿåº¦ä¼šæ¯”è¾ƒæ…¢ï¼Œä½†æ˜¯å®ƒå’Œ3DGSçš„å¯å¾®åˆ†æ¸²æŸ“æ¡†æ¶æ˜¯ä¸€è‡´çš„ï¼Œå› æ­¤è¿™é‡Œè¿˜æ˜¯ä½¿ç”¨æ‰€æœ‰åƒç´ ç›´æ¥ç”¨äºä½å§¿çš„ä¼˜åŒ–ã€‚</p><blockquote><p>æ·±è¡¨èµåŒï¼Œä½†æ˜¯è¿™æ ·é€Ÿåº¦çœŸçš„ä¼šå¾ˆæ…¢å§ã€‚ã€‚ã€‚</p></blockquote><p>è¿™é‡Œè¯´å—åˆ°Gaussian Splatting SLAMå·¥ä½œçš„å½±å“ï¼Œæä»£æ•°å¯ä»¥å¸®åŠ©æ‰¾åˆ°æœ€å°çš„Jacobian</p><img src="/images/paper-reading-MotionGS/image-20240701110458079.png" style="zoom:80%;"><h3 id="SLAM-System"><a href="#SLAM-System" class="headerlink" title="SLAM System"></a>SLAM System</h3><p>çœ‹åˆ°è¿™é‡Œæˆ‘å¯èƒ½å¤§æ¦‚æ˜ç™½è¿™ç¯‡è®ºæ–‡çš„å®ç°äº†ï¼Œæˆ‘çŒœæµ‹æ˜¯ï¼š</p><ul><li>æ¨¡ä»¿Compact 3DGSï¼Œåœºæ™¯è¡¨ç¤ºä¸ºï¼šåŸå§‹3DGS+learnable mask</li><li>Trackingï¼šåŸºäºDroid SLAM</li><li>Mappingï¼š3DGSå’Œposeçš„è”åˆä¼˜åŒ–ï¼Œå‚è€ƒGaussian Splatting SLAM</li></ul><p>åœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šï¼Œè¿˜æœ‰ä¸€äº›å°ç»†èŠ‚ã€å°è°ƒæ•´ã€‚</p><h2 id="å®éªŒéƒ¨åˆ†"><a href="#å®éªŒéƒ¨åˆ†" class="headerlink" title="å®éªŒéƒ¨åˆ†"></a>å®éªŒéƒ¨åˆ†</h2><p>ç•¥</p><h2 id="ç›´æ’­è¯¾ç¨‹"><a href="#ç›´æ’­è¯¾ç¨‹" class="headerlink" title="ç›´æ’­è¯¾ç¨‹"></a>ç›´æ’­è¯¾ç¨‹</h2><ul><li><p><strong>MotionGSæ˜¯åŸºäºMonoGSçš„</strong>ï¼Œç†ç”±å¦‚ä¸‹ï¼š</p><blockquote><p>å…¶ä¸­2ã€3ã€4ç‚¹æ˜¯æœ€æœ€é‡è¦çš„ï¼ï¼ï¼</p></blockquote><p><img src="/images/paper-reading-MotionGS/image-20240701141559244.png"></p><p><img src="/images/paper-reading-MotionGS/image-20240701141608819.png"></p></li><li><p><strong>Dual Keyframe Strategy</strong>ä¸­ï¼Œ<strong>è¿åŠ¨æ»¤æ³¢å™¨ Motion Filter å’Œ ç›¸å…³é‡‘å­—å¡” Correlation Pyramid</strong>æ˜¯ä»Droid SLAMç¼åˆè¿‡æ¥çš„ï¼š</p><p><img src="/images/paper-reading-MotionGS/image-20240701144339320.png"></p><p><img src="/images/paper-reading-MotionGS/image-20240701144403182.png"></p><p>è€Œä¿¡æ¯æ»¤æ³¢å™¨å¯èƒ½åªæ˜¯åœ¨MonoGSçš„åŸºç¡€ä¸Šåšäº†ä¸€äº›å°ä¿®æ”¹ï¼š</p><p><img src="/images/paper-reading-MotionGS/image-20240701144646919.png"></p></li></ul><h2 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h2><ol><li><p><strong>å¿…é¡»è¦å¥½å¥½çœ‹ä¸€ä¸‹Droid SLAM</strong>äº†ï¼Œå¾ˆå¤šæ–°å·¥ä½œéƒ½ç”¨çš„è¿™ä¸ªã€‚</p></li><li><p><strong>Gaussian Splatting SLAMè¿™ç¯‡å·¥ä½œåšçš„å…¬å¼æ¨å¯¼ã€ä»¥åŠä»–ä»¬ä¿®æ”¹çš„diff-gaussian-rasterization</strong>æœ‰ä¸€äº›æ–°çš„å·¥ä½œç”¨ä¸Šäº†ï¼Œåé¢è¦å¤šæ³¨æ„ä¸€ä¸‹ã€‚</p></li><li><p>æœ€å€¼å¾—æ³¨æ„çš„è¿˜æ˜¯è®ºæ–‡é‡Œé¢çš„è¿™ä¸ªè§‚ç‚¹ï¼Œæˆ‘ä¹Ÿæ˜¯å¾ˆè®¤åŒçš„ï¼š</p><p>Firstly, it is crucial to acknowledge that the rendering results of 3DGS inherently exhibit some degree of blur. It is impractical to optimize the partial pixels between real photos and rendered images. Although the pose optimization using the entire photo may slightly lag in speed, it aligns with the differentiable rendering framework of 3DGS. Therefore, all pixels are directly used to the pose optimization framework based on the photometric error between real photos and rendered images.</p><p>é¦–å…ˆï¼Œ<strong>æ‰¿è®¤3DGSçš„æ¸²æŸ“ç»“æœå›ºæœ‰åœ°è¡¨ç°å‡ºä¸€å®šç¨‹åº¦çš„æ¨¡ç³Šæ˜¯è‡³å…³é‡è¦çš„ã€‚ä¼˜åŒ–çœŸå®ç…§ç‰‡å’Œæ¸²æŸ“å›¾åƒä¹‹é—´çš„éƒ¨åˆ†åƒç´ æ˜¯ä¸åˆ‡å®é™…çš„ã€‚</strong>è™½ç„¶ä½¿ç”¨æ•´ä¸ªç…§ç‰‡çš„å§¿æ€ä¼˜åŒ–å¯èƒ½ä¼šåœ¨é€Ÿåº¦ä¸Šç•¥æœ‰æ»åï¼Œä½†å®ƒä¸3DGSçš„å¯å¾®åˆ†æ¸²æŸ“æ¡†æ¶ä¿æŒä¸€è‡´ã€‚å› æ­¤ï¼Œæ‰€æœ‰åƒç´ ç›´æ¥ç”¨äºåŸºäºçœŸå®ç…§ç‰‡å’Œæ¸²æŸ“å›¾åƒä¹‹é—´å…‰åº¦è¯¯å·®çš„å§¿æ€ä¼˜åŒ–æ¡†æ¶ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> 3D Gaussian Splatting </tag>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ICPç®—æ³•è¯¦è§£</title>
      <link href="2024/06/28/icp-algorithm-explanation/"/>
      <url>2024/06/28/icp-algorithm-explanation/</url>
      
        <content type="html"><![CDATA[<h1 id="ICPç®—æ³•è¯¦è§£"><a href="#ICPç®—æ³•è¯¦è§£" class="headerlink" title="ICPç®—æ³•è¯¦è§£"></a>ICPç®—æ³•è¯¦è§£</h1><h2 id="åŸè®ºæ–‡æµ…æ-amp-è¡¥å……ï¼šA-Method-for-Registration-of-3-D-Shapes"><a href="#åŸè®ºæ–‡æµ…æ-amp-è¡¥å……ï¼šA-Method-for-Registration-of-3-D-Shapes" class="headerlink" title="åŸè®ºæ–‡æµ…æ&amp;è¡¥å……ï¼šA Method for Registration of 3-D Shapes"></a>åŸè®ºæ–‡æµ…æ&amp;è¡¥å……ï¼šA Method for Registration of 3-D Shapes</h2><p>ICPç®—æ³•æœ€æ—©äº1992å¹´ç”±è®ºæ–‡ã€ŠA Method for Registration of 3-D Shapesã€‹æå‡ºï¼Œè®ºæ–‡æåˆ°ICPç®—æ³•å¯ä»¥ç”¨äºä»¥ä¸‹çš„å‡ ç§æƒ…å†µï¼š</p><ol><li>ç‚¹é›†</li><li>çº¿æ®µé›†ï¼ˆæŠ˜çº¿ï¼‰</li><li>éšå¼æ›²çº¿ï¼ˆç”¨æ•°å­¦å…¬å¼è¡¨ç¤ºæ›²çº¿ï¼‰</li><li>å‚æ•°æ›²çº¿ï¼ˆç”¨å‚æ•°æ˜ å°„è¡¨ç¤ºæ›²çº¿ï¼‰</li><li>ä¸‰è§’é¢ç‰‡ï¼ˆåº”è¯¥å°±æ˜¯ç°åœ¨çš„meshï¼‰</li><li>éšå¼è¡¨é¢ï¼ˆç”¨æ•°å­¦å…¬å¼è¡¨ç¤ºçš„è¡¨é¢ï¼‰</li><li>å‚æ•°è¡¨é¢ï¼ˆç”¨å‚æ•°æ˜ å°„è¡¨ç¤ºçš„è¡¨é¢ï¼‰</li></ol><img src="/images/icp-algorithm-explanation/image-20240628165635002-1729843722025-22.png" style="zoom:67%;"><blockquote><p>å…³äº3ã€4ã€6ã€7ç‚¹æœ‰ç–‘æƒ‘çš„ï¼Œå¯ä»¥çœ‹<a href="https://immortalqx.github.io/2022/08/17/geometry-notes-1/">å‡ ä½•çš„éšå¼è¡¨ç¤ºä¸æ˜¾ç¤ºè¡¨ç¤º</a>ï¼Œæˆ–è€…çœ‹<a href="https://sites.cs.ucsb.edu/~lingqi/teaching/games101.html">GAMES101: ç°ä»£è®¡ç®—æœºå›¾å½¢å­¦å…¥é—¨</a>ç¬¬5å‘¨ã€ç¬¬6å‘¨çš„è¯¾ä»¶ã€‚</p></blockquote><p>ç”±äºæˆ‘ä»¬ä¸»è¦å…³æ³¨<strong>ç‚¹é›†ä¹‹é—´çš„é…å‡†</strong>ï¼Œå› æ­¤<strong>ä¸‹é¢ä¸»è¦è®²è®ºæ–‡çš„IV. THE ITERATIVE CLOSEST POINT ALGORITHMéƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†å¯ä»¥çœ‹åŸè®ºæ–‡ã€‚</strong></p><h3 id="ICPç®—æ³•çš„å®šä¹‰"><a href="#ICPç®—æ³•çš„å®šä¹‰" class="headerlink" title="ICPç®—æ³•çš„å®šä¹‰"></a>ICPç®—æ³•çš„å®šä¹‰</h3><p>ä»ä¸‹é¢å¯ä»¥çœ‹å‡ºï¼ŒICPç®—æ³•æœ€æ ¸å¿ƒçš„é—®é¢˜å°±ä¸¤ä¸ªï¼Œ<strong>ä¸€ä¸ªæ˜¯å¦‚ä½•è®¡ç®—æœ€è¿‘ç‚¹ï¼ˆæœ€è¿‘é‚»é—®é¢˜ï¼‰ï¼Œä¸€ä¸ªæ˜¯å¦‚ä½•æ±‚è§£æ—‹è½¬å’Œå¹³ç§»ï¼ˆéçº¿æ€§æœ€å°äºŒä¹˜é—®é¢˜ï¼‰</strong>ã€‚</p><img src="/images/icp-algorithm-explanation/image-20240628164637072-1729843722025-23.png" style="zoom:67%;"><p>å¯¹äºæœ‰$N_p$ä¸ªç‚¹${p_i}$çš„ç‚¹é›†$P$ï¼Œå’Œæœ‰$N_x$ä¸ªç‚¹ã€çº¿æ®µæˆ–ä¸‰è§’é¢ç‰‡çš„ç›®æ ‡å½¢çŠ¶$X$ï¼ŒICPç®—æ³•å¯ä»¥å®šä¹‰ä¸ºï¼š</p><ul><li><p>$P_k$è¡¨ç¤ºç¬¬$k$æ¬¡è¿­ä»£æ›´æ–°ä¹‹åçš„ç‚¹é›†ï¼Œ$q_k$è¡¨ç¤ºç¬¬$k$æ¬¡è¿­ä»£ä¸­è®¡ç®—å¾—åˆ°çš„æ—‹è½¬å’Œå¹³ç§»ï¼Œå…¶ä¸­$P_0=P$ï¼Œ$q_0=[1,0,0,0,0,0,0]^t$ï¼Œ$q_0[0:3]$æ˜¯å•ä½å››å…ƒæ•°ï¼Œè¡¨ç¤ºæ—‹è½¬ï¼Œ$q_0[4:6]$æ˜¯å¹³ç§»å‘é‡ï¼Œè¡¨ç¤ºå¹³ç§»ã€‚</p></li><li><p>ç®—æ³•çš„æµç¨‹ä¸ºï¼š</p><ul><li><p>è®¡ç®—æœ¬æ¬¡è¿­ä»£çš„æœ€è¿‘ç‚¹é›†ï¼Œ$Y_k = C(P_k,X)$ï¼Œå¹³å‡å¤æ‚åº¦æ˜¯$O(N_p logN_x)$ï¼Œæœ€åçš„æƒ…å†µä¸‹å¤æ‚åº¦æ˜¯$O(N_pN_x)$ã€‚éœ€è¦æ³¨æ„ï¼Œ$Y_k$æ˜¯ç›®æ ‡å½¢çŠ¶$X$ä¸Šçš„ç‚¹ã€‚</p><blockquote><p>è®¡ç®—æœ€è¿‘ç‚¹é›†çš„é—®é¢˜ä¹Ÿå«åšæœ€è¿‘é‚»é—®é¢˜ï¼Œåé¢ä¼šè¯¦ç»†å±•å¼€è®²ã€‚è¿™é‡ŒICPè®¤ä¸ºè·ç¦»æœ€è¿‘çš„ç‚¹å°±æ˜¯å¯¹åº”ç‚¹ï¼Œæ ¹æ®å¯¹åº”ç‚¹èƒ½è®¡ç®—æ—‹è½¬å’Œå¹³ç§»ã€‚</p><blockquote><p>è¿™éƒ¨åˆ†å’Œå¿«é€Ÿæ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸€æ ·</p></blockquote></blockquote></li><li><p>è®¡ç®—æœ¬æ¬¡è¿­ä»£çš„æ—‹è½¬å’Œå¹³ç§»ï¼Œ$(q_k,d_k)=Q(P_0,Y_k)$ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯$O(N_p)$</p><blockquote><p>è¿™éƒ¨åˆ†åœ¨è®ºæ–‡III. MATHEMATICAL PRELIMINARIESéƒ¨åˆ†æœ‰ä»‹ç»ï¼Œä¸‹é¢ä¹Ÿä¼šè¯¦ç»†å±•å¼€</p></blockquote></li><li><p>åº”ç”¨æœ¬æ¬¡è®¡ç®—çš„æ—‹è½¬å’Œå¹³ç§»ï¼Œæ›´æ–°ç‚¹é›†ï¼Œ$P_{k+1} = q_k(P_0)$ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯$O(N_p)$</p></li><li><p>å½“å‡æ–¹è¯¯å·®çš„å˜åŒ–ä½äºé¢„è®¾çš„é˜ˆå€¼æ—¶ï¼Œç»ˆæ­¢è¿­ä»£ã€‚è¿™ä¸ªé˜ˆå€¼æŒ‡å®šäº†é…å‡†è¿‡ç¨‹çš„æœŸæœ›ç²¾ç¡®åº¦ã€‚</p></li></ul></li></ul><h3 id="ICPæ ¸å¿ƒé—®é¢˜ä¸€ï¼šæœ€è¿‘é‚»é—®é¢˜"><a href="#ICPæ ¸å¿ƒé—®é¢˜ä¸€ï¼šæœ€è¿‘é‚»é—®é¢˜" class="headerlink" title="ICPæ ¸å¿ƒé—®é¢˜ä¸€ï¼šæœ€è¿‘é‚»é—®é¢˜"></a>ICPæ ¸å¿ƒé—®é¢˜ä¸€ï¼šæœ€è¿‘é‚»é—®é¢˜</h3><p> <strong>è¿™é‡Œç»™ä¸€ä¸ªé«˜ç¿”æ–°ä¹¦ã€Šè‡ªåŠ¨é©¾é©¶ä¸æœºå™¨äººä¸­çš„SLAMæŠ€æœ¯-ä»ç†è®ºåˆ°å®è·µã€‹ä¸­çš„éƒ¨åˆ†ä»‹ç»ã€‚</strong></p><p><img src="/images/icp-algorithm-explanation/image-20240628205017258-1729843722025-24.png"></p><p><img src="/images/icp-algorithm-explanation/image-20240628205543494-1729843722025-25.png"></p><h3 id="ICPæ ¸å¿ƒé—®é¢˜äºŒï¼šéçº¿æ€§æœ€å°äºŒä¹˜é—®é¢˜"><a href="#ICPæ ¸å¿ƒé—®é¢˜äºŒï¼šéçº¿æ€§æœ€å°äºŒä¹˜é—®é¢˜" class="headerlink" title="ICPæ ¸å¿ƒé—®é¢˜äºŒï¼šéçº¿æ€§æœ€å°äºŒä¹˜é—®é¢˜"></a>ICPæ ¸å¿ƒé—®é¢˜äºŒï¼šéçº¿æ€§æœ€å°äºŒä¹˜é—®é¢˜</h3><h4 id="åŸè®ºæ–‡æ–¹æ³•ä¸€"><a href="#åŸè®ºæ–‡æ–¹æ³•ä¸€" class="headerlink" title="åŸè®ºæ–‡æ–¹æ³•ä¸€"></a>åŸè®ºæ–‡æ–¹æ³•ä¸€</h4><blockquote><p>å¯¹åº”è®ºæ–‡ä¸­III. MATHEMATICAL PRELIMINARIESéƒ¨åˆ†çš„C. Corresponding Point Set Registration</p><p>å¯¹åº”ä¸Šè¿°æ–¹æ³•çš„ç¬¬äºŒæ­¥ï¼Œå³â€œè®¡ç®—æœ¬æ¬¡è¿­ä»£çš„æ—‹è½¬å’Œå¹³ç§»ï¼Œ$(q_k,d_k)=Q(P_0,Y_k)$ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯$O(N_p)$â€ã€‚</p><blockquote><p>ä¸‹é¢çš„æ–¹æ³•åº”è¯¥å°±æ˜¯SVDåˆ†è§£çš„æ–¹æ³•ã€‚</p></blockquote></blockquote><p><strong>ä¸‹é¢æ˜¯è®ºæ–‡ä¸­æåˆ°çš„æ±‚è§£æ–¹æ³•ï¼Œæ¯”è¾ƒç±»ä¼¼SVDåˆ†è§£ã€‚</strong></p><img src="/images/icp-algorithm-explanation/image-20240628180438242-1729843722025-26.png" style="zoom:67%;"><img src="/images/icp-algorithm-explanation/image-20240628180455989-1729843722025-27.png" style="zoom:67%;"><p><img src="/images/icp-algorithm-explanation/image-20240628180516684-1729843722025-28.png"></p><h4 id="åŸè®ºæ–‡æ–¹æ³•äºŒ"><a href="#åŸè®ºæ–‡æ–¹æ³•äºŒ" class="headerlink" title="åŸè®ºæ–‡æ–¹æ³•äºŒ"></a>åŸè®ºæ–‡æ–¹æ³•äºŒ</h4><blockquote><p>å¯¹åº”è®ºæ–‡ä¸­IV. THE ITERATIVE CLOSEST POINT ALGORITHMéƒ¨åˆ†çš„C. An Accelerated ICP Algorithm</p><p>å¯¹åº”ä¸Šè¿°æ–¹æ³•çš„ç¬¬äºŒæ­¥ï¼Œä½†æ˜¯æ›¿æ¢æ‰äº†æ—‹è½¬å’Œå¹³ç§»çš„æ±‚è§£æ–¹æ³•ã€‚</p><blockquote><p>ä¸‹é¢çš„æ–¹æ³•åº”è¯¥æ˜¯æ¢¯åº¦ä¸‹é™æ³•ã€‚</p></blockquote></blockquote><p><strong>ä¸‹é¢æ˜¯åŸè®ºæ–‡ä¸­æåˆ°çš„æ–¹æ³•ï¼Œæ¯”è¾ƒç±»ä¼¼æ¢¯åº¦ä¸‹é™æ³•ï¼Œå’Œæ±‚è§£æœ€å°äºŒä¹˜é—®é¢˜</strong></p><img src="/images/icp-algorithm-explanation/image-20240628180625669-1729843722025-29.png" style="zoom:67%;"><img src="/images/icp-algorithm-explanation/image-20240628180749297-1729843722025-30.png" style="zoom:67%;"><img src="/images/icp-algorithm-explanation/image-20240628180829200-1729843722025-31.png" style="zoom:67%;"><img src="/images/icp-algorithm-explanation/image-20240628180848197-1729843722025-32.png" style="zoom:67%;"><h4 id="å¸¸ç”¨æ–¹æ³•ä¸€ï¼šSVDåˆ†è§£"><a href="#å¸¸ç”¨æ–¹æ³•ä¸€ï¼šSVDåˆ†è§£" class="headerlink" title="å¸¸ç”¨æ–¹æ³•ä¸€ï¼šSVDåˆ†è§£"></a>å¸¸ç”¨æ–¹æ³•ä¸€ï¼šSVDåˆ†è§£</h4><p><img src="/images/icp-algorithm-explanation/image-20240628211432440-1729843722025-33.png"></p><p><img src="/images/icp-algorithm-explanation/image-20240628211445544-1729843722025-34.png"></p><p><img src="/images/icp-algorithm-explanation/image-20240628211509415-1729843722025-35.png"></p><h4 id="å¸¸ç”¨æ–¹æ³•äºŒï¼šæ¢¯åº¦ä¸‹é™æ³•"><a href="#å¸¸ç”¨æ–¹æ³•äºŒï¼šæ¢¯åº¦ä¸‹é™æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•äºŒï¼šæ¢¯åº¦ä¸‹é™æ³•"></a>å¸¸ç”¨æ–¹æ³•äºŒï¼šæ¢¯åº¦ä¸‹é™æ³•</h4><p><img src="/images/icp-algorithm-explanation/image-20240628211545626-1729843722025-36.png"></p><h2 id="ç»å…¸ICPç®—æ³•æ¡†æ¶"><a href="#ç»å…¸ICPç®—æ³•æ¡†æ¶" class="headerlink" title="ç»å…¸ICPç®—æ³•æ¡†æ¶"></a>ç»å…¸ICPç®—æ³•æ¡†æ¶</h2><p> <strong>åœ¨é«˜ç¿”æ–°ä¹¦ã€Šè‡ªåŠ¨é©¾é©¶ä¸æœºå™¨äººä¸­çš„SLAMæŠ€æœ¯-ä»ç†è®ºåˆ°å®è·µã€‹ä¸­ï¼Œå¯¹3Dç‚¹å¯¹ç‚¹ICPç®—æ³•çš„æè¿°å¦‚ä¸‹æ‰€ç¤ºã€‚</strong></p><p><img src="/images/icp-algorithm-explanation/image-20240628204739360-1729843722025-37.png"></p><p><img src="/images/icp-algorithm-explanation/image-20240628204751728-1729843722025-38.png"></p><p><strong>G-ICPè®ºæ–‡ä¸­ç»™å‡ºäº†æ ‡å‡†ICPç®—æ³•æ¡†æ¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</strong></p><p><img src="/images/icp-algorithm-explanation/image-20240628203747549-1729843722025-39.png"></p><h2 id="æ‹“å±•ï¼šGaussian-Splattingä¸­çš„æœ€è¿‘é‚»é—®é¢˜"><a href="#æ‹“å±•ï¼šGaussian-Splattingä¸­çš„æœ€è¿‘é‚»é—®é¢˜" class="headerlink" title="æ‹“å±•ï¼šGaussian Splattingä¸­çš„æœ€è¿‘é‚»é—®é¢˜"></a>æ‹“å±•ï¼šGaussian Splattingä¸­çš„æœ€è¿‘é‚»é—®é¢˜</h2><p>åœ¨gaussian splattingä¸­ï¼ŒåŒ…æ‹¬äº†<a href="https://gitlab.inria.fr/bkerbl/simple-knn">submodules/simple-knn</a>ï¼Œ<strong>è¿™ä¸ªsimple-knnå¹¶ä¸æ˜¯èšç±»ç®—æ³•ï¼Œè€Œæ˜¯ä¸€ä¸ªKè¿‘é‚»ç®—æ³•</strong>ã€‚</p><h3 id="ä»£ç å¯¹åº”éƒ¨åˆ†"><a href="#ä»£ç å¯¹åº”éƒ¨åˆ†" class="headerlink" title="ä»£ç å¯¹åº”éƒ¨åˆ†"></a>ä»£ç å¯¹åº”éƒ¨åˆ†</h3><p>Gaussian Splattingä¸­ä½¿ç”¨Kè¿‘é‚»ç®—æ³•çš„ç›®çš„æ˜¯ä¸ºäº†å®ç°åˆå§‹åŒ–ï¼Œæ¯ä¸ªåˆå§‹åŒ–é«˜æ–¯ç‚¹çš„å°ºåº¦æ˜¯å…¶åˆ°æœ€è¿‘çš„kä¸ªç‚¹çš„å¹³å‡è·ç¦»ã€‚</p><p><img src="/images/icp-algorithm-explanation/image-20240628212740328-1729843722025-40.png"></p><p><img src="/images/icp-algorithm-explanation/image-20240628212726640-1729843722025-41.png"></p><h3 id="simple-knnä»£ç å®ç°"><a href="#simple-knnä»£ç å®ç°" class="headerlink" title="simple-knnä»£ç å®ç°"></a>simple-knnä»£ç å®ç°</h3><p>Gaussian Splattingä¸­ç›´æ¥è°ƒç”¨çš„å‡½æ•°å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">// å®šä¹‰ä¸€ä¸ªå‡½æ•° distCUDA2ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå¸¸é‡å¼•ç”¨ torch::Tensor ç±»å‹çš„ pointsï¼Œè¿”å›å€¼ç±»å‹æ˜¯ torch::Tensortorch::TensordistCUDA2(const torch::Tensor&amp; points){  // è·å– points å¼ é‡çš„ç¬¬ä¸€ä¸ªç»´åº¦çš„å¤§å°ï¼Œå³ç‚¹çš„æ•°é‡ P  const int P = points.size(0);  // åˆ›å»ºä¸€ä¸ªé€‰é¡¹å¯¹è±¡ float_optsï¼Œç±»å‹ä¸ points çš„æ•°æ®ç±»å‹ç›¸åŒï¼Œä½†æ•°æ®ç±»å‹è®¾ç½®ä¸º torch::kFloat32  auto float_opts = points.options().dtype(torch::kFloat32);    // ä½¿ç”¨ float_opts é€‰é¡¹åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º P çš„å¼ é‡ meansï¼Œåˆå§‹å€¼ä¸º 0.0ï¼Œæ•°æ®ç±»å‹ä¸º float32  torch::Tensor means = torch::full({P}, 0.0, float_opts);    // è°ƒç”¨ SimpleKNN::knn å‡½æ•°ï¼Œä¼ å…¥ Pï¼ˆç‚¹çš„æ•°é‡ï¼‰ã€points çš„è¿ç»­å†…å­˜æ•°æ®ï¼ˆè½¬æ¢ä¸º float3 æŒ‡é’ˆï¼‰ã€means çš„è¿ç»­å†…å­˜æ•°æ®  // ä»£ç ä¸­é»˜è®¤çš„K=3ï¼Œè¿™é‡Œmeanså¾—åˆ°çš„å°±æ˜¯æ¯ä¸ªç‚¹åˆ°æœ€è¿‘çš„ä¸‰ä¸ªç‚¹çš„å¹³å‡è·ç¦»çš„å¹³æ–¹  SimpleKNN::knn(P, (float3*)points.contiguous().data&lt;float&gt;(), means.contiguous().data&lt;float&gt;());  // è¿”å› means å¼ é‡  return means;}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­ï¼ŒSimpleKNN::knnæ˜¯ä¸€ä¸ªâ€œåŸºäº Morton ç¼–ç çš„ K è¿‘é‚»ï¼ˆKNNï¼‰æŸ¥æ‰¾ç®—æ³•â€ï¼Œè¿™é‡Œç”¨GPTæ ¹æ®submodules/simple-knnçš„ä»£ç ç”Ÿæˆäº†å¦‚ä¸‹ä¼ªä»£ç ï¼Œæ–¹ä¾¿ç†è§£ï¼š</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">// Step 1: Normalize points and compute Morton codes// è®¡ç®—xyzåæ ‡çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼Œå¹¶ä¸”è¿›è¡Œå½’ä¸€åŒ–&amp;è®¡ç®—mortonç¼–ç minn = min(points)maxx = max(points)for each point in points:    morton_code = compute_morton_code(point, minn, maxx)// Step 2: Sort Morton codes and indices// å¯¹mortonç¼–ç è¿›è¡Œæ’åºå’Œç´¢å¼•sort(morton_codes, indices)// Step 3: Divide points into blocks and compute bounding boxes// åˆ†å—ï¼Œå¹¶ä¸”è®¡ç®—æ¯ä¸ªå—çš„æœ€å°å€¼æœ€å¤§å€¼blocks = divide_into_blocks(points, block_size)for each block in blocks:    compute_min_max(block)// Step 4: KNN search// Kè¿‘é‚»æœç´¢for each point in points:// é¦–å…ˆä»è¯¥ç‚¹æ‰€å±çš„blockä¸­æ‰¾æœ€è¿‘ç‚¹    nearest_neighbors = find_nearest_neighbors_in_block(point, block)    for each block in blocks:// ä¹‹åå†ä»å…¶ä»–çš„blockä¸­æ‰¾æœ€è¿‘ç‚¹å¹¶ä¸”è¿›è¡Œæ›´æ–°        if distance_to_block(point, block) &lt; furthest_distance(nearest_neighbors):            update_nearest_neighbors(point, block, nearest_neighbors)    // è®¡ç®—ä¸æœ€è¿‘Kä¸ªç‚¹çš„å¹³å‡è·ç¦»çš„å¹³æ–¹    mean_distance = compute_mean_distance(nearest_neighbors)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Mortonç¼–ç "><a href="#Mortonç¼–ç " class="headerlink" title="Mortonç¼–ç "></a>Mortonç¼–ç </h3><p>Morton ç¼–ç ï¼ˆMorton Codeï¼‰ï¼Œä¹Ÿç§°ä¸º Z-order æ›²çº¿ï¼ˆZ-order Curveï¼‰ï¼Œæ˜¯ä¸€ç§å°†å¤šç»´æ•°æ®æ˜ å°„åˆ°ä¸€ç»´çš„ç©ºé—´å¡«å……æ›²çº¿ã€‚åœ¨è¿™ç§æ˜ å°„ä¸­ï¼Œ<strong>å…·æœ‰ç›¸é‚»å¤šç»´åæ ‡çš„ç‚¹åœ¨æ˜ å°„åˆ°ä¸€ç»´åä¹Ÿä¿æŒç›¸é‚»çš„æ¦‚ç‡è¾ƒé«˜ã€‚</strong></p><p><strong>Morton ç¼–ç çš„åŸç†</strong></p><p>Morton ç¼–ç é€šè¿‡<strong>äº¤æ›¿å–æ¯ä¸ªç»´åº¦çš„æ¯”ç‰¹ä½æ¥å®ç°ã€‚</strong>ä¾‹å¦‚ï¼Œå¯¹äºä¸‰ç»´åæ ‡ (x, y, z)ï¼Œå®ƒå°†æ¯ä¸ªåæ ‡çš„äºŒè¿›åˆ¶è¡¨ç¤ºäº¤æ›¿ç»„åˆï¼Œå½¢æˆä¸€ä¸ªæ–°çš„æ•´æ•°ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><strong>å°†æ¯ä¸ªåæ ‡å½’ä¸€åŒ–åˆ° [0, 1] èŒƒå›´å†…</strong>ï¼š è¿™é€šè¿‡å°†åæ ‡å‡å»æœ€å°å€¼å¹¶é™¤ä»¥æœ€å¤§å€¼å‡å»æœ€å°å€¼æ¥å®ç°ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿æ‰€æœ‰åæ ‡éƒ½åœ¨ç›¸åŒçš„èŒƒå›´å†…ï¼Œæœ‰åŠ©äºåç»­çš„æ¯”ç‰¹æ“ä½œã€‚</li><li><strong>å°†å½’ä¸€åŒ–åçš„åæ ‡æ˜ å°„åˆ°ä¸€ä¸ªå›ºå®šèŒƒå›´å†…çš„æ•´æ•°</strong>ï¼š ä¾‹å¦‚ï¼Œå°†å½’ä¸€åŒ–åçš„ [0, 1] èŒƒå›´å†…çš„åæ ‡æ˜ å°„åˆ° [0, 1023] èŒƒå›´å†…ï¼ˆå³ 10 ä½äºŒè¿›åˆ¶æ•°ï¼‰ã€‚</li><li><strong>å°†æ¯ä¸ªç»´åº¦çš„æ¯”ç‰¹äº¤æ›¿åˆå¹¶</strong>ï¼š å°†æ¯ä¸ªåæ ‡çš„äºŒè¿›åˆ¶è¡¨ç¤ºäº¤æ›¿å–å‡ºï¼Œå¹¶ç»„åˆæˆä¸€ä¸ªæ–°çš„æ•´æ•°ã€‚è¿™ä¸ªè¿‡ç¨‹å«åšâ€œbit interleavingâ€ã€‚</li></ol><p><img src="/images/icp-algorithm-explanation/13a8e3028c3b429caa827be151fe2585-1729843722025-21.png"></p>]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 3D Gaussian Splatting </tag>
            
            <tag> ç‚¹äº‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ã€ŠRTG-SLAMï¼šReal-time 3D Reconstruction at Scale Using Gaussian Splattingã€‹</title>
      <link href="2024/06/05/paper-reading-rtg-slam/"/>
      <url>2024/06/05/paper-reading-rtg-slam/</url>
      
        <content type="html"><![CDATA[<h1 id="è®ºæ–‡é˜…è¯»ã€ŠRTG-SLAM-Real-time-3D-Reconstruction-at-Scale-Using-Gaussian-Splattingã€‹"><a href="#è®ºæ–‡é˜…è¯»ã€ŠRTG-SLAM-Real-time-3D-Reconstruction-at-Scale-Using-Gaussian-Splattingã€‹" class="headerlink" title="è®ºæ–‡é˜…è¯»ã€ŠRTG-SLAM: Real-time 3D Reconstruction at Scale Using Gaussian Splattingã€‹"></a>è®ºæ–‡é˜…è¯»ã€ŠRTG-SLAM: Real-time 3D Reconstruction at Scale Using Gaussian Splattingã€‹</h1><h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><p>æˆ‘ä»¬æå‡ºäº†å®æ—¶é«˜æ–¯SLAM (RTG-SLAM)ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸºäºRGBDç›¸æœºçš„å®æ—¶ä¸‰ç»´é‡å»ºç³»ç»Ÿï¼Œç”¨äºå¤§è§„æ¨¡ç¯å¢ƒçš„é«˜æ–¯æº…å°„ã€‚è¯¥ç³»ç»Ÿå…·æœ‰ç´§å‡‘çš„é«˜æ–¯è¡¨ç¤ºå’Œé«˜æ•ˆçš„å®æ—¶é«˜æ–¯ä¼˜åŒ–æ–¹æ¡ˆã€‚<strong>æˆ‘ä»¬è¿«ä½¿æ¯ä¸ªé«˜æ–¯å‡½æ•°è¦ä¹ˆæ˜¯ä¸é€æ˜çš„ï¼Œè¦ä¹ˆæ˜¯æ¥è¿‘é€æ˜çš„ï¼Œä¸é€æ˜çš„é«˜æ–¯å‡½æ•°æ‹Ÿåˆè¡¨é¢å’Œä¸»è‰²ï¼Œé€æ˜çš„é«˜æ–¯å‡½æ•°æ‹Ÿåˆå‰©ä½™è‰²ã€‚</strong>é€šè¿‡ä»¥ä¸åŒäºé¢œè‰²æ¸²æŸ“çš„æ–¹å¼æ¸²æŸ“æ·±åº¦ï¼Œæˆ‘ä»¬<strong>è®©å•ä¸ªä¸é€æ˜é«˜æ–¯å¾ˆå¥½åœ°æ‹Ÿåˆå±€éƒ¨è¡¨é¢åŒºåŸŸï¼Œè€Œä¸éœ€è¦å¤šä¸ªé‡å çš„é«˜æ–¯</strong>ï¼Œä»è€Œå¤§å¤§é™ä½äº†å†…å­˜å’Œè®¡ç®—æˆæœ¬ã€‚å¯¹äºåŠ¨æ€é«˜æ–¯ä¼˜åŒ–ï¼Œæˆ‘ä»¬<strong>æ˜¾å¼åœ°ä¸ºæ¯å¸§ä¸‰ç§ç±»å‹çš„åƒç´ æ·»åŠ é«˜æ–¯:æ–°è§‚å¯Ÿåˆ°çš„ï¼Œå…·æœ‰å¤§é¢œè‰²è¯¯å·®çš„ï¼Œå’Œå…·æœ‰å¤§æ·±åº¦è¯¯å·®çš„ã€‚</strong>æˆ‘ä»¬è¿˜å°†æ‰€æœ‰é«˜æ–¯å‡½æ•°åˆ†ä¸ºç¨³å®šçš„å’Œä¸ç¨³å®šçš„ï¼Œå…¶ä¸­<strong>ç¨³å®šçš„é«˜æ–¯å‡½æ•°è¢«æœŸæœ›å¾ˆå¥½åœ°æ‹Ÿåˆå…ˆå‰è§‚å¯Ÿåˆ°çš„RGBDå›¾åƒï¼Œå¦åˆ™ä¸ç¨³å®š</strong>ã€‚æˆ‘ä»¬<strong>åªä¼˜åŒ–ä¸ç¨³å®šé«˜æ–¯å‡½æ•°ï¼Œåªæ¸²æŸ“è¢«ä¸ç¨³å®šé«˜æ–¯å‡½æ•°å ç”¨çš„åƒç´ ã€‚</strong>è¿™æ ·ï¼Œæ— è®ºæ˜¯éœ€è¦ä¼˜åŒ–çš„é«˜æ–¯æ•°è¿˜æ˜¯éœ€è¦æ¸²æŸ“çš„åƒç´ éƒ½å¤§å¤§å‡å°‘ï¼Œå¹¶ä¸”å¯ä»¥å®æ—¶è¿›è¡Œä¼˜åŒ–ã€‚æˆ‘ä»¬å±•ç¤ºäº†å„ç§å¤§å‹åœºæ™¯çš„å®æ—¶é‡å»ºã€‚ä¸æœ€å…ˆè¿›çš„åŸºäºnerfçš„RGBD SLAMç›¸æ¯”ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿå®ç°äº†ç±»ä¼¼çš„é«˜è´¨é‡é‡å»ºï¼Œä½†é€Ÿåº¦çº¦ä¸ºä¸¤å€ï¼Œå†…å­˜æˆæœ¬ä¸ºä¸€åŠï¼Œå¹¶ä¸”åœ¨æ–°è§†å›¾åˆæˆçš„çœŸå®æ„Ÿå’Œç›¸æœºè·Ÿè¸ªç²¾åº¦æ–¹é¢è¡¨ç°å‡ºå“è¶Šçš„æ€§èƒ½ã€‚</p><blockquote><p>çœ‹å®ŒAbstractï¼Œæ„Ÿè§‰è¿™ç¯‡æ–‡ç« ä¸»è¦çš„å·¥ä½œæ˜¯ï¼š<strong>ç ”ç©¶äº†å„ç§è®©SLAMç»“æœå˜å¥½çš„==ç­–ç•¥==</strong></p></blockquote><h2 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h2><p><img src="/images/paper-reading-rtg-slam/image-20240605200843475-1717589324365-1.png"></p><h3 id="Compact-Gaussian-Representation"><a href="#Compact-Gaussian-Representation" class="headerlink" title="Compact Gaussian Representation"></a>Compact Gaussian Representation</h3><p>ä½¿ç”¨Gaussianè¡¨ç¤ºåœºæ™¯ï¼š</p><ul><li>æ¯ä¸ªé«˜æ–¯è¦ä¹ˆä¸é€æ˜ï¼Œè¦ä¹ˆå‡ ä¹é€æ˜ã€‚Each Gaussian is determined once after being added to be opaque (ğ›¼ = 0.99) for fitting the 3D surface and dominant color, or to be nearly transparent (ğ›¼ = 0.1) for fitting the residual color.</li><li>æ¯ä¸ªé«˜æ–¯è®¤ä¸ºæ˜¯ä¸€ä¸ªellipsoid discæˆ–è€…surfelã€‚We also treat each Gaussian as an ellipsoid disc (or surfel), and record the surfel parameters including the normal nğ‘– , the confidence count ğœ‚ğ‘– , and the initialization timestamp ğ‘¡ğ‘– . </li></ul><p>å¯¹äºimage renderingï¼Œè¿™é‡Œåº”è¯¥æ˜¯å’ŒGaussian Splattingä¸€æ ·çš„ï¼Œæ²¡æœ‰åšä»€ä¹ˆç‰¹æ®Šçš„å¤„ç†ï¼›</p><p>å¯¹äºdepth renderingï¼Œè®ºæ–‡è¯´è¿™æ˜¯ä»–ä»¬è¿™éƒ¨åˆ†çš„å…³é”®ï¼š</p><ul><li><p>å½“å‰çš„æ‰€æœ‰Gaussian SLAMæ¸²æŸ“æ·±åº¦çš„æ–¹å¼éƒ½å’Œæ¸²æŸ“é¢œè‰²çš„æ–¹å¼ä¸€æ ·ï¼Œç”¨alpha blendingã€‚ä½†æ˜¯è¿™ä¼šå¯¼è‡´å•ä¸ªé«˜æ–¯æ¸²æŸ“çš„æ·±åº¦æ˜¯ä»ä¸­é—´åˆ°ä¸¤è¾¹ä¸‹é™çš„ï¼Œä¸é€‚åˆç”¨æ¥å•ç‹¬æ‹Ÿåˆä¸€äº›è¿‘ä¼¼æ˜¯å¹³é¢çš„åŒºåŸŸã€‚è®ºæ–‡è¿™é‡Œæ”¾äº†ä¸€å¼ å›¾æ¥å±•ç¤ºï¼›</p><img src="/images/paper-reading-rtg-slam/image-20240605210350123.png" style="zoom:50%;"><blockquote><p><strong>==ç–‘é—®ï¼šç›®å‰å¯¹renderingéƒ¨åˆ†ç†è§£çš„ä¸æ˜¯å¾ˆé€å½»ï¼Œæœ‰ä¸¤ä¸ªç–‘é—®==</strong></p><ul><li><p>ä¸ºä»€ä¹ˆä¼šå¯¼è‡´æ·±åº¦ä»ä¸­é—´åˆ°ä¸¤è¾¹æ˜¯ä¸‹é™çš„å‘¢ï¼Œæ˜¯å› ä¸º3Då‘2DæŠ•å½±çš„è¿‡ç¨‹å¯¼è‡´çš„å—ï¼Ÿ</p></li><li><p>å¦‚æœè¿™æ ·çš„è¯ï¼ŒRGBçš„æ¸²æŸ“ä¼šä¸ä¼šä¹Ÿæ˜¯ä»ä¸­é—´åˆ°ä¸¤è¾¹ä¸‹é™çš„ï¼Ÿæˆ–è€…è¯´çƒè°å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºæ¯ä¸ªåƒç´ éƒ½æ˜¯ä¸€æ¡å•ç‹¬çš„å°„çº¿ï¼Ÿï¼ˆå¦‚æœçƒè°å¯ä»¥è§£å†³è¿™ç§é—®é¢˜ï¼Œè¿˜ä¸å¦‚è®©æ·±åº¦å•ç‹¬å¸¦å‡ ä¸ªçƒè°ç³»æ•°ï¼‰</p></li></ul></blockquote></li><li><p>æ¯ä¸ªé«˜æ–¯éƒ½èƒ½å¾ˆå¥½çš„æ‹Ÿåˆè¡¨é¢çš„å±€éƒ¨åŒºåŸŸï¼Œä¸éœ€è¦å¤šä¸ªé«˜æ–¯ï¼›</p></li><li><p><strong>depth renderingçš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼š</strong>å¯¹äºæ¯ä¸ªåƒç´ ï¼Œè®¡ç®—view rayä¸è·ç¦»æœ€è¿‘çš„ä¸é€æ˜ellipsoid discçš„äº¤ç‚¹æ¥è·å¾—åƒç´ çš„æ·±åº¦ã€‚</p><blockquote><p>ellipsoid discå°±æ˜¯é«˜æ–¯æ¤­çƒä¸¤ä¸ªç›¸å¯¹é•¿çš„è½´æ„æˆçš„æ¤­åœ†é¢ï¼Œå› ä¸ºè®ºæ–‡å‰é¢æåˆ°äº†æŠŠçŸ­è½´ä½œä¸ºé«˜æ–¯çš„æ³•å‘ã€‚</p><img src="/images/paper-reading-rtg-slam/image-20240605212807029.png" style="zoom:67%;"><blockquote><p>The normal vector is defined as the direction of the smallest eigenvector.</p></blockquote><p>çœ‹ä¸‹é¢çš„å…¬å¼ï¼Œå…¶å®åšçš„ä¹ŸæŒºä¿å®ˆï¼š</p><ul><li>ä¸ç›¸äº¤å°±ç©ºç€ï¼Œå½“æˆ-1ï¼ˆä¸ºä»€ä¹ˆä¼šä¸ç›¸äº¤å‘¢ï¼‰</li><li>å¦‚æœæœ‰ä¸ªé«˜æ–¯å’Œç›¸æœºå¹³é¢çš„å¤¹è§’æ¯”è¾ƒå°ï¼Œå½±å“çš„åƒç´ ç‚¹æ¯”è¾ƒå¤šï¼Œæ‰ä¼šæŠŠè¿™ä¸ªé«˜æ–¯å½“æˆEllipse Discæ¥çœ‹ï¼›</li><li>è€Œå¦‚æœå¤¹è§’æ¯”è¾ƒå¤§ï¼Œå½±å“çš„åƒç´ ç‚¹å°‘ï¼Œå½“æˆEllipse Discå¤„ç†å¯èƒ½è¯¯å·®ä¹Ÿæ¯”è¾ƒå¤§ï¼Œäºæ˜¯è¿™éƒ¨åˆ†çš„åƒç´ çš„æ·±åº¦éƒ½æ˜¯æ ¹æ®é«˜æ–¯çš„ä¸­å¿ƒç‚¹æ¥ç®—çš„ã€‚</li></ul></blockquote><img src="/images/paper-reading-rtg-slam/image-20240605214130735.png" style="zoom:67%;"></li></ul><h3 id="Online-Reconstruction-Process"><a href="#Online-Reconstruction-Process" class="headerlink" title="Online Reconstruction Process"></a>Online Reconstruction Process</h3><blockquote><p>è¿™éƒ¨åˆ†çœ‹æ¥æ˜¯æŠŠæ•´ä¸ªç³»ç»Ÿéƒ½è®²äº†ä¸€é</p></blockquote><h4 id="Input-pre-processing"><a href="#Input-pre-processing" class="headerlink" title="Input pre-processing"></a>Input pre-processing</h4><p>æ ¹æ®è¾“å…¥çš„RGBå’ŒDepthï¼Œè®¡ç®—local vertex mapå’Œlocal normal mapï¼Œå†åˆ©ç”¨ä¼°è®¡çš„ç›¸æœºä½å§¿è½¬æ¢æˆglobal vertex mapå’Œlocal normal map</p><h4 id="Gaussians-adding"><a href="#Gaussians-adding" class="headerlink" title="Gaussians adding"></a>Gaussians adding</h4><p>è¿™é‡Œè¯„ä»·äº†Gaussian Splattingçš„Density Controlç­–ç•¥æ˜¯ä½æ•ˆçš„ï¼Œç„¶åè¯´è‡ªå·±åˆ©ç”¨åŸºäºå‡ ä½•å’Œå¤–è§‚çš„é«˜æ–¯æ·»åŠ ç­–ç•¥æ˜¯æ›´æœ‰æ•ˆæ›´å¯é çš„ï¼Œå…·ä½“æ˜¯æ ¹æ®æ¸²æŸ“çš„ç»“æœè®¡ç®—ä¸€ä¸ªæ©ç æ¥ç¡®å®šä¸ºå“ªäº›åƒç´ æ·»åŠ é«˜æ–¯ï¼š</p><img src="/images/paper-reading-rtg-slam/image-20240608144803374.png" style="zoom:80%;"><p>è¿™é‡Œ$M_s$æ˜¯åº”è¯¥æ·»åŠ æ–°å‡ ä½•å›¾å½¢çš„åŒºåŸŸï¼Œå®ƒçš„è®¡ç®—ä¾æ®æ˜¯ï¼šåƒç´ å°„çº¿ç»è¿‡å¾ˆå°‘çš„é«˜æ–¯æˆ–è€…æ²¡æœ‰ç»è¿‡é«˜æ–¯ï¼Œå³æ–°è§‚æµ‹çš„åŒºåŸŸï¼›ä»¥åŠæ·±åº¦é‡æ¸²æŸ“çš„è¯¯å·®è¿‡å¤§ï¼Œå³æ–°è§‚æµ‹çš„è¡¨é¢åŒºåŸŸä¸ç°æœ‰åœºæ™¯åœ¨è¿™ä¸ªè§†è§’ä¸‹æ¸²æŸ“çš„ç»“æœæœ‰åŒºåˆ«ã€‚</p><p>è¿™é‡Œ$M_c$è¡¨ç¤ºå‡ ä½•ä¸Šå‡†ç¡®ä½†é¢œè‰²è¯¯å·®è¿‡å¤§çš„åŒºåŸŸã€‚</p><p>è¿™é‡Œæ·»åŠ çš„ç­–ç•¥æ˜¯ï¼š</p><ul><li><p>å¯¹äº$M_s$ï¼Œæ·»åŠ é«˜æ–¯å¹¶ä¸”ä¸é€æ˜åº¦è®¾ç½®ä¸º0.99ï¼›</p></li><li><p>å¯¹äº$M_c$â€‹ï¼Œå®ƒå·²ç»ä¸åœºæ™¯ä¸­ç°æœ‰çš„ä¸é€æ˜é«˜æ–¯ç›¸å…³è”ï¼Œå¦‚æœæ˜¯ä¸ç¨³å®šçš„é«˜æ–¯ï¼Œå°±å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–æ¥é€‚åº”é¢œè‰²ï¼Œè¿™æ ·å°±ä¸ç»§ç»­æ·»åŠ é«˜æ–¯ï¼›å¦‚æœæ˜¯ç¨³å®šçš„é«˜æ–¯ï¼Œé‚£å°±åœ¨å®ƒçš„åŸºç¡€ä¸ŠåŠ å…¥ä¸€ä¸ªä¸é€æ˜åº¦ä¸º0.1çš„é«˜æ–¯æ¥æ ¡æ­£é¢œè‰²è¯¯å·®ã€‚</p><p>ä½¿ç”¨é€æ˜é«˜æ–¯å…‰æŸçš„ä¼˜ç‚¹åœ¨äºï¼Œè¿™ç§ä½ä¸é€æ˜åº¦çš„é«˜æ–¯å…‰æŸä¸ä¼šå¼•èµ·å…‰èƒ½çš„æ˜æ˜¾è¡°å‡ï¼Œå¯¹å…¶ä»–è§†å›¾çš„é¢œè‰²å½±å“å¾ˆå°ã€‚å¦å¤–ï¼Œåœ¨æ·±åº¦æ¸²æŸ“çš„è¿‡ç¨‹ä¸­ï¼Œå®ƒä»¬ä¼šè¢«ç®—æ³•è‡ªåŠ¨è¿‡æ»¤æ‰ï¼Œå› æ­¤ä¸ä¼šå½±å“æ·±åº¦æ¸²æŸ“ã€‚å¯¹äºä¸é€æ˜é«˜æ–¯ç‚¹ï¼Œå®ƒä»¬çš„å¤§å°è¢«åˆå§‹åŒ–ä¸ºå°½å¯èƒ½å¤šåœ°è¦†ç›–åœºæ™¯ï¼Œå¾ˆå°‘é‡å ï¼Œè€Œé€æ˜é«˜æ–¯ç‚¹çš„åŠå¾„è¢«é™åˆ¶åœ¨0.01mä»¥ä¸‹ï¼Œä»¥æ¶ˆé™¤å¯¹å…¶ä»–åƒç´ æ¸²æŸ“ç»“æœçš„å¹²æ‰°ã€‚</p></li></ul><blockquote><p>ä»è¿™é‡Œçœ‹ï¼Œè®ºæ–‡æ›´å…³æ³¨å‡ ä½•ä¿¡æ¯ï¼Œè€Œå¯¹äºé¢œè‰²ä¿¡æ¯åˆ™é€šè¿‡æ·»åŠ é€æ˜é«˜æ–¯å¹¶åŠ ä»¥é‡é‡é™åˆ¶æ¥ä¿è¯ä¸å¹²æ‰°æ·±åº¦æ¸²æŸ“ç»“æœçš„åŒæ—¶è®©é¢œè‰²çš„æ¸²æŸ“å°½å¯èƒ½å‡†ç¡®ã€‚</p></blockquote><h4 id="Gaussian-optimization"><a href="#Gaussian-optimization" class="headerlink" title="Gaussian optimization"></a>Gaussian optimization</h4><ul><li><p>æ ¹æ®æ—¶é—´é¡ºåºç¡®å®šäº†ä¸€ä¸ªçª—å£ï¼Œæ¯æ¬¡ä¼˜åŒ–éƒ½æ˜¯ä»çª—å£å†…éšæœºé‡‡æ ·ä¸€å¸§ã€‚</p></li><li><p>ä¸é€æ˜åº¦çš„å­¦ä¹ ç‡è®¾ç½®ä¸º0ï¼Œå› æ­¤ä¸é€æ˜åº¦æ˜¯å›ºå®šçš„ï¼Œä¸ä¼šè¢«ä¼˜åŒ–ã€‚</p><blockquote><p>ç›´æ¥ä¸æ”¾åˆ°ä¼˜åŒ–å‚æ•°é‡Œä¸å°±å¥½äº†ï¼Œè®¾ç½®æˆ0æ˜¯å› ä¸ºï¼Œæ‡’å¾—æ”¹ä»£ç ï¼Ÿ</p></blockquote></li><li><p>colorå’Œdepthè¿˜æ˜¯å¾ˆç»å…¸çš„æŸå¤±å‡½æ•°ï¼Œè¿™é‡Œè®ºæ–‡å¸Œæœ›é€æ˜é«˜æ–¯å‡½æ•°ä¸“æ³¨äºåœ¨ä¸å½±å“å…¶ä»–åŒºåŸŸçš„æƒ…å†µä¸‹ç²¾ç‚¼å±€éƒ¨çš„é¢œè‰²ï¼Œå› æ­¤è®¾è®¡äº†ä¸€ä¸ªæ­£åˆ™åŒ–é¡¹ã€‚æ€»ä½“çš„æŸå¤±å‡½æ•°æ˜¯:</p><img src="/images/paper-reading-rtg-slam/image-20240608152744013.png" style="zoom:80%;"></li><li><p>è®ºæ–‡æ³¨æ„åˆ°ä¼˜åŒ–åçš„é«˜æ–¯å‡½æ•°èƒ½å¾ˆå¥½æ‹Ÿåˆå½“å‰æ—¶é—´çª—å£ï¼Œä½†æ˜¯å¯¹äºä¹‹å‰çš„è§†å›¾ï¼Œæ¸²æŸ“è´¨é‡ä¼šä¸‹é™ã€‚è¿™é‡Œä»–ä»¬æå‡ºäº†ä¸€ç§èåˆç­–ç•¥ï¼Œé€šè¿‡åŠ æƒå¹³å‡çš„æ–¹æ³•æŠŠå½“å‰çš„ç»“æœå’Œä»¥å‰çš„ç»“æœèåˆåˆ°ä¸€èµ·ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆé¿å…é—å¿˜é—®é¢˜ï¼š</p><img src="/images/paper-reading-rtg-slam/image-20240608153533128.png" style="zoom:80%;"></li><li><p>ä¼˜åŒ–æ‰€æœ‰é«˜æ–¯æ˜¯éå¸¸è€—æ—¶çš„ï¼Œå› æ­¤è®ºæ–‡ä¸ä¼˜åŒ–ç¨³å®šé«˜æ–¯ï¼Œåªå…³æ³¨å—åˆ°ä¸ç¨³å®šé«˜æ–¯åˆ†å¸ƒå½±å“çš„åƒç´ ï¼Œä»è€Œé¿å…å¯¹æ‰€æœ‰åƒç´ çš„ä¼˜åŒ–ã€‚</p></li></ul><h4 id="State-management"><a href="#State-management" class="headerlink" title="State management"></a>State management</h4><p>ä¸€äº›ç¨³å®šé«˜æ–¯å’Œä¸ç¨³å®šé«˜æ–¯ä¹‹é—´çš„è½¬æ¢ç­–ç•¥ï¼Œä»¥åŠé”™è¯¯é«˜æ–¯ï¼ˆé•¿æ—¶é—´ä¸ç¨³å®šï¼‰çš„åˆ é™¤</p><img src="/images/paper-reading-rtg-slam/image-20240608153855692.png" style="zoom:67%;"><h4 id="Camera-tracking"><a href="#Camera-tracking" class="headerlink" title="Camera tracking"></a>Camera tracking</h4><p><strong>ä½¿ç”¨frame-to-modelçš„ICPç®—æ³•ä½œä¸ºfront-end odometry</strong>ï¼Œä½¿ç”¨å‰ä¸€å¸§ä¸­ä¼˜åŒ–çš„é«˜æ–¯å‡½æ•°æ¥æ¸²æŸ“æ·±åº¦å›¾ã€æ³•çº¿å›¾ï¼Œå¹¶ä¸”è½¬æ¢åˆ°å…¨å±€ç©ºé—´ï¼Œç„¶åç»™å®šå½“å‰å¸§ï¼Œé€šè¿‡æœ€å°åŒ–3Dåå‘æŠ•å½±è¯¯å·®å¾—åˆ°ä½å§¿ï¼š</p><img src="/images/paper-reading-rtg-slam/image-20240608154323318.png" style="zoom:67%;"><p>è®ºæ–‡è¿˜æåˆ°ä¸ºäº†å‡å°å¤§åœºæ™¯çš„ç´¯ç§¯æ¼‚ç§»ï¼Œç”¨äº†ç±»ä¼¼ORB-SLAM2çš„åç«¯ä¼˜åŒ–çº¿ç¨‹ï¼Œå®Œæˆä½å§¿ä¼°è®¡çš„åŒæ—¶è¿˜ä¼šä¿ç•™ä¸€ç»„3D landmarkç”¨äºåç«¯çš„ä¼˜åŒ–ã€‚</p><blockquote><p>å’ŒGS_ICP SLAMç›¸æ¯”ï¼Œè¿™é‡ŒICPç”¨çš„è¿˜æ˜¯æŒºç”Ÿç¡¬çš„ï¼Œéœ€è¦ä¿ç•™ä¸€ç»„3D landmarkï¼Œå­˜åœ¨æ•°æ®å†—ä½™çš„æƒ…å†µã€‚</p><p>æˆ‘æ€€ç–‘è¿™é‡Œç”¨çš„å°±æ˜¯ORB-SLAM2çš„RGB-Då‰ç«¯ï¼Œå› ä¸ºå®éªŒéƒ¨åˆ†Table 2çš„æ•°æ®ä¹Ÿå¤ªå¥½çœ‹äº†ï¼Œéå¸¸æ¥è¿‘ORB-SLAM2çš„ç»“æœã€‚</p></blockquote><h4 id="Keyframes-and-global-optimization"><a href="#Keyframes-and-global-optimization" class="headerlink" title="Keyframes and global optimization"></a>Keyframes and global optimization</h4><ul><li>åŸºäºç›¸æœºçš„è¿åŠ¨æ„é€ å…³é”®å¸§åˆ—è¡¨ï¼Œæ—‹è½¬è§’åº¦æˆ–è€…ç›¸å¯¹å¹³ç§»è¶…è¿‡äº†é˜ˆå€¼å°±æ·»åŠ å…³é”®å¸§ã€‚</li><li>åªä¼˜åŒ–æ¯ä¸ªå…³é”®å¸§ä¸Šè¯¯å·®å‰40%çš„åƒç´ ï¼Œå¹¶ä¸”ä¼˜åŒ–è¿‡ç¨‹ä¸­ä¸æ›´æ–°é«˜æ–¯çš„ä½ç½®ï¼Œä½¿ç”¨0.1å€ç‡çš„åŸå§‹å­¦ä¹ ç‡æ¥ä¼˜åŒ–å…¶ä»–çš„å‚æ•°ã€‚</li></ul><h2 id="EVALUATION"><a href="#EVALUATION" class="headerlink" title="EVALUATION"></a>EVALUATION</h2><p>è§åŸè®ºæ–‡</p><h2 id="SUPPLEMENTARY-MATERIALS"><a href="#SUPPLEMENTARY-MATERIALS" class="headerlink" title="SUPPLEMENTARY MATERIALS"></a>SUPPLEMENTARY MATERIALS</h2><blockquote><p>åªè®°å½•ä¸ªäººè®¤ä¸ºå€¼å¾—æ³¨æ„çš„ç»†èŠ‚</p></blockquote><h3 id="GAUSSIAN-INITIALIZATION"><a href="#GAUSSIAN-INITIALIZATION" class="headerlink" title="GAUSSIAN INITIALIZATION"></a>GAUSSIAN INITIALIZATION</h3><p>æ¯ä¸ªæ–°çš„é«˜æ–¯éƒ½ä¼šåˆå§‹åŒ–ä¸ºä¸€ä¸ªå¹³é¢åœ†ç›˜ï¼Œæ ¹æ®æœ€è¿‘çš„ä¸‰ä¸ªé«˜æ–¯æ¥è®¡ç®—è½´çš„é•¿åº¦ï¼Œä¸‰ä¸ªè½´çš„æ¯”ä¾‹ä¸º1ï¼š1ï¼š0.1</p><img src="/images/paper-reading-rtg-slam/image-20240608155942944.png" style="zoom:67%;"><h3 id="IMPLEMENTATION-DETAILS"><a href="#IMPLEMENTATION-DETAILS" class="headerlink" title="IMPLEMENTATION DETAILS"></a>IMPLEMENTATION DETAILS</h3><p>ç³»ç»Ÿç”±ä¸‰ä¸ªçº¿ç¨‹æ„æˆï¼šé«˜æ–¯ä¼˜åŒ–ã€å‰ç«¯åœ¨çº¿è·Ÿè¸ªã€åç«¯å›¾ä¼˜åŒ–ã€‚</p><p>å‰ç«¯åœ¨çº¿è·Ÿè¸ªæ˜¯ç”¨python+pytorchå®ç°çš„ï¼Œè€Œåç«¯ä¼˜åŒ–éƒ¨åˆ†æ˜¯åŸºäºORB-SLAM2ç”¨Cè¯­è¨€å®ç°çš„ã€‚</p><h2 id="ä¸ªäººè¯„ä»·"><a href="#ä¸ªäººè¯„ä»·" class="headerlink" title="ä¸ªäººè¯„ä»·"></a>ä¸ªäººè¯„ä»·</h2><p>è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯ç”¨äº†å¾ˆå¤šç®€å•æœ‰æ•ˆçš„æ”¹è¿›ç­–ç•¥ï¼Œåœ¨å·¥ç¨‹ä¸Šåšäº†å¾ˆå¤šçš„å·¥ä½œã€‚</p><p>å¦å¤–ï¼Œè¿™ç¯‡è®ºæ–‡çš„å‰ç«¯é‡Œç¨‹è®¡ä¹Ÿæ˜¯åŸºäºICPçš„æ–¹æ³•ï¼Œåç»­å¯èƒ½ä¼šæœ‰è¶Šæ¥è¶Šå¤šçš„RGB-Dé«˜æ–¯SLAMä½¿ç”¨ä¼ ç»Ÿçš„ç‚¹äº‘é…å‡†æ–¹æ³•æ¥åšå‰ç«¯çš„é‡Œç¨‹è®¡ã€‚é«˜æ–¯æ¯•ç«Ÿè¿˜æ˜¯æ˜¾å¼åœ°è¡¨ç¤ºï¼Œå’Œç‚¹äº‘å¾ˆç›¸ä¼¼ï¼Œä»åŸºäºæ¸²æŸ“æŸå¤±ä¼˜åŒ–ä½å§¿åˆ°ä¼ ç»Ÿç‚¹äº‘é…å‡†æ±‚è§£ä½å§¿çš„å‘å±•æ˜¯å¿…ç„¶çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> 3D Gaussian Splatting </tag>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gaussian Splattingä¸­çƒè°çš„ä½¿ç”¨</title>
      <link href="2024/05/31/3dgs-notes-1/"/>
      <url>2024/05/31/3dgs-notes-1/</url>
      
        <content type="html"><![CDATA[<h1 id="Gaussian-Splattingä¸­çƒè°çš„ä½¿ç”¨"><a href="#Gaussian-Splattingä¸­çƒè°çš„ä½¿ç”¨" class="headerlink" title="Gaussian Splattingä¸­çƒè°çš„ä½¿ç”¨"></a>Gaussian Splattingä¸­çƒè°çš„ä½¿ç”¨</h1><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>åœ¨<code>class GaussianModel</code>ä¸­ï¼Œçƒè°æ˜¯é€šè¿‡ä¸‹é¢çš„æ–¹å¼å®šä¹‰çš„ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">self<span class="token punctuation">.</span>_features_dc <span class="token operator">=</span> torch<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment"># ç¬¬ä¸€ä¸ªçƒè°ç³»æ•°ï¼Œç”¨äºè¡¨ç¤ºåŸºç¡€é¢œè‰²</span>self<span class="token punctuation">.</span>_features_rest <span class="token operator">=</span> torch<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment"># å…¶ä½™çš„çƒè°ç³»æ•°ï¼Œç”¨äºè¡¨ç¤ºé¢œè‰²çš„ç»†èŠ‚å’Œå˜åŒ–</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>_features_dc</code> å’Œ <code>_features_rest</code> å¼ é‡çš„å½¢çŠ¶ä¸º <code>(æ ·æœ¬æ•°, 3, 1)</code> å’Œ <code>(æ ·æœ¬æ•°, 3, (max_sh_degree + 1) ** 2 - 1)</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºåŸºç¡€é¢œè‰²çš„çƒè°ç³»æ•°å’Œå…¶ä½™çƒè°ç³»æ•°ã€‚</p><blockquote><p>æŠŠç›¸å…³çš„ä»£ç å‘ç»™ChatGPTï¼Œèƒ½å¤Ÿå¸®åŠ©åˆ†æï¼Œå‚è€ƒé“¾æ¥ä¸ºï¼š<a href="https://chatgpt.com/share/35888723-ab2f-4384-ac63-0fcc87aaaa22">https://chatgpt.com/share/35888723-ab2f-4384-ac63-0fcc87aaaa22</a></p></blockquote><h2 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h2><p>ä¹‹åï¼Œé€šè¿‡å¦‚ä¸‹çš„æ–¹å¼è¿›è¡Œåˆå§‹åŒ–ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">fused_color <span class="token operator">=</span> RGB2SH<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span>np<span class="token punctuation">.</span>asarray<span class="token punctuation">(</span>pcd<span class="token punctuation">.</span>colors<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># åˆå§‹åŒ–å­˜å‚¨çƒè°ç³»æ•°çš„å¼ é‡ï¼Œæ¯ä¸ªé¢œè‰²é€šé“æœ‰(max_sh_degree + 1) ** 2ä¸ªçƒè°ç³»æ•°</span>features <span class="token operator">=</span> torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>fused_color<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>max_sh_degree <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># å°†RGBè½¬æ¢åçš„çƒè°ç³»æ•°C0é¡¹çš„ç³»æ•°å­˜å…¥</span>features<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> fused_color<span class="token comment"># å…¶ä½™çƒè°ç³»æ•°åˆå§‹åŒ–ä¸º0</span>features<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python">self<span class="token punctuation">.</span>_features_dc <span class="token operator">=</span> nn<span class="token punctuation">.</span>Parameter<span class="token punctuation">(</span>features<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>transpose<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>contiguous<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>requires_grad_<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>self<span class="token punctuation">.</span>_features_rest <span class="token operator">=</span> nn<span class="token punctuation">.</span>Parameter<span class="token punctuation">(</span>features<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">.</span>transpose<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>contiguous<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>requires_grad_<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç›¸å…³çš„å‡½æ•°ä¸ºï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">RGB2SH</span><span class="token punctuation">(</span>rgb<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    å°†RGBé¢œè‰²å€¼è½¬æ¢ä¸ºçƒè°ç³»æ•°C0é¡¹çš„ç³»æ•°ã€‚    :param rgb: RGBé¢œè‰²å€¼ã€‚    :return: è½¬æ¢åçš„çƒè°ç³»æ•°C0é¡¹çš„ç³»æ•°ã€‚    """</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>rgb <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">/</span> C0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¿å­˜"><a href="#ä¿å­˜" class="headerlink" title="ä¿å­˜"></a>ä¿å­˜</h2><p>åœ¨<code>class GaussianModel</code>ä¸­ï¼Œçƒè°é€šè¿‡å¦‚ä¸‹æ–¹å¼ä¿å­˜åˆ°plyæ–‡ä»¶ä¸­ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ä» self._features_dc å¼ é‡ä¸­åˆ†ç¦»æ•°æ®ï¼Œè½¬ç½®ç¬¬äºŒç»´å’Œç¬¬ä¸‰ç»´ï¼Œæ‰å¹³åŒ–ï¼Œå˜ä¸ºè¿ç»­å­˜å‚¨ï¼Œå¹¶å¤åˆ¶åˆ° CPUï¼Œæœ€åè½¬æ¢ä¸º numpy æ•°ç»„</span>f_dc <span class="token operator">=</span> self<span class="token punctuation">.</span>_features_dc<span class="token punctuation">.</span>detach<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>transpose<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>flatten<span class="token punctuation">(</span>start_dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>contiguous<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cpu<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># ä» self._features_rest å¼ é‡ä¸­åˆ†ç¦»æ•°æ®ï¼Œè½¬ç½®ç¬¬äºŒç»´å’Œç¬¬ä¸‰ç»´ï¼Œæ‰å¹³åŒ–ï¼Œå˜ä¸ºè¿ç»­å­˜å‚¨ï¼Œå¹¶å¤åˆ¶åˆ° CPUï¼Œæœ€åè½¬æ¢ä¸º numpy æ•°ç»„</span>f_rest <span class="token operator">=</span> self<span class="token punctuation">.</span>_features_rest<span class="token punctuation">.</span>detach<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>transpose<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>flatten<span class="token punctuation">(</span>start_dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>contiguous<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cpu<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼ï¼Œå°†çƒè°è½¬æ¢ä¸ºRGBï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">if</span> pipe<span class="token punctuation">.</span>convert_SHs_python<span class="token punctuation">:</span>    <span class="token comment"># ************ é‡ç‚¹ï¼šçƒè°å‡½æ•°å¦‚ä½•å®ç°å¯¹é¢œè‰²çš„æŒæ§ **********</span>    <span class="token comment"># å°†SHç‰¹å¾çš„å½¢çŠ¶è°ƒæ•´ä¸ºï¼ˆbatch_size * num_pointsï¼Œ3ï¼Œ(max_sh_degree+1)**2ï¼‰</span>    shs_view <span class="token operator">=</span> pc<span class="token punctuation">.</span>get_features<span class="token punctuation">.</span>transpose<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>pc<span class="token punctuation">.</span>max_sh_degree <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span>    <span class="token comment"># è®¡ç®—ç›¸æœºä¸­å¿ƒåˆ°æ¯ä¸ªç‚¹çš„æ–¹å‘å‘é‡ï¼Œå¹¶å½’ä¸€åŒ–</span>    dir_pp <span class="token operator">=</span> <span class="token punctuation">(</span>pc<span class="token punctuation">.</span>get_xyz <span class="token operator">-</span> viewpoint_camera<span class="token punctuation">.</span>camera_center<span class="token punctuation">.</span>repeat<span class="token punctuation">(</span>pc<span class="token punctuation">.</span>get_features<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># è®¡ç®—ç›¸æœºä¸­å¿ƒåˆ°æ¯ä¸ªç‚¹çš„æ–¹å‘å‘é‡ï¼Œå¹¶å½’ä¸€åŒ–</span>    dir_pp_normalized <span class="token operator">=</span> dir_pp <span class="token operator">/</span> dir_pp<span class="token punctuation">.</span>norm<span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> keepdim<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token comment"># ä½¿ç”¨SHç‰¹å¾å°†æ–¹å‘å‘é‡è½¬æ¢ä¸ºRGBé¢œè‰²</span>    sh2rgb <span class="token operator">=</span> eval_sh<span class="token punctuation">(</span>pc<span class="token punctuation">.</span>active_sh_degree<span class="token punctuation">,</span> shs_view<span class="token punctuation">,</span> dir_pp_normalized<span class="token punctuation">)</span>    <span class="token comment"># å°†RGBé¢œè‰²çš„èŒƒå›´é™åˆ¶åœ¨0åˆ°1ä¹‹é—´</span>    colors_precomp <span class="token operator">=</span> torch<span class="token punctuation">.</span>clamp_min<span class="token punctuation">(</span>sh2rgb <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç›¸å…³çš„å‡ ä¸ªå‡½æ•°ä¸ºï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">get_features</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>    features_dc <span class="token operator">=</span> self<span class="token punctuation">.</span>_features_dc    features_rest <span class="token operator">=</span> self<span class="token punctuation">.</span>_features_rest    <span class="token keyword">return</span> torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span><span class="token punctuation">(</span>features_dc<span class="token punctuation">,</span> features_rest<span class="token punctuation">)</span><span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">eval_sh</span><span class="token punctuation">(</span>deg<span class="token punctuation">,</span> sh<span class="token punctuation">,</span> dirs<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    Evaluate spherical harmonics at unit directions    using hardcoded SH polynomials.    Works with torch/np/jnp.    ... Can be 0 or more batch dimensions.    Args:        deg: int SH deg. Currently, 0-3 supported        sh: jnp.ndarray SH coeffs [..., C, (deg + 1) ** 2]        dirs: jnp.ndarray unit directions [..., 3]    Returns:        [..., C]    """</span>    <span class="token keyword">assert</span> deg <span class="token operator">&lt;=</span> <span class="token number">4</span> <span class="token keyword">and</span> deg <span class="token operator">&gt;=</span> <span class="token number">0</span>    coeff <span class="token operator">=</span> <span class="token punctuation">(</span>deg <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span>    <span class="token keyword">assert</span> sh<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;=</span> coeff    result <span class="token operator">=</span> C0 <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">if</span> deg <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>        x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z <span class="token operator">=</span> dirs<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dirs<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dirs<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>        result <span class="token operator">=</span> <span class="token punctuation">(</span>result <span class="token operator">-</span>                  C1 <span class="token operator">*</span> y <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span>                  C1 <span class="token operator">*</span> z <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span>                  C1 <span class="token operator">*</span> x <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> deg <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">:</span>            xx<span class="token punctuation">,</span> yy<span class="token punctuation">,</span> zz <span class="token operator">=</span> x <span class="token operator">*</span> x<span class="token punctuation">,</span> y <span class="token operator">*</span> y<span class="token punctuation">,</span> z <span class="token operator">*</span> z            xy<span class="token punctuation">,</span> yz<span class="token punctuation">,</span> xz <span class="token operator">=</span> x <span class="token operator">*</span> y<span class="token punctuation">,</span> y <span class="token operator">*</span> z<span class="token punctuation">,</span> x <span class="token operator">*</span> z            result <span class="token operator">=</span> <span class="token punctuation">(</span>result <span class="token operator">+</span>                      C2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> xy <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">+</span>                      C2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> yz <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">+</span>                      C2<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2.0</span> <span class="token operator">*</span> zz <span class="token operator">-</span> xx <span class="token operator">-</span> yy<span class="token punctuation">)</span> <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">+</span>                      C2<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">*</span> xz <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">+</span>                      C2<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>xx <span class="token operator">-</span> yy<span class="token punctuation">)</span> <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> deg <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">:</span>                result <span class="token operator">=</span> <span class="token punctuation">(</span>result <span class="token operator">+</span>                          C3<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> y <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> xx <span class="token operator">-</span> yy<span class="token punctuation">)</span> <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span> <span class="token operator">+</span>                          C3<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> xy <span class="token operator">*</span> z <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">+</span>                          C3<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> y <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">*</span> zz <span class="token operator">-</span> xx <span class="token operator">-</span> yy<span class="token punctuation">)</span> <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">]</span> <span class="token operator">+</span>                          C3<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">*</span> z <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> zz <span class="token operator">-</span> <span class="token number">3</span> <span class="token operator">*</span> xx <span class="token operator">-</span> <span class="token number">3</span> <span class="token operator">*</span> yy<span class="token punctuation">)</span> <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span> <span class="token operator">+</span>                          C3<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">*</span> x <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">*</span> zz <span class="token operator">-</span> xx <span class="token operator">-</span> yy<span class="token punctuation">)</span> <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">]</span> <span class="token operator">+</span>                          C3<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">*</span> z <span class="token operator">*</span> <span class="token punctuation">(</span>xx <span class="token operator">-</span> yy<span class="token punctuation">)</span> <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">]</span> <span class="token operator">+</span>                          C3<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">*</span> x <span class="token operator">*</span> <span class="token punctuation">(</span>xx <span class="token operator">-</span> <span class="token number">3</span> <span class="token operator">*</span> yy<span class="token punctuation">)</span> <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> deg <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">:</span>                    result <span class="token operator">=</span> <span class="token punctuation">(</span>result <span class="token operator">+</span> C4<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> xy <span class="token operator">*</span> <span class="token punctuation">(</span>xx <span class="token operator">-</span> yy<span class="token punctuation">)</span> <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">]</span> <span class="token operator">+</span>                              C4<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> yz <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> xx <span class="token operator">-</span> yy<span class="token punctuation">)</span> <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">]</span> <span class="token operator">+</span>                              C4<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> xy <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">7</span> <span class="token operator">*</span> zz <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span> <span class="token operator">+</span>                              C4<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">*</span> yz <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">7</span> <span class="token operator">*</span> zz <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">]</span> <span class="token operator">+</span>                              C4<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>zz <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">35</span> <span class="token operator">*</span> zz <span class="token operator">-</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span> <span class="token operator">+</span>                              C4<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">*</span> xz <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">7</span> <span class="token operator">*</span> zz <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">]</span> <span class="token operator">+</span>                              C4<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>xx <span class="token operator">-</span> yy<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">7</span> <span class="token operator">*</span> zz <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">]</span> <span class="token operator">+</span>                              C4<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">*</span> xz <span class="token operator">*</span> <span class="token punctuation">(</span>xx <span class="token operator">-</span> <span class="token number">3</span> <span class="token operator">*</span> yy<span class="token punctuation">)</span> <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">]</span> <span class="token operator">+</span>                              C4<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>xx <span class="token operator">*</span> <span class="token punctuation">(</span>xx <span class="token operator">-</span> <span class="token number">3</span> <span class="token operator">*</span> yy<span class="token punctuation">)</span> <span class="token operator">-</span> yy <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> xx <span class="token operator">-</span> yy<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> sh<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> 3D Gaussian Splatting </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Colmapå’ŒGaussian Splattingä¿å­˜å‡ºæ¥çš„plyæ–‡ä»¶æ ¼å¼è§£æ</title>
      <link href="2024/05/30/3dgs-notes-0/"/>
      <url>2024/05/30/3dgs-notes-0/</url>
      
        <content type="html"><![CDATA[<h1 id="Colmapå’ŒGaussian-Splattingä¿å­˜å‡ºæ¥çš„plyæ–‡ä»¶æ ¼å¼è§£æ"><a href="#Colmapå’ŒGaussian-Splattingä¿å­˜å‡ºæ¥çš„plyæ–‡ä»¶æ ¼å¼è§£æ" class="headerlink" title="Colmapå’ŒGaussian Splattingä¿å­˜å‡ºæ¥çš„plyæ–‡ä»¶æ ¼å¼è§£æ"></a>Colmapå’ŒGaussian Splattingä¿å­˜å‡ºæ¥çš„plyæ–‡ä»¶æ ¼å¼è§£æ</h1><h2 id="Colmap"><a href="#Colmap" class="headerlink" title="Colmap"></a>Colmap</h2><p>æ‰“å°Colmapç¨€ç–é‡å»ºçš„ç‚¹äº‘ï¼Œå‰13è¡Œæ˜¯è¿™æ ·çš„ï¼š</p><pre class="line-numbers language-none"><code class="language-none">plyformat binary_little_endian 1.0element vertex 100267property float xproperty float yproperty float zproperty float nxproperty float nyproperty float nzproperty uchar redproperty uchar greenproperty uchar blueend_header<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹åº”çš„æ•°æ®æ˜¯è¿™æ ·çš„ï¼š</p><pre class="line-numbers language-none"><code class="language-none">-0.520981 4.31948 -0.425874 0 0 0 127 194 178<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å…¶å®å¯ä»¥å‘ç°ç¨€ç–é‡å»ºçš„ç‚¹äº‘ï¼Œå¹¶æ²¡æœ‰è®¡ç®—æ¯ä¸ªç‚¹çš„æ³•å‘ï¼Œåªæ˜¯ä¿å­˜çš„plyæ–‡ä»¶æœ‰è¿™äº›æ•°æ®ã€‚</p><h2 id="Gaussian-Splatting"><a href="#Gaussian-Splatting" class="headerlink" title="Gaussian Splatting"></a>Gaussian Splatting</h2><p>å¯¹äºsh_degreeè®¾ç½®ä¸º3çš„Gaussianï¼Œæ¯ä¸ªGaussianæœ‰62ä¸ªå‚æ•°ï¼ˆä¸çœ‹æ³•å‘ï¼Œ<strong>å®é™…ä¸Šåªæœ‰59ä¸ª</strong>ï¼‰ï¼Œå‰66è¡Œæ˜¯è¿™æ ·çš„ï¼š</p><pre class="line-numbers language-none"><code class="language-none">plyformat binary_little_endian 1.0element vertex 407216property float xproperty float yproperty float zproperty float nxproperty float nyproperty float nzproperty float f_dc_0property float f_dc_1property float f_dc_2property float f_rest_0property float f_rest_1property float f_rest_2property float f_rest_3property float f_rest_4property float f_rest_5property float f_rest_6property float f_rest_7property float f_rest_8property float f_rest_9property float f_rest_10property float f_rest_11property float f_rest_12property float f_rest_13property float f_rest_14property float f_rest_15property float f_rest_16property float f_rest_17property float f_rest_18property float f_rest_19property float f_rest_20property float f_rest_21property float f_rest_22property float f_rest_23property float f_rest_24property float f_rest_25property float f_rest_26property float f_rest_27property float f_rest_28property float f_rest_29property float f_rest_30property float f_rest_31property float f_rest_32property float f_rest_33property float f_rest_34property float f_rest_35property float f_rest_36property float f_rest_37property float f_rest_38property float f_rest_39property float f_rest_40property float f_rest_41property float f_rest_42property float f_rest_43property float f_rest_44property float opacityproperty float scale_0property float scale_1property float scale_2property float rot_0property float rot_1property float rot_2property float rot_3end_header<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹åº”çš„æ•°æ®æ˜¯è¿™æ ·çš„ï¼š</p><pre class="line-numbers language-none"><code class="language-none">2.1896963119506836 0.5654028058052063 1.664149284362793 0.0 0.0 0.0 0.5147678256034851 0.2996779680252075 -0.03710278868675232 0.02432778663933277 0.02444857358932495 0.02761399932205677 -0.009275455959141254 -0.07312484085559845 -0.07785580307245255 0.00238581420853734 0.059049881994724274 -0.00435364106670022 -0.00045146566117182374 0.028354087844491005 -0.08165063709020615 -0.044504206627607346 0.03321271389722824 0.02827625349164009 0.0210369061678648 0.029464859515428543 0.012756595388054848 0.0032518154475837946 -0.06004106625914574 -0.03746717795729637 0.014808553270995617 0.05368928611278534 -0.007978635840117931 -0.04243125021457672 0.002324196044355631 -0.05169673264026642 -0.08004658669233322 0.02979198843240738 0.05964512750506401 -0.022210335358977318 -0.03916030004620552 -0.007248427718877792 0.021033495664596558 0.02982276864349842 -0.004562453832477331 0.029783839359879494 0.003827654290944338 0.01913684606552124 -0.04349766671657562 -0.11221770942211151 -0.0740458145737648 -0.03573375567793846 0.08243989944458008 0.05897160992026329 -1.6227161884307861 -10.401392936706543 -3.377558946609497 -5.4260053634643555 0.9305478930473328 0.17775008082389832 -0.052619289606809616 -0.04175473749637604 2.176823616027832<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯¹äºsh_degreeè®¾ç½®ä¸º0çš„Gaussianï¼Œæ¯ä¸ªGaussianæœ‰17ä¸ªå‚æ•°ï¼ˆä¸çœ‹æ³•å‘ï¼Œ<strong>å®é™…ä¸Šåªæœ‰14ä¸ª</strong>ï¼‰ï¼Œå‰21è¡Œæ˜¯è¿™æ ·çš„ï¼š</p><pre class="line-numbers language-none"><code class="language-none">plyformat binary_little_endian 1.0element vertex 1809737property float xproperty float yproperty float zproperty float nxproperty float nyproperty float nzproperty float f_dc_0property float f_dc_1property float f_dc_2property float opacityproperty float scale_0property float scale_1property float scale_2property float rot_0property float rot_1property float rot_2property float rot_3end_header<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹åº”çš„æ•°æ®æ˜¯è¿™æ ·çš„ï¼š</p><pre class="line-numbers language-none"><code class="language-none">-0.4938425123691559 4.382840156555176 -0.4051733613014221 0.0 0.0 0.0 0.18498234450817108 1.119383692741394 0.8595899343490601 -2.0330333709716797 -3.6038339138031006 -3.884824752807617 -3.724702835083008 0.8671903610229492 0.17955081164836884 -0.04104405641555786 -0.1000492125749588<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="è½¬æ¢ä»£ç å‚è€ƒ"><a href="#è½¬æ¢ä»£ç å‚è€ƒ" class="headerlink" title="è½¬æ¢ä»£ç å‚è€ƒ"></a>è½¬æ¢ä»£ç å‚è€ƒ</h2><h3 id="ColmapäºŒè¿›åˆ¶ç‚¹äº‘è½¬asciiç‚¹äº‘"><a href="#ColmapäºŒè¿›åˆ¶ç‚¹äº‘è½¬asciiç‚¹äº‘" class="headerlink" title="ColmapäºŒè¿›åˆ¶ç‚¹äº‘è½¬asciiç‚¹äº‘"></a>ColmapäºŒè¿›åˆ¶ç‚¹äº‘è½¬asciiç‚¹äº‘</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d<span class="token keyword">import</span> argparse<span class="token keyword">def</span> <span class="token function">convert_ply</span><span class="token punctuation">(</span>input_file<span class="token punctuation">,</span> output_file<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># è¯»å–äºŒè¿›åˆ¶æ ¼å¼çš„PLYæ–‡ä»¶</span>    pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span>input_file<span class="token punctuation">)</span>    <span class="token comment"># å°†PLYæ•°æ®ä¿å­˜ä¸ºæ–‡æœ¬æ ¼å¼çš„PLYæ–‡ä»¶</span>    o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>write_point_cloud<span class="token punctuation">(</span>output_file<span class="token punctuation">,</span> pcd<span class="token punctuation">,</span> write_ascii<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>description<span class="token operator">=</span><span class="token string">'Convert binary PLY to ASCII PLY.'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'input_file'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'Path to the input binary PLY file'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'output_file'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'Path to the output ASCII PLY file'</span><span class="token punctuation">)</span>    args <span class="token operator">=</span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">)</span>    convert_ply<span class="token punctuation">(</span>args<span class="token punctuation">.</span>input_file<span class="token punctuation">,</span> args<span class="token punctuation">.</span>output_file<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Gaussian-SplattingäºŒè¿›åˆ¶ç‚¹äº‘è½¬asciiç‚¹äº‘"><a href="#Gaussian-SplattingäºŒè¿›åˆ¶ç‚¹äº‘è½¬asciiç‚¹äº‘" class="headerlink" title="Gaussian SplattingäºŒè¿›åˆ¶ç‚¹äº‘è½¬asciiç‚¹äº‘"></a>Gaussian SplattingäºŒè¿›åˆ¶ç‚¹äº‘è½¬asciiç‚¹äº‘</h3><p>å¯¹äº<code>sh_degree=3</code>çš„æƒ…å†µï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> argparse<span class="token keyword">import</span> struct<span class="token keyword">def</span> <span class="token function">convert_ply</span><span class="token punctuation">(</span>input_file<span class="token punctuation">,</span> output_file<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>input_file<span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>        binary_data <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># æ‰¾åˆ°å¤´éƒ¨ç»“æŸçš„ä½ç½®</span>    header_end <span class="token operator">=</span> binary_data<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">b'end_header\n'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token string">b'end_header\n'</span><span class="token punctuation">)</span>    header <span class="token operator">=</span> binary_data<span class="token punctuation">[</span><span class="token punctuation">:</span>header_end<span class="token punctuation">]</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    body <span class="token operator">=</span> binary_data<span class="token punctuation">[</span>header_end<span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token comment"># ç”Ÿæˆæ–°çš„ ASCII å¤´éƒ¨</span>    ascii_header <span class="token operator">=</span> header<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'binary_little_endian'</span><span class="token punctuation">,</span> <span class="token string">'ascii'</span><span class="token punctuation">)</span>    <span class="token comment"># å†™å…¥æ–°çš„ ASCII æ–‡ä»¶</span>    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>output_file<span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>        f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>ascii_header<span class="token punctuation">)</span>        <span class="token comment"># è§£ææ¯ä¸ªé¡¶ç‚¹çš„æ•°æ®</span>        offset <span class="token operator">=</span> <span class="token number">0</span>        <span class="token comment"># ç¡®å®šæ¯ä¸ªé¡¶ç‚¹çš„æ ¼å¼å’Œå¤§å°</span>        vertex_format <span class="token operator">=</span> <span class="token string">'&lt;3f3f3f1f45f1f3f4f'</span>  <span class="token comment"># x, y, z, nx, ny, nz, f_dc_0, f_dc_1, f_dc_2, f_rest_0 to f_rest_44, opacity, scale_0, scale_1, scale_2, rot_0, rot_1, rot_2, rot_3</span>        vertex_size <span class="token operator">=</span> struct<span class="token punctuation">.</span>calcsize<span class="token punctuation">(</span>vertex_format<span class="token punctuation">)</span>        vertex_count <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>header<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'element vertex '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>vertex_count<span class="token punctuation">)</span><span class="token punctuation">:</span>            vertex_data <span class="token operator">=</span> struct<span class="token punctuation">.</span>unpack_from<span class="token punctuation">(</span>vertex_format<span class="token punctuation">,</span> body<span class="token punctuation">,</span> offset<span class="token punctuation">)</span>            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">,</span> vertex_data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>            offset <span class="token operator">+=</span> vertex_size<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>description<span class="token operator">=</span><span class="token string">'Convert binary PLY to ASCII PLY.'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'input_file'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'Path to the input binary PLY file'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'output_file'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'Path to the output ASCII PLY file'</span><span class="token punctuation">)</span>    args <span class="token operator">=</span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">)</span>    convert_ply<span class="token punctuation">(</span>args<span class="token punctuation">.</span>input_file<span class="token punctuation">,</span> args<span class="token punctuation">.</span>output_file<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹äº<code>sh_degree=0</code>çš„æƒ…å†µï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> argparse<span class="token keyword">import</span> struct<span class="token keyword">def</span> <span class="token function">convert_ply</span><span class="token punctuation">(</span>input_file<span class="token punctuation">,</span> output_file<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>input_file<span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>        binary_data <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># æ‰¾åˆ°å¤´éƒ¨ç»“æŸçš„ä½ç½®</span>    header_end <span class="token operator">=</span> binary_data<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">b'end_header\n'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token string">b'end_header\n'</span><span class="token punctuation">)</span>    header <span class="token operator">=</span> binary_data<span class="token punctuation">[</span><span class="token punctuation">:</span>header_end<span class="token punctuation">]</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    body <span class="token operator">=</span> binary_data<span class="token punctuation">[</span>header_end<span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token comment"># ç”Ÿæˆæ–°çš„ ASCII å¤´éƒ¨</span>    ascii_header <span class="token operator">=</span> header<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'binary_little_endian'</span><span class="token punctuation">,</span> <span class="token string">'ascii'</span><span class="token punctuation">)</span>    <span class="token comment"># å†™å…¥æ–°çš„ ASCII æ–‡ä»¶</span>    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>output_file<span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>        f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>ascii_header<span class="token punctuation">)</span>        <span class="token comment"># è§£ææ¯ä¸ªé¡¶ç‚¹çš„æ•°æ®</span>        offset <span class="token operator">=</span> <span class="token number">0</span>        vertex_format <span class="token operator">=</span> <span class="token string">'&lt;3f3f3f1f3f4f'</span>  <span class="token comment"># x, y, z, nx, ny, nz, f_dc_0, f_dc_1, f_dc_2, opacity, scale_0, scale_1, scale_2, rot_0, rot_1, rot_2, rot_3</span>        vertex_size <span class="token operator">=</span> struct<span class="token punctuation">.</span>calcsize<span class="token punctuation">(</span>vertex_format<span class="token punctuation">)</span>        vertex_count <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>header<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'element vertex '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>vertex_count<span class="token punctuation">)</span><span class="token punctuation">:</span>            vertex_data <span class="token operator">=</span> struct<span class="token punctuation">.</span>unpack_from<span class="token punctuation">(</span>vertex_format<span class="token punctuation">,</span> body<span class="token punctuation">,</span> offset<span class="token punctuation">)</span>            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">,</span> vertex_data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>            offset <span class="token operator">+=</span> vertex_size<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>description<span class="token operator">=</span><span class="token string">'Convert binary PLY to ASCII PLY.'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'input_file'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'Path to the input binary PLY file'</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">'output_file'</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'Path to the output ASCII PLY file'</span><span class="token punctuation">)</span>    args <span class="token operator">=</span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">)</span>    convert_ply<span class="token punctuation">(</span>args<span class="token punctuation">.</span>input_file<span class="token punctuation">,</span> args<span class="token punctuation">.</span>output_file<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> 3D Gaussian Splatting </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Compact 3DGSä»£ç é˜…è¯»</title>
      <link href="2024/05/25/code-reading-compact-3dgs/"/>
      <url>2024/05/25/code-reading-compact-3dgs/</url>
      
        <content type="html"><![CDATA[<h1 id="Compact-3DGSä»£ç é˜…è¯»"><a href="#Compact-3DGSä»£ç é˜…è¯»" class="headerlink" title="Compact 3DGSä»£ç é˜…è¯»"></a>Compact 3DGSä»£ç é˜…è¯»</h1><h2 id="Gaussian-Volume-Mask"><a href="#Gaussian-Volume-Mask" class="headerlink" title="Gaussian Volume Mask"></a>Gaussian Volume Mask</h2><blockquote><p>learn-able maskï¼Œç”¨å¯ä»¥å­¦ä¹ çš„æ©è†œå»maskæ‰å†—ä½™çš„éƒ¨åˆ†é«˜æ–¯å‡½æ•°</p></blockquote><h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p><code>gaussian_model.py</code>ä¸­<code>def __init__()</code>å®šä¹‰äº†learn-able mask</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> model<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># ä¸åŸå§‹3dgsç›¸æ¯”ï¼Œä¸‹é¢ä¸¤ä¸ªå‚æ•°ä¸è§äº†</span>    <span class="token comment"># self._features_dc</span>    <span class="token comment"># self._features_rest</span>    <span class="token comment"># çœç•¥......</span>    self<span class="token punctuation">.</span>_mask <span class="token operator">=</span> torch<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment"># learn-able mask</span>    <span class="token comment"># çœç•¥......</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><p>``gaussian_model.py<code>ä¸­</code>def create_from_pcd()`åˆå§‹åŒ–äº†learn-able mask</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">create_from_pcd</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> pcd<span class="token punctuation">:</span> BasicPointCloud<span class="token punctuation">,</span> spatial_lr_scale<span class="token punctuation">:</span> <span class="token builtin">float</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># çœç•¥......</span>    <span class="token comment"># è¿™é‡Œçš„maskå¯¹åº”äº†è®ºæ–‡ä¸­çš„Gaussian Volume Maskï¼Œå³learn-able maskï¼Œç”¨å¯ä»¥å­¦ä¹ çš„æ©è†œå»maskæ‰å†—ä½™çš„éƒ¨åˆ†é«˜æ–¯å‡½æ•°</span>    self<span class="token punctuation">.</span>_mask <span class="token operator">=</span> nn<span class="token punctuation">.</span>Parameter<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">(</span>fused_point_cloud<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> device<span class="token operator">=</span><span class="token string">"cuda"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>requires_grad_<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># çœç•¥......</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚è®ºæ–‡3.1èŠ‚æœ€åè®²çš„ä¸€æ ·â€œOnce training is completed, the mask parameter m does not need to be stored since we re moved the masked Gaussians.â€``gaussian_model.py<code>ä¸­å¹¶æ²¡æœ‰ä¿å­˜è¿™ä¸ªmaskï¼Œå› æ­¤åœ¨</code>def load_model()`å‡½æ•°ä¸­ä¹Ÿæ²¡æœ‰åŠ è½½maskçš„è¿‡ç¨‹ã€‚</p><h3 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h3><p>``gaussian_model.py`ä¸­é€šè¿‡Adamä¼˜åŒ–å™¨ä¼˜åŒ–learn-able mask</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">l <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span><span class="token string">'params'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>self<span class="token punctuation">.</span>_xyz<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'lr'</span><span class="token punctuation">:</span> training_args<span class="token punctuation">.</span>position_lr_init <span class="token operator">*</span> self<span class="token punctuation">.</span>spatial_lr_scale<span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"xyz"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token string">'params'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>self<span class="token punctuation">.</span>_opacity<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'lr'</span><span class="token punctuation">:</span> training_args<span class="token punctuation">.</span>opacity_lr<span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"opacity"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token string">'params'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>self<span class="token punctuation">.</span>_scaling<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'lr'</span><span class="token punctuation">:</span> training_args<span class="token punctuation">.</span>scaling_lr<span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"scaling"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token string">'params'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>self<span class="token punctuation">.</span>_rotation<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'lr'</span><span class="token punctuation">:</span> training_args<span class="token punctuation">.</span>rotation_lr<span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"rotation"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token string">'params'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>self<span class="token punctuation">.</span>_mask<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'lr'</span><span class="token punctuation">:</span> training_args<span class="token punctuation">.</span>mask_lr<span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"mask"</span><span class="token punctuation">}</span><span class="token punctuation">]</span>self<span class="token punctuation">.</span>optimizer <span class="token operator">=</span> torch<span class="token punctuation">.</span>optim<span class="token punctuation">.</span>Adam<span class="token punctuation">(</span>l<span class="token punctuation">,</span> lr<span class="token operator">=</span><span class="token number">0.0</span><span class="token punctuation">,</span> eps<span class="token operator">=</span><span class="token number">1e-15</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è®ºæ–‡ä¸­çš„æŸå¤±å‡½æ•°å¦‚ä¸‹ï¼Œæœ€å°åŒ–è¿™ä¸ªæŸå¤±å‡½æ•°ï¼Œä¼šå°½å¯èƒ½å¤šçš„maskæ‰åœºæ™¯ä¸­çš„é«˜æ–¯ã€‚</p><p><img src="/images/code-reading-Compact-3DGS/image-20240524204127934.png"></p><p>ä½†æ˜¯è¿™ä¸ªæŸå¤±å‡½æ•°ä¸æ˜¯å•ç‹¬ä½¿ç”¨çš„ï¼Œä¸Šé¢å®šä¹‰ä¼˜åŒ–å™¨çš„æ—¶å€™ï¼Œå°±æŠŠmaskå’Œå…¶å®ƒå‚æ•°æ”¾åˆ°ä¸€èµ·äº†ï¼Œè¯´æ˜å®ƒä¼šä½œä¸ºä¸€ä¸ªæ€»çš„lossçš„ä¸€éƒ¨åˆ†ä½¿ç”¨ã€‚è¿™æ ·ï¼Œåœ¨ç»™å®šçš„æƒé‡ï¼Œå’Œå…¶ä»–lossçš„å…±åŒä½œç”¨ä¸‹ï¼Œå®ƒä¼šåƒè®ºæ–‡æçš„é‚£æ ·â€œWe balance the accurate rendering and the number of Gaussians eliminated during training by adding masking lossâ€ã€‚</p><p>åœ¨è®ºæ–‡çš„å…¬å¼ä¸­ï¼Œä¹Ÿä½“ç°äº†è¿™ä¸€ç‚¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><img src="/images/code-reading-Compact-3DGS/image-20240524204355835.png"></p><p>å¯¹åº”åˆ°ä»£ç ä¸­ï¼Œæ˜¯<code>train.py</code>ä¸­<code>def training()</code>å‡½æ•°å¦‚ä¸‹çš„éƒ¨åˆ†ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Loss</span>gt_image <span class="token operator">=</span> viewpoint_cam<span class="token punctuation">.</span>original_image<span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span>Ll1 <span class="token operator">=</span> l1_loss<span class="token punctuation">(</span>image<span class="token punctuation">,</span> gt_image<span class="token punctuation">)</span><span class="token comment"># ä¸3dgsç›¸æ¯”ï¼Œå…¶å®åªå¤šäº†ä¸€ä¸ªmaskç›¸å…³çš„æŸå¤±</span>loss <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1.0</span> <span class="token operator">-</span> opt<span class="token punctuation">.</span>lambda_dssim<span class="token punctuation">)</span> <span class="token operator">*</span> Ll1 <span class="token operator">+</span> opt<span class="token punctuation">.</span>lambda_dssim <span class="token operator">*</span> <span class="token punctuation">(</span>        <span class="token number">1.0</span> <span class="token operator">-</span> ssim<span class="token punctuation">(</span>image<span class="token punctuation">,</span> gt_image<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> opt<span class="token punctuation">.</span>lambda_mask <span class="token operator">*</span> torch<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">(</span>torch<span class="token punctuation">.</span>sigmoid<span class="token punctuation">(</span>gaussians<span class="token punctuation">.</span>_mask<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>loss<span class="token punctuation">.</span>backward<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è¿‡æ»¤å†—ä½™é«˜æ–¯"><a href="#è¿‡æ»¤å†—ä½™é«˜æ–¯" class="headerlink" title="è¿‡æ»¤å†—ä½™é«˜æ–¯"></a>è¿‡æ»¤å†—ä½™é«˜æ–¯</h3><p>åœ¨è®ºæ–‡ä¸­ï¼Œlearn-able maskçš„å…¬å¼å¦‚ä¸‹æ‰€ç¤ºã€‚è®ºæ–‡å†™çš„æ¯”è¾ƒä¸¥è°¨ï¼ŒæŠŠstop gradçš„æ“ä½œä¹Ÿæ”¾åˆ°å…¬å¼é‡Œäº†ï¼Œçœ‹ç€ä¼¼ä¹å¾ˆå¤æ‚ã€‚</p><p>å®é™…ä¸Šï¼Œå…¬å¼ï¼ˆ1ï¼‰çš„æ„æ€å°±æ˜¯å¦‚æœ$\sigma(m_n)&gt;\epsilon$ï¼Œå¯¹åº”çš„$M_n=1$ï¼Œå¦åˆ™å¯¹åº”çš„$M_n=0$ã€‚</p><p><img src="/images/code-reading-Compact-3DGS/image-20240524205034954.png"></p><p>å®é™…å®ç°ä¸­æœ‰å¤šå¤„ç”¨åˆ°äº†learn-able maskï¼Œè¿™äº›ç”¨æ³•éƒ½åŒ…å«åœ¨<code>gaussian_model.py</code>ä¸­ã€‚æ ¸å¿ƒå…¶å®å°±æ˜¯ä¸€è¡Œä»£ç ï¼š<code>torch.sigmoid(self._mask) &lt;= 0.01</code>ã€‚</p><p><strong>ç¬¬ä¸€å¤„ï¼š</strong>å¯¹3Dé«˜æ–¯æ¨¡å‹è¿›è¡Œè‡´å¯†åŒ–æˆ–è€…å‰ªææ“ä½œæ—¶ä½¿ç”¨ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å¯¹3Dé«˜æ–¯åˆ†å¸ƒè¿›è¡Œå¯†é›†åŒ–å’Œä¿®å‰ªçš„æ“ä½œ</span><span class="token keyword">def</span> <span class="token function">densify_and_prune</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> max_grad<span class="token punctuation">,</span> min_opacity<span class="token punctuation">,</span> extent<span class="token punctuation">,</span> max_screen_size<span class="token punctuation">)</span><span class="token punctuation">:</span>    grads <span class="token operator">=</span> self<span class="token punctuation">.</span>xyz_gradient_accum <span class="token operator">/</span> self<span class="token punctuation">.</span>denom    grads<span class="token punctuation">[</span>grads<span class="token punctuation">.</span>isnan<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0.0</span>    self<span class="token punctuation">.</span>densify_and_clone<span class="token punctuation">(</span>grads<span class="token punctuation">,</span> max_grad<span class="token punctuation">,</span> extent<span class="token punctuation">)</span>    self<span class="token punctuation">.</span>densify_and_split<span class="token punctuation">(</span>grads<span class="token punctuation">,</span> max_grad<span class="token punctuation">,</span> extent<span class="token punctuation">)</span>    <span class="token comment"># ä¸3dgsç›¸æ¯”ï¼Œè¿™é‡Œè€ƒè™‘äº†self._mask</span>    <span class="token comment"># å¯¹äºæ¯ä¸ª3dgsï¼Œå¦‚æœå¯¹åº”çš„sigmoid(mask)&lt;=0.01 æˆ– opacity&lt;min_opacityå°±ä¼šè¢«å‰ªæ</span>    <span class="token comment"># è¿™éƒ¨åˆ†æ˜¯åœ¨no_gradä¸‹è¿›è¡Œçš„ï¼Œå¯¹åº”äº†è®ºæ–‡ä¸­çš„å…¬å¼1</span>    prune_mask <span class="token operator">=</span> torch<span class="token punctuation">.</span>logical_or<span class="token punctuation">(</span><span class="token punctuation">(</span>torch<span class="token punctuation">.</span>sigmoid<span class="token punctuation">(</span>self<span class="token punctuation">.</span>_mask<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0.01</span><span class="token punctuation">)</span><span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                  <span class="token punctuation">(</span>self<span class="token punctuation">.</span>get_opacity <span class="token operator">&lt;</span> min_opacity<span class="token punctuation">)</span><span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> max_screen_size<span class="token punctuation">:</span>        big_points_vs <span class="token operator">=</span> self<span class="token punctuation">.</span>max_radii2D <span class="token operator">&gt;</span> max_screen_size        big_points_ws <span class="token operator">=</span> self<span class="token punctuation">.</span>get_scaling<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>values <span class="token operator">&gt;</span> <span class="token number">0.1</span> <span class="token operator">*</span> extent        prune_mask <span class="token operator">=</span> torch<span class="token punctuation">.</span>logical_or<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>logical_or<span class="token punctuation">(</span>prune_mask<span class="token punctuation">,</span> big_points_vs<span class="token punctuation">)</span><span class="token punctuation">,</span> big_points_ws<span class="token punctuation">)</span>    self<span class="token punctuation">.</span>prune_points<span class="token punctuation">(</span>prune_mask<span class="token punctuation">)</span>    torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>empty_cache<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹åº”<code>train.py</code>ä¸‹é¢çš„å†…å®¹ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Densification</span><span class="token keyword">if</span> iteration <span class="token operator">&lt;</span> opt<span class="token punctuation">.</span>densify_until_iter<span class="token punctuation">:</span>    <span class="token comment"># Keep track of max radii in image-space for pruning</span>    gaussians<span class="token punctuation">.</span>max_radii2D<span class="token punctuation">[</span>visibility_filter<span class="token punctuation">]</span> <span class="token operator">=</span> torch<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>gaussians<span class="token punctuation">.</span>max_radii2D<span class="token punctuation">[</span>visibility_filter<span class="token punctuation">]</span><span class="token punctuation">,</span>                                                         radii<span class="token punctuation">[</span>visibility_filter<span class="token punctuation">]</span><span class="token punctuation">)</span>    gaussians<span class="token punctuation">.</span>add_densification_stats<span class="token punctuation">(</span>viewspace_point_tensor<span class="token punctuation">,</span> visibility_filter<span class="token punctuation">)</span>    <span class="token keyword">if</span> iteration <span class="token operator">&gt;</span> opt<span class="token punctuation">.</span>densify_from_iter <span class="token keyword">and</span> iteration <span class="token operator">%</span> opt<span class="token punctuation">.</span>densification_interval <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>        size_threshold <span class="token operator">=</span> <span class="token number">20</span> <span class="token keyword">if</span> iteration <span class="token operator">&gt;</span> opt<span class="token punctuation">.</span>opacity_reset_interval <span class="token keyword">else</span> <span class="token boolean">None</span>        <span class="token comment"># ============= åœ¨è¿™é‡Œè°ƒç”¨ =============</span>        gaussians<span class="token punctuation">.</span>densify_and_prune<span class="token punctuation">(</span>opt<span class="token punctuation">.</span>densify_grad_threshold<span class="token punctuation">,</span> <span class="token number">0.005</span><span class="token punctuation">,</span> scene<span class="token punctuation">.</span>cameras_extent<span class="token punctuation">,</span> size_threshold<span class="token punctuation">)</span>    <span class="token keyword">if</span> iteration <span class="token operator">%</span> opt<span class="token punctuation">.</span>opacity_reset_interval <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">or</span> <span class="token punctuation">(</span>            dataset<span class="token punctuation">.</span>white_background <span class="token keyword">and</span> iteration <span class="token operator">==</span> opt<span class="token punctuation">.</span>densify_from_iter<span class="token punctuation">)</span><span class="token punctuation">:</span>        gaussians<span class="token punctuation">.</span>reset_opacity<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># æ–°å¢å†…å®¹ï¼Œé—´éš”ä¸€å®šæ¬¡æ•°é€šè¿‡å¯å­¦ä¹ çš„maskç­›é€‰ä¸€éé«˜æ–¯</span>    <span class="token keyword">if</span> iteration <span class="token operator">%</span> opt<span class="token punctuation">.</span>mask_prune_iter <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>        gaussians<span class="token punctuation">.</span>mask_prune<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç¬¬äºŒå¤„ï¼š</strong>å¦‚æœä¸è¿›è¡Œè‡´å¯†åŒ–æˆ–å‰ªæï¼Œä½†è¿­ä»£äº†ä¸€å®šæ¬¡æ•°ä¹‹åï¼Œä¼šæ‰§è¡Œ<code>def mask_prune()</code>è¿‡æ»¤æ‰å†—ä½™é«˜æ–¯ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">mask_prune</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># è¿™éƒ¨åˆ†æ˜¯åœ¨no_gradä¸‹è¿›è¡Œçš„ï¼Œå¯¹åº”äº†è®ºæ–‡ä¸­çš„å…¬å¼1</span>    prune_mask <span class="token operator">=</span> <span class="token punctuation">(</span>torch<span class="token punctuation">.</span>sigmoid<span class="token punctuation">(</span>self<span class="token punctuation">.</span>_mask<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0.01</span><span class="token punctuation">)</span><span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token punctuation">)</span>    self<span class="token punctuation">.</span>prune_points<span class="token punctuation">(</span>prune_mask<span class="token punctuation">)</span>    torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>empty_cache<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹åº”<code>train.py</code>ä¸‹é¢çš„å†…å®¹ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># Densification</span><span class="token keyword">if</span> iteration <span class="token operator">&lt;</span> opt<span class="token punctuation">.</span>densify_until_iter<span class="token punctuation">:</span>    <span class="token comment"># Keep track of max radii in image-space for pruning</span>    gaussians<span class="token punctuation">.</span>max_radii2D<span class="token punctuation">[</span>visibility_filter<span class="token punctuation">]</span> <span class="token operator">=</span> torch<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>gaussians<span class="token punctuation">.</span>max_radii2D<span class="token punctuation">[</span>visibility_filter<span class="token punctuation">]</span><span class="token punctuation">,</span>                                                         radii<span class="token punctuation">[</span>visibility_filter<span class="token punctuation">]</span><span class="token punctuation">)</span>    gaussians<span class="token punctuation">.</span>add_densification_stats<span class="token punctuation">(</span>viewspace_point_tensor<span class="token punctuation">,</span> visibility_filter<span class="token punctuation">)</span>    <span class="token keyword">if</span> iteration <span class="token operator">&gt;</span> opt<span class="token punctuation">.</span>densify_from_iter <span class="token keyword">and</span> iteration <span class="token operator">%</span> opt<span class="token punctuation">.</span>densification_interval <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>        size_threshold <span class="token operator">=</span> <span class="token number">20</span> <span class="token keyword">if</span> iteration <span class="token operator">&gt;</span> opt<span class="token punctuation">.</span>opacity_reset_interval <span class="token keyword">else</span> <span class="token boolean">None</span>        gaussians<span class="token punctuation">.</span>densify_and_prune<span class="token punctuation">(</span>opt<span class="token punctuation">.</span>densify_grad_threshold<span class="token punctuation">,</span> <span class="token number">0.005</span><span class="token punctuation">,</span> scene<span class="token punctuation">.</span>cameras_extent<span class="token punctuation">,</span> size_threshold<span class="token punctuation">)</span>    <span class="token keyword">if</span> iteration <span class="token operator">%</span> opt<span class="token punctuation">.</span>opacity_reset_interval <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">or</span> <span class="token punctuation">(</span>            dataset<span class="token punctuation">.</span>white_background <span class="token keyword">and</span> iteration <span class="token operator">==</span> opt<span class="token punctuation">.</span>densify_from_iter<span class="token punctuation">)</span><span class="token punctuation">:</span>        gaussians<span class="token punctuation">.</span>reset_opacity<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># æ–°å¢å†…å®¹ï¼Œé—´éš”ä¸€å®šæ¬¡æ•°é€šè¿‡å¯å­¦ä¹ çš„maskç­›é€‰ä¸€éé«˜æ–¯</span>    <span class="token keyword">if</span> iteration <span class="token operator">%</span> opt<span class="token punctuation">.</span>mask_prune_iter <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>        <span class="token comment"># ============= åœ¨è¿™é‡Œè°ƒç”¨ =============</span>        gaussians<span class="token punctuation">.</span>mask_prune<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç¬¬ä¸‰å¤„ï¼š</strong>æœ€ç»ˆè®­ç»ƒç»“æŸï¼Œå‡†å¤‡å¯¼å‡º3Dé«˜æ–¯æ¨¡å‹çš„æ—¶å€™ä½¿ç”¨ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">final_prune</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> compress<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># è¿™éƒ¨åˆ†æ˜¯åœ¨no_gradä¸‹è¿›è¡Œçš„ï¼Œå¯¹åº”äº†è®ºæ–‡ä¸­çš„å…¬å¼1</span>    prune_mask <span class="token operator">=</span> <span class="token punctuation">(</span>torch<span class="token punctuation">.</span>sigmoid<span class="token punctuation">(</span>self<span class="token punctuation">.</span>_mask<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0.01</span><span class="token punctuation">)</span><span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token punctuation">)</span>    self<span class="token punctuation">.</span>prune_points<span class="token punctuation">(</span>prune_mask<span class="token punctuation">)</span>    <span class="token comment"># çœç•¥ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹åº”<code>train.py</code>ä¸‹é¢çš„å†…å®¹ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">if</span> iteration <span class="token operator">==</span> opt<span class="token punctuation">.</span>iterations<span class="token punctuation">:</span>    <span class="token comment"># å®Œæˆè¿­ä»£ä¹‹åä¿å­˜ç»“æœï¼Œä¿å­˜çš„ç»“æœè¦è¿›è¡Œä¸€æ¬¡æœ€ç»ˆçš„å‰ªæ</span>    storage <span class="token operator">=</span> gaussians<span class="token punctuation">.</span>final_prune<span class="token punctuation">(</span>compress<span class="token operator">=</span>comp<span class="token punctuation">)</span>    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>args<span class="token punctuation">.</span>model_path<span class="token punctuation">,</span> <span class="token string">"storage"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> c<span class="token punctuation">:</span>        c<span class="token punctuation">.</span>write<span class="token punctuation">(</span>storage<span class="token punctuation">)</span>    <span class="token comment"># TODO è¿™é‡Œåœ¨åšä»€ä¹ˆï¼Ÿ</span>    gaussians<span class="token punctuation">.</span>precompute<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Geometry-Codebook"><a href="#Geometry-Codebook" class="headerlink" title="Geometry Codebook"></a>Geometry Codebook</h2><blockquote><p>åº”ç”¨äº†R-VQæ¥å½’å¹¶é‚£äº›å½¢çŠ¶ã€æ—‹è½¬å¾ˆç›¸ä¼¼çš„é«˜æ–¯</p></blockquote><h3 id="å®šä¹‰-amp-åˆå§‹åŒ–"><a href="#å®šä¹‰-amp-åˆå§‹åŒ–" class="headerlink" title="å®šä¹‰&amp;åˆå§‹åŒ–"></a>å®šä¹‰&amp;åˆå§‹åŒ–</h3><p><code>gaussian_model.py</code>ä¸­<code>def __init__()</code>å®šä¹‰äº†R-VQ</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ====================== æ–°å¢å†…å®¹ ======================</span><span class="token comment"># å¯¹åº”è®ºæ–‡ä¸­çš„Geometry Codebook</span><span class="token comment"># åº”ç”¨R-VQæ¥å½’å¹¶é‚£äº›å°ºåº¦scaleã€æ—‹è½¬rotå¾ˆç›¸ä¼¼çš„é«˜æ–¯ï¼Œä¸‹é¢è¿™ä¸ªRVQç”šè‡³è¿˜æ˜¯ç°æˆçš„</span><span class="token comment"># åªçœ‹è¿™ä¸ªæ–‡ä»¶ï¼ŒRVQä¼¼ä¹åªå¯¹æœ€åå¯¼å‡ºnpzæˆ–plyçš„æ—¶å€™æœ‰ç”¨ï¼Œè¿‡ç¨‹ä¸­ä¼¼ä¹æ²¡æœ‰åŠæ³•é™ä½é«˜æ–¯çš„å†…å­˜å ç”¨ï¼Ÿï¼Ÿï¼Ÿæ¯•ç«Ÿå°ºåº¦å’Œæ—‹è½¬è¿™ä¸¤ä¸ªå‘é‡è¿˜åœ¨è¿™é‡Œæ”¾ç€ï¼Ÿï¼Ÿï¼Ÿ</span><span class="token comment"># TODOï¼šå¯ä»¥ç”¨ç›¸åŒçš„æ•°æ®é›†ï¼Œå¯¹æ¯”ä¸€ä¸‹3dgså’Œcompact 3dgså†…å­˜çš„å ç”¨æƒ…å†µï¼</span><span class="token comment"># åˆå§‹åŒ–ä¸€ä¸ªç”¨äºResidualVQï¼ˆçŸ¢é‡é‡åŒ–ï¼‰å¯¹è±¡ï¼Œå¹¶è®¾ç½®ç‰¹å®šçš„è¶…å‚æ•°ã€‚</span>self<span class="token punctuation">.</span>vq_scale <span class="token operator">=</span> ResidualVQ<span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span>  <span class="token comment"># é‡åŒ–å™¨è¾“å…¥çš„ç»´åº¦</span>                           codebook_size<span class="token operator">=</span>model<span class="token punctuation">.</span>rvq_size<span class="token punctuation">,</span>  <span class="token comment"># codebookçš„å¤§å°ï¼Œä»æ¨¡å‹çš„ rvq_size ä¸­è·å–</span>                           num_quantizers<span class="token operator">=</span>model<span class="token punctuation">.</span>rvq_num<span class="token punctuation">,</span>  <span class="token comment"># é‡åŒ–å™¨çš„æ•°é‡ï¼Œä»æ¨¡å‹çš„ rvq_num ä¸­è·å–</span>                           commitment_weight<span class="token operator">=</span><span class="token number">0.</span><span class="token punctuation">,</span>  <span class="token comment"># æ‰¿è¯ºæŸå¤±çš„æƒé‡</span>                           kmeans_init<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>  <span class="token comment"># å¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæ˜¯å¦ä½¿ç”¨ k-means åˆå§‹åŒ–</span>                           kmeans_iters<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>  <span class="token comment"># åˆå§‹åŒ–çš„è¿­ä»£æ¬¡æ•°</span>                           ema_update<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>  <span class="token comment"># æ˜¯å¦ä½¿ç”¨æŒ‡æ•°ç§»åŠ¨å¹³å‡æ›´æ–°</span>                           learnable_codebook<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>  <span class="token comment"># å¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºcoodbookæ˜¯å¦å¯å­¦ä¹ </span>                           in_place_codebook_optimizer<span class="token operator">=</span><span class="token keyword">lambda</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">:</span>  <span class="token comment"># åˆ›å»ºå­¦ä¹ ç‡ä¸º 0.0001 çš„ Adam ä¼˜åŒ–å™¨</span>                           torch<span class="token punctuation">.</span>optim<span class="token punctuation">.</span>Adam<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">,</span> lr<span class="token operator">=</span><span class="token number">0.0001</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># ç§»åŠ¨åˆ° GPU ä¸Š</span>self<span class="token punctuation">.</span>vq_rot <span class="token operator">=</span> ResidualVQ<span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span>                         codebook_size<span class="token operator">=</span>model<span class="token punctuation">.</span>rvq_size<span class="token punctuation">,</span>                         num_quantizers<span class="token operator">=</span>model<span class="token punctuation">.</span>rvq_num<span class="token punctuation">,</span>                         commitment_weight<span class="token operator">=</span><span class="token number">0.</span><span class="token punctuation">,</span>                         kmeans_init<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>                         kmeans_iters<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>                         ema_update<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>                         learnable_codebook<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>                         in_place_codebook_optimizer<span class="token operator">=</span><span class="token keyword">lambda</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">:</span>                         torch<span class="token punctuation">.</span>optim<span class="token punctuation">.</span>Adam<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">,</span> lr<span class="token operator">=</span><span class="token number">0.0001</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># é€šè¿‡å–codebookå¤§å°çš„ä»¥2ä¸ºåº•çš„å¯¹æ•°ï¼Œè®¡ç®—è¡¨ç¤ºç ä¹¦ç´¢å¼•æ‰€éœ€çš„æ¯”ç‰¹æ•°ã€‚è¿™ä¸ªå‚æ•°åªç”¨åœ¨è®¡ç®—å†…å­˜å¤§å°ä¸Šäº†ã€‚</span>self<span class="token punctuation">.</span>rvq_bit <span class="token operator">=</span> math<span class="token punctuation">.</span>log2<span class="token punctuation">(</span>model<span class="token punctuation">.</span>rvq_size<span class="token punctuation">)</span><span class="token comment"># å­˜å‚¨æ¨¡å‹ä¸­çš„é‡åŒ–å™¨æ•°é‡ï¼Œä»¥å¤‡åç”¨ã€‚è¿™ä¸ªå‚æ•°ä¹Ÿæ˜¯åªç”¨åœ¨è®¡ç®—å†…å­˜å¤§å°ä¸Šäº†ã€‚</span>self<span class="token punctuation">.</span>rvq_num <span class="token operator">=</span> model<span class="token punctuation">.</span>rvq_num<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å…³äºResidualVQ"><a href="#å…³äºResidualVQ" class="headerlink" title="å…³äºResidualVQ"></a>å…³äºResidualVQ</h3><p>è¿™éƒ¨åˆ†å®ç°å¯¹åº”çš„ä»“åº“ä¸ºï¼š<a href="https://github.com/lucidrains/vector-quantize-pytorch">https://github.com/lucidrains/vector-quantize-pytorch</a></p><p>æ›´è¯¦ç»†çš„ç”¨æ³•ä¹Ÿå¯ä»¥å‚è€ƒè¿™ä¸ªä»“åº“ã€‚</p><p><img src="/images/code-reading-Compact-3DGS/vq.png"></p><h3 id="ä¼˜åŒ–æ›´æ–°ï¼Ÿ"><a href="#ä¼˜åŒ–æ›´æ–°ï¼Ÿ" class="headerlink" title="ä¼˜åŒ–æ›´æ–°ï¼Ÿ"></a>ä¼˜åŒ–æ›´æ–°ï¼Ÿ</h3><p>å¾ˆå¥‡æ€ªï¼Œæˆ‘æŸ¥æ‰¾äº†æ–‡ä»¶ï¼Œä½†æ˜¯æ²¡æœ‰æ‰¾åˆ°æ›´æ–°çš„åœ°æ–¹ã€‚å¯èƒ½è¿˜å¾—å»ä¸Šé¢çš„ä»“åº“é‡Œé¢å­¦ä¹ ä¸€ä¸‹ã€‚ã€‚ã€‚</p><p><img src="/images/code-reading-Compact-3DGS/image-20240524215047795.png"></p><p>æˆ‘çŒœæµ‹ï¼Œæ¯æ¬¡ä½¿ç”¨RVQï¼Œå®ƒå°±ä¼šè¿­ä»£æ›´æ–°ä¸€æ¬¡ï¼Œæ¯•ç«Ÿåˆå§‹åŒ–çš„æ—¶å€™å°±ç»™å®šäº†ä¼˜åŒ–å™¨ã€‚è€Œä¸”çœ‹èµ·æ¥ï¼Œæ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™æ‰æœ‰å¯èƒ½ä¼šè¿›è¡Œä¸€æ¬¡æ›´æ–°ã€‚</p><p>è¿™æ ·çš„è¯ï¼Œæˆ‘è¿˜æ˜¯æ„Ÿè§‰RVQçš„ä½œç”¨åªæ˜¯ä¿å­˜ç»“æœçš„æ—¶å€™ï¼Œè®©å­˜å‚¨ç©ºé—´çš„å ç”¨æ›´å°ï¼Œè®­ç»ƒè¿‡ç¨‹ä¸­æ²¡åŠæ³•è®©æ˜¾å­˜å ç”¨å˜å°ï¼Ÿï¼Ÿï¼Ÿ</p><h3 id="å½’å¹¶å½¢çŠ¶ã€æ—‹è½¬ç›¸ä¼¼çš„é«˜æ–¯ï¼Ÿ"><a href="#å½’å¹¶å½¢çŠ¶ã€æ—‹è½¬ç›¸ä¼¼çš„é«˜æ–¯ï¼Ÿ" class="headerlink" title="å½’å¹¶å½¢çŠ¶ã€æ—‹è½¬ç›¸ä¼¼çš„é«˜æ–¯ï¼Ÿ"></a>å½’å¹¶å½¢çŠ¶ã€æ—‹è½¬ç›¸ä¼¼çš„é«˜æ–¯ï¼Ÿ</h3><p>ä¼¼ä¹åªæœ‰æ¸²æŸ“ã€æœ€ç»ˆä¿å­˜çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œã€‚</p><h2 id="Compact-View-dependent-Color"><a href="#Compact-View-dependent-Color" class="headerlink" title="Compact View-dependent Color"></a>Compact View-dependent Color</h2><blockquote><p>ä¸ä½¿ç”¨3DGSçš„çƒè°å»è¡¨ç¤ºè§†å›¾ç›¸å…³çš„é¢œè‰²äº†ï¼Œè€Œæ˜¯ç”¨äº†ç±»ä¼¼instant-ngpçš„æ–¹æ³•å»è¡¨ç¤ºè§†å›¾ç›¸å…³çš„é¢œè‰²</p></blockquote><p>ç•¥ï¼Œæš‚æ—¶æ²¡å»çœ‹~</p>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> 3D Gaussian Splatting </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ã€ŠCompact 3D Gaussian Representation for Radiance Fieldã€‹</title>
      <link href="2024/05/21/paper-reading-compact-3dgs/"/>
      <url>2024/05/21/paper-reading-compact-3dgs/</url>
      
        <content type="html"><![CDATA[<h1 id="è®ºæ–‡é˜…è¯»ã€ŠCompact-3D-Gaussian-Representation-for-Radiance-Fieldã€‹"><a href="#è®ºæ–‡é˜…è¯»ã€ŠCompact-3D-Gaussian-Representation-for-Radiance-Fieldã€‹" class="headerlink" title="è®ºæ–‡é˜…è¯»ã€ŠCompact 3D Gaussian Representation for Radiance Fieldã€‹"></a>è®ºæ–‡é˜…è¯»ã€ŠCompact 3D Gaussian Representation for Radiance Fieldã€‹</h1><p>é—®é¢˜ï¼š3DGSéœ€è¦å¤§é‡çš„3Dé«˜æ–¯æ¥ä¿æŒæ¸²æŸ“å›¾åƒçš„é«˜ä¿çœŸåº¦ï¼Œè¿™éœ€è¦å¤§é‡çš„å†…å­˜å’Œå­˜å‚¨ç©ºé—´ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>ä¸ºäº†è§£å†³3DGSä¸­å…³é”®çš„å¤§å†…å­˜å’Œå­˜å‚¨é—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªç´§å‡‘çš„3Dé«˜æ–¯è¡¨ç¤ºæ¡†æ¶ã€‚è¯¥æ–¹æ³•æ˜¾è‘—æé«˜äº†å†…å­˜å’Œå­˜å‚¨æ•ˆç‡ï¼ŒåŒæ—¶å…·æœ‰é«˜è´¨é‡çš„é‡æ„ã€å¿«é€Ÿçš„è®­ç»ƒé€Ÿåº¦å’Œå®æ—¶çš„æ¸²æŸ“æ•ˆæœï¼Œå¦‚å›¾1æ‰€ç¤ºã€‚æˆ‘ä»¬ç‰¹åˆ«å¼ºè°ƒä¸¤ä¸ªå…³é”®ç›®æ ‡ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯åœ¨ä¸ç‰ºç‰²æ€§èƒ½çš„æƒ…å†µä¸‹å‡å°‘åœºæ™¯è¡¨ç¤ºæ‰€éœ€çš„é«˜æ–¯ç‚¹æ•°é‡ã€‚é«˜æ–¯å‡½æ•°çš„æ•°é‡éšç€ç”±å…‹éš†å’Œåˆ†è£‚é«˜æ–¯å‡½æ•°ç»„æˆçš„è§„åˆ™è‡´å¯†åŒ–è¿‡ç¨‹çš„å¢åŠ è€Œå¢åŠ ï¼Œå®ƒæ˜¯è¡¨ç¤ºåœºæ™¯ç²¾ç»†ç»†èŠ‚çš„å…³é”®ç»„æˆéƒ¨åˆ†ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼Œç›®å‰çš„è‡´å¯†åŒ–ç®—æ³•äº§ç”Ÿäº†è®¸å¤šå†—ä½™å’Œä¸å¿…è¦çš„é«˜æ–¯åˆ†å¸ƒï¼Œå¯¼è‡´å†…å­˜å’Œå­˜å‚¨éœ€æ±‚é«˜ã€‚<strong>æˆ‘ä»¬å¼•å…¥äº†ä¸€ç§æ–°çš„åŸºäºä½“ç§¯çš„æ©è”½ç­–ç•¥ï¼Œè¯¥ç­–ç•¥å¯ä»¥è¯†åˆ«å’Œå»é™¤å¯¹æ•´ä½“æ€§èƒ½å½±å“æœ€å°çš„éå¿…è¦é«˜æ–¯å€¼ã€‚</strong>åˆ©ç”¨æ‰€æå‡ºçš„æ©è”½æ–¹æ³•ï¼Œæˆ‘ä»¬å­¦ä¼šäº†åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å‡å°‘é«˜æ–¯æ•°çš„åŒæ—¶è·å¾—é«˜æ€§èƒ½ã€‚é™¤äº†æœ‰æ•ˆçš„å†…å­˜å’Œå­˜å‚¨ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°æ›´å¿«çš„æ¸²æŸ“é€Ÿåº¦ï¼Œå› ä¸ºè®¡ç®—å¤æ‚åº¦ä¸é«˜æ–¯æ•°æˆçº¿æ€§æ¯”ä¾‹ã€‚</li><li>å…¶æ¬¡ï¼Œ<strong>æˆ‘ä»¬æå‡ºå‹ç¼©é«˜æ–¯å±æ€§ï¼Œå¦‚è§†å›¾ç›¸å…³çš„é¢œè‰²å’Œåæ–¹å·®ã€‚</strong>åœ¨åŸå§‹çš„3DGSä¸­ï¼Œæ¯ä¸ªé«˜æ–¯å‡½æ•°éƒ½æœ‰è‡ªå·±çš„å±æ€§ï¼Œå¹¶ä¸”æ²¡æœ‰åˆ©ç”¨ç©ºé—´å†—ä½™ï¼Œè¿™åœ¨å„ç§ç±»å‹çš„ä¿¡å·å‹ç¼©ä¸­å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ã€‚ä¾‹å¦‚ï¼Œç›¸é‚»çš„é«˜æ–¯å‡½æ•°å¯èƒ½å…·æœ‰ç›¸ä¼¼çš„é¢œè‰²å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥é‡ç”¨ç›¸é‚»é«˜æ–¯å‡½æ•°çš„ç›¸ä¼¼é¢œè‰²ã€‚è€ƒè™‘åˆ°è¿™ä¸ªåŠ¨æœºï¼Œæˆ‘ä»¬ç»“åˆäº†ä¸€ä¸ªåŸºäºç½‘æ ¼çš„ç¥ç»åœºæ¥æœ‰æ•ˆåœ°è¡¨ç¤ºä¸è§†å›¾ç›¸å…³çš„é¢œè‰²ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ¯ä¸ªé«˜æ–¯é¢œè‰²å±æ€§ã€‚å½“æä¾›æŸ¥è¯¢é«˜æ–¯ç‚¹æ—¶ï¼Œæˆ‘ä»¬ä»ç´§å‡‘çš„ç½‘æ ¼è¡¨ç¤ºä¸­æå–é¢œè‰²å±æ€§ï¼Œé¿å…äº†ä¸ºæ¯ä¸ªé«˜æ–¯å•ç‹¬å­˜å‚¨é¢œè‰²å±æ€§çš„éœ€è¦ã€‚å¯¹äºæˆ‘ä»¬æœ€åˆçš„æ–¹æ³•ï¼Œç”±äºå…¶ç´§å‡‘æ€§å’Œå¿«é€Ÿçš„å¤„ç†é€Ÿåº¦ï¼Œæˆ‘ä»¬ä»å‡ ä¸ªå€™é€‰ä¸­é€‰æ‹©äº†åŸºäºå“ˆå¸Œçš„ç½‘æ ¼è¡¨ç¤º(Instant NGP[30])ã€‚è¿™ç§é€‰æ‹©å¤§å¤§é™ä½äº†3DGSçš„ç©ºé—´å¤æ‚æ€§ã€‚</li><li>ä¸é¢œè‰²å±æ€§ç›¸åï¼Œå¤§å¤šæ•°é«˜æ–¯å‡½æ•°å…·æœ‰ç›¸ä¼¼çš„å‡ ä½•å½¢çŠ¶ï¼Œåœ¨å°ºåº¦å’Œæ—‹è½¬å±æ€§ä¸Šå…·æœ‰æœ‰é™çš„å˜åŒ–ã€‚3DGSä»£è¡¨äº†ä¸€ä¸ªç”±æ— æ•°å°é«˜æ–¯å…ƒé›†åˆè€Œæˆçš„åœºæ™¯ï¼Œæ¯ä¸ªé«˜æ–¯åŸè¯­éƒ½ä¸æœŸæœ›è¡¨ç°å‡ºå¾ˆé«˜çš„å¤šæ ·æ€§ã€‚<strong>å› æ­¤ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸€ç§åŸºäºç æœ¬çš„æ–¹æ³•æ¥å»ºæ¨¡é«˜æ–¯å‡½æ•°çš„å‡ ä½•å½¢çŠ¶ã€‚</strong>å®ƒå­¦ä¹ å¯»æ‰¾åœ¨æ¯ä¸ªåœºæ™¯ä¸­å…±äº«çš„ç›¸ä¼¼æ¨¡å¼æˆ–å‡ ä½•å½¢çŠ¶ï¼Œå¹¶ä¸”åªå­˜å‚¨æ¯ä¸ªé«˜æ–¯çš„ç æœ¬ç´¢å¼•ï¼Œä»è€Œäº§ç”Ÿéå¸¸ç´§å‡‘çš„è¡¨ç¤ºã€‚æ­¤å¤–ï¼Œç”±äºç æœ¬çš„å¤§å°å¯èƒ½éå¸¸å°ï¼Œå› æ­¤è®­ç»ƒæœŸé—´çš„ç©ºé—´å’Œè®¡ç®—å¼€é”€å¹¶ä¸æ˜¾è‘—ã€‚</li></ul><h2 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h2><h3 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h3><p>å»ºç«‹åœ¨3DGSçš„åŸºç¡€ä¸Šï¼ŒEach Gaussian represents 3D position, opacity, geometry (3D scale and 3D rotation represented as a quaternion), and spherical harmonics (SH) for view-dependent color.</p><blockquote><p>çœ‹èµ·æ¥å°±æ˜¯ç»å…¸çš„3DGS</p></blockquote><h3 id="Overall-architecture"><a href="#Overall-architecture" class="headerlink" title="Overall architecture"></a>Overall architecture</h3><p>æˆ‘ä»¬çš„ä¸»è¦ç›®æ ‡æ˜¯1)å‡å°‘é«˜æ–¯å‡½æ•°çš„æ•°é‡ï¼Œ2)åœ¨ä¿æŒåŸå§‹æ€§èƒ½çš„åŒæ—¶ç´§å‡‘åœ°è¡¨ç¤ºå±æ€§ã€‚ä¸ºæ­¤ï¼Œåœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å±è”½æ‰å¯¹æ€§èƒ½å½±å“æœ€å°çš„é«˜æ–¯å‡½æ•°ï¼Œå¹¶é€šè¿‡ç æœ¬è¡¨ç¤ºå‡ ä½•å±æ€§ï¼Œå¦‚å›¾2æ‰€ç¤ºã€‚æˆ‘ä»¬ä½¿ç”¨åŸºäºç½‘æ ¼çš„ç¥ç»åœºæ¥è¡¨ç¤ºé¢œè‰²å±æ€§ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªé«˜æ–¯åˆ†å¸ƒä¸­ç›´æ¥å­˜å‚¨å®ƒä»¬ã€‚å¯¹äºå‡ ä½•å±æ€§ï¼Œå¦‚å°ºåº¦å’Œæ—‹è½¬ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨åŸºäºç æœ¬çš„æ–¹æ³•ï¼Œå¯ä»¥å……åˆ†åˆ©ç”¨è¿™äº›å±æ€§çš„æœ‰é™å˜åŒ–ã€‚æœ€åï¼Œåœ¨éšåçš„æ¸²æŸ“æ­¥éª¤ä¸­ä½¿ç”¨å°‘é‡å…·æœ‰ç´§å‡‘å±æ€§çš„é«˜æ–¯å‡½æ•°ï¼ŒåŒ…æ‹¬æŠ•å½±å’Œæ …æ ¼åŒ–æ¥æ¸²æŸ“å›¾åƒã€‚</p><p><img src="/images/paper-reading-Compact-3DGS/image-20240514154353045.png"></p><h3 id="Gaussian-Volume-Mask"><a href="#Gaussian-Volume-Mask" class="headerlink" title="Gaussian Volume Mask"></a>Gaussian Volume Mask</h3><p>The scale attribute of each Gaussian determines its 3D volume, which is then reflected in the rendering process. <strong>Small-sized Gaussians, due to their minimal volume, have a negligible contribution to the overall rendering quality, often to the point where their effect is essentially imperceptible.</strong> In such cases, it becomes highly beneficial to identify and remove such unessential Gaussians.</p><blockquote><p>è¿™é‡Œè®¤ä¸ºå°å°ºå¯¸çš„é«˜æ–¯ï¼Œå› ä¸ºä½“ç§¯å¾ˆå°ï¼Œå¯¹æ¸²æŸ“çš„è´¡çŒ®å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œå¯ä»¥è¯†åˆ«å’Œå»é™¤ä»–ä»¬ã€‚</p></blockquote><p>è¿™é‡Œå°±æå‡ºäº†ä¸€ä¸ªç”¨æ¥å¤„ç†å°ºåº¦ã€é€æ˜åº¦çš„learn-able maskï¼Œå­¦ä¹ çš„å‘é‡æ˜¯$m_n$ï¼Œæœ€ç»ˆçš„maskæ˜¯$M_n$ï¼Œå¦‚ä¸‹å…¬å¼æ‰€ç¤ºï¼š</p><p><img src="/images/paper-reading-Compact-3DGS/image-20240514160440341.png"></p><p>é€šè¿‡æ·»åŠ æ©è”½æŸå¤±Lmæ¥å¹³è¡¡å‡†ç¡®æ¸²æŸ“å’Œè®­ç»ƒè¿‡ç¨‹ä¸­æ¶ˆé™¤çš„é«˜æ–¯æ•°ï¼š</p><p><img src="/images/paper-reading-Compact-3DGS/image-20240514160648730.png"></p><blockquote><p>ä¸Compact GSSLAMç›¸åŒçš„ç–‘é—®ï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿™ä¸ªæŸå¤±å‡½æ•°ï¼Ÿ</p><p>çœ‹è¿™ä¸ªæŸå¤±å‡½æ•°çš„æ„æ€ï¼Œå®ƒæƒ³è¦maskæ‰æ‰€æœ‰ä¸œè¥¿å•Šï¼Œè¿™æ ·è‚¯å®šæœ‰é—®é¢˜å§ï¼Ÿï¼Ÿï¼Ÿ</p><p>æ„Ÿè§‰ï¼Œè¿™ä¸ªL_mä¸æ˜¯å•ç‹¬ä½¿ç”¨çš„ï¼Œç»™ä¸ªæƒé‡ï¼Œæ”¾åˆ°ä¸€ä¸ªå¤§çš„loss functioné‡Œã€‚</p></blockquote><p>åœ¨æ¯ä¸€æ¬¡è‡´å¯†åŒ–ä¸­ï¼Œæˆ‘ä»¬æ ¹æ®äºŒå€¼æ©æ¨¡æ¶ˆé™¤é«˜æ–¯åˆ†å¸ƒã€‚æ­¤å¤–ï¼Œä¸åŸå§‹3DGSåœ¨è®­ç»ƒä¸­é—´åœæ­¢è‡´å¯†åŒ–å¹¶ä¿ç•™é«˜æ–¯æ•°ç›´è‡³ç»“æŸä¸åŒï¼Œæˆ‘ä»¬åœ¨æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹ä¸­å§‹ç»ˆä¿æŒæ©ç ï¼Œæœ‰æ•ˆåœ°å‡å°‘äº†ä¸å¿…è¦çš„é«˜æ–¯æ•°ï¼Œå¹¶ç¡®ä¿åœ¨æ•´ä¸ªè®­ç»ƒé˜¶æ®µä½¿ç”¨ä½GPUå†…å­˜è¿›è¡Œé«˜æ•ˆè®¡ç®—(å›¾3)ã€‚ä¸€æ—¦è®­ç»ƒå®Œæˆï¼Œç”±äºæˆ‘ä»¬åˆ é™¤äº†æ©ç é«˜æ–¯æ•°ï¼Œå› æ­¤ä¸éœ€è¦å­˜å‚¨æ©ç å‚æ•°mã€‚</p><h3 id="Geometry-Codebook"><a href="#Geometry-Codebook" class="headerlink" title="Geometry Codebook"></a>Geometry Codebook</h3><blockquote><p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p><p>å…³äºVQ</p><ul><li><a href="https://zhuanlan.zhihu.com/p/603387650">https://zhuanlan.zhihu.com/p/603387650</a></li></ul><p>å…³äºVAE</p><ul><li><a href="https://zhuanlan.zhihu.com/p/34998569">https://zhuanlan.zhihu.com/p/34998569</a></li></ul><p>å…³äºVQ-VAE</p><ul><li><a href="https://zhuanlan.zhihu.com/p/388299884">https://zhuanlan.zhihu.com/p/388299884</a></li></ul><p>R-VQ</p><ul><li><a href="https://zhuanlan.zhihu.com/p/688229464">https://zhuanlan.zhihu.com/p/688229464</a></li><li><a href="https://zhuanlan.zhihu.com/p/676754766">https://zhuanlan.zhihu.com/p/676754766</a></li><li><a href="https://www.assemblyai.com/blog/what-is-residual-vector-quantization/">https://www.assemblyai.com/blog/what-is-residual-vector-quantization/</a></li><li><a href="https://drscotthawley.github.io/blog/posts/2023-06-12-RVQ.html">https://drscotthawley.github.io/blog/posts/2023-06-12-RVQ.html</a></li></ul></blockquote><p>è®ºæ–‡è¯´ä»–ä»¬è§‚å¯Ÿåˆ°ï¼Œå¤§å¤šæ•°é«˜æ–¯çš„å‡ ä½•å½¢çŠ¶æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œæ˜¾ç¤ºåªæœ‰å¾®å°çš„å·®å¼‚åœ¨è§„æ¨¡å’Œæ—‹è½¬ç‰¹æ€§ã€‚æ­¤å¤–ï¼Œä¸€ä¸ªåœºæ™¯æ˜¯ç”±è®¸å¤šå°é«˜æ–¯ç»„æˆçš„ï¼Œå¹¶ä¸”æ¯ä¸ªé«˜æ–¯åŸè¯­éƒ½ä¸æœŸæœ›è¡¨ç°å‡ºå¹¿æ³›çš„å¤šæ ·æ€§ã€‚å› æ­¤ä»–ä»¬æƒ³åˆ°äº†ä½¿ç”¨R-VQï¼š</p><p><img src="/images/paper-reading-Compact-3DGS/image-20240514213043223.png"></p><p><img src="/images/paper-reading-Compact-3DGS/image-20240514202806984.png"></p><blockquote><p>æˆ‘æ‰¾åˆ°ä¸€ä¸ªç®—æ³•æ¡†å›¾ï¼Œå†™çš„å¾ˆç®€å•å¾ˆæ¸…æ¥šï¼š</p><p><img src="/images/paper-reading-Compact-3DGS/soundstream_alg1.png"></p></blockquote><p>è¿™ä¸ªcodebookä¹Ÿæ˜¯éœ€è¦è®­ç»ƒçš„ï¼Œå¯¹åº”çš„æŸå¤±å‡½æ•°å¦‚ä¸‹ï¼š</p><p><img src="/images/paper-reading-Compact-3DGS/image-20240514210618885.png"></p><blockquote><p>å¦‚æœè€ƒè™‘è®ºæ–‡é‡Œé¢æåˆ°çš„å…¬å¼4ã€5ï¼Œä¸»è¦æ˜¯å…¬å¼5ï¼Œè¿™ä¸ªæŸå¤±å‡½æ•°è¿˜æŒºå¥½ç†è§£çš„ï¼Œå°±æ˜¯å¸Œæœ›æ¯ä¸€ä¸ªé˜¶æ®µçš„æ®‹å·®å’Œå¯¹åº”çš„codebookçš„æ¬§æ°è·ç¦»æœ€å°ã€‚</p></blockquote><h3 id="Compact-View-dependent-Color"><a href="#Compact-View-dependent-Color" class="headerlink" title="Compact View-dependent Color"></a>Compact View-dependent Color</h3><p>è¿™é‡Œè¯´3DGSçš„æ¯ä¸ªé«˜æ–¯æ€»å…±æœ‰59ä¸ªå‚æ•°ï¼Œå…¶ä¸­48ä¸ªç”¨æ¥è¡¨ç¤ºSHï¼ˆmax 3 degreesï¼‰ã€‚è®ºæ–‡è®¤ä¸ºç”¨åŸºäºç½‘æ ¼çš„ç¥ç»è¾å°„åœºæ–¹æ³•è¡¨ç¤ºæ¯ä¸ªé«˜æ–¯è§†å›¾ç›¸å…³çš„é¢œè‰²ä¼šæ¯”è¾ƒå¥½ï¼š</p><p><img src="/images/paper-reading-Compact-3DGS/image-20240514213832546.png"></p><h3 id="Training"><a href="#Training" class="headerlink" title="Training"></a>Training</h3><p><img src="/images/paper-reading-Compact-3DGS/image-20240514215106098.png"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™ç¯‡æ–‡ç« åº”è¯¥ç®—çœ‹æ‡‚äº†ã€‚ä»–å°±åšäº†ä¸‰ä¸ªä¸œè¥¿ï¼š<br>1ã€ã€Gaussian Volume Maskã€‘ï¼Œå°±æ˜¯learn-able maskï¼Œç”¨å¯ä»¥å­¦ä¹ çš„æ©è†œå»maskæ‰å†—ä½™çš„éƒ¨åˆ†é«˜æ–¯å‡½æ•°<br>2ã€ã€Geometry Codebookã€‘ï¼Œå°±æ˜¯åº”ç”¨äº†R-VQæ¥å½’å¹¶é‚£äº›å½¢çŠ¶ã€æ—‹è½¬å¾ˆç›¸ä¼¼çš„é«˜æ–¯<br>3ã€ã€Compact View-dependent Colorã€‘ï¼Œå°±æ˜¯ä¸ä½¿ç”¨3DGSçš„çƒè°å»è¡¨ç¤ºè§†å›¾ç›¸å…³çš„é¢œè‰²äº†ï¼Œè€Œæ˜¯ç”¨äº†ç±»ä¼¼instant-ngpçš„æ–¹æ³•å»è¡¨ç¤ºè§†å›¾ç›¸å…³çš„é¢œè‰²</p>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> 3D Gaussian Splatting </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ã€ŠEfficient Dense RGB-D SLAM in a Consistent Uncertainty-aware 3D Gaussian Fieldã€‹</title>
      <link href="2024/05/19/paper-reading-cg-slam/"/>
      <url>2024/05/19/paper-reading-cg-slam/</url>
      
        <content type="html"><![CDATA[<p><strong>é¡¹ç›®ä¸»é¡µï¼š</strong><a href="https://zju3dv.github.io/cg-slam/">https://zju3dv.github.io/cg-slam/</a></p><h1 id="è®ºæ–‡é˜…è¯»ã€ŠEfficient-Dense-RGB-D-SLAM-in-a-Consistent-Uncertainty-aware-3D-Gaussian-Fieldã€‹"><a href="#è®ºæ–‡é˜…è¯»ã€ŠEfficient-Dense-RGB-D-SLAM-in-a-Consistent-Uncertainty-aware-3D-Gaussian-Fieldã€‹" class="headerlink" title="è®ºæ–‡é˜…è¯»ã€ŠEfficient Dense RGB-D SLAM in a Consistent Uncertainty-aware 3D Gaussian Fieldã€‹"></a>è®ºæ–‡é˜…è¯»ã€ŠEfficient Dense RGB-D SLAM in a Consistent Uncertainty-aware 3D Gaussian Fieldã€‹</h1><p>æœ¬æ–‡ä»‹ç»äº†ä¸€ç§åŸºäºé«˜ä¸€è‡´æ€§å’Œå‡ ä½•ç¨³å®šæ€§çš„æ–°å‹ä¸‰ç»´é«˜æ–¯åœºçš„å®æ—¶é«˜æ–¯æº…å°„SLAMç³»ç»Ÿï¼Œå³CG-SLAMã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¹EWA(æ¤­åœ†åŠ æƒå¹³å‡)æº…å°„è¿‡ç¨‹ä¸­ç›¸æœºå§¿æ€çš„å¯¼æ•°è¿›è¡Œäº†å…¨é¢çš„æ•°å­¦åˆ†æ[60]ï¼Œå¹¶ä¸ºSLAMä»»åŠ¡å¼€å‘äº†ä¸€ä¸ªä¸“é—¨çš„CUDAæ¡†æ¶ï¼Œæœ‰æ•ˆåœ°è§£è€¦äº†è·Ÿè¸ªå’Œæ˜ å°„ç»„ä»¶ã€‚å…¶æ¬¡ï¼Œä¸ºäº†å‡å°‘å›ºæœ‰çš„è¿‡æ‹Ÿåˆé—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªå°ºåº¦æ­£åˆ™åŒ–é¡¹ï¼Œé€‚å½“åœ°é¼“åŠ±é«˜æ–¯æ¤­çƒè¿‘ä¼¼é«˜æ–¯çƒä½“ï¼Œä»¥å‡å°‘å„å‘å¼‚æ€§ï¼Œå¹¶åœ¨è·Ÿè¸ªç²¾åº¦å’Œæ¸²æŸ“çœŸå®æ„Ÿä¹‹é—´å®ç°è‰¯å¥½çš„æƒè¡¡ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°å•ç‹¬ä½¿ç”¨alphaæ··åˆæ·±åº¦ä¸èƒ½å¯¹é«˜æ–¯åŸºå…ƒçš„ä½ç½®æ–½åŠ æœ‰æ•ˆçš„çº¦æŸã€‚å› æ­¤ï¼Œä¸ºäº†å®ç°é«˜è´¨é‡çš„æ˜ å°„ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥å¯¹é½ä¸­å€¼æ·±åº¦å’Œalphaæ··åˆæ·±åº¦ï¼Œä»¥é¼“åŠ±é«˜æ–¯åŸè¯­åœ¨åœºæ™¯è¡¨é¢ä¸Šå¾ˆå¥½åœ°åˆ†å¸ƒï¼Œä»è€Œä¿ƒè¿›å…·æœ‰æ›´é›†ä¸­å‡ ä½•å¯†åº¦çš„ä¸€è‡´é«˜æ–¯åœºã€‚æ­¤å¤–ï¼Œä¸ºäº†è¿›ä¸€æ­¥æé«˜ç³»ç»Ÿçš„ç²¾åº¦å’Œæ•ˆç‡ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€ç§æ–°çš„æ·±åº¦ä¸ç¡®å®šæ€§æ¨¡å‹ï¼Œä»¥æŒ‡å¯¼æˆ‘ä»¬åŸºäºé«˜æ–¯çš„SLAMå…³æ³¨é‚£äº›ç¨³å®šä¸”ä¿¡æ¯ä¸°å¯Œçš„æ·±åº¦ä¸ç¡®å®šæ€§ã€‚æˆ‘ä»¬åœ¨å„ç§RGB-Dæ•°æ®é›†ä¸Šå¯¹æˆ‘ä»¬çš„ç³»ç»Ÿè¿›è¡Œäº†è¯„ä¼°ï¼Œå®éªŒç»“æœè¡¨æ˜æˆ‘ä»¬çš„CG-SLAMåœ¨è·Ÿè¸ªç²¾åº¦ã€é‡å»ºè´¨é‡å’Œè¿è¡Œæ•ˆç‡æ–¹é¢å…·æœ‰ä¼˜è¶Šçš„æ€§èƒ½ã€‚</p><h2 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h2><p><img src="/images/paper-reading-CG-SLAM/image-20240513111128366.png"></p><h3 id="Preliminary"><a href="#Preliminary" class="headerlink" title="Preliminary"></a>Preliminary</h3><p>åŸºæœ¬éƒ½æ˜¯3DGSçš„å†…å®¹</p><p>3DGSä¸­3DæŠ•å½±åˆ°2Dç”¨çš„æ˜¯02å¹´çš„ä¸€ç¯‡æ–‡ç« ï¼ŒEWA splattingï¼Œæœ¬æ–‡åˆ†æäº†è¿™ä¸ªEWA splattingï¼Œæ¨å¯¼äº†ä½å§¿çš„å¯¼æ•°ã€‚</p><h3 id="Uncertainty-Modeling"><a href="#Uncertainty-Modeling" class="headerlink" title="Uncertainty Modeling"></a>Uncertainty Modeling</h3><p>å‚è€ƒUncLe-SLAMå®ç°äº†Uncertainty Modeling</p><blockquote><p>SandstrÃ¶m, E., Ta, K., Van Gool, L., Oswald, M.R.: Uncle-slam: Uncertainty learning for dense neural slam. arXiv preprint arXiv:2306.11048 (2023)</p></blockquote><p>è¿™éƒ¨åˆ†çœ‹èµ·æ¥å°±æ˜¯å¸Œæœ›ä¸ç¡®å®šæ€§å°½é‡å°ï¼Œç„¶åå¯¹æ·±åº¦å½±å“æœ€å¤§çš„é«˜æ–¯å°½å¯èƒ½çš„å±…ä¸­ã€‚</p><h3 id="Mapping"><a href="#Mapping" class="headerlink" title="Mapping"></a>Mapping</h3><p>ç¨€æ¾å¹³å¸¸çš„å†…å®¹</p><h3 id="Tracking"><a href="#Tracking" class="headerlink" title="Tracking"></a>Tracking</h3><p>ç¨€æ¾å¹³å¸¸çš„å†…å®¹</p><p>æåˆ°äº†ä¸€ä¸ªSliding Bundle Adjustmentï¼Œå¸Œæœ›é€šè¿‡è¿™ä¸ªå‡å°ç´¯ç§¯è¯¯å·®ã€‚</p><p>è¿™é‡Œçš„sliding windowæ²¡æœ‰ç”¨åŸºäºè§†é”¥çš„æ–¹æ³•ï¼Œè€Œæ˜¯ç”¨NetVLADé¢„è®­ç»ƒæ¨¡å‹å»å¤„ç†ã€‚</p><p><strong>ç–‘æƒ‘ï¼š</strong></p><p>è¿™é‡Œtrackingçš„å†…å®¹å†™çš„å¥½å°‘ï¼Œä¸çŸ¥é“è¿™ä¸ªå¯¼æ•°ä»€ä¹ˆçš„æ˜¯æ€ä¹ˆå¼„çš„å•Šã€‚ã€‚ã€‚è¡¥å……ææ–™æ²¡æœ‰æ‰¾åˆ°å±…ç„¶ã€‚ã€‚ã€‚</p><p>åˆå»æ‰¾äº†ä¸€ä¸‹ï¼Œæ²¡æ‰¾åˆ°ï¼Œé‚£åªèƒ½ç­‰äº†ã€‚ã€‚ã€‚è¿™ç¯‡æ–‡ç« è™½ç„¶æ˜¯ç« å›½å³°ç»„çš„ï¼Œä½†æ˜¯å…¶å®ä¹Ÿæ²¡çœ‹åˆ°å¾ˆçªå‡ºçš„åœ°æ–¹ã€‚ã€‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> 3D Gaussian Splatting </tag>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ã€ŠCompact 3D Gaussian Splatting For Dense Visual SLAMã€‹</title>
      <link href="2024/05/14/paper-reading-compact-gsslam/"/>
      <url>2024/05/14/paper-reading-compact-gsslam/</url>
      
        <content type="html"><![CDATA[<h1 id="è®ºæ–‡é˜…è¯»ã€ŠCompact-3D-Gaussian-Splatting-For-Dense-Visual-SLAMã€‹"><a href="#è®ºæ–‡é˜…è¯»ã€ŠCompact-3D-Gaussian-Splatting-For-Dense-Visual-SLAMã€‹" class="headerlink" title="è®ºæ–‡é˜…è¯»ã€ŠCompact 3D Gaussian Splatting For Dense Visual SLAMã€‹"></a>è®ºæ–‡é˜…è¯»ã€ŠCompact 3D Gaussian Splatting For Dense Visual SLAMã€‹</h1><h2 id="Motivation"><a href="#Motivation" class="headerlink" title="Motivation"></a>Motivation</h2><p>è®ºæ–‡æåˆ°æœ€è¿‘çš„3DGS SLAMéƒ½æ˜¯å»ºç«‹åœ¨å¤§é‡å†—ä½™3Dé«˜æ–¯æ¤­çƒä¸Šçš„ï¼Œå¯¼è‡´äº†é«˜å†…å­˜å ç”¨å’Œå­˜å‚¨æˆæœ¬ï¼Œä»¥åŠå¾ˆæ…¢çš„è®­ç»ƒé€Ÿåº¦ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»–ä»¬æå‡ºäº†ä¸€ç§ç´§å‡‘çš„3Dé«˜æ–¯é£æº…SLAMç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿå‡å°‘äº†é«˜æ–¯æ¤­çƒçš„æ•°é‡å’Œå‚æ•°å¤§å°ã€‚</p><h2 id="Contributions"><a href="#Contributions" class="headerlink" title="Contributions"></a>Contributions</h2><ul><li>æˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„åŸºäºGSçš„SLAMç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿå…·æœ‰<strong>ç´§å‡‘çš„é«˜æ–¯åœºæ™¯è¡¨ç¤º</strong>ï¼Œå®ç°äº†å¿«é€Ÿçš„è®­ç»ƒå’Œæ¸²æŸ“é€Ÿåº¦ã€å‡†ç¡®çš„å§¿æ€ä¼°è®¡ï¼Œå¹¶æ˜¾è‘—æé«˜äº†å­˜å‚¨æ•ˆç‡ã€‚</li><li>æå‡ºäº†ä¸€ç§æ–°çš„<strong>åŸºäºæ»‘åŠ¨çª—å£çš„åœ¨çº¿æ©è”½æ–¹æ³•</strong>ï¼Œä»¥æ¶ˆé™¤å†—ä½™é«˜æ–¯æ¤­çƒçš„æ•°é‡ï¼ŒåŒæ—¶åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å®ç°é«˜ä¿çœŸåº¦ã€‚</li><li>æˆ‘ä»¬<strong>è§‚å¯Ÿå¹¶åˆ†æäº†ä¸‰ç»´é«˜æ–¯æ¤­çƒçš„å‡ ä½•ç›¸ä¼¼æ€§</strong>ï¼Œå¹¶æå‡ºäº†ä¸€ç§åŸºäºç æœ¬çš„æ–¹æ³•æ¥æœ‰æ•ˆåœ°æ¢å¤SLAMç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­æ¯ä¸ªé«˜æ–¯ç‚¹çš„å‡ ä½•ã€‚é’ˆå¯¹æ‘„åƒæœºè·Ÿè¸ªæ€§èƒ½ç›¸å¯¹è¾ƒä½çš„é—®é¢˜ï¼Œæå‡ºäº†ä¸€ç§åŸºäºå…³é”®å¸§çš„å…¨å±€BAæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å…·æœ‰é‡æŠ•å½±æŸå¤±ã€‚</li><li>æˆ‘ä»¬åœ¨ä¸åŒçš„æ•°æ®é›†ä¸Šè¿›è¡Œäº†å…¨é¢çš„å®éªŒï¼Œæ¸²æŸ“é€Ÿåº¦æé«˜äº†è¿‘176%ï¼Œå†…å­˜ä½¿ç”¨å‹ç¼©ç‡è¶…è¿‡1.97å€ã€‚</li></ul><h2 id="System-Pipeline"><a href="#System-Pipeline" class="headerlink" title="System Pipeline"></a>System Pipeline</h2><p><img src="/images/paper-reading-Compact-GSSLAM/image-20240506113119541.png"></p><blockquote><p>ä¹ä¸€çœ‹ï¼Œæœ‰ç‚¹åƒæ˜¯SplaTAMçš„å›¾å‘¢ï¼Œä¼šä¸ä¼šæ˜¯åœ¨SplaTAMçš„åŸºç¡€ä¸Šæ”¹è¿›æ¥çš„ï¼Ÿ</p></blockquote><h2 id="è®¨è®ºåˆ†æ"><a href="#è®¨è®ºåˆ†æ" class="headerlink" title="è®¨è®ºåˆ†æ"></a>è®¨è®ºåˆ†æ</h2><p>çœ‹äº†ä¸€ä¸‹è®ºæ–‡å†™çš„ä¸€äº›å†…å®¹ï¼Œæˆ‘éƒ½ä¸æ˜¯å¾ˆç†è§£ï¼š</p><p><strong>3.2 Sliding Window-based Maskéƒ¨åˆ†</strong></p><ul><li><p>3.2 Sliding Window-based Maskéƒ¨åˆ†stop gradient operator sg(Â·)è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p><p>æ ¹æ®ä¸‹é¢çš„ä¿¡æ¯è§£é‡Šè¿™ä¸ªå…¬å¼ï¼š<br>We introduce a learnable mask parameter $m \in R^N$ and a corresponding binary mask $M \in {0, 1}^N$â€‹, N is the number of Gaussian ellipsoids.<br>$$<br>M_n = sg (\mathbb{I}[Sig(m_n) &gt; \epsilon] - Sig(m_n)) + Sig(m_n)<br>$$<br>where $n$ is the index of the Gaussian ellipsoids, $\epsilon$ denotes the mask threshold. Inspired by [1], we employ the stop gradient operator $sg(Â·) $to calculate gradients from binary masks. $\mathbb{I}$ and $Sig(Â·)$ denote the indicator and sigmoid function. This formulation of mask strategy allows us to effectively combine the influence of volume and opacity of Gaussian ellipsoids.</p><p>æ ¹æ®GPTçš„è§£é‡Šï¼Œç»“è®ºï¼š</p><p>sg()å°±æ˜¯åœæ­¢æ¢¯åº¦è®¡ç®—ï¼Œç›¸å½“äºwith_no_grad()ã€‚</p><p>è¿™é‡Œå°±æ˜¯è®¡ç®—ä¸€ä¸ª1-sig+sig=1ï¼Œæˆ–è€…è®¡ç®—ä¸€ä¸ª0-sig+sig=0</p><p>å› ä¸ºè¿™é‡Œä¸è¿ç»­æ‰€ä»¥ä¸è®¡ç®—æ¢¯åº¦ã€‚</p></li><li><p>3.2 Sliding Window-based Maskéƒ¨åˆ†ä¸ºä»€ä¹ˆä½¿ç”¨è¿™æ ·çš„æŸå¤±å‡½æ•°ï¼Ÿ</p><p>è¿½é—®ï¼šä¸ºä»€ä¹ˆä½¿ç”¨å¦‚ä¸‹çš„æŸå¤±å‡½æ•°</p><p>We formulate the loss function $L_m$ of our mask:<br>$$<br>L_m = \frac{1}{N} \sum_{n=1}^{N}Sig(m_n)<br>$$<br>è¿™ä¸ªæŸå¤±å‡½æ•°çœŸçš„éå¸¸å¥‡æ€ªï¼Œç¡®å®šä¸æ˜¯1-Sigå—ï¼Ÿ</p><p>è¿™ä¸ªç›®çš„æ˜¯è®©æ‰€æœ‰çš„maskéƒ½å˜æˆ0å•Šï¼Ÿï¼Ÿï¼Ÿ</p></li></ul><p><strong>3.3 Geometry Codebook</strong></p><ul><li><p>3.3 Geometry Codebookè¿™éƒ¨åˆ†çš„å…¬å¼ä¹Ÿä¸æ˜¯å¤ªçœ‹å¾—æ‡‚ï¼Œæ²¡ç†è§£codebookçš„ä½œç”¨ï¼Œè¿™é‡Œä¹Ÿæ²¡æœ‰è¯¦ç»†ä»‹ç»ã€‚</p><blockquote><p>åç»­çœ‹ã€ŠCompact 3D Gaussian Representation for Radiance Fieldã€‹ï¼Œçœ‹æ˜ç™½äº†ã€‚ã€‚ã€‚</p></blockquote></li></ul><p><strong>è¯„ä»·ï¼š</strong></p><p>è¿™ç¯‡è®ºæ–‡ä¸»è¦æ˜¯å‹ç¼©3DGSçš„å¤§å°ï¼Œ<strong>åšäº†ä¸¤æ–¹é¢çš„å·¥ä½œï¼Œä¸€ä¸ªæ˜¯åŸºäºå¯å­¦ä¹ çš„maskå’Œè§†é”¥ä½“æ¥è¿‡æ»¤é«˜æ–¯ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡codebookå‹ç¼©ç›¸ä¼¼çš„é«˜æ–¯ã€‚</strong></p><p>å…¶ä»–æ–¹é¢å€’æ˜¯æ²¡æ„Ÿè§‰ç‰¹åˆ«çªå‡ºï¼Œå¯¹äºGlobal BAéƒ¨åˆ†ï¼Œå®ƒè¯´ç»´æŠ¤çš„å…³é”®å¸§æ•°é‡æ¯”å…¶ä»–GS SLAMå¤§å¾—å¤šï¼Œä¸ªäººè§‰å¾—è¿™ä¸æ˜¯ä¼˜ç‚¹ã€‚æ¯”å¦‚RGBD GS-ICP SLAMå°±æåˆ°äº†ï¼Œå…³é”®å¸§æ•°é‡è¶Šå¤šè¶Šå®¹æ˜“å¯¼è‡´è¯¯å·®ç´¯ç§¯çš„é—®é¢˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> 3D Gaussian Splatting </tag>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ã€ŠRGBD GS-ICP SLAMã€‹</title>
      <link href="2024/05/02/paper-reading-rgbd-gs-icp-slam/"/>
      <url>2024/05/02/paper-reading-rgbd-gs-icp-slam/</url>
      
        <content type="html"><![CDATA[<h1 id="è®ºæ–‡é˜…è¯»ã€ŠRGBD-GS-ICP-SLAMã€‹"><a href="#è®ºæ–‡é˜…è¯»ã€ŠRGBD-GS-ICP-SLAMã€‹" class="headerlink" title="è®ºæ–‡é˜…è¯»ã€ŠRGBD GS-ICP SLAMã€‹"></a>è®ºæ–‡é˜…è¯»ã€ŠRGBD GS-ICP SLAMã€‹</h1><blockquote><p>ä»è¿™ç¯‡è®ºæ–‡çš„Fig. 1å…¶å®å¯ä»¥çœ‹å‡ºæ¥ï¼ŒGaussian Splatting SLAMè™½ç„¶FPSè¾ƒä½ï¼Œä½†æ˜¯PSNRè¿˜æ˜¯å¾ˆé«˜çš„ã€‚</p></blockquote><h2 id="å…³é”®é—®é¢˜"><a href="#å…³é”®é—®é¢˜" class="headerlink" title="å…³é”®é—®é¢˜"></a>å…³é”®é—®é¢˜</h2><ul><li><p>å°½ç®¡åŸºäº3dgsçš„SLAMæ–¹æ³•åˆ©ç”¨äº†é«˜é€Ÿæ¸²æŸ“çš„ä¼˜åŠ¿ï¼Œä½†å®ƒä»¬æœªèƒ½è§£å†³æ ¹æœ¬é—®é¢˜:<strong>æ— æ³•ç›´æ¥åˆ©ç”¨3Dæ˜¾å¼è¡¨ç¤ºå’Œé€šè¿‡2Då›¾åƒæ¸²æŸ“é—´æ¥è·Ÿè¸ª3Dç©ºé—´ã€‚</strong></p><blockquote><p>Although 3DGS-based SLAM methods take advantages of the high-speed rendering, they fail to address the fundamental issue: the inability to directly utilize 3D explicit representations and the indirect tracking of 3D space through 2D image rendering.</p></blockquote></li><li><p>å°½ç®¡è§£è€¦æ–¹æ³•é€šè¿‡åˆ†ç¦»æ˜ å°„å’Œè·Ÿè¸ªè¿‡ç¨‹åœ¨è·Ÿè¸ªæ–¹é¢è¡¨ç°å‡ºæ›´å¥½çš„æ€§èƒ½ï¼Œä½†å®ƒä»¬<strong>éœ€è¦é¢å¤–çš„è®¡ç®—èµ„æºç”¨äºç‹¬ç«‹é˜¶æ®µã€‚æ­¤å¤–ï¼Œè¿™äº›æ–¹æ³•éœ€è¦åœ¨ä¸‰ç»´ç©ºé—´ä¸­å­˜å‚¨ç‰¹å¾ï¼Œä¸ä¸‰ç»´GSåœ°å›¾æ— å…³ã€‚</strong></p><blockquote><p>Although decoupled methods exhibit better performances in tracking by separating mapping and tracking processes, they require additional computational resources for the independent stages. Moreover, these methods need to store features in 3D space, unrelated to the 3D GS map.</p></blockquote></li><li><p>==<strong>G-ICPçš„æ–¹æ³•å…è®¸Gaussianè¿™æ ·çš„è¡¨ç¤ºæ–¹æ³•ç›´æ¥ç”¨äºè·Ÿè¸ªã€‚</strong>==</p><blockquote><p>There exists a method that allows Gaussian, an explicit representation, to be directly used for tracking. The well-known Generalized Iterative Closest Point (G-ICP) [17,33] from the 3D scan matching family is simple yet efficient for fast tracking of 3D point clouds. During preprocessing, it only requires computing Gaussians for the current frame and the map. Given that the map in 3DGS utilizes Gaussians as an explicit representation in 3D space, using G-ICP for tracking allows for the direct utilization of the 3DGS map without the need for post-processing. Furthermore, the Gaussians of the current frame computed during tracking with G-ICP can also be directly utilized as an explicit representation in the 3DGS map, without additional computations.</p></blockquote></li></ul><h2 id="Contributions"><a href="#Contributions" class="headerlink" title="Contributions"></a>Contributions</h2><ul><li>ç»“åˆG-ICPå’Œ3DGSçš„SLAMç³»ç»Ÿ</li><li>é€šè¿‡ä½¿ç”¨G-ICPè¿›è¡Œè·Ÿè¸ªï¼Œç§¯æåˆ©ç”¨3Dä¿¡æ¯ï¼Œå‡å°‘äº†è·Ÿè¸ªéœ€è¦çš„æ—¶é—´</li><li>é€šè¿‡å°ºåº¦å¯¹é½æŠ€æœ¯å…±äº«äº†G-ICPå’Œ3DGSçš„åæ–¹å·®ï¼Œé™ä½äº†è®¡ç®—æˆæœ¬ï¼Œå¹¶ä¸”ä¿ƒè¿›äº†3DGSçš„å¿«é€Ÿæ”¶æ•›ã€‚</li></ul><h2 id="System-Overview"><a href="#System-Overview" class="headerlink" title="System Overview"></a>System Overview</h2><p><img src="/images/paper-reading-RGBD-GS-ICP-SLAM/image-20240504162019382.png"></p><blockquote><p>ä¸æ˜¯å¾ˆç†è§£ä¸‹é¢è¿™æ®µè¯ï¼Œæˆ‘è§‰å¾—GSä¸­3Dç‚¹çš„æ•°é‡åº”è¯¥æ˜¯æœ‰å¿…è¦è°ƒæ•´çš„ï¼Œæˆ‘åœ¨è¿è¡Œè¿™ç¯‡å·¥ä½œæºç çš„æ—¶å€™ï¼Œå…¶å®èƒ½å‘ç°ç‚¹çš„åˆ†å¸ƒä¸æ˜¯å¾ˆå‡åŒ€ï¼Œå¸§å¤šçš„åœ°æ–¹ç‚¹ä¹Ÿå¤šã€‚ã€‚ã€‚</p><p><img src="/images/paper-reading-RGBD-GS-ICP-SLAM/image-20240505112159783.png"></p><p>ä¸è¿‡è®ºæ–‡åé¢åˆè¯´ï¼Œåªæœ‰å’Œç°åœ¨åœ°å›¾ä¸é‡å çš„é«˜æ–¯å‡½æ•°æ‰èƒ½è¢«è®¤å®šæ˜¯ç›®æ ‡é«˜æ–¯å‡½æ•°ï¼Œä»è¿™é‡Œçœ‹å°±å¾ˆåˆç†ã€‚ä½†æ˜¯ä»£ç è·‘çš„ç»“æœç¡®å®å­˜åœ¨ä¸å‡åŒ€çš„åœ°æ–¹ï¼Œè¿˜æ˜¯å†å¥½å¥½çœ‹çœ‹å§ã€‚</p></blockquote><h3 id="G-ICP-Tracking"><a href="#G-ICP-Tracking" class="headerlink" title="G-ICP Tracking"></a>G-ICP Tracking</h3><h4 id="Scale-Regularization"><a href="#Scale-Regularization" class="headerlink" title="Scale Regularization"></a>Scale Regularization</h4><blockquote><p>ä¸ºä»€ä¹ˆæœ‰è¿™ä¸ªæ­¥éª¤ï¼ŸRGB-Dè¾“å…¥çš„å°ºåº¦ä¸åº”è¯¥å°±æ˜¯å›ºå®šçš„å—ï¼Ÿ</p><p>è¿™é‡Œè¯´çš„å°ºåº¦åº”è¯¥æŒ‡çš„æ˜¯é«˜æ–¯çš„å¤§å°ã€‚</p></blockquote><p>è¿™é‡Œè²Œä¼¼æ˜¯è¯´åŸå§‹çš„G-ICPç®—æ³•æ˜¯æŠŠé«˜æ–¯å¹³é¢åŒ–äº†çš„ï¼ŒæŠŠæ¯ä¸ªé«˜æ–¯åˆ†å¸ƒè§†ä¸ºç±»å¹³é¢çš„åˆ†å¸ƒã€‚</p><p>ç„¶åæœ¬æ–‡åœ¨æ­£åˆ™åŒ–çš„åŒæ—¶ä¿ç•™ç›®æ ‡é«˜æ–¯å‡½æ•°çš„åŸå§‹ç‰¹å¾ï¼Œåšäº†ä¸€ä¸ªæ¤­åœ†æ­£åˆ™åŒ–ã€‚</p><h4 id="Keyframe-Selection"><a href="#Keyframe-Selection" class="headerlink" title="Keyframe Selection"></a>Keyframe Selection</h4><p>å‚è€ƒäº†ORB-SLAMå’ŒVins-Monoå®ç°äº†åŠ¨æ€çš„å…³é”®å¸§é€‰æ‹©æ–¹æ³•ã€‚</p><p>ä¸è¿‡è¿™é‡Œè¯´åˆ†æˆäº†tracking keyframeå’Œmapping keyframeã€‚</p><h3 id="GS-Mapping"><a href="#GS-Mapping" class="headerlink" title="GS Mapping"></a>GS Mapping</h3><h4 id="Scale-Aligning"><a href="#Scale-Aligning" class="headerlink" title="Scale Aligning"></a>Scale Aligning</h4><p>è¿™é‡Œæåˆ°äº†ä¼ æ„Ÿå™¨å’Œåœºæ™¯çš„è·ç¦»ä¸åŒï¼Œå°±ç®—æ˜¯æ‹¿åˆ°äº†æ·±åº¦å›¾ï¼Œç‚¹äº‘çš„é—´è·ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ï¼Œç¨€ç–ç¨‹åº¦ä¸åŒã€‚è¿™ç§æƒ…å†µä¼šå¯¼è‡´Kè¿‘é‚»è®¡ç®—çš„åæ–¹å·®å°ºåº¦ä¹Ÿå˜å¤§ã€‚å› æ­¤è®ºæ–‡åšäº†ä¸€ä¸ªå°ºåº¦å½’ä¸€åŒ–çš„å¤„ç†ã€‚</p><h4 id="Additional-Keyframe-Selection-for-Mapping"><a href="#Additional-Keyframe-Selection-for-Mapping" class="headerlink" title="Additional Keyframe Selection for Mapping"></a>Additional Keyframe Selection for Mapping</h4><p>æåˆ°äº†è·Ÿè¸ªæœŸé—´å¢åŠ å…³é”®å¸§æ•°é‡å®¹æ˜“å¯¼è‡´ç´¯ç§¯è¯¯å·®ã€‚ä¸ºäº†ç¼“è§£è¿™ä¸ªé—®é¢˜ï¼Œå°±å®ç°äº†è¿™ä¸ªæ–¹æ³•ï¼Œæ·»åŠ mapping only keyframeã€‚trackingç»§ç»­ä»ç°æœ‰è·Ÿè¸ªè¿‡ç¨‹ä¸­çš„é€‰å®šå…³é”®å¸§è¿›è¡Œï¼Œè€Œmappingåˆ©ç”¨åŸå§‹å…³é”®å¸§å’Œé™„åŠ çš„ä»…æ˜ å°„å…³é”®å¸§ã€‚</p><blockquote><p>æ–°çš„é—®é¢˜ï¼Œtracking keyframeçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿæˆ–è€…è¯´ä»¥å¾€SLAMçš„å…³é”®å¸§çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿ</p><p>å¿˜äº†ã€‚ã€‚ã€‚</p></blockquote><p><img src="/images/paper-reading-RGBD-GS-ICP-SLAM/image-20240505122210749.png"></p><h4 id="Avoiding-Local-Minima-while-Mapping"><a href="#Avoiding-Local-Minima-while-Mapping" class="headerlink" title="Avoiding Local Minima while Mapping"></a>Avoiding Local Minima while Mapping</h4><p>è¿™é‡Œæåˆ°äº†æˆ‘ä¹Ÿå¾ˆè®¤åŒçš„ä¸€ä¸ªç‚¹ï¼ŒGS SLAMæ˜¯å®æ—¶è¿è¡Œçš„ï¼Œé€šå¸¸æ˜¯ç¼ºä¹å¯¹åœºæ™¯çš„å……åˆ†è§‚å¯Ÿçš„ã€‚è¿™ç§æƒ…å†µå®¹æ˜“å¯¼è‡´å±€éƒ¨æœ€ä¼˜ã€‚</p><p>ä¸è¿‡æœ¬æ–‡çš„è§£å†³æ–¹æ¡ˆæ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯æ¯æ¬¡è¿­ä»£è®­ç»ƒä»å…³é”®å¸§ä¸­éšæœºé€‰ä¸€ä¸ªè¿›è¡Œå­¦ä¹ ã€‚ã€‚ã€‚</p><blockquote><p>æˆ‘è§‰å¾—GS SLAMä¹Ÿå­˜åœ¨ç¨€ç–è§†è§’é‡å»ºçš„é—®é¢˜ï¼Œè¿™é‡Œå¯ä»¥å¥½å¥½æ¢ç©¶ä¸€ä¸‹æ€ä¹ˆè§£å†³ã€‚</p></blockquote><h2 id="å®éªŒéƒ¨åˆ†"><a href="#å®éªŒéƒ¨åˆ†" class="headerlink" title="å®éªŒéƒ¨åˆ†"></a>å®éªŒéƒ¨åˆ†</h2><p><img src="/images/paper-reading-RGBD-GS-ICP-SLAM/image-20240505122956821.png"></p><p>ä»è¿™é‡Œå€’æ˜¯å¯ä»¥çœ‹å‡ºï¼Œæœ¬æ–‡çš„æ–¹æ³•åœ¨SSIMä¸Šä¸æ˜¯å¾ˆå¥½ï¼ŒPoint-SLAMå’ŒGS-SLAMåœ¨è¿™éƒ¨åˆ†è¡¨ç°æ˜¯éå¸¸å¥½çš„ã€‚</p><p><img src="/images/paper-reading-RGBD-GS-ICP-SLAM/image-20240505123102119.png"></p><p>ä»è¿™é‡Œï¼Œæˆ‘æœ‰ä¸€ä¸ªæ¨æµ‹ï¼Œå› ä¸ºTUM-RGBDçš„æ•°æ®æ˜¯å­˜åœ¨å™ªå£°å’Œè¿åŠ¨æ¨¡ç³Šçš„ï¼Œæ‰€ä»¥<strong>æœ¬æ–‡çš„æ–¹æ³•åœ¨å­˜åœ¨å™ªå£°å’Œè¿åŠ¨æ¨¡ç³Šçš„æƒ…å†µä¸‹ï¼Œè¡¨ç°ä¸å¥½ï¼ï¼ï¼</strong></p><blockquote><p>è¿™é‡Œè®ºæ–‡ä½œè€…ç‹¡è¾©äº†ä¸€ä¸‹ï¼Œè¯´â€œTUMæ•°æ®é›†æ˜¯ç”¨è€å¼ä¼ æ„Ÿå™¨æ•è·çš„ï¼Œè¿™ä¼šå¯¼è‡´æ·±åº¦å›¾åƒä¸­çš„å™ªå£°å’Œå¤§é‡ä¿¡æ¯ä¸¢å¤±ã€‚SplaTAMä»…åœ¨æ·±åº¦æŸå¤±æ˜æ˜¾çš„åŒºåŸŸæ·»åŠ æ–°çš„é«˜æ–¯å‡½æ•°æ¥å¤„ç†è¿™äº›å› ç´ ï¼Œè€Œæˆ‘ä»¬çš„æ–¹æ³•åˆ©ç”¨äº†æ·±åº¦å›¾åƒä¸­çš„æ‰€æœ‰ç»“æ„ä¿¡æ¯ï¼Œä¸“æ³¨äºå‡†ç¡®è·Ÿè¸ªå’Œå¿«é€Ÿç³»ç»Ÿï¼Œè€Œä¸æ˜¯å¤„ç†è¿™äº›å› ç´ ã€‚â€</p></blockquote><p>æœ€åè®ºæ–‡æ€»ç»“äº†ä¸€ä¸‹è‡ªå·±çš„å±€é™æ€§ï¼šè¯¥æ–¹æ³•ä»…ä¾èµ–äºä¸‰ç»´ç»“æ„çš„æ·±åº¦ï¼Œå®ç°äº†å¿«é€Ÿçš„ç³»ç»Ÿé€Ÿåº¦ã€‚ç„¶è€Œï¼Œåœ¨ç°å®ç¯å¢ƒä¸­ï¼Œç”±äºRGB-Dä¼ æ„Ÿå™¨å›ºæœ‰çš„æ·±åº¦å™ªå£°ï¼Œé‡å»ºåœ°å›¾çš„è´¨é‡å—åˆ°é™åˆ¶ã€‚ç”±äºç³»ç»Ÿé€Ÿåº¦å·²ç»éå¸¸å¿«ï¼Œå› æ­¤å¯ä»¥é¢„æœŸï¼Œåœ¨å˜ˆæ‚çš„ç°å®ç¯å¢ƒä¸­ï¼Œé€šè¿‡ç‰ºç‰²ä¸€ç‚¹é€Ÿåº¦æ¥è¡¥å¿å…·æœ‰ç›¸å¯¹é²æ£’RGBä¿¡æ¯çš„å˜ˆæ‚æ·±åº¦å›¾åƒï¼Œå¯ä»¥å®ç°ç¨³å¥çš„æ€§èƒ½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> 3D Gaussian Splatting </tag>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ã€ŠMIPS-Fusion Multi-Implicit-Submaps for Scalable and Robust Online Neural RGB-D ã€‹</title>
      <link href="2024/04/10/paper-reading-mips-fusion/"/>
      <url>2024/04/10/paper-reading-mips-fusion/</url>
      
        <content type="html"><![CDATA[<h1 id="è®ºæ–‡é˜…è¯»ã€ŠMIPS-Fusion-Multi-Implicit-Submaps-for-Scalable-and-Robust-Online-Neural-RGB-D-ã€‹Reconstruction"><a href="#è®ºæ–‡é˜…è¯»ã€ŠMIPS-Fusion-Multi-Implicit-Submaps-for-Scalable-and-Robust-Online-Neural-RGB-D-ã€‹Reconstruction" class="headerlink" title="è®ºæ–‡é˜…è¯»ã€ŠMIPS-Fusion: Multi-Implicit-Submaps for Scalable and Robust Online Neural RGB-D ã€‹Reconstruction"></a>è®ºæ–‡é˜…è¯»ã€ŠMIPS-Fusion: Multi-Implicit-Submaps for Scalable and Robust Online Neural RGB-D ã€‹Reconstruction</h1><h3 id="System-Pipeline"><a href="#System-Pipeline" class="headerlink" title="System Pipeline"></a>System Pipeline</h3><img src="/images/paper-reading-MIPS-Fusion/image-20240410131638745.png" style="zoom: 80%;"><h3 id="Multi-Implicit-Submap-Representation"><a href="#Multi-Implicit-Submap-Representation" class="headerlink" title="Multi-Implicit-Submap Representation"></a>Multi-Implicit-Submap Representation</h3><p>å¯¹äºæ¯ä¸€ä¸ªå­åœ°å›¾ï¼Œè¡¨ç¤ºä¸ºï¼šTSDFï¼ˆMLPåˆ†ç±»å™¨ï¼‰ã€radiance filedï¼ˆMLPåœºæ™¯è¡¨ç¤ºorè§£ç å™¨ï¼‰ã€ç¬¬ä¸€ä¸ªå…³é”®å¸§åœ¨å…¨å±€åœ°å›¾ä¸­çš„å§¿æ€ã€å…³è”çš„å…³é”®å¸§é›†åˆã€axis-alignedé•¿æ–¹ä½“ä½“ç´ ã€‚</p><p><strong>è¿™é‡Œæåˆ°ä¸€ä¸ªè§‚ç‚¹ï¼š</strong>æ„å»ºå­åœ°å›¾æ¯”è¾ƒçµæ´»ï¼Œæ¯ä¸€ä¸ªå­åœ°å›¾éƒ½å¯ä»¥ä½œä¸ºä¸€ä¸ªæ•´ä½“è¿›è¡Œè½¬æ¢ã€‚åŒæ—¶ï¼Œç”±äºå­åœ°å›¾å±€éƒ¨åæ ‡åˆ†å¸ƒå¯¼è‡´low data biasï¼Œè¿™æ ·æ›´å®¹æ˜“å­¦ä¹ ã€‚</p><p><strong>Classification-based neural TSDF</strong></p><p>åŒºåŸŸå†…ä¸é‡å çš„ç‚¹å°±ç›´æ¥æŸ¥è¯¢MLPåˆ†ç±»å™¨æ‹¿åˆ°TSDFå€¼äº†ï¼Œè€Œå¯¹äºé‡å éƒ¨åˆ†çš„ç‚¹ï¼Œä¼šä½¿ç”¨å¦‚ä¸‹å…¬å¼ï¼Œæ ¹æ®ä¸ç¡®å®šæ€§è®¡ç®—æƒé‡ï¼Œå†æ±‚ä¸€ä¸ªåŠ æƒå’Œï¼š</p><img src="/images/paper-reading-MIPS-Fusion/image-20240410132325671.png" style="zoom:67%;"><p>è®ºæ–‡æŠŠTSDFå€¼åˆ†æˆäº†5ç±»ï¼Œå¦‚ä¸‹ï¼š</p><img src="/images/paper-reading-MIPS-Fusion/image-20240410133057662.png" style="zoom:67%;"><p>æŸ¥è¯¢MLPåˆ†ç±»å™¨çš„è¯ï¼Œå°±ä¼šå¾—åˆ°è¯¥ç‚¹å¤„äºè¿™äº”ä¸ªç±»åˆ«çš„æ¦‚ç‡ï¼Œç„¶åä½¿ç”¨soft argmaxå‡½æ•°å°±èƒ½æ‹¿åˆ°è¯¥ç‚¹çš„TSDFå€¼ã€‚</p><blockquote><p>è¿™ä¸€æ­¥è¿˜æŒºå¦™çš„ï¼Œç”¨åˆ†ç±»å™¨ã€‚çœ‹è®ºæ–‡çš„Fig.6. åˆ†ç±»å™¨çš„æ–¹æ³•æ”¶æ•›çš„é€Ÿåº¦æ›´å¿«ã€‚</p><p>å¥½åƒæœ‰ä¸€äº›æ·±åº¦ä¼°è®¡çš„æ–¹æ³•ä¹Ÿæ˜¯æŒ‰ç…§åˆ†ç±»å™¨çš„æ€è·¯å»åšçš„ã€‚</p></blockquote><img src="/images/paper-reading-MIPS-Fusion/image-20240410133527668.png" style="zoom: 67%;"><p>è¿™ä¸ªæ‰€è°“çš„soft argmaxå‡½æ•°åŠ äº†ä¸€ä¸ªé¢å¤–çš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°è®ºæ–‡è¯´æ˜¯ç”¨æ¥è°ƒæ•´å¹³æ»‘åº¦å’Œæ¢¯åº¦çš„ã€‚</p><p>å¦å¤–ç”±äºç”¨è¿™ç§åˆ†ç±»å™¨çš„æ–¹å¼ï¼Œè¿˜å¯ä»¥è®¡ç®—å‡ºæ¥TSDFçš„ä¸ç¡®å®šåº¦ï¼Œè€Œä¸”å¯¹ç±»åˆ«æ•°é‡ä¸æ•æ„Ÿã€‚ä¸‹é¢è¿™å¼ å›¾è¯´æ˜ï¼Œè‡³å°‘Shannon entropyä½çš„æƒ…å†µä¸‹ï¼ŒTSDF erroræå¤§æ¦‚ç‡ä¹Ÿå¾ˆä½ï¼Œæ‰€ä»¥å¯ä»¥åªæ™’é€‰Shannon entropyä½çš„ç‚¹ã€‚ï¼ˆä¸»è¦æ˜¯å¾ˆå¤šæƒ…å†µä¸‹Shannon entropyé«˜ï¼Œä½†å®é™…ä¸ŠTSDF erroråˆå¾ˆä½ï¼Œå­˜åœ¨å‡é˜³æ€§çš„æƒ…å†µï¼‰</p><img src="/images/paper-reading-MIPS-Fusion/image-20240410134542128.png" style="zoom: 67%;"><p><strong>Neural radiance field</strong></p><p>ä¸Šé¢çš„TSDFåˆ†ç±»å™¨è¡¨ç¤ºäº†åœºæ™¯çš„å‡ ä½•ç»“æ„ï¼Œä½†æ˜¯å¯¹äºå¤–è§‚ï¼Œè¿™ç¯‡è®ºæ–‡è¿˜æ˜¯æ²¿ç”¨äº†ç¥ç»è¾å°„åœºçš„æ–¹æ³•ï¼Œè¿™éƒ¨åˆ†çœ‹èµ·æ¥æ˜¯ä¸»è¦å‚è€ƒçš„iMAPï¼Œçœç•¥äº†è§†çº¿æ–¹å‘çš„ç¼–ç ã€‚</p><p><strong>Color and depth map rendering</strong></p><p>è¿™éƒ¨åˆ†å°±æ˜¯æ ¹æ®TSDFå€¼å»è®¡ç®—æƒé‡äº†ï¼Œæƒé‡çš„è®¡ç®—æ–¹æ³•å’ŒCo-SLAMæ¯”è¾ƒç›¸ä¼¼ã€‚</p><p>æœ¬æ–‡çš„ï¼š</p><img src="/images/paper-reading-MIPS-Fusion/image-20240410214104301.png" style="zoom: 67%;"><p>Co-SLAMçš„ï¼š</p><img src="/images/paper-reading-MIPS-Fusion/image-20240410214120538.png" style="zoom:67%;"><p>å¦å¤–ï¼ŒCo-SLAMåº”è¯¥æ˜¯æ²¿ç€å°„çº¿è¿›è¡Œé‡‡æ ·äº†ä¸€ç³»åˆ—çš„ç‚¹ï¼›MIPS-Fusionå£°ç§°ä»–ä»¬æ˜¯æˆªæ–­åŒºåŸŸå†…è¿›è¡Œé‡‡æ ·ã€‚</p><blockquote><p><strong>ç–‘é—®ï¼šå¦‚ä½•åšåˆ°æˆªæ–­åŒºåŸŸå†…è¿›è¡Œé‡‡æ ·ï¼Ÿ</strong>åº”è¯¥æ˜¯NICE-SLAMé‚£ç§ï¼Œåœ¨æ·±åº¦å€¼å‰åä¸€å®šåŒºåŸŸè¿›è¡Œé‡‡æ ·ï¼Ÿ</p></blockquote><h3 id="Optimization-Losses-for-Mapping-and-Tracking"><a href="#Optimization-Losses-for-Mapping-and-Tracking" class="headerlink" title="Optimization Losses for Mapping and Tracking"></a>Optimization Losses for Mapping and Tracking</h3><p>åŒ…æ‹¬å››ç§æŸå¤±ï¼š</p><ul><li>depth to TSDT lossï¼Œd2t</li><li>TSDF truncation-region lossï¼Œtr</li><li>TSDF free-space lossï¼Œfs</li><li>RGB rendering lossï¼Œrgb</li></ul><p>d2tç”¨äºtrackingï¼ˆROå’ŒGOï¼‰ï¼Œtrã€fsã€rgbç”¨äºmappingå’ŒGO-based pose optimization</p><blockquote><p><strong>ç–‘é—®ï¼šROå’ŒGOæ˜¯ä»€ä¹ˆï¼Œæš‚æ—¶æ²¡çœ‹åˆ°è®ºæ–‡æåŠ</strong></p><p>ROæŒ‡çš„æ˜¯éšå³ä¼˜åŒ–ï¼Œrandomized optimization</p><p>GOæŒ‡çš„æ˜¯gradient-based optimization</p><p>åé¢ä¸‰ç§lossè¿‘æœŸçš„å·¥ä½œç»å¸¸ä½¿ç”¨ï¼Œè€Œd2tæœ¬æ–‡å£°ç§°æ˜¯highly effective and efficient for tracking optimization</p><p>å¦å¤–ï¼Œæœ¬æ–‡æ²¡æœ‰ä½¿ç”¨å¸¸è§çš„depth rendering lossï¼Œå› ä¸ºtrå’Œfså·²ç»è¦†ç›–depth rendering lossäº†</p></blockquote><p><strong>Depth-to-TSDF loss</strong>    we define a frame-to-model error metric to measure <strong>the fitness of how well ğ·ğ‘¡ â€œfits intoâ€ the TSDF under pose</strong></p><p>å¤§æ¦‚æ„æ€å°±æ˜¯ï¼Œåœ¨è¿™ä¸ªposeä¸‹ï¼Œå¯¹äºæŸä¸ªåƒç´ pï¼Œæ ¹æ®è§‚æµ‹çš„æ·±åº¦å€¼è®¡ç®—å‡ºå®ƒä¸–ç•Œåæ ‡ç³»ä¸‹çš„åæ ‡ï¼Œå†æ‹¿åˆ°åœ¨å½“å‰å­å›¾çš„åæ ‡ï¼Œå»æŸ¥è¯¢å­å›¾ä¸‹å®šä¹‰çš„TSDFï¼Œå¦‚æœposeæ­£ç¡®çš„è¯ï¼Œè¿™ä¸ªç‚¹åˆ°æ›²é¢çš„è·ç¦»åº”è¯¥ä¸º0ï¼Œå³TSDFåº”è¯¥ä¸º0</p><img src="/images/paper-reading-MIPS-Fusion/image-20240411102301885.png" style="zoom:67%;"><p><strong>TSDF truncation-region loss</strong>    The truncation-region loss is devised to <strong>supervise the MLP to output correct SDF values for points within the truncation region</strong></p><p>å¤§æ¦‚æ„æ€å°±æ˜¯ï¼Œæ ¹æ®ä¼ æ„Ÿå™¨è§‚æµ‹æ·±åº¦å’Œé‡‡æ ·æ·±åº¦è®¡ç®—ä¸€ä¸ªSDFå€¼ï¼Œç„¶åå’Œç½‘ç»œé¢„æµ‹çš„å€¼åšå·®ï¼Œçœ‹çœ‹å¯¹ä¸å¯¹ã€‚</p><img src="/images/paper-reading-MIPS-Fusion/image-20240411104211489.png" style="zoom:67%;"><p><strong>TSDF free-space loss</strong>    The free-space loss directs the neural map to output a value equal to the truncation value ğœ for the empty region in the visible side of the viewing frustum</p><p>è¿™é‡Œåº”è¯¥æ˜¯å¸Œæœ›TSDF MLPèƒ½å¤Ÿå‡†ç¡®è¡¨ç¤ºfree spaceï¼Œå³ç›¸æœºåˆ°ç‰©ä½“è¡¨é¢çš„è§†é”¥å†…ï¼ŒTSDFå€¼åº”è¯¥ä¸º1ï¼Œå¯¹åº”çš„ï¼Œç½‘ç»œçš„è¾“å‡ºä¹Ÿåº”è¯¥å°½å¯èƒ½åœ°æ¥è¿‘æˆªæ–­è·ç¦»ã€‚è¿™æ ·è®¾è®¡æœ‰åŠ©äºæé«˜ä¸‰ç»´é‡å»ºçš„è´¨é‡å’Œç²¾åº¦ã€‚</p><img src="/images/paper-reading-MIPS-Fusion/image-20240411111210362.png" style="zoom:67%;"><p><strong>RGB rendering loss</strong>    éå¸¸å¸¸è§„çš„æŸå¤±å‡½æ•°äº†</p><img src="/images/paper-reading-MIPS-Fusion/image-20240411112422189.png" style="zoom:67%;"><h3 id="Tracking-with-Hybrid-Optimization"><a href="#Tracking-with-Hybrid-Optimization" class="headerlink" title="Tracking with Hybrid Optimization"></a>Tracking with Hybrid Optimization</h3><p>è¿™é‡Œçš„Hybrid OptimizationæŒ‡çš„æ˜¯ç»“åˆäº†éšå³ä¼˜åŒ–ï¼ˆROï¼‰å’ŒåŸºäºæ¢¯åº¦çš„ä¼˜åŒ–ï¼ˆGOï¼‰ã€‚åœ¨å›ºå®šæ¬¡æ•°çš„ RO è¿­ä»£ä¹‹åï¼Œé’ˆå¯¹å¦å¤–å›ºå®šæ¬¡æ•°çš„è¿­ä»£çš„ä¸¤ä¸ªæŸå¤±è°ƒç”¨ GOã€‚</p><p><strong>å…³äºROï¼š</strong>Randomized pose optimization</p><p>æ˜¯æ¯”è¾ƒæ–°é²œçš„ä¸œè¥¿ï¼Œå¾ˆé—æ†¾æˆ‘ä¸ä¼šï¼Œéœ€è¦å†å¥½å¥½äº†è§£ä¸€ä¸‹ï¼</p><p>çœ‹èµ·æ¥æ˜¯åªå›´ç»•d2tè¿™ä¸ªlossçš„ä¼˜åŒ–ã€‚</p><p><strong>ç–‘é—®ï¼š</strong>è¿™é‡Œæåˆ°çš„particle filter optimizationï¼ˆPFOï¼‰ã€Particle Swarm Templateï¼ˆPSTï¼‰ç­‰ä¼˜åŒ–æ–¹æ³•ä¸æ˜¯å¾ˆäº†è§£ã€‚</p><p><strong>å…³äºGOï¼š</strong>Gradient-based pose optimization</p><p>å’ŒNICE-SLAMã€Co-SLAMç­‰æ–¹æ³•ä¸€æ ·ï¼Œå¾ˆä¼ ç»Ÿçš„ä¼˜åŒ–æ–¹æ³•</p><p>æ ¹æ®å…¬å¼17ï¼Œæ˜¯å›´ç»•d2t+rgbçš„lossä¼˜åŒ–ï¼Œè€Œä¸”æœ‰æƒé‡</p><h3 id="Mapping-of-the-Active-Submap"><a href="#Mapping-of-the-Active-Submap" class="headerlink" title="Mapping of the Active Submap"></a>Mapping of the Active Submap</h3><p>Submap allocationè¿™é‡Œæåˆ°â€œthe far clipping plane is set to 5mâ€ï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘è§‰å¾—å¯èƒ½æ¯”è¾ƒé€‚åˆå®¤å†…åœºæ™¯ï¼Œè€Œä¸”åé¢ä¹Ÿè¯´subvolumeçš„ä»»æ„ä¸€è¾¹è¾¾åˆ°7mçš„æ—¶å€™ï¼Œå°±ä¼šåœæ­¢æ‰©å±•ï¼Œé‚£åº”è¯¥å°±ä¼šå¼€å§‹å‡†å¤‡å¼€å¯æ–°çš„submapäº†ã€‚</p><p>Submap initializationè¿™é‡Œæåˆ°åˆ›å»ºæ–°çš„submapçš„è¯ï¼Œä¼šä½¿ç”¨å…±äº«çš„é‚£ä¸ªå…³é”®å¸§è¿­ä»£500è½®ã€‚</p><blockquote><p>ç”±äºè¿™é‡Œæ¯•ç«Ÿæ˜¯TSDF MLP+NeRF MLPçš„å½¢å¼ï¼Œæ‰€ä»¥å¿…é¡»è¿­ä»£äº†</p><p>å¦‚æœæ˜¯point slamæˆ–è€…3dgs basedçš„æ–¹æ³•ï¼Œæˆ‘è®¤ä¸ºå®Œå…¨å¯ä»¥ç”¨è¿™ä¸ªå…³é”®å¸§å¯¹åº”çš„ç‚¹äº‘</p></blockquote><p>Keyframe selectionçš„é€‰æ‹©æ ‡å‡†æ˜¯information gain of a frameã€‚åœ¨è®ºæ–‡æ‰€ä½¿ç”¨çš„æ–¹æ³•ä¸‹ï¼ŒåŸºäºdepth-to-TSDF losså°±å¯ä»¥è¿›è¡Œè¿‡æ»¤äº†ã€‚ç›´æ¥çœ‹åƒç´ çš„æ¯”ä¾‹ï¼Œå¦‚æœè¯¯å·®å°çš„æ¯”ä¾‹ä½äºæŸä¸ªé˜ˆå€¼ï¼Œå°±è®¤ä¸ºå¯ä»¥ä½œä¸ºæ–°çš„å…³é”®å¸§äº†ã€‚è®ºæ–‡è¿™é‡Œè¿˜è§„å®šäº†ä¸¤ä¸ªå…³é”®å¸§çš„æœ€å°é—´è·ä¸º30å¸§ã€‚</p><blockquote><p>æ”¾åˆ°3dgsé‡Œé¢çš„è¯ï¼Œæˆ‘å¯ä»¥åšä¸é€æ˜åº¦maskï¼Œçœ‹çœ‹maskæ‰äº†å¤šå°‘åŒºåŸŸï¼Œç„¶åé€‰æ‹©ä¸€ä¸‹ï¼›</p><p>å¦å¤–ï¼Œä¹Ÿå¯ä»¥çœ‹è§†è§’å˜æ¢çš„å¹…åº¦ï¼Œæ¯”å¦‚å³ä½¿æ²¡æœ‰maskçš„åŒºåŸŸï¼Œè§†è§’å˜åŒ–å¤§ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå…³é”®å¸§ã€‚</p></blockquote><p>Active submap optimizationè¿™é‡Œæåˆ°æ¯ä¸ªå¸§çš„ä¼˜åŒ–åŒ…æ‹¬5ä¸ªä¸åŒçš„å¸§ï¼ŒåŒ…æ‹¬ï¼šå½“å‰å¸§ã€submapç¬¬ä¸€ä¸ªå…³é”®å¸§ã€éšæœºé€‰æ‹©çš„å¦å¤–ä¸‰ä¸ªå…³é”®å¸§ã€‚</p><p>æ ¹æ®ä¸‹é¢çš„æŸå¤±å‡½æ•°ï¼Œçœ‹èµ·æ¥poseå’Œd2tã€rgbå…³è”æ¯”è¾ƒå¤§ï¼Œè€Œmappingæ›´å…³å¿ƒträ¸fsã€‚</p><img src="/images/paper-reading-MIPS-Fusion/image-20240411195438087.png" style="zoom:67%;"><h3 id="Back-end-Optimization-and-Loop-Closure"><a href="#Back-end-Optimization-and-Loop-Closure" class="headerlink" title="Back-end Optimization and Loop Closure"></a>Back-end Optimization and Loop Closure</h3><p>å¼€å¤´æåˆ°è¿™ä¸ªå·¥ä½œåˆ†æˆä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªæ˜¯tracking and mapping activate submapçš„ï¼Œä¸€ä¸ªæ˜¯refinement inactive submapçš„ã€‚</p><p>Optimization of inactive submapsè¿™é‡Œè¯´ï¼ŒæŒ‰é¡ºåºé‡å¤ä¼˜åŒ–æ¯ä¸€ä¸ªinactive submapï¼Œå¯¹äºæ¯ä¸€ä¸ªæ­£åœ¨ä¼˜åŒ–çš„submapï¼Œä»ä¸­éšæœºé€‰æ‹©å››ä¸ªå…³é”®å¸§+ç¬¬ä¸€å¸§è¿›è¡Œä¼˜åŒ–ï¼Œè¿­ä»£10æ¬¡ã€‚</p><blockquote><p>è¿™ä¸ªæ˜¯å› ä¸ºä¹‹å‰è¿½æ±‚æ•ˆç‡ä¼˜åŒ–çš„æ¯”è¾ƒå°‘ï¼Œæ‰€ä»¥å›å¤´å†ç»§ç»­ä¼˜åŒ–ä¼˜åŒ–å—ï¼Ÿ</p></blockquote><p>Handling pose jump at submap revisitingè¿™é‡Œè¯´ï¼Œå½“ç›¸æœºç§»åŠ¨åˆ°inactive submapçš„subvolumeä¸­æ—¶ï¼Œè¿™ä¸ªinactive submapä¼šè¢«æ¿€æ´»ã€‚ä¸ºäº†é¿å…ä½å§¿æ¼‚ç§»å’Œé”™ä½ï¼Œå…ˆç”¨è¿™ä¸ªé‡å å…³é”®å¸§å’Œå…¶ä»–å…³é”®å¸§å¯¹æ–°æ¿€æ´»çš„submapè¿›è¡Œlocal BAï¼Œç„¶åå†å¼€å§‹æ–°çš„trackingã€‚</p><blockquote><p>è¿™ä¸å°±ï¼Œé˜»å¡ä½äº†ï¼Ÿä¸ä¼šå½±å“åç»­å¸§çš„trackingå˜›ï¼Ÿï¼Ÿï¼Ÿ</p><p>ä¸è¿‡ç°åœ¨çš„nerf based or 3dgs based slaméƒ½æ˜¯è¯»æ•°æ®é›†ï¼Œä¸å¤ªåœ¨ä¹å®æ—¶æ€§ï¼Œè¿™é‡Œé˜»å¡äº†è‚¯å®šä¹Ÿä¸ä¼šè¯´ã€‚ã€‚ã€‚è¯´åˆ°åº•è¿˜æ˜¯çœ‹ä¸ªå¹³å‡fpsï¼Œä¸­é—´é˜»å¡å‡ ä¸‹ä¸åœ¨ä¹ã€‚</p></blockquote><p>Loop detection and closureè¿™é‡Œè¯´è®ºæ–‡æ›´å…³å¿ƒsubmapçº§åˆ«çš„å›ç¯æ£€æµ‹ï¼Œå¹¶ä¸”ç›®å‰å®ç°çš„æ˜¯æ¶‰åŠè‡³å°‘å››ä¸ªsubmapçš„loopã€‚è®ºæ–‡è®¤ä¸ºä¸¤ä¸ªè¿ç»­å­åœ°å›¾ä¹‹é—´çš„æ¼‚ç§»é€šå¸¸éå¸¸å°ã€‚</p><blockquote><p>è®ºæ–‡çš„æ–¹æ³•è‚¯å®šåªèƒ½åšsubmapçº§åˆ«çš„loop closure</p><p><strong>ç–‘é—®ï¼šè¿™ä¸ªæ¶‰åŠè‡³å°‘å››ä¸ªsubmapçš„loopï¼Œæˆ–è®¸æŒ‡çš„æ˜¯å››ä¸ªä»¥ä¸Šsubmapçš„subvolumeé‡åˆçš„æ—¶å€™æ‰å›ç¯ä¸€æ¬¡ï¼Ÿï¼Ÿï¼Ÿä¹Ÿå¯èƒ½æ˜¯è¯´ç›¸æœºè½¨è¿¹è·¨è¶Šäº†è‡³å°‘å››ä¸ªä¸åŒå­åœ°å›¾ä¹‹åï¼Œæ‰å¼€å§‹æ£€æµ‹é—­ç¯ï¼Ÿï¼Ÿï¼Ÿ</strong></p></blockquote><h3 id="å®éªŒéƒ¨åˆ†"><a href="#å®éªŒéƒ¨åˆ†" class="headerlink" title="å®éªŒéƒ¨åˆ†"></a>å®éªŒéƒ¨åˆ†</h3><p>çœ‹è®ºæ–‡çš„æ¶ˆèå®éªŒï¼Œçœ‹èµ·æ¥ROã€SRã€LCå¯¹ç»“æœçš„å½±å“å¾ˆå¤§ã€‚å…¶ä¸­å¦‚æœæ²¡æœ‰SIã€SRã€LCï¼Œç”šè‡³å¯èƒ½ä¼šè·‘ä¸å®Œä¸€ä¸ªæ•°æ®é›†ã€‚</p><img src="/images/paper-reading-MIPS-Fusion/image-20240411205041142.png" style="zoom:80%;"><p>å¦å¤–å®éªŒä¹Ÿè¯æ˜äº†ROã€GOã€RO+GOçš„æ–¹æ³•ä¸­ï¼ŒRO+GOæ˜¯æœ€å¥½çš„ã€‚</p><p><strong>çœ‹äº†TUM RGBDæ•°æ®é›†çš„ç»“æœï¼Œè¿˜æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼š</strong>åœ¨å¸¸è§çš„ä¸‰ä¸ªæ•°æ®é›†ä¸Šï¼ŒMIPS-Fusionæ²¡æœ‰è¡¨ç°å‡ºéå¸¸äº®çœ¼çš„æ•ˆæœï¼Œå¯ä»¥ç†è§£ã€‚<strong>ä½†æ˜¯ï¼Œä¸ºä»€ä¹ˆä¸æ”¾ä¸€äº›å¤§åœºæ™¯ã€å¸¦å›ç¯çš„æ•°æ®é›†çš„ç»“æœå‘¢ï¼Ÿï¼Ÿï¼Ÿ</strong></p><img src="/images/paper-reading-MIPS-Fusion/image-20240411205441212.png" style="zoom:80%;"><p>ä¸è¿‡è¿™é‡Œå€’æ˜¯å±•ç¤ºäº†FastCaMo-Large datasetsçš„ä¸€äº›ç»“æœï¼Œå¯ä»¥çœ‹åˆ°è®ºæ–‡æ–¹æ³•çš„ä¼˜è¶Šæ€§</p><img src="/images/paper-reading-MIPS-Fusion/image-20240411210338298.png" style="zoom:80%;">]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ7ï¼‰ï¼šä»Point NeRFåˆ°Loopy SLAM</title>
      <link href="2024/04/02/nerf-slam-6/"/>
      <url>2024/04/02/nerf-slam-6/</url>
      
        <content type="html"><![CDATA[<h1 id="NeRF-based-SLAMå­¦ä¹ ç¬”è®°ï¼ˆ7ï¼‰ï¼šä»Point-NeRFåˆ°Loopy-SLAM"><a href="#NeRF-based-SLAMå­¦ä¹ ç¬”è®°ï¼ˆ7ï¼‰ï¼šä»Point-NeRFåˆ°Loopy-SLAM" class="headerlink" title="NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ7ï¼‰ï¼šä»Point NeRFåˆ°Loopy SLAM"></a>NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ7ï¼‰ï¼šä»Point NeRFåˆ°Loopy SLAM</h1><h2 id="Point-NeRF"><a href="#Point-NeRF" class="headerlink" title="Point NeRF"></a>Point NeRF</h2><h3 id="System-Overview"><a href="#System-Overview" class="headerlink" title="System Overview"></a>System Overview</h3><img src="/images/nerf-slam-6/image-20240402145508974.png" style="zoom:67%;"><h3 id="åœºæ™¯è¡¨å¾"><a href="#åœºæ™¯è¡¨å¾" class="headerlink" title="åœºæ™¯è¡¨å¾"></a>åœºæ™¯è¡¨å¾</h3><p>ä½¿ç”¨neural point cloudè¡¨ç¤ºåœºæ™¯<br>$$<br>P = {(p_i, f_i, r_i)|i = 1,â€¦,N}<br>$$<br>pè¡¨ç¤ºåæ ‡ï¼Œfæ˜¯feature vectorï¼Œræ˜¯scale confidence valueï¼Œè¡¨ç¤ºä½äºå®é™…åœºæ™¯è¡¨é¢é™„è¿‘çš„å¯èƒ½æ€§ã€‚</p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><img src="/images/nerf-slam-6/image-20231220204200344.png" style="zoom:67%;"><img src="/images/nerf-slam-6/image-20231220164344891.png" style="zoom:67%;"><img src="/images/nerf-slam-6/image-20231220164600991.png" style="zoom:67%;"><p><strong>é—®é¢˜ï¼š</strong></p><ul><li><p>æŸ¥è¯¢MLPçš„æ¬¡æ•°å’ŒåŸç‰ˆNeRFå·®ä¸å¤šï¼Œæ‹–æ…¢äº†æ¸²æŸ“é€Ÿåº¦ï¼›</p><p>æ¯”å¦‚ï¼Œè¿™é‡Œå¯ä»¥ç”¨ä¸ŠSNeRG[20] Baking Neural Radiance Fields for Real-Time View Synthesis. ICCV 2021. è¿™æ ·çš„å»¶è¿Ÿæ¸²æŸ“æ¨¡å‹æ¥åŠ é€Ÿï¼ŒæŠŠä¸€æ¡å°„çº¿ä¸Šçš„é‡‡æ ·ç‚¹çš„ç‰¹å¾èåˆä¹‹åå†æ‹¿å»è§£ç ï¼Œä»è€Œå‡å°‘MLPæŸ¥è¯¢æ¬¡æ•°ï¼›</p></li><li><p>ç‚¹äº‘å¯†åº¦å’Œæ¸²æŸ“è´¨é‡ä¹‹é—´éœ€è¦å¹³è¡¡ï¼›</p><ul><li>ç‚¹äº‘å¯†åº¦é«˜ï¼Œæ˜¾å­˜å ç”¨å¢åŠ </li><li>é™ä½ç‚¹äº‘å¯†åº¦ï¼Œä¼šé™ä½æ¸²æŸ“è´¨é‡</li></ul><p>å°æ¨¡å‹è¿™æ ·çš„é—®é¢˜ä¸æ˜æ˜¾ï¼Œä½†æ˜¯åœºæ™¯æ‰©å¤§å°±æœ‰é—®é¢˜äº†ï¼›</p></li></ul><h2 id="Point-SLAM"><a href="#Point-SLAM" class="headerlink" title="Point SLAM"></a>Point SLAM</h2><h3 id="System-Overview-1"><a href="#System-Overview-1" class="headerlink" title="System Overview"></a>System Overview</h3><img src="/images/nerf-slam-6/image-20240409142122665.png" style="zoom: 67%;"><h3 id="åœºæ™¯è¡¨ç¤º"><a href="#åœºæ™¯è¡¨ç¤º" class="headerlink" title="åœºæ™¯è¡¨ç¤º"></a>åœºæ™¯è¡¨ç¤º</h3><img src="/images/nerf-slam-6/image-20240409143848241.png" style="zoom:67%;"><p>ä¸€ç³»åˆ—çš„ç‚¹äº‘ï¼Œæ¯ä¸ªç‚¹åŒ…æ‹¬ï¼šä½ç½®ã€geometricç‰¹å¾å‘é‡ã€colorç‰¹å¾å‘é‡</p><h3 id="Point-Adding-Strategy"><a href="#Point-Adding-Strategy" class="headerlink" title="Point Adding Strategy"></a>Point Adding Strategy</h3><ol><li><strong>é‡‡æ ·é˜¶æ®µ</strong>ï¼š<ul><li>å¯¹äºæ¯ä¸ªæ˜ å°„é˜¶æ®µå’Œç»™å®šçš„ä¼°è®¡ç›¸æœºå§¿æ€ï¼Œä»å›¾åƒå¹³é¢å‡åŒ€é‡‡æ ·Xä¸ªåƒç´ å’Œåœ¨å…·æœ‰æœ€é«˜é¢œè‰²æ¢¯åº¦å¹…åº¦çš„å‰10Yä¸ªåƒç´ ä¸­é‡‡æ ·Yä¸ªåƒç´ ã€‚</li></ul></li><li><strong>åƒç´ è½¬æ¢åˆ°3Dç©ºé—´</strong>ï¼š<ul><li>åˆ©ç”¨å¯ç”¨çš„æ·±åº¦ä¿¡æ¯ï¼Œå°†è¿™äº›åƒç´ è½¬æ¢åˆ°ä¸‰ç»´ç©ºé—´ã€‚åœ¨ä¸‰ç»´ç©ºé—´ä¸­æœç´¢åŠå¾„ä¸ºrå†…çš„é‚»å±…ç‚¹ã€‚</li></ul></li><li><strong>ç‚¹çš„æ·»åŠ </strong>ï¼š<ul><li>å¦‚æœåœ¨æœç´¢åŠå¾„rå†…æ²¡æœ‰æ‰¾åˆ°é‚»å±…ç‚¹ï¼Œåˆ™æ²¿ç€å…‰çº¿æ·»åŠ ä¸‰ä¸ªç¥ç»ç‚¹ã€‚è¿™äº›ç‚¹ä»¥æ·±åº¦è¯»æ•°Dä¸ºä¸­å¿ƒï¼Œå¹¶ä¸”åç§»é‡åˆ†åˆ«ä¸º(1 âˆ’ Ï)Då’Œ(1 + Ï)Dï¼Œå…¶ä¸­Ï âˆˆ (0, 1)æ˜¯ä¸€ä¸ªè¶…å‚æ•°ï¼Œç”¨äºè€ƒè™‘æœŸæœ›æ·±åº¦å™ªå£°ã€‚</li></ul></li><li><strong>åˆå§‹åŒ–</strong>ï¼š<ul><li>ä½¿ç”¨ç‰¹å¾å‘é‡çš„æ­£æ€åˆ†å¸ƒåˆå§‹åŒ–è¿™äº›ç‚¹ã€‚è¿™ä¸‰ä¸ªç‚¹ä½œä¸ºæœ‰é™çš„æ›´æ–°å¸¦ï¼Œå…¶æ·±åº¦ä¾èµ–æ€§å¯ç”¨äºå»ºæ¨¡æ·±åº¦ç›¸æœºçš„å¸¸è§å™ªå£°ç‰¹æ€§ã€‚</li></ul></li><li><strong>ç‚¹äº‘çš„å¢é•¿å’Œæ”¶æ•›</strong>ï¼š<ul><li>éšç€å¤„ç†æ›´å¤šå¸§ï¼Œç¥ç»ç‚¹äº‘é€æ¸å¢é•¿ä»¥è¡¨ç¤ºåœºæ™¯çš„æ¢ç´¢ï¼Œä½†å½“ä¸å†è®¿é—®æ–°çš„åœºæ™¯éƒ¨åˆ†æ—¶ï¼Œå®ƒä¼šæ”¶æ•›åˆ°æœ‰é™çš„ç‚¹é›†ã€‚ä¸è®¸å¤šåŸºäºä½“ç´ çš„è¡¨ç¤ºä¸åŒï¼Œä¸éœ€è¦åœ¨é‡å»ºä¹‹å‰æŒ‡å®šä»»ä½•åœºæ™¯è¾¹ç•Œã€‚</li></ul></li></ol><p>è¯¥ç­–ç•¥çš„å…³é”®æ€æƒ³æ˜¯åœ¨SLAMè¿‡ç¨‹ä¸­æ ¹æ®å½“å‰ç›¸æœºå§¿æ€å’Œæ·±åº¦ä¿¡æ¯åŠ¨æ€åœ°æ·»åŠ ç‰¹å¾ç‚¹ï¼Œä»¥æ•è·åœºæ™¯ä¸­çš„é‡è¦ç»“æ„å¹¶é€‚åº”æ·±åº¦ç›¸æœºçš„å™ªå£°ã€‚è¿™ç§æ–¹æ³•å…è®¸åœ¨ä¸æå‰çŸ¥é“åœºæ™¯è¾¹ç•Œçš„æƒ…å†µä¸‹è¿›è¡Œå»ºå›¾ï¼Œå¹¶ä¸”å¯ä»¥åœ¨åœºæ™¯æ¢ç´¢è¿‡ç¨‹ä¸­åŠ¨æ€åœ°è°ƒæ•´ç‰¹å¾ç‚¹çš„åˆ†å¸ƒã€‚</p><h3 id="Dynamic-Resolution"><a href="#Dynamic-Resolution" class="headerlink" title="Dynamic Resolution"></a>Dynamic Resolution</h3><p>ç®€å•è¯´å°±æ˜¯æ¯ä¸ªåŒºåŸŸç‚¹çš„æ•°é‡ã€å¯†åº¦éƒ½æ˜¯åŠ¨æ€è°ƒæ•´çš„ã€‚è¿™æ ·å¯ä»¥åœ¨ä¿æŒå»ºå›¾ç²¾åº¦çš„åŒæ—¶ï¼ŒèŠ‚çœè®¡ç®—å’Œå†…å­˜èµ„æºã€‚</p><p>é¢œè‰²æ¢¯åº¦æ¯”è¾ƒå¤§çš„åœ°æ–¹ï¼Œå¯èƒ½ä¿¡æ¯æ¯”è¾ƒä¸°å¯Œï¼Œå°±éœ€è¦æ›´å¤§çš„ç‚¹å¯†åº¦ï¼ŒPoint Adding Strategyæ·»åŠ ç‚¹çš„åŠå¾„å°±å¯ä»¥è®¾ç½®çš„å°ä¸€äº›ï¼›</p><p>åè¿‡æ¥ï¼Œé¢œè‰²æ¢¯åº¦éå¸¸å°çš„åœ°æ–¹ï¼Œé‚£è¯´æ˜ä¿¡æ¯å¾ˆå°‘ï¼Œå¯ä»¥æ›´ä½çš„ç‚¹å¯†åº¦ï¼ŒPoint Adding Strategyæ·»åŠ ç‚¹çš„åŠå¾„å¯ä»¥æ›´å¤§ä¸€äº›ã€‚</p><img src="/images/nerf-slam-6/image-20240409150606209.png" style="zoom:67%;"><h3 id="Rendering"><a href="#Rendering" class="headerlink" title="Rendering"></a>Rendering</h3><p>å¦‚æœåƒç´ ç‚¹æœ‰è§‚æµ‹æ·±åº¦ï¼Œå°±åœ¨æ·±åº¦å‰åé‡‡æ ·5ä¸ªç‚¹ï¼ŒæŒ‰ç…§è·ç¦»è®¡ç®—æƒé‡ï¼›å¦‚æœæ²¡æœ‰è§‚æµ‹æ·±åº¦ï¼Œå°±é‡‡æ ·25ä¸ªç‚¹ï¼ŒæŒ‰ç…§å ç”¨ç‡è®¡ç®—æƒé‡ã€‚</p><p>å…¶ä»–çš„éƒ¨åˆ†æ¯”è¾ƒå¸¸è§ï¼Œè¿™é‡Œä¸è®°å½•ã€‚</p><h3 id="Mapping"><a href="#Mapping" class="headerlink" title="Mapping"></a>Mapping</h3><p>æŸå¤±å‡½æ•°å¾ˆç®€å•ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç»†èŠ‚ï¼Œå¯¹äºæ¯ä¸ªmapping phaseï¼Œé¦–å…ˆåªä½¿ç”¨æ·±åº¦è¿›è¡Œä¼˜åŒ–ï¼Œè®ºæ–‡è®¤ä¸ºè¿™æ ·å¯ä»¥æ›´å¥½çš„åˆå§‹åŒ–é¢œè‰²çš„ä¼˜åŒ–è¿‡ç¨‹ã€‚</p><blockquote><p>ä½†æ˜¯æœ€è¿‘ä¹Ÿæœ‰ç ”ç©¶æ·±åº¦å™ªå£°å¯¹é‡å»ºå½±å“çš„å·¥ä½œï¼Œè¿™é‡Œå°±å®Œå…¨ä¾èµ–æ·±åº¦äº†ã€‚</p><p>å¦‚æœç»™çš„æ·±åº¦è¯¯å·®æ¯”è¾ƒå¤§ï¼Œå¯èƒ½å¯¹é‡å»ºçš„ç»“æœæœ‰ä¸å°çš„å½±å“ã€‚</p></blockquote><h3 id="Tracking"><a href="#Tracking" class="headerlink" title="Tracking"></a>Tracking</h3><p>å’ŒNICE-SLAMçš„Trackingéå¸¸ç›¸ä¼¼ã€‚</p><h3 id="Exposure-Compensation"><a href="#Exposure-Compensation" class="headerlink" title="Exposure Compensation"></a>Exposure Compensation</h3><p>å±…ç„¶è¿˜æœ‰exposure MLPæ¥å¤„ç†ä¸åŒå¸§ä¹‹é—´æ›å…‰å˜åŒ–çš„é—®é¢˜ã€‚</p><h3 id="å®éªŒéƒ¨åˆ†"><a href="#å®éªŒéƒ¨åˆ†" class="headerlink" title="å®éªŒéƒ¨åˆ†"></a>å®éªŒéƒ¨åˆ†</h3><p>ä¸»è¦åœ¨Replicaã€TUM-RGBDå’ŒScanNetä¸Šé¢æµ‹è¯•ã€‚meshæ˜¯é€šè¿‡marching cubesç®—æ³•è·å–çš„ã€‚</p><p>æåˆ°äº†å¯¹äºmotion blurå’Œspecularitiesï¼ˆé•œé¢åå°„ï¼‰éå¸¸æ•æ„Ÿã€‚</p><h2 id="Loopy-SLAM"><a href="#Loopy-SLAM" class="headerlink" title="Loopy SLAM"></a>Loopy SLAM</h2><blockquote><p>è¿˜æ˜¯Point SLAMé‚£ä¸ªç»„åšçš„å·¥ä½œ</p></blockquote><h3 id="è®ºæ–‡çš„è´¡çŒ®"><a href="#è®ºæ–‡çš„è´¡çŒ®" class="headerlink" title="è®ºæ–‡çš„è´¡çŒ®"></a>è®ºæ–‡çš„è´¡çŒ®</h3><ul><li>æˆ‘ä»¬æå‡ºäº† Loopy-SLAMï¼Œè¿™æ˜¯ä¸€ç§å¯†é›†çš„ RGBD SLAM æ–¹æ³•ï¼Œå®ƒå°†ç¥ç»ç‰¹å¾é”šå®šåœ¨ç‚¹äº‘å­å›¾ä¸­ï¼Œè¿™äº›å­å›¾åœ¨åœºæ™¯æ¢ç´¢è¿‡ç¨‹ä¸­ä»¥æ•°æ®é©±åŠ¨çš„æ–¹å¼è¿­ä»£å¢é•¿ã€‚ æˆ‘ä»¬æ ¹æ®ç›¸æœºè¿åŠ¨åŠ¨æ€åˆ›å»ºå­å›¾ï¼Œå¹¶é€æ­¥åœ¨å­å›¾å…³é”®å¸§ä¹‹é—´æ„å»ºå§¿åŠ¿å›¾ã€‚ å…¨å±€ä½ç½®è¯†åˆ«ç”¨äºåœ¨çº¿æ£€æµ‹å¾ªç¯é—­åˆï¼Œå¹¶ç›´æ¥åœ¨åœºæ™¯è¡¨ç¤ºä¸Šé€šè¿‡ç®€å•æœ‰æ•ˆçš„åˆšæ€§æ ¡æ­£æ¥å…¨å±€å¯¹é½è½¨è¿¹å’Œå­å›¾ã€‚</li><li>æˆ‘ä»¬æå‡ºäº†ä¸€ç§ç›´æ¥å®ç°å¯†é›†ç¥ç» SLAM é—­ç¯çš„æ–¹æ³•ï¼Œä¸ä¹‹å‰çš„å·¥ä½œç›¸åï¼Œä¸éœ€è¦åœºæ™¯è¡¨ç¤ºçš„ä»»ä½•æ¢¯åº¦æ›´æ–°æˆ–é‡æ–°é›†æˆç­–ç•¥</li><li><strong>ä¼ ç»Ÿä¸Šï¼Œä¸¥æ ¼çš„å­å›¾é…å‡†å¯èƒ½ä¼šåœ¨é‡å åŒºåŸŸä¸­äº§ç”Ÿå¯è§çš„æ¥ç¼ã€‚</strong> æˆ‘ä»¬åŸºäºç¥ç»ç‚¹äº‘çš„æ–¹æ³•é¿å…äº†è¿™ç§æƒ…å†µï¼Œå¹¶ä¸”æˆ‘ä»¬åœ¨è½¨è¿¹æ•è·ç»“æŸæ—¶åº”ç”¨é¢œè‰²å’Œå‡ ä½•çš„ç‰¹å¾ç»†åŒ–ã€‚ æˆ‘ä»¬è¿›ä¸€æ­¥å¼•å…¥äº†é‡å åŒºåŸŸä¸­å­å›¾çš„ç‰¹å¾èåˆç­–ç•¥ï¼Œä»¥é¿å…è¿‡å¤šçš„å†…å­˜ä½¿ç”¨å¹¶æé«˜æ¸²æŸ“æ€§èƒ½ã€‚</li></ul><h3 id="è®ºæ–‡æåˆ°çš„è§‚ç‚¹"><a href="#è®ºæ–‡æåˆ°çš„è§‚ç‚¹" class="headerlink" title="è®ºæ–‡æåˆ°çš„è§‚ç‚¹"></a>è®ºæ–‡æåˆ°çš„è§‚ç‚¹</h3><ul><li><p>ä½œè€…è®¤ä¸ºSLAMå¯ä»¥åˆ†ä¸ºè€¦åˆçš„æ–¹æ³•å’Œè§£è€¦åˆçš„æ–¹æ³•ï¼Œå…¶ä¸­<strong>è€¦åˆçš„æ–¹æ³•æŒ‡çš„æ˜¯ä½¿ç”¨ç›¸åŒçš„åœºæ™¯è¡¨ç¤ºæ¥è¿›è¡Œtrackingå’Œmappingï¼Œè§£è€¦çš„æ–¹æ³•å¯¹æ¯ä¸ªä»»åŠ¡éƒ½ä½¿ç”¨ç‹¬ç«‹çš„æ¡†æ¶</strong>ã€‚</p><ul><li><p>ç›®å‰è§£è€¦çš„æ–¹æ³•èƒ½å¤Ÿå®ç°æ›´å¥½çš„è·Ÿè¸ªç²¾åº¦ï¼Œä½†æ˜¯ä¼šäº§ç”Ÿä¸æœŸæœ›çš„æ•°æ®å†—ä½™å’Œç‹¬ç«‹æ€§ï¼›</p></li><li><p>ä½œè€…è®¤ä¸ºtrackingå’Œmappingæ˜¯è€¦åˆçš„ä»»åŠ¡ï¼Œå¯ä»¥ç”¨ç›¸åŒçš„åœºæ™¯è¡¨ç¤ºï¼›</p></li></ul><blockquote><p>è¿™é‡Œä¸æ˜¯å¾ˆæ‡‚ï¼Œä½œè€…æåˆ°çš„è§£è€¦çš„æ–¹æ³•æˆ‘åˆšå¥½éƒ½æ²¡æœ‰å¥½å¥½çš„å»çœ‹è¿‡ï¼Œä¸è¿‡Orbeez-slamæ˜¯ä½¿ç”¨ä¼ ç»Ÿæ–¹æ³•trackingï¼Œå†ç”¨instant-ngpåšmappingçš„ã€‚</p><p>ä½œè€…å¼•ç”¨çš„è§£è€¦çš„æ–¹æ³•ï¼š</p><ul><li>Orbeez-slam</li><li>Newton: Neural view-centric mapping for on-the-fly large-scale slam.</li><li>NeRF-SLAM: Real-Time Dense Monocular SLAM with Neural Radiance Fields</li><li>Go-slam: Global optimization for consistent 3d instant reconstruction.</li></ul><p>ä½œè€…å¼•ç”¨çš„è€¦åˆçš„æ–¹æ³•ï¼š</p><ul><li>Eslam: Efficient dense slam system based on hybrid representation of signed distance fields</li><li>Point-slam: Dense neural point cloud-based slam.</li><li>iMAP: Implicit Mapping and Positioning in Real-Time.</li><li>Co-slam: Joint coordinate and sparse parametric encodings for neural real-time slam</li><li>Vox-fusion: Dense tracking and mapping with voxel-based neural implicit representation.</li><li>Nice-slam: Neural implicit scalable encoding for slam.</li></ul></blockquote></li><li><p><strong>è€¦åˆæ–¹æ³•ä¸­ï¼Œé™¤äº†MIPS_Fusionä¹‹å¤–ï¼Œå…¶ä»–æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯å®ç°çš„frame-to-model trackingï¼Œè¿™ä¼šå¯¼è‡´ä½å§¿å‡ºç°æ˜¾è‘—çš„æ¼‚ç§»ã€‚</strong></p></li><li><p><strong>è§£è€¦æ–¹æ³•éƒ½ä½¿ç”¨å¤šåˆ†è¾¨ç‡å“ˆå¸Œç½‘æ ¼ï¼Œè¿™æ ·ä¸å®¹æ˜“è¿›è¡Œåœ°å›¾æ ¡æ­£ã€‚è€ŒåŸºäºç‚¹çš„è¡¨ç¤ºæ–¹æ³•ç‰¹åˆ«é€‚åˆè¿›è¡Œåœ°å›¾æ ¡æ­£ã€‚</strong></p></li></ul><h3 id="å¯¹å…¶ä»–å›ç¯æ£€æµ‹æ–¹æ³•çš„è¯„ä»·"><a href="#å¯¹å…¶ä»–å›ç¯æ£€æµ‹æ–¹æ³•çš„è¯„ä»·" class="headerlink" title="å¯¹å…¶ä»–å›ç¯æ£€æµ‹æ–¹æ³•çš„è¯„ä»·"></a>å¯¹å…¶ä»–å›ç¯æ£€æµ‹æ–¹æ³•çš„è¯„ä»·</h3><p>ç•¥ï¼Œç›´æ¥çœ‹è®ºæ–‡çš„Loop Closure on Dense Maps.éƒ¨åˆ†</p><h3 id="System-Overview-2"><a href="#System-Overview-2" class="headerlink" title="System Overview"></a>System Overview</h3><img src="/images/nerf-slam-6/image-20240409193805630.png" style="zoom:67%;"><p>å¤§éƒ¨åˆ†æµç¨‹éƒ½å’ŒPoint SLAMä¸€æ ·ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯<strong>Keyframe Selection and Submap Initialization</strong>éƒ¨åˆ†ï¼šè®ºæ–‡è®¤ä¸ºè¿‡äºé¢‘ç¹çš„åˆ›å»ºå­å›¾ä¹Ÿä¼šå¢åŠ å§¿æ€æ¼‚ç§»ï¼Œå› æ­¤ä»–ä»¬æ²¡æœ‰ä½¿ç”¨å›ºå®šé—´éš”ç­‰æ–¹æ³•ï¼Œè€Œæ˜¯æ ¹æ®ç›¸æœºè¿åŠ¨å»åŠ¨æ€çš„åˆ›å»ºå…¨å±€å…³é”®å¸§ã€‚ç„¶åï¼Œåœ¨å­å›¾æ„å»ºå®Œæˆçš„æ—¶å€™è¿›è¡Œé—­ç¯æ£€æµ‹ã€‚</p><p>å¯¹äº<strong>Building Submaps Progressively</strong>éƒ¨åˆ†ï¼Œæåˆ°äº†å­å›¾çš„ç¬¬ä¸€å¸§ä½œä¸ºå…¨å±€å…³é”®å¸§ï¼Œä½†æ˜¯æ²¡æœ‰å…·ä½“è¯´æ˜å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ–°çš„å­å›¾ã€‚ã€‚ã€‚ä¸è¿‡Figure 2ä¸‹é¢çš„æè¿°å€’æ˜¯è¯´åˆ›å»ºæ–°çš„å…¨å±€å…³é”®å¸§çš„æ—¶å€™ï¼Œä¼šå¼€å§‹åˆå§‹åŒ–ä¸€ä¸ªæ–°å­å›¾ã€‚</p><blockquote><p>é‚£ä¼°è®¡è¿™ä¸ªç³»ç»Ÿçš„å…¨å±€å…³é”®å¸§ä¼šæŒºå°‘çš„ï¼Œä¸ç„¶å­å›¾ä¼šæ¯”è¾ƒå¤šã€‚ã€‚ã€‚</p></blockquote><h3 id="Loop-Closure-and-Refinement"><a href="#Loop-Closure-and-Refinement" class="headerlink" title="Loop Closure and Refinement"></a>Loop Closure and Refinement</h3><p>ä¸MIPS-Fusionç›¸æ¯”çš„è¯ï¼Œè¿™é‡Œçš„loop closureæ¯”è¾ƒåŠŸåˆ©ï¼Œæ¯æ¬¡å¼€å§‹æ–°çš„submapå°±æ£€æµ‹ä¸€æ¬¡å›ç¯ï¼ŒMIPS-Fusionæ˜¯å¼€å¯æ–°çš„submapä¹‹åï¼Œå¦‚æœå†å›åˆ°ä¹‹å‰submapçš„subvolumeä¸­æ‰ä¼šæ£€æµ‹ï¼Œè€Œä¸”è¿˜æœ‰é¢å¤–çš„æ¡ä»¶ã€‚</p><p><strong>Global Place Recognition</strong>    æ¯ä¸ªå…¨å±€å…³é”®å¸§éƒ½è¢«æ·»åŠ åˆ°Bowæ•°æ®åº“ä¸­ç”¨äºä½ç½®è¯†åˆ«ã€‚è¿™é‡Œè®ºæ–‡cueäº†ä¸€ä¸‹MIPS-Fusionï¼Œè®¤ä¸ºMIPS-Fusionè¿™ç§é€šè¿‡é‡å çš„submapå»æ£€æµ‹å›ç¯ï¼Œåªé€‚åˆè¾ƒå°æ¼‚ç§»çš„æ ¡æ­£ã€‚</p><blockquote><p>æœ‰ç‚¹åƒORB-SLAMçš„åšæ³•ï¼Œè¿™é‡Œæˆ‘éœ€è¦å†å¥½å¥½äº†è§£ä¸€ä¸‹</p><p>ä½†æ˜¯è¿™é‡Œå³ä½¿å…¨å±€ä½ç½®è¯†åˆ«åšå¾—å¾ˆå¥½ï¼Œè‡ªå·±ç”¨çš„è¿˜æ˜¯å­åœ°å›¾ï¼Œè€Œä¸”è¿˜æ˜¯æ¯æ¬¡å¼€å§‹æ–°çš„å­åœ°å›¾å°±æ£€æµ‹ä¸€æ¬¡å›ç¯ï¼ŒçœŸä¸ä¸€å®šèƒ½æ¯”è¿‡MIPS-Fusionå§ã€‚ã€‚ã€‚</p><p>è€Œä¸”åé¢çš„å®éªŒä¹Ÿæ²¡æœ‰å’Œäººå®¶MIPS-Fusionç”¨è¿‡çš„æ•°æ®é›†æ¯”è¾ƒã€‚ã€‚ã€‚</p></blockquote><p><strong>Pose Graph Optimization</strong>    ä¸‹é¢æ˜¯GPTçš„ä¸€ä¸ªæ€»ç»“</p><img src="/images/nerf-slam-6/image-20240412103921609.png" style="zoom: 80%;"><blockquote><p>è¿™éƒ¨åˆ†çœ‹ä¸å¤ªæ‡‚ï¼Œä»¥åå†å¥½å¥½ç ”ç©¶ä¸€ä¸‹å§ã€‚ã€‚ã€‚</p></blockquote><p><strong>Loop Edge Constraints</strong>    ä¸‹é¢ä¹Ÿæ˜¯GPTçš„ä¸€ä¸ªä»‹ç»</p><img src="/images/nerf-slam-6/image-20240412104304511.png"><p><strong>Feature Fusion and Refinement</strong>    åœ¨trackingç»“æŸä¹‹åæ‰ä¼šå¼€å§‹è¿æ¥æ‰€æœ‰å­å›¾æ¥æ„æˆä¸€ä¸ªå…¨å±€çš„ç¥ç»ç‚¹äº‘ï¼Œé¦–å…ˆæ˜¯è¿›è¡Œç‰¹å¾èåˆæ¥å‹ç¼©æ¨¡å‹ï¼Œç”±äºLoopy SLAMæ˜¯åŸºäºPoint SLAMçš„å·¥ä½œï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯feature point+decoderçš„ç»“æ„ï¼Œè¿™é‡Œè®ºæ–‡é€‰æ‹©çš„æ˜¯ç‰¹å¾èåˆä¹‹åå›ºå®šdecoderï¼Œç„¶åæŠŠcolor å’Œ geometry featureå†è¿›è¡Œä¸€ä¸ªä¼˜åŒ–ã€‚</p><h3 id="å®éªŒéƒ¨åˆ†-1"><a href="#å®éªŒéƒ¨åˆ†-1" class="headerlink" title="å®éªŒéƒ¨åˆ†"></a>å®éªŒéƒ¨åˆ†</h3><p>Replicaã€TUM-RGBDæ•°æ®é›†éƒ½ç”¨äº†ï¼Œä½†æ˜¯æ²¡æœ‰ä¸“é—¨å»æ‰¾é‚£ç§å¤§åœºæ™¯ã€å›ç¯çš„ã€‚</p><p>ä¸è¿‡è®ºæ–‡åœ¨ScanNetä¸Šåšäº†ä¸€äº›å®éªŒï¼Œå€’æ˜¯ä¹Ÿæœ‰è¯´æœåŠ›çš„è¯æ˜äº†è‡ªå·±çš„å›ç¯æ˜¯æœ‰æ•ˆæœçš„ã€‚</p><blockquote><p>ä½†æ˜¯æˆ‘æœ€è¿‘çœ‹çš„è¿™äº›åšå›ç¯æ£€æµ‹çš„è®ºæ–‡ï¼Œå®éªŒéƒ½åšçš„ä¸å¤ªå¤Ÿã€‚ã€‚</p><p>ä¸€æ–¹é¢ï¼Œåœ¨ç»å…¸çš„å‡ ä¸ªæ•°æ®é›†ä¸Šæ¯”è¾ƒè‡ªå·±çš„æ€§èƒ½ï¼›</p><p>å¦å¤–ä¸€æ–¹é¢ï¼Œåªåœ¨æŸä¸ªèƒ½ä½“ç°å›ç¯çš„æ•°æ®é›†ä¸Šè¯æ˜è‡ªå·±å›ç¯æœ‰æ•ˆæœã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§†è§‰SLAM </tag>
            
            <tag> NeRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ã€ŠESLAM Efficient Dense SLAM System Based on Hybrid Representation of Signed Distance Fieldsã€‹</title>
      <link href="2024/03/15/paper-reading-eslam/"/>
      <url>2024/03/15/paper-reading-eslam/</url>
      
        <content type="html"><![CDATA[<h1 id="è®ºæ–‡é˜…è¯»ã€ŠESLAM-Efficient-Dense-SLAM-System-Based-on-Hybrid-Representation-of-Signed-Distance-Fieldsã€‹"><a href="#è®ºæ–‡é˜…è¯»ã€ŠESLAM-Efficient-Dense-SLAM-System-Based-on-Hybrid-Representation-of-Signed-Distance-Fieldsã€‹" class="headerlink" title="è®ºæ–‡é˜…è¯»ã€ŠESLAM: Efficient Dense SLAM System Based on Hybrid Representation of Signed Distance Fieldsã€‹"></a>è®ºæ–‡é˜…è¯»ã€ŠESLAM: Efficient Dense SLAM System Based on Hybrid Representation of Signed Distance Fieldsã€‹</h1><p>å’Œco-slamåŒæ—¶æœŸçš„å·¥ä½œï¼Œä»–ä»¬éƒ½ä½¿ç”¨äº†TSDFæ¥è¡¨ç¤ºåœºæ™¯ã€‚</p><blockquote><p>ä¼¼ä¹E-SLAMä¸çŸ¥é“æœ‰co-slamï¼Œä½†æ˜¯co-slamçŸ¥é“E-SLAMã€‚</p></blockquote><p>å®£ç§°ï¼š</p><ul><li>æ¯”iMAPå’ŒNICE-SLAMå‡†ç¡®åº¦é«˜äº†50%</li><li>æ¯”ä»–ä»¬å¿«äº†10å€</li></ul><h3 id="System-Overview"><a href="#System-Overview" class="headerlink" title="System Overview"></a>System Overview</h3><img src="/images/paper-reading-eslam/image-20240303163742495.png" style="zoom:67%;"><h4 id="Axis-Aligned-Feature-Planes"><a href="#Axis-Aligned-Feature-Planes" class="headerlink" title="Axis-Aligned Feature Planes"></a>Axis-Aligned Feature Planes</h4><p>ä¸Šå›¾å·¦è¾¹æ˜¯ä»–ä»¬çš„<strong>Axis-Aligned Feature Planes</strong>ï¼Œä»–ä»¬å®£ç§°åŸºäºä½“ç´ ç½‘æ ¼çš„NeRFèƒ½å¿«é€Ÿæ”¶æ•›ï¼Œä½†æ˜¯å¯¹äºæ›´å¤§çš„åœºæ™¯è¡¨ç¤ºè¿˜æ˜¯æœ‰å›°éš¾çš„ï¼Œå†…å­˜æ¶ˆè€—ä¼šè¶Šæ¥è¶Šå¤§ã€‚è€Œä»–ä»¬è¿™ç§ä¸‰å¹³é¢ç»“æ„å¯ä»¥ç¯èŠ‚è¿™æ ·çš„é—®é¢˜ã€‚ä»–ä»¬åœ¨å‚ç›´è½´å¯¹é½çš„å¹³é¢ä¸Šå­˜å‚¨å’Œä¼˜åŒ–ç‰¹å¾ã€‚</p><p><strong>feature planeçš„ç»†èŠ‚ï¼š</strong></p><ul><li><p>coarse to fine</p></li><li><p>å•ç‹¬çš„feature planeè¡¨ç¤ºå‡ ä½•å’Œå¤–è§‚ã€‚è€ƒè™‘åˆ°å¤–è§‚ï¼ˆé¢œè‰²ï¼‰æ˜¯ç»å¸¸å˜åŒ–çš„ï¼Œè€Œå‡ ä½•ä½“æ¯”è¾ƒç¨³å®šï¼Œæ‰€ä»¥æŠŠå®ƒä»¬åˆ†å¼€è¡¨ç¤ºäº†ã€‚</p><blockquote><p>è¿™æ ·çš„è¯ï¼Œåˆå›åˆ°äº†iMAPçš„é—®é¢˜äº†ï¼Œå®¹æ˜“é—å¿˜ã€‚</p></blockquote></li></ul><p><strong>å¦‚ä½•è¿›è¡Œé‡‡æ ·ï¼š</strong></p><ul><li><p>å¯¹äºç©ºé—´ä¸­æŸä¸€ä¸ªç‚¹ï¼Œé€šè¿‡åŒçº¿æ€§æ’å€¼è·å–æ¯ä¸ªç‰¹å¾å¹³é¢ä¸Šçš„ç‰¹å¾</p></li><li><p>å¯¹äºå‡ ä½•å’Œé¢œè‰²ç‰¹å¾å¹³é¢ï¼Œéƒ½æ˜¯ï¼š</p><p>coarseå¹³é¢çš„ä¸‰ä¸ªç‰¹å¾å‘é‡æ±‚å’Œï¼Œfineå¹³é¢çš„ä¸‰ä¸ªç‰¹å¾å‘é‡æ±‚å’Œ</p><p>æœ€åï¼Œcoarseå’Œfineæ±‚å’Œçš„ç‰¹å¾å‘é‡æ‹¼æ¥åˆ°ä¸€èµ·ã€‚</p><blockquote><p>æ±‚å’Œæ˜¯ä¸æ˜¯å¤ªç®€å•äº†ï¼Ÿ</p></blockquote></li><li><p>é€šè¿‡ä¸¤å±‚çš„MLPè¿›è¡Œè§£ç ï¼Œæ‹¿åˆ°TSDFå’Œé¢œè‰²</p></li></ul><blockquote><p>æ ¹æ®ä¸Šé¢çš„è¯´æ³•ï¼Œæˆ‘çŒœæµ‹ç‰¹å¾å¹³é¢çš„åˆå§‹åŒ–ä¼šæ¯”è¾ƒé‡è¦ï¼Œä¹Ÿæ¯”è¾ƒéš¾å¤„ç†ï¼Œå®¹æ˜“å¯¼è‡´é”™è¯¯çš„é‡å»ºã€‚</p><p>åœ¨çœ‹E-SLAMè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°ä»–å¯¹äºç›¸æœºåæ²¡æœ‰è§‚æµ‹åˆ°çš„çš„éƒ¨åˆ†ï¼Œä¼šç»™é‡å»ºæˆç›¸æœºå‰è§‚å¯Ÿåˆ°çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚å±•ç¤ºåœ¨replicaæ•°æ®é›†ä¸­é‡å»ºç»“æœæ—¶ï¼š</p><img src="/images/paper-reading-eslam/image-20240303165343425.png" style="zoom:67%;"></blockquote><h4 id="SDF-Based-Volume-Rendering"><a href="#SDF-Based-Volume-Rendering" class="headerlink" title="SDF-Based Volume Rendering"></a>SDF-Based Volume Rendering</h4><p>ä¸NICE-SLAMå‡ ä¹ä¸€è‡´çš„æµç¨‹ï¼Œä¸è¿‡è€ƒè™‘åˆ°äº†æŸäº›åƒç´ ç‚¹ä¸ä¸€å®šæœ‰æ·±åº¦ä¿¡æ¯çš„æƒ…å†µï¼š</p><ul><li>é‡‡æ ·N_startç‚¹</li><li>å¯¹äºæœ‰æ·±åº¦ä¿¡æ¯çš„ï¼Œæ·±åº¦å‰åæˆªæ–­è·ç¦»Tå†…ï¼Œé‡‡æ ·N_impä¸ª</li><li>å¯¹äºæ²¡æœ‰æ·±åº¦ä¿¡æ¯çš„ï¼Œç±»ä¼¼iMAPç”¨N_startè®¡ç®—ä¸€ä¸ªæƒé‡å†é‡‡æ ·N_impä¸ª</li></ul><p>å¯¹äºTSDFå€¼ï¼ŒE-SLAMæ˜¯å°†å…¶å¤„ç†æˆäº†ä½“å¯†åº¦ï¼Œå†æ ¹æ®ä½“å¯†åº¦å»è®¡ç®—æƒé‡ç­‰ç­‰ï¼Œå…¶ä»–éƒ¨åˆ†å’ŒNICE-SLAMæ²¡æœ‰åŒºåˆ«ã€‚</p><blockquote><p>åœ¨çœ‹äº†co-slamä¹‹åå†æ¥çœ‹E-SLAMï¼Œå‘ç°E-SLAMåœ¨å¤„ç†TSDFçš„æ—¶å€™è¿˜æ˜¯å¤ªè¿‡äºä¿å®ˆäº†ã€‚</p><p>åœ¨E-SLAMä¸­ï¼Œæ˜¯å…ˆå°†TSDFå€¼è½¬æ¢æˆä½“å¯†åº¦ï¼Œå†æ ¹æ®ä½“æ¸²æŸ“çš„å…¬å¼å»è®¡ç®—æƒé‡ï¼Œè¿™æ ·è¿˜æ˜¯å¤ªéº»çƒ¦äº†ï¼›</p><p>è€Œco-slamä¸­ï¼Œæ˜¯ç›´æ¥é€šè¿‡sigmoid(tsdf)*sigmoid(-tsdf)æ‹¿åˆ°æƒé‡äº†ã€‚</p><p>ä¸ªäººè®¤ä¸ºï¼Œæ¯•ç«Ÿæˆ‘ä»¬æ˜¯åœ¨åšä¸€ä¸ªéšå¼ç¥ç»è¡¨ç¤ºçš„SLAMï¼Œè¿‡ç¨‹éƒ½æ˜¯å¯å­¦ä¹ çš„ï¼Œåœ¨æƒé‡è¿™ä¸ªéƒ¨åˆ†ï¼Œä¿è¯è¶Šæ¥è¿‘è¡¨é¢çš„ç‚¹æƒé‡è¶Šå¤§çš„è¶‹åŠ¿å°±è¡Œäº†ï¼Œå…¶ä»–çš„éƒ½æ˜¯å¯ä»¥å­¦ä¹ åˆ°çš„ã€‚</p></blockquote><h4 id="Loss-Functions"><a href="#Loss-Functions" class="headerlink" title="Loss Functions"></a>Loss Functions</h4><p>é™¤äº†å’ŒNICE-SLAMç›¸ä¼¼çš„é¢œè‰²ã€æ·±åº¦æŸå¤±å¤–ï¼Œç”±äºä½¿ç”¨äº†TSDFï¼Œå¯ä»¥è€ƒè™‘é‡‡æ ·ç‚¹çš„æŸå¤±ï¼š</p><p><strong>free space loss</strong>    é¼“åŠ±TSDFåœ¨free spaceä¸­å…·æœ‰1çš„æ•°å€¼ï¼Œåœ¨è¿™ä¸ªå…¬å¼ä¸­ï¼Œçœ‹èµ·æ¥æ˜¯é¼“åŠ±ç›¸æœºä¸­å¿ƒåˆ°ç‰©ä½“è¡¨é¢ä¹‹é—´è¢«é‡‡æ ·çš„ç‚¹åº”å½“TSDF=1</p><img src="/images/paper-reading-eslam/image-20240303172754222.png" style="zoom: 67%;"><p><strong>signed distance objective</strong>    çœ‹èµ·æ¥æ˜¯å¸Œæœ›é è¿‘ç‰©ä½“è¡¨é¢çš„é‚£äº›è¢«é‡‡æ ·çš„ç‚¹ï¼Œèƒ½å¤Ÿæ‹¥æœ‰æ­£ç¡®çš„SDFå€¼ã€‚</p><img src="/images/paper-reading-eslam/image-20240303173330015.png" style="zoom:67%;"><blockquote><p>æœ€ä¸­å¿ƒçš„å…¬å¼å«ä¹‰ä¸ºï¼š</p><p>é‡‡æ ·ç‚¹æ²¿å°„çº¿çš„æ·±åº¦ + tsdf * æˆªæ–­è·ç¦» - æ·±åº¦çœŸå€¼</p></blockquote><p>æ ¹æ®è·ç¦»ç‰©ä½“è¡¨é¢çš„è¿œè¿‘ï¼ŒE-SLAMæŠŠæ¥è¿‘ç‰©ä½“è¡¨é¢çš„ç‚¹åˆ†æˆäº†ä¸¤æ‰¹å»è®¡ç®—æŸå¤±ï¼ˆæ–¹ä¾¿ç”¨ä¸åŒçš„æƒé‡ï¼‰</p><img src="/images/paper-reading-eslam/image-20240303173527906.png" style="zoom:67%;"><h4 id="Mapping-and-Tracking"><a href="#Mapping-and-Tracking" class="headerlink" title="Mapping and Tracking"></a>Mapping and Tracking</h4><p>Mappingå’ŒNICE-SLAMå·®ä¸å¤šï¼Œç‰¹å¾å¹³é¢å’ŒMLPéƒ½æ˜¯éšæœºåˆå§‹åŒ–çš„ã€‚</p><p>Trackingçœ‹èµ·æ¥ä¹Ÿæ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„åœ°æ–¹ã€‚</p><h4 id="Experiments"><a href="#Experiments" class="headerlink" title="Experiments"></a>Experiments</h4><p>ä¸NICE-SLAMå’ŒiMAPæ¯”è¾ƒï¼Œæ•ˆæœç¡®å®å¥½ä¸€äº›</p><h4 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h4><p>è¿™éƒ¨åˆ†æåˆ°äº†<strong>E-SLAMæ¥å—å¹¶å¤„ç†é—å¿˜é—®é¢˜ï¼Œä»¥æ­¤æ¥æ¢å–æ›´å°çš„å†…å­˜å¼€é”€</strong>ã€‚E-SLAMåƒiMAPä¸€æ ·ï¼Œæ›´æ–°ç‰¹å¾ä¼šå½±å“ä¹‹å‰é‡å»ºçš„å‡ ä½•å½¢çŠ¶ï¼Œå› æ­¤è¿˜éœ€è¦ä¸æ–­åœ°å­¦ä¹ ä¹‹å‰çš„å…³é”®å¸§ã€‚å¦‚æœèƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°å¤„ç†é—å¿˜é—®é¢˜ï¼Œå¯ä»¥è¿›ä¸€æ­¥åŠ å¿«è¿è¡Œé€Ÿåº¦ã€‚</p><h4 id="Supplementary-Materials"><a href="#Supplementary-Materials" class="headerlink" title="Supplementary Materials"></a>Supplementary Materials</h4><p>è¿™é‡Œæåˆ°E-SLAMä½¿ç”¨marching cubesç®—æ³•è·å–meshï¼Œå¹¶ä¸”æ²¡æœ‰è¿›è¡Œä»»ä½•çš„åå¤„ç†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3DGS SLAMæ³›è¯»ï¼ˆä¸€ï¼‰</title>
      <link href="2024/03/06/paper-reading-3dgs-slam-1/"/>
      <url>2024/03/06/paper-reading-3dgs-slam-1/</url>
      
        <content type="html"><![CDATA[<h1 id="3DGS-SLAMæ³›è¯»ï¼ˆä¸€ï¼‰"><a href="#3DGS-SLAMæ³›è¯»ï¼ˆä¸€ï¼‰" class="headerlink" title="3DGS SLAMæ³›è¯»ï¼ˆä¸€ï¼‰"></a>3DGS SLAMæ³›è¯»ï¼ˆä¸€ï¼‰</h1><h2 id="GS-SLAM"><a href="#GS-SLAM" class="headerlink" title="GS-SLAM"></a>GS-SLAM</h2><p><strong>è´¡çŒ®ï¼š</strong></p><ul><li>ç¬¬ä¸€ä¸ª3Dé«˜æ–¯çš„ç¨ å¯†RGB-D SLAMæ–¹æ³•</li><li>è‡ªé€‚åº”3Dé«˜æ–¯æ‰©å±•ç­–ç•¥ï¼Œcoarse to fineçš„é€‰æ‹©å¯é çš„3Dé«˜æ–¯</li><li>8FPSçš„é€Ÿåº¦ï¼Œå¹³è¡¡æ•ˆç‡ä¸ç²¾åº¦</li></ul><p><strong>Overviewï¼š</strong></p><img src="/images/3dgs-slam-1/image-20240306193920492.png" style="zoom:67%;"><p><strong>åœºæ™¯è¡¨ç¤ºï¼š</strong></p><p>ä¸3dgsä¸€æ¨¡ä¸€æ ·çš„è¡¨ç¤ºæ–¹æ³•</p><img src="/images/3dgs-slam-1/image-20240315150752115.png" style="zoom:67%;"><p><strong>ä¸ªäººè§‚ç‚¹ï¼š</strong></p><p>åšçš„æ¯”è¾ƒç²—ç³™ï¼Œæ²¡æœ‰ç‰¹åˆ«äº®çœ¼çš„åœ°æ–¹ï¼Œæ„Ÿè§‰å°±æ˜¯æŒ‰ç…§ä¹‹å‰NeRF SLAMçš„æ€è·¯ï¼Œç®€å•çš„ç”¨3DGSåˆåšäº†ä¸€éã€‚ä¸è¿‡å¯ä»¥åŸºäºè¿™ç¯‡è®ºæ–‡ï¼Œäº†è§£ä¸€ä¸‹3DGS SLAMåº”è¯¥æ˜¯æ€ä¹ˆæ ·å»åšçš„ï¼Œè¿™ç¯‡è®ºæ–‡æ¯”è¾ƒå¥½ç†è§£ã€‚</p><p>å®éªŒéƒ¨åˆ†èƒ½çœ‹åˆ°å—ç›Šäº3DGSï¼Œæ¸²æŸ“åšå¾—å¾ˆå¥½ã€é€Ÿåº¦ä¹Ÿå¾ˆå¿«ï¼Œä½†æ˜¯è·Ÿè¸ªå’Œå»ºå›¾çš„ç²¾åº¦ä»¥åŠé€Ÿåº¦å´å’Œä¹‹å‰NeRF SLAMçš„æ–¹æ³•å´å·®è·ä¸å¤§ï¼ˆç”šè‡³ä¸å¦‚ESLAMå’ŒCOSLAMï¼‰ï¼Œè¿™é‡Œä¸ªäººæ„Ÿè§‰æ˜¯æœ‰é—®é¢˜çš„ã€‚</p><h2 id="Gaussian-SLAM"><a href="#Gaussian-SLAM" class="headerlink" title="Gaussian-SLAM"></a>Gaussian-SLAM</h2><p><strong>è´¡çŒ®ï¼š</strong></p><ul><li>3Dé«˜æ–¯è¡¨ç¤ºåœºæ™¯çš„RGB-D SLAMæ–¹æ³•</li><li>æ‰©å±•äº†Gaussian splattingï¼Œæ›´å¥½çš„ç¼–ç å‡ ä½•å½¢çŠ¶</li><li>é«˜æ–¯åˆ†å¸ƒçš„åœ¨çº¿å­¦ä¹ ç­–ç•¥ï¼Œå°†åœºæ™¯åˆ†æˆå¾ˆå¤šå­åœºæ™¯ï¼Œå¹¶ä¸”å¼•å…¥äº†seedingå’Œä¼˜åŒ–çš„ç­–ç•¥</li><li>é€šè¿‡æœ€å°åŒ–å…‰åº¦è¯¯å·®ï¼Œå®ç°äº†frame-to-modelçš„trackingï¼Œå¹¶ä¸”å’Œç°æœ‰çš„frame-to-frameçš„æ–¹æ³•ä½œäº†æ¯”è¾ƒ</li></ul><p><strong>Limitations of Gaussian Splatting for SLAMï¼š</strong></p><p>è¿™ç¯‡è®ºæ–‡è®²äº†Gaussian Splattingè¿ç”¨åˆ°SLAMç®—æ³•ä¸­çš„å±€é™æ€§ï¼Œä¸ªäººè®¤ä¸ºæ˜¯æ¯”è¾ƒå€¼å¾—å‚è€ƒçš„ã€‚è¿™é‡Œè®²äº†å‡ ç‚¹é—®é¢˜ï¼š</p><ul><li><p><strong>Seeding strategy for online SLAM</strong></p><p>åŸå§‹3DGSçš„è‡ªé€‚åº”å¯†åº¦æ§åˆ¶ç­–ç•¥æ˜¯iterative dynamic behaviorçš„ï¼Œå¯èƒ½ä¼šå¯¼è‡´mappingçš„è¿­ä»£å’Œè®¡ç®—æ—¶é—´å‘ç”Ÿå‰§çƒˆçš„å˜åŒ–ï¼Œè¿™ç§æ–¹å¼ä¸é€‚åˆSLAMã€‚</p><blockquote><p>å› ä¸ºSLAMæ—¢è¦å»ºå›¾åˆè¦è·Ÿè¸ªå§ï¼Œå¦‚æœå»ºå›¾æ—¶é—´è¿‡é•¿ï¼Œæˆ–è€…åœ°å›¾æ›´æ–°å¤ªå¤§ï¼Œä¼šå¯¹è·Ÿè¸ªé€ æˆå¾ˆä¸å¥½çš„å½±å“</p></blockquote></li><li><p><strong>Online optimization</strong></p><p>å¯¹äºè¾ƒé•¿çš„åºåˆ—æ¥è¯´ï¼Œåœ¨çº¿ä¼˜åŒ–æ‰€æœ‰å¸§å¤ªæ…¢äº†</p><blockquote><p>è¿™ä¸ªï¼Œå°±å¥½åƒsfmå’Œslam</p></blockquote></li><li><p><strong>Catastrophic forgetting in online optimization</strong></p><p>ä¸ºäº†é¿å…æ¯ä¸ªæ–°å¸§å¸¦æ¥åœ°å›¾çš„çº¿æ€§å¢é•¿ï¼Œä¸€ç§å€™é€‰çš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨å½“å‰å¸§å»ä¼˜åŒ–é«˜æ–¯åœºæ™¯è¡¨ç¤ºã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•ä¼šå¯¼è‡´ä¹‹å‰mapped viewsä¸¥é‡é€€åŒ–ã€‚</p><blockquote><p>è¿™é‡Œæˆ‘ä¸ç†è§£ï¼Œä¸ºä»€ä¹ˆä¼šå¯¼è‡´ä¹‹å‰ä¼˜åŒ–çš„ç»“æœä¸¥é‡é€€åŒ–ï¼Ÿ</p><p>æ˜¯å› ä¸ºå½“å‰å¸§å’Œå‰é¢çš„å¸§æœ‰é‡å¤çš„å†…å®¹ï¼Œè€Œè¿™ä¸ªå€™é€‰çš„æ–¹æ¡ˆåªè€ƒè™‘å½“å‰å¸§ï¼Œä¼˜åŒ–ä¹‹åçš„3Dé«˜æ–¯åªèƒ½å’Œå½“å‰å¸§â€œåˆå¾—æ¥â€ï¼Œè€Œå’Œä¹‹å‰çš„å¸§å°±â€œåˆä¸æ¥â€äº†ï¼Ÿ</p></blockquote></li><li><p><strong>Highly randomized solutions</strong></p><p>æåˆ°äº†splattingä¼˜åŒ–çš„ç»“æœé«˜åº¦ä¾èµ–äºé«˜æ–¯çš„åˆå§‹åŒ–ã€‚å¹¶ä¸”ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œä¼šå—åˆ°ç›¸é‚»é«˜æ–¯çš„å½±å“ï¼Œé«˜æ–¯å¯èƒ½ä¼šå‘ä¸åŒçš„æ–¹å‘å¢é•¿ã€‚</p><p>3Dé«˜æ–¯å›ºæœ‰çš„å¯¹ç§°æ€§å¯¼è‡´äº†ä¸å½±å“æŸå¤±å‡½æ•°ï¼ˆæŸå¤±ä¸å˜ï¼‰çš„æƒ…å†µä¸‹ï¼Œ3Dé«˜æ–¯çš„å‚æ•°å¯ä»¥è¢«æ”¹åŠ¨ï¼Œå°±æ˜¯è¯´å­˜åœ¨ä¸å”¯ä¸€çš„è§£ï¼Œè€Œè¿™ç§æƒ…å†µæ˜¯ä¼˜åŒ–è¿‡ç¨‹ä¸å¸Œæœ›å‡ºç°çš„ã€‚</p><blockquote><p>è¿™å¯èƒ½ä¼šå¯¼è‡´æœ‰æ—¶å€™ä¼˜åŒ–äº†ï¼ŒæŸå¤±å‡½æ•°æ²¡æœ‰è¢«æ”¹å˜ï¼Ÿ</p></blockquote></li><li><p><strong>Poor extrapolation capabilities</strong></p><p>é«˜æ–¯å‡½æ•°ç»å¸¸ä¸å—æ§åˆ¶çš„ç”Ÿé•¿åˆ°æœªè§‚å¯Ÿåˆ°çš„åŒºåŸŸã€‚åŸå§‹3DGSçš„æ–¹æ³•å› ä¸ºè‰¯å¥½çš„è§†å›¾è¦†ç›–ï¼Œå¯ä»¥çº¦æŸå¤§å¤šæ•°é«˜æ–¯æ¨¡å‹ï¼›ä½†æ˜¯ç¨€ç–è§†å›¾çš„SLAMä¸­ï¼Œæ–°è§†å›¾å¾€å¾€åŒ…å«ç”±äºå…ˆå‰çº¦æŸä¸è¶³çš„é«˜æ–¯æ¨¡å‹äº§ç”Ÿçš„ä¼ªå½±ï¼Œè¿™å¯¹äºmodel-based trackingå½±å“å¾ˆè‡´å‘½ã€‚</p><blockquote><p>å› ä¸ºå­˜åœ¨ä¼ªå½±ï¼Œä½¿ç”¨coloræˆ–è€…depthè®¡ç®—çš„æŸå¤±éƒ½ä¼šæœ‰ä¸€äº›å½±å“ï¼Ÿ</p></blockquote></li><li><p><strong>Limited geometric accuracy</strong></p><p>å•ç›®çš„æƒ…å†µä¸‹ï¼Œ3DGSä¸æ“…é•¿ç¼–ç ç²¾ç¡®çš„å‡ ä½•å½¢çŠ¶ã€‚</p></li></ul><blockquote><p>å…¶å®æ ¹æ®è¿™é‡Œæ‰€è®²çš„å‡ ä¸ªé—®é¢˜ï¼Œæˆ‘è®¤ä¸ºå¯¹äº3Dé«˜æ–¯æ¥è¯´ï¼ŒSLAMä¼¼ä¹æ˜¯è¿™æ ·çš„ä¸€ä¸ªé—®é¢˜ï¼šç¨€ç–è§†è§’ï¼ˆæˆ‘ä»¬å¯èƒ½ä¸ä¼šmappingæ¯ä¸€å¸§ï¼Œæ¯æ¬¡å¯¹äºæ–°çš„è§‚æµ‹åŒºåŸŸä¹Ÿéƒ½å¯ä»¥ç®—æ˜¯ç¨€ç–è§†è§’çš„ï¼‰ã€ä½å§¿æœªçŸ¥ï¼ˆéœ€è¦trackingæ¯ä¸€å¸§ï¼‰ã€åœ¨çº¿ï¼ˆæ•°æ®æ˜¯ä¸€å¸§ä¸€å¸§æ¥çš„ï¼Œä¸æ˜¯ä¸€æ¬¡æ€§ç»™åˆ°ä½çš„ï¼‰çš„é‡å»ºé—®é¢˜</p><p>å¦å¤–ï¼Œè¿™ç¯‡è®ºæ–‡æ˜¯æˆ‘è§è¿‡ï¼Œæå‡ºé—®é¢˜æœ€å¤šçš„è®ºæ–‡ã€‚</p></blockquote><p><strong>Overviewï¼š</strong></p><img src="/images/3dgs-slam-1/image-20240306205206830.png" style="zoom:67%;"><blockquote><p>çœ‹èµ·æ¥æ˜¯å€Ÿé‰´äº†ORB-SLAM3çš„æ€è·¯ï¼Œç”¨sub-mapçš„æ–¹å¼å»å°è¯•è§£å†³3DGSåœ¨SLAMä¸­çš„ä¸€äº›é—®é¢˜ã€‚</p></blockquote><p><strong>åœºæ™¯è¡¨ç¤ºï¼š</strong></p><p>çœ‹èµ·æ¥ä¹Ÿæ˜¯ç”¨çš„åŸç‰ˆçš„3dgsï¼Œæ²¡æœ‰åšä»€ä¹ˆæ”¹åŠ¨ï¼Ÿï¼Ÿï¼Ÿ</p><p><strong>å®éªŒéƒ¨åˆ†ï¼š</strong></p><img src="/images/3dgs-slam-1/image-20240306215736766.png" style="zoom:67%;"><blockquote><p>å®éªŒéƒ¨åˆ†å¾ˆæœ‰æ„æ€ï¼Œå±•ç¤ºäº†ä¸€ä¸ªæ¯”è¾ƒå…³é”®çš„é—®é¢˜ï¼š<strong>çº¯3DGSçš„trackingæ€§èƒ½ä¸å¥½ï¼ŒåŠ å…¥pre-mappedæ•ˆæœä¼šå¥½å¾ˆå¤š</strong></p><p>ä½†æ˜¯ä¹Ÿåæ˜ äº†ä¸€ä¸ªå’ŒGS-SLAMä¸€æ ·å­˜åœ¨çš„é—®é¢˜ï¼š<strong>Renderingçš„é€Ÿåº¦å¾ˆå¿«ï¼Œä½†Mappingçš„é€Ÿåº¦å¹¶ä¸å¿«</strong></p></blockquote><p><strong>ä¸ªäººè§‚ç‚¹ï¼š</strong></p><p>å¯¹äº3DGSåº”ç”¨åˆ°SLAMä¸­å¯èƒ½å­˜åœ¨çš„é—®é¢˜ï¼Œåšäº†ä¸€ä¸ªå¾ˆå¥½çš„ä»‹ç»ï¼Œå¾ˆæœ‰å‚è€ƒä»·å€¼ã€‚</p><p>å®éªŒä¸­ä½“ç°äº†ä¸¤ä¸ªå€¼å¾—å…³æ³¨çš„é—®é¢˜ï¼š</p><ul><li>çº¯ç²¹çš„ä¾é 3DGSçš„trackingï¼Œæ€§èƒ½ä¸å¥½ï¼Œä½†æ˜¯åŠ å…¥pre-mappedä¹‹åæ•ˆæœä¼šå¥½å¾ˆå¤šï¼›</li><li>ç›®å‰çš„3DGS SLAMï¼ŒRenderingé€Ÿåº¦éƒ½å¾ˆå¿«ï¼Œä½†æ˜¯Mappingå’ŒTrackingçš„é€Ÿåº¦æ™®éä¸ä¹‹å‰NeRF-SLAMçš„æ–¹æ³•å·®è·ä¸å¤§ã€‚</li></ul><h2 id="SplaTAM"><a href="#SplaTAM" class="headerlink" title="SplaTAM"></a>SplaTAM</h2><p><strong>è´¡çŒ®ï¼š</strong></p><p>SplaTAMè§£å†³äº†ä¹‹å‰åŸºäºè¾å°„åœºè¡¨ç¤ºçš„å±€é™æ€§ï¼ŒåŒ…æ‹¬ï¼šå¿«é€Ÿæ¸²æŸ“å’Œä¼˜åŒ–ã€<strong>ç¡®å®šåŒºåŸŸå…ˆå‰æ˜¯å¦å·²å»ºå›¾çš„èƒ½åŠ›ã€é€šè¿‡æ·»åŠ æ›´å¤šé«˜æ–¯å‡½æ•°è¿›è¡Œç»“æ„åŒ–åœ°å›¾æ‰©å±•</strong>ã€‚</p><p><strong>å¯¹æ˜¾ç¤º3D Gaussianç”¨äºSLAMçš„ä¼˜ç‚¹åšäº†åˆ†æï¼š</strong></p><ul><li><p>Fast rendering and rich optimization</p><blockquote><p>èƒ½å¤Ÿå®æ—¶ä½¿ç”¨dense photometric lossè¿›è¡ŒSLAM</p></blockquote></li><li><p>å…·æœ‰æ˜ç¡®ç©ºé—´èŒƒå›´çš„åœ°å›¾ï¼Œå¯ä»¥è½»æ¾æ§åˆ¶ç°æœ‰åœ°å›¾çš„è¾¹ç•Œ</p><blockquote><p>ä½†æ˜¯æˆ‘è®¤ä¸ºå®ƒä¸»è¦æ˜¯å’Œç”¨MLPè¡¨ç¤ºåœºæ™¯çš„æ–¹æ³•ç›¸æ¯”ï¼Œè€Œfeature grid+mlpçš„æ–¹æ³•å…¶å®å·²ç»å¯ä»¥æ§åˆ¶åœ°å›¾çš„è¾¹ç•Œäº†ï¼Œä¸è¿‡ä¹Ÿæ²¡æœ‰3dgsè¿™ä¹ˆçµæ´»ã€‚</p></blockquote></li><li><p>æ˜¾ç¤ºçš„åœ°å›¾</p><blockquote><p>ç›®å‰æ¥çœ‹ï¼Œæ˜¾ç¤ºçš„åœ°å›¾æ›´å¥½ç¼–è¾‘å’Œå¢åŠ å®¹é‡</p></blockquote></li><li><p>åˆ°å‚æ•°çš„ç›´æ¥æ¢¯åº¦æµ</p><blockquote><p>ä¸å¤ªæ‡‚è¿™ä¸ªã€‚ã€‚ã€‚</p></blockquote></li></ul><p><strong>SLAM System</strong></p><img src="/images/3dgs-slam-1/image-20240315152612755.png" style="zoom:67%;"><img src="/images/3dgs-slam-1/image-20240315151501208.png" style="zoom:67%;"><ul><li><p><strong>Initialization</strong></p><img src="/images/3dgs-slam-1/image-20240315160040041.png" style="zoom:67%;"></li><li><p><strong>Tracking</strong></p><img src="/images/3dgs-slam-1/image-20240315160108994.png" style="zoom:67%;"><img src="/images/3dgs-slam-1/image-20240315160120508.png" style="zoom:67%;"></li><li><p><strong>Gaussian Densification</strong></p><img src="/images/3dgs-slam-1/image-20240315160207865.png" style="zoom:67%;"></li><li><p><strong>Gaussian Map Updating</strong></p><img src="/images/3dgs-slam-1/image-20240315160237644.png" style="zoom:67%;"></li></ul><p><strong>åœºæ™¯è¡¨ç¤ºï¼š</strong></p><p>ä¸åŸå§‹çš„3dgsç›¸æ¯”ï¼Œä½¿ç”¨äº†ä¸è§†å›¾æ— å…³çš„é¢œè‰²ï¼Œå¼ºåˆ¶é«˜æ–¯åˆ†å¸ƒä¸ºå„å‘åŒæ€§ã€‚</p><blockquote><p>ä¸è§†å›¾æ— å…³çš„é¢œè‰²æŒ‡çš„æ˜¯æ²¡æœ‰ç”¨çƒè°å‡½æ•°äº†ï¼Ÿï¼Ÿï¼Ÿä»è®ºæ–‡çš„è¯´æ³•çœ‹ç¡®å®æ˜¯è¿™æ ·çš„</p></blockquote><p>æ¯ä¸ªé«˜æ–¯å¯¹åº”äº†8ä¸ªå€¼ï¼šé¢œè‰²Rã€Gã€Bï¼Œä¸­å¿ƒä½ç½®xã€yã€zï¼ŒåŠå¾„rï¼Œä¸é€æ˜åº¦o</p><p><strong>å®éªŒéƒ¨åˆ†ï¼š</strong></p><p>è¿™é‡Œæˆ‘ä¸»è¦å…³æ³¨è€—æ—¶ï¼ŒSplaTAMå…¶å®å¹¶æ²¡æœ‰åœ¨Trackingå’ŒMappingçš„è€—æ—¶ä¸Šå½»åº•ä¼˜äºä¹‹å‰åŸºäºNeRFçš„SLAMæ–¹æ³•ï¼Œåªèƒ½è¯´åœ¨æ¸²æŸ“çš„é€Ÿç‡ä¸Šå¿«äº†å¾ˆå¤šã€‚</p><img src="/images/3dgs-slam-1/image-20240315160602090.png" style="zoom: 67%;"><p><strong>Limitations and Future Work</strong></p><img src="/images/3dgs-slam-1/image-20240315160722944.png" style="zoom:67%;"><p><strong>ä¸ªäººè§‚ç‚¹ï¼š</strong></p><p>æ„Ÿè§‰ä¸æ˜¯éå¸¸æœ‰ç‰¹è‰²ï¼Œå’Œå…¶ä»–3dgs slamç›¸æ¯”ï¼Œæœ€å¤§çš„ä¸åŒå¯èƒ½åªæ˜¯åœºæ™¯çš„è¡¨ç¤ºä¸ä¸€æ ·äº†ï¼Œæ”¾å¼ƒäº†çƒè°å‡½æ•°ï¼Œæ¯ä¸ª3dgséƒ½åªæœ‰8ä¸ªå‚æ•°ã€‚æœ‰ä¸€ä¸ªåšå£«è¯„ä»·è¿™ä¸ªå·¥ä½œæ‹¼å‡‘æ„Ÿå¤ªå¼ºã€‚</p><p>ä¸è¿‡è¿™ç¯‡è®ºæ–‡æ˜¯ç¬¬ä¸€ä¸ªå¼€æºçš„ï¼Œè€Œä¸”ä¹ŸæŠŠå·¥ä½œçš„æµç¨‹è®²çš„å¾ˆæ¸…æ¥šï¼Œå¯ä»¥æ‹¿æ¥å¥½å¥½å­¦ä¹ ã€‚</p><h2 id="Gaussian-Splatting-SLAM"><a href="#Gaussian-Splatting-SLAM" class="headerlink" title="Gaussian Splatting SLAM"></a>Gaussian Splatting SLAM</h2><p><strong>è´¡çŒ®ï¼š</strong></p><img src="/images/3dgs-slam-1/image-20240310145931259.png" style="zoom:67%;"><p><strong>è®ºæ–‡æåŠçš„ä¸€äº›è§‚ç‚¹ï¼š</strong></p><ul><li>NeRFè¿‘æœŸçš„å‘å±•éƒ½å¼•å…¥äº†æ˜¾ç¤ºçš„ä½“ç§¯ç»“æ„ï¼Œä»è¿™äº›å·¥ä½œä¸­å¯ä»¥æ¨æ–­å‡ºï¼š<strong>é«˜è´¨é‡æ–°è§†å›¾åˆæˆçš„å…³é”®ä¸æ˜¯ç¥ç»ç½‘ç»œï¼Œè€Œæ˜¯å¯å¾®åˆ†ä½“ç§¯æ¸²æŸ“</strong>ã€‚ä»¥Plenoxelsä¸ºä¾‹ï¼Œå¯ä»¥é¿å…ä½¿ç”¨MLPå°±å®ç°ä¸NeRFç›¸å½“çš„æ¸²æŸ“è´¨é‡ã€‚</li></ul><p><strong>åœºæ™¯è¡¨ç¤ºï¼š</strong></p><p>anisotropicï¼ˆå„å‘å¼‚æ€§ï¼‰çš„3DGSï¼Œä½†æ˜¯çœç•¥äº†çƒè°å‡½æ•°ç›¸å…³çš„éƒ¨åˆ†</p><img src="/images/3dgs-slam-1/image-20240319153804529.png" style="zoom: 67%;"><p><strong>éƒ¨åˆ†å…¬å¼æ¨å¯¼ã€ç†è§£</strong></p><img src="/images/3dgs-slam-1/image-20240320171441720.png" style="zoom: 67%;"><p>å…¬å¼3ï¼šå›é¡¾ã€Šè§†è§‰SLAMåå››è®²ã€‹ï¼Œå¯ä»¥æ¯”è¾ƒç®€å•çš„æ¨å¯¼å‡ºæ¥ã€‚ä½†æ˜¯å¯¹äºè¿™é‡Œé¢è¡¨ç¤ºåå¯¹ç§°çš„ç¬¦å·ä¸ºä»€ä¹ˆæœ‰ä¸¤ç§ï¼Œä¸ªäººä¸å¤ªç†è§£ã€‚</p><p>å…¬å¼4ï¼šæˆ‘å¥½åƒå¯¹é›…å¯æ¯”çŸ©é˜µç­‰å†…å®¹éå¸¸ä¸ç†Ÿæ‚‰ï¼Œè¿˜éœ€è¦å¥½å¥½äº†è§£ä¸€ä¸‹æ‰èƒ½ç»§ç»­å†™è¿™éƒ¨åˆ†ï¼ï¼ï¼</p><p><strong>System Overview</strong></p><img src="/images/3dgs-slam-1/image-20240320180342588.png" style="zoom:67%;"><p>Trackingéƒ¨åˆ†è¿˜æ˜¯è€æ ·å­çš„æ„Ÿè§‰ï¼Œæ¯•ç«Ÿæ— è®ºNeRF SLAMè¿˜æ˜¯3DGS SLAMåŸºæœ¬éƒ½æ˜¯ç”¨frame-to-modelä¼˜åŒ–ä½å§¿ï¼Œç©ä¸å‡ºæ–°èŠ±æ ·æ¥ã€‚</p><p>Keyframingæœ‰ç‚¹ä¼ ç»Ÿslamçš„æ„æ€äº†ï¼Œé€šè¿‡å…±è§†å…³ç³»é€‰æ‹©å…³é”®å¸§ï¼Œå¹¶ä¸”ä½¿ç”¨DSOçš„æ–¹å¼ç®¡ç†å…³é”®å¸§ã€‚åŒæ—¶3DGSä¹Ÿéµå¾ªå¯è§æ€§æ’åºï¼Œè€ƒè™‘Gaussian Covisibilityåˆè¿›ä¸€æ­¥ç®€åŒ–äº†å…³é”®å¸§çš„é€‰æ‹©ä¸ç®¡ç†ã€‚å¦å¤–ï¼Œçœ‹èµ·æ¥3DGSåœºæ™¯ä¹Ÿåªèƒ½ç”±keyframeå»åŠ å…¥ç‚¹ï¼ŒåŒæ—¶ä¹Ÿä¼šçœ‹è¿™äº›é«˜æ–¯å‡½æ•°æ˜¯å¦è¢«å…¶ä»–å…³é”®å¸§çœ‹åˆ°ï¼Œæ²¡çœ‹åˆ°å°±ä¼šè¢«ä¿®å‰ªæ‰ã€‚</p><blockquote><p>å…³é”®å¸§é€‰æ‹©å¯¹mono slamæ¥è¯´åº”è¯¥æ˜¯å¾ˆé‡è¦çš„ï¼Œå› ä¸ºåªæœ‰åªæœ‰multiple-view observationsæ‰èƒ½å¤Ÿå†³å®šåœºæ™¯çš„å‡ ä½•ç»“æ„ï¼</p></blockquote><p>Mappingéƒ¨åˆ†ä¹‹å‰çš„å·¥ä½œæˆ‘ä¹Ÿæ²¡å¥½å¥½äº†è§£ï¼Œä½†æ˜¯è¿™éƒ¨åˆ†å…¶å®æ‰æ˜¯3dgs slamä¸­æœ€é‡è¦çš„éƒ¨åˆ†ã€‚è¿™é‡Œè¯¦ç»†è®°å½•ä¸€ä¸‹ï¼š</p><ul><li><p>åŸºäºå…±è§†å…³ç³»é€‰æ‹©ä¸€ç³»åˆ—çš„å…³é”®å¸§ï¼Œç”¨äºä¼˜åŒ–å½“å‰çš„å¯è§åŒºåŸŸï¼›</p><p>å¦å¤–æ¯æ¬¡è¿­ä»£ä¼˜åŒ–éƒ½éšæœºé€‰æ‹©ä¸¤ä¸ªè¿‡å¾€å…³é”®å¸§ï¼Œé˜²æ­¢é—å¿˜å…¨å±€åœ°å›¾ã€‚</p><blockquote><p>3dgsè¿™ç§è¡¨ç¤ºä¸ºä»€ä¹ˆä¼šæ‹…å¿ƒé—å¿˜å…¨å±€åœ°å›¾å‘¢ï¼Ÿ</p><p>æœ€è¿‘åˆšå¥½è‡ªå·±å†™äº†ä¸€ä¸ªç®€å•çš„3dgs slamï¼Œä¸€å¸§è¿›æ¥ä¼˜åŒ–ä½å§¿ã€ä¼˜åŒ–åœºæ™¯ï¼Œè¿™ç§çš„æœ€åä¹Ÿå°±å­¦å‡ºæ¥äº†ä¸€ä¸ªå‡ ä½•ç»“æ„ï¼Œä½†æ˜¯é¢œè‰²ã€è§†å›¾å¾ˆå·®ï¼Œæˆ‘è¿™é‡Œç”¨çš„RGBå„16ç»´çš„çƒè°ç³»æ•°ï¼Œä¸è¿‡åœºæ™¯æ˜¯å„å‘åŒæ€§çš„3dgsï¼Œæˆ‘è®¤ä¸ºæ˜¯çƒè°å‡½æ•°è¢«å½±å“çš„é—®é¢˜ã€‚</p><p>ä½†æ˜¯æ”¾åˆ°è¿™é‡Œï¼Œmono GSæ”¾å¼ƒäº†çƒè°å‡½æ•°ï¼Œä½†æ˜¯é€‰æ‹©äº†å„å‘å¼‚æ€§çš„3dgsï¼Œä¼šä¸ä¼šæ˜¯å„å‘å¼‚æ€§çš„é—®é¢˜ï¼Ÿ</p></blockquote></li><li><p>å¼•å…¥äº†ä¸€ä¸ªå„å‘åŒæ€§æ­£åˆ™åŒ–ï¼Œå‡å°‘ä¼ªå½±ï¼Œæ–¹ä¾¿SLAMçš„tracking</p><blockquote><p>ä¸ºä»€ä¹ˆä¸å¹²è„†ç”¨å„å‘åŒæ€§çš„3dgså‘¢ï¼Ÿï¼Ÿï¼Ÿ</p></blockquote></li></ul><p><strong>å®éªŒéƒ¨åˆ†</strong></p><p>ç•¥ï¼Œæ‡’å¾—è®°äº†ï¼Œåˆ°æ—¶å€™ç›´æ¥çœ‹è®ºæ–‡ï¼</p><h2 id="Photo-SLAM"><a href="#Photo-SLAM" class="headerlink" title="Photo-SLAM"></a>Photo-SLAM</h2><p><strong>Motivationï¼š</strong>Our proposed Photo-SLAM seeks to recover a concise representation of the observed environment <strong>for immersive exploration rather than reconstructing a dense mesh</strong>.</p><p><strong>è´¡çŒ®ï¼š</strong></p><img src="/images/3dgs-slam-1/image-20240326153452403.png" style="zoom:67%;"><p><strong>Overviewï¼š</strong></p><img src="/images/3dgs-slam-1/image-20240326154856204.png" style="zoom: 80%;"><p>æ ¹æ®è®ºæ–‡çš„æè¿°ï¼Œphoto-SLAMåŒ…æ‹¬ï¼šlocalizationã€geometry mappingã€photorealistic mappingã€loop closureï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªç»„ä»¶éƒ½æœ‰ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ï¼Œè€Œä¸”ä»–ä»¬å…±åŒç»´æŠ¤äº†ä¸€ä¸ªhyper primitives mapã€‚</p><blockquote><p>ORB-SLAM3åˆ†ä¸ºtrackingã€local mappingã€loop and map mergingè¿™ä¸‰ä¸ªçº¿ç¨‹</p><p>ORB-SLAM2åˆ†ä¸ºtrackingã€local mappingã€loop closingè¿™ä¸‰ä¸ªçº¿ç¨‹</p><p>ä¸ªäººæ„Ÿè§‰photo slamæ˜¯åŸºäºorb slam2æˆ–3çš„å·¥ä½œï¼Œåœ¨ä¸Šé¢åŠ äº†ä¸€ä¸ª3DGSçš„photorealistic mappingçº¿ç¨‹ã€‚</p></blockquote><p><strong>Hyper Primitives Map</strong>ã€åœºæ™¯è¡¨å¾ã€‘</p><p>Hyper Primitivesç”±ä¸€ç³»åˆ—çš„ç‚¹äº‘ç»„æˆï¼Œè€Œè¿™äº›ç‚¹äº‘åŒ…æ‹¬äº†ï¼šORBç‰¹å¾ã€æ—‹è½¬ã€ç¼©æ”¾ã€å¯†åº¦ã€çƒè°ç³»æ•°</p><blockquote><p>point cloud: 3ç»´</p><p>ORB features: 256ç»´</p><p>rotation: 3ç»´, SO(3)</p><p>scaling: 3ç»´</p><p>density: 1ç»´</p><p>SH: 16ç»´</p><p>ä¸ªäººè§‚ç‚¹ï¼šåœ¨åŸå§‹çš„3DGSä¸ŠåŠ å…¥äº†ORBç‰¹å¾ï¼Œè€Œ3DGSç‚¹äº‘çš„æ·»åŠ æ¥è‡ªäºORB-SLAMäº§ç”Ÿçš„åœ°å›¾ç‚¹ï¼ˆORBç‰¹å¾ç‚¹ï¼‰ï¼Œ<strong>ORBç‰¹å¾ç”¨ä¼ ç»Ÿæ–¹æ³•å¾—åˆ°ï¼Œè€Œå…¶ä»–çš„éƒ½æ˜¯åŸæ±åŸå‘³çš„3DGS</strong></p><p>è¿™æ ·åšå¯¹äºä¼ ç»ŸSLAMæ–¹æ³•è€Œè¨€ï¼Œè¿˜æ˜¯éå¸¸è‡ªç„¶çš„ï¼Œä½†æ˜¯photorealistic mappingçœŸçš„èƒ½å¤Ÿå®æ—¶è¿è¡Œå—ï¼Ÿ</p></blockquote><p><strong>Localization and Geometry Mapping</strong></p><p>ä½œç”¨ï¼šå®æ—¶çš„ä½å§¿ä¼°è®¡ã€ç¨€ç–çš„3Dç‚¹äº‘ï¼Œåˆ›å»ºæ‰€è°“çš„Hyper Primitives</p><blockquote><p>æ„Ÿè§‰å¾ˆç»å…¸ï¼Œï¼Œï¼Œå…ˆä¸ä»”ç»†çœ‹ï¼Œåé¢å’ŒORB-SLAMæ¯”è¾ƒä¸€ä¸‹</p></blockquote><p><strong>Photorealisitc Mapping</strong></p><p>ä½œç”¨ï¼šè´Ÿè´£ä¼˜åŒ–geometry mapping threadçº¿ç¨‹åˆ›å»ºçš„Hyper Primitives</p><blockquote><p> è¿™éƒ¨åˆ†å°±æ”¾äº†ä¸ªæŸå¤±å‡½æ•°æ¬¸</p></blockquote><p><strong>Geometry-based Densification</strong></p><p>è¿™éƒ¨åˆ†è¯´ä¸ºäº†ä¿è¯å®æ—¶æ€§ï¼Œåªç”Ÿæˆäº†ç¨€ç–çš„Hyper Primitivesï¼Œåé¢è¿˜éœ€è¦è‡´å¯†åŒ–ã€‚ä»–ä»¬é¢å¤–è®¾è®¡äº†ä¸€ä¸ªåŸºäºå‡ ä½•ç»“æ„çš„è‡´å¯†åŒ–æ–¹æ³•ã€‚</p><p>ä»–ä»¬åšçš„å®éªŒè¡¨æ˜ï¼šåªæœ‰ä¸åˆ°30%çš„ç‰¹å¾ç‚¹æ˜¯activeçš„å¹¶ä¸”æœ‰å¯¹åº”çš„3Dç‚¹ã€‚è€Œä»–ä»¬è®¤ä¸º2Då‡ ä½•ç‰¹å¾ç‚¹çš„åˆ†å¸ƒè¡¨ç¤ºè¿™äº›åŒºåŸŸæœ‰æ›´å¤æ‚çš„çº¹ç†ï¼Œå› æ­¤éœ€è¦æ›´å¤šçš„Hyper Primitivesï¼Œä»–ä»¬ä¼šæŠŠinactiveçš„ç‰¹å¾ç‚¹ä¸»åŠ¨åˆ›å»ºæˆé¢å¤–çš„ä¸´æ—¶Hyper Primitivesã€‚</p><img src="/images/3dgs-slam-1/image-20240329154831969.png" style="zoom:80%;"><blockquote><p>è¿™ä¸ªä¹Ÿä¸å¤ªåƒæ˜¯åŸºäºå‡ ä½•ç»“æ„çš„è‡´å¯†åŒ–æ–¹æ³•ï¼Œæ„Ÿè§‰åšçš„å¾ˆç®€å•ã€‚</p><p>ä¸è¿‡æ€è·¯å¾ˆä¸é”™ï¼Œç‰¹å¾ç‚¹å¤šçš„åŒºåŸŸç¡®å®æ˜¯çº¹ç†å¤æ‚çš„åŒºåŸŸï¼Œä½†æ˜¯å¦‚æœæˆ‘æƒ³é‡å»ºåœºæ™¯çš„è¯ï¼Œç‰¹å¾ç‚¹å°‘çš„åŒºåŸŸã€çº¹ç†å¼±çš„åŒºåŸŸä¹Ÿæ˜¯å¾ˆé‡è¦çš„ï¼Œè¿™éƒ¨åˆ†åº”è¯¥æ€ä¹ˆå»å¤„ç†å‘¢ï¼Ÿ</p><p>æ˜¯ä¸æ˜¯å¯ä»¥ç‰¹å¾ç‚¹å¤šã€çº¹ç†ä¸°å¯Œçš„åŒºåŸŸåšä¸€ç§å¤„ç†æ–¹æ³•ï¼Œå¤šæ”¾å°çš„3DGSç‚¹ï¼›</p><p>åœ¨ç‰¹å¾ç‚¹å°‘ã€çº¹ç†å¼±çš„åŒºåŸŸå¦å¤–å¤„ç†ï¼Œæ¯”å¦‚æ”¾ä¸€äº›å¤§çš„3DGSç‚¹</p></blockquote><p><strong>Gaussian-Pyramid-Based Learning</strong></p><p><img src="/images/3dgs-slam-1/image-20240329154856803.png"></p><p>è®ºæ–‡åœ¨è¿™é‡Œä»‹ç»äº†ä¸€äº›Progressive trainingçš„æ–¹æ³•ï¼Œæ¯”å¦‚NSVFã€NVGOæ˜¯è®­ç»ƒä¸­é€æ­¥å¢åŠ ç‰¹å¾ç½‘æ ¼çš„åˆ†è¾¨ç‡ï¼Œè¾ƒä½åˆ†è¾¨ç‡çš„decoderç”¨æ¥åˆå§‹åŒ–è¾ƒé«˜åˆ†è¾¨ç‡çš„decoderï¼›NGLoDæ˜¯é€æ­¥è®­ç»ƒå¤šä¸ªMLPåšç¼–ç å™¨è§£ç å™¨ï¼Œæœ€ååªä¿ç•™æœ€ç»ˆçš„é‚£ä¸ªè§£ç å™¨ï¼›Neuralangeloæ˜¯åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­åªä¿æŒä¸€ä¸ªMLPï¼›BungeeNeRFæ˜¯ç”¨ä¸åŒæ¨¡å‹å¤„ç†ä¸åŒåˆ†è¾¨ç‡çš„å›¾åƒï¼Œç®—æ˜¯ä¸€ç§æ˜¾ç¤ºçš„æ–¹æ³•ã€‚</p><p>è®ºæ–‡æå‡ºçš„æ–¹æ³•æ˜¯åŸºäºé«˜æ–¯é‡‘å­—å¡”çš„å­¦ä¹ æ–¹æ³•ï¼Œåˆ†è¾¨ç‡é€æ¸å¢åŠ ã€‚</p><img src="/images/3dgs-slam-1/image-20240329154905950.png" style="zoom:67%;"><blockquote><p>çœ‹èµ·æ¥å…¶å®ä¹Ÿæ˜¯å¾ˆå¥½åœ°åˆ©ç”¨äº†ORB-SLAMæä¾›çš„ä¸€äº›ä¸œè¥¿</p></blockquote><p><strong>Loop Closure</strong></p><p>è®ºæ–‡è¿™é‡Œå†™çš„å¾ˆç®€æ´ï¼Œä¸ªäººè®¤ä¸ºå°±æ˜¯å¥—ç”¨ORB-SLAMçš„å›ç¯æ£€æµ‹ã€‚</p><p>è¿™é‡Œåªæ˜¯æåˆ°äº†æ£€æµ‹åˆ°é—­ç¯ä¹‹åï¼Œé€šè¿‡ç›¸ä¼¼å˜æ¢çŸ«æ­£å…³é”®å¸§å’ŒHyper Primitivesï¼Œç„¶åè¿˜éœ€è¦ä¼˜åŒ–æ¥æ¶ˆé™¤ä¸€äº›é‡å½±ã€‚</p><p><strong>å®éªŒéƒ¨åˆ†</strong></p><p>è®ºæ–‡æåˆ°Photo-SLAMæ˜¯ç”¨C++å’ŒCUDAå†™çš„ï¼Œä½¿ç”¨äº†ORB-SLAM3ã€3D Gaussian Splattingå’ŒLibTorchçš„æ¡†æ¶ã€‚</p><p>å®éªŒéƒ¨åˆ†ç•¥è¿‡ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ç–‘æƒ‘ï¼šæ—¢ç„¶è¯´äº†ç”¨äº†è‹±ä¼Ÿè¾¾çš„Jetsonå¹³å°ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰æŒ‡æ˜åˆ°åº•ç”¨çš„ä»€ä¹ˆå¹³å°ï¼Ÿè€Œä¸”çœ‹Table 1ï¼Œè¿™ç§æ–¹æ³•å³ä½¿åœ¨Jetsonä¸Šä¹Ÿéœ€è¦4GBçš„æ˜¾å­˜ï¼ŒLaptopä¹Ÿæ˜¯4GBï¼Œç„¶åæ¡Œé¢ç«¯æ˜¾å­˜éœ€è¦6GBã€‚è¿™ä¸ªJetsonè·‘çš„æ•ˆæœä¹Ÿè¿˜è¡Œï¼Œæ¸²æŸ“é€Ÿç‡ä¹Ÿæ˜¯100fpså·¦å³ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> 3D Gaussian Splatting </tag>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ6ï¼‰ï¼šå…³äºco-slamä¸­æåˆ°çš„one-blobç¼–ç </title>
      <link href="2024/03/01/nerf-slam-5/"/>
      <url>2024/03/01/nerf-slam-5/</url>
      
        <content type="html"><![CDATA[<h1 id="NeRF-based-SLAMå­¦ä¹ ç¬”è®°ï¼ˆ6ï¼‰ï¼šå…³äºco-slamä¸­æåˆ°çš„one-blobç¼–ç "><a href="#NeRF-based-SLAMå­¦ä¹ ç¬”è®°ï¼ˆ6ï¼‰ï¼šå…³äºco-slamä¸­æåˆ°çš„one-blobç¼–ç " class="headerlink" title="NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ6ï¼‰ï¼šå…³äºco-slamä¸­æåˆ°çš„one-blobç¼–ç "></a>NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ6ï¼‰ï¼šå…³äºco-slamä¸­æåˆ°çš„one-blobç¼–ç </h1><p><strong>one-blobç¼–ç å¯¹åº”çš„è®ºæ–‡é“¾æ¥ä¸ºï¼š</strong><a href="https://arxiv.org/pdf/1808.03856.pdf">https://arxiv.org/pdf/1808.03856.pdf</a></p><p><img src="/images/nerf-slam-5/image-20240301204831569.png"></p><p><strong>GPT4å¯¹one-blobç¼–ç çš„æ€»ç»“ï¼š</strong></p><p>ä»¥ä¸‹æ˜¯å¯¹ â€œone-blob encodingâ€ çš„ä¸€ä¸ªæ€»ç»“ï¼š</p><p>â€œOne-blob encodingâ€ æ˜¯ä¸€ç§è¿ç»­è¾“å…¥æ•°æ®çš„ç¼–ç æ–¹æ³•ï¼Œå®ƒæ˜¯ one-hot encoding çš„ä¸€ä¸ªæ³›åŒ–ã€‚åœ¨æ ‡å‡†çš„ one-hot encoding ä¸­ï¼Œä¸€ä¸ªåˆ†ç±»å˜é‡çš„æ¯ä¸ªå¯èƒ½å€¼éƒ½è¢«æ˜ å°„åˆ°ä¸€ä¸ªç‹¬ç«‹çš„ç»´åº¦ï¼Œå¹¶åœ¨ç›¸åº”ç»´åº¦çš„ä½ç½®æ ‡è®°ä¸º 1ï¼Œå…¶ä»–æ‰€æœ‰ä½ç½®éƒ½æ˜¯ 0ã€‚è¿™ç§ç¼–ç æ˜¯ç¦»æ•£çš„ã€æ— ä¸Šä¸‹æ–‡çš„ï¼Œå¹¶ä¸”å¾ˆâ€œå°–é”â€ï¼Œå› ä¸ºå®ƒä¸è¡¨è¾¾å€¼ä¹‹é—´çš„ä»»ä½•é‚»è¿‘å…³ç³»æˆ–è¿ç»­æ€§ã€‚</p><p>ä¸ä¹‹ç›¸å¯¹çš„ â€œone-blob encodingâ€ï¼Œåœ¨æŸä¸ªæ ‡é‡å€¼ s çš„ä½ç½®æ”¾ç½®ä¸€ä¸ª kernelâ€”â€”åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæ˜¯é«˜æ–¯æ ¸â€”â€”ç„¶åå°†è¿™ä¸ª kernel ç¦»æ•£åŒ–åˆ°ä¸€ä¸ªå•ä½åŒºé—´å†…çš„ k ä¸ª bin ä¸Šã€‚è¿™ç§æ–¹æ³•ä¸ä»…åœ¨ s å¯¹åº”çš„ bin ä¸Šæ¿€æ´»å€¼ï¼Œè¿˜æ ¹æ®é«˜æ–¯æ ¸çš„å½¢çŠ¶åœ¨ç›¸é‚»çš„ bin ä¸­äº§ç”Ÿè¾ƒå°çš„æ¿€æ´»ã€‚æ ‡å‡†å·® Ïƒ æ§åˆ¶äº†è¿™ç§æ¿€æ´»çš„æ‰©æ•£ç¨‹åº¦ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œâ€œone-blob encodingâ€ï¼š</p><ol><li>æä¾›äº†ä¸€ç§è¿ç»­çš„ã€éäºŒå€¼çš„è¡¨ç¤ºæ–¹å¼ï¼Œå¯ä»¥æ•æ‰ç›¸é‚»å€¼ä¹‹é—´çš„å…³ç³»ã€‚</li><li>ä¿æŒäº†æŸç§å½¢å¼çš„ç¨€ç–æ€§ï¼Œå› ä¸ºåªæœ‰ kernel è¦†ç›–çš„å°åŒºåŸŸå†…çš„ bin ä¼šè¢«æ¿€æ´»ã€‚</li><li>å…è®¸ç¥ç»ç½‘ç»œåˆ©ç”¨è¾“å…¥æ•°æ®çš„è¿ç»­æ€§å’Œä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæé«˜äº†æ¨¡å‹å¤„ç†è¿ç»­è¾“å…¥çš„çµæ´»æ€§å’Œç²¾åº¦ã€‚</li><li>é€šè¿‡å˜åŒ–çš„è¾“å…¥æ¿€æ´»ï¼Œå¯ä»¥å½±å“ç½‘ç»œçš„çº¿æ€§è·¯å¾„ï¼Œå…è®¸ç½‘ç»œä¸“é—¨åŒ–å¤„ç†è¾“å…¥çš„ä¸åŒå­åŸŸã€‚<br>å…·ä½“åˆ°é‚£ç¯‡è®ºæ–‡çš„åº”ç”¨èƒŒæ™¯ï¼Œâ€œone-blob encodingâ€ ç”¨äºæå‡å…‰çº¿è¿½è¸ªä¸­é‡è¦æ€§é‡‡æ ·çš„ç²¾åº¦ï¼Œé€šè¿‡æä¾›ä¸€ç§æ›´ç²¾ç»†çš„è¾“å…¥æ•°æ®è¡¨ç¤ºæ–¹æ³•ï¼Œæ”¹è¿›ç¥ç»ç½‘ç»œå¯¹åœºæ™¯ä¸­ä¸åŒåŒºåŸŸå…‰ç…§åˆ†å¸ƒçš„å­¦ä¹ å’Œé¢„æµ‹ã€‚</li></ol><p><strong>one-blobç¼–ç ä¸åŸå§‹NeRFä½ç½®ç¼–ç çš„åŒºåˆ«ï¼š</strong></p><p>åœ¨ç¥ç»è¾å°„åœºï¼ˆNeural Radiance Fieldsï¼Œç®€ç§°NeRFï¼‰çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè¾“å…¥çš„åæ ‡é€šå¸¸ä¼šé€šè¿‡ä½ç½®ç¼–ç (Positional Encoding)è¿›è¡Œå¤„ç†ï¼Œä»è€Œå…è®¸æ¨¡å‹å¯ä»¥å­¦ä¹ åˆ°åœºæ™¯ä¸­é«˜é¢‘çš„ç»†èŠ‚ã€‚ä½ç½®ç¼–ç çš„ç›®çš„æ˜¯å…è®¸æ¨¡å‹åœ¨ä½ç»´è¾“å…¥ç©ºé—´ä¸­æ•æ‰å’Œè¡¨è¾¾å¤æ‚çš„ã€é«˜é¢‘çš„å‡½æ•°ã€‚</p><p>NeRF çš„ä½ç½®ç¼–ç é€šå¸¸é€šè¿‡ä¸€ç³»åˆ—æ­£å¼¦å’Œä½™å¼¦å‡½æ•°æ¥ç¼–ç åæ ‡ï¼Œè¿™äº›å‡½æ•°å…·æœ‰ä¸åŒçš„é¢‘ç‡ã€‚è¿™ç§ç¼–ç æ–¹å¼æœ‰æ•ˆå¢åŠ äº†è¾“å…¥åæ ‡çš„ç»´åº¦ï¼Œä»è€Œå¸®åŠ©æ¨¡å‹æ•è·å’Œè¡¨ç¤ºå¤æ‚çš„å‡ ä½•ç»“æ„å’Œçº¹ç†ç»†èŠ‚ã€‚</p><p>å¦‚æœåœ¨ NeRF ä¸­ä½¿ç”¨ â€œone-blob encodingâ€ æ›¿ä»£æ ‡å‡†çš„æ­£å¼¦ä½™å¼¦ä½ç½®ç¼–ç ï¼Œåˆ™å¯ä»¥é¢„æœŸä»¥ä¸‹å‡ ç‚¹å˜åŒ–ï¼š</p><ol><li><p>ç¼“å’Œçš„ç©ºé—´å˜åŒ–ï¼šç”±äº â€œone-blob encodingâ€ å€¾å‘äºåœ¨ç»™å®šä½ç½®å‘¨å›´çš„é‚»è¿‘åŒºåŸŸäº§ç”Ÿæ¿€æ´»ï¼Œå®ƒå¯èƒ½ä¼šå¼•å…¥æ›´ç¼“å’Œçš„è¡¨ç¤ºï¼Œç›¸æ¯”äºæ­£å¼¦ä½™å¼¦ç¼–ç ï¼Œå¯¹äºé«˜é¢‘å˜åŒ–å¯èƒ½ä¸é‚£ä¹ˆæ•æ„Ÿã€‚</p></li><li><p>ç¥ç»ç½‘ç»œç»“æ„è°ƒæ•´ï¼šâ€œone-blob encodingâ€ èƒ½å¤Ÿå¯ç”¨æˆ–å…³é—­ç½‘ç»œä¸­ç‰¹å®šè·¯å¾„çš„æ¦‚å¿µè¯´æ˜äº†ï¼Œå¦‚æœä½¿ç”¨è¿™ç§ç¼–ç ï¼Œå¯èƒ½éœ€è¦å¯¹ç¥ç»ç½‘ç»œçš„ç»“æ„è¿›è¡Œè°ƒæ•´æ¥é€‚åº”è¿™ç§æ–°çš„è¾“å…¥è¡¨ç¤ºæ–¹å¼ã€‚</p></li><li><p>æ½œåœ¨çš„æ³›åŒ–æ”¹è¿›ï¼šç†è®ºä¸Šï¼Œâ€œone-blob encodingâ€ å¯èƒ½æœ‰åŠ©äºæé«˜æ¨¡å‹æ³›åŒ–èƒ½åŠ›ï¼Œå› ä¸ºå®ƒä¼šåœ¨è¾“å…¥ç¼–ç ä¸­å¼•å…¥æ›´è¿ç»­çš„ç‰¹æ€§ã€‚</p></li><li><p>çº¹ç†å’Œç»†èŠ‚çš„è¡¨è¾¾ï¼šç”±äº â€œone-blob encodingâ€ æ²¡æœ‰ä½ç½®ç¼–ç é‚£æ ·çš„é«˜é¢‘æŒ¯è¡æ¨¡å¼ï¼Œå®ƒå¯èƒ½å¯¼è‡´çº¹ç†å’Œç»†èŠ‚çš„è¡¨ç¤ºèƒ½åŠ›ä¸‹é™ï¼Œç‰¹åˆ«æ˜¯å¦‚æœåœºæ™¯ä¾èµ–äºæ•æ‰ç»†å¾®çš„ç©ºé—´å˜åŒ–ã€‚</p></li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼Œè™½ç„¶ â€œone-blob encodingâ€ æä¾›äº†ä¸€ç§ä¸åŒäºä½ç½®ç¼–ç çš„è§†è§’ï¼Œå¹¶å¯èƒ½åœ¨ç‰¹å®šæ¡ä»¶ä¸‹æœ‰æ‰€å¸®åŠ©ï¼Œä½†ä¹Ÿæœ‰å¯èƒ½ä¸é€‚ç”¨äºéœ€æ±‚æ•æ‰é«˜é¢‘ç»†èŠ‚çš„ NeRF åœºæ™¯ã€‚åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œç†è®ºæ¨æµ‹éƒ½éœ€è¦é€šè¿‡å®éªŒæ¥éªŒè¯å…¶å½±å“ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯èƒ½éœ€è¦å¯¹ â€œone-blob encodingâ€ åŠ ä»¥ä¿®æ”¹æˆ–ä¸å…¶ä»–æŠ€æœ¯ç»“åˆä»¥ä¼˜åŒ– NeRF çš„æ€§èƒ½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§†è§‰SLAM </tag>
            
            <tag> NeRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3D Gaussian Splattingå­¦ä¹ ç¬”è®°</title>
      <link href="2023/12/21/paper-reading-3d-gaussian-splatting/"/>
      <url>2023/12/21/paper-reading-3d-gaussian-splatting/</url>
      
        <content type="html"><![CDATA[<h1 id="3D-Gaussian-Splattingå­¦ä¹ ç¬”è®°"><a href="#3D-Gaussian-Splattingå­¦ä¹ ç¬”è®°" class="headerlink" title="3D Gaussian Splattingå­¦ä¹ ç¬”è®°"></a>3D Gaussian Splattingå­¦ä¹ ç¬”è®°</h1><h2 id="è§†é¢‘ç¬”è®°ï¼šPoint-based-NeRF"><a href="#è§†é¢‘ç¬”è®°ï¼šPoint-based-NeRF" class="headerlink" title="è§†é¢‘ç¬”è®°ï¼šPoint-based NeRF"></a>è§†é¢‘ç¬”è®°ï¼šPoint-based NeRF</h2><blockquote><p>ã€ã€ç»¼è¿°ã€‘åŸºäºç‚¹çš„ç¥ç»è¾å°„åœºï¼Œç”¨ç‚¹äº‘å®ç°çœŸå®çš„æ–°è§†è§’æ¸²æŸ“ã€‘ <a href="https://www.bilibili.com/video/BV1LX4y1H7a1/?share_source=copy_web&amp;vd_source=5040c17d0665f566f786d3874bbfd13d">https://www.bilibili.com/video/BV1LX4y1H7a1/?share_source=copy_web&amp;vd_source=5040c17d0665f566f786d3874bbfd13d</a></p></blockquote><p><strong>PCD to NeRFï¼š</strong></p><p><img src="/images/paper-reading-3d-gaussian-splatting.assets/image-20231220162009917.png"></p><p><strong>NeRF to PCDï¼š</strong></p><p><img src="/images/paper-reading-3d-gaussian-splatting.assets/image-20231220162628110.png"></p><blockquote><p>å¼¹å¹•è®¨è®ºï¼šè¿™é‡Œè¯´çš„ç‚¹äº‘æ›´å®¹æ˜“æ¥å…¥SLAMçš„ä¼˜åŠ¿ä¸æˆç«‹ï¼Œç°åœ¨å¾ˆå¤šSLAMçš„å‰ç«¯ä¹Ÿéƒ½æ˜¯åŸºäº2D Imageæ¥ä¼°è®¡ä½å§¿çš„</p></blockquote><p><strong>ç›¸å…³å·¥ä½œï¼š</strong></p><blockquote><p>æˆ‘è§‰å¾—è¿™é‡Œé¢æœ€é‡è¦çš„æ˜¯Plenoxelså’ŒPoint-NeRFï¼Œè¿™ä¸¤ä¸ªå·¥ä½œåé¢è¿˜éœ€è¦å¥½å¥½äº†è§£ã€‚</p></blockquote><p><img src="/images/paper-reading-3d-gaussian-splatting.assets/image-20231220204222632.png"></p><p><img src="/images/paper-reading-3d-gaussian-splatting.assets/image-20231220204200344.png"></p><p><img src="/images/paper-reading-3d-gaussian-splatting.assets/image-20231220164344891.png"></p><blockquote><p>æ„Ÿè§‰å°±åƒæ˜¯ï¼ŒæŠŠfeature gridæ¢æˆäº†ç‚¹äº‘ï¼Œå–é‡‡æ ·ç‚¹ä¸€å®šåŠå¾„å†…çš„ç‚¹äº‘ç‰¹å¾å‘é‡è¿›è¡Œæ’å€¼ï¼Œå†ç”¨å°MLPè§£ç ã€‚</p></blockquote><p><img src="/images/paper-reading-3d-gaussian-splatting.assets/image-20231220164600991.png"></p><blockquote><p>é—®é¢˜ï¼š</p><ul><li><p>æŸ¥è¯¢MLPçš„æ¬¡æ•°å’ŒåŸç‰ˆNeRFå·®ä¸å¤šï¼Œæ‹–æ…¢äº†æ¸²æŸ“é€Ÿåº¦ï¼›</p><p>æ¯”å¦‚ï¼Œè¿™é‡Œå¯ä»¥ç”¨ä¸ŠSNeRG[20] Baking Neural Radiance Fields for Real-Time View Synthesis. ICCV 2021. è¿™æ ·çš„å»¶è¿Ÿæ¸²æŸ“æ¨¡å‹æ¥åŠ é€Ÿï¼ŒæŠŠä¸€æ¡å°„çº¿ä¸Šçš„é‡‡æ ·ç‚¹çš„ç‰¹å¾èåˆä¹‹åå†æ‹¿å»è§£ç ï¼Œä»è€Œå‡å°‘MLPæŸ¥è¯¢æ¬¡æ•°ï¼›</p></li><li><p>ç‚¹äº‘å¯†åº¦å’Œæ¸²æŸ“è´¨é‡ä¹‹é—´éœ€è¦å¹³è¡¡ï¼›</p><ul><li>ç‚¹äº‘å¯†åº¦é«˜ï¼Œæ˜¾å­˜å ç”¨å¢åŠ </li><li>é™ä½ç‚¹äº‘å¯†åº¦ï¼Œä¼šé™ä½æ¸²æŸ“è´¨é‡</li></ul><p>å°æ¨¡å‹è¿™æ ·çš„é—®é¢˜ä¸æ˜æ˜¾ï¼Œä½†æ˜¯åœºæ™¯æ‰©å¤§å°±æœ‰é—®é¢˜äº†ï¼›</p></li></ul></blockquote><p><img src="/images/paper-reading-3d-gaussian-splatting.assets/image-20231220165848975.png"></p><blockquote><p>éšç€åœ°å›¾çš„æ‰©å±•ï¼Œéœ€è¦åˆé€‚çš„ç­–ç•¥å¹³æ»‘ç‚¹äº‘çš„å¯†åº¦ï¼Œå¹¶ä¸”è‡ªé€‚åº”çš„å¯¹ç‚¹äº‘åˆ†å¸ƒè¿›è¡Œè°ƒæ•´ï¼›</p><p>Point-NeRFé‡Œé¢æœ‰å¯¹ç‚¹äº‘çš„ç”Ÿé•¿å’Œä¿®å»ºï¼Œä½†è¿™æ˜¯ä¸ºäº†è¡¥å…¨æ¨¡å‹ã€å‰”é™¤å¤–ç‚¹ï¼Œè€Œä¸”æ•ˆç‡å¹¶ä¸é«˜ï¼Œå› ä¸ºç‚¹çš„å˜åŠ¨å°±æ„å‘³ç€è¿™ä¸ªå±€éƒ¨ä½ç½®ç›¸å…³çš„ç¥ç»æè¿°å­éƒ½å¾—å†æ¬¡ä¼˜åŒ–ã€‚</p><p>Point-SLAMçš„é—æ†¾ï¼š</p><ul><li>æ²¡æœ‰é’ˆå¯¹Point-NeRFçš„é—®é¢˜åšäº›ä»€ä¹ˆï¼›</li><li>æ²¡æœ‰ç”¨ä¸ŠåŸºäºç‰¹å¾ç‚¹çš„è§†è§‰é‡Œç¨‹è®¡æ¥è¿›è¡Œä½å§¿ä¼°è®¡ï¼Œåç«¯å·²ç»æ˜¯ç‚¹äº‘ä¼°è®¡æ¨¡å‹äº†ï¼Œè€Œå‰ç«¯è¿˜åœ¨ç”¨åŸºäºä¼˜åŒ–çš„è¿™ç§å¾ˆä½æ•ˆçš„æ–¹æ³•</li><li>ä¸è¿‡ä½¿ç”¨è§†è§‰é‡Œç¨‹è®¡å‰ç«¯ï¼Œé‚£ä¹ˆå‰ç«¯çš„å‡ ä½•ç‰¹å¾æ€ä¹ˆå’Œåç«¯çš„ç¥ç»æè¿°å­ç›¸ç»Ÿä¸€æˆ–èåˆï¼Œä¹Ÿæ˜¯å€¼å¾—ç ”ç©¶çš„é—®é¢˜</li></ul></blockquote><p><img src="/images/paper-reading-3d-gaussian-splatting.assets/image-20231220170921117.png"></p><blockquote><p>ç”¨CGçš„å¾ˆå¤šæˆç†Ÿçš„å·¥å…·åŠ é€Ÿäº†Point-NeRFçš„å¾ˆå¤šæµç¨‹ï¼Œéå¸¸è®¨å·§</p></blockquote><p><strong>æ€»ç»“ï¼š</strong></p><p><img src="/images/paper-reading-3d-gaussian-splatting.assets/image-20231220171425698.png"></p><blockquote><p>æˆ‘å‘ç°å¦‚æœç»“åˆç‚¹äº‘çš„è¯ï¼ŒCGé‡Œé¢æœ‰å¾ˆå¤šç°æˆçš„å·¥å…·å¯ä»¥ç”¨ï¼Œç‚¹äº‘æ˜¯ä¸€ä¸ªæŠŠCGå’ŒCVç»“åˆèµ·æ¥çš„æ¡¥æ¢ã€‚</p></blockquote><h2 id="è§†é¢‘ç¬”è®°ï¼š3D-Gaussian-Splatting"><a href="#è§†é¢‘ç¬”è®°ï¼š3D-Gaussian-Splatting" class="headerlink" title="è§†é¢‘ç¬”è®°ï¼š3D Gaussian Splatting"></a>è§†é¢‘ç¬”è®°ï¼š3D Gaussian Splatting</h2><blockquote><p>ã€ã€è®ºæ–‡è®²è§£ã€‘ç”¨ç‚¹äº‘ç»“åˆ3Dé«˜æ–¯æ„å»ºè¾å°„åœºï¼Œæˆä¸ºå¿«é€Ÿè®­ç»ƒã€å®æ—¶æ¸²æŸ“çš„æ–°SOTAï¼ã€‘ <a href="https://www.bilibili.com/video/BV1uV4y1Y7cA/?share_source=copy_web&amp;vd_source=5040c17d0665f566f786d3874bbfd13d">https://www.bilibili.com/video/BV1uV4y1Y7cA/?share_source=copy_web&amp;vd_source=5040c17d0665f566f786d3874bbfd13d</a></p></blockquote><p>è¿™ä¸ªè§†é¢‘è®²çš„æ¯”è¾ƒç®€å•ï¼Œä¸»è¦ç€åŠ›äºå…¬å¼æ¨å¯¼æ–¹é¢ï¼Œæ‰€ä»¥ç¬”è®°å°±ä¸åšäº†ã€‚åé¢åŠ åˆ°è®ºæ–‡é˜…è¯»ç¬”è®°é‡Œé¢ã€‚</p><h2 id="è®ºæ–‡é˜…è¯»ç¬”è®°"><a href="#è®ºæ–‡é˜…è¯»ç¬”è®°" class="headerlink" title="è®ºæ–‡é˜…è¯»ç¬”è®°"></a>è®ºæ–‡é˜…è¯»ç¬”è®°</h2><blockquote><p>ä¸»è¦æ˜¯æ¢³ç†æ•´ç¯‡è®ºæ–‡çš„ç»“æ„ï¼Œå¯¹ä¸€äº›ç»†èŠ‚çš„è®¨è®ºä¸ä¼šå±•å¼€ã€‚</p><blockquote><p>ç¬¬7éƒ¨åˆ†ç”±äºæˆ‘æ²¡æœ‰åšè¿‡ç›¸å…³çš„å®éªŒï¼Œæ‰€ä»¥æš‚æ—¶åªå¯¹Limitationsæ„Ÿå…´è¶£ï¼Œåªæ•´ç†è¿™éƒ¨åˆ†çš„ç¬”è®°ï¼›</p><p>é™„å½•çš„å…¬å¼æ¨å¯¼æ„Ÿè§‰ä¹Ÿå¾ˆå¸¸è§„ï¼Œä¸å¤ªéœ€è¦åšä»€ä¹ˆç¬”è®°æ•´ç†ã€‚</p></blockquote><p>åç»­å¯èƒ½ä¼šé’ˆå¯¹æŸäº›éƒ¨åˆ†å†™æ–°çš„æ–‡ç« è¿›è¡Œè®¨è®ºï¼Œå¹¶ä¸”ä¼šæ•´ç†éœ€è¦äº†è§£çš„ä¸€äº›ç›¸å…³å·¥ä½œã€‚</p></blockquote><h3 id="0-ABSTRACT-amp-1-INTRODUCTION"><a href="#0-ABSTRACT-amp-1-INTRODUCTION" class="headerlink" title="0 ABSTRACT&amp; 1 INTRODUCTION"></a>0 ABSTRACT&amp; 1 INTRODUCTION</h3><p><strong>Background</strong></p><p>è®ºæ–‡æŒ‡å‡ºï¼Œå¸¸è§çš„3Dåœºæ™¯è¡¨ç¤ºæ–¹æ³•ï¼Œmeshå’Œpointéƒ½æ˜¯æ˜¾ç¤ºçš„ï¼Œå¹¶ä¸”éå¸¸é€‚åˆfast GPU/CUDA-based rasterizationã€‚è€ŒNeRFçš„æ–¹æ³•å»ºç«‹åœ¨è¿ç»­åœºæ™¯è¡¨ç¤ºçš„åŸºç¡€ä¸Šï¼Œé€šå¸¸é€šè¿‡å¯¹ä½“ç§¯å°„çº¿è¡Œè¿›çš„å¤šå±‚æ„ŸçŸ¥å™¨ï¼ˆMLPï¼‰è¿›è¡Œä¼˜åŒ–ï¼Œä»¥å®ç°å¯¹æ•æ‰åœºæ™¯çš„æ–°è§†å›¾åˆæˆï¼Œä½†æ˜¯è¿™äº›æ–¹æ³•åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­éœ€è¦è¿›è¡Œçš„éšæœºé‡‡æ ·æˆæœ¬æ˜‚è´µï¼Œå¯èƒ½å¯¼è‡´å›¾åƒä¸­çš„å™ªå£°ã€‚</p><p><strong>Motivation</strong></p><p>è®ºæ–‡å‘ç°äº†ä»¥ä¸‹ä¸‰ä¸ªé—®é¢˜ï¼š</p><ol><li><strong>é«˜æˆæœ¬çš„è®­ç»ƒå’Œæ¸²æŸ“ï¼š</strong> ä¼ ç»Ÿçš„Radiance Fieldæ–¹æ³•é€šå¸¸éœ€è¦æ˜‚è´µçš„è®­ç»ƒå’Œæ¸²æŸ“æˆæœ¬ï¼Œé™åˆ¶äº†å…¶åœ¨å®é™…åº”ç”¨ä¸­çš„å¯è¡Œæ€§ã€‚</li><li><strong>é€Ÿåº¦ä¸è´¨é‡çš„æƒè¡¡ï¼š</strong> æœ€è¿‘çš„æ›´å¿«æ–¹æ³•é€šå¸¸åœ¨é€Ÿåº¦å’Œåˆæˆè´¨é‡ä¹‹é—´åšå‡ºæƒè¡¡ï¼Œéš¾ä»¥åœ¨å®æ—¶æ€§å’Œé«˜è´¨é‡ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ã€‚</li><li><strong>å¯¹äºæ— è¾¹ç•Œå’Œå®Œæ•´åœºæ™¯çš„å®æ—¶æ˜¾ç¤ºï¼š</strong> é’ˆå¯¹æ— è¾¹ç•Œå’Œå®Œæ•´åœºæ™¯çš„åˆæˆï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜åˆ†è¾¨ç‡ï¼ˆ1080pï¼‰ä¸‹ï¼Œç›®å‰çš„æ–¹æ³•æ— æ³•å®ç°å®æ—¶æ˜¾ç¤ºã€‚</li></ol><p><strong>Goal</strong></p><p>å¯¹æ­¤ï¼Œè®ºæ–‡æå‡ºäº†æœ¬æ–‡çš„ç›®æ ‡ï¼šåœ¨Radiance Fieldæ–¹æ³•ä¸­æå‡ºä¸€ç§ç»¼åˆçš„è§£å†³æ–¹æ¡ˆï¼Œä»¥å…‹æœä¼ ç»Ÿæ–¹æ³•ä¸­å­˜åœ¨çš„è®­ç»ƒå’Œæ¸²æŸ“æˆæœ¬é«˜æ˜‚ã€é€Ÿåº¦ä¸è´¨é‡ä¹‹é—´çš„æƒè¡¡é—®é¢˜ï¼Œå®ç°å¯¹æ•è·åœºæ™¯çš„å®æ—¶é«˜è´¨é‡æ–°è§†è§’åˆæˆã€‚</p><p><strong>Solutions</strong></p><ol><li><strong>3D Gaussiansä½œä¸ºåœºæ™¯è¡¨ç¤ºï¼š</strong> è®ºæ–‡çš„ç¬¬ä¸€ç»„æˆéƒ¨åˆ†å¼•å…¥äº†3D Gaussiansä½œä¸ºä¸€ç§çµæ´»è€Œå¯Œæœ‰è¡¨ç°åŠ›çš„åœºæ™¯è¡¨ç¤ºæ–¹æ³•ã€‚ä½œè€…é¦–å…ˆä½¿ç”¨ä¸ä»¥å‰çš„NeRF-likeæ–¹æ³•ç›¸åŒçš„è¾“å…¥ï¼Œå³é€šè¿‡ç»“æ„ä»è¿åŠ¨ï¼ˆStructure-from-Motionï¼ŒSfMï¼‰[Snavelyç­‰äººï¼Œ2006]è¿›è¡Œæ ¡å‡†çš„ç›¸æœºï¼Œå¹¶ä½¿ç”¨SfMè¿‡ç¨‹ä¸­äº§ç”Ÿçš„ç¨€ç–ç‚¹äº‘åˆå§‹åŒ–äº†3D Gaussiansé›†åˆã€‚ä¸å¤§å¤šæ•°åŸºäºç‚¹çš„è§£å†³æ–¹æ¡ˆéœ€è¦å¤šè§†å›¾ç«‹ä½“åŒ¹é…ï¼ˆMulti-View Stereoï¼ŒMVSï¼‰æ•°æ®ä¸åŒï¼Œä½œè€…ä»…ä½¿ç”¨SfMç‚¹ä½œä¸ºè¾“å…¥ï¼Œå°±èƒ½å¤Ÿè·å¾—é«˜è´¨é‡çš„ç»“æœã€‚ä½œè€…å¼ºè°ƒ3D Gaussiansçš„ä¼˜è¶Šæ€§ï¼Œå› ä¸ºå®ƒä»¬æ˜¯å¯å¾®çš„ä½“ç§¯è¡¨ç¤ºï¼Œä½†ä¹Ÿå¯ä»¥é€šè¿‡æŠ•å½±åˆ°2Då¹¶åº”ç”¨æ ‡å‡†çš„ ğ›¼-æ··åˆï¼ˆalpha-blendingï¼‰éå¸¸é«˜æ•ˆåœ°å…‰æ …åŒ–ï¼Œä½¿ç”¨ä¸NeRFç›¸åŒçš„ç­‰æ•ˆå›¾åƒå½¢æˆæ¨¡å‹ã€‚</li><li><strong>3D Gaussianså±æ€§ä¼˜åŒ–å’Œå¯†åº¦æ§åˆ¶ï¼š</strong> è¯¥æ–¹æ³•çš„ç¬¬äºŒä¸ªç»„æˆéƒ¨åˆ†æ¶‰åŠå¯¹3D Gaussiansçš„å±æ€§è¿›è¡Œä¼˜åŒ–ï¼ŒåŒ…æ‹¬3Dä½ç½®ã€ä¸é€æ˜åº¦ğ›¼ã€å„å‘å¼‚æ€§åæ–¹å·®å’Œçƒè°ï¼ˆSpherical Harmonicï¼ŒSHï¼‰ç³»æ•°ã€‚è¿™äº›ä¼˜åŒ–ä¸è‡ªé€‚åº”å¯†åº¦æ§åˆ¶æ­¥éª¤äº¤æ›¿è¿›è¡Œï¼Œå…¶ä¸­åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­æ·»åŠ å’Œå¶å°”åˆ é™¤3D Gaussiansã€‚è¿™ä¸€ä¼˜åŒ–è¿‡ç¨‹äº§ç”Ÿäº†åœºæ™¯çš„åˆç†ç´§å‡‘ã€éç»“æ„åŒ–å’Œç²¾ç¡®è¡¨ç¤ºï¼ˆåœ¨æµ‹è¯•çš„æ‰€æœ‰åœºæ™¯ä¸­ï¼Œ1-5ç™¾ä¸‡ä¸ªé«˜æ–¯å‡½æ•°ï¼‰ã€‚</li><li><strong>å®æ—¶æ¸²æŸ“è§£å†³æ–¹æ¡ˆï¼š</strong> è¯¥æ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ æ˜¯å®æ—¶æ¸²æŸ“è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨å¿«é€ŸGPUæ’åºç®—æ³•ï¼Œçµæ„Ÿæ¥è‡ªåŸºäºç“¦ç‰‡çš„å…‰æ …åŒ–çš„æœ€æ–°å·¥ä½œ[Lassnerå’ŒZollhoferï¼Œ2021]ã€‚ç”±äºé‡‡ç”¨äº†3D Gaussiansè¡¨ç¤ºï¼Œä½œè€…èƒ½å¤Ÿæ‰§è¡Œå„å‘å¼‚æ€§å–·æº…ï¼Œé€šè¿‡æ’åºå’Œğ›¼æ··åˆæ¥ä¿æŒå¯è§æ€§é¡ºåºï¼Œå¹¶é€šè¿‡è·Ÿè¸ªæ‰€éœ€çš„å·²æ’åºå–·æº…çš„éå†æ¥å®ç°å¿«é€Ÿä¸”å‡†ç¡®çš„åå‘ä¼ æ’­ã€‚è¿™ä¸€éƒ¨åˆ†çš„è®¾è®¡ä½¿å¾—è®ºæ–‡çš„æ–¹æ³•èƒ½å¤Ÿå®ç°å¯¹å¤šä¸ªå…ˆå‰å‘å¸ƒæ•°æ®é›†çš„SOTAè´¨é‡çš„å®æ—¶æ¸²æŸ“ï¼Œå°¤å…¶æ˜¯åœ¨1080påˆ†è¾¨ç‡ä¸‹ã€‚</li></ol><p>æ€»ä½“æ¥è¯´ï¼Œè¿™ä¸‰ä¸ªç»„æˆéƒ¨åˆ†å…±åŒæ„æˆäº†ä¸€ç§æ–°é¢–è€Œé«˜æ•ˆçš„æ–¹æ³•ï¼Œé€šè¿‡ç»¼åˆè¿ç”¨3D Gaussiansè¡¨ç¤ºã€å±æ€§ä¼˜åŒ–ä¸å¯†åº¦æ§åˆ¶ï¼Œä»¥åŠå®æ—¶æ¸²æŸ“è§£å†³æ–¹æ¡ˆï¼ŒæˆåŠŸåœ°è§£å†³äº†ç°æœ‰æ–¹æ³•åœ¨é€Ÿåº¦å’Œè´¨é‡ä¹‹é—´çš„æƒè¡¡é—®é¢˜ã€‚</p><p><strong>Contributions</strong></p><ol><li><strong>å¼•å…¥å„å‘å¼‚æ€§çš„3D Gaussiansï¼š</strong> è®ºæ–‡é¦–æ¬¡å¼•å…¥äº†å„å‘å¼‚æ€§çš„3D Gaussiansï¼Œä½œä¸ºå¯¹è¾å°„åœºçš„é«˜è´¨é‡ã€éç»“æ„åŒ–çš„è¡¨ç¤ºã€‚è¿™ç§è¡¨ç¤ºæ–¹æ³•å…·æœ‰çµæ´»æ€§å’Œè¡¨ç°åŠ›ï¼Œä¸ºåœºæ™¯æä¾›äº†ä¸€ç§æ–°çš„ã€ä¼˜è¶Šçš„å»ºæ¨¡æ–¹å¼ã€‚</li><li><strong>3D Gaussianså±æ€§ä¼˜åŒ–å’Œè‡ªé€‚åº”å¯†åº¦æ§åˆ¶ï¼š</strong> è®ºæ–‡æä¾›äº†ä¸€ç§ä¼˜åŒ–3D Gaussianså±æ€§çš„æ–¹æ³•ï¼Œä¸è‡ªé€‚åº”å¯†åº¦æ§åˆ¶ç›¸äº’äº¤æ›¿ï¼Œä»è€Œåˆ›å»ºäº†å¯¹æ•è·åœºæ™¯çš„é«˜è´¨é‡è¡¨ç¤ºã€‚è¿™ä¸€ä¼˜åŒ–è¿‡ç¨‹ç¡®ä¿äº†å¯¹åœºæ™¯çš„ç´§å‡‘ã€éç»“æ„åŒ–å’Œå‡†ç¡®çš„å»ºæ¨¡ï¼ŒåŒæ—¶åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å…·æœ‰ç«äº‰åŠ›çš„æ—¶é—´æˆæœ¬ã€‚</li><li><strong>å¿«é€Ÿã€å¯å¾®çš„GPUæ¸²æŸ“æ–¹æ³•ï¼š</strong> è®ºæ–‡æä¾›äº†ä¸€ç§å¿«é€Ÿçš„ã€å¯å¾®çš„GPUæ¸²æŸ“æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å…·æœ‰è§†è§‰æ„ŸçŸ¥æ€§ï¼Œå…è®¸å„å‘å¼‚æ€§çš„å–·æº…ï¼Œå¹¶é€šè¿‡å¿«é€Ÿçš„åå‘ä¼ æ’­å®ç°äº†é«˜è´¨é‡çš„æ–°è§†å›¾åˆæˆã€‚è¿™ä¸€æ¸²æŸ“æ–¹æ³•å¯¹GPUè¿›è¡Œäº†ä¼˜åŒ–ï¼Œèƒ½å¤Ÿåœ¨å®æ—¶æ€§å’Œè§†è§‰è´¨é‡ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ï¼Œå®ç°äº†å¯¹1080påˆ†è¾¨ç‡ä¸‹çš„å¤šä¸ªæ•°æ®é›†çš„å…ˆè¿›è´¨é‡çš„å®æ—¶æ¸²æŸ“ã€‚</li></ol><h3 id="2-RELATED-WORK"><a href="#2-RELATED-WORK" class="headerlink" title="2 RELATED WORK"></a>2 RELATED WORK</h3><blockquote><p>æ®è¯´è¿™ç¯‡è®ºæ–‡Related Workå†™çš„å¾ˆå¥½ï¼Œæˆ‘ç»“åˆChart GPTæŠŠè¿™éƒ¨åˆ†æ€»ç»“ä¸€ä¸‹ã€‚</p></blockquote><h4 id="2-1-Traditional-Scene-Reconstruction-and-Rendering"><a href="#2-1-Traditional-Scene-Reconstruction-and-Rendering" class="headerlink" title="2.1 Traditional Scene Reconstruction and Rendering"></a>2.1 Traditional Scene Reconstruction and Rendering</h4><p>åœ¨è¿™ä¸ªéƒ¨åˆ†ï¼Œä½œè€…é¦–å…ˆå›é¡¾äº†ä¼ ç»Ÿçš„åœºæ™¯é‡å»ºå’Œæ¸²æŸ“æ–¹æ³•ï¼š</p><ol><li><strong>åŸºäºå…‰åœºçš„æ–¹æ³•ï¼š</strong> æ—©æœŸçš„æ–°è§†è§’åˆæˆæ–¹æ³•åŸºäºå…‰åœºï¼Œé¦–å…ˆæ˜¯å¯¹å…‰åœºè¿›è¡Œå¯†é›†é‡‡æ ·[Gortlerç­‰äººï¼Œ1996ï¼›Levoyå’ŒHanrahanï¼Œ1996]ï¼Œç„¶åå‘å±•åˆ°å…è®¸éç»“æ„åŒ–æ•è·[Buehlerç­‰äººï¼Œ2001]ã€‚è¿™ä¸€æ–¹æ³•çš„è¿›å±•ä½¿å¾—å¯¹åœºæ™¯çš„ä¸åŒè§’åº¦çš„åˆæˆå˜å¾—å¯èƒ½ã€‚</li><li><strong>ç»“æ„è¿åŠ¨ï¼ˆStructure-from-Motionï¼ŒSfMï¼‰çš„å‡ºç°ï¼š</strong> SfMçš„å‡ºç°å¼€åˆ›äº†ä¸€ä¸ªå…¨æ–°çš„é¢†åŸŸï¼Œå…¶ä¸­å¯ä»¥ä½¿ç”¨ä¸€ç³»åˆ—ç…§ç‰‡æ¥åˆæˆæ–°çš„è§†å›¾[Snavelyç­‰äººï¼Œ2006]ã€‚åœ¨ç›¸æœºæ ¡å‡†æœŸé—´ï¼ŒSfMä¼°è®¡äº†ä¸€ä¸ªç¨€ç–ç‚¹äº‘ï¼Œæœ€åˆç”¨äºç®€å•çš„ä¸‰ç»´ç©ºé—´å¯è§†åŒ–ã€‚</li><li><strong>å¤šè§†å›¾ç«‹ä½“åŒ¹é…ï¼ˆMulti-View Stereoï¼ŒMVSï¼‰ï¼š</strong> éšåçš„å¤šè§†å›¾ç«‹ä½“åŒ¹é…ï¼ˆMVSï¼‰ç®—æ³•åœ¨å¤šå¹´å†…äº§ç”Ÿäº†å¼•äººæ³¨ç›®çš„å…¨ä¸‰ç»´é‡å»ºç®—æ³•[Goeseleç­‰äººï¼Œ2007]ï¼Œä¸ºå¤šç§è§†å›¾åˆæˆç®—æ³•çš„å‘å±•æä¾›äº†åŸºç¡€[Chaurasiaç­‰äººï¼Œ2013ï¼›Eisemannç­‰äººï¼Œ2008ï¼›Hedmanç­‰äººï¼Œ2018ï¼›Kopanasç­‰äººï¼Œ2021]ã€‚è¿™äº›æ–¹æ³•é€šè¿‡å°†è¾“å…¥å›¾åƒé‡æ–°æŠ•å½±å¹¶æ··åˆåˆ°æ–°è§†å›¾ç›¸æœºä¸­ï¼Œå¹¶åˆ©ç”¨å‡ ä½•ä¿¡æ¯æ¥å¼•å¯¼è¿™ä¸€é‡æ–°æŠ•å½±ã€‚å°½ç®¡è¿™äº›æ–¹æ³•åœ¨è®¸å¤šæƒ…å†µä¸‹äº§ç”Ÿäº†å‡ºè‰²çš„ç»“æœï¼Œä½†é€šå¸¸æ— æ³•å®Œå…¨æ¢å¤æœªé‡å»ºåŒºåŸŸï¼Œæˆ–è€…æ— æ³•å¤„ç†MVSç”Ÿæˆè™šæ„å‡ ä½•çš„â€œè¿‡åº¦é‡å»ºâ€ã€‚</li><li><strong>æœ€è¿‘çš„ç¥ç»æ¸²æŸ“ç®—æ³•ï¼š</strong> è¿‘æœŸçš„ç¥ç»æ¸²æŸ“ç®—æ³•[Tewariç­‰äººï¼Œ2022]åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå‡å°‘äº†è¿™äº›ä¼ªå½±ï¼Œå¹¶é¿å…äº†åœ¨GPUä¸Šå­˜å‚¨æ‰€æœ‰è¾“å…¥å›¾åƒçš„å·¨å¤§æˆæœ¬ï¼Œä»è€Œåœ¨å¤§å¤šæ•°æ–¹é¢ä¼˜äºä¼ ç»Ÿæ–¹æ³•ã€‚</li></ol><p>è¿™ä¸€éƒ¨åˆ†æä¾›äº†å…³äºä¼ ç»Ÿåœºæ™¯é‡å»ºå’Œæ¸²æŸ“æ–¹æ³•çš„æ¦‚è¿°ï¼Œå¼ºè°ƒäº†SfMå’ŒMVSçš„ä½œç”¨ï¼Œå¹¶å¼•å…¥äº†æœ€è¿‘çš„ç¥ç»æ¸²æŸ“ç®—æ³•ï¼Œä¸ºè¯»è€…æä¾›äº†èƒŒæ™¯çŸ¥è¯†ï¼Œä»¥ä¾¿æ›´å¥½åœ°ç†è§£æ¥ä¸‹æ¥è®¨è®ºçš„æ–°æ–¹æ³•ã€‚</p><h4 id="2-2-Neural-Rendering-and-Radiance-Fields"><a href="#2-2-Neural-Rendering-and-Radiance-Fields" class="headerlink" title="2.2 Neural Rendering and Radiance Fields"></a>2.2 Neural Rendering and Radiance Fields</h4><p>é¦–å…ˆè®¨è®ºæ·±åº¦å­¦ä¹ æŠ€æœ¯åœ¨æ–°è§†è§’åˆæˆæ–¹é¢çš„æ—©æœŸåº”ç”¨ï¼Œä»¥åŠä¸€äº›é—®é¢˜å’Œé™åˆ¶ï¼Œè¿™ä¸ºå¼•å…¥Radiance Fieldsæ–¹æ³•æä¾›äº†ä¸€ä¸ªèƒŒæ™¯ï¼Œå¼ºè°ƒäº†Radiance Fieldsæ–¹æ³•æ—¨åœ¨å…‹æœè¿™äº›é—®é¢˜ï¼š</p><ol><li><strong>æ—©æœŸæ·±åº¦å­¦ä¹ åœ¨æ–°è§†è§’åˆæˆä¸­çš„åº”ç”¨ï¼š</strong> ä½œè€…æŒ‡å‡ºï¼Œæ·±åº¦å­¦ä¹ æŠ€æœ¯æ—©æœŸå°±è¢«ç”¨äºæ–°è§†è§’åˆæˆ[Flynnç­‰äººï¼Œ2016ï¼›Zhouç­‰äººï¼Œ2016]ã€‚å…·ä½“è€Œè¨€ï¼Œå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNsï¼‰è¢«ç”¨äºä¼°è®¡æ··åˆæƒé‡[Hedmanç­‰äººï¼Œ2018]ï¼Œæˆ–è€…ç”¨äºçº¹ç†ç©ºé—´çš„è§£å†³æ–¹æ¡ˆ[Rieglerå’ŒKoltunï¼Œ2020ï¼›Thiesç­‰äººï¼Œ2019]ã€‚</li><li><strong>MVS-based geometryçš„ä¸»è¦ç¼ºé™·ï¼š</strong> ä½œè€…æŒ‡å‡ºï¼Œè¿™äº›æ–¹æ³•ä¸­å¤§å¤šæ•°é‡‡ç”¨äº†åŸºäºå¤šè§†å›¾ç«‹ä½“åŒ¹é…ï¼ˆMVSï¼‰çš„å‡ ä½•ä¿¡æ¯ï¼Œä½†å¼ºè°ƒäº†è¿™ä¸€æ–¹æ³•çš„ä¸€ä¸ªä¸»è¦ç¼ºé™·ã€‚å…·ä½“è€Œè¨€ï¼Œä½¿ç”¨MVSçš„å‡ ä½•ä¿¡æ¯å¯èƒ½å­˜åœ¨ä¸€äº›é—®é¢˜æˆ–é™åˆ¶ï¼Œå°½ç®¡è¿™å¹¶æœªåœ¨è¿™ä¸€æ®µå…·ä½“é˜è¿°ã€‚</li><li><strong>CNNsç”¨äºæœ€ç»ˆæ¸²æŸ“çš„æ½œåœ¨é—®é¢˜ï¼š</strong> ä½œè€…æåˆ°ï¼Œå°†CNNsç”¨äºæœ€ç»ˆæ¸²æŸ“çš„æ–¹æ³•ç»å¸¸å¯¼è‡´æ—¶é—´ä¸Šçš„é—ªçƒç°è±¡ï¼ˆtemporal flickeringï¼‰ã€‚è¿™è¡¨æ˜åœ¨è¿™äº›æ–¹æ³•ä¸­ï¼Œä½¿ç”¨æ·±åº¦å­¦ä¹ è¿›è¡Œæœ€ç»ˆæ¸²æŸ“æ—¶å¯èƒ½å‡ºç°è§†è§‰ä¸Šä¸ç¨³å®šçš„é—®é¢˜ã€‚</li></ol><p>æ¥ä¸‹æ¥ï¼Œä½œè€…è®¨è®ºäº†æ–°è§†è§’åˆæˆä¸­çš„ä½“ç§¯è¡¨ç¤ºæ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯æ¶‰åŠåˆ°Soft3Dã€Neural Radiance Fields (NeRFs)ä»¥åŠMip-NeRF360ç­‰æ–¹æ³•ï¼š</p><ol><li><strong>ä½“ç§¯è¡¨ç¤ºçš„èµ·æºï¼š</strong> ä½œè€…æåˆ°ï¼Œå¯¹äºæ–°è§†è§’åˆæˆçš„ä½“ç§¯è¡¨ç¤ºæ–¹æ³•çš„èµ·æºå¯ä»¥è¿½æº¯åˆ°Soft3D[Pennserå’ŒZhangï¼Œ2017]ã€‚Soft3Dé‡‡ç”¨äº†æ·±åº¦å­¦ä¹ æŠ€æœ¯ï¼Œå¹¶ç»“åˆäº†ä½“ç§¯å°„çº¿è¡Œè¿›ï¼Œç”¨ä¸€ä¸ªè¿ç»­å¯å¾®çš„å¯†åº¦åœºè¡¨ç¤ºå‡ ä½•ã€‚</li><li><strong>æ·±åº¦å­¦ä¹ ä¸ä½“ç§¯å°„çº¿è¡Œè¿›çš„ç»“åˆï¼š</strong> éšåï¼Œä¸€äº›ç ”ç©¶æå‡ºäº†é‡‡ç”¨æ·±åº¦å­¦ä¹ æŠ€æœ¯ä¸ä½“ç§¯å°„çº¿è¡Œè¿›ç›¸ç»“åˆçš„æ–¹æ³•[Henzlerç­‰äººï¼Œ2019ï¼›Sitzmannç­‰äººï¼Œ2019]ï¼Œè¿™äº›æ–¹æ³•åŸºäºè¿ç»­å¯å¾®çš„å¯†åº¦åœºæ¥è¡¨ç¤ºå‡ ä½•å½¢çŠ¶ã€‚ç„¶è€Œï¼Œä½¿ç”¨ä½“ç§¯å°„çº¿è¡Œè¿›è¿›è¡Œæ¸²æŸ“éœ€è¦å¤§é‡çš„æ ·æœ¬ï¼Œå› æ­¤æ¸²æŸ“çš„æˆæœ¬ç›¸å½“é«˜ã€‚</li><li><strong>Neural Radiance Fields (NeRFs)çš„å¼•å…¥ï¼š</strong> Neural Radiance Fields (NeRFs) [Mildenhallç­‰äººï¼Œ2020]å¼•å…¥äº†é‡è¦æ€§é‡‡æ ·å’Œä½ç½®ç¼–ç ä»¥æé«˜æ¸²æŸ“è´¨é‡ï¼Œä½†æ˜¯é‡‡ç”¨äº†å¤§å‹çš„å¤šå±‚æ„ŸçŸ¥å™¨ï¼ˆMulti-Layer Perceptronï¼‰ï¼Œå¯¹é€Ÿåº¦äº§ç”Ÿäº†è´Ÿé¢å½±å“ã€‚</li><li><strong>NeRFæ–¹æ³•çš„å½±å“ï¼š</strong> NeRFçš„æˆåŠŸå¼•å‘äº†è®¸å¤šåç»­æ–¹æ³•çš„å‡ºç°ï¼Œè¿™äº›æ–¹æ³•è‡´åŠ›äºè§£å†³è´¨é‡å’Œé€Ÿåº¦ä¹‹é—´çš„å¹³è¡¡é—®é¢˜ï¼Œé€šå¸¸é€šè¿‡å¼•å…¥æ­£åˆ™åŒ–ç­–ç•¥æ¥å®ç°ã€‚ç›®å‰æ–°è§†è§’åˆæˆä¸­å›¾åƒè´¨é‡çš„æœ€æ–°è¿›å±•æ˜¯Mip-NeRF360[Barronç­‰äººï¼Œ2022]ã€‚</li><li><strong>è´¨é‡ä¸é€Ÿåº¦çš„å¹³è¡¡ï¼š</strong> ä½œè€…æŒ‡å‡ºï¼Œå°½ç®¡Mip-NeRF360åœ¨æ¸²æŸ“è´¨é‡æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œä½†è®­ç»ƒå’Œæ¸²æŸ“æ—¶é—´ä»ç„¶éå¸¸é•¿ã€‚ä½œè€…å£°ç§°ä»–ä»¬çš„æ–¹æ³•åœ¨æä¾›ç­‰åŒæˆ–åœ¨æŸäº›æƒ…å†µä¸‹è¶…è¶ŠMip-NeRF360çš„å›¾åƒè´¨é‡çš„åŒæ—¶ï¼Œå®ç°äº†å¿«é€Ÿçš„è®­ç»ƒå’Œå®æ—¶æ¸²æŸ“ã€‚</li></ol><p>åœ¨è¿™ä¹‹åï¼Œä½œè€…æ¢è®¨äº†æœ€è¿‘çš„æ–¹æ³•åœ¨æé«˜è®­ç»ƒå’Œ/æˆ–æ¸²æŸ“é€Ÿåº¦æ–¹é¢çš„ä¸€äº›è®¾è®¡é€‰æ‹©ï¼Œä¸»è¦åŒ…æ‹¬åˆ©ç”¨ç©ºé—´æ•°æ®ç»“æ„ã€ä¸åŒçš„ç¼–ç æ–¹å¼ä»¥åŠå¤šå±‚æ„ŸçŸ¥å™¨ï¼ˆMLPï¼‰çš„å®¹é‡è°ƒæ•´ã€‚ç ”ç©¶è€…ä»¬è¯•å›¾ä¼˜åŒ–ç°æœ‰çš„æ–¹æ³•ï¼Œä»¥åœ¨ä¿æŒå›¾åƒè´¨é‡çš„åŒæ—¶æé«˜æ–¹æ³•çš„æ•ˆç‡ã€‚è¿™ä¸€å¤šæ ·æ€§åæ˜ äº†é¢†åŸŸä¸­ä¸æ–­å¯»æ‰¾é€Ÿåº¦å’Œè´¨é‡å¹³è¡¡çš„åŠªåŠ›ï¼š</p><ol><li><strong>åŠ é€Ÿè®­ç»ƒå’Œæ¸²æŸ“çš„è®¾è®¡é€‰æ‹©ï¼š</strong> ä½œè€…æŒ‡å‡ºï¼Œæœ€è¿‘çš„æ–¹æ³•åœ¨åŠ é€Ÿè®­ç»ƒå’Œæ¸²æŸ“æ–¹é¢ä¸»è¦é›†ä¸­åœ¨ä¸‰ä¸ªè®¾è®¡é€‰æ‹©ä¸Šã€‚è¿™äº›é€‰æ‹©æ¶‰åŠä½¿ç”¨ç©ºé—´æ•°æ®ç»“æ„æ¥å­˜å‚¨ï¼ˆç¥ç»ï¼‰ç‰¹å¾ï¼Œéšååœ¨ä½“ç§¯å°„çº¿è¡Œè¿›è¿‡ç¨‹ä¸­è¿›è¡Œæ’å€¼ï¼Œé‡‡ç”¨ä¸åŒçš„ç¼–ç æ–¹å¼ï¼Œä»¥åŠè°ƒæ•´MLPçš„å®¹é‡ã€‚</li><li><strong>æ–¹æ³•çš„å¤šæ ·æ€§ï¼š</strong> è¿™äº›æ–¹æ³•åŒ…æ‹¬ç©ºé—´ç¦»æ•£åŒ–çš„ä¸åŒå˜ä½“[Chenç­‰äººï¼Œ2022b,aï¼›Fridovich-Keilå’ŒYuç­‰äººï¼Œ2022ï¼›Garbinç­‰äººï¼Œ2021ï¼›Hedmanç­‰äººï¼Œ2021ï¼›Reiserç­‰äººï¼Œ2021ï¼›Takikawaç­‰äººï¼Œ2021ï¼›Wuç­‰äººï¼Œ2022ï¼›Yuç­‰äººï¼Œ2021]ï¼Œcodebook[ Takikawaç­‰äººï¼Œ2022]ä»¥åŠä½¿ç”¨å“ˆå¸Œè¡¨ç­‰ç¼–ç [MÃ¼llerç­‰äººï¼Œ2022]çš„æ–¹æ³•ï¼Œå…è®¸ä½¿ç”¨è¾ƒå°çš„MLPæˆ–å®Œå…¨æ”¾å¼ƒç¥ç»ç½‘ç»œ[Fridovich-Keilå’ŒYuç­‰äººï¼Œ2022ï¼›Sunç­‰äººï¼Œ2022]ã€‚</li></ol><p>æœ€åï¼Œä½œè€…ä»‹ç»äº†ä¸¤ä¸ªæœ€è‘—åçš„æ–¹æ³•ï¼Œå³InstantNGPå’ŒPlenoxelsï¼Œå¹¶å¯¹å®ƒä»¬çš„ç‰¹ç‚¹è¿›è¡Œäº†è®¨è®ºï¼š</p><ol><li><strong>InstantNGPï¼š</strong> InstantNGP [MÃ¼llerç­‰äººï¼Œ2022] æ˜¯ä½¿ç”¨å“ˆå¸Œç½‘æ ¼å’Œå ç”¨ç½‘æ ¼æ¥åŠ é€Ÿè®¡ç®—çš„æ–¹æ³•ã€‚å®ƒé‡‡ç”¨è¾ƒå°çš„MLPæ¥è¡¨ç¤ºå¯†åº¦å’Œå¤–è§‚ã€‚è¯¥æ–¹æ³•ä½¿ç”¨çƒè°å‡½æ•°ï¼ˆSpherical Harmonicsï¼‰ç›´æ¥è¡¨ç¤ºæ–¹å‘æ•ˆåº”ã€‚</li><li><strong>Plenoxelsï¼š</strong> Plenoxels [Fridovich-Keilå’ŒYuç­‰äººï¼Œ2022] åˆ™é‡‡ç”¨äº†ç¨€ç–çš„ä½“ç´ ç½‘æ ¼æ¥æ’å€¼ä¸€ä¸ªè¿ç»­çš„å¯†åº¦åœºï¼Œå¹¶ä¸”å¯ä»¥å®Œå…¨æ”¾å¼ƒç¥ç»ç½‘ç»œã€‚Plenoxels ä¹Ÿä¾èµ–äºçƒè°å‡½æ•°ï¼Œå‰è€…ç”¨äºç›´æ¥è¡¨ç¤ºæ–¹å‘æ•ˆåº”ï¼Œåè€…ç”¨äºå°†è¾“å…¥ç¼–ç åˆ°é¢œè‰²ç½‘ç»œã€‚</li><li><strong>æ–¹æ³•çš„å±€é™æ€§ï¼š</strong> å°½ç®¡è¿™ä¸¤ç§æ–¹æ³•æä¾›äº†å‡ºè‰²çš„ç»“æœï¼Œä½†å®ƒä»¬ä»ç„¶å¯èƒ½åœ¨æœ‰æ•ˆè¡¨ç¤ºç©ºç™½ç©ºé—´æ–¹é¢é‡åˆ°å›°éš¾ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šå–å†³äºåœºæ™¯/æ•è·ç±»å‹ã€‚æ­¤å¤–ï¼Œå›¾åƒè´¨é‡å¾ˆå¤§ç¨‹åº¦ä¸Šå—é™äºç”¨äºåŠ é€Ÿçš„ç»“æ„åŒ–ç½‘æ ¼çš„é€‰æ‹©ï¼Œè€Œæ¸²æŸ“é€Ÿåº¦åˆ™å—åˆ°éœ€è¦æŸ¥è¯¢è®¸å¤šæ ·æœ¬ä»¥è¿›è¡Œç»™å®šå°„çº¿è¡Œè¿›æ­¥éª¤çš„å½±å“ã€‚</li><li><strong>ä½œè€…çš„æ–¹æ³•ï¼š</strong> ä½œè€…å£°ç§°ï¼Œä»–ä»¬æ‰€é‡‡ç”¨çš„éç»“æ„åŒ–ã€æ˜ç¡®çš„GPUå‹å¥½çš„3Dé«˜æ–¯æ–¹æ³•å¯ä»¥åœ¨æ²¡æœ‰ç¥ç»ç»„ä»¶çš„æƒ…å†µä¸‹å®ç°æ›´å¿«çš„æ¸²æŸ“é€Ÿåº¦å’Œæ›´å¥½çš„è´¨é‡ã€‚è¿™è¡¨æ˜ä½œè€…çš„æ–¹æ³•æ—¨åœ¨è§£å†³ä¸€äº›ç°æœ‰æ–¹æ³•å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼Œå¦‚ç©ºç™½ç©ºé—´è¡¨ç¤ºå’Œç»“æ„åŒ–ç½‘æ ¼å¯¹å›¾åƒè´¨é‡å’Œæ¸²æŸ“é€Ÿåº¦çš„å½±å“ã€‚</li></ol><h4 id="2-3-Point-Based-Rendering-and-Radiance-Fields"><a href="#2-3-Point-Based-Rendering-and-Radiance-Fields" class="headerlink" title="2.3 Point-Based Rendering and Radiance Fields"></a>2.3 Point-Based Rendering and Radiance Fields</h4><blockquote><p>è¿™éƒ¨åˆ†Chart GPTè¡¨ç°å¾—å¾ˆå·®ï¼Œæ€»ç»“çš„ä¸å¤ªåˆ°ä½ã€‚</p></blockquote><p>åœ¨è¿™ä¸ªéƒ¨åˆ†ï¼Œä½œè€…é¦–å…ˆä»‹ç»äº†åŸºäºç‚¹äº‘çš„æ¸²æŸ“æ–¹æ³•ï¼š</p><ol><li><strong>ç‚¹äº‘æ¸²æŸ“çš„æœ‰æ•ˆæ€§ï¼š</strong> ä½œè€…æŒ‡å‡ºï¼ŒåŸºäºç‚¹çš„æ–¹æ³•èƒ½å¤Ÿé«˜æ•ˆåœ°æ¸²æŸ“æ–­å¼€è¿æ¥ï¼ˆdisconnectedï¼‰å’Œéç»“æ„åŒ–çš„å‡ ä½•æ ·æœ¬ï¼ˆunstructured geometry samplesï¼‰ï¼Œå³ç‚¹äº‘[Grosså’ŒPfisterï¼Œ2011]ã€‚</li><li><strong>ç‚¹é‡‡æ ·æ¸²æŸ“çš„ç®€å•å½¢å¼ï¼š</strong> åœ¨å…¶æœ€ç®€å•çš„å½¢å¼ä¸­ï¼Œç‚¹é‡‡æ ·æ¸²æŸ“[Grossmanå’ŒDallyï¼Œ1998]ä¼šå¯¹ä¸€ç»„å…·æœ‰å›ºå®šå¤§å°çš„éç»“æ„åŒ–ç‚¹è¿›è¡Œå…‰æ …åŒ–ã€‚è¯¥è¿‡ç¨‹å¯èƒ½åˆ©ç”¨å›¾å½¢APIæœ¬åœ°æ”¯æŒçš„ç‚¹ç±»å‹[Sainzå’ŒPajarolaï¼Œ2004]ï¼Œä¹Ÿå¯èƒ½åœ¨GPUä¸Šé€šè¿‡å¹¶è¡Œè½¯ä»¶å…‰æ …åŒ–[Laineå’ŒKarrasï¼Œ2011ï¼›SchÃ¼tzç­‰äººï¼Œ2022]è¿›è¡Œã€‚</li><li><strong>ç‚¹é‡‡æ ·æ¸²æŸ“çš„é—®é¢˜ï¼š</strong> å°½ç®¡ç‚¹é‡‡æ ·æ¸²æŸ“åœ¨ä¿æŒåº•å±‚æ•°æ®çš„çœŸå®æ€§æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œä½†å®ƒå­˜åœ¨ä¸€äº›é—®é¢˜ï¼ŒåŒ…æ‹¬å‡ºç°å­”æ´ã€å¯¼è‡´èµ°æ ·ï¼Œå¹¶ä¸”ä¸¥æ ¼æ˜¯ä¸è¿ç»­çš„ã€‚</li><li><strong>é«˜è´¨é‡çš„ç‚¹æ¸²æŸ“æ–¹æ³•ï¼š</strong> ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œå…³äºé«˜è´¨é‡ç‚¹æ¸²æŸ“çš„å¼€åˆ›æ€§å·¥ä½œé‡‡ç”¨äº†ä¸€ç§ç§°ä¸ºâ€œsplattingâ€çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†ç‚¹åŸè¯­æ˜ å°„ä¸ºè¶…è¿‡ä¸€ä¸ªåƒç´ çš„èŒƒå›´ï¼Œä¾‹å¦‚åœ†å½¢æˆ–æ¤­åœ†å½¢ç›˜ã€æ¤­çƒä½“æˆ–æ›²é¢å…ƒç´ [Botschç­‰äººï¼Œ2005ï¼›Pfisterç­‰äººï¼Œ2000ï¼›Renç­‰äººï¼Œ2002ï¼›Zwickerç­‰äººï¼Œ2001b]ã€‚</li></ol><p>ä¹‹åå¼€å§‹ä»‹ç»æœ€è¿‘å¯¹å¯å¾®åˆ†åŸºäºç‚¹äº‘çš„æ¸²æŸ“æŠ€æœ¯å¼€å±•çš„ç ”ç©¶å·¥ä½œï¼š</p><ol><li><strong>å¯å¾®åˆ†çš„ç‚¹æ¸²æŸ“æŠ€æœ¯çš„è¿‘æœŸå…´è¶£ï¼š</strong> ä½œè€…æŒ‡å‡ºäº†å¯¹ä¸åŒiable point-based rendering techniquesï¼ˆå¯å¾®åˆ†çš„åŸºäºç‚¹çš„æ¸²æŸ“æŠ€æœ¯ï¼‰çš„æœ€è¿‘å…´è¶£ã€‚å¼•æ–‡[Wilesç­‰äººï¼Œ2020ï¼›Yifanç­‰äººï¼Œ2019]å¯èƒ½æ˜¯ä¸è¿™ä¸€é¢†åŸŸç›¸å…³çš„æœ€æ–°ç ”ç©¶ï¼Œè¡¨æ˜äº†å­¦æœ¯ç•Œå¯¹è¿™ç§æŠ€æœ¯çš„å…³æ³¨ã€‚</li><li><strong>ç‚¹äº‘å¢å¼ºå’Œç¥ç»ç½‘ç»œæ¸²æŸ“ï¼š</strong> è¯¥éƒ¨åˆ†æåˆ°äº†ç‚¹äº‘è¢«å¢å¼ºä¸ºç¥ç»ç‰¹å¾ï¼Œå¹¶ä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰è¿›è¡Œæ¸²æŸ“çš„æŠ€æœ¯ã€‚å¼•æ–‡[Alievç­‰äººï¼Œ2020ï¼›RÃ¼ckertç­‰äººï¼Œ2022]å¯èƒ½æä¾›äº†è¿™äº›æŠ€æœ¯çš„å®ç°ç»†èŠ‚å’ŒèƒŒåçš„åŸç†ã€‚è¿™äº›æ–¹æ³•å¯ä»¥å®ç°å¿«é€Ÿç”šè‡³å®æ—¶çš„è§†å›¾åˆæˆï¼Œä½†ä»ç„¶ä¾èµ–äºå¤šè§†å›¾ç«‹ä½“åŒ¹é…ï¼ˆMVSï¼‰ä»¥è·å–åˆå§‹å‡ ä½•ä¿¡æ¯ï¼Œå› æ­¤åœ¨ä¸€äº›éš¾ä»¥å¤„ç†çš„æƒ…å†µä¸‹ï¼Œä¾‹å¦‚æ— ç‰¹å¾/é—ªå…‰åŒºåŸŸæˆ–ç»†å°ç»“æ„ä¸­ï¼Œä»ç„¶ä¼šå—åˆ°MVSçš„å½±å“ï¼Œå°¤å…¶æ˜¯è¿‡åº¦æˆ–ä¸è¶³çš„é‡å»ºã€‚</li><li><strong>ä¾èµ–MVSçš„å±€é™æ€§ï¼š</strong> ä½œè€…å¼ºè°ƒäº†è¿™äº›å¯å¾®åˆ†çš„ç‚¹æ¸²æŸ“æŠ€æœ¯çš„ä¸€ä¸ªå±€é™æ€§ï¼Œå³å®ƒä»¬ä»ç„¶ä¾èµ–äºå¤šè§†å›¾ç«‹ä½“åŒ¹é…ï¼ˆMVSï¼‰æ¥è·å¾—åˆå§‹å‡ ä½•ä¿¡æ¯ã€‚è¿™ç§ä¾èµ–å¯èƒ½å¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†ä¸€äº›å¤æ‚åœºæ™¯æ—¶ï¼Œå¦‚ç¼ºä¹ç‰¹å¾æˆ–è¡¨é¢åå°„å…‰æ»‘çš„åŒºåŸŸï¼Œä»¥åŠç»†å°ç»“æ„ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼ŒMVSå¯èƒ½ä¼šäº§ç”Ÿè¿‡åº¦æˆ–ä¸è¶³çš„é‡å»ºï¼Œä»è€Œå½±å“æœ€ç»ˆçš„æ¸²æŸ“æ•ˆæœã€‚</li></ol><p>è¿›è¡Œäº†ä¸Šé¢çš„ä¸€äº›é“ºå«ä¹‹åï¼Œä½œè€…å¼€å§‹æŒ‡å‡º<strong>åŸºäºç‚¹äº‘çš„ ğ›¼-blending å’Œ NeRF é£æ ¼çš„ä½“ç§¯æ¸²æŸ“æœ¬è´¨ä¸Šå…±äº«ç›¸åŒçš„å›¾åƒå½¢æˆæ¨¡å‹ï¼Œä½†æ˜¯å›¾åƒçš„æ¸²æŸ“ç®—æ³•å´ä¸åŒ</strong>ï¼š</p><ul><li>NeRFæ˜¯ä¸€ç§è¿ç»­è¡¨ç¤ºï¼Œéšå¼åœ°è¡¨ç¤ºäº†ç©º/å ç”¨çš„ç©ºé—´ï¼Œä¸ºäº†æ¸²æŸ“å›¾è±¡ï¼Œéœ€è¦è¿›è¡Œæ˜‚è´µçš„éšæœºé‡‡æ ·ï¼Œä»è€Œå¯¼è‡´å™ªå£°å’Œè®¡ç®—å¼€é”€ã€‚</li><li>è€Œç‚¹äº‘æ˜¯ä¸€ç§éç»“æ„åŒ–ã€ç¦»æ•£çš„è¡¨ç¤ºï¼Œè¶³å¤Ÿçµæ´»ï¼Œå¯ä»¥å…è®¸å‡ ä½•ä½“çš„åˆ›å»ºã€é”€æ¯å’Œç§»åŠ¨ã€‚</li></ul><p>ä¹‹åï¼Œä½œè€…å¼€å§‹è®¨è®ºå¿«é€Ÿæ¸²æŸ“ç›¸å…³çš„å·¥ä½œï¼š</p><ul><li>Pulsar [Lassner and Zollhofer 2021] å®ç°äº†å¿«é€Ÿçš„çƒä½“å…‰æ …åŒ–ï¼Œè¿™å¯å‘äº†ä½œè€…å¼€å‘ç“¦ç‰‡å’Œæ’åºæ¸²æŸ“å™¨ã€‚åœ¨ä¸Šæ–‡çš„åˆ†æåŸºç¡€ä¸Šï¼Œä½œè€…å†³å®šä¿æŒå¯¹æ’åºç‚¹è¿›è¡Œï¼ˆè¿‘ä¼¼çš„ï¼‰ä¼ ç»Ÿ ğ›¼-æ··åˆï¼Œè¿™ä¸€å†³ç­–æ—¨åœ¨ä¿ç•™ä½“ç§¯è¡¨ç¤ºçš„ä¼˜åŠ¿ã€‚ä½œè€…çš„å…‰æ …åŒ–è¿‡ç¨‹åœ¨å¤„ç†æ’åºåçš„ç‚¹æ—¶å°Šé‡èƒ½è§åº¦é¡ºåºï¼Œä¸ Pulsar çš„æ— åºæ–¹æ³•å½¢æˆå¯¹æ¯”ã€‚</li><li>å‰è¿°æåˆ°çš„å…¶ä»–æ–¹æ³•ä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNsï¼‰è¿›è¡Œæ¸²æŸ“ï¼Œä½†è¿™å¯èƒ½å¯¼è‡´æ—¶é—´ä¸Šçš„ä¸ç¨³å®šæ€§ã€‚å°½ç®¡å¦‚æ­¤ï¼ŒPulsar [Lassner and Zollhofer 2021] å’Œ ADOP [RÃ¼ckert et al. 2022] çš„æ¸²æŸ“é€Ÿåº¦ä»ç„¶ä½œä¸ºæ¿€å‘å› ç´ ï¼Œé©±ä½¿ä½œè€…å¼€å‘å‡ºå¿«é€Ÿæ¸²æŸ“è§£å†³æ–¹æ¡ˆã€‚</li></ul><p>æ¥ä¸‹æ¥ä½œè€…è®¨è®ºäº†ä¸€äº›ç›¸å…³çš„å·¥ä½œï¼š</p><ol><li><strong>Neural Point Catacaustics [Kopanas et al. 2022]çš„ç‰¹ç‚¹ï¼š</strong><ul><li>è¯¥æ–¹æ³•ä¸“æ³¨äºå¤„ç†é•œé¢æ•ˆæœã€‚åœ¨æ‰©æ•£ç‚¹æ¸²æŸ“æ–¹é¢ï¼Œé€šè¿‡ä½¿ç”¨å¤šå±‚æ„ŸçŸ¥å™¨ï¼ˆMLPï¼‰ï¼Œè¯¥æ–¹æ³•å…‹æœäº†æ¸²æŸ“è¿‡ç¨‹ä¸­çš„æ—¶é—´ä¸ç¨³å®šæ€§ã€‚ç„¶è€Œï¼Œä»ç„¶éœ€è¦å¤šè§†å›¾ç«‹ä½“åŒ¹é…ï¼ˆMVSï¼‰å‡ ä½•ä½œä¸ºè¾“å…¥ã€‚</li></ul></li><li><strong>æœ€æ–°æ–¹æ³• [Zhang et al. 2022] çš„ç‰¹ç‚¹ï¼š</strong><ul><li>åœ¨åŒä¸€ç±»åˆ«ä¸­ï¼Œæœ€è¿‘çš„æ–¹æ³•[Zhang et al. 2022]ä¸éœ€è¦ MVSï¼Œå¹¶ä½¿ç”¨çƒè°ï¼ˆSHï¼‰æ¥è¡¨ç¤ºæ–¹å‘ã€‚ç„¶è€Œï¼Œè¯¥æ–¹æ³•åªèƒ½å¤„ç†å•ä¸€ç‰©ä½“çš„åœºæ™¯ï¼Œå¹¶éœ€è¦è’™ç‰ˆè¿›è¡Œåˆå§‹åŒ–ã€‚</li><li>å°½ç®¡åœ¨å°åˆ†è¾¨ç‡å’Œä½ç‚¹æ•°çš„æƒ…å†µä¸‹æ¸²æŸ“é€Ÿåº¦è¾ƒå¿«ï¼Œä½†å¯¹äºå…¸å‹æ•°æ®é›†çš„åœºæ™¯å¦‚ä½•æ‰©å±•ä»ç„¶ä¸æ˜ç¡®ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å…¸å‹æ•°æ®é›†[Barron et al. 2022; Hedman et al. 2018; Knapitsch et al. 2017]æ—¶çš„è¡¨ç°ã€‚ã€</li></ul></li><li><strong>æœ€æ–°æ–¹æ³• [Xu et al. 2022] çš„ç‰¹ç‚¹ï¼š</strong><ul><li>è¿™ä¸€æœ€æ–°çš„æ–¹æ³•ä½¿ç”¨ç‚¹æ¥è¡¨ç¤ºä¸€ä¸ªè¾å°„åœºï¼Œé‡‡ç”¨å¾„å‘åŸºå‡½æ•°æ–¹æ³•ã€‚</li><li>åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œè¯¥æ–¹æ³•é‡‡ç”¨äº†ç‚¹ä¿®å‰ªå’Œç¨ å¯†åŒ–æŠ€æœ¯ã€‚å°½ç®¡é‡‡å–äº†è¿™äº›ä¼˜åŒ–æªæ–½ï¼Œä½†è¯¥æ–¹æ³•ä»ç„¶ä½¿ç”¨ä½“ç§¯å…‰çº¿æŠ•å°„ï¼ˆvolumetric ray-marchingï¼‰ï¼Œæ— æ³•è¾¾åˆ°å®æ—¶æ˜¾ç¤ºé€Ÿç‡ã€‚</li></ul></li><li><strong>ä½œè€…çš„æ–¹æ³•çš„ä¼˜åŠ¿ï¼š</strong><ul><li>ä½œè€…é‡‡ç”¨äº†ä¸‰ç»´é«˜æ–¯åˆ†å¸ƒä½œä¸ºæ›´çµæ´»çš„åœºæ™¯è¡¨ç¤ºï¼Œé¿å…äº†å¯¹MVSå‡ ä½•çš„éœ€æ±‚ï¼Œå¹¶é€šè¿‡ç“¦ç‰‡æ¸²æŸ“ç®—æ³•å®ç°äº†å¯¹æŠ•å½±é«˜æ–¯åˆ†å¸ƒçš„å®æ—¶æ¸²æŸ“ã€‚è¿™ä½¿å¾—ä»–ä»¬çš„æ–¹æ³•åœ¨å®æ—¶æ¸²æŸ“æ–¹é¢å…·æœ‰ä¼˜åŠ¿ã€‚</li></ul></li></ol><p>æœ€åä½œè€…æåˆ°äº†è‡ªå·±ä¸ºä»€ä¹ˆé€‰æ‹©é€‰æ‹©3Dé«˜æ–¯åˆ†å¸ƒï¼š</p><ol><li><strong>åœ¨äººä½“æ€§èƒ½æ•æ‰é¢†åŸŸçš„åº”ç”¨ï¼š</strong><ul><li>3Dé«˜æ–¯åˆ†å¸ƒæ›¾è¢«ç”¨äºè¡¨ç¤ºæ•æ‰åˆ°çš„äººä½“[Rhodin et al. 2015; Stoll et al. 2011]ï¼Œæœ€è¿‘è¿˜åœ¨è§†è§‰ä»»åŠ¡ä¸­ä¸ä½“ç§¯å…‰çº¿æŠ•å°„ä¸€èµ·ä½¿ç”¨[Wang et al. 2023]ã€‚</li><li>åœ¨ç±»ä¼¼çš„èƒŒæ™¯ä¸‹ï¼Œä¸€äº›æ–¹æ³•æå‡ºäº†ç¥ç»ä½“ç§¯åŸºå…ƒ[Lombardi et al. 2021]ã€‚è¿™äº›æ–¹æ³•å¯å‘äº†é€‰æ‹©3Dé«˜æ–¯åˆ†å¸ƒä½œä¸ºåœºæ™¯è¡¨ç¤ºçš„å†³ç­–ã€‚</li></ul></li><li><strong>å¯¹æ¯”ä¸å…¶ä»–æ–¹æ³•çš„åŒºåˆ«ï¼š</strong><ul><li>è™½ç„¶è¿™äº›æ–¹æ³•å¯å‘äº†é€‰æ‹©3Dé«˜æ–¯åˆ†å¸ƒï¼Œä½†å®ƒä»¬ä¸»è¦ä¸“æ³¨äºé‡å»ºå’Œæ¸²æŸ“å•ä¸ªå­¤ç«‹å¯¹è±¡ï¼ˆå¦‚äººä½“æˆ–é¢éƒ¨ï¼‰ï¼Œå¯¼è‡´åœºæ™¯å…·æœ‰è¾ƒå°çš„æ·±åº¦å¤æ‚æ€§ã€‚</li><li>ä¸ä¹‹ç›¸åï¼Œä½œè€…çš„æ–¹æ³•é€šè¿‡ä¼˜åŒ–å„å‘å¼‚æ€§åæ–¹å·®ã€äº¤é”™çš„ä¼˜åŒ–/å¯†åº¦æ§åˆ¶ä»¥åŠæœ‰æ•ˆçš„æ·±åº¦æ’åºæ¸²æŸ“ï¼Œä½¿å…¶èƒ½å¤Ÿå¤„ç†å®Œæ•´ã€å¤æ‚çš„åœºæ™¯ï¼ŒåŒ…æ‹¬å®¤å†…å¤–èƒŒæ™¯ï¼Œå¹¶å…·æœ‰è¾ƒå¤§çš„æ·±åº¦å¤æ‚æ€§ã€‚</li></ul></li></ol><h3 id="3-OVERVIEW"><a href="#3-OVERVIEW" class="headerlink" title="3 OVERVIEW"></a>3 OVERVIEW</h3><p><img src="/images/paper-reading-3d-gaussian-splatting.assets/image-20231220230130536.png"></p><ol><li><p><strong>è¾“å…¥ï¼š</strong></p><ul><li>æ–¹æ³•çš„è¾“å…¥æ˜¯ä¸€ä¸ªé™æ€åœºæ™¯çš„å›¾åƒé›†ï¼Œä»¥åŠç”±SfMï¼ˆStructure from Motionï¼‰[SchÃ¶nberger and Frahm 2016]æ ¡å‡†çš„ç›¸åº”ç›¸æœºï¼Œè¿™äº§ç”Ÿäº†ä¸€ä¸ªç¨€ç–ç‚¹äº‘ã€‚</li><li>ä»è¿™äº›ç‚¹ä¸­ï¼Œåˆ›å»ºäº†ä¸€ç»„3Dé«˜æ–¯åˆ†å¸ƒï¼Œè¿™äº›é«˜æ–¯åˆ†å¸ƒç”±ä½ç½®ï¼ˆå‡å€¼ï¼‰ã€åæ–¹å·®çŸ©é˜µå’Œä¸é€æ˜åº¦ ğ›¼ å®šä¹‰ï¼Œä»è€Œå®ç°äº†éå¸¸çµæ´»çš„ä¼˜åŒ–è¿‡ç¨‹ã€‚</li></ul></li><li><p><strong>åœºæ™¯è¡¨ç¤ºï¼š</strong></p><ul><li>ä½¿ç”¨3Dé«˜æ–¯åˆ†å¸ƒå¯¹åœºæ™¯è¿›è¡Œè¡¨ç¤ºï¼ŒåŒ…æ‹¬ä½ç½®ã€åæ–¹å·®çŸ©é˜µå’Œä¸é€æ˜åº¦ ğ›¼ã€‚è¿™ä½¿å¾—å¯ä»¥çµæ´»åœ°è¿›è¡Œä¼˜åŒ–ï¼Œå¹¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šå®ç°äº†å¯¹3Dåœºæ™¯çš„ç´§å‡‘è¡¨ç¤ºã€‚</li><li>åˆ©ç”¨å„å‘å¼‚æ€§çš„ä½“ç§¯æ–‘ç‚¹å¯ä»¥ç´§å‡‘åœ°è¡¨ç¤ºç»†å°ç»“æ„ã€‚</li></ul></li><li><p><strong>è¾å°„åœºçš„æ–¹å‘å¤–è§‚ç»„ä»¶ï¼š</strong></p><ul><li>è¾å°„åœºçš„æ–¹å‘å¤–è§‚ç»„ä»¶ï¼ˆé¢œè‰²ï¼‰é€šè¿‡çƒè°å‡½æ•°ï¼ˆSHï¼‰è¡¨ç¤ºï¼Œç¬¦åˆæ ‡å‡†å®è·µ[Fridovich-Keil and Yu et al. 2022; MÃ¼ller et al. 2022]ã€‚</li></ul></li><li><p><strong>è¾å°„åœºè¡¨ç¤ºçš„åˆ›å»ºï¼š</strong></p><ul><li>ç®—æ³•é€šè¿‡ä¸€ç³»åˆ—å¯¹3Dé«˜æ–¯åˆ†å¸ƒå‚æ•°çš„ä¼˜åŒ–æ­¥éª¤è¿›è¡Œè¾å°„åœºè¡¨ç¤ºçš„åˆ›å»ºï¼ŒåŒ…æ‹¬ä½ç½®ã€åæ–¹å·®ã€ğ›¼å’ŒSHç³»æ•°çš„äº¤æ›¿æ“ä½œï¼Œä»¥åŠç”¨äºè‡ªé€‚åº”æ§åˆ¶é«˜æ–¯å¯†åº¦çš„æ“ä½œã€‚</li></ul></li><li><p><strong>æ–¹æ³•çš„æ•ˆç‡å…³é”®ï¼š</strong></p><ul><li>æ–¹æ³•çš„æ•ˆç‡å…³é”®åœ¨äºå…¶åŸºäºç“¦ç‰‡çš„å…‰æ …åŒ–å™¨ï¼Œå®ƒå…è®¸å„å‘å¼‚æ€§æ–‘ç‚¹çš„ ğ›¼-æ··åˆï¼Œå¹¶é€šè¿‡å¿«é€Ÿæ’åºå®ç°äº†å¯¹å¯è§æ€§é¡ºåºçš„å°Šé‡ã€‚</li><li>å¿«é€Ÿå…‰æ …åŒ–å™¨è¿˜åŒ…æ‹¬ä¸€ä¸ªå¿«é€Ÿçš„åå‘ä¼ é€’è¿‡ç¨‹ï¼Œé€šè¿‡è·Ÿè¸ªç´¯ç§¯çš„ ğ›¼ å€¼ï¼Œè€Œä¸é™åˆ¶å¯ä»¥æ¥æ”¶æ¢¯åº¦çš„é«˜æ–¯åˆ†å¸ƒçš„æ•°é‡ã€‚</li></ul></li><li><p><strong>æ–¹æ³•æ¦‚è§ˆï¼š</strong></p><p><strong>ä¼˜åŒ–èµ·ç‚¹ï¼š</strong>ä¼˜åŒ–çš„èµ·ç‚¹æ˜¯ç¨€ç–çš„SfMç‚¹äº‘ï¼Œè¯¥ç‚¹äº‘é€šè¿‡ä¼˜åŒ–ç”Ÿæˆä¸€ç»„3Dé«˜æ–¯åˆ†å¸ƒã€‚</p><p><strong>å¯†åº¦è‡ªé€‚åº”æ§åˆ¶ï¼š</strong>å¯¹è¿™ç»„é«˜æ–¯åˆ†å¸ƒè¿›è¡Œå¯†åº¦çš„ä¼˜åŒ–å’Œè‡ªé€‚åº”æ§åˆ¶ã€‚</p><p><strong>å…‰æ …åŒ–å™¨çš„è¿ç”¨ï¼š</strong>åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨äº†å¿«é€ŸåŸºäºç“¦ç‰‡çš„æ¸²æŸ“å™¨ï¼Œä½¿å¾—è®­ç»ƒæ—¶é—´ä¸å½“å‰é¢†å…ˆçš„å¿«é€Ÿè¾å°„åœºæ–¹æ³•ç›¸æ¯”å…·æœ‰ç«äº‰åŠ›ã€‚</p><p><strong>è®­ç»ƒåçš„æ¸²æŸ“å™¨ï¼š</strong>è®­ç»ƒå®Œæˆåï¼Œè¯¥æ¸²æŸ“å™¨èƒ½å¤Ÿå®ç°å¯¹å„ç§åœºæ™¯çš„å®æ—¶å¯¼èˆªï¼Œä¸ºç”¨æˆ·æä¾›é«˜æ•ˆçš„æ¸²æŸ“æ€§èƒ½ã€‚</p></li></ol><h3 id="4-DIFFERENTIABLE-3D-GAUSSIAN-SPLATTING"><a href="#4-DIFFERENTIABLE-3D-GAUSSIAN-SPLATTING" class="headerlink" title="4 DIFFERENTIABLE 3D GAUSSIAN SPLATTING"></a>4 DIFFERENTIABLE 3D GAUSSIAN SPLATTING</h3><blockquote><p>å’ŒGPTèŠä¸€èŠ$\exp\left(-\frac{1}{2} \mathbf{x}^T \boldsymbol{\Sigma}^{-1} \mathbf{x}\right)$ï¼Œå¹¶ä¸”æŒ‡å®š$\Sigma=RSS^TR^T$çš„æƒ…å†µä¸‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p><p>é“¾æ¥ï¼š<a href="https://chat.openai.com/share/0cfb56e4-30a5-4bd8-9c23-89aa36660d7f">https://chat.openai.com/share/0cfb56e4-30a5-4bd8-9c23-89aa36660d7f</a></p><p>ä¸‹é¢æ˜¯èŠçš„å†…å®¹ã€‚</p></blockquote><ul><li><p>ä¸‰ç»´é«˜æ–¯åˆ†å¸ƒçš„å…¬å¼æ˜¯ä»€ä¹ˆï¼Ÿ</p><p><img src="/images/paper-reading-3d-gaussian-splatting.assets/image-20231222145534792.png"></p></li><li><p>å‡è®¾$\mu=0$ï¼Œå¿½ç•¥æ‰é™¤äº†exp()ä¹‹å¤–çš„ä¸œè¥¿ï¼Œå†™å‡ºè¿™ä¸ªè¡¨è¾¾å¼</p><p><img src="/images/paper-reading-3d-gaussian-splatting.assets/image-20231222145611221.png"></p></li><li><p>å¿½ç•¥æ‰å‰é¢æˆ‘ä»¬äº¤æµçš„å†…å®¹ï¼Œæˆ‘ä»¬ç°åœ¨åªçœ‹è¿™ä¸ªè¡¨è¾¾å¼ï¼š $\exp\left(-\frac{1}{2} \mathbf{x}^T \boldsymbol{\Sigma}^{-1} \mathbf{x}\right)$ï¼Œè¯·æ³¨æ„$x$æ˜¯ä¸‰ç»´å‘é‡ã€‚è¿™ä¸ªè¡¨è¾¾å¼çš„å‡ ä½•æ„ä¹‰æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p><img src="/images/paper-reading-3d-gaussian-splatting.assets/image-20231222145651137.png"></p></li><li><p>ä¸ºäº†ç»§ç»­è®¨è®ºï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å®šä¹‰æ—‹è½¬çŸ©é˜µ$R$ï¼Œç¼©æ”¾çŸ©é˜µ$S$ï¼Œè¯·æ³¨æ„æˆ‘ä»¬è®¨è®ºçš„éƒ½æ˜¯åœ¨ä¸‰ç»´ç©ºé—´ä¸‹ã€‚</p><p><img src="/images/paper-reading-3d-gaussian-splatting.assets/image-20231222150037855.png"></p></li><li><p>å¦‚æœæˆ‘ä»¤$\Sigma=RSS^TR^T$ï¼Œé‚£ä¹ˆæ­¤æ—¶çš„$\Sigma$å¯¹äºé«˜æ–¯åˆ†å¸ƒ$\exp\left(-\frac{1}{2} \mathbf{x}^T \boldsymbol{\Sigma}^{-1} \mathbf{x}\right)$èµ·äº†ä»€ä¹ˆæ ·çš„ä½œç”¨ï¼Ÿ</p><p><img src="/images/paper-reading-3d-gaussian-splatting.assets/image-20231222150124805.png"></p></li><li><p>å…·ä½“æ¥è¯´ä¸åŒçš„$R$å’Œ$S$å°†å¦‚ä½•å½±å“è¿™ä¸ªé«˜æ–¯åˆ†å¸ƒï¼Ÿ</p><p><img src="/images/paper-reading-3d-gaussian-splatting.assets/image-20231222150148188.png"></p></li><li><p>å‘é‡$x$å¯¹é«˜æ–¯åˆ†å¸ƒæœ‰ä»€ä¹ˆæ ·çš„å½±å“ï¼Ÿ</p><p><img src="/images/paper-reading-3d-gaussian-splatting.assets/image-20231222150219404.png"></p></li><li><p>é‚£ä¹ˆï¼Œå†ç»™å®š$\Sigma=RSS^TR^T$çš„å‰æä¸‹ï¼Œ$\exp\left(-\frac{1}{2} \mathbf{x}^T \boldsymbol{\Sigma}^{-1} \mathbf{x}\right)$å…¶å®å°±æ˜¯è¡¨ç¤ºäº†åœ¨ä½ç½®$\mathbf{x}$å¤„çš„ä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒï¼Œè€Œä¸”è¿™ä¸ªé«˜æ–¯åˆ†å¸ƒæ¥è¿‘ä¸€ä¸ªæ¤­çƒï¼Œæ¤­çƒçš„å½¢çŠ¶å—åˆ°äº†æ—‹è½¬çŸ©é˜µRå’Œç¼©æ”¾çŸ©é˜µSçš„å½±å“ï¼Œæˆ‘è¿™æ ·ç†è§£å¯¹å—ï¼Ÿ</p><p><img src="/images/paper-reading-3d-gaussian-splatting.assets/image-20231222150244397.png"></p></li></ul><h3 id="5-OPTIMIZATION-WITH-ADAPTIVE-DENSITY-CONTROL-OF-3D-GAUSSIANS"><a href="#5-OPTIMIZATION-WITH-ADAPTIVE-DENSITY-CONTROL-OF-3D-GAUSSIANS" class="headerlink" title="5 OPTIMIZATION WITH ADAPTIVE DENSITY CONTROL OF 3D GAUSSIANS"></a>5 OPTIMIZATION WITH ADAPTIVE DENSITY CONTROL OF 3D GAUSSIANS</h3><ol><li><strong>ä¼˜åŒ–æ­¥éª¤æ ¸å¿ƒ</strong>ï¼š<ul><li>è®ºæ–‡æ–¹æ³•çš„æ ¸å¿ƒåœ¨äºä¼˜åŒ–æ­¥éª¤ï¼Œå…¶ç›®æ ‡æ˜¯åˆ›å»ºä¸€ä¸ªå¯†é›†çš„3Dé«˜æ–¯é›†åˆï¼Œä»¥å‡†ç¡®è¡¨ç¤ºç”¨äºè‡ªç”±è§†è§’åˆæˆçš„åœºæ™¯ã€‚</li></ul></li><li><strong>å‚æ•°ä¼˜åŒ–</strong>ï¼š<ul><li>ä¼˜åŒ–çš„å‚æ•°åŒ…æ‹¬ä½ç½® (ğ‘)ã€æ–¹å‘ (ğ›¼) å’Œåæ–¹å·® (Î£)ã€‚</li><li>æ­¤å¤–ï¼Œè¿˜å¯¹ä»£è¡¨æ¯ä¸ªé«˜æ–¯é¢œè‰² (ğ‘) çš„çƒè°ç³»æ•°ï¼ˆSH coefficientsï¼‰è¿›è¡Œä¼˜åŒ–ï¼Œä»¥æ­£ç¡®æ•æ‰åœºæ™¯çš„è§†è§’ç›¸å…³å¤–è§‚ã€‚</li></ul></li><li><strong>æ­¥éª¤äº¤ç»‡</strong>ï¼š<ul><li>è¿™äº›å‚æ•°çš„ä¼˜åŒ–è¿‡ç¨‹ä¸æ§åˆ¶é«˜æ–¯å¯†åº¦çš„æ­¥éª¤äº¤ç»‡åœ¨ä¸€èµ·ã€‚</li><li>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå®ç°å¯¹é«˜æ–¯å¯†åº¦çš„ç²¾ç»†æ§åˆ¶ï¼Œä»¥æ›´å¥½åœ°è¡¨ç¤ºåœºæ™¯ã€‚</li></ul></li></ol><h4 id="5-1-Optimization"><a href="#5-1-Optimization" class="headerlink" title="5.1 Optimization"></a>5.1 Optimization</h4><ol><li><strong>åŸºäºè¿­ä»£çš„ä¼˜åŒ–è¿‡ç¨‹</strong>ï¼š<ul><li>ä¼˜åŒ–çš„æ ¸å¿ƒåœ¨äºé€šè¿‡æ¸²æŸ“å’Œæ¯”è¾ƒç”Ÿæˆçš„å›¾åƒä¸è®­ç»ƒæ•°æ®é›†ä¸­çš„è§†å›¾è¿›è¡Œè¿­ä»£ã€‚</li><li>ç”±äº3Dåˆ°2DæŠ•å½±çš„ä¸ç¡®å®šæ€§ï¼Œå¯èƒ½å¯¼è‡´å‡ ä½•å…ƒç´ è¢«é”™è¯¯æ”¾ç½®ã€‚</li><li>ä¼˜åŒ–è¿‡ç¨‹éœ€è¦èƒ½å¤Ÿåˆ›å»ºã€ç ´åæˆ–ç§»åŠ¨å‡ ä½•å…ƒç´ ï¼Œä»¥çº æ­£é”™è¯¯çš„ä½ç½®ã€‚</li><li>3Dé«˜æ–¯çš„åæ–¹å·®å‚æ•°è´¨é‡å¯¹è¡¨ç¤ºçš„ç´§å‡‘æ€§è‡³å…³é‡è¦ï¼Œå› ä¸ºå°‘é‡å¤§å‹å„å‘å¼‚æ€§é«˜æ–¯å¯ä»¥æ•æ‰å¤§å—å‡åŒ€åŒºåŸŸã€‚</li></ul></li><li><strong>ä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™çš„ä¼˜åŒ–æŠ€æœ¯</strong>ï¼š<ul><li>é‡‡ç”¨éšæœºæ¢¯åº¦ä¸‹é™æŠ€æœ¯ï¼Œå……åˆ†åˆ©ç”¨GPUåŠ é€Ÿæ¡†æ¶å’Œè‡ªå®šä¹‰CUDAå†…æ ¸ã€‚</li><li>å¿«é€Ÿå…‰æ …åŒ–æ˜¯ä¼˜åŒ–è¿‡ç¨‹çš„ä¸»è¦è®¡ç®—ç“¶é¢ˆã€‚</li></ul></li><li><strong>æ¿€æ´»å‡½æ•°çš„é€‰æ‹©</strong>ï¼š<ul><li>å¯¹äºæ–¹å‘ğ›¼ï¼Œé‡‡ç”¨sigmoidæ¿€æ´»å‡½æ•°ï¼Œå°†å…¶é™åˆ¶åœ¨ [0, 1) èŒƒå›´å†…ï¼Œå¹¶è·å¾—å¹³æ»‘çš„æ¢¯åº¦ã€‚</li><li>å¯¹äºåæ–¹å·®å°ºåº¦ï¼Œé€‰æ‹©æŒ‡æ•°æ¿€æ´»å‡½æ•°ï¼ŒåŒæ ·æ˜¯ä¸ºäº†è·å¾—å¹³æ»‘çš„æ¢¯åº¦ã€‚</li></ul></li><li><strong>åˆå§‹åæ–¹å·®çŸ©é˜µçš„ä¼°è®¡å’ŒæŸå¤±å‡½æ•°è®¾è®¡</strong>ï¼š<ul><li>ä¼°è®¡åˆå§‹åæ–¹å·®çŸ©é˜µæ—¶ï¼Œé‡‡ç”¨å„å‘åŒæ€§é«˜æ–¯ï¼Œå…¶è½´é•¿åº¦ç”±åˆ°æœ€è¿‘çš„ä¸‰ä¸ªç‚¹çš„è·ç¦»å‡å€¼ç¡®å®šã€‚</li><li>ä½¿ç”¨æ ‡å‡†çš„æŒ‡æ•°è¡°å‡è°ƒåº¦æŠ€æœ¯ï¼Œä½†ä»…ç”¨äºä½ç½®å‚æ•°ã€‚</li><li>æŸå¤±å‡½æ•°åŒ…æ‹¬L1æŸå¤±å’ŒD-SSIMé¡¹çš„ç»„åˆï¼Œé€šè¿‡æƒè¡¡å‚æ•°ğœ† = 0.2è¿›è¡Œç»„åˆã€‚</li><li>æœ‰å…³å­¦ä¹ è°ƒåº¦å’Œå…¶ä»–ç»†èŠ‚ï¼Œè¯¦ç»†ä¿¡æ¯å¯åœ¨ç¬¬7.1èŠ‚ä¸­æ‰¾åˆ°ã€‚</li></ul></li></ol><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä¼˜åŒ–è¿‡ç¨‹èƒ½å¤Ÿå…‹æœ3Dåˆ°2DæŠ•å½±çš„ä¸ç¡®å®šæ€§ï¼Œé€šè¿‡è¿­ä»£ä¼˜åŒ–æé«˜åœºæ™¯è¡¨ç¤ºçš„å‡†ç¡®æ€§ï¼Œå¹¶é€šè¿‡è‡ªé€‚åº”å¯†åº¦æ§åˆ¶çš„æ‰‹æ®µçµæ´»å¤„ç†å‡ ä½•å…ƒç´ çš„ä½ç½®ï¼Œä»¥å®ç°æ›´ç²¾ç¡®çš„åœºæ™¯åˆæˆã€‚</p><h4 id="5-2-Adaptive-Control-of-Gaussians"><a href="#5-2-Adaptive-Control-of-Gaussians" class="headerlink" title="5.2 Adaptive Control of Gaussians"></a>5.2 Adaptive Control of Gaussians</h4><ol><li><p><strong>åˆå§‹æ­¥éª¤</strong>ï¼š</p><ul><li>ä»Structure from Motionï¼ˆSfMï¼‰è·å–åˆå§‹ç¨€ç–ç‚¹é›†ã€‚</li><li>é€šè¿‡è‡ªé€‚åº”æ§åˆ¶ï¼Œè°ƒæ•´é«˜æ–¯çš„æ•°é‡å’Œå¯†åº¦ï¼Œä»åˆå§‹çš„ç¨€ç–é«˜æ–¯é›†åˆè¿‡æ¸¡åˆ°æ›´å¯†é›†çš„é›†åˆã€‚</li></ul></li><li><p><strong>é‡ç‚¹åŒºåŸŸçš„æ§åˆ¶</strong>ï¼š</p><p>è‡ªé€‚åº”æ§åˆ¶ç€çœ¼äºä¸¤ç§å…³é”®åŒºåŸŸï¼š</p><ul><li>â€œunder-reconstructionâ€åŒºåŸŸï¼Œå³ç¼ºä¹å‡ ä½•ç‰¹å¾çš„åŒºåŸŸã€‚<ul><li>é’ˆå¯¹è¿™äº›åŒºåŸŸï¼Œè‡ªé€‚åº”æ§åˆ¶é€šè¿‡å…‹éš†æ“ä½œè°ƒæ•´é«˜æ–¯ï¼Œä»¥è¦†ç›–æ–°åˆ›å»ºçš„å‡ ä½•ï¼Œç¡®ä¿è¿™äº›åŒºåŸŸèƒ½å¤Ÿå¾—åˆ°æ›´å¥½çš„è¡¨ç¤ºã€‚</li></ul></li><li>â€œover-reconstructionâ€åŒºåŸŸï¼Œå³é«˜æ–¯è¦†ç›–å¤§é¢ç§¯çš„åŒºåŸŸã€‚<ul><li>é’ˆå¯¹è¿™äº›åŒºåŸŸï¼Œé€šè¿‡åˆ†å‰²æ“ä½œå°†å¤§çš„é«˜æ–¯æ›¿æ¢ä¸ºä¸¤ä¸ªè¾ƒå°çš„é«˜æ–¯ï¼Œä»¥æ›´å¥½åœ°é€‚åº”åœºæ™¯ä¸­çš„ç»†èŠ‚å’Œå˜åŒ–ã€‚</li></ul></li></ul><p>åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼ŒåŒºåŸŸçš„è§†è§’ç©ºé—´ä½ç½®æ¢¯åº¦è¢«ç”¨æ¥æŒ‡å¯¼é«˜æ–¯çš„è°ƒæ•´ï¼Œå› ä¸ºè¿™äº›åŒºåŸŸå¯èƒ½æ˜¯åœºæ™¯ä¸­å°šæœªå……åˆ†é‡å»ºæˆ–è€…å·²ç»è¿‡åº¦é‡å»ºçš„éƒ¨åˆ†ã€‚</p></li><li><p><strong>å¯†é›†åŒ–æ“ä½œçš„æ¡ä»¶</strong>ï¼š</p><ul><li>é«˜æ–¯å¯†é›†åŒ–çš„æ¡ä»¶æ˜¯ï¼Œå…·æœ‰è§†è§’ç©ºé—´ä½ç½®æ¢¯åº¦çš„å¹³å‡å¹…åº¦è¶…è¿‡é˜ˆå€¼ ğœposã€‚</li><li>é˜ˆå€¼è®¾ç½®ä¸º0.0002ã€‚</li></ul></li><li><p><strong>é«˜æ–¯è°ƒæ•´çš„å…·ä½“æ­¥éª¤</strong>ï¼š</p><ul><li>å¯¹äºå°é«˜æ–¯ï¼Œä½äºâ€œunder-reconstructedâ€åŒºåŸŸï¼Œé€šè¿‡å…‹éš†æ“ä½œè¦†ç›–æ–°åˆ›å»ºçš„å‡ ä½•ã€‚</li><li>å¯¹äºå¤§é«˜æ–¯ï¼Œä½äºé«˜æ–¹å·®åŒºåŸŸï¼Œé€šè¿‡åˆ†å‰²æ“ä½œæ›¿æ¢ä¸ºä¸¤ä¸ªæ–°çš„é«˜æ–¯ï¼ŒåŒæ—¶å°†å®ƒä»¬çš„å°ºåº¦ç¼©å°ä¸€ä¸ªç»éªŒç¡®å®šçš„å› å­ ğœ™ = 1.6ã€‚</li></ul></li><li><p><strong>å¯¹é«˜æ–¯æ•°é‡çš„æ§åˆ¶</strong>ï¼š</p><ul><li>å¤„ç†ä¸¤ç§æƒ…å†µï¼šä¸€ç§å¢åŠ ç³»ç»Ÿæ€»ä½“ç§¯å’Œé«˜æ–¯æ•°é‡ï¼Œå¦ä¸€ç§ä¿æŒæ€»ä½“ç§¯ä¸å˜ä½†å¢åŠ é«˜æ–¯æ•°é‡ã€‚</li><li>é¿å…æµ®ç‚¹æ•°æ¥è¿‘è¾“å…¥ç›¸æœºæ—¶å¯¼è‡´é«˜æ–¯å¯†åº¦ä¸åˆç†åœ°å¢åŠ çš„é—®é¢˜ã€‚</li><li>é€šè¿‡æ¯3000æ¬¡è¿­ä»£å°† ğ›¼ å€¼è®¾ç½®æ¥è¿‘é›¶ï¼Œç„¶åæ ¹æ®éœ€è¦å¢åŠ  ğ›¼ å€¼ï¼Œå¹¶é€šè¿‡è£å‰ªæ–¹æ³•åˆ é™¤ ğ›¼ å€¼å°äº ğœ–ğ›¼ çš„é«˜æ–¯ã€‚</li><li>å®šæœŸåˆ é™¤åœ¨ä¸–ç•Œç©ºé—´ä¸­éå¸¸å¤§æˆ–åœ¨è§†å›¾ç©ºé—´ä¸­å æ®å¤§é¢ç§¯çš„é«˜æ–¯ï¼Œä»¥æœ‰æ•ˆæ§åˆ¶æ€»é«˜æ–¯æ•°é‡ã€‚</li></ul></li><li><p><strong>é«˜æ–¯çš„åŸºæœ¬æ€§è´¨</strong>ï¼š</p><ul><li>é«˜æ–¯åœ¨Euclideanç©ºé—´ä¸­ä¿æŒä¸ºåŸºå…ƒï¼Œä¸éœ€è¦é‡‡ç”¨å¤æ‚çš„ç©ºé—´å‹ç¼©ã€å˜å½¢æˆ–æŠ•å½±ç­–ç•¥ã€‚</li><li>ä¸å…¶ä»–æ–¹æ³•ä¸åŒï¼Œè¯¥æ¨¡å‹ä¸è¦æ±‚å¯¹è¿œè·ç¦»æˆ–å¤§å‹é«˜æ–¯é‡‡å–é¢å¤–å¤„ç†çš„æ–¹æ³•ï¼Œä¿æŒäº†é«˜æ–¯åœ¨æ¬§å‡ é‡Œå¾—ç©ºé—´ä¸­çš„åŸºæœ¬ç‰¹æ€§ã€‚</li><li>è¿™ä¸€ç‰¹ç‚¹ä½¿å¾—æ¨¡å‹æ›´åŠ ç›´è§‚å’Œå¯ç†è§£ï¼ŒåŒæ—¶ç®€åŒ–äº†æ•´ä¸ªå¤„ç†æµç¨‹ï¼Œé¿å…äº†å¤æ‚çš„ç©ºé—´å˜æ¢å¯¹åœºæ™¯è¡¨ç¤ºçš„ä¸å¿…è¦å¹²é¢„ã€‚</li></ul></li></ol><p>é€šè¿‡è¿™ä¸€è‡ªé€‚åº”æ§åˆ¶çš„è¿‡ç¨‹ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”åœºæ™¯çš„å‡ ä½•ç‰¹å¾ï¼ŒåŒæ—¶æœ‰æ•ˆåœ°æ§åˆ¶é«˜æ–¯çš„æ•°é‡å’Œå¯†åº¦ï¼Œç¡®ä¿äº†åœºæ™¯è¡¨ç¤ºçš„å‡†ç¡®æ€§ã€‚</p><h3 id="6-FAST-DIFFERENTIABLE-RASTERIZER-FOR-GAUSSIANS"><a href="#6-FAST-DIFFERENTIABLE-RASTERIZER-FOR-GAUSSIANS" class="headerlink" title="6 FAST DIFFERENTIABLE RASTERIZER FOR GAUSSIANS"></a>6 FAST DIFFERENTIABLE RASTERIZER FOR GAUSSIANS</h3><ol><li><strong>è®¾è®¡ç›®æ ‡å’Œæ¸²æŸ“æµç¨‹æ¦‚è¿°</strong>ï¼š<ul><li>è®¾è®¡ç›®æ ‡ï¼šå®ç°å¿«é€Ÿæ¸²æŸ“å’Œæ’åºï¼Œæ”¯æŒ ğ›¼ æ··åˆå’Œå„å‘å¼‚æ€§æ–‘ç‚¹ã€‚</li><li>æå‡ºç“¦ç‰‡å…‰æ …åŒ–å™¨ï¼Œé¿å…æ¯åƒç´ æ’åºçš„å¼€é”€ã€‚</li><li>å…è®¸å¤„ç†ä»»æ„æ·±åº¦å¤æ‚åº¦çš„åœºæ™¯ï¼Œæ— éœ€ç‰¹å®šè¶…å‚æ•°è°ƒæ•´ã€‚</li></ul></li><li><strong>ç“¦ç‰‡å…‰æ …åŒ–æµç¨‹</strong>ï¼š<ul><li>å±å¹•åˆ’åˆ†ä¸º16Ã—16ç“¦ç‰‡ï¼Œ3D Gaussianså‰”é™¤å’Œå®ä¾‹åŒ–ã€‚</li><li>åˆ©ç”¨GPU Radixæ’åºï¼Œé¿å…é¢å¤–çš„æ¯åƒç´ æ’åºã€‚</li><li>æ··åˆåŸºäºåˆå§‹æ’åºï¼Œæ— é¢å¤–æ¯åƒç´ æ’åºï¼Œæé«˜æ•ˆç‡ã€‚</li></ul></li><li><strong>ä¼˜åŒ–å’Œå¹¶è¡Œå¤„ç†</strong>ï¼š<ul><li>åˆ©ç”¨ç“¦ç‰‡åˆ—è¡¨ç”Ÿæˆï¼Œçº¿ç¨‹å—ååŒåŠ è½½æ•°æ®åŒ…ã€‚</li><li>å¹¶è¡Œå¤„ç†æ•°æ®åŠ è½½/å…±äº«å’Œå¤„ç†ï¼Œå‘¨æœŸæ€§æ£€æŸ¥çº¿ç¨‹å’Œåƒç´ é¥±å’Œï¼Œç»ˆæ­¢ç“¦ç‰‡å¤„ç†ã€‚</li><li>è¯¦ç»†ä¼˜åŒ–ï¼š<ul><li>åˆ©ç”¨å…±äº«å†…å­˜ååŒåŠ è½½æ•°æ®åŒ…ï¼Œæé«˜æ•°æ®åŠ è½½æ•ˆç‡ã€‚</li><li>å®šæœŸæ£€æŸ¥çº¿ç¨‹å’Œåƒç´ é¥±å’Œï¼Œæå‰ç»ˆæ­¢ç“¦ç‰‡å¤„ç†ï¼ŒèŠ‚çœè®¡ç®—èµ„æºã€‚</li></ul></li></ul></li><li><strong>å¤„ç†æ·±åº¦å¤æ‚åº¦</strong>ï¼š<ul><li>å…è®¸ä»»æ„æ·±åº¦å¤æ‚åº¦çš„åœºæ™¯ï¼Œæ— éœ€ç‰¹å®šè¶…å‚æ•°è°ƒæ•´ã€‚</li><li>åå‘ä¼ æ’­ä¸­é€šè¿‡éå†ç“¦ç‰‡åˆ—è¡¨å¤„ç†æ··åˆç‚¹åºåˆ—ï¼Œå¢åŠ æ¨¡å‹çµæ´»æ€§ã€‚</li><li>è¯¦ç»†å¤„ç†ï¼š<ul><li>åå‘ä¼ æ’­æœŸé—´ï¼Œé€šè¿‡éå†ç“¦ç‰‡åˆ—è¡¨å¤„ç†æ··åˆç‚¹åºåˆ—ï¼Œé€‚åº”ä¸åŒæ·±åº¦å¤æ‚åº¦çš„åœºæ™¯ã€‚</li></ul></li></ul></li><li><strong>é«˜æ•ˆçš„åå‘ä¼ æ’­</strong>ï¼š<ul><li>ä»æœ€åå½±å“åƒç´ çš„ç‚¹å¼€å§‹éå†ï¼ŒååŒåŠ è½½æ•°æ®åˆ°å…±äº«å†…å­˜ã€‚</li><li>ä¼˜åŒ–ï¼šåƒç´ åªå¤„ç†æ·±åº¦ä½äºæˆ–ç­‰äºæ­£å‘ä¼ æ’­æœŸé—´ä¸ºå…¶é¢œè‰²åšå‡ºè´¡çŒ®çš„æœ€åä¸€ä¸ªç‚¹ã€‚</li><li>é€šè¿‡å­˜å‚¨æ­£å‘ä¼ æ’­ç»“æŸæ—¶çš„æ€»ç´¯ç§¯ä¸é€æ˜åº¦ï¼Œæ¢å¤ä¸­é—´ä¸é€æ˜åº¦ï¼Œå‡å°‘è®¡ç®—å¤æ‚æ€§ã€‚</li><li>è¯¦ç»†åå‘ä¼ æ’­ä¼˜åŒ–ï¼š<ul><li>ä»æœ€åå½±å“åƒç´ çš„ç‚¹å¼€å§‹éå†ï¼ŒååŒåŠ è½½æ•°æ®åˆ°å…±äº«å†…å­˜ï¼Œæé«˜æ•ˆç‡ã€‚</li><li>ä¼˜åŒ–åƒç´ å¤„ç†ï¼Œåªå¤„ç†æ­£å‘ä¼ æ’­æœŸé—´å¯¹é¢œè‰²æœ‰è´¡çŒ®çš„ç‚¹ã€‚</li><li>å­˜å‚¨æ€»ç´¯ç§¯ä¸é€æ˜åº¦ï¼Œé€šè¿‡åå‘éå†è®¡ç®—ä¸­é—´ä¸é€æ˜åº¦ï¼Œé™ä½è®¡ç®—å¤æ‚æ€§ã€‚</li></ul></li></ul></li></ol><h3 id="7-Limitations"><a href="#7-Limitations" class="headerlink" title="7 Limitations"></a>7 Limitations</h3><ol><li><strong>æœ‰é™è§‚æµ‹åŒºåŸŸçš„é—®é¢˜</strong>ï¼š<ul><li>åœ¨åœºæ™¯è§‚æµ‹ä¸å……åˆ†çš„åŒºåŸŸå¯èƒ½å‡ºç°ä¼ªå½±ã€‚</li><li>å…¶ä»–æ–¹æ³•åœ¨ç±»ä¼¼æƒ…å†µä¸‹ä¹Ÿå­˜åœ¨å›°éš¾ï¼Œä¾‹å¦‚Mip-NeRF360çš„æƒ…å†µã€‚</li></ul></li><li><strong>å„å‘å¼‚æ€§é«˜æ–¯çš„ç¼ºé™·</strong>ï¼š<ul><li>å„å‘å¼‚æ€§é«˜æ–¯åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ç”Ÿæˆç»†é•¿ä¼ªå½±æˆ–â€œæ–‘ç‚¹çŠ¶â€é«˜æ–¯ã€‚</li><li>å…ˆå‰çš„æ–¹æ³•åœ¨ç±»ä¼¼æƒ…å†µä¸‹ä¹Ÿå­˜åœ¨å›°éš¾ã€‚</li></ul></li><li><strong>å¤§é«˜æ–¯ç”Ÿæˆçš„çˆ†è£‚ä¼ªå½±</strong>ï¼š<ul><li>åœ¨åˆ›å»ºå¤§é«˜æ–¯æ—¶ï¼Œå¯èƒ½å¶å°”å‡ºç°â€œçˆ†è£‚â€ä¼ªå½±ï¼Œå°¤å…¶æ˜¯åœ¨å…·æœ‰è§†è§’ç›¸å…³å¤–è§‚çš„åŒºåŸŸã€‚</li><li>çˆ†è£‚ä¼ªå½±çš„ä¸€ä¸ªåŸå› æ˜¯åœ¨å…‰æ …åŒ–å™¨ä¸­é€šè¿‡é˜²æŠ¤å¸¦å¾®ä¸è¶³é“åœ°æ‹’ç»é«˜æ–¯ï¼Œå¼•å…¥æ›´æœ‰åŸåˆ™çš„å‰”é™¤æ–¹æ³•å¯èƒ½æœ‰åŠ©äºå‡è½»è¿™äº›ä¼ªå½±ã€‚</li><li>å¦ä¸€ä¸ªå› ç´ æ˜¯ç®€å•çš„å¯è§æ€§ç®—æ³•ï¼Œå¯èƒ½å¯¼è‡´é«˜æ–¯çªç„¶åˆ‡æ¢æ·±åº¦/æ··åˆé¡ºåºï¼Œè¿™å¯ä»¥é€šè¿‡å¼•å…¥æŠ—é”¯é½¿æŠ€æœ¯è§£å†³ï¼Œä½†è¿™æ˜¯ç•™ä½œæœªæ¥å·¥ä½œçš„ã€‚</li></ul></li><li><strong>ç¼ºä¹ä¼˜åŒ–çš„æ­£åˆ™åŒ–</strong>ï¼š<ul><li>ç›®å‰çš„ä¼˜åŒ–è¿‡ç¨‹æ²¡æœ‰åº”ç”¨ä»»ä½•æ­£åˆ™åŒ–ï¼Œè¿™å¯èƒ½æœ‰åŠ©äºå¤„ç†æœªè§‚æµ‹åŒºåŸŸå’Œçˆ†è£‚ä¼ªå½±ã€‚</li><li>å¼•å…¥æ­£åˆ™åŒ–è¢«æå‡ºä½œä¸ºè§£å†³æ–¹æ¡ˆï¼Œæœ‰æœ›æ”¹å–„è¿™äº›é—®é¢˜ã€‚</li></ul></li><li><strong>åŒä¸€è¶…å‚æ•°çš„ä½¿ç”¨</strong>ï¼š<ul><li>å°½ç®¡åœ¨å®Œæ•´è¯„ä¼°ä¸­ä½¿ç”¨äº†ç›¸åŒçš„è¶…å‚æ•°ï¼Œæ—©æœŸå®éªŒè¡¨æ˜ï¼Œåœ¨éå¸¸å¤§çš„åœºæ™¯ï¼ˆå¦‚åŸå¸‚æ•°æ®é›†ï¼‰ä¸­ï¼Œå‡å°ä½ç½®å­¦ä¹ é€Ÿç‡å¯èƒ½æ˜¯ä¸ºäº†æ”¶æ•›è€Œå¿…è¦çš„ã€‚</li></ul></li><li><strong>ç›¸å¯¹ç´§å‡‘ä½†å†…å­˜æ¶ˆè€—è¾ƒé«˜</strong>ï¼š<ul><li>å°½ç®¡ä¸ä¹‹å‰çš„åŸºäºç‚¹çš„æ–¹æ³•ç›¸æ¯”ï¼Œæ–¹æ³•ç›¸å¯¹ç´§å‡‘ï¼Œä½†å†…å­˜æ¶ˆè€—æ˜æ˜¾é«˜äºNeRFç­‰åŸºäºç¥ç»åœºæ™¯çš„è§£å†³æ–¹æ¡ˆã€‚</li><li>ä¼˜åŒ–é€»è¾‘çš„ä½çº§å®ç°å¯èƒ½æ˜¾è‘—å‡å°‘å†…å­˜æ¶ˆè€—ã€‚</li></ul></li><li><strong>è®­ç»ƒå’Œæ¸²æŸ“çš„å†…å­˜éœ€æ±‚</strong>ï¼š<ul><li>æ¸²æŸ“ç»è¿‡è®­ç»ƒçš„åœºæ™¯éœ€è¦è¶³å¤Ÿçš„GPUå†…å­˜æ¥å­˜å‚¨å®Œæ•´æ¨¡å‹ï¼Œä»¥åŠé¢å¤–çš„å†…å­˜ç”¨äºå…‰æ …åŒ–å™¨ã€‚</li><li>å­˜åœ¨è®¸å¤šé™ä½å†…å­˜æ¶ˆè€—çš„æœºä¼šï¼ŒåŒ…æ‹¬ç‚¹äº‘çš„å‹ç¼©æŠ€æœ¯ï¼Œè¿™ä¸ªé¢†åŸŸæ˜¯ä¸€ä¸ªç ”ç©¶æ–¹å‘ã€‚</li></ul></li></ol><h3 id="8-DISCUSSION-AND-CONCLUSIONS"><a href="#8-DISCUSSION-AND-CONCLUSIONS" class="headerlink" title="8 DISCUSSION AND CONCLUSIONS"></a>8 DISCUSSION AND CONCLUSIONS</h3><ol><li><strong>åˆ›æ–°æ€§è´¡çŒ®</strong>ï¼š<ul><li>æå‡ºäº†é¦–ä¸ªçœŸæ­£å…è®¸åœ¨å„ç§åœºæ™¯å’Œæ•æ‰é£æ ¼ä¸­è¿›è¡Œå®æ—¶ã€é«˜è´¨é‡è¾å°„åœºæ¸²æŸ“çš„æ–¹æ³•ã€‚</li><li>é€‰æ‹©äº†3Dé«˜æ–¯åŸè¯­ï¼Œæ—¢ä¿ç•™äº†ä¼˜åŒ–çš„ä½“ç§¯æ¸²æŸ“ç‰¹æ€§ï¼Œåˆç›´æ¥å®ç°äº†å¿«é€Ÿçš„åŸºäºsplatçš„å…‰æ …åŒ–ã€‚</li></ul></li><li><strong>åŸ¹è®­æ—¶é—´å’Œæ€§èƒ½</strong>ï¼š<ul><li>åœ¨åŸ¹è®­æ—¶é—´æ–¹é¢ä¸å…ˆå‰æœ€å¿«çš„æ–¹æ³•ç›¸ç«äº‰ï¼Œè¯æ˜äº†æ–¹æ³•çš„é«˜æ•ˆæ€§ã€‚</li><li>å¤§çº¦80%çš„åŸ¹è®­æ—¶é—´ç”¨äºPythonä»£ç ï¼Œä¸ºäº†æ–¹ä¾¿å…¶ä»–äººä½¿ç”¨ï¼Œæ–¹æ³•æ„å»ºåœ¨PyTorchä¸Šã€‚</li><li>åªæœ‰å…‰æ …åŒ–ä¾‹ç¨‹å®ç°ä¸ºä¼˜åŒ–çš„CUDAæ ¸ã€‚å°†å…¶ä½™ä¼˜åŒ–å®Œå…¨ç§»æ¤åˆ°CUDAå¯èƒ½ä¼šåœ¨å¯¹æ€§èƒ½è¦æ±‚å¾ˆé«˜çš„åº”ç”¨ä¸­å®ç°æ˜¾è‘—çš„åŠ é€Ÿï¼Œä¾‹å¦‚InstantNGPã€‚</li></ul></li><li><strong>å®æ—¶æ¸²æŸ“åŸåˆ™</strong>ï¼š<ul><li>å±•ç¤ºäº†å»ºç«‹åœ¨å®æ—¶æ¸²æŸ“åŸåˆ™ä¹‹ä¸Šçš„é‡è¦æ€§ï¼Œå……åˆ†åˆ©ç”¨GPUçš„æ€§èƒ½å’Œè½¯ä»¶å…‰æ …åŒ–ç®¡çº¿æ¶æ„çš„é€Ÿåº¦ã€‚</li><li>è¿™äº›è®¾è®¡é€‰æ‹©æ˜¯åŸ¹è®­å’Œå®æ—¶æ¸²æŸ“æ€§èƒ½çš„å…³é”®ï¼Œç›¸å¯¹äºå…ˆå‰çš„ä½“ç§¯å°„çº¿è¡Œè¿›æä¾›äº†ç«äº‰ä¼˜åŠ¿ã€‚</li></ul></li><li><strong>æœªæ¥ç ”ç©¶æ–¹å‘</strong>ï¼š<ul><li>æ¢è®¨äº†é«˜æ–¯æ˜¯å¦å¯ç”¨äºæ‰§è¡Œæ•æ‰åœºæ™¯çš„ç½‘æ ¼é‡å»ºï¼Œä»¥æ›´å¥½åœ°äº†è§£æ–¹æ³•åœ¨ä½“ç§¯å’Œè¡¨é¢è¡¨ç¤ºä¹‹é—´çš„ç¡®åˆ‡ä½ç½®ã€‚</li><li>å¼ºè°ƒäº†å¯¹äºç½‘æ ¼çš„å¹¿æ³›ä½¿ç”¨ï¼Œè¿™å¯èƒ½å…·æœ‰å®é™…æ„ä¹‰ã€‚</li></ul></li><li><strong>ç»“è®º</strong>ï¼š<ul><li>æå‡ºäº†é¦–ä¸ªå®æ—¶è¾å°„åœºæ¸²æŸ“è§£å†³æ–¹æ¡ˆï¼Œå…¶æ¸²æŸ“è´¨é‡ä¸æ˜‚è´µçš„å…ˆå‰æ–¹æ³•ç›¸åŒ¹é…ï¼ŒåŸ¹è®­æ—¶é—´ä¸æœ€å¿«çš„ç°æœ‰è§£å†³æ–¹æ¡ˆç›¸ç«äº‰ã€‚</li></ul></li></ol><h2 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h2><p>ä¸‹é¢æ˜¯ä¸€äº›å¯èƒ½æœ‰ç”¨çš„é“¾æ¥ï¼š</p><ul><li><p>3D Gaussian Splattingä¸­çš„æ•°å­¦æ¨å¯¼ - å…«æ°¨åˆæ°¯åŒ–é’™çš„æ–‡ç«  - çŸ¥ä¹<br><a href="https://zhuanlan.zhihu.com/p/666465701">https://zhuanlan.zhihu.com/p/666465701</a></p><blockquote><p>è¿™ç¯‡æ–‡ç« éå¸¸ä¸é”™ï¼ŒåŸºæœ¬æ‰€æœ‰éœ€è¦çš„å…¬å¼æ¨å¯¼éƒ½åœ¨è¿™é‡Œäº†</p></blockquote></li><li><p>[NeRFå‘æµ®æ²‰è®°]3D Gaussian Splattingå…¥é—¨ï¼šå¦‚ä½•è¡¨è¾¾å‡ ä½• - å¾¡å¸Softçš„æ–‡ç«  - çŸ¥ä¹<br><a href="https://zhuanlan.zhihu.com/p/661569671">https://zhuanlan.zhihu.com/p/661569671</a></p><blockquote><p>è¿™ç¯‡æ–‡ç« æåˆ°äº†ä¸€ä¸ªä»¥æ¤­çƒä¸ºåŸºç¡€å…ƒç´ çš„æ¸¸æˆï¼Œå¾ˆç›´è§‚çš„æ„Ÿå—äº†ä¸€ä¸‹ç”¨æ¤­çƒè¡¨è¾¾åœºæ™¯æ˜¯ä»€ä¹ˆæ ·å­</p></blockquote></li><li><p>Splatting æŠ›é›ªçƒæ³•ç®€ä»‹ - bo233çš„æ–‡ç«  - çŸ¥ä¹<br><a href="https://zhuanlan.zhihu.com/p/660512916">https://zhuanlan.zhihu.com/p/660512916</a></p><blockquote><p>3D Gaussian Splattingè¿™ç¯‡è®ºæ–‡çš„å…¬å¼æ˜¯çœŸçš„å°‘ï¼ŒSplattingè¿™éƒ¨åˆ†å¯ä»¥å€ŸåŠ©è¿™ç¯‡æ–‡ç« äº†è§£ä¸€ä¸‹</p></blockquote></li><li><p>ã€Š3D Gaussian Splatting for Real-Time Radiance Field Renderingã€‹3Dé«˜æ–¯çš„ç†è®ºç†è§£ - å‰ªæœˆå…‰è€…çš„æ–‡ç«  - çŸ¥ä¹<br><a href="https://zhuanlan.zhihu.com/p/664725693">https://zhuanlan.zhihu.com/p/664725693</a></p><blockquote><p>å¯ä»¥ä½œä¸ºå‰é¢å¯¹3D Gaussiançš„è¡¥å……</p></blockquote></li><li><p>A beginner friendly introduction to 3D Gaussian Splats and tutorial on how to train them</p><p><a href="https://www.reshot.ai/3d-gaussian-splatting">https://www.reshot.ai/3d-gaussian-splatting</a></p><blockquote><p>ä¸€ä¸ªå¾ˆè¯¦ç»†çš„æ•™ç¨‹ï¼Œè™½ç„¶3D Gaussian Splattingçš„READMEå†™çš„ä¹Ÿå¾ˆè¯¦ç»†</p></blockquote></li></ul>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> 3D Gaussian Splatting </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ5ï¼‰ï¼šNICE-SLAMæºç é˜…è¯»ç¬”è®°ï¼ˆ1ï¼‰</title>
      <link href="2023/08/16/nerf-slam-4/"/>
      <url>2023/08/16/nerf-slam-4/</url>
      
        <content type="html"><![CDATA[<p><strong>å†…å®¹ï¼š</strong></p><ul><li>ç³»ç»Ÿæ¶æ„ï¼šNICE-SLAMæ˜¯å¦‚ä½•è¿è¡Œçš„</li><li>ç½‘ç»œæ¨¡å‹ï¼šç½‘ç»œæ˜¯å¦‚ä½•å…·ä½“å®ç°çš„</li><li>æ¸²æŸ“ï¼šç½‘ç»œè¾“å‡ºæ˜¯æ€ä¹ˆæ¸²æŸ“å¾—åˆ°å›¾åƒå’Œæ·±åº¦å›¾çš„</li></ul><p><strong>ä»£ç ï¼š</strong><code>NICE-SLAM.py</code>ã€<code>decoder.py</code>ã€<code>Renderer.py</code>ã€<code>common.py</code></p><h1 id="NeRF-based-SLAMå­¦ä¹ ç¬”è®°ï¼ˆ5ï¼‰ï¼šNICE-SLAMæºç é˜…è¯»ç¬”è®°ï¼ˆ1ï¼‰"><a href="#NeRF-based-SLAMå­¦ä¹ ç¬”è®°ï¼ˆ5ï¼‰ï¼šNICE-SLAMæºç é˜…è¯»ç¬”è®°ï¼ˆ1ï¼‰" class="headerlink" title="NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ5ï¼‰ï¼šNICE-SLAMæºç é˜…è¯»ç¬”è®°ï¼ˆ1ï¼‰"></a>NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ5ï¼‰ï¼šNICE-SLAMæºç é˜…è¯»ç¬”è®°ï¼ˆ1ï¼‰</h1><h2 id="ç³»ç»Ÿæ¶æ„"><a href="#ç³»ç»Ÿæ¶æ„" class="headerlink" title="ç³»ç»Ÿæ¶æ„"></a>ç³»ç»Ÿæ¶æ„</h2><p><img src="/images/nerf-slam-4/image-20230801210340053-1691895051979-1.png"></p><p><strong>æ¼”ç¤º</strong></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># å±•ç¤ºè®­ç»ƒçš„è¿è¡Œæ•ˆæœï¼ˆDemoæ•°æ®é›†ï¼ŒæœåŠ¡å™¨ï¼‰</span>python <span class="token parameter variable">-W</span> ignore run.py configs/Demo/demo.yaml<span class="token comment"># å±•ç¤ºå¯è§†åŒ–çš„è¿è¡Œæ•ˆæœï¼ˆApartmentæ•°æ®é›†ï¼Œæœ¬æœºï¼‰</span>python visualizer.py configs/Apartment/apartment.yaml <span class="token parameter variable">--output</span> output/vis/Apartment<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="å‡½æ•°def-grid-init-self-cfg"><a href="#å‡½æ•°def-grid-init-self-cfg" class="headerlink" title="å‡½æ•°def grid_init(self, cfg)"></a>å‡½æ•°<code>def grid_init(self, cfg)</code></h4><p><strong>è®ºæ–‡å¯¹åº”éƒ¨åˆ†</strong>ï¼šé™„å½•A.2. Hierarchical Feature Grid Initialization</p><ul><li><p><strong>Coarse-level Feature Gridï¼š</strong>éšæœºåˆå§‹åŒ–ï¼›</p></li><li><p><strong>Mid-level Feature Gridï¼š</strong>ä¹Ÿæ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œç»éªŒè¡¨æ˜éšæœºåˆå§‹åŒ–å…·æœ‰æ›´å¥½çš„æ”¶æ•›æ€§ï¼›</p></li><li><p><strong>Fine-level Feature Gridï¼š</strong>éœ€è¦åˆå§‹åŒ–åˆ°fine-levelçš„decoderè¾“å‡ºä¸º0ï¼Œæ¯•ç«Ÿè¿™é‡Œç»™å‡ºæ¥çš„æ˜¯æ®‹å·®ï¼Œåˆå§‹åŒ–çš„æ®‹å·®è‚¯å®šè¦æ˜¯0ã€‚è¿™æ ·æ‰èƒ½å¤Ÿä¿è¯ä»coarse-to-fineçš„ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œèƒ½é‡æ˜¯å¹³ç¨³è¿‡æ¸¡çš„ã€‚è®ºæ–‡ä¹Ÿæåˆ°ï¼Œåœ¨å¯¹fine-levelå¯¹åº”çš„decoderè¿›è¡Œé¢„è®­ç»ƒçš„æ—¶å€™ï¼Œå¢åŠ äº†é¢å¤–çš„æ­£åˆ™åŒ–æŸå¤±ï¼Œä¿è¯å¦‚æœfine-levelçš„ç‰¹å¾ä¸º0ï¼Œé‚£ä¹ˆæ— è®ºmid-levelçš„ç‰¹å¾å¦‚ä½•ï¼Œè¾“å‡ºçš„æ®‹å·®éƒ½åº”è¯¥ä¸º0ã€‚è¿™æ ·èƒ½å¤Ÿå…è®¸NICE-SLAMåœ¨è¿è¡Œçš„æ—¶å€™å¯¹fine-levelçš„ç‰¹å¾ç½‘æ ¼è¿›è¡Œé›¶åˆå§‹åŒ–ã€‚</p></li></ul><p><strong>æ¼”ç¤º</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token comment"># åŠ è½½bound</span>bound<span class="token operator">=</span>torch<span class="token punctuation">.</span>from_numpy<span class="token punctuation">(</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">5.8</span><span class="token punctuation">,</span><span class="token number">11.3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">4.0</span><span class="token punctuation">,</span><span class="token number">4.5</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">7.9</span><span class="token punctuation">,</span><span class="token number">4.9</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token comment"># åˆ†åˆ«è®¡ç®—xyzè½´çš„é•¿åº¦</span>xyz_len <span class="token operator">=</span> bound<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> bound<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token comment"># ============ åˆå§‹åŒ–ä¸€ä¸ªç‰¹å¾ç½‘æ ¼ ============</span><span class="token comment"># coarseè¦ç‰¹åˆ«æ³¨æ„ä¸€ä¸‹ï¼Œæœ‰ä¸€ä¸ªenlarge</span><span class="token comment"># val_shape=list(map(int, (np.array(xyz_len * 2 / 3).tolist())))</span><span class="token comment"># middleã€fineã€color</span>val_shape<span class="token operator">=</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">5.6</span><span class="token punctuation">,</span><span class="token number">7.5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">0.16</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># äº¤æ¢XZè½´æ•°æ®</span>val_shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> val_shape<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> val_shape<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> val_shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token comment"># å®šä¹‰ç‰¹å¾ç½‘æ ¼çš„shapeï¼Œå³BCDHW</span>grid_val_shape <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">*</span>val_shape<span class="token punctuation">]</span><span class="token comment"># åˆå§‹åŒ–ç‰¹å¾ç½‘æ ¼</span>feature_grid<span class="token operator">=</span>torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span>grid_val_shape<span class="token punctuation">)</span><span class="token punctuation">.</span>normal_<span class="token punctuation">(</span>mean<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> std<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">)</span><span class="token comment"># å¯¹äºfine-levelï¼Œç‰¹å¾å°½é‡æ¥è¿‘0</span><span class="token comment"># feature_grid=torch.zeros(grid_val_shape).normal_(mean=0, std=0.0001)</span><span class="token comment"># ============ æ¼”ç¤ºç‰¹å¾ç½‘æ ¼çš„ä½¿ç”¨ ============ </span><span class="token comment"># åˆå§‹åŒ–ç‰¹å¾ç½‘æ ¼</span>feature_grid<span class="token operator">=</span>torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>normal_<span class="token punctuation">(</span>mean<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> std<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">)</span><span class="token comment"># æå–æŸä¸ªç‚¹çš„ç‰¹å¾</span>feature<span class="token operator">=</span>feature_grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç½‘ç»œæ¨¡å‹"><a href="#ç½‘ç»œæ¨¡å‹" class="headerlink" title="ç½‘ç»œæ¨¡å‹"></a>ç½‘ç»œæ¨¡å‹</h2><h4 id="ç±»class-NICE-nn-Module"><a href="#ç±»class-NICE-nn-Module" class="headerlink" title="ç±»class NICE(nn.Module)"></a>ç±»<code>class NICE(nn.Module)</code></h4><p><strong>è®ºæ–‡å¯¹åº”éƒ¨åˆ†ï¼š</strong>3.1. Hierarchical Scene Representation</p><img src="/images/nerf-slam-4/2023-08-13 12-01-49 çš„å±å¹•æˆªå›¾.png" style="zoom:50%;"><p><strong>å¯¹<code>def forward(self, p, c_grid, stage='middle', **kwargs)</code>çš„ç†è§£ï¼š</strong></p><p>è¿™éƒ¨åˆ†ä¸»è¦æœåŠ¡äºè®ºæ–‡ä»‹ç»çš„<strong>3.3. Mapping and Tracking</strong>ï¼Œæ¯ä¸ªstageåº”è¯¥æ˜¯å’Œä¼˜åŒ–ç›¸å…³çš„ï¼Œè€Œä¸æ˜¯å’Œè®ºæ–‡é‡Œæåˆ°çš„middle-leveã€fine-levelçš„è¾“å‡ºç›¸å…³ã€‚</p><p>ä¸‹é¢æ˜¯è®ºæ–‡æåˆ°çš„Mappingé˜¶æ®µçš„ä¸‰é˜¶æ®µä¼˜åŒ–ï¼š</p><img src="/images/nerf-slam-4/2023-08-13 12-06-56 çš„å±å¹•æˆªå›¾.png" alt="2023-08-13 12-06-56 çš„å±å¹•æˆªå›¾" style="zoom: 50%;"><p><strong>æ¼”ç¤º</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torchraw <span class="token operator">=</span> torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token punctuation">)</span>raw<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0.5</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="ç±»class-MLP-nn-Module-å’Œç±»class-MLP-no-xyz-nn-Module"><a href="#ç±»class-MLP-nn-Module-å’Œç±»class-MLP-no-xyz-nn-Module" class="headerlink" title="ç±»class MLP(nn.Module)å’Œç±»class MLP_no_xyz(nn.Module)"></a>ç±»<code>class MLP(nn.Module)</code>å’Œç±»<code>class MLP_no_xyz(nn.Module)</code></h4><blockquote><p>å¯ä»¥æŠŠnerf-pytorchçš„ä»£ç æ‹¿è¿‡æ¥ç®€å•å¯¹æ¯”ä¸€ä¸‹</p></blockquote><p><strong>ç›¸å…³é“¾æ¥ï¼š</strong></p><ul><li>ConvONetè®ºæ–‡ï¼š<a href="https://arxiv.org/pdf/2003.04618.pdf">https://arxiv.org/pdf/2003.04618.pdf</a></li><li>ConvONetä»£ç ï¼š<a href="https://github.com/autonomousvision/convolutional_occupancy_networks/blob/master/src/conv_onet/models/decoder.py">https://github.com/autonomousvision/convolutional_occupancy_networks/blob/master/src/conv_onet/models/decoder.py</a></li><li>ç±»<code>GaussianFourierFeatureTransform</code>å¯¹åº”çš„è®ºæ–‡ï¼š<a href="https://arxiv.org/abs/2006.10739">https://arxiv.org/abs/2006.10739</a></li></ul><p><strong>æ¼”ç¤ºâ€œsample_grid_featureâ€çš„è¿‡ç¨‹</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>functional <span class="token keyword">as</span> Fp_nor<span class="token operator">=</span>torch<span class="token punctuation">.</span>from_numpy<span class="token punctuation">(</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>    <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token number">0.</span> <span class="token punctuation">,</span>  <span class="token number">0.</span> <span class="token punctuation">,</span>  <span class="token number">0.</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>     <span class="token punctuation">[</span> <span class="token number">0.1</span><span class="token punctuation">,</span>  <span class="token number">0.2</span><span class="token punctuation">,</span>  <span class="token number">0.3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>     <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.7</span><span class="token punctuation">]</span><span class="token punctuation">,</span>     <span class="token punctuation">[</span> <span class="token number">1.</span> <span class="token punctuation">,</span>  <span class="token number">0.</span> <span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1.</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token comment"># [1, 4, 3] </span><span class="token comment"># [1,point_num,3]</span>vgrid <span class="token operator">=</span> p_nor<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># [1, 4, 1, 1, 3] </span><span class="token comment"># [1,point_num,1,1,3]</span>feature_grid<span class="token operator">=</span>torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>normal_<span class="token punctuation">(</span>mean<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> std<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">)</span><span class="token comment"># [1,8,2,3,4]</span><span class="token comment"># [1,c_dim,D,H,W]</span>c <span class="token operator">=</span> F<span class="token punctuation">.</span>grid_sample<span class="token punctuation">(</span>feature_grid<span class="token punctuation">,</span> vgrid<span class="token punctuation">,</span> padding_mode<span class="token operator">=</span><span class="token string">'border'</span><span class="token punctuation">,</span> align_corners<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'bilinear'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment"># [1,8,4]</span><span class="token comment"># [1,c_dim,point_num]</span>c <span class="token operator">=</span> c<span class="token punctuation">.</span>transpose<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token comment"># [point_num,c_dim]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ¸²æŸ“"><a href="#æ¸²æŸ“" class="headerlink" title="æ¸²æŸ“"></a>æ¸²æŸ“</h2><h4 id="å‡½æ•°render-batch-ray"><a href="#å‡½æ•°render-batch-ray" class="headerlink" title="å‡½æ•°render_batch_ray"></a>å‡½æ•°<code>render_batch_ray</code></h4><p>nearå’Œfarå¯ä»¥å‚è€ƒNeRFè®ºæ–‡è¿™ä¸ªéƒ¨åˆ†ï¼š</p><p>![](/images/nerf-slam-4/2023-08-13 17-12-46 çš„å±å¹•æˆªå›¾.png)</p><p>z_vals_surfaceå¯ä»¥å‚è€ƒNICE-SLAMè®ºæ–‡<strong>3.2. Depth and Color Rendering</strong></p><p>![](/images/nerf-slam-4/2023-08-13 17-57-52 çš„å±å¹•æˆªå›¾.png)</p><p><strong>æ¼”ç¤ºnearçš„è·å–</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token comment"># å‡è®¾åªæœ‰ä¸‰æ¡å°„çº¿ï¼Œç„¶åé‡‡æ ·çš„æ•°é‡N_samples=10</span>gt_depth<span class="token operator">=</span>torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>gt_depth <span class="token operator">=</span> gt_depth<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># å±•å¼€æˆå‘é‡</span>gt_depth_samples <span class="token operator">=</span> gt_depth<span class="token punctuation">.</span>repeat<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>near <span class="token operator">=</span> gt_depth_samples <span class="token operator">*</span> <span class="token number">0.01</span>  <span class="token comment"># æ¯æ¡å°„çº¿çš„nearæ ¹æ®è¿™æ¡å°„çº¿å¯¹åº”çš„æ·±åº¦ç¡®å®š</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ¼”ç¤ºfar_bbçš„è·å–</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token comment"># bound</span>bound<span class="token operator">=</span>torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># å‡è®¾åªæœ‰ä¸¤æ¡å°„çº¿</span><span class="token comment"># det_rays_o</span>det_rays_o<span class="token operator">=</span>torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># det_rays_d</span>det_rays_d<span class="token operator">=</span>torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># tçš„è®¡ç®—</span>t <span class="token operator">=</span> <span class="token punctuation">(</span>bound <span class="token operator">-</span> det_rays_o<span class="token punctuation">)</span>t <span class="token operator">=</span> t <span class="token operator">/</span> det_rays_d<span class="token comment"># far_bbçš„è®¡ç®—</span>torch<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>torch<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span>torch<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ¼”ç¤ºz_vals_surfaceçš„è·å–</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token comment"># ========== æœ‰æ·±åº¦åŒºåŸŸ ==========</span><span class="token comment"># å‡è®¾åªæœ‰äº”æ¡å°„çº¿ï¼Œå…¶ä¸­ä¸¤æ¡æ¡å°„çº¿æ²¡æœ‰æ·±åº¦ï¼Œè¡¨é¢é™„è¿‘é‡‡æ ·çš„æ•°é‡N_surface=10</span>gt_depth<span class="token operator">=</span>torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># æ‹¿åˆ°æœ‰æ·±åº¦çš„éƒ¨åˆ†</span>gt_none_zero_mask <span class="token operator">=</span> gt_depth <span class="token operator">&gt;</span> <span class="token number">0</span>gt_none_zero <span class="token operator">=</span> gt_depth<span class="token punctuation">[</span>gt_none_zero_mask<span class="token punctuation">]</span>gt_none_zero <span class="token operator">=</span> gt_none_zero<span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment"># æ¯ä¸ªé‡‡æ ·ç‚¹æ‰€å±å°„çº¿å¯¹åº”çš„æ·±åº¦</span>gt_depth_surface <span class="token operator">=</span> gt_none_zero<span class="token punctuation">.</span>repeat<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token comment"># é—´éš”</span>t_vals_surface <span class="token operator">=</span> torch<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">,</span> steps<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>double<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># åœ¨Depth+-0.05Depthçš„åŒºåŸŸè¿›è¡Œé‡‡æ ·</span>z_vals_surface_depth_none_zero <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0.95</span> <span class="token operator">*</span> gt_depth_surface <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1.</span> <span class="token operator">-</span> t_vals_surface<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1.05</span> <span class="token operator">*</span> gt_depth_surface <span class="token operator">*</span> <span class="token punctuation">(</span>t_vals_surface<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># ä¿å­˜ç»“æœåˆ°æœ€ç»ˆçš„z_vals_surfaceä¸­</span>z_vals_surface <span class="token operator">=</span> torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span>gt_depth<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>double<span class="token punctuation">(</span><span class="token punctuation">)</span>gt_none_zero_mask <span class="token operator">=</span> gt_none_zero_mask<span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>z_vals_surface<span class="token punctuation">[</span>gt_none_zero_mask<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> z_vals_surface_depth_none_zero<span class="token comment"># ========== æ— æ·±åº¦åŒºåŸŸ ==========</span>near_surface <span class="token operator">=</span> <span class="token number">0.001</span>far_surface <span class="token operator">=</span> torch<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>gt_depth<span class="token punctuation">)</span>z_vals_surface_depth_zero <span class="token operator">=</span> <span class="token punctuation">(</span>near_surface <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1.</span> <span class="token operator">-</span> t_vals_surface<span class="token punctuation">)</span> <span class="token operator">+</span> far_surface <span class="token operator">*</span> <span class="token punctuation">(</span>t_vals_surface<span class="token punctuation">)</span><span class="token punctuation">)</span>z_vals_surface_depth_zero<span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>repeat<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">~</span>gt_none_zero_mask<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment"># ä¿å­˜ç»“æœåˆ°æœ€ç»ˆçš„z_vals_surfaceä¸­</span>z_vals_surface<span class="token punctuation">[</span><span class="token operator">~</span>gt_none_zero_mask<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> z_vals_surface_depth_zero<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ¼”ç¤ºz_valsçš„è·å–</strong></p><img src="/images/nerf-slam-4/IMG_2305.PNG" style="zoom: 25%;"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torchnear<span class="token operator">=</span><span class="token number">0.01</span>far<span class="token operator">=</span><span class="token number">3</span><span class="token comment"># å‡è®¾é‡‡æ ·5ä¸ªç‚¹</span>t_vals <span class="token operator">=</span> torch<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">,</span> steps<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token comment"># æ ¹æ®æ·±åº¦é‡‡æ ·ï¼ˆå‡åŒ€çš„ï¼‰</span>z_vals <span class="token operator">=</span> near <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1.</span> <span class="token operator">-</span> t_vals<span class="token punctuation">)</span> <span class="token operator">+</span> far <span class="token operator">*</span> <span class="token punctuation">(</span>t_vals<span class="token punctuation">)</span><span class="token comment"># æ¯ä¸ªé—´éš”å†…éšæœºé‡‡æ ·ï¼ˆéšæœºçš„ï¼‰</span>mids <span class="token operator">=</span> <span class="token number">.5</span> <span class="token operator">*</span> <span class="token punctuation">(</span>z_vals<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">+</span> z_vals<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>upper <span class="token operator">=</span> torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span><span class="token punctuation">[</span>mids<span class="token punctuation">,</span> z_vals<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>lower <span class="token operator">=</span> torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span><span class="token punctuation">[</span>z_vals<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> mids<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>t_rand <span class="token operator">=</span> torch<span class="token punctuation">.</span>rand<span class="token punctuation">(</span>z_vals<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>z_vals <span class="token operator">=</span> lower <span class="token operator">+</span> <span class="token punctuation">(</span>upper <span class="token operator">-</span> lower<span class="token punctuation">)</span> <span class="token operator">*</span> t_rand<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ¼”ç¤ºé‡‡æ ·ç‚¹çš„è®¡ç®—</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token comment"># å‡è®¾åªæœ‰ä¸¤æ¡å°„çº¿</span><span class="token comment"># det_rays_o</span>rays_o<span class="token operator">=</span>torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># det_rays_d</span>rays_d<span class="token operator">=</span>torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># å‡è®¾é‡‡æ ·10+5ä¸ªç‚¹ï¼ŒN_samples=5ï¼ŒN_surface=3</span>z_vals<span class="token operator">=</span>torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0.0100</span><span class="token punctuation">,</span> <span class="token number">0.3837</span><span class="token punctuation">,</span> <span class="token number">1.1313</span><span class="token punctuation">,</span> <span class="token number">1.8788</span><span class="token punctuation">,</span> <span class="token number">2.6263</span><span class="token punctuation">]</span><span class="token punctuation">)</span>z_vals_surface<span class="token operator">=</span>torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1.000</span><span class="token punctuation">,</span> <span class="token number">1.1086</span><span class="token punctuation">,</span> <span class="token number">1.2122</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># åˆå¹¶N_sampleså’ŒN_surfaceï¼Œå†ä»å°åˆ°å¤§æ’åº</span>z_vals<span class="token punctuation">,</span> _ <span class="token operator">=</span> torch<span class="token punctuation">.</span>sort<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span><span class="token punctuation">[</span>z_vals<span class="token punctuation">,</span> z_vals_surface<span class="token punctuation">.</span>double<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment"># å¾—åˆ°æœ€åçš„é‡‡æ ·ç‚¹</span>pts <span class="token operator">=</span> rays_o<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">+</span> rays_d<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">*</span> z_vals<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">]</span>pointsf <span class="token operator">=</span> pts<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§†è§‰SLAM </tag>
            
            <tag> NeRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ4ï¼‰ï¼šNice-SLAMï¼ˆ2ï¼‰</title>
      <link href="2023/08/10/nerf-slam-3/"/>
      <url>2023/08/10/nerf-slam-3/</url>
      
        <content type="html"><![CDATA[<h1 id="NeRF-based-SLAMå­¦ä¹ ç¬”è®°ï¼ˆ4ï¼‰ï¼šNice-SLAMï¼ˆ2ï¼‰"><a href="#NeRF-based-SLAMå­¦ä¹ ç¬”è®°ï¼ˆ4ï¼‰ï¼šNice-SLAMï¼ˆ2ï¼‰" class="headerlink" title="NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ4ï¼‰ï¼šNice-SLAMï¼ˆ2ï¼‰"></a>NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ4ï¼‰ï¼šNice-SLAMï¼ˆ2ï¼‰</h1><p>åˆ†äº«æˆ‘åœ¨å‚åŠ è®¡ç®—æœºè§†è§‰lifeçš„NeRF SLAMå­¦ä¹ å°ç»„æ—¶åšçš„pptã€‚</p><p>å­¦ä¹ å°ç»„ç›¸å…³çš„èµ„æ–™å·²ç»å¼€æºï¼Œå¦‚ä¸‹ï¼š</p><blockquote><p><a href="https://github.com/electech6/NeRF-Based-SLAM-Incredible-Insights">NeRF-Based-SLAM-Incredible-Insights</a></p><p>Welcome to the <strong>â€œNeRF-Based-SLAM-Incredible-Insightsâ€</strong> repository. This project aims to provide comprehensive insights into various NeRF (Neural Radiance Fields) based Slam (Simultaneous Localization and Mapping) algorithms. If youâ€™re enthusiastic about NeRF-based Slam algorithms and wish to delve deep into their functionality and codebase, youâ€™re in the right place.</p><p>If you find this repository useful, please consider <strong><a href="https://github.com/electech6/NeRF-Based-SLAM-Incredible-Insights#citation">CITING</a> and STARING</strong> this project. Feel free to share this project with others!</p></blockquote><object data="/pdf/NICE-SLAMè®ºæ–‡è®²è§£.pdf" type="application/pdf" width="100%" height="1000"></object>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§†è§‰SLAM </tag>
            
            <tag> NeRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ3ï¼‰ï¼šNice-SLAMï¼ˆ1ï¼‰</title>
      <link href="2023/08/02/nerf-slam-2/"/>
      <url>2023/08/02/nerf-slam-2/</url>
      
        <content type="html"><![CDATA[<h1 id="NeRF-based-SLAMå­¦ä¹ ç¬”è®°ï¼ˆ3ï¼‰ï¼šNice-SLAMï¼ˆ1ï¼‰"><a href="#NeRF-based-SLAMå­¦ä¹ ç¬”è®°ï¼ˆ3ï¼‰ï¼šNice-SLAMï¼ˆ1ï¼‰" class="headerlink" title="NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ3ï¼‰ï¼šNice-SLAMï¼ˆ1ï¼‰"></a>NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ3ï¼‰ï¼šNice-SLAMï¼ˆ1ï¼‰</h1><h2 id="Contributions"><a href="#Contributions" class="headerlink" title="Contributions"></a>Contributions</h2><ul><li>æå‡ºäº†NICE-SLAMï¼Œä¸€ä¸ªå¯†é›†çš„RGB-D SLAMç³»ç»Ÿï¼Œå…·æœ‰å®æ—¶æ€§ã€å¯æ‰©å±•æ€§ã€é¢„æµ‹æ€§å’Œå¯¹å„ç§å…·æœ‰æŒ‘æˆ˜æ€§çš„åœºæ™¯çš„é²æ£’æ€§ã€‚</li><li>NICE-SLAMçš„æ ¸å¿ƒæ˜¯åŸºäºç½‘æ ¼çš„åˆ†å±‚ç¥ç»éšå¼ç¼–ç ã€‚ä¸å…¨å±€ç¥ç»åœºæ™¯ç¼–ç ç›¸æ¯”ï¼Œè¿™ç§è¡¨ç¤ºæ–¹å¼å…è®¸å±€éƒ¨æ›´æ–°ï¼Œè¿™æ˜¯å¤§åœºæ™¯æ–¹æ³•çš„å…ˆå†³æ¡ä»¶ã€‚</li><li>åœ¨å„ç§æ•°æ®é›†ä¸Šåšäº†å¹¿æ³›çš„è¯„ä¼°ï¼Œå±•ç¤ºäº†NICE-SLAMåœ¨å®šä½å’Œå»ºå›¾æ–¹é¢çš„ä¼˜åŠ¿ã€‚</li></ul><h2 id="è®ºæ–‡æåŠçš„è§‚ç‚¹"><a href="#è®ºæ–‡æåŠçš„è§‚ç‚¹" class="headerlink" title="è®ºæ–‡æåŠçš„è§‚ç‚¹"></a>è®ºæ–‡æåŠçš„è§‚ç‚¹</h2><h3 id="abstract-amp-introductionéƒ¨åˆ†"><a href="#abstract-amp-introductionéƒ¨åˆ†" class="headerlink" title="abstract&amp;introductionéƒ¨åˆ†"></a>abstract&amp;introductionéƒ¨åˆ†</h3><ul><li><p>ç°æœ‰æ–¹æ³•å¯¹åœºæ™¯çš„é‡å»ºè¿‡äºå¹³æ»‘ï¼Œå¹¶ä¸”éš¾ä»¥æ‰©å±•åˆ°æ›´å¤§çš„åœºæ™¯ï¼›è¿™äº›é™åˆ¶ä¸»è¦æ˜¯ä½¿ç”¨äº†ç®€å•çš„å…¨è¿æ¥ç½‘ç»œæ¶æ„ï¼Œå¹¶ä¸”does not incorporate local information in the observations.</p><blockquote><p>è¿™é‡Œçš„å±€éƒ¨ä¿¡æ¯æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Œè¯´çš„æ˜¯é«˜é¢‘çš„ã€æ¯”è¾ƒç»†èŠ‚çš„ä¸œè¥¿å—ï¼Ÿ</p></blockquote></li><li><p>NICE-SLAMä½œè€…è®¤ä¸ºï¼ŒSLAMç³»ç»Ÿéœ€è¦å…·å¤‡ä»¥ä¸‹æ¡ä»¶ï¼š</p><ul><li>å®æ—¶</li><li>èƒ½å¯¹æ²¡è§‚æµ‹åˆ°çš„åŒºåŸŸè¿›è¡Œåˆç†é¢„æµ‹</li><li>æ‰©å±•åˆ°å¤§å‹åœºæ™¯</li><li>è¶³å¤Ÿé²æ£’ï¼Œå®¹å¿å™ªå£°æˆ–è€…é—æ¼çš„è§‚æµ‹</li></ul></li><li><p>NICE-SLAMä½œè€…è®¤ä¸ºï¼š</p><ul><li>ä¼ ç»ŸSLAMæ–¹æ³•æ»¡è¶³å®æ—¶æ€§ã€é€‚ç”¨äºå¤§åœºæ™¯ï¼Œä½†æ˜¯unable to make plausible geometry estimation</li><li>åŸºäºå­¦ä¹ çš„SLAMæ–¹æ³•æœ‰ä¸€å®šç¨‹åº¦é¢„æµ‹èƒ½åŠ›ï¼Œéœ€è¦åœ¨ç‰¹å®šä»»åŠ¡çš„æ•°æ®é›†ä¸Šè®­ç»ƒï¼Œæ›´å€¾å‘äºå¤„ç†å™ªå£°å’Œå¼‚å¸¸å€¼ï¼Œåªé€‚ç”¨äºæœ‰å¤šä¸ªå¯¹è±¡çš„å°åœºæ™¯ã€‚</li><li>è¿‘æœŸçš„å·¥ä½œiMAPåœ¨é¢å¯¹æ›´å¤§çš„åœºæ™¯æ—¶ï¼Œé‡å»ºç²¾åº¦å’Œè·Ÿè¸ªç²¾åº¦æ˜¾è‘—ä¸‹é™ã€‚å…¶ä¸­ä½œè€…è®¤ä¸ºiMAPçš„å…³é”®é™åˆ¶å› ç´ æ˜¯ä½¿ç”¨å•ä¸€çš„MLPè¡¨ç¤ºåœºæ™¯ã€‚</li><li>è¿‘æœŸçš„ä¸€äº›å·¥ä½œï¼ˆConvolutional occupancy networksï¼ŒNeuralrecon: Real-time coherent 3d reconstruction from monocular video.ï¼‰å‘ç°å»ºç«‹å¤šå±‚æ¬¡çš„åŸºäºç½‘æ ¼çš„ç‰¹å¾å¯ä»¥å¸®åŠ©ä¿ç•™å‡ ä½•ç»†èŠ‚ã€é‡å»ºå¤æ‚åœºæ™¯ã€‚ä½†æ˜¯è¿™äº›æ–¹æ³•æ˜¯ç¦»çº¿çš„ï¼Œä¸å…·å¤‡å®æ—¶æ€§ã€‚</li></ul></li><li><p>NICE-SLAMç»“åˆäº†åˆ†å±‚åœºæ™¯è¡¨ç¤ºå’Œéšå¼ç¥ç»è¡¨ç¤ºï¼Œåˆ©ç”¨å±‚æ¬¡ç‰¹å¾ç½‘æ ¼è¡¨ç¤ºåœºæ™¯çš„å‡ ä½•å½¢çŠ¶å’Œå¤–è§‚ï¼Œç»“åˆä¸åŒç©ºé—´åˆ†è¾¨ç‡ä¸‹é¢„è®­ç»ƒçš„ç¥ç»éšå¼è§£ç å™¨çš„å½’çº³åå·®ï¼Œåˆ©ç”¨occupancyå’Œcolor decoderè¾“å‡ºæ¸²æŸ“çš„æ·±åº¦å’Œå½©è‰²å›¾åƒã€‚é€šè¿‡æœ€å°åŒ–re-rendering lossæ¥ä¼˜åŒ–ç‰¹å¾ç½‘ç»œã€‚</p></li></ul><h3 id="related-workéƒ¨åˆ†"><a href="#related-workéƒ¨åˆ†" class="headerlink" title="related workéƒ¨åˆ†"></a>related workéƒ¨åˆ†</h3><h4 id="Dense-Visual-SLAM"><a href="#Dense-Visual-SLAM" class="headerlink" title="Dense Visual SLAM"></a>Dense Visual SLAM</h4><ul><li><p>NICE-SLAMæŠŠåœ°å›¾è¡¨ç¤ºåˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p><blockquote><p>ç¬¬ä¸€æ¬¡è§ï¼Œå¾ˆæ–°å¥‡</p></blockquote><ul><li>3Då‡ ä½•å›¾å½¢é”šå®šåˆ°å…³é”®å¸§ä¸Šï¼Œè¯´ç™½äº†å°±æ˜¯æ·±åº¦å›¾ï¼Œæ¯”å¦‚DTAMã€DSOã€TANDEMã€DROID-SLAMç­‰å·¥ä½œï¼›</li><li>3Då‡ ä½•å›¾å½¢é”šå®šåˆ°ç»Ÿä¸€çš„ä¸–ç•Œåæ ‡ä¸­ï¼Œè¯´ç™½äº†å°±æ˜¯surfelsæˆ–è€…voxel gridsï¼Œé‡Œé¢å­˜å‚¨çš„æ˜¯occupanciesåè€…TSDF valuesï¼Œæ¯”å¦‚KinectFusionç­‰ä½œå“ã€‚</li></ul></li><li><p>NICE-SLAMåŒæ ·é‡‡ç”¨ä½“ç´ ç½‘æ ¼è¡¨ç¤ºï¼Œä½†æ˜¯å­˜å‚¨çš„æ˜¯å‡ ä½•å›¾å½¢çš„éšå¼ç¼–ç ï¼Œåœ¨mappingçš„è¿‡ç¨‹ä¸­ç›´æ¥å¯¹å…¶ä¼˜è¿›è¡Œä¼˜åŒ–ã€‚</p><p>è¿™ç§æ–¹å¼å…è®¸NICE-SLAMåœ¨è¾ƒä½çš„ç½‘æ ¼åˆ†è¾¨ç‡ä¸‹å®ç°æ›´ç²¾ç¡®çš„å‡ ä½•å›¾å½¢ã€‚</p></li></ul><h4 id="Neural-Implicit-Representations"><a href="#Neural-Implicit-Representations" class="headerlink" title="Neural Implicit Representations"></a>Neural Implicit Representations</h4><ul><li><p>ç®€å•ç½—åˆ—äº†å„æ–¹é¢è¿‘æœŸçš„ä¸€äº›å·¥ä½œï¼Œå¹¶ä¸”ä¹Ÿè¯´äº†ç”¨RGB-Dè®­ç»ƒNeRFï¼Œä½†éœ€è¦ä½å§¿ï¼Œæˆ–è€…è§£å†³ç›¸æœºä½å§¿ä¼˜åŒ–é—®é¢˜çš„å·¥ä½œï¼Œä½†æ˜¯æåˆ°äº†è¿™æ ·çš„å·¥ä½œä¼˜åŒ–æ—¶é—´å¾ˆé•¿ï¼Œä¸èƒ½å¤Ÿå®æ—¶åº”ç”¨ï¼›</p></li><li><p>å†ä¸€æ¬¡è¯´iMAPåªä½¿ç”¨ä¸€ä¸ªMLPè¡¨ç¤ºåœºæ™¯ï¼Œå®¹é‡æœ‰é™ï¼Œæ— æ³•è¡¨ç¤ºè¯¦ç»†çš„åœºæ™¯å‡ ä½•å½¢çŠ¶ï¼Œæ— æ³•åšåˆ°ç²¾ç¡®çš„ç›¸æœºè·Ÿè¸ªã€‚</p></li><li><p>NICE-SLAMå°†å¯å­¦ä¹ çš„æ½œåœ¨åµŒå…¥å‘é‡ï¼ˆembeddingsï¼‰ä¸ä¸€ä¸ªé¢„å…ˆè®­ç»ƒçš„è¿ç»­éšå¼è§£ç å™¨ç›¸ç»“åˆã€‚è¿™æ ·å¯ä»¥é‡å»ºå¤æ‚çš„å‡ ä½•ç»“æ„å’Œé¢„æµ‹æ›´å¤§çš„å®¤å†…åœºæ™¯çš„ç»†èŠ‚çº¹ç†ï¼ŒåŒæ—¶ä¿æŒæ›´å°‘çš„è®¡ç®—é‡å’Œæ›´å¿«çš„æ”¶æ•›é€Ÿåº¦ã€‚</p><blockquote><p>è¿™é‡Œç©¶ç«Ÿæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿï¼Ÿï¼Ÿ</p><p>ä¸è¿‡è¿™é‡Œè¯´Local implicit grid representations for 3d sceneså’ŒConvolutional occupancy networksä¹Ÿæ˜¯å°†ä¼ ç»Ÿçš„ç½‘ç»œç»“æ„å’Œå­¦ä¹ åˆ°çš„ç‰¹å¾è¡¨ç¤ºç›¸ç»“åˆï¼Œæˆ–è®¸æˆ‘å¯ä»¥ä»è¿™é‡Œå¯»æ‰¾ç­”æ¡ˆï¼Ÿ</p></blockquote></li></ul><h2 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h2><p><img src="/images/nerf-slam-2/image-20230801210340053.png"></p><h3 id="Hierarchical-Scene-Representation"><a href="#Hierarchical-Scene-Representation" class="headerlink" title="Hierarchical Scene Representation"></a>Hierarchical Scene Representation</h3><p>å°†å¤šçº§ç½‘æ ¼ç‰¹å¾å’Œé¢„è®­ç»ƒçš„è§£ç å™¨ç›¸ç»“åˆï¼Œç”¨äºé¢„æµ‹occupancyï¼Œå¯¹åº”ä¸‹é¢è¿™ä¸ªåŒºåŸŸ</p><img src="/images/nerf-slam-2/image-20230802221834666.png" style="zoom:50%;"><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒColor Levelçš„è§£ç å™¨æ˜¯æ²¡æœ‰é¢„è®­ç»ƒçš„ï¼Œéœ€è¦å‚ä¸ä¼˜åŒ–ï¼è¿™é‡Œçš„å…¬å¼ï¼Œ<strong>å¸¦$\theta$çš„æ˜¯å‡ ä½•ç›¸å…³çš„å¾…ä¼˜åŒ–å‚æ•°ï¼Œå¸¦$\omega$çš„æ˜¯é¢œè‰²ç›¸å…³çš„å¾…ä¼˜åŒ–å‚æ•°</strong>ã€‚å¾ˆæ˜æ˜¾é¢œè‰²ç›¸å…³çš„è§£ç å™¨æ˜¯$g_w$ï¼Œå¾ˆæ˜¾ç„¶éœ€è¦è¿›è¡Œä¼˜åŒ–ã€‚</p><h4 id="Mid-amp-Fine-level-Geometric-Representation"><a href="#Mid-amp-Fine-level-Geometric-Representation" class="headerlink" title="Mid-&amp;Fine-level Geometric Representation"></a>Mid-&amp;Fine-level Geometric Representation</h4><p>æ–‡ç« è¯´è§‚æµ‹åˆ°çš„åœºæ™¯ç”¨mid-å’Œfine-levelçš„ç‰¹å¾ç½‘æ ¼è¿›è¡Œè¡¨ç¤ºã€‚ç„¶åé‡å»ºè¿‡ç¨‹ä¸­ï¼Œå…ˆä¼˜åŒ–mid-levelçš„ç‰¹å¾ç½‘æ ¼ï¼Œå†åˆ©ç”¨fine-levelçš„ç‰¹å¾ç½‘æ ¼è¿›è¡Œç»†åŒ–ã€‚</p><blockquote><p>æ‰€ä»¥fine-levelä¹Ÿæ˜¯è¢«ä¼˜åŒ–äº†ï¼Ÿï¼ˆè‚¯å®šè¦ä¼˜åŒ–å•Šï¼ï¼ï¼ï¼‰</p></blockquote><p><strong>å…·ä½“å®ç°ï¼š</strong></p><ul><li><p>é€šå¸¸ï¼Œmid-levelçš„ä½“ç´ ç½‘æ ¼é•¿åº¦ä¸º32cmï¼Œfine-levelçš„ä½“ç´ ç½‘æ ¼é•¿åº¦ä¸º16cm</p><p>åœ¨TUM RGBDæ•°æ®é›†ä¸Šåˆ™ä¸º16cmã€8cmï¼Œçœ‹èµ·æ¥å¤§æ¦‚ä¿æŒäº†ä¸€ä¸ª2æ¯”1çš„æ¯”ä¾‹</p></li><li><p>å¯¹äºmid-levelï¼Œç›´æ¥ç”¨å…³è”çš„MLPï¼ˆä»ä¸Šå¾€ä¸‹æ•°ç¬¬äºŒä¸ªï¼‰å°†ç‰¹å¾è§£ç å¾—åˆ°occupancyï¼Œè¿™é‡Œç½‘ç»œçš„è¾“å…¥æ˜¯ç‚¹pçš„positional encodingå’Œåœ¨mid-level feature gridä¸­é€šè¿‡ä¸‰çº¿æ€§æ’å€¼å¾—åˆ°çš„ç‚¹på¤„çš„featureã€‚</p></li><li><p>ä¸ºäº†å­¦ä¹ åˆ°æ›´é«˜é¢‘çš„ç»†èŠ‚ï¼ŒNICE-SLAMç”¨æ®‹å·®çš„æ–¹å¼æ·»åŠ äº†fine-levelçš„ç‰¹å¾ã€‚å¦‚ä»ä¸Šå¾€ä¸‹æ•°ç¬¬ä¸‰ä¸ªMLPæ‰€ç¤ºï¼Œè¯¥ç½‘ç»œè¾“å…¥ç‚¹pçš„positional encodingã€ç‚¹påœ¨mid-levelé€šè¿‡ä¸‰çº¿æ€§æ’å€¼å¾—åˆ°çš„featureã€ç‚¹påœ¨fine-levelé€šè¿‡ä¸‰çº¿æ€§æ’å€¼å¾—åˆ°çš„featureï¼Œè¾“å‡ºmid-levelçš„occupancyåç§»é‡ï¼ˆoffsetï¼‰</p></li><li><p>æœ‰ä¸ªéå¸¸éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œè§£ç å™¨æ˜¯é¢„è®­ç»ƒå¥½çš„ï¼Œè¢«å›ºå®šäº†ã€‚æ‰€ä»¥<strong>æ•´ä¸ªä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œåªå¯¹Feature Grid1&amp;2è¿›è¡Œäº†ä¼˜åŒ–ã€‚</strong>NICE-SLAMè¯´è¿™æœ‰åŠ©äºç¨³å®šä¼˜åŒ–è¿‡ç¨‹ã€ä¿è¯å‡ ä½•çš„ä¸€è‡´æ€§ã€‚</p></li></ul><h4 id="Coarse-level-Geometric-Representation"><a href="#Coarse-level-Geometric-Representation" class="headerlink" title="Coarse-level Geometric Representation"></a>Coarse-level Geometric Representation</h4><p>coarse-level feature gridçš„ç›®çš„æ˜¯æ•æ‰åœºæ™¯ä¸­çš„high-levelå‡ ä½•ä¿¡æ¯ï¼Œæ¯”å¦‚å¢™å£ã€åœ°æ¿ç­‰ï¼Œå¹¶ä¸”coarse-levelæ˜¯ç‹¬ç«‹ä¼˜åŒ–çš„ã€‚å®ƒçš„ç›®æ ‡æ˜¯é¢„æµ‹è§‚å¯Ÿåˆ°çš„å‡ ä½•å½¢çŠ¶ä¹‹å¤–çš„è¿‘ä¼¼occupancyã€‚</p><blockquote><p>æ„æ€æ˜¯mid-å’Œfine-levelæ˜¯åŒæ—¶ä¸€èµ·ä¼˜åŒ–çš„ï¼Ÿ</p></blockquote><p><strong>å…·ä½“å®ç°ï¼š</strong></p><ul><li>è¾¹é•¿2m</li><li>ä¸mid-levelä¸€æ ·çš„å¤„ç†è¿‡ç¨‹ï¼Œå¾—åˆ°occupancy</li><li>åœ¨Trackingè¿‡ç¨‹ä¸­ï¼Œcoarse-level occupancyåªç”¨äºé¢„æµ‹æ²¡æœ‰è§‚æµ‹åˆ°çš„éƒ¨åˆ†åœºæ™¯ï¼Œè¿™ç§æ–¹å¼å¯ä»¥ä¿è¯å³ä½¿æ–°çš„ä¸€å¸§å¾ˆå¤§ä¸€éƒ¨åˆ†å†…å®¹éƒ½çœ‹ä¸è§ï¼Œä½†æ˜¯ä¹Ÿèƒ½ä¿è¯TrackingæˆåŠŸã€‚</li></ul><h4 id="Pre-training-Feature-Decoders"><a href="#Pre-training-Feature-Decoders" class="headerlink" title="Pre-training Feature Decoders"></a>Pre-training Feature Decoders</h4><ul><li><p>ä½¿ç”¨3ä¸ªé¢„è®­ç»ƒçš„MLPç½‘ç»œè¿›è¡Œè§£ç ï¼Œå°†ç½‘æ ¼ç‰¹å¾è§£ç ä¸ºoccupancy</p></li><li><p>å…¶ä¸­ï¼Œcoarse-levelå’Œmid-levelçš„decoderæ˜¯ä½œä¸ºConvONetçš„ä¸€éƒ¨åˆ†è¿›è¡Œè®­ç»ƒçš„ï¼ˆConvONetç”±CNNç¼–ç å™¨å’ŒMLPè§£ç å™¨ç»„æˆï¼‰ã€‚</p><p>ä½¿ç”¨é¢„æµ‹å€¼ä¸ground-truthä¹‹é—´çš„binary cross-entropy lossæ¥è®­ç»ƒencoderå’Œdecoderï¼Œè¿™ä¸ªè¿‡ç¨‹å’ŒConvONetæ˜¯ä¸€æ ·çš„ã€‚è®­ç»ƒå¥½ä¹‹ååªä½¿ç”¨decoderçš„éƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†è¢«å›ºå®šä½æ”¾åˆ°NICE-SLAMæ¡†æ¶ä¸­ï¼ŒNICE-SLAMé€šè¿‡ä¸æ–­çš„è®­ç»ƒfeature gridæ¥é€‚åº”è¿™ä¸ªdecoderã€‚</p><p>é€šè¿‡ä¸Šé¢è¿™æ ·çš„æ–¹å¼ï¼Œå¯ä»¥åœ¨è§£ç ä¼˜åŒ–çš„ç‰¹å¾æ—¶ï¼Œé¢„è®­ç»ƒå¥½çš„decoderå¯ä»¥åˆ©ç”¨ä»è®­ç»ƒé›†å­¦ä¹ åˆ°çš„ç‰¹å®šåˆ†è¾¨ç‡å…ˆéªŒã€‚</p><blockquote><p>è¿™é‡Œåˆ°åº•æ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼Ÿæ€ä¹ˆåˆ©ç”¨çš„ï¼Ÿï¼Ÿï¼Ÿ</p><p>è®­ç»ƒå¥½çš„decoderæ€ä¹ˆåŒ…å«è¿›æ¥å…ˆéªŒä¿¡æ¯çš„ï¼Ÿï¼Ÿï¼Ÿ</p></blockquote></li><li><p>å¯¹äºfine-levelï¼Œä½¿ç”¨äº†å’Œä¸Šé¢åŒæ ·çš„é¢„è®­ç»ƒè¿‡ç¨‹ï¼Œä½†æ˜¯åœ¨è¾“å…¥åˆ°decoderä¹‹å‰ï¼Œä¼šç®€å•çš„å°†mid-levelå’Œfine-levelçš„ç‰¹å¾è¿›è¡Œä¸€ä¸ªæ‹¼æ¥ã€‚</p></li></ul><h4 id="Color-Representation"><a href="#Color-Representation" class="headerlink" title="Color Representation"></a>Color Representation</h4><p>ä»è¿™é‡Œçš„æè¿°å¤§æ¦‚èƒ½çœ‹å‡ºï¼ŒNICE-SLAMä¸»è¦è¿˜æ˜¯å…³æ³¨æ·±åº¦ï¼Œæˆ–è€…è¯´æ›´å…³æ³¨åœºæ™¯çš„å‡ ä½•å½¢çŠ¶ï¼Œä¸»è¦é æ·±åº¦è¿›è¡ŒTrackingå’ŒMappingï¼Œè¿™é‡Œä»…ä»…æäº†ä¸€å¥å¯¹é¢œè‰²ä¿¡æ¯è¿›è¡Œç¼–ç ï¼Œå¯ä»¥ç»™Trackingæä¾›é¢å¤–çš„ä¿¡å·ã€‚</p><p>è¿™é‡Œçš„ç‰¹å¾ç½‘æ ¼å’Œè§£ç å™¨éƒ½æ˜¯éœ€è¦ä¼˜åŒ–çš„ï¼Œçœ‹ä»–ä»¬çš„ç¬¦å·å°±çŸ¥é“äº†ã€‚</p><p>NICE-SLAMçš„ä½œè€…è¯´è”åˆä¼˜åŒ–é¢œè‰²ç‰¹å¾ç½‘æ ¼å’Œå¯¹åº”çš„è§£ç å™¨å¯ä»¥æ”¹å–„è·Ÿè¸ªçš„æ€§èƒ½ï¼Œä½†æ˜¯ä¹Ÿæåˆ°è¿™å¯èƒ½ä¼šå¯¼è‡´é—å¿˜çš„é—®é¢˜ï¼Œå› ä¸ºé¢œè‰²åªå…·æœ‰å±€éƒ¨ä¸€è‡´æ€§ã€‚å¦‚æœæƒ³è¦å¯è§†åŒ–æ•´ä¸ªåœºæ™¯çš„é¢œè‰²ï¼Œå¯ä»¥æŠŠè¿™é‡Œä½œä¸ºä¸€ä¸ªåå¤„ç†çš„æ­¥éª¤è¿›è¡Œå…¨å±€ä¼˜åŒ–ã€‚</p><blockquote><p>å‰åŠæ®µå¤§æ¦‚æ‡‚ä»–çš„æ„æ€ï¼ŒååŠæ®µä¸å¤ªæ‡‚æ€ä¹ˆè¿›è¡Œä¸€ä¸ªå…¨å±€ä¼˜åŒ–ã€‚</p></blockquote><h4 id="Network-Design"><a href="#Network-Design" class="headerlink" title="Network Design"></a>Network Design</h4><p>å¯¹äºæ‰€æœ‰çš„MLPè§£ç å™¨ï¼Œä½¿ç”¨äº†å®½åº¦32ã€å…¨è¿æ¥å±‚æ•°ä¸º5çš„MLPç½‘ç»œã€‚</p><p>é™¤äº†coarse-levelï¼Œå…¶ä»–åœ°æ–¹éƒ½é‡‡ç”¨äº†å¯å­¦ä¹ çš„é«˜æ–¯ä½ç½®ç¼–ç ï¼Œè¿™èƒ½è®©NICE-SLAMå­¦ä¹ åˆ°é«˜é¢‘çš„ç»†èŠ‚å’Œå¤–è§‚ã€‚</p><blockquote><p>coarse-levelç¡®å®ä¸éœ€è¦ï¼Œä¸è¿‡ä»€ä¹ˆæ˜¯å¯å­¦ä¹ çš„é«˜æ–¯ä½ç½®ç¼–ç ï¼Ÿï¼Ÿï¼Ÿ</p></blockquote><h3 id="Depth-and-Color-Rendering"><a href="#Depth-and-Color-Rendering" class="headerlink" title="Depth and Color Rendering"></a>Depth and Color Rendering</h3><p>è¿™é‡Œç”¨çš„å’ŒNeRFå¾ˆæ¥è¿‘çš„é‡‡æ ·å’Œæ¸²æŸ“ç­–ç•¥ã€‚</p><p>å¤§æ¦‚å°±æ˜¯ï¼Œæ²¿ç€æŸæ¡å°„çº¿é‡‡æ ·ï¼Œå…ˆç±»ä¼¼NeRFçš„åˆ†å±‚é‡‡æ ·ï¼Œä¹‹åå†åœ¨è¯¥ç‚¹çš„æ·±åº¦é™„è¿‘è¿›è¡Œå‡åŒ€é‡‡æ ·ã€‚</p><p>å…·ä½“çš„çœ‹åŸè®ºæ–‡å°±è¡Œï¼Œè¿™éƒ¨åˆ†å†…å®¹å¾ˆå°‘ã€‚</p><h3 id="Mapping-and-Tracking"><a href="#Mapping-and-Tracking" class="headerlink" title="Mapping and Tracking"></a>Mapping and Tracking</h3><p>ä¸€ä¸ªçº¿ç¨‹ç”¨äºcoarse-levelçš„ä¼˜åŒ–</p><p>ä¸€ä¸ªçº¿ç¨‹ç”¨äºmid-levelå’Œfine-levelçš„ä¼˜åŒ–å’Œé¢œè‰²çš„ä¼˜åŒ–</p><p>ä¸€ä¸ªçº¿ç¨‹ç”¨äºTracking</p><h4 id="Mapping"><a href="#Mapping" class="headerlink" title="Mapping"></a>Mapping</h4><ul><li><p>ä»å½“å‰å¸§å’Œé€‰å®šçš„å…³é”®å¸§ä¸­ç»Ÿä¸€é‡‡æ ·ä¸€å®šæ•°é‡çš„åƒç´ ç‚¹ï¼Œä»¥åˆ†æ®µæ–¹å¼è¿›è¡Œä¼˜åŒ–æ¥æœ€å°åŒ–å‡ ä½•å’Œå…‰åº¦æŸå¤±ã€‚</p><ul><li><p>é¦–å…ˆåˆ©ç”¨å‡ ä½•è¯¯å·®ä¼˜åŒ–mid-levelçš„ç‰¹å¾ç½‘æ ¼ï¼›</p></li><li><p>ä¹‹ååˆ©ç”¨fine-levelçš„å‡ ä½•è¯¯å·®è”åˆä¼˜åŒ–mid-levelå’Œfine-levelçš„ç‰¹å¾ç½‘æ ¼ï¼›</p></li><li><p>æœ€åè¿›è¡Œä¸€ä¸ªlocal BAå…±åŒä¼˜åŒ–æ‰€é€‰æ‹©çš„Kä¸ªå…³é”®å¸§çš„å„ä¸ªçº§åˆ«çš„ç‰¹å¾ç½‘æ ¼ã€é¢œè‰²è§£ç å™¨å’Œä½å§¿ï¼›</p></li></ul></li><li><p>è¿™ç§å¤šé˜¶æ®µä¼˜åŒ–æ–¹å¼èƒ½å¤Ÿæ›´å¥½çš„æ”¶æ•›ï¼Œå› ä¸ºæ›´é«˜åˆ†è¾¨ç‡çš„å¤–è§‚å’Œç²¾ç»†çš„ç‰¹å¾å¯ä»¥ä¾èµ–æ¥è‡ªmid-levelå·²ç»ä¼˜åŒ–å¥½çš„å‡ ä½•ä¿¡æ¯ã€‚</p></li></ul><h4 id="Tracking"><a href="#Tracking" class="headerlink" title="Tracking"></a>Tracking</h4><ul><li><p>ä½¿ç”¨äº†å’ŒMappingä¸€æ ·çš„å…‰åº¦æŸå¤±ï¼›</p></li><li><p>ä½¿ç”¨äº†ä¿®æ”¹çš„å‡ ä½•æŸå¤±ï¼Œè¿™é‡Œå’ŒMappingç•¥æœ‰åŒºåˆ«ã€‚è¿™é‡Œçš„ç›®çš„æ˜¯é™ä½å‡ ä½•ç»“æ„ä¸­æŸäº›åŒºåŸŸçš„æƒé‡ï¼Œæ¯”å¦‚ç‰©ä½“è¾¹ç¼˜çš„æƒé‡ã€‚</p><blockquote><p>æ„æ€å°±æ˜¯è®©Trackingæ›´å…³å¿ƒå›¾åƒä¸­å¿ƒéƒ¨åˆ†çš„ä¿¡æ¯</p></blockquote></li><li><p>NICE-SLAMåœ¨è¿™é‡Œæåˆ°coarse-levelçš„çŸ­æœŸé¢„æµ‹èƒ½åŠ›èƒ½å¤Ÿè®©NICE-SLAMåœ¨ä¸¢å¸§æˆ–è€…å¿«é€Ÿç›¸æœºè¿åŠ¨çš„æƒ…å†µä¸‹è¡¨ç°å¾—æ›´åŠ é²æ£’ï¼Œè¿™éƒ¨åˆ†ä»–ä»¬ä¹Ÿåšäº†å®éªŒã€‚</p></li></ul><h4 id="Robustness-to-Dynamic-Objects"><a href="#Robustness-to-Dynamic-Objects" class="headerlink" title="Robustness to Dynamic Objects"></a>Robustness to Dynamic Objects</h4><p>NICE-SLAMæåˆ°ä¸ºäº†åœ¨Trackingè¿‡ç¨‹ä¸­å¯¹åŠ¨æ€ç‰©ä½“æ›´é²æ£’ï¼Œä»–ä»¬å¯¹æ·±åº¦oré¢œè‰²é‡æ¸²æŸ“æŸå¤±è¾ƒå¤§çš„åƒç´ ç‚¹è¿›è¡Œäº†è¿‡æ»¤ï¼Œå½“æŸå¤±è¶…è¿‡äº†ä¸­å€¼çš„10å€æ—¶ä¼šè¢«å‰”é™¤ã€‚</p><p>å¦å¤–ï¼ŒNICE-SLAMè¯´åœ¨åŠ¨æ€ç¯å¢ƒä¸‹ï¼Œè”åˆä¼˜åŒ–ç›¸æœºä½å§¿å’Œåœºæ™¯è¡¨ç¤ºæ˜¯éå¸¸æœ‰æ„ä¹‰çš„å·¥ä½œï¼Œæ˜¯æœªæ¥çš„ä¸€ä¸ªç ”ç©¶æ–¹å‘ã€‚</p><h3 id="Keyframe-Selection"><a href="#Keyframe-Selection" class="headerlink" title="Keyframe Selection"></a>Keyframe Selection</h3><p>ç±»ä¼¼iMAPçš„æ–¹æ³•ç»´æŠ¤ä¸€ä¸ªå…¨å±€çš„å…³é”®å¸§åˆ—è¡¨ï¼Œåœ¨è¿™ä¸ªåˆ—è¡¨ä¸­ä¹Ÿæ ¹æ®ä¿¡æ¯å¢ç›Šæ·»åŠ æ–°çš„å…³é”®å¸§ã€‚ä½†æ˜¯ä¸iMAPä¸åŒçš„æ˜¯ï¼ŒiMAPç”¨MLPç½‘ç»œè¡¨ç¤ºåœºæ™¯ï¼Œæ‰€ä»¥ä¸å¾—ä¸ä»æ‰€æœ‰çš„å…³é”®å¸§ä¸­è¿›è¡Œé€‰æ‹©å’Œä¼˜åŒ–ï¼›è€ŒNICE-SLAMè¿™é‡Œæ˜¯ä½¿ç”¨ç½‘æ ¼å¯¹åœºæ™¯è¿›è¡Œè¡¨ç¤ºçš„ï¼Œæ‰€ä»¥ä¼˜åŒ–åœºæ™¯çš„å‡ ä½•ç»“æ„æ—¶ï¼Œæ˜¯éœ€è¦åŒ…å«å½“å‰å¸§å’Œä¸å½“å‰å¸§æœ‰è§†è§‰é‡å çš„å…³é”®å¸§ã€‚NICE-SLAMè¿™æ ·çš„æ–¹å¼ä¹Ÿé¿å…äº†iMAPæ‰€é¢å¯¹çš„é—å¿˜é—®é¢˜ã€‚è¿™ç§å…³é”®å¸§é€‰æ‹©ç­–ç•¥ä¸ä»…ç¡®ä¿äº†å½“å‰è§†å›¾ä¹‹å¤–çš„å‡ ä½•å›¾å½¢ä¿æŒé™æ€ï¼Œå¹¶ä¸”åªéœ€è¦ä¼˜åŒ–å¿…è¦çš„å‚æ•°ï¼Œéå¸¸é«˜æ•ˆã€‚</p><p><strong>å…·ä½“å®ç°ï¼š</strong></p><ul><li><p>é¦–å…ˆéšæœºé‡‡æ ·ä¸€å®šæ•°é‡çš„åƒç´ ç‚¹ï¼›</p></li><li><p>ä½¿ç”¨ä¼˜åŒ–åçš„ç›¸æœºä½å§¿åå‘æŠ•å½±ï¼Œæ‹¿åˆ°è¿™äº›ç‚¹çš„æ·±åº¦ï¼›</p><blockquote><p>è¿™é‡Œå°±å¾—åˆ°ç‚¹äº‘äº†</p></blockquote></li><li><p>å°†ç‚¹äº‘å†æŠ•å½±åˆ°å…¨å±€å…³é”®å¸§åˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªå…³é”®å¸§ï¼›</p><blockquote><p>æœ‰ç‚¹åƒé‡æŠ•å½±è¯¯å·®</p></blockquote></li><li><p>ä»æœ‰æŠ•å½±ç‚¹çš„å…³é”®å¸§ä¸­éšæœºé€‰æ‹©K-2ä¸ªå…³é”®å¸§ï¼Œå†é€‰æ‹©æœ€è¿‘çš„å…³é”®å¸§å’Œå½“å‰å¸§ï¼Œæ‰€ä»¥æ€»å…±æœ‰Kä¸ªæ´»åŠ¨å¸§ã€‚</p></li></ul><h2 id="å®éªŒä¸æ€»ç»“"><a href="#å®éªŒä¸æ€»ç»“" class="headerlink" title="å®éªŒä¸æ€»ç»“"></a>å®éªŒä¸æ€»ç»“</h2><ul><li>å®éªŒéƒ¨åˆ†ï¼Œä»‹ç»Geometry Forecast and Hole Fillingæ—¶ï¼ŒNICE-SLAMæäº†ä¸€å¥iMAPä¸­æ²¡æœ‰ç¼–ç ä»»ä½•åœºæ™¯çš„å…ˆéªŒçŸ¥è¯†ï¼Œåè¿‡æ¥NICE-SLAMæ˜¯å› ä¸ºé¢„è®­ç»ƒäº†decoderï¼Œæ‰€ä»¥å®ƒçš„coarseæ‰æ‹¥æœ‰è¿™æ ·çš„èƒ½åŠ›çš„ï¼Ÿ</li><li>æ€»ç»“éƒ¨åˆ†ï¼ŒNICE-SLAMè¯´è‡ªå·±çš„é¢„æµ‹èƒ½åŠ›ä»…é™äºcoarse-levelï¼Œå¦å¤–ä¸èƒ½å¤Ÿè¿›è¡Œloop closuresï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªæœªæ¥çš„ç ”ç©¶æ–¹å‘ã€‚</li><li>NICE-SLAMä¸ä¼ ç»Ÿæ–¹æ³•ç›¸æ¯”ç¼ºä¹ç‰¹æ€§ï¼Œä¸å­¦ä¹ æ–¹æ³•ç›¸æ¯”å­˜åœ¨æ€§èƒ½å·®è·ã€‚</li></ul><h2 id="è¡¥å……ææ–™"><a href="#è¡¥å……ææ–™" class="headerlink" title="è¡¥å……ææ–™"></a>è¡¥å……ææ–™</h2><h3 id="Frustum-Feature-Selection"><a href="#Frustum-Feature-Selection" class="headerlink" title="Frustum Feature Selection"></a>Frustum Feature Selection</h3><p>åŸºäºç½‘æ ¼çš„è¡¨ç¤ºå¯ä»¥åªç”¨ä¼˜åŒ–å½“å‰è§†å›¾æˆªé”¥çš„å‡ ä½•å½¢çŠ¶ï¼Œä½†æ˜¯ç”±äºä¸‰çº¿æ€§æ’å€¼æœ¬èº«ï¼Œå¯¹æ‰€æœ‰ä½“ç´ çš„ç®€å•ä¼˜åŒ–ä¼šå½±å“åˆ°è§†å›¾æˆªé”¥ä¹‹å¤–çš„ç‰¹å¾</p><blockquote><p>æ¯•ç«Ÿæ¥è‡ªå…³é”®å¸§çš„ä¸€äº›å°„çº¿ä¸Šéœ€è¦é‡‡æ ·çš„ç‚¹å¹¶æ²¡æœ‰è€è€å®å®å‘†åœ¨è¿™ä¸ªè§†é”¥ä¹‹å†…ï¼Œè€Œè§†é”¥ä¹‹å¤–é‡‡æ ·çš„ç‚¹è‚¯å®šè¦é€šè¿‡ä¸‰çº¿æ€§æ’å€¼ä»æœ‰å¯èƒ½åœ¨è§†é”¥ä¹‹å¤–çš„ç‰¹å¾ç½‘æ ¼å¤„å–å€¼ï¼Œä¸€ä¼˜åŒ–å°±æ”¹å˜è§†é”¥ä¹‹å¤–çš„ç‰¹å¾äº†ã€‚</p></blockquote><p>è§£å†³çš„åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­åªæ›´æ–°åœ¨å½“å‰è§†å›¾æˆªé”¥å†…éƒ¨çš„å…¨éƒ¨ç‰¹å¾ï¼Œè¿™æ ·å¯ä»¥ä¿æŒä¹‹å‰é‡å»ºçš„å‡ ä½•å½¢çŠ¶ï¼Œåˆå¯ä»¥å¤§å¤§å‡å°‘ä¼˜åŒ–è¿‡ç¨‹ä¸­çš„å‚æ•°æ•°é‡</p><blockquote><p>æˆ‘çš„ç†è§£å°±æ˜¯ï¼Œè§†é”¥ä¹‹å¤–çš„ç‰¹å¾è¿˜æ˜¯è¢«æ‹¿è¿‡å»åšä¸‰çº¿æ€§æ’å€¼å»é‡‡æ ·äº†ï¼Œè¿™é‡Œè®¡ç®—äº†æŸå¤±ï¼Œä½†æ˜¯æ›´æ–°å‚æ•°çš„æ—¶å€™ï¼Œè§†é”¥ä¹‹å¤–çš„å°±ä¸åŠ¨äº†ï¼Œåªæ›´æ–°è§†é”¥å†…éƒ¨çš„ã€‚</p><p>ä¸è¿‡è¿™æ ·ä¼šä¸ä¼šåœ¨æŸäº›æƒ…å†µä¸‹å¯¼è‡´é‡å»ºçš„åœºæ™¯å­˜åœ¨æ˜æ˜¾çš„é”¯é½¿ï¼Ÿï¼Ÿï¼Ÿ</p><p>ä½†æ˜¯æˆ‘çœ‹åé¢çš„å®éªŒï¼Œå±…ç„¶æ˜¯åªæ›´æ–°è§†é”¥å†…éƒ¨çš„æ‰æ²¡æœ‰é”¯é½¿ï¼Ÿï¼ï¼</p></blockquote><h3 id="Hierarchical-Feature-Grid-Initialization"><a href="#Hierarchical-Feature-Grid-Initialization" class="headerlink" title="Hierarchical Feature Grid Initialization"></a>Hierarchical Feature Grid Initialization</h3><ul><li><p><strong>Coarse-level Feature Gridï¼š</strong>éšæœºåˆå§‹åŒ–ï¼›</p></li><li><p><strong>Mid-level Feature Gridï¼š</strong>ä¹Ÿæ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œç»éªŒè¡¨æ˜éšæœºåˆå§‹åŒ–å…·æœ‰æ›´å¥½çš„æ”¶æ•›æ€§ï¼›</p></li><li><p><strong>Fine-level Feature Gridï¼š</strong>éœ€è¦åˆå§‹åŒ–åˆ°fine-levelçš„decoderè¾“å‡ºä¸º0ï¼Œæ¯•ç«Ÿè¿™é‡Œç»™å‡ºæ¥çš„æ˜¯æ®‹å·®ï¼Œåˆå§‹åŒ–çš„æ®‹å·®è‚¯å®šè¦æ˜¯0ã€‚</p><p>è¿™æ ·æ‰èƒ½å¤Ÿä¿è¯ä»coarse-to-fineçš„ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œèƒ½é‡æ˜¯å¹³ç¨³è¿‡æ¸¡çš„ã€‚è®ºæ–‡ä¹Ÿæåˆ°ï¼Œåœ¨å¯¹fine-levelå¯¹åº”çš„decoderè¿›è¡Œé¢„è®­ç»ƒçš„æ—¶å€™ï¼Œå¢åŠ äº†é¢å¤–çš„æ­£åˆ™åŒ–æŸå¤±ï¼Œä¿è¯å¦‚æœfine-levelçš„ç‰¹å¾ä¸º0ï¼Œé‚£ä¹ˆæ— è®ºmid-levelçš„ç‰¹å¾å¦‚ä½•ï¼Œè¾“å‡ºçš„æ®‹å·®éƒ½åº”è¯¥ä¸º0ã€‚è¿™æ ·èƒ½å¤Ÿå…è®¸NICE-SLAMåœ¨è¿è¡Œçš„æ—¶å€™å¯¹fine-levelçš„ç‰¹å¾ç½‘æ ¼è¿›è¡Œé›¶åˆå§‹åŒ–ã€‚</p></li></ul><h3 id="Justification-for-Design-Choices"><a href="#Justification-for-Design-Choices" class="headerlink" title="Justification for Design Choices"></a>Justification for Design Choices</h3><ul><li><p><strong>Why 3-level Feature Grids?</strong></p><p>åˆ†å±‚ç½‘æ ¼å¯ä»¥å¸¦æ¥æ›´å¥½çš„æ”¶æ•›æ€§ï¼Œ3-levelå¯ä»¥ä¿è¯è´¨é‡ã€å®æ—¶æ€§èƒ½ã€å†…å­˜æ¶ˆè€—ä¹‹é—´çš„å¹³è¡¡ã€‚è¿™é‡Œè®ºæ–‡æœ‰è¿›è¡Œå®éªŒè¯æ˜è¿™ä¸€ç‚¹ï¼›</p></li><li><p><strong>Why is the Mid-level Output not a Residual to the Coarse-level Output?</strong></p><p>åœ¨è®¾è®¡çš„è¿‡ç¨‹ä¸­ï¼ŒCoarse-levelçš„ä½“ç´ å°ºå¯¸æ˜æ˜¾å¤§äºmid-levelå’Œfine-levelï¼Œè€Œä¸”Coarse-levelæ›´æ–°ä¼šå½±å“è¾ƒå¤§çš„åŒºåŸŸã€‚ä¸ºäº†ä¿è¯å°çš„å±€éƒ¨æ”¶æ•›æ•ˆç‡ï¼ŒNICE-SLAMæ–­å¼€äº†coarseä¸midã€fineä¹‹é—´çš„è¿æ¥ï¼Œåªä½¿ç”¨coarseè¿›è¡Œé¢„æµ‹ã€‚</p></li></ul><h3 id="Mesh-Visualization"><a href="#Mesh-Visualization" class="headerlink" title="Mesh Visualization"></a>Mesh Visualization</h3><p>è¿™é‡Œæåˆ°é‡å»ºçš„åœºæ™¯é‡‡ç”¨åˆ†å±‚ç‰¹å¾ç½‘æ ¼éšå¼è¡¨ç¤ºã€‚NICE-SLAMä½¿ç”¨marching cubeç®—æ³•åˆ›å»ºäº†ä¸€ä¸ªç”¨äºå¯è§†åŒ–çš„ç½‘æ ¼ã€‚å¯¹äºæ¯ä¸ªè§‚å¯Ÿç‚¹ï¼Œæˆ‘ä»¬ä½¿ç”¨ç²¾ç»†çº§è§£ç å™¨å’Œé¢œè‰²è§£ç å™¨é¢„æµ‹å…¶å ç”¨å€¼ã€‚å¯¹äºé¢„æµ‹åŒºåŸŸä¸­é‚£äº›çœ‹ä¸è§çš„ç‚¹(å³ç²—ç½‘æ ¼ä¸­æœ‰éƒ¨åˆ†è§‚æµ‹çš„ä½“ç´ )ï¼Œæˆ‘ä»¬ä»ç²—è§£ç å™¨ä¸­é¢„æµ‹å ç”¨ç‡ï¼Œå¹¶å°†é¢œè‰²è®¾ç½®ä¸ºé’è‰²è¿›è¡Œå¯è§†åŒ–ã€‚</p><blockquote><p>è¿™é‡Œæˆ‘æ„Ÿè§‰coarseçš„é¢„æµ‹ä¼šä¸ä¼šå•çº¯çš„æ˜¯å› ä¸ºç³Šäº†ï¼Ÿ</p><p>æ¯”å¦‚ä¸€å¼ å³¡è°·çš„é«˜æ¸…å›¾ï¼Œå¾ˆæ˜æ˜¾èƒ½çœ‹åˆ°å³¡è°·ï¼Œä½†æ˜¯é™ä½åˆ†è¾¨ç‡ä¹‹åå› ä¸ºå¾ˆæ¨¡ç³Šï¼Œå³¡è°·å¯èƒ½å°±å˜æˆå¹³åœ°äº†ï¼Ÿï¼Ÿï¼Ÿ</p></blockquote><h3 id="Decoder-Pretraining"><a href="#Decoder-Pretraining" class="headerlink" title="Decoder Pretraining"></a>Decoder Pretraining</h3><p>NICE-SLAMä½¿ç”¨äº†ConvONetæä¾›çš„åˆæˆå®¤å†…åœºæ™¯æ•°æ®é›†å¯¹encoder-decoderé¢„è®­ç»ƒã€‚è¿™é‡ŒNICE-SLAMä½¿ç”¨çš„æ˜¯Point Cloud Encoderè€Œä¸æ˜¯Voxel Encoderã€‚æ‰€æœ‰çš„çº§åˆ«éƒ½æ˜¯å†ConvONetä¸­ä½¿ç”¨room_grid64çš„è®¾ç½®è¿›è¡Œè®­ç»ƒçš„ï¼Œæ‰€æœ‰ç‰¹å¾ç½‘æ ¼çš„ç‰¹å¾ç»´åº¦éƒ½æ˜¯32ã€‚å…¶ä»–è¶…å‚æ•°é‡‡ç”¨äº†ä¸ConvONetä¸€æ ·çš„è®¾å®šã€‚</p><blockquote><p>æ‰€ä»¥æˆ‘çš„ç–‘æƒ‘å¾ˆå¤§ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œä¼šæƒ³åˆ°ç”¨ConvONetçš„decoderæ¥åšNICE-SLAMçš„decoderï¼Ÿï¼Ÿï¼Ÿä¸è¿‡ConvONetæ˜¯ä»–å®¶çš„å·¥ä½œï¼Œè¯´ä¸å®šçŸ¥é“ä¸€äº›ä»€ä¹ˆå§ã€‚ã€‚ã€‚ã€‚</p></blockquote><h2 id="ç›¸å…³å·¥ä½œå’ŒåŸºç¡€çŸ¥è¯†"><a href="#ç›¸å…³å·¥ä½œå’ŒåŸºç¡€çŸ¥è¯†" class="headerlink" title="ç›¸å…³å·¥ä½œå’ŒåŸºç¡€çŸ¥è¯†"></a>ç›¸å…³å·¥ä½œå’ŒåŸºç¡€çŸ¥è¯†</h2><ul><li>DTAMï¼Œè¿™æ˜¯2011å¹´çš„ä¸€ä¸ªå·¥ä½œï¼ŒNICE-SLAMä½œè€…è¯´æœ€è¿‘å¾ˆå¤šåŸºäºå­¦ä¹ çš„SLAMç³»ç»Ÿéƒ½æ˜¯ä»è¿™ä¸ªä¸Šé¢ä¿®æ”¹çš„ï¼Œå› ä¸ºDTAMè¶³å¤Ÿç®€å•ã€‚æ¯”å¦‚Deeptam: Deep tracking and mapping</li><li>CodeSLAMã€SceneCodeã€NodeSLAMç­‰ä¼˜åŒ–äº†è§£ç åˆ°å…³é”®å¸§æˆ–å¯¹è±¡æ·±åº¦å›¾çš„è¡¨ç¤ºï¼Œè¿™ä¸‰ä¸ªå·¥ä½œç»å¸¸æœ‰çœ‹åˆ°æï¼Œå¯ä»¥çœ‹ä¸€çœ‹ã€‚</li><li>==DI-Fusion==ï¼ˆå¯¹æ¯”å®éªŒçš„å¸¸å®¢ï¼‰</li><li>==TSDF-Fusion==ï¼ˆå¯¹æ¯”å®éªŒçš„å¸¸å®¢ï¼‰</li><li>==Local implicit grid representations for 3d scenes==</li><li>==<strong>Convolutional occupancy networks</strong>==</li><li>Neuralrecon: Real-time coherent 3d reconstruction from monocular video</li><li>ä¸‰çº¿æ€§æ’å€¼æå–Geometryæ˜¯ä»€ä¹ˆæƒ…å†µï¼Ÿä¸‰çº¿æ€§æ’å€¼å¥½è€³ç†Ÿï¼Œæ˜¯å•¥æ¥ç€ï¼Ÿï¼Ÿï¼Ÿ</li><li>==ConvONet==ï¼Œè¿™æ˜¯NICE-SLAMçš„è§£ç å™¨ï¼Œéœ€è¦å¥½å¥½çš„çœ‹ä¸€çœ‹ï¼ï¼ï¼</li><li>==<strong>learnable Gaussian positional encoding</strong>==æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆNICE-SLAMè®ºæ–‡æåˆ°iMAPå’Œ==Fourier features let networks learn high frequency functions in low dimensional domains==éƒ½ç”¨äº†ï¼Œæˆ‘å¯¹åè€…å¾ˆæœ‰å°è±¡ï¼Œçœ‹èµ·æ¥åé¢è¿™ç¯‡è®ºæ–‡å¿…é¡»è¦çœ‹äº†ã€‚ï¼‰</li><li>å¯¹NeRFç›¸å…³çš„æ”¹è¿›å·¥ä½œï¼Œç‰¹åˆ«æ˜¯æœ‰feature gridè¿™ç§çš„ï¼Œéå¸¸çš„ç–‘æƒ‘ï¼Œéœ€è¦å¥½å¥½äº†è§£ä¸€ä¸‹ï¼</li></ul><h2 id="æƒ³æ³•-amp-ç–‘é—®"><a href="#æƒ³æ³•-amp-ç–‘é—®" class="headerlink" title="æƒ³æ³•&amp;ç–‘é—®"></a>æƒ³æ³•&amp;ç–‘é—®</h2><ul><li>NICE-SLAMç”¨äº†å››ä¸ªç‰¹å¾ç½‘æ ¼å’Œå¯¹åº”çš„è§£ç å™¨ï¼ˆä½†æ˜¯æˆ‘çœ‹Hierarchical Feature Gridåªæœ‰ä¸‰ä¸ªï¼‰è¡¨ç¤ºåœºæ™¯çš„å‡ ä½•å½¢çŠ¶å’Œå¤–è§‚ï¼Œè¿™é‡Œæ˜¯å› ä¸ºcolorå’Œfineæ˜¯å…±ç”¨ä¸€ä¸ªFeature Gridå—ï¼Ÿ</li><li>NICE-SLAMçœ‹èµ·æ¥æ˜¯åªå¯¹feature gridè¿›è¡Œäº†ä¼˜åŒ–ï¼Œæˆ‘è®°å¾—instant-ngpä¼¼ä¹ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œè¿™é‡Œè¿˜æ˜¯è¦å¥½å¥½äº†è§£ã€å¯¹æ¯”ä¸€ä¸‹ï¼ï¼ï¼</li><li>ä¸ºä»€ä¹ˆé¢„è®­ç»ƒäº†decoderï¼Œåœ¨è§£ç çš„æ—¶å€™å°±å¯ä»¥åˆ©ç”¨ä»é¢„è®­ç»ƒé›†ä¸­å­¦ä¹ åˆ°çš„ç‰¹å®šåˆ†è¾¨ç‡çš„å…ˆéªŒä¿¡æ¯ï¼Ÿè¿™é‡Œæ˜¯ä¸æ˜¯å› ä¸ºdecoderå¼•å¯¼äº†feature gridçš„ä¼˜åŒ–è¿‡ç¨‹ï¼Ÿï¼Ÿï¼Ÿ</li><li>çœ‹åˆ°Color Representationéƒ¨åˆ†çš„æ—¶å€™ï¼Œè¿™é‡Œæˆ‘å‘ç°è™½ç„¶System Overviewå±•ç¤ºçš„pipelineåªæœ‰3ä¸ªHierarchical Feature Gridï¼Œä½†æ˜¯ç¡®å®æœ‰å››ä¸ªå¯¹åº”çš„ç¬¦å·ï¼Œå®ƒè¿™ä¸ªéƒ¨åˆ†ä»‹ç»çš„æ—¶å€™è¯´ï¼Œä½¿ç”¨äº†ç‰¹å¾ç½‘æ ¼$\psi_w$ï¼Œè€Œå‰é¢å‡ ä¸ªéƒ½æ˜¯$\phi_0,\phi_1,\phi_2$è¿™æ ·çš„ã€‚æ‰€ä»¥æ˜¯åªæœ‰3ä¸ªGridä½†æœ‰å››ä¸ªå‡½æ•°ï¼Œç„¶åæœ€å¼€å§‹æ‰è¯´ç”¨äº†å››ä¸ªç‰¹å¾ç½‘æ ¼ï¼Ÿ</li><li>æ„Ÿè§‰NICE-SLAMçš„è®ºæ–‡å†™å¾—ç‰¹åˆ«å¥½ï¼Œä¸­é—´å¾ˆå¤šä¸œè¥¿è®²çš„ç‰¹åˆ«ç‰¹åˆ«æ¸…æ¥šï¼Œé™„å½•é‡Œé¢ä¹Ÿè¯¦ç»†è§£é‡Šäº†ä¸ºä»€ä¹ˆç”¨3-levelç­‰é—®é¢˜ï¼Œå¹¶ä¸”åšäº†å……è¶³çš„å®éªŒè¯æ˜è‡ªå·±å·¥ä½œçš„æœ‰æ•ˆæ€§ã€‚è¿™ç§å†™ä½œçš„æ–¹å¼å¯ä»¥å¥½å¥½çš„å­¦ä¹ ï¼</li></ul>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§†è§‰SLAM </tag>
            
            <tag> NeRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ2ï¼‰ï¼šNeRFä¸iMap</title>
      <link href="2023/07/30/nerf-slam-1/"/>
      <url>2023/07/30/nerf-slam-1/</url>
      
        <content type="html"><![CDATA[<h2 id="NeRF-based-SLAMå­¦ä¹ ç¬”è®°ï¼ˆ2ï¼‰ï¼šNeRFä¸iMap"><a href="#NeRF-based-SLAMå­¦ä¹ ç¬”è®°ï¼ˆ2ï¼‰ï¼šNeRFä¸iMap" class="headerlink" title="NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ2ï¼‰ï¼šNeRFä¸iMap"></a>NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ2ï¼‰ï¼šNeRFä¸iMap</h2><h2 id="NeRF"><a href="#NeRF" class="headerlink" title="NeRF"></a>NeRF</h2><h3 id="ç›¸å…³å·¥ä½œä¸åŸºç¡€çŸ¥è¯†"><a href="#ç›¸å…³å·¥ä½œä¸åŸºç¡€çŸ¥è¯†" class="headerlink" title="ç›¸å…³å·¥ä½œä¸åŸºç¡€çŸ¥è¯†"></a>ç›¸å…³å·¥ä½œä¸åŸºç¡€çŸ¥è¯†</h3><ul><li><p>==volume rendering==</p></li><li><p>voxel grids</p></li><li><p>PDFï¼ˆNeRFé‡Œé¢æåˆ°çš„PDFï¼‰</p></li><li><p>==normalized device coordinate (NDC) space==</p><blockquote><p>ä¹‹å‰åœ¨è€ƒè™‘ç›¸æœºå†…å‚å¯¹NeRFæœ‰ä»€ä¹ˆå½±å“ï¼Œä¸è¿‡è®ºæ–‡é™„å½•é‡Œé¢è¯´æŠŠå…‰çº¿ä»ç›¸æœºç©ºé—´æ˜ å°„åˆ°äº†NDCç©ºé—´ã€‚è¿™éƒ¨åˆ†é™„å½•çš„å†…å®¹å¯¹åº”çš„ä»£ç ä¹‹å‰ä¹Ÿæ²¡å¤ªçœ‹æ‡‚ï¼Œè¿˜éœ€è¦å†å¥½å¥½ç†è§£ä¸€ä¸‹ï¼</p><p>NeRFé‡Œé¢å¯¹nearå’Œfarçš„å¤„ç†éå¸¸éå¸¸å…³é”®ï¼Œè¿™éƒ¨åˆ†çš„é™„å½•ä¹Ÿéœ€è¦å†çœ‹çœ‹ã€‚</p></blockquote></li><li><p>ç¥ç»æ¸²æŸ“è¿™è¾¹æœ‰ä¸¤ç¯‡ç»¼è¿°ï¼Œå¯ä»¥ä¸€å¹¶çœ‹äº†</p></li><li><p>Transformerå·¥ä½œé‡Œé¢æœ‰ä¸€ä¸ªposition encodingï¼Œéœ€è¦å¥½å¥½äº†è§£ä¸€ä¸‹ï¼</p></li><li><p>==SDFç›¸å…³çš„å·¥ä½œ==</p></li><li><p>==Occupancy Networksç›¸å…³çš„å·¥ä½œ==</p></li></ul><h3 id="å…¶ä»–æƒ³æ³•"><a href="#å…¶ä»–æƒ³æ³•" class="headerlink" title="å…¶ä»–æƒ³æ³•"></a>å…¶ä»–æƒ³æ³•</h3><ul><li><p>ä¹‹å‰å¬co-SLAMçš„æ—¶å€™ï¼Œä½œè€…å°±æåˆ°äº†å¦‚ä½•æ›´å…¬å¹³æ›´æœ‰æ•ˆåœ°è¯„ä¼°è‡ªå·±çš„å·¥ä½œã€‚</p><p>è¿™é‡ŒNeRFå…¶å®æ˜¯æ›´ä¹‹å‰çš„ä¸œè¥¿ï¼Œè¿™é‡Œå®éªŒéƒ¨åˆ†ä¹Ÿå¥½å¥½è®²äº†ç”¨ä»€ä¹ˆæŒ‡æ ‡ã€å¦‚ä½•è¯„ä¼°ç­‰ï¼Œä»¥åŠä¸ºä»€ä¹ˆå’Œxxå·¥ä½œæ¯”è¾ƒã€ä¸ºä»€ä¹ˆä¸å’Œxxå·¥ä½œæ¯”è¾ƒã€åœ¨å“ªäº›æ•°æ®é›†ä¸‹æ¯”è¾ƒã€å®šæ€§çš„æ¯”è¾ƒå’Œå®šé‡çš„æ¯”è¾ƒéƒ½æœ‰ã€‚</p><p>å¦å¤–ï¼Œè¿™é‡ŒNeRFè¿˜æœ‰å¾ˆè¯¦ç»†çš„æ¶ˆèå®éªŒã€‚</p></li><li><p>ç–‘é—®ï¼šä¸ºä»€ä¹ˆéœ€è¦ä¸€ä¸ªç²—ç½‘ç»œ+ä¸€ä¸ªç»†ç½‘ç»œï¼Œä¸ºä»€ä¹ˆä¸èƒ½åªä½¿ç”¨åŒä¸€ä¸ªç½‘ç»œï¼Œç„¶åç²—é‡‡æ ·+ç»†é‡‡æ ·å‘¢ï¼Ÿ</p></li></ul><h2 id="iMAP"><a href="#iMAP" class="headerlink" title="iMAP"></a>iMAP</h2><h3 id="ç›¸å…³å·¥ä½œä¸åŸºç¡€çŸ¥è¯†-1"><a href="#ç›¸å…³å·¥ä½œä¸åŸºç¡€çŸ¥è¯†-1" class="headerlink" title="ç›¸å…³å·¥ä½œä¸åŸºç¡€çŸ¥è¯†"></a>ç›¸å…³å·¥ä½œä¸åŸºç¡€çŸ¥è¯†</h3><ul><li>ä¼ ç»ŸSLAMé‡Œé¢çš„ä¸€äº›ä¸œè¥¿ï¼Œæ¯”å¦‚æ»‘åŠ¨çª—å£</li><li>ä¹‹å‰ä¸€ç›´æ²¡å¼„æ‡‚çš„å‡ ä¸ªå°ç‚¹ï¼š<ul><li>voxel gridï¼Œå’Œå…¶ä¸­çš„occupancy values</li><li>matching cubesï¼ˆè¿™å¥½åƒæ˜¯ä¸ªå¾ˆç†Ÿæ‚‰çš„ç®—æ³•emmmï¼‰</li></ul></li><li>==Code-SLAM==ï¼ŒiMAPå¯¹è¿™ä¸ªå·¥ä½œçš„æè¿°ï¼šâ€œMachine learning can discover low-dimensional embeddings of dense structure which enable efficient, jointly optimisable representation. CodeSLAM [1] is one example, but using a depth-map view representation rather than full volumetric 3D. Learning techniques have also been used to improve dense reconstruction but require an existing scan [5] or previous training data [21, 36, 2].â€</li><li>==TSDF fusion/TSDF fusion Kintinuous==ï¼ˆå¾ˆå¤šNeRF based SLAMçš„å·¥ä½œéƒ½å’Œè¿™ä¸ªæ¯”è¾ƒï¼‰</li><li>==Fourier features let networks learn high frequency functions in low dimensional domains. Neural Information Processing Systems (NIPS), 2020==</li></ul><h3 id="iMAPè®ºæ–‡æåˆ°çš„è§‚ç‚¹"><a href="#iMAPè®ºæ–‡æåˆ°çš„è§‚ç‚¹" class="headerlink" title="iMAPè®ºæ–‡æåˆ°çš„è§‚ç‚¹"></a>iMAPè®ºæ–‡æåˆ°çš„è§‚ç‚¹</h3><ul><li><p>å®ç°çš„ç³»ç»Ÿè¿è¡Œçš„æ•ˆæœæ˜¯ï¼šTracking 10Hzï¼ŒMapping 2Hz</p></li><li><p>éšå¼ç¥ç»è¡¨ç¤ºçš„ä¼˜åŠ¿ï¼š</p><p>åŸæ–‡ï¼šThe advantages ofan implicit MLP over standard dense SLAM techniques include efficient geometry representation with automatic detail control and smooth, plausible filling-in of unobserved regions such as the back surfaces ofobjects.</p><ul><li>å¯è°ƒæ•´åˆ†è¾¨ç‡çš„å‡ ä½•è¡¨ç¤º efficient geometry representation with automatic detail control</li><li>å¯¹ç‰©ä½“èƒŒé¢ç­‰æœªè§‚æµ‹åŒºåŸŸè¿›è¡Œå¹³æ»‘ã€ä¼¼æ˜¯è€Œéçš„å¡«å…… smooth, plausible filling-in of unobserved regions such as the back surfaces ofobjects.</li></ul></li><li><p>iMAPä½œè€…å°†SLAMè§†ä¸ºä¸€ä¸ªæŒç»­å­¦ä¹ çš„é—®é¢˜</p></li><li><p>å½“æ·±åº¦å›¾å¯ç”¨æ—¶ï¼Œå¼•å¯¼ç¨€ç–é‡‡æ ·è¿›è¡Œæ¸²æŸ“å’Œè®­ç»ƒå¯ä»¥ç”¨åˆ°å®æ—¶çš„SLAMç³»ç»Ÿä¸­</p></li><li><p>æŒç»­å­¦ä¹ çš„ç³»ç»Ÿåº”è¯¥æœ‰ä¸¤æ–¹é¢çš„èƒ½åŠ›ï¼š</p><ul><li>å¯å¡‘æ€§ï¼šè·å–æ–°çŸ¥è¯†çš„èƒ½åŠ›</li><li>ç¨³å®šæ€§ï¼šä¿ç•™æ—§çŸ¥è¯†çš„èƒ½åŠ›</li></ul><p>é—å¿˜æ—§çŸ¥è¯†æ˜¯æŒç»­å­¦ä¹ çš„ç¥ç»ç½‘ç»œéœ€è¦é¢å¯¹çš„é—®é¢˜ï¼Œé¿å…æ–°çš„ç»å†è¦†ç›–è®°å¿†å¾ˆé‡è¦ã€‚</p></li><li><p>iMAPçš„ä½œè€…é¢å¯¹å¦‚ä½•è§£å†³æŒç»­å­¦ä¹ çš„ç¥ç»ç½‘ç»œé—å¿˜æ—§çŸ¥è¯†æåˆ°çš„è§£å†³åŠæ³•ï¼š</p><ul><li>é€šè¿‡ç›¸å¯¹æƒé‡ä¿æŠ¤é¿å…æ–°æ•°æ®çš„å½±å“ï¼Œç±»ä¼¼SLAMä¸­çš„æ»¤æ³¢æ–¹æ³•ï¼Œå¯ä»¥è¿›ä¸€æ­¥ç ”ç©¶ï¼›</li><li>è€Œå†»ç»“æˆ–è€…å›ºå®šè‡ªç½‘ç»œçš„æ–¹æ³•å¯¹SLAMç³»ç»Ÿæ¥è¯´è¿‡äºç®€å•å’Œç¦»æ•£ï¼›</li><li>iMAPåœ¨è¿™ä¸ªé—®é¢˜ä¸Šï¼Œä¸»è¦å®ç°äº†åŸºäºå›æ”¾çš„æŒç»­å­¦ä¹ æ–¹æ³•ï¼Œç”¨å›æ”¾çš„æ–¹å¼é¿å…é—å¿˜ï¼ˆåˆ©ç”¨å…³é”®å¸§æ¥è¿›è¡Œå›æ”¾ï¼‰</li></ul><blockquote><p>æ‰€ä»¥å¦‚æœæˆ‘åé¢çœ‹NICE-SLAMçš„æ—¶å€™ï¼Œå¯ä»¥å†å›åˆ°iMAPä¸Šé¢æ¥ã€‚</p></blockquote></li></ul><h3 id="iMAPå…·ä½“å®ç°"><a href="#iMAPå…·ä½“å®ç°" class="headerlink" title="iMAPå…·ä½“å®ç°"></a>iMAPå…·ä½“å®ç°</h3><ul><li><p>è¾“å…¥çš„æ˜¯ç¨€ç–çš„ä¸»åŠ¨é‡‡æ ·ç»“æœï¼Œè¯´æ˜å¯¹äºæ¯å¼ å›¾åƒï¼Œå¯èƒ½åªä¼šé€‰æ‹©å…¶ä¸­çš„ä¸€éƒ¨åˆ†åƒç´ ç‚¹è¿›è¡Œè®­ç»ƒï¼Œè¿™åº”è¯¥æ˜¯ä¸ºäº†ä¿è¯å®æ—¶æ€§</p></li><li><p>ç½‘ç»œç»“æ„ï¼š</p><ul><li>4å±‚éšè—å±‚ï¼Œæ¯ä¸€å±‚çš„å¤§å°ä¸º256ï¼›</li><li>2ä¸ªè¾“å‡ºå±‚ï¼Œä¸€ä¸ªæ˜¯colorï¼Œä¸€ä¸ªæ˜¯density valueï¼›</li><li>ä¸è€ƒè™‘è§‚å¯Ÿæ–¹å‘ï¼Œå› æ­¤è¾“å…¥çš„ä½ç½®ä»…ä»…æ˜¯x,y,z</li><li>ä½ç½®ç¼–ç ï¼š<ul><li>åº”ç”¨å‚…é‡Œå¶ç‰¹å¾ç½‘ç»œï¼ˆFourier features let networks learn high frequency functions in low dimensional domains. Neural Information Processing Systems (NIPS), 2020ï¼‰ä¸­æåˆ°çš„é«˜æ–¯ä½ç½®åµŒå…¥ï¼Œå¯¹è¾“å…¥çš„ä½ç½®è¿›è¡Œå‡ç»´ï¼›</li><li>ä¸Šé¢çš„ç»“æœä¹Ÿè¿æ¥åˆ°äº†ç½‘ç»œçš„ç¬¬äºŒä¸ªæ¿€æ´»å±‚</li></ul></li></ul></li><li><p>æ·±åº¦å’Œé¢œè‰²çš„æ¸²æŸ“ï¼š</p><p>è¿™é‡Œä¹Ÿæåˆ°äº†å½’ä¸€åŒ–è§†è§’ï¼ˆnormalised viewing directionï¼‰ï¼Œå…¶ä»–åœ°æ–¹å’ŒNeRFåŸºæœ¬ä¸€è‡´</p></li><li><p>è”åˆä¼˜åŒ–éƒ¨åˆ†ï¼š</p><ul><li><p>è®¾å®šä¸€ç»„å…³é”®å¸§é›†åˆï¼Œæ¯ä¸ªå…³é”®å¸§ä¿å­˜äº†å›¾åƒçš„é¢œè‰²å’Œæ·±åº¦ï¼Œä»¥åŠç½‘ç»œä¼°è®¡çš„å§¿æ€ï¼›</p></li><li><p>è”åˆä¼˜åŒ–è¿™éƒ¨åˆ†éƒ½æ˜¯åŸºäºå…³é”®å¸§è¿›è¡Œå¤„ç†çš„ï¼Œè€ŒTrackingåˆ™æ˜¯é’ˆå¯¹æ¯ä¸€å¸§åšçš„ä¼˜åŒ–ï¼›</p></li><li><p>å›ºå®šåœºæ™¯ç½‘ç»œï¼Œé€šè¿‡Trackingä»¥è®¡ç®—æœ€æ–°å¸§çš„ä½å§¿ï¼›</p></li><li><p>è”åˆä¼˜åŒ–è¿™éƒ¨åˆ†æˆ‘è®¤ä¸ºé‡ç‚¹è¿˜æ˜¯ä¼˜åŒ–ç½‘ç»œçš„å‚æ•°ï¼Œä¹Ÿå¯ä»¥è¯´é‡ç‚¹æ˜¯å»ºå›¾ï¼Œä¸è¿‡è¿™é‡Œä¹Ÿè¿˜æ˜¯ä¼˜åŒ–äº†ä½å§¿çš„ã€‚</p><p>æ›´æ–°çš„ç½‘ç»œå‚æ•°ç»§ç»­ç”¨äºä¸‹ä¸€è½®è”åˆä¼˜åŒ–æœŸé—´çš„Trackingã€‚</p></li></ul></li><li><p>å…³é”®å¸§é€‰æ‹©ï¼š</p><ul><li><p>ç¬¬ä¸€å¸§ç”¨äºåˆå§‹åŒ–ç½‘ç»œå¹¶ä¸”å›ºå®šä¸–ç•Œåæ ‡ç³»ï¼›</p><blockquote><p>ç±»ä¼¼äºä¼ ç»ŸSLAMçš„ç¬¬ä¸€ä¸ªå…³é”®å¸§ï¼ŒORB-SLAM2ç¬¬ä¸€ä¸ªå…³é”®å¸§å°±æ˜¯ç¬¬ä¸€å¸§</p></blockquote></li><li><p>ä½¿ç”¨ä¿¡æ¯å¢ç›Šçš„æ–¹æ³•é€‰æ‹©å…³é”®å¸§ï¼š</p><ul><li><p>æ¯æ¬¡æ·»åŠ ä¸€ä¸ªæ–°å…³é”®å¸§ï¼Œå°±ä¿å­˜å½“å‰ç½‘ç»œå‚æ•°ä¸ºä¸€ä¸ªå‰¯æœ¬ï¼›</p><blockquote><p>è”åˆä¼˜åŒ–éƒ½æ˜¯åŸºäºå…³é”®å¸§å¤„ç†çš„ï¼Œåº”è¯¥æ²¡å¿…è¦ä¿å­˜å‰¯æœ¬ï¼Ÿ</p></blockquote></li><li><p>åœ¨ä¿å­˜çš„å‰¯æœ¬ä¸Šé¢æ£€æŸ¥æ–°çš„å¸§ï¼Œå¦‚æœé‡åˆ°ä¸€ä¸ªæ˜æ˜¾çš„æ–°åŒºåŸŸï¼Œå°±æŠŠè¿™ä¸€å¸§é€‰æ‹©ä¸ºæ–°å…³é”®å¸§ï¼›è®ºæ–‡å…¬å¼ï¼ˆ6ï¼‰å®šä¹‰äº†åˆ¤æ–­æŸä¸€å¸§å¯¹äºç½‘ç»œæ¥è¯´æ˜¯å¦ä¸ºæ–°åŒºåŸŸçš„æ ‡å‡†ï¼Œå¤§æ¦‚å°±æ˜¯å¯¹äºæŸä¸€å¸§ï¼Œé€‰ä¸­å…¶ä¸­çš„éƒ¨åˆ†åƒç´ è¿›è¡Œæ¸²æŸ“ï¼Œç„¶åè®¡ç®—ä¸€ä¸ªå¹³å‡çš„æ·±åº¦è¯¯å·®ï¼Œçœ‹ç›®å‰çš„ç½‘ç»œå¯¹äºè¿™ä¸€å¸§åŒ…å«çš„ä¿¡æ¯ï¼Œåˆ°åº•å­¦ä¹ åˆ°äº†å¤šå°‘ã€‚</p><blockquote><p>è¿™é‡Œè¿˜æäº†ä¸€å¥è·ç¦»ç‰©ä½“è¶Šè¿‘çš„æ—¶å€™å…³é”®å¸§æ·»åŠ è¶Šé¢‘ç¹ã€‚</p><p>å¾ˆç±»ä¼¼ORB-SLAM2ï¼Œè¿‘ç‚¹å˜åŠ¨å¤§çš„æ—¶å€™ä¹Ÿä¼šæ·»åŠ å…³é”®å¸§ï¼Œå› ä¸ºåˆ©ç”¨è¿œç‚¹è®¡ç®—çš„ä½å§¿ä¸å‡†ç¡®ï¼›è€Œè¿™é‡Œçš„è¯å°±æ˜¯è€ƒè™‘è·ç¦»ç‰©ä½“è¶Šè¿‘ï¼Œç»†èŠ‚è¶Šå¤šï¼Œéœ€è¦å­¦ä¹ è¡¨ç¤ºçš„ä¹Ÿè¶Šå¤šã€‚</p></blockquote></li></ul></li><li><p>å¦å¤–è®ºæ–‡é‡Œé¢æåˆ°â€œmappingè¿‡ç¨‹ä¸­æ¥æ”¶çš„æ¯ä¸€å¸§éƒ½ä¼šè¢«ç”¨äºä¸€å®šè¿­ä»£çš„è”åˆä¼˜åŒ–ï¼Œè¿™æ ·çš„è¯å…³é”®å¸§é›†åˆå°±æ˜¯ç”±é€‰æ‹©çš„å…³é”®å¸§å’Œæœ€æ–°çš„ä¸€äº›å¸§ç»„æˆâ€ã€‚</p><blockquote><p>è¿™é‡Œè¯´æ˜ï¼Œmappingè¿˜æ˜¯è€ƒè™‘äº†éå…³é”®å¸§ï¼Œç„¶åé€‰æ‹©äº†å­¦ä¹ çš„ä¸å¥½çš„ä¸€äº›å¸§ä½œä¸ºå…³é”®å¸§ï¼Ÿï¼Ÿï¼Ÿ</p><p>è¿™æ ·çš„è¯ï¼Œä¸Šé¢ä¿å­˜ç½‘ç»œå‚æ•°ä¸ºå‰¯æœ¬ä¹Ÿå¯ä»¥ç†è§£äº†</p></blockquote></li></ul></li><li><p>ä¸»åŠ¨é‡‡æ ·ï¼š</p><ul><li><p>Image Activate Sampling</p><p>æ¯å¼ å›¾åƒåªæ¸²æŸ“å…¶ä¸­200ä¸ªåƒç´ ç‚¹ï¼Œåˆ©ç”¨æ¸²æŸ“çš„æŸå¤±å¼•å¯¼ç³»ç»Ÿå¯¹æŸå¤±è¾ƒå¤§ã€ä¸å¤Ÿç²¾ç¡®çš„åœ°æ–¹è¿›è¡Œä¸»åŠ¨é‡‡æ ·ã€‚</p><ul><li>å…ˆæŠŠå›¾åƒåˆ†æˆ8x8çš„ç½‘æ ¼ï¼›</li><li>åœ¨æ¯ä¸ªç½‘æ ¼é‡Œé¢å‡åŒ€é‡‡æ ·ï¼Œè®¡ç®—æŸå¤±ï¼›</li><li>åœ¨æŸå¤±è¾ƒå¤§çš„åŒºåŸŸé‡æ–°é‡‡æ ·ä¸€ç»„æ–°çš„æ•°æ®ï¼›</li></ul><p>ä¸»åŠ¨é‡‡æ ·åªä½¿ç”¨åœ¨è”åˆä¼˜åŒ–éƒ¨åˆ†ï¼Œè€Œç›¸æœºè·Ÿè¸ªè¿˜æ˜¯ç”¨çš„å‡åŒ€é‡‡æ ·ã€‚</p></li><li><p>Keyframe Activate Sampling</p><p>ç±»ä¼¼Image Activate Samplingï¼ŒæŸå¤±è¾ƒå¤§çš„å…³é”®å¸§å¤šé‡‡æ ·ã€‚</p></li><li><p>Bounded Keyframe Selection</p><blockquote><p>å¬è¯´è¿™ä¸ªç±»ä¼¼VINSé‡Œé¢çš„æ»‘åŠ¨çª—å£ï¼Ÿ</p></blockquote><p>è”åˆä¼˜åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œä¼šæ ¹æ®Keyframe Activate Samplingé€‰æ‹©3ä¸ªå…³é”®å¸§ï¼Œå¹¶ä¸”å†çº³å…¥æœ€åä¸€ä¸ªå…³é”®å¸§å’Œå½“å‰çš„å®æ—¶å¸§è¿›è¡Œä¼˜åŒ–ã€‚è¿™é‡Œå°±ç»„æˆäº†ä¸€ä¸ªW=5çš„å…³é”®å¸§æœ‰ç•Œçª—å£ï¼Œçª—å£ä¸­çš„å…³é”®å¸§ä¼šæ ¹æ®æ—¶é—´ä¸æ–­å˜åŒ–ã€‚</p></li></ul></li></ul><h3 id="å…¶ä»–çš„æƒ³æ³•"><a href="#å…¶ä»–çš„æƒ³æ³•" class="headerlink" title="å…¶ä»–çš„æƒ³æ³•"></a>å…¶ä»–çš„æƒ³æ³•</h3><ul><li><p>å®éªŒéƒ¨åˆ†è¯´â€œWe recover mesh reconstructions if needed by querying occupancy values from the network in a uniform voxel grid and then running marching cubes. Meshing is for visualisation and evaluation purposes and does not form part of our SLAM system.â€</p><p>å‰åŠæ®µæ²¡å¤ªå¼„æ‡‚ï¼Œä½†æ˜¯è¿™é‡Œåº”è¯¥æ˜¯ä¸ºäº†æ–¹ä¾¿è½¬åŒ–æˆmeshï¼Œç”¨æ¥è¯„ä¼°å’Œå¯è§†åŒ–ï¼Ÿ4.2éƒ¨åˆ†ä¹Ÿè¯´ï¼Œç²¾åº¦ã€å®Œæˆåº¦ã€è¡¥å…¨ç‡éƒ½æ˜¯è¦å’Œground truthçš„meshä½œæ¯”è¾ƒï¼Œæ‰€ä»¥åº”è¯¥æ˜¯è¦æŠŠNeRFå­¦åˆ°çš„åœºæ™¯è½¬åŒ–ä¸ºmeshçš„ã€‚è¿™ç§è¯„ä¼°æ–¹å¼åº”è¯¥ä¸æ˜¯å¾ˆå¥½ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰åˆ«çš„å¾ˆå¥½è¯„ä¼°çš„æ–¹æ³•äº†ï¼Œåé¢çš„å·¥ä½œNCIE-SLAMã€ä»¥åŠæ›´åé¢çš„Co-SLAMä¹Ÿæåˆ°äº†è¿™æ ·åšçš„é—®é¢˜ï¼ŒCo-SLAMè¡¨ç¤ºè‡ªå·±å°è¯•æ„å»ºä¸€ä¸ªæ›´å…¬å¹³çš„è½¬åŒ–ä¸ºmeshçš„æ–¹æ³•æ¥åšè¯„ä¼°ã€‚</p></li><li><p>iMAPåœ¨å®éªŒéƒ¨åˆ†è¯´â€™ä½¿ç”¨éšæœºå˜åŒ–çš„ä¿¡æ¯è¿›è¡Œå¿«é€Ÿè¿­ä»£æ¯”ä½¿ç”¨å¯†é›†å’Œç¼“æ…¢çš„è¿­ä»£æ›´å¥½ã€‚â€è¿™é‡ŒæŒ‡çš„æ˜¯æ¯å¼ å›¾åƒéšæœºé‡‡æ ·ä¸€éƒ¨åˆ†åƒç´ ç‚¹å—ï¼Ÿï¼Ÿï¼Ÿ</p></li><li><p>iMAPè¿™é‡Œå€’æ˜¯å‘ç°ä¸€ä¸ªé—®é¢˜ï¼šä¸€ä¸ªåœºæ™¯ï¼ˆæˆ¿é—´ï¼‰åªéœ€è¦åå‡ ä¸ªå…³é”®å¸§å°±èƒ½å¾ˆå¥½çš„é‡å»ºå‡ºæ¥ï¼Œè€Œä½¿ç”¨æ›´å¤šçš„å…³é”®å¸§åˆ™æ— æ³•æé«˜åœºæ™¯çš„å®Œæˆç‡ã€‚è¿™ä¸ªæ˜¯å—åˆ°ç½‘ç»œå¤§å°çš„é™åˆ¶å—ï¼Ÿè¿˜æ˜¯å—åˆ°äº†iMAPæ‰€ä½¿ç”¨çš„Activate Samplingçš„å½±å“ï¼Ÿå¦å¤–ï¼ŒiMAPä¹ŸæŒ‡å‡ºè‡ªå·±çš„æ¨¡å‹èƒ½å¤Ÿå‡ ç§’é’Ÿå¾—åˆ°ä¸€ä¸ªç²—ç³™çš„é‡å»ºï¼Œä½†æ˜¯åŠ å…¥ç»†èŠ‚ä¿¡æ¯éœ€è¦èŠ±ä¸Šå‡ åˆ†é’Ÿæ—¶é—´ï¼Œçœ‹ä»–çš„Figure 13å°±å‘ç°äº†ï¼Œå¾ˆå¿«å°±æ·±åº¦è¯¯å·®åªæœ‰5cmäº†ï¼Œä½†æ˜¯ä»5cmé™ä½åˆ°0.75cmå°±ä¼šèŠ±è´¹éå¸¸é•¿çš„æ—¶é—´ã€‚</p></li><li><p>iMAPè®ºæ–‡è¯´æœªæ¥çš„ç ”ç©¶æ–¹å‘æ˜¯ï¼šæ›´ç»“æ„åŒ–å’Œå¤åˆçš„è¡¨ç¤ºã€‚</p><p>åŸæ–‡ï¼šFuture directions for iMAP include how to make more structured and compositional representations that reason explicitly about the self similarity in scenes.</p></li><li><p>iMAPåœ¨æ·±åº¦å’Œé¢œè‰²æ¸²æŸ“è¿™éƒ¨åˆ†ä¹Ÿæåˆ°äº†å½’ä¸€åŒ–è§†è§’ï¼ˆnormalised viewing directionï¼‰ï¼Œè¿™ä¸ªå’ŒNeRFçš„NDCåº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Ÿä½†æ˜¯è¿™é‡Œçš„ç›®çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§†è§‰SLAM </tag>
            
            <tag> NeRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ1ï¼‰ï¼šç›¸å…³å·¥ä½œæ•´ç†</title>
      <link href="2023/07/26/nerf-slam-0/"/>
      <url>2023/07/26/nerf-slam-0/</url>
      
        <content type="html"><![CDATA[<h1 id="NeRF-based-SLAMå­¦ä¹ ç¬”è®°ï¼ˆ1ï¼‰ï¼šç›¸å…³å·¥ä½œæ•´ç†"><a href="#NeRF-based-SLAMå­¦ä¹ ç¬”è®°ï¼ˆ1ï¼‰ï¼šç›¸å…³å·¥ä½œæ•´ç†" class="headerlink" title="NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ1ï¼‰ï¼šç›¸å…³å·¥ä½œæ•´ç†"></a>NeRF based SLAMå­¦ä¹ ç¬”è®°ï¼ˆ1ï¼‰ï¼šç›¸å…³å·¥ä½œæ•´ç†</h1><p><strong>NeRF</strong></p><ul><li><strong>è®ºæ–‡é“¾æ¥</strong>ï¼š<a href="https://arxiv.org/abs/2003.08934">https://arxiv.org/abs/2003.08934</a></li><li><strong>é¡¹ç›®ä¸»é¡µ</strong>ï¼š<a href="https://www.matthewtancik.com/nerf">https://www.matthewtancik.com/nerf</a></li><li><strong>å¼€æºä»£ç </strong>ï¼š<a href="https://github.com/bmild/nerf">https://github.com/bmild/nerf</a></li><li><strong>æ¼”ç¤ºè§†é¢‘</strong>ï¼š<a href="https://www.youtube.com/watch?v=JuH79E8rdKc">https://www.youtube.com/watch?v=JuH79E8rdKc</a></li></ul><p><strong>iMAP</strong></p><ul><li><strong>è®ºæ–‡é“¾æ¥</strong>ï¼š<a href="http://arxiv.org/abs/2103.12352">http://arxiv.org/abs/2103.12352</a></li><li><strong>é¡¹ç›®ä¸»é¡µ</strong>ï¼š<a href="https://edgarsucar.github.io/iMAP">https://edgarsucar.github.io/iMAP</a></li><li><strong>æ¼”ç¤ºè§†é¢‘</strong>ï¼š<a href="https://www.youtube.com/watch?v=c-zkKGArl5Y">https://www.youtube.com/watch?v=c-zkKGArl5Y</a></li></ul><p><strong>NICE-SLAM</strong></p><ul><li><strong>è®ºæ–‡é“¾æ¥</strong>ï¼š<a href="https://arxiv.org/abs/2112.12130">https://arxiv.org/abs/2112.12130</a></li><li><strong>é¡¹ç›®ä¸»é¡µ</strong>ï¼š<a href="https://pengsongyou.github.io/nice-slam">https://pengsongyou.github.io/nice-slam</a></li><li><strong>å¼€æºä»£ç </strong>ï¼š<a href="https://github.com/cvg/nice-slam">https://github.com/cvg/nice-slam</a></li><li><strong>æ¼”ç¤ºè§†é¢‘</strong>ï¼š<a href="https://www.youtube.com/watch?v=V5hYTz5os0M">https://www.youtube.com/watch?v=V5hYTz5os0M</a></li></ul><p><strong>Co-SLAM</strong></p><ul><li><strong>è®ºæ–‡é“¾æ¥</strong>ï¼š<a href="https://arxiv.org/abs/2304.14377">https://arxiv.org/abs/2304.14377</a></li><li><strong>é¡¹ç›®ä¸»é¡µ</strong>ï¼š<a href="https://hengyiwang.github.io/projects/CoSLAM">https://hengyiwang.github.io/projects/CoSLAM</a></li><li><strong>å¼€æºä»£ç </strong>ï¼š<a href="https://github.com/HengyiWang/Co-SLAM">https://github.com/HengyiWang/Co-SLAM</a></li><li><strong>æ¼”ç¤ºè§†é¢‘</strong>ï¼š<a href="https://www.youtube.com/watch?v=DJ3RkNiZQZE&amp;feature=youtu.be">https://www.youtube.com/watch?v=DJ3RkNiZQZE&amp;feature=youtu.be</a></li></ul><p><strong>ç›¸å…³å·¥ä½œ</strong></p><p><strong>Convolutional Occupancy Networks</strong></p><ul><li><strong>è®ºæ–‡é“¾æ¥</strong>ï¼š<a href="https://www.cvlibs.net/publications/Peng2020ECCV.pdf">https://www.cvlibs.net/publications/Peng2020ECCV.pdf</a></li><li><strong>é¡¹ç›®ä¸»é¡µ</strong>ï¼š<a href="https://pengsongyou.github.io/conv_onet">https://pengsongyou.github.io/conv_onet</a></li><li><strong>å¼€æºä»£ç </strong>ï¼š<a href="https://github.com/autonomousvision/convolutional_occupancy_networks">https://github.com/autonomousvision/convolutional_occupancy_networks</a></li><li><strong>æ¼”ç¤ºè§†é¢‘</strong>ï¼š<a href="https://www.youtube.com/watch?v=EmauovgrDSM">https://www.youtube.com/watch?v=EmauovgrDSM</a></li></ul><p><font color="red"><strong>Instant Neural Graphics Primitives with a Multiresolution Hash Encoding</strong></font></p><ul><li><strong>è®ºæ–‡é“¾æ¥</strong>ï¼š<a href="https://nvlabs.github.io/instant-ngp/assets/mueller2022instant.pdf">https://nvlabs.github.io/instant-ngp/assets/mueller2022instant.pdf</a></li><li><strong>é¡¹ç›®ä¸»é¡µ</strong>ï¼š<a href="https://nvlabs.github.io/instant-ngp/">https://nvlabs.github.io/instant-ngp/</a></li><li><strong>å¼€æºä»£ç </strong>ï¼š<a href="https://github.com/NVlabs/instant-ngp">https://github.com/NVlabs/instant-ngp</a></li><li><strong>æ¼”ç¤ºè§†é¢‘</strong>ï¼š<a href="https://nvlabs.github.io/instant-ngp/assets/mueller2022instant.mp4">https://nvlabs.github.io/instant-ngp/assets/mueller2022instant.mp4</a></li></ul><p><font color="red"><strong>3D Gaussian Splatting for Real-Time Radiance Field Rendering</strong></font></p><ul><li><strong>è®ºæ–‡é“¾æ¥</strong>ï¼š<a href="https://repo-sam.inria.fr/fungraph/3d-gaussian-splatting/3d_gaussian_splatting_low.pdf">https://repo-sam.inria.fr/fungraph/3d-gaussian-splatting/3d_gaussian_splatting_low.pdf</a></li><li><strong>é¡¹ç›®ä¸»é¡µ</strong>ï¼š<a href="https://repo-sam.inria.fr/fungraph/3d-gaussian-splatting/">https://repo-sam.inria.fr/fungraph/3d-gaussian-splatting/</a></li><li><strong>å¼€æºä»£ç </strong>ï¼š<a href="https://github.com/graphdeco-inria/gaussian-splatting">https://github.com/graphdeco-inria/gaussian-splatting</a></li><li><strong>æ¼”ç¤ºè§†é¢‘</strong>ï¼š<a href="https://youtu.be/T_kXY43VZnk">https://youtu.be/T_kXY43VZnk</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§†è§‰SLAM </tag>
            
            <tag> NeRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Neural Implicit Representations in SLAM</title>
      <link href="2023/07/15/meeting-5/"/>
      <url>2023/07/15/meeting-5/</url>
      
        <content type="html"><![CDATA[<h1 id="Neural-Implicit-Representations-in-SLAM"><a href="#Neural-Implicit-Representations-in-SLAM" class="headerlink" title="Neural Implicit Representations in SLAM"></a>Neural Implicit Representations in SLAM</h1><blockquote><p>ç¥ç»éšå¼è¡¨å¾åœ¨SLAMä¸­çš„åº”ç”¨æ¢ç´¢</p><p>è®²åº§é“¾æ¥ï¼š<a href="https://www.shenlanxueyuan.com/open/course/194">https://www.shenlanxueyuan.com/open/course/194</a></p></blockquote><h2 id="èƒŒæ™¯å’ŒåŸºç¡€çŸ¥è¯†ä»‹ç»"><a href="#èƒŒæ™¯å’ŒåŸºç¡€çŸ¥è¯†ä»‹ç»" class="headerlink" title="èƒŒæ™¯å’ŒåŸºç¡€çŸ¥è¯†ä»‹ç»"></a>èƒŒæ™¯å’ŒåŸºç¡€çŸ¥è¯†ä»‹ç»</h2><h3 id="ç»å…¸åœºæ™¯è¡¨å¾"><a href="#ç»å…¸åœºæ™¯è¡¨å¾" class="headerlink" title="ç»å…¸åœºæ™¯è¡¨å¾"></a>ç»å…¸åœºæ™¯è¡¨å¾</h3><img src="/images/meeting-5/image-20230715155411762.png" style="zoom:67%;"><p><strong>ç‚¹äº‘ï¼š</strong>ç®€å•ç›´è§‚ï¼Œä½†ç¼ºå°‘ç‚¹ä¹‹é—´çš„æ‹“æ‰‘å…³ç³»ã€‚</p><p><strong>ä½“ç´ ï¼š</strong>å¾ˆé€‚åˆç”¨å·ç§¯ç¥ç»ç½‘ç»œå¤„ç†ï¼Œä½†æ˜¯å¤æ‚åº¦å¾ˆé«˜ï¼Œä¸ºNçš„3æ¬¡æ–¹ã€‚</p><p><strong>ç½‘æ ¼ï¼š</strong>å­˜èµ·æ¥å¾ˆç®€å•ï¼Œæœ‰æ‹“æ‰‘ä¿¡æ¯ï¼Œä½†ä¸é€‚åˆå®æ—¶åœ¨çº¿çš„ç¼–è¾‘ï¼Œåœ¨SLAMä¸­å¾ˆå°‘æœ‰ç”¨ç½‘æ ¼è¿™ç§æ•°æ®ç»“æ„ã€‚</p><p><strong>SDFï¼š</strong>éšå¼è¡¨å¾ã€‚</p><h3 id="ç¥ç»éšå¼è¡¨å¾çš„æ—©æœŸå·¥ä½œ"><a href="#ç¥ç»éšå¼è¡¨å¾çš„æ—©æœŸå·¥ä½œ" class="headerlink" title="ç¥ç»éšå¼è¡¨å¾çš„æ—©æœŸå·¥ä½œ"></a>ç¥ç»éšå¼è¡¨å¾çš„æ—©æœŸå·¥ä½œ</h3><h4 id="DeepSDF"><a href="#DeepSDF" class="headerlink" title="DeepSDF"></a>DeepSDF</h4><img src="/images/meeting-5/image-20230715160423239.png" style="zoom:67%;"><p><strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong>ç›´æ¥ç”¨ä¸€ä¸ªç¥ç»ç½‘ç»œè¡¨ç¤ºä¸€ä¸ªåœºæ™¯æˆ–è€…ç‰©ä½“çš„SDFï¼Œè¾“å…¥åæ ‡xyzï¼Œè¾“å‡ºSDFçš„æ•°å€¼ã€‚</p><p><strong>ç¼ºç‚¹ï¼š</strong>å¿…é¡»ä»ä¸‰ç»´çš„æ•°æ®ä¸­è®­ç»ƒï¼Œè€ŒNeRFå¯ä»¥ä»2Dçš„è§‚æµ‹æ•°æ®ä¸­è®­ç»ƒã€‚å½“æ—¶çš„äººä»¬æ›´å…³æ³¨ç»™å¾ˆå¥½çš„ä¸‰ç»´æ•°æ®ï¼Œç„¶åä»ä¸­å­¦ä¹ åœºæ™¯çš„è¡¨å¾ï¼Œä¹‹åç”¨äºç”Ÿæˆæ–¹é¢çš„å·¥ä½œã€‚</p><p>DeepSDFå¾ˆé€‚åˆåšç‰©ä½“çº§åˆ«çš„é‡å»ºã€‚ä¸ºäº†ç”¨ä¸€ä¸ªMLPè¡¨ç¤ºå¾ˆå¤šç±»å‹çš„ç‰©ä½“ï¼ŒDeepSDFæå‡ºäº†auto-decoderçš„æ–¹æ³•ã€‚</p><h4 id="Neural-Radiance-Field-NeRF"><a href="#Neural-Radiance-Field-NeRF" class="headerlink" title="Neural Radiance Field(NeRF)"></a>Neural Radiance Field(NeRF)</h4><img src="/images/meeting-5/image-20230715161043828.png" style="zoom:67%;"><img src="/images/meeting-5/image-20230715161248791.png" style="zoom:67%;"><h2 id="åŸºäºNeRFçš„RGB-D-SLAM"><a href="#åŸºäºNeRFçš„RGB-D-SLAM" class="headerlink" title="åŸºäºNeRFçš„RGB-D SLAM"></a>åŸºäºNeRFçš„RGB-D SLAM</h2><h3 id="iMAP"><a href="#iMAP" class="headerlink" title="iMAP"></a>iMAP</h3><h4 id="Contributions"><a href="#Contributions" class="headerlink" title="Contributions"></a>Contributions</h4><img src="/images/meeting-5/image-20230715161737290.png" style="zoom:67%;"><p>ä»SLAMçš„è§’åº¦æ¥è¯´ï¼ŒiMAPæå‡ºäº†ä¸€ç§æ–°çš„èŒƒå¼ï¼Œå®ƒç›´æ¥ç”¨ç¥ç»éšå¼è¡¨å¾æ¥è¡¨ç¤ºåœºæ™¯ï¼ŒæŠŠå»ºå›¾çš„è¿‡ç¨‹å®šä¹‰ä¸ºä¸€ä¸ªä¼˜åŒ–çš„é—®é¢˜ï¼Œé€šè¿‡ä¼˜åŒ–åœºæ™¯è¡¨å¾ï¼Œä½¿å…¶æœ€ç¬¦åˆç³»ç»Ÿçš„2Dè§‚æµ‹ï¼Œå³å›¾åƒå’Œæ·±åº¦ã€‚</p><p>ä»NeRFçš„è§’åº¦æ¥è¯´ï¼ŒiMAPç¬¬ä¸€æ¬¡ç”¨å¢é‡å¼ã€åœ¨çº¿çš„æ–¹æ³•æ¥è®­ç»ƒNeRFã€‚å¢é‡å¼çš„è®­ç»ƒä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯é—å¿˜çš„é—®é¢˜ï¼ŒiMAPä»å…³é”®å¸§é€‰å–å’Œactive samplingæ¥å°è¯•ç¼“è§£è¿™ä¸ªé—®é¢˜ã€‚</p><h4 id="Volume-Rendering-Pipeline"><a href="#Volume-Rendering-Pipeline" class="headerlink" title="Volume Rendering Pipeline"></a>Volume Rendering Pipeline</h4><img src="/images/meeting-5/image-20230715162309104.png" style="zoom:67%;"><h4 id="Tracking-and-Mapping-Losses"><a href="#Tracking-and-Mapping-Losses" class="headerlink" title="Tracking and Mapping Losses"></a>Tracking and Mapping Losses</h4><img src="/images/meeting-5/image-20230715162356818.png" style="zoom:67%;"><h4 id="System-Overview"><a href="#System-Overview" class="headerlink" title="System Overview"></a>System Overview</h4><img src="/images/meeting-5/image-20230715162414261.png" style="zoom:67%;"><h4 id="KeyFrame-Selection"><a href="#KeyFrame-Selection" class="headerlink" title="KeyFrame Selection"></a>KeyFrame Selection</h4><img src="/images/meeting-5/image-20230715162553506.png" style="zoom:67%;"><h4 id="Image-Active-Sampling"><a href="#Image-Active-Sampling" class="headerlink" title="Image Active Sampling"></a>Image Active Sampling</h4><img src="/images/meeting-5/image-20230715162609710.png" style="zoom:67%;"><p>ä»é‡æŠ•å½±è¯¯å·®å¤§çš„åœ°æ–¹æ¥é€‰å–ï¼Œä½¿å¾—åœºæ™¯åœ¨ä¼˜åŒ–çš„æ—¶å€™æ›´å…³æ³¨å®ƒä¸èƒ½å¤Ÿå¾ˆå¥½è§£é‡Šçš„éƒ¨åˆ†ï¼Œå¯ä»¥ç¼“è§£é—å¿˜çš„é—®é¢˜ã€‚  </p><h3 id="NICE-SLAM"><a href="#NICE-SLAM" class="headerlink" title="NICE-SLAM"></a>NICE-SLAM</h3><h4 id="Contributions-1"><a href="#Contributions-1" class="headerlink" title="Contributions"></a>Contributions</h4><img src="/images/meeting-5/image-20230715165501941.png" style="zoom: 67%;"><h4 id="tiny-MLPs"><a href="#tiny-MLPs" class="headerlink" title="tiny MLPs"></a>tiny MLPs</h4><p><img src="/images/meeting-5/image-20230715170209338.png"></p><h4 id="Scene-Representation"><a href="#Scene-Representation" class="headerlink" title="Scene Representation"></a>Scene Representation</h4><p><img src="/images/meeting-5/image-20230715170316451.png"></p><img src="/images/meeting-5/image-20230715170429824.png" style="zoom: 67%;"><h3 id="Co-SLAM"><a href="#Co-SLAM" class="headerlink" title="Co-SLAM"></a>Co-SLAM</h3><h4 id="Motivation"><a href="#Motivation" class="headerlink" title="Motivation"></a>Motivation</h4><p><img src="/images/meeting-5/image-20230715170737316.png"></p><p><img src="/images/meeting-5/image-20230715170915010.png"></p><h4 id="System-Overview-1"><a href="#System-Overview-1" class="headerlink" title="System Overview"></a>System Overview</h4><p><img src="/images/meeting-5/image-20230715171425426.png"></p><img src="/images/meeting-5/image-20230715171958318.png" style="zoom: 67%;"><h4 id="Volume-Rendering-and-Loss"><a href="#Volume-Rendering-and-Loss" class="headerlink" title="Volume Rendering and Loss"></a>Volume Rendering and Loss</h4><p><img src="/images/meeting-5/image-20230715171553825.png"></p>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§†è§‰SLAM </tag>
            
            <tag> NeRF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEAMLESS MAP MERGING in ORBSLAM-Atlas</title>
      <link href="2023/05/27/paper-reading-orbslam-atlas/"/>
      <url>2023/05/27/paper-reading-orbslam-atlas/</url>
      
        <content type="html"><![CDATA[<h1 id="SEAMLESS-MAP-MERGING-in-ORBSLAM-Atlas"><a href="#SEAMLESS-MAP-MERGING-in-ORBSLAM-Atlas" class="headerlink" title="SEAMLESS MAP MERGING in ORBSLAM-Atlas"></a>SEAMLESS MAP MERGING in ORBSLAM-Atlas</h1><p>ä¸ºäº†æ£€æµ‹åœ°å›¾çš„åˆå¹¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ORBSLAMçš„place recognitioné˜¶æ®µã€‚å®ƒå¯¹ç”±å…±è§†å›¾è¿æ¥çš„ä¸‰ä¸ªå…³é”®å¸§è¿›è¡Œé‡å¤çš„ä½ç½®è¯†åˆ«ï¼Œä»¥å‡å°‘é”™è¯¯æ£€æµ‹çš„é£é™©ã€‚</p><p>ä¸‹é¢ä»‹ç»SEAMLESS MAP MERGINGçš„æµç¨‹ï¼Œæˆ‘ä»¬ä½¿ç”¨aã€sã€mä¸‰ä¸ªå­ç´¢å¼•åˆ†åˆ«æŒ‡ä»£æ´»åŠ¨çš„ï¼ˆactiveï¼‰ã€è¢«åå™¬çš„ï¼ˆswallowed ï¼‰å’Œåˆå¹¶çš„ï¼ˆmerged ï¼‰åœ°å›¾ã€‚</p><ol><li><strong>æ£€æµ‹ä¸¤å¼ åœ°å›¾ä¹‹é—´çš„å…±åŒåŒºåŸŸ</strong>ã€‚place recognitionæä¾›äº†ä¸¤ä¸ªåŒ¹é…çš„å…³é”®å¸§$K_a$å’Œ$K_s$ï¼Œä»¥åŠä¸¤ä¸ªåœ°å›¾$M_a$å’Œ$M_s$ä¸­åœ°å›¾ç‚¹ä¹‹é—´çš„å‡å®šåŒ¹é…ã€‚</li><li><strong>ä¼°è®¡ä¸¤å¼ åœ°å›¾ä¹‹é—´çš„å˜æ¢çŸ©é˜µ</strong>ã€‚åœ¨åŒç›®æ¨¡å¼ä¸‹éœ€è¦ä¼°è®¡æ¬§å¼å˜æ¢çŸ©é˜µ$SE(3)$ï¼Œè€Œåœ¨å•ç›®æ¨¡å¼éœ€è¦ä¼°è®¡ç›¸ä¼¼å˜æ¢çŸ©é˜µ$Sim(3)$ã€‚æˆ‘ä»¬ç»“åˆäº†Hornçš„æ–¹æ³•[1]å’ŒRANSACç®—æ³•ï¼Œä»åœ°å›¾$M_a$å’Œ$M_s$ä¸­åœ°å›¾ç‚¹ä¹‹é—´çš„å‡å®šåŒ¹é…ä¸­è®¡ç®—å‡ºä¸€ä¸ªåˆå§‹ä¼°è®¡ï¼Œæˆ‘ä»¬å°†ä¼°è®¡çš„å˜æ¢çŸ©é˜µåº”ç”¨äºå…³é”®å¸§$K_s$çš„å¼•å¯¼æ€§åŒ¹é…é˜¶æ®µï¼Œæˆ‘ä»¬åœ¨å…³é”®å¸§$K_s$ä¸­åŒ¹é…åœ°å›¾$M_a$ä¸­çš„ç‚¹ï¼Œé€šè¿‡å¯¹é‡æŠ•å½±è¯¯å·®è¿›è¡Œéçº¿æ€§ä¼˜åŒ–ï¼Œæœ€ç»ˆä¼°è®¡å‡º$T_{W_a,W_s}$ã€‚</li><li><strong>èåˆä¸¤å¼ åœ°å›¾</strong>ã€‚æˆ‘ä»¬å°†$T_{W_a,W_s}$åº”ç”¨äºæ‰€æœ‰å…³é”®å¸§å’Œåœ°å›¾$M_S$ä¸­çš„ç‚¹ï¼Œç„¶åï¼Œæˆ‘ä»¬æ£€æµ‹é‡å¤çš„åœ°å›¾ç‚¹å¹¶å°†å…¶èåˆï¼Œä»è€Œå¾—åˆ°ä»åœ°å›¾$M_s$å’Œ$M_a$çš„å…³é”®å¸§è§‚å¯Ÿåˆ°çš„åœ°å›¾ç‚¹ã€‚ ä¹‹åï¼Œæˆ‘ä»¬å°†åœ°å›¾$M_s$å’Œ$M_a$çš„æ‰€æœ‰å…³é”®å¸§å’Œåœ°å›¾ç‚¹åˆå¹¶åˆ°åœ°å›¾$M_m$ä¸­ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å°†åœ°å›¾$M_s$å’Œ$M_a$çš„ç”Ÿæˆæ ‘å’Œå…±è§†å›¾åˆå¹¶ä¸ºåœ°å›¾$M_m$çš„ç”Ÿæˆæ ‘å’Œå…±è§†å›¾ã€‚</li><li><strong>åœ¨è¿æ¥åŒºåŸŸè¿›è¡Œå±€éƒ¨BA</strong>ã€‚è¿æ¥åŒºåŸŸåŒ…æ‹¬åœ°å›¾$M_m$çš„å…±è§†å›¾ä¸­ä¸å…³é”®å¸§$K_a$å…±è§†çš„æ‰€æœ‰å…³é”®å¸§ã€‚ä¸ºäº†å›ºå®šæµ‹é‡çš„è‡ªç”±åº¦ï¼Œåœ°å›¾$M_a$ä¸­å›ºå®šçš„å…³é”®å¸§åœ¨å±€éƒ¨BAæ—¶ä¿æŒå›ºå®šï¼Œè€Œå…¶ä½™çš„å…³é”®å¸§åœ¨éçº¿æ€§ä¼˜åŒ–è¿‡ç¨‹ä¸­è¢«è®¾ç½®ä¸ºå¯ä¼˜åŒ–çš„å˜é‡ã€‚æˆ‘ä»¬åº”ç”¨ç¬¬äºŒä¸ªé‡å¤ç‚¹æ£€æµ‹å’Œèåˆé˜¶æ®µæ¥æ›´æ–°åœ°å›¾$M_m$çš„å…±è§†å›¾ã€‚</li><li><strong>ä½å§¿å›¾ä¼˜åŒ–</strong>ã€‚æœ€åï¼Œæˆ‘ä»¬å¯¹åœ°å›¾$M_m$è¿›è¡Œäº†ä½å§¿å›¾ä¼˜åŒ–ã€‚</li></ol><p>åœ°å›¾åˆå¹¶çš„çº¿ç¨‹ä¸è·Ÿè¸ªçº¿ç¨‹ã€å±€éƒ¨å»ºå›¾çº¿ç¨‹ä»¥åŠå…¨å±€BAçº¿ç¨‹å¹¶è¡Œã€‚åœ¨å¼€å§‹åˆå¹¶ä¹‹å‰ï¼Œå±€éƒ¨å»ºå›¾çº¿ç¨‹è¢«åœæ­¢ï¼Œä»¥é¿å…åœ¨atlasä¸­å¢åŠ æ–°çš„å…³é”®å¸§ï¼›å¦‚æœå…¨å±€BAçº¿ç¨‹æ­£åœ¨è¿è¡Œï¼Œå®ƒä¹Ÿä¼šè¢«åœæ­¢ï¼Œå› ä¸ºç”Ÿæˆæ ‘åœ¨å…¨å±€BAä¹‹åä¼šè¢«æ”¹å˜ã€‚è·Ÿè¸ªçº¿ç¨‹åœ¨æ—§çš„æ´»åŠ¨åœ°å›¾ä¸Šä¿æŒè¿è¡Œï¼Œä»¥ä¿æŒå®æ—¶è®¡ç®—ä½å§¿ã€‚ä¸€æ—¦åœ°å›¾åˆå¹¶å®Œæˆï¼Œæˆ‘ä»¬å°±æ¢å¤å±€éƒ¨å»ºå›¾çº¿ç¨‹ã€‚å…¨å±€BAå¦‚æœå·²ç»åœæ­¢ï¼Œä¹Ÿå°†é‡æ–°å¯åŠ¨ä»¥å¤„ç†æ–°æ•°æ®ã€‚</p><p><strong>REFERENCES</strong></p><p>[1] B. K. Horn, â€œClosed-form solution of absolute orientation using unit quaternions,â€ JOSA A, vol. 4, no. 4, pp. 629â€“642, 1987.</p>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Exploring NeRF-My Journey Through Research and Code</title>
      <link href="2023/04/26/meeting-4/"/>
      <url>2023/04/26/meeting-4/</url>
      
        <content type="html"><![CDATA[<h1 id="Exploring-NeRF-My-Journey-Through-Research-and-Code"><a href="#Exploring-NeRF-My-Journey-Through-Research-and-Code" class="headerlink" title="Exploring NeRF: My Journey Through Research and Code"></a>Exploring NeRF: My Journey Through Research and Code</h1><blockquote><h2 id="Taichi-ç¤¾åŒºåˆ†äº«ä¼š-2023-4-26"><a href="#Taichi-ç¤¾åŒºåˆ†äº«ä¼š-2023-4-26" class="headerlink" title="Taichi ç¤¾åŒºåˆ†äº«ä¼š 2023.4.26"></a>Taichi ç¤¾åŒºåˆ†äº«ä¼š 2023.4.26</h2></blockquote><h2 id="å¦‚ä½•é˜…è¯»ä¸€ç¯‡è®ºæ–‡"><a href="#å¦‚ä½•é˜…è¯»ä¸€ç¯‡è®ºæ–‡" class="headerlink" title="å¦‚ä½•é˜…è¯»ä¸€ç¯‡è®ºæ–‡"></a>å¦‚ä½•é˜…è¯»ä¸€ç¯‡è®ºæ–‡</h2><h3 id="Part-1"><a href="#Part-1" class="headerlink" title="Part 1"></a>Part 1</h3><p>å¯¹äºåƒæˆ‘ä¸€æ ·çš„å…¥é—¨å­¦ä¹ è€…ï¼Œæä¾›ä¸€äº›æˆ‘å­¦ä¹ è¿‡ç¨‹ä¸­çš„ç»éªŒ</p><p>åœ¨è¯»è®ºæ–‡ä¹‹å‰ï¼Œå…ˆæ¢³ç†ä¸€ä¸ªæ¡†æ¶å‡ºæ¥ï¼Œå¤§è‡´åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li><p>What: è¿™ç¯‡è®ºæ–‡ä¸»è¦åšçš„å·¥ä½œæ˜¯ä»€ä¹ˆï¼ŒåŸºäºä»€ä¹ˆèƒŒæ™¯</p></li><li><p>How: </p><p>è¿™ç¯‡è®ºæ–‡å…·ä½“æ˜¯æ€ä¹ˆåšçš„ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰ä»¥ä¸‹éƒ¨åˆ†</p><ul><li>Pipeline</li><li>Cutting-edge çš„æ–¹æ³•</li><li>Tricks &amp; Optimizations</li></ul></li><li><p>Results: </p><p>è¿™ç¯‡è®ºæ–‡æœ€åçš„ç»“æœå¦‚ä½•ï¼Œå¦‚ä½•è¡¡é‡æ•ˆæœ</p><ul><li>Experiments &amp; Metrics &amp; Demo</li><li>Benchmarks çš„é€‚ç”¨èŒƒå›´</li></ul></li></ul><p>å¯ä»¥ç”¨ç¬”è®°æˆ–è€…æ€ç»´å¯¼å›¾çš„å½¢å¼å…ˆæ¢³ç†ä¸€ä¸ªè¿™æ ·çš„ backboneï¼Œä¹‹ååœ¨é˜…è¯»è®ºæ–‡çš„è¿‡ç¨‹ä¸­ä¸€ç‚¹ä¸€ç‚¹å¡«è¿›å»</p><p><strong>æˆ‘ä»¬ä»¥ NeRF ä¸ºä¾‹æ¥ä½¿ç”¨ä¸€ä¸‹è¿™ä¸ªæ¡†æ¶</strong></p><ul><li>What:<br>é€šè¿‡ç¨€ç–çš„è¾“å…¥è§†å›¾ä¼˜åŒ–åº•å±‚çš„çš„è¿ç»­ç¥ç»è¾å°„åœºï¼Œå®ç°å¤æ‚åœºæ™¯çš„æ–°è§†è§’åˆæˆ</li><li>How:<ul><li>Pipeline</li><li>Cutting-edge çš„æ–¹æ³• : å¯å¾®çš„éšå¼åœºæ™¯è¡¨ç¤º</li><li>Tricks &amp; Optimizations<ul><li>ä½ç½®ç¼–ç  (Positional encoding)</li><li>åˆ†å±‚é‡‡æ · (Hierarchical volume sampling)</li></ul></li></ul></li><li>Results:<ul><li>PSNR/SSIM/LPIPS/Demo(novel view)</li><li>Benchmarks çš„é€‚ç”¨èŒƒå›´ï¼š llff/blender/deepvoxels/LINEMOD</li></ul></li></ul><h3 id="Part-2"><a href="#Part-2" class="headerlink" title="Part 2"></a>Part 2</h3><p>å…³æ³¨è®ºæ–‡ä¸­çš„å›¾ï¼Œè®ºæ–‡ä¸­çš„å›¾å¯ä»¥æœ€ç›´è§‚çš„åæ˜ è®ºæ–‡é‡Œæåˆ°çš„å†…å®¹</p><p><img src="/images/meeting-4/paper_contents1.png"></p><p><img src="/images/meeting-4/paper_fig3.png"></p><h3 id="Part-3"><a href="#Part-3" class="headerlink" title="Part 3"></a>Part 3</h3><p>å…³æ³¨è®ºæ–‡ä¸­çš„å…¬å¼ï¼Œè¿™æœ‰åŠ©äºæ›´å¥½åœ°ç†è§£ç®—æ³•åŸç†ï¼Œå¯¹äºé˜…è¯»æºç ä¹Ÿä¼šæœ‰æ‰€å¸®åŠ©ï¼Œå»ºè®®è‡ªå·±æ‰‹æ¨ä¸€éè®ºæ–‡ä¸­çš„å…¬å¼ï¼Œç›¸å…³å‚è€ƒèµ„æ–™å¯ä»¥ä»è®ºæ–‡ reference ä¸­æ”¶é›†</p><p>åœ¨ NeRF çš„è®ºæ–‡ä¸­ï¼Œæ¶‰åŠåˆ°äº†ä»¥ä¸‹å‡ ä¸ªå…¬å¼</p><ul><li>é€å°„ç‡</li><li>é¢œè‰²ç§¯åˆ†</li><li>åˆ†æ®µä½“ç§¯æ¸²æŸ“</li><li>NDC åæ ‡ç³»è½¬æ¢</li></ul><p>å…¬å¼æ¨å¯¼å¯ä»¥å‚è€ƒç¬”è®° â¡ï¸ <a href="http://zicx.top/notebook/paper/nerf/math/">NeRF å…¬å¼æ¨å¯¼</a></p><h3 id="å€ŸåŠ©å·¥å…·"><a href="#å€ŸåŠ©å·¥å…·" class="headerlink" title="å€ŸåŠ©å·¥å…·"></a>å€ŸåŠ©å·¥å…·</h3><p>ä»¥ä¸‹å·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´é«˜æ•ˆåœ°è¯»å–è®ºæ–‡ï¼Œéå¸¸å€¼å¾—å°è¯•</p><ul><li><p><a href="https://www.chatpdf.com/">ChatPDF</a>: Chat with any PDF</p></li><li><p><a href="https://github.com/binary-husky/chatgpt_academic">ChatGPT Academic </a>: ç§‘ç ”å·¥ä½œä¸“ç”¨ ChatGPT/GLM æ‹“å±•</p></li><li><p>New Bing: é€‰æ‹© Edge æµè§ˆå™¨ä¸º PDF æ–‡ä»¶æ‰“å¼€æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥åœ¨é¡µé¢ä¸Šä¸ Bing chat äº¤äº’</p></li></ul><p><img src="/images/meeting-4/chat_with_bing.png"></p><h2 id="å¦‚ä½•å­¦ä¹ ä»£ç â€”â€”ä»¥NeRFä¸ºä¾‹"><a href="#å¦‚ä½•å­¦ä¹ ä»£ç â€”â€”ä»¥NeRFä¸ºä¾‹" class="headerlink" title="å¦‚ä½•å­¦ä¹ ä»£ç â€”â€”ä»¥NeRFä¸ºä¾‹"></a>å¦‚ä½•å­¦ä¹ ä»£ç â€”â€”ä»¥NeRFä¸ºä¾‹</h2><h3 id="æŒ‘é€‰åˆé€‚çš„èµ„æº"><a href="#æŒ‘é€‰åˆé€‚çš„èµ„æº" class="headerlink" title="æŒ‘é€‰åˆé€‚çš„èµ„æº"></a>æŒ‘é€‰åˆé€‚çš„èµ„æº</h3><p>NeRF çš„ä»£ç å®ç°æœ‰å¾ˆå¤šæ–¹å¼ï¼Œå¯ä»¥ä»ä¸­é€‰å–æ¯”è¾ƒç†Ÿæ‚‰çš„å®ç°æ–¹å¼</p><ul><li><a href="https://github.com/bmild/nerf">å®˜æ–¹çš„ TensorFlow å®ç°</a></li><li><a href="https://github.com/yenchenlin/nerf-pytorch">Pytorch å®ç°</a></li><li><a href="https://github.com/xunull/read-nerf-pytorch">Read NeRF Pytorch </a>: å¸¦æ³¨é‡Šç‰ˆæœ¬çš„ nerf-pytorch</li><li><a href="https://github.com/taichi-dev/taichi-nerfs">Taichi + PyTorch </a>: Taichi + Pytorch å®ç°</li></ul><p>å»ºè®®å­¦ä¹  Pytorch ç›¸å…³çš„å®ç°æ–¹å¼ï¼ŒPytorch æ˜¯ç°åœ¨æ›´åŠ ä¸»æµçš„æ¡†æ¶</p><h3 id="å¦‚ä½•å­¦ä¹ æºç "><a href="#å¦‚ä½•å­¦ä¹ æºç " class="headerlink" title="å¦‚ä½•å­¦ä¹ æºç "></a>å¦‚ä½•å­¦ä¹ æºç </h3><p>æ¨èç”¨<strong>æ¨¡å—åŒ–</strong>çš„æ–¹å¼æ¥å­¦ä¹ æºç ï¼Œè¾¹çœ‹æºç çš„ç»“æ„è¾¹<strong>æ•´ç†æ¡†æ¶</strong><br>CV/DL ç›¸å…³çš„è®ºæ–‡æºç ä¸€èˆ¬éƒ½ä¼šåŒ…æ‹¬ä»¥ä¸‹å‡ éƒ¨åˆ†</p><ul><li>Datasets</li><li>Networks</li><li>Evaluators</li><li>Trainers</li><li>Visualizers(optional)</li></ul><p>å¯¹äº NeRF è€Œè¨€ï¼Œè¿˜ä¼šå¤šä¸€ä¸ªæ¨¡å— : <code>Renderer</code></p><p>è¯»ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿå¯ä»¥å¤šåšä¸€äº›äº‹æƒ…</p><ul><li>é¡ºæ‰‹è®°å½•ä¸€ä¸‹ç”¨åˆ°çš„<strong>å‚æ•°</strong>ï¼Œæ–¹ä¾¿ä¹‹åå¤ç°</li><li>å¯¹æ¯”è®ºæ–‡ä¸­çš„ä¸€äº›ç®—æ³•å’Œç»†èŠ‚ï¼Œå¼„æ¸…æ¥šå¦‚ä½•ç”¨ä»£ç å®ç°çš„<br>(position encoding/volume rendering etc.)</li></ul><h3 id="åŠ¨æ‰‹å®è·µ"><a href="#åŠ¨æ‰‹å®è·µ" class="headerlink" title="åŠ¨æ‰‹å®è·µ"></a>åŠ¨æ‰‹å®è·µ</h3><p>ä¸€ç§æ¯”è¾ƒé«˜æ•ˆçš„å­¦ä¹ æºç æ–¹å¼æ˜¯çœ‹ä»£ç çš„åŒæ—¶è‡ªå·±è·Ÿç€å†™ï¼Œæ…¢æ…¢åœ°å®Œå–„ä»£ç çš„å„ä¸ªéƒ¨åˆ†ï¼Œæœ€åå®Œå…¨å®ç°</p><p>è¿™ä¸ªè¿‡ç¨‹ä¹Ÿæœ‰å¾ˆå¤šéœ€è¦æ³¨æ„çš„åœ°æ–¹ :</p><ul><li>è‡ªå·±å†™å¾ˆéš¾æœ‰å’ŒåŸä½œè€…ä¸åŒçš„æ€è·¯å’Œæ¡†æ¶ï¼Œå®¹æ˜“å˜æˆ C-c + C-vï¼Œå› æ­¤æ¨èæŒ‰ç…§ä¹‹å‰æåˆ°çš„æ¡†æ¶æ¥å†™</li><li>æŒ‰ç…§æ¨¡å—åŒ–çš„æ–¹å¼æ¥æ£€éªŒè‡ªå·±å†™çš„ä»£ç èƒ½ä¸èƒ½ workï¼Œä¸€æ¬¡æ€§ debug æ•´ä¸ªæ¡†æ¶ä¼šå¾ˆå›°éš¾ï¼Œdebug çš„è¿‡ç¨‹å¾ˆ<del>ç—›è‹¦</del>å¿«ä¹</li><li>å­¦ä¹ äº†æºç çš„å®ç°æ–¹å¼åï¼Œæå–å®ç°è¿‡ç¨‹ä¸­çš„<strong>é‡ç‚¹æ€æƒ³å’Œæ–¹æ³•</strong>ï¼Œç„¶åå°è¯•<strong>ä¸çœ‹æºç </strong>æ¥å®ç°è‡ªå·±çš„ä»£ç </li></ul><h2 id="å¦‚ä½•å¤ç°-NeRF"><a href="#å¦‚ä½•å¤ç°-NeRF" class="headerlink" title="å¦‚ä½•å¤ç° NeRF"></a>å¦‚ä½•å¤ç° NeRF</h2><h3 id="æ•°æ®é›†å‡†å¤‡"><a href="#æ•°æ®é›†å‡†å¤‡" class="headerlink" title="æ•°æ®é›†å‡†å¤‡"></a>æ•°æ®é›†å‡†å¤‡</h3><p>Pipeline</p><ul><li>ç”¨æ‰‹æœºæ‹æ‘„ä¸€æ®µç›®æ ‡ç‰©ä½“çš„å¤šè§†è§’è§†é¢‘</li><li>ç”¨ ffmpeg å¯¹è§†é¢‘æŠ½å¸§å¾—åˆ°ç›®æ ‡ç‰©ä½“çš„å¤šè§†è§’å›¾åƒ</li><li>å€ŸåŠ© Colmap æ ‡å®šï¼Œè·å¾—ç›¸æœºçš„å†…å‚å’Œå¤–å‚</li><li>æ•´ç†æ•°æ®æ ¼å¼ï¼Œç”Ÿæˆ NeRF å¯¹åº”çš„æ•°æ®é›† ( æ¨èä½¿ç”¨ Blender æ ¼å¼ )</li></ul><p>æ•°æ®é›†æ ¼å¼</p><pre class="line-numbers language-none"><code class="language-none">.â”œâ”€â”€ trainâ”‚   â”œâ”€â”€ r_0.pngâ”‚   â”œâ”€â”€ r_1.pngâ”‚   â””â”€â”€ ...â”œâ”€â”€ ...â””â”€â”€ transforms_train.json<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è®­ç»ƒæ¨¡å‹"><a href="#è®­ç»ƒæ¨¡å‹" class="headerlink" title="è®­ç»ƒæ¨¡å‹"></a>è®­ç»ƒæ¨¡å‹</h3><p>æ•°æ®é›†å‡†å¤‡å®Œï¼Œåœ¨ä¹‹å‰è‡ªå·±å®ç°çš„æ¡†æ¶ä¸Šè®­ç»ƒæ¨¡å‹ï¼Œä¸ºäº†æ£€éªŒä»£ç æ˜¯å¦èƒ½ workï¼Œå¯ä»¥åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­å…³æ³¨ä¸€äº›é‡åŒ–çš„æ•°æ®ï¼Œå€ŸåŠ© TensorBoard æˆ‘ä»¬å¯ä»¥å¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹</p><p><img src="/images/meeting-4/image-20230426212323139.png"></p><h3 id="Eval-ç»“æœ"><a href="#Eval-ç»“æœ" class="headerlink" title="Eval ç»“æœ"></a>Eval ç»“æœ</h3><p>æ¨¡å‹è®­ç»ƒå®Œä¹‹åï¼Œå¯ä»¥ä¿å­˜æ¨¡å‹åš evaluateï¼Œé€šè¿‡ novel view å’Œ metrics æ¥æ£€éªŒè®­ç»ƒç»“æœ (200k iterations)</p><p><img src="/images/meeting-4/image-20230426212837062.png"></p><h3 id="ä¸€äº›-Tips"><a href="#ä¸€äº›-Tips" class="headerlink" title="ä¸€äº› Tips"></a>ä¸€äº› Tips</h3><p>å…³äºè‡ªå·±åˆ¶ä½œæ•°æ®é›†ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹</p><ul><li>æ‹æ‘„åœºæ™¯çš„å…‰ç…§æ¡ä»¶å°½å¯èƒ½ä¿æŒä¸€è‡´</li><li>å°½é‡ä¿æŒå¤šè§†è§’ç‰©ä½“åœ¨å›¾åƒä¸­çš„ç›¸å¯¹ä½ç½®ä¸å˜</li><li>ä¸ºäº†è·å¾—æ›´ç²¾ç¡®çš„ç›¸æœºå†…å‚ï¼Œå¯ä»¥åœ¨ç”¨ COLMAP çš„æ—¶å€™é€‰æ‹©<strong>å…±äº«å†…å‚</strong></li><li>å¤šè§†è§’å›¾åƒçš„æ•°é‡ä¿æŒåœ¨ 50-100 å¼ æ¯”è¾ƒåˆé€‚</li></ul><p>è®­ç»ƒè¿‡ç¨‹ä¸­æ¨¡å‹è°ƒå‚</p><ul><li>å…ˆæ ¹æ®è®ºæ–‡ä¸­çš„å‚æ•°å¤ç°ï¼Œé‡åˆ°é—®é¢˜å†æ£€æŸ¥å„ä¸ªæ¨¡å—</li><li>ç”±äºæ‹æ‘„åœºæ™¯çš„ä¸åŒï¼Œéœ€è¦è°ƒæ•´ scene çš„ near å’Œ far å‚æ•° ( åŸå…ˆ NeRF ä¸­ä½¿ç”¨çš„æ˜¯ 2.0 å’Œ 6.0 )</li><li>å…³æ³¨è®­ç»ƒè¿‡ç¨‹ä¸­ loss çš„å˜åŒ–ï¼Œå¦‚æœæœ‰é—®é¢˜çš„åŒ–å¯ä»¥è€ƒè™‘ç®€åŒ–è®­ç»ƒè¿‡ç¨‹ï¼Œåªç”¨ coarse model è¿›è¡Œè®­ç»ƒï¼ŒæŸ¥çœ‹ç»“æœæ˜¯å¦æœ‰é—®é¢˜ï¼Œæ²¡é—®é¢˜å†åŠ ä¸Š fine model</li><li>â€¦</li></ul>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç»éªŒåˆ†äº« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºç¥ç»ç½‘ç»œçš„ä¸‰ç»´é‡å»º</title>
      <link href="2023/04/25/3d-reconstruction-1/"/>
      <url>2023/04/25/3d-reconstruction-1/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºäºç¥ç»ç½‘ç»œçš„ä¸‰ç»´é‡å»º"><a href="#åŸºäºç¥ç»ç½‘ç»œçš„ä¸‰ç»´é‡å»º" class="headerlink" title="åŸºäºç¥ç»ç½‘ç»œçš„ä¸‰ç»´é‡å»º"></a>åŸºäºç¥ç»ç½‘ç»œçš„ä¸‰ç»´é‡å»º</h1><h2 id="1-å¯¹NeRFçš„æ€è€ƒ"><a href="#1-å¯¹NeRFçš„æ€è€ƒ" class="headerlink" title="1 å¯¹NeRFçš„æ€è€ƒ"></a>1 å¯¹NeRFçš„æ€è€ƒ</h2><p>NeRFçš„æ ¸å¿ƒæ˜¯åœºæ™¯çš„éšå¼è¡¨ç¤ºï¼Œç»™å®šä¸€ç»„å½±åƒï¼Œç½‘ç»œå»å­¦ä¹ è¿™ä¸ªä¸‰ç»´åœºæ™¯ï¼Œç„¶åå½“æŒ‡å®šä»»æ„ä¸€ä¸ªä½å§¿çš„æ—¶å€™ï¼Œå°±è¾“å‡ºå®ƒå¯¹åº”çš„å›¾ç‰‡ã€‚è¿™å…¶å®å’Œä¼ ç»Ÿçš„SfMçš„æµç¨‹æ˜¯ä¸€æ ·çš„ï¼Œæ²¡ä»€ä¹ˆæ–°é²œçš„ã€‚å”¯ä¸€ä¸åŒçš„æ˜¯SfMæ„å»ºçš„æ˜¯åœºæ™¯çš„æ˜¾å¼è¡¨è¾¾ï¼Œè€ŒNeRFæ˜¯é€šè¿‡ç¥ç»ç½‘ç»œè¿›è¡Œäº†è¡¨è¾¾ã€‚ç°åœ¨å¾ˆå¤šNeRFçš„å®£ä¼ éƒ½æ˜¯ä¸€å¼ é™æ€å›¾ç‰‡æ­é…å°å¹…åº¦ç§»åŠ¨è§†è§’çš„åŠ¨å›¾ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·ã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-14-44.gif"></p><p>ä½†è¿™æ ·å®£ä¼ æœ‰äº›è¯¯å¯¼æ€§ã€‚ä¸‹é¢ç®€å•æè¿°ã€‚</p><h3 id="1-1-NeRFå¹¶éåªåˆ©ç”¨å•å¼ å½±åƒ"><a href="#1-1-NeRFå¹¶éåªåˆ©ç”¨å•å¼ å½±åƒ" class="headerlink" title="1.1 NeRFå¹¶éåªåˆ©ç”¨å•å¼ å½±åƒ"></a>1.1 NeRFå¹¶éåªåˆ©ç”¨å•å¼ å½±åƒ</h3><p>ç¬¬ä¸€ç‚¹ï¼ŒNeRFä¸æ˜¯ç”±å•å¼ å½±åƒå¾—åˆ°çš„ã€‚ä¸Šé¢è¿™æ ·å®£ä¼ ï¼Œå¾ˆå®¹æ˜“è®©äººä»¥ä¸ºæ˜¯å•å¼ å›¾ç‰‡å¾—åˆ°äº†å¯ä»¥å°å¹…ç§»åŠ¨è§†è§’çš„ä¸‰ç»´åœºæ™¯ã€‚è¿™æ˜¯ä¸å¯¹çš„ã€‚å¦‚æœä»å•å¼ å½±åƒç”Ÿæˆä¸‰ç»´åœºæ™¯ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªç„å­¦é—®é¢˜äº†ã€‚NeRFå¹¶ä¸æ˜¯åªåˆ©ç”¨å•å¼ å½±åƒä¼°è®¡ä¸‰ç»´åœºæ™¯ã€‚</p><p>æˆ‘çš„ä¸ªäººçœ‹æ³•æ˜¯åˆ©ç”¨å•å¼ å½±åƒæ°¸è¿œä¹Ÿæ— æ³•æ¢å¤å‡ºå‡†ç¡®çš„ä¸‰ç»´åœºæ™¯ã€‚è¿™æ˜¯ä¸€ä¸ªç—…æ€é—®é¢˜ã€‚å°±å¦‚åŒå•å¼ å½±åƒæ·±åº¦ä¼°è®¡ä¸€æ ·ï¼Œå¾ˆå¤šæ—¶å€™éƒ½æ˜¯ç„å­¦é—®é¢˜ã€‚å¯¹äºå•å¼ å½±åƒæ·±åº¦ä¼°è®¡ï¼Œæˆ‘è®¤ä¸ºè¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒåœ¨äºä¸¤ç‚¹ï¼šä¸€æ˜¯è¿™æ˜¯ä¸€ä¸ªâ€œæ— ä¸­ç”Ÿæœ‰â€çš„ä¿¡æ¯ç¼ºå¤±è¡¥å…¨é—®é¢˜ã€‚å¦‚æœè¯´å¯ä»¥åˆ©ç”¨å…¶å®ƒæ¨¡æ€çš„æ•°æ®ä½œä¸ºå‚è€ƒï¼Œä¹Ÿè®¸æ˜¯æœ‰ç‰©ç†æ„ä¹‰çš„ï¼Œä½†ä»…é å•å¼ å›¾åƒæ˜¯ç«™ä¸ä½è„šçš„ã€‚äºŒæ˜¯æ·±åº¦æœ¬èº«å’Œå›¾åƒä¸­çš„çº¹ç†ã€è¯­ä¹‰ç­‰æ²¡æœ‰æ˜æ˜¾çš„å…³è”å…³ç³»ã€‚å¯¹äºè¿™ç§æ²¡æœ‰æ˜æ˜¾å¯¹åº”å…³ç³»çš„ä¸¤ä¸ªå˜é‡ï¼Œæ·±åº¦å­¦ä¹ èƒ½åŠ›å†å¼ºï¼Œä¹Ÿå¾ˆéš¾å­¦åˆ°çœŸæ­£æœ‰ä»·å€¼çš„ä¸œè¥¿ã€‚ä¸€ä¸ªç®€å•çš„ä¾‹å­å°±æ˜¯ï¼Œæ¯”å¦‚æˆ‘æœ‰ä¸€é¢ç™½å¢™ï¼Œæ‹äº†ä¸€å¼ ç…§ç‰‡ï¼Œç„¶åæˆ‘åœ¨å¢™ä¸ŠæŒ‚äº†ä¸€å¹…å±±æ°´ç”»ï¼Œåˆæ‹äº†ä¸€å¼ ï¼Œæœ€åï¼Œæˆ‘å…³ç¯äº†ï¼Œå¢™å˜é»‘äº†ï¼Œæˆ‘åˆæ‹äº†ä¸€å¼ ã€‚ä¸€å…±æœ‰ä¸‰å¼ ç…§ç‰‡ã€‚ä»å¸¸è¯†éƒ½çŸ¥é“ï¼Œè¿™ä¸‰å¼ ç…§ç‰‡çš„æ·±åº¦ä¸ä¼šæœ‰å˜åŒ–(å¦‚æœè€ƒè™‘ç”»çš„åšåº¦ï¼Œåæ˜ åœ¨æ·±åº¦å›¾ä¸Šä¼šæ˜¯ä¸€ä¸ªè§„åˆ™çš„çªå‡ºçŸ©å½¢)ã€‚ä½†äº‹å®ä¸Šï¼Œç›®å‰åº”è¯¥é²œæœ‰ç½‘ç»œèƒ½çœŸæ­£å‡†ç¡®ä¼°è®¡â€”â€”å¦‚æœå®ƒå­¦åˆ°çš„æ˜¯å’Œå›¾ç‰‡ä½ç½®ç›¸å…³çš„çŸ¥è¯†ï¼Œé‚£ä¹ˆç™½å¢™ä»ä¸Šåˆ°ä¸‹çš„æ·±åº¦å°±ä¸åŒï¼›å¦‚æœå®ƒå­¦åˆ°çš„æ˜¯ç°åº¦ç›¸å…³çš„çŸ¥è¯†ï¼Œé‚£ä¹ˆå®ƒä¼°è®¡çš„ç™½å¢™å’Œé»‘å¢™çš„æ·±åº¦å°±ä¸åŒï¼›å¦‚æœå®ƒå­¦åˆ°çš„æ˜¯çº¹ç†çš„çŸ¥è¯†ï¼Œé‚£ä¹ˆåœ¨å±±æ°´ç”»ä¸Šï¼Œå®ƒå°±ä¼šä¼°è®¡å‡ºä¸åŒçš„æ·±åº¦(ä½†æ˜¾ç„¶å®ƒåªæ˜¯ä¸€å¹…ç”»è€Œå·²ï¼Œæˆ‘ä»¬ä½œä¸ºäººæ˜¯ä¸ä¼šæŠŠå®ƒçœŸçš„æœ‰æ·±åº¦çš„)ã€‚</p><p>å½“ç„¶ä½ å¯èƒ½ä¼šåé©³æˆ‘ï¼Œé‚£ç°åœ¨æœ‰äº›å•å¼ å½±åƒæ·±åº¦ä¼°è®¡åšçš„å¾ˆå¥½çš„å·¥ä½œå•Šï¼Ÿéš¾é“æ²¡æœ‰æ„ä¹‰å—ï¼Ÿæˆ‘çš„å›ç­”æ˜¯ï¼Œåœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹å¯èƒ½æœ‰æ„ä¹‰ã€‚æ¯”å¦‚æŸä¸ªæ·±åº¦ä¼°è®¡ç½‘ç»œï¼Œå®ƒåˆ©ç”¨KITTIæ•°æ®è¿›è¡Œè®­ç»ƒã€‚ç”±äºKITTIæ•°æ®éƒ½æ˜¯é‡‡ç”¨åŒä¸€å¥—ä¼ æ„Ÿå™¨åœ¨ç›¸ä¼¼åœºæ™¯ä¸‹æ‹æ‘„çš„ï¼Œå®ƒæ‹æ‘„çš„æ‰€æœ‰å½±åƒéƒ½æœ‰ç›¸ä¼¼çš„å†…å®¹å’Œæ·±åº¦åˆ†å¸ƒï¼Œæ¯”å¦‚é è¿‘å›¾åƒä¸‹æ–¹çš„éƒ½æ˜¯è·¯é¢ï¼Œå›¾åƒä¸Šæ–¹ä¸­é—´çš„ä¸€èˆ¬ä¸ºå¤©ç©ºç­‰ã€‚æ·±åº¦ç½‘ç»œç¡®å®å¯èƒ½å­¦åˆ°è¿™äº›ä¸ä½ç½®æœ‰å…³çš„ä¿¡æ¯(å¤©ç©ºçº¹ç†è¾ƒå°‘ã€è·¯é¢çº¹ç†è¾ƒå¤šã€å¤©ç©ºæ¯”è·¯é¢æ·±åº¦æ›´æ·±ç­‰)ï¼Œè¿›è€Œç»™å‡ºæ·±åº¦ä¼°è®¡ã€‚é‚£ä¹ˆå½“è¾“å…¥ä¸€ä¸ªå’ŒKITTIç±»ä¼¼çš„å½±åƒçš„æ—¶å€™ï¼Œå®ƒä¹Ÿå¯ä»¥ä¼°è®¡å‡ºä¸€ä¸ªè¿˜ä¸é”™çš„æ·±åº¦å›¾ã€‚ä½†æ˜¯å¦‚æœæ¢äº†ä¸€ä¸ªé…ç½®ï¼Œæ¯”å¦‚è¾“å…¥EuRoCçš„æ•°æ®ï¼Œå°½ç®¡å®ƒæœ¬èº«çš„å†…å®¹ã€æ·±åº¦åˆ†å¸ƒå’ŒKITTIç›¸å·®å¾ˆå¤§ï¼Œä½†ç½‘ç»œè¿˜æ˜¯æŒ‰ç…§KITTIçš„é‚£ä¸€å¥—ä¼°è®¡æ·±åº¦ï¼Œç»“æœå°±æ˜¾è€Œæ˜“è§äº†ï¼Œæ‰€ä»¥æ³›åŒ–æ€§è¾ƒå·®ã€‚å› æ­¤ï¼Œåœ¨æˆ‘çœ‹æ¥è¿™ç§æ•°æ®é©±åŠ¨çš„æ–¹æ³•è¿˜æ˜¯æ²¡èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéš¾ä»¥ç»™å‡ºä»¤äººä¿¡æœçš„è§£é‡Šã€‚åœºæ™¯çš„å‡ ä½•ç»“æ„æ˜¯å…¶å›ºæœ‰å±æ€§ï¼Œä¸å¤–ç•Œçš„è§‚æµ‹æ— å…³ï¼Œä¸ç®¡ä½ æ€ä¹ˆè§‚æµ‹ï¼Œå®ƒéƒ½ä¸ä¼šæ”¹å˜ã€‚ä½†æ·±åº¦ä¼°è®¡çš„ç½‘ç»œæ°æ°å°±æ˜¯ä¾é è¿™ç§ä¸å¯é çš„â€œè§‚æµ‹â€å­¦åˆ°çš„ã€‚åˆ©ç”¨ç¼ºå¤±çš„ä¿¡æ¯æ˜¯æ²¡æœ‰åŠæ³•çœŸæ­£æ¢å¤ä¸‰ç»´åœºæ™¯çš„ï¼Œè‡³å°‘è¯´å¾ˆå›°éš¾ã€‚</p><h3 id="1-2-NeRFå¹¶éåªèƒ½åˆæˆç‰¹å®šè§†è§’å½±åƒ"><a href="#1-2-NeRFå¹¶éåªèƒ½åˆæˆç‰¹å®šè§†è§’å½±åƒ" class="headerlink" title="1.2 NeRFå¹¶éåªèƒ½åˆæˆç‰¹å®šè§†è§’å½±åƒ"></a>1.2 NeRFå¹¶éåªèƒ½åˆæˆç‰¹å®šè§†è§’å½±åƒ</h3><p>ç¬¬äºŒç‚¹ï¼ŒNeRFæ˜¯ä¸‰ç»´åœºæ™¯çš„éšå¼è¡¨è¾¾ï¼Œä¹Ÿå°±æ˜¯è¯´å…¶åŒ…å«äº†å®Œæ•´çš„ä¸‰ç»´åœºæ™¯ã€‚åŸºäºè®­ç»ƒå¥½çš„NeRFï¼Œæˆ‘ä»¬æœ‰èƒ½åŠ›åˆæˆè¯¥åœºæ™¯ä»»æ„è§†è§’çš„å½±åƒï¼Œæ¯”å¦‚360æ—‹è½¬çš„è§†è§’ï¼Œè€Œéä»…ä»…åªæ˜¯å¯ä»¥å°å¹…åº¦ç§»åŠ¨è§†è§’çš„æ¨¡å‹ã€‚æ‰€ä»¥ï¼Œä¸ªäººè§‰å¾—æœ€æ­£ç¡®çš„NeRFè¡¨ç°å½¢å¼åº”è¯¥æ˜¯ä¸€å †å›¾ç‰‡+360æ—‹è½¬è§†è§’çš„åŠ¨å›¾ã€‚</p><h3 id="1-3-æ²¡æœ‰å›¾ç‰‡ä½å§¿å¯ä»¥è®­ç»ƒNeRFå—"><a href="#1-3-æ²¡æœ‰å›¾ç‰‡ä½å§¿å¯ä»¥è®­ç»ƒNeRFå—" class="headerlink" title="1.3 æ²¡æœ‰å›¾ç‰‡ä½å§¿å¯ä»¥è®­ç»ƒNeRFå—"></a>1.3 æ²¡æœ‰å›¾ç‰‡ä½å§¿å¯ä»¥è®­ç»ƒNeRFå—</h3><p>å¯¹äºä¸€å †åŸæœ¬æ²¡æœ‰ä½å§¿çš„å›¾ç‰‡ï¼Œå¯ä»¥è®­ç»ƒNeRFå—ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚NeRFçš„è¾“å…¥å¿…é¡»æ˜¯å½±åƒ+ä½å§¿ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥â€œæ›²çº¿æ•‘å›½â€â€”â€”æˆ‘ä»¬å¯ä»¥å…ˆç”¨COLMAPç­‰ä¼ ç»Ÿçš„SfMè½¯ä»¶å¯¹åœºæ™¯è¿›è¡Œé‡å»ºï¼Œé‡å»ºå¥½ä»¥åï¼Œå½“ç„¶å°±å¯ä»¥è·å¾—æ¯å¼ å›¾ç‰‡çš„ä½å§¿ã€‚äº‹å®ä¸Šï¼Œä¸ä¸€å®šéœ€è¦COLMAPï¼Œåªè¦èƒ½è¾“å‡ºå½±åƒé—´çš„ç›¸å¯¹ä½å§¿éƒ½å¯ä»¥ï¼Œæ‰€ä»¥å¯¹äºåºåˆ—å½±åƒæˆ‘ä»¬ç”šè‡³å¯ä»¥æ‹¿SLAMæ¥è·å¾—ä½å§¿ã€‚æˆ‘ä»¬æ‹¿ç€è¿™äº›ä½å§¿ï¼Œé…ä¸Šå›¾åƒï¼Œå°±å¯ä»¥è¾“å…¥NeRFè¿›è¡Œè®­ç»ƒäº†ã€‚</p><h3 id="1-4-NeRFä¸èƒ½æ— ä¸­ç”Ÿæœ‰"><a href="#1-4-NeRFä¸èƒ½æ— ä¸­ç”Ÿæœ‰" class="headerlink" title="1.4 NeRFä¸èƒ½æ— ä¸­ç”Ÿæœ‰"></a>1.4 NeRFä¸èƒ½æ— ä¸­ç”Ÿæœ‰</h3><p>NeRFè¿˜æœ‰ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„åœ°æ–¹ï¼Œå°±æ˜¯NeRFä½œä¸ºæŸä¸ªç‰¹å®šåœºæ™¯çš„éšå¼è¡¨è¾¾ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠå®ƒç†è§£ä¸ºæ˜¯ä¸€ä¸ªä¸‰ç»´æ¨¡å‹ã€‚æ‰€ä»¥è¯´ï¼Œå®ƒåªèƒ½åˆæˆå‡ºè¿™ä¸ªåœºæ™¯çš„ä¸åŒè§†è§’å½±åƒï¼Œæ²¡æœ‰åŠæ³•åˆæˆå‡ºæ–°çš„åœºæ™¯çš„å½±åƒã€‚å¦å¤–ï¼Œå¦‚æœæ‹¿ä¸€å¼ å…¶å®ƒåœºæ™¯çš„å½±åƒï¼Œå®ƒä¹Ÿæ²¡æœ‰åŠæ³•å»åŒ¹é…æ‰¾åˆ°æ­£ç¡®çš„ä½å§¿(å› ä¸ºå°±å®Œå…¨ä¸åœ¨è¿™ä¸ªä¸‰ç»´æ¨¡å‹é‡Œ)ã€‚</p><h3 id="1-5-NeRFçš„åº”ç”¨åœºæ™¯"><a href="#1-5-NeRFçš„åº”ç”¨åœºæ™¯" class="headerlink" title="1.5 NeRFçš„åº”ç”¨åœºæ™¯"></a>1.5 NeRFçš„åº”ç”¨åœºæ™¯</h3><p>é™¤äº†ä¸Šé¢æåˆ°çš„åˆæˆæ–°è§†è§’å½±åƒã€è¾…åŠ©è®¡ç®—æœºè§†è§‰ä»»åŠ¡ç­‰ï¼Œä»æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼ŒNeRFå¯ä»¥ç”¨äºé€†å‘å·¥ç¨‹ã€‚å¯¹äºä¸€ä¸ªæ²¡æœ‰ç²¾ç¡®ä¸‰ç»´æ¨¡å‹çš„é›¶éƒ¨ä»¶ï¼Œæˆ‘ä»¬æ‹ä¸€å †å›¾åƒ(å·²çŸ¥ä½å§¿)ï¼Œç„¶åè®­ç»ƒä¸€ä¸ªåœºæ™¯è¡¨ç¤ºï¼Œæœ€ç»ˆæŠŠè¿™ä¸ªåœºæ™¯è¡¨ç¤ºå¯¼å‡ºæˆä¸‰ç»´æ¨¡å‹ã€‚å½“ç„¶ä½ å¯èƒ½ä¼šé—®ï¼Œå¦‚æœè¯´ä½ éƒ½æ‹äº†ä¸€å †å›¾åƒ(å·²çŸ¥ä½å§¿)ï¼Œä¸ºä»€ä¹ˆä¸ç”¨ä¼ ç»Ÿçš„è§†è§‰æ–¹æ³•é‡å»ºåœºæ™¯å‘¢ï¼Ÿè¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„SfMé—®é¢˜å•Šã€‚å…³äºè¿™ä¸ªé—®é¢˜æˆ‘ä¹Ÿæ²¡æœ‰ç­”æ¡ˆã€‚æ˜¯ä¸æ˜¯NeRFå»ºå‡ºçš„æ¨¡å‹æ›´ç¨ å¯†ã€ç²¾åº¦æ›´é«˜å‘¢ï¼Ÿ</p><blockquote><p>ä¼ ç»Ÿçš„æ–¹æ³•é‡å»ºåœºæ™¯è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œæˆ‘ç†è§£çš„ç‹­ä¹‰çš„sfmè¿˜åªæ˜¯åˆ°äº†ç¨€ç–ç‚¹äº‘çš„é‚£ä¸€æ­¥ï¼Œåç»­è¿˜æœ‰ç¨ å¯†é‡å»ºã€ç‚¹äº‘èåˆã€ç½‘æ ¼é‡å»ºã€ç½‘æ ¼ä¼˜åŒ–ã€çº¹ç†è´´å›¾è¿™äº›MVSçš„æ­¥éª¤æ‰èƒ½æœ‰ä¸€ä¸ªå®è´¨çš„æ¨¡å‹ã€‚</p><p>æ„Ÿè§‰NeRFä»æ•ˆæœä¸Šè®²åº”è¯¥æ˜¯å’Œåé¢çš„MVSä½œå¯¹æ¯”ï¼Œå› ä¸ºä»–çš„è¾“å…¥å°±æ˜¯ç¨€ç–é‡å»ºçš„è¾“å‡ºï¼ˆå›¾åƒä½å§¿å’Œç¨€ç–ç‚¹äº‘ï¼Œæœ‰äº›nerfç½‘ç»œå¥½åƒéœ€è¦ç‚¹äº‘è¿™ä¸ªè¾“å…¥ï¼‰ï¼Œä»æ–¹æ³•ä¸Šæ¥è¯´NeRFæ›´ä¸€æ­¥åˆ°ä½ï¼Œä»ç¨ å¯†åº¦æ¥è¯´ï¼ŒNeRFæ›´åŠ ç¨ å¯†ã€‚</p></blockquote><h3 id="1-6-NeRFä¸SLAMçš„ç»“åˆ"><a href="#1-6-NeRFä¸SLAMçš„ç»“åˆ" class="headerlink" title="1.6 NeRFä¸SLAMçš„ç»“åˆ"></a>1.6 NeRFä¸SLAMçš„ç»“åˆ</h3><p>NeRFä¸SLAMä»æŸäº›è§’åº¦ä¸Šæ¥çœ‹å…·æœ‰ä¸€å®šçš„ç›¸ä¼¼æ€§ã€‚å¯èƒ½åœ¨åœ°å›¾å­˜å‚¨ã€ä½å§¿ä¼°è®¡æ–¹é¢æœ‰ä¸€å®šçš„ç»“åˆç‚¹ã€‚æ¯”å¦‚ç°åœ¨çš„SLAMåœ°å›¾éƒ½æ˜¯æ˜¾å¼çš„å­˜å‚¨ä¸‰ç»´ç‚¹äº‘ï¼Œä½†å¦‚æœå¯ä»¥ç”¨NeRFéšå¼åœ°å­˜å‚¨ï¼Œä¹Ÿè®¸ä¼šæœ‰ä¸€äº›æ–°çš„åº”ç”¨ã€‚</p><h2 id="2-Multi-view-Reconstruction-with-SDF"><a href="#2-Multi-view-Reconstruction-with-SDF" class="headerlink" title="2 Multi-view Reconstruction with SDF"></a>2 Multi-view Reconstruction with SDF</h2><h3 id="2-1-ä»€ä¹ˆæ˜¯SDF"><a href="#2-1-ä»€ä¹ˆæ˜¯SDF" class="headerlink" title="2.1 ä»€ä¹ˆæ˜¯SDF"></a>2.1 ä»€ä¹ˆæ˜¯SDF</h3><p>æœ‰å‘è·ç¦»åœºçš„å®šä¹‰å¦‚ä¸‹</p><p><img src="/images/3D-Reconstruction-1/2022-05-26-23.png"></p><p>ç®€å•æ¥è¯´å°±æ˜¯ï¼Œå¯¹äºç©ºé—´ä¸­çš„ç‚¹ï¼Œè®¡ç®—å®ƒè·ç¦»æœ€è¿‘è¡¨é¢çš„è·ç¦»ã€‚å¦‚æœåœ¨è¡¨é¢å†…å°±ä¸ºè´Ÿï¼Œè¡¨é¢å¤–å°±ä¸ºæ­£ã€‚éœ€è¦æ³¨æ„çš„æ˜¯SDFå®ƒæ˜¯ä¸€ç§æ€è·¯ä¸æ–¹æ³•ï¼Œå®ƒä¸ä»…ä»…å¯ä»¥ç”¨äºåœºæ™¯çš„ä¸‰ç»´è¡¨ç¤ºï¼Œè¿˜å¯ä»¥ç”¨äºå­—ä½“æ¸²æŸ“ç­‰é¢†åŸŸã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-26-24.png"></p><p>åœ¨SDFé¢†åŸŸï¼Œæœ‰ä¸ªDeepSDFçš„å·¥ä½œï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚å…¶ä¸»è¦å†…å®¹å°±æ˜¯é€šè¿‡æ·±åº¦ç½‘ç»œæ¥ç»™å‡ºç©ºé—´ä¸­æŸä¸ªç‚¹çš„SDFçš„å€¼ã€‚NeRFçš„ç½‘ç»œç»“æ„è®¾è®¡åœ¨ä¸€å®šç¨‹åº¦ä¸Šå°±æ˜¯å—è¿™ä¸ªç½‘ç»œçš„å¯å‘ã€‚</p><h3 id="2-2-å¦‚ä½•ç”¨SDFå»ºæ¨¡"><a href="#2-2-å¦‚ä½•ç”¨SDFå»ºæ¨¡" class="headerlink" title="2.2 å¦‚ä½•ç”¨SDFå»ºæ¨¡"></a>2.2 å¦‚ä½•ç”¨SDFå»ºæ¨¡</h3><p><img src="/images/3D-Reconstruction-1/2022-05-26-25.png"></p><p>ä¸Šé¢ï¼Œæˆ‘ä»¬ä»‹ç»äº†ä»€ä¹ˆæ˜¯SDFï¼Œé‚£ä¹ˆå¦‚ä½•ç”¨SDFæ¥è¿›è¡Œé‡å»ºå‘¢ï¼Ÿä¸å¦¨å…ˆå›å¿†ä¸€ä¸‹NeRFçš„è®­ç»ƒè¿‡ç¨‹ã€‚æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªå¯†åº¦åœºå’Œä¸€ä¸ªé¢œè‰²åœºï¼Œç„¶ååˆ©ç”¨æ¸²æŸ“æ–¹ç¨‹ï¼Œå¾—åˆ°åˆæˆçš„å›¾åƒï¼Œå¹¶å°†å…¶ä¸çœŸå€¼åšLossï¼Œä¸æ–­è¿­ä»£ï¼Œå‡å°è¯¯å·®ã€‚è¿™æ˜¯æ¯”è¾ƒå®¹æ˜“ç†è§£çš„ã€‚ä½†å‰é¢ä¹Ÿè¯´äº†ï¼ŒåŸºäºå¯†åº¦åœºçš„é‡å»ºæ•ˆæœæ˜¯æ¯”è¾ƒå·®çš„ã€‚è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½æŠŠNeRFæµç¨‹é‡Œçš„å¯†åº¦åœºæ›¿æ¢æˆSDFåœºå‘¢ï¼Ÿå¦‚æœå¯ä»¥çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åŸºäºSDFå¾—åˆ°è´¨é‡è¾ƒé«˜çš„ä¸‰ç»´æ¨¡å‹äº†ã€‚è¿™æ ·æƒ³æ³•æ²¡é”™ã€‚ä½†æ˜¯å¦‚æœçœŸçš„è¿™æ ·æ›¿æ¢çš„è¯åˆä¼šæœ‰æ–°çš„é—®é¢˜ã€‚ç›´è§‚æ¥è¯´ï¼ŒNeRFè¾“å‡ºçš„2Då½±åƒå°±æ˜¯åŸºäºå¯†åº¦å’Œé¢œè‰²æ¸²æŸ“å‡ºæ¥çš„ã€‚ä½ ç°åœ¨ç›´æ¥æŠŠå¯†åº¦åœºç»™ä¸¢æ‰äº†ï¼Œè¿˜æ€ä¹ˆæ¸²æŸ“å½±åƒå‘¢ï¼Ÿèƒ½ä¸èƒ½æŠŠç§¯åˆ†å…¬å¼ä¸­çš„å¯†åº¦æ¢æˆSDFå‘¢ï¼Ÿä¸è¡Œï¼Œå› ä¸ºNeRFä¸­å¯¹å¯†åº¦è¿›è¡Œç§¯åˆ†æ˜¯æœ‰ç‰©ç†æ„ä¹‰çš„ã€‚æ‰€ä»¥è¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒæ˜¯ï¼Œæˆ‘ä»¬å¦‚ä½•æ‰¾åˆ°ä¸€ç§è½¬æ¢ï¼ŒæŠŠSDFè½¬æ¢æˆNeRFä¸­çš„å¯†åº¦ã€‚å¦‚æœå¯ä»¥çš„è¯ï¼Œå°±å¯ä»¥ç»§ç»­ä½¿ç”¨NeRFçš„æ¡†æ¶ï¼Œå¹¶ä¸”è¿˜å¯ä»¥å¾—åˆ°SDFã€‚ä¸€ä¸ªå¯ç”¨çš„å·¥ä½œå°±æ˜¯NeuSï¼Œå°†å¯†åº¦åœºå’Œæœ‰å‘è·ç¦»åœºè”ç³»èµ·æ¥ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-26-26.png"></p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥æ¨¡ä»¿ä¸€ä¸‹æ¸²æŸ“æ–¹ç¨‹é‡Œçš„å¯†åº¦å‡½æ•°Ïƒï¼Œæˆ‘ä»¬ä¹Ÿæ‰¾ä¸€ä¸ªæ¦‚ç‡å¯†åº¦å‡½æ•°æŠŠSDFè¡¨ç¤ºèµ·æ¥ã€‚åœ¨è®ºæ–‡ä¸­ï¼Œä½œè€…é€‰ç”¨äº†ä¸€ä¸ªLogisticçš„åˆ†å¸ƒå‡½æ•°ï¼Œå®ƒæ˜¯Sigmoidå‡½æ•°çš„å¯¼æ•°ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸åŒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼Œåªè¦å®ƒæ˜¯å•å³°çš„ã€ä¸”ä»¥0ä¸ºä¸­å¿ƒå°±å¯ä»¥äº†ã€‚è¿›ä¸€æ­¥ï¼Œå¯¹äºä½“ç§¯æ¸²æŸ“æ–¹ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥ç®€åŒ–æˆä¸Šå›¾ä¸­æœ€ä¸‹é¢å…¬å¼çš„æ ·å­ã€‚æŠŠT(t)å’ŒÏƒ(r(t))å˜æˆä¸€ä¸ªæƒé‡w(t)ã€‚è¿™æ ·çš„æ„ä¹‰å°±æ˜¯ï¼Œæˆ‘ä»¬æŠŠæŸä¸ªåƒç´ æœ€ç»ˆçš„æ¸²æŸ“ç»“æœçœ‹åšæ˜¯ç”±æŸæ¡å…‰çº¿ä¸Šæ‰€æœ‰é‡‡æ ·ç‚¹çš„é¢œè‰²åŠ æƒæ±‚å’Œå¾—åˆ°(è¿™é‡Œæˆ‘ä»¬æŠŠå¯†åº¦ä½œä¸ºæƒé‡çš„ä¸€éƒ¨åˆ†äº†)ã€‚è¿›ä¸€æ­¥æˆ‘ä»¬æ€è€ƒè¿™ä¸ªæƒé‡åº”è¯¥å…·å¤‡ä»€ä¹ˆæ€§è´¨ï¼Ÿè‡³å°‘æœ‰ä¸¤ä¸ªï¼šç¬¬ä¸€æ˜¯æ— åçš„ã€‚æ— åæ˜¯æŒ‡åœ¨æœ€åˆé€‚çš„åœ°æ–¹æœ‰æœ€åˆé€‚çš„å€¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒæŸæ¡å…‰çº¿ç©¿è¿‡ä¸€ä¸ªè¡¨é¢ã€‚é‚£ä¹ˆè¿™ä¸ªåƒç´ çš„é¢œè‰²åº”è¯¥ç”±åœ¨è¿™ä¸ªè¡¨é¢çš„é‚£ä¸€ç‚¹çš„é¢œè‰²å†³å®šï¼Œæƒé‡æœ€é«˜ã€‚ä½†å¦‚æœè¿˜æ²¡åˆ°è¡¨é¢ç‚¹çš„æ—¶å€™ï¼Œæƒé‡å°±å¾ˆå¤§äº†ï¼Œè¿™æ˜¾ç„¶å°±æ˜¯ä¸åˆé€‚çš„ã€‚ç¬¬äºŒæ˜¯å¯ä»¥ååº”é®æŒ¡çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œç©ºé—´ä¸­æœ‰ä¸€ä¸ªçƒä½“ï¼Œä¸€æ¡å…‰çº¿ç©¿è¿‡å®ƒï¼Œæ˜¾ç„¶ä¼šæœ‰ä¸¤ä¸ªç‚¹(å…¥å°„ç‚¹å’Œå‡ºå°„ç‚¹)ã€‚ä»SDFè€Œè¨€ï¼Œè¿™ä¸¤ä¸ªç‚¹çš„SDFå€¼éƒ½ä¸º0ã€‚ä½†ä»æ¸²æŸ“çš„è§’åº¦ï¼Œæ˜¾ç„¶æ˜¯é‡Œæˆ‘ä»¬æœ€è¿‘çš„é‚£ä¸ªç‚¹åº”è¯¥å…·æœ‰æœ€å¤§çš„æƒé‡ï¼Œè€Œä¸æ˜¯è¿œå¤„çš„é‚£ä¸ªç‚¹ï¼Œæˆ–è€…ä¸¤ä¸ªç‚¹ç­‰æƒã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-26-27.png"></p><p>åŸºäºä¸Šé¢æåˆ°çš„ä¸¤ç‚¹ï¼Œæˆ‘ä»¬å¯»æ‰¾æœ€ä¼˜çš„æƒé‡çš„è¡¨ç¤ºï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ä¸€ä¸ªç®€å•çš„æƒ³æ³•æ˜¯ï¼Œæˆ‘ä»¬æŠŠSDFå¤–é¢å¥—ä¸€ä¸ªLogisticåˆ†å¸ƒï¼Œå°±å¯ä»¥å¾—åˆ°æ–°çš„Ïƒ(t)ã€‚ç„¶åä»¥æ­¤ç»„æˆæ–°çš„æƒé‡w(t)ã€‚è¿™æ ·å…¶å®å¾—åˆ°çš„æ˜¯æœ‰åçš„æƒé‡ï¼Œå¦‚å³å›¾å·¦è¾¹éƒ¨åˆ†æ‰€ç¤ºã€‚è“è‰²è¡¨ç¤ºSDFå‡½æ•°ï¼Œåœ¨ç‰©ä½“è¡¨é¢æ—¶ï¼ŒSDF=0ã€‚ç”±äºæˆ‘ä»¬é€‰ç”¨çš„åˆæ˜¯Logisticåˆ†å¸ƒï¼Œæ‰€ä»¥æ¦‚ç‡å¯†åº¦åº”è¯¥å¦‚çº¢è‰²æ›²çº¿æ‰€ç¤ºã€‚çœ‹èµ·æ¥è¿˜ä¸é”™ã€‚ä½†å¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸ªÏƒ(t)å‡½æ•°ç§¯åˆ†å‡ºæ¥ï¼Œå°±ä¼šå‘ç°è¿™ä¸ªæƒé‡åœ¨è¿˜æ²¡æœ‰åˆ°è¾¾è¡¨é¢çš„æ—¶å€™å°±å·²ç»åˆ°è¾¾äº†å³°å€¼ã€‚è¿™æ˜¾ç„¶å°±æ˜¯æœ‰åçš„ã€‚æ‰€ä»¥åœ¨NeuSå·¥ä½œä¸­ï¼Œé¦–å…ˆå°†Logisticç§¯åˆ°äº†Sigmoidå‡½æ•°ï¼Œç„¶ååˆ©ç”¨å®ƒä½œä¸ºæƒé‡ã€‚å¦‚ä¸Šå›¾ä¸­å³è¾¹æ‰€ç¤ºã€‚å¯ä»¥çœ‹åˆ°ï¼Œå½“åœ¨ç‰©ä½“è¡¨é¢çš„æ—¶å€™ï¼Œw(t)æœ‰æœ€å¤§å€¼ï¼Œä¹Ÿå°±æ˜¯æœ€å¤§æƒé‡ï¼Œè¿™æ˜¯ä¸€ä¸ªæ— åçš„è¡¨ç¤ºã€‚è¿›ä¸€æ­¥ï¼Œå¯ä»¥å¯¹æ¯”NeRFå’ŒNeuSçš„æ¸²æŸ“æ–¹ç¨‹å¦‚ä¸‹ã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-26-28.png"></p><p>NeuSé‡‡ç”¨çš„Losså¦‚ä¸‹ã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-26-29.png"></p><p>æ­¤å¤–ï¼Œä¸Šå›¾ä¸­å¯ä»¥çœ‹åˆ°NeuSå’ŒNeRFçš„å¯¹æ¯”ã€‚NeuSæ¯”NeRFæ›´åŠ å…‰æ»‘ã€å¹²å‡€çš„ä¸‰ç»´ç»“æœã€‚äº‹å®ä¸Šï¼Œä¸Šé¢è¯´çš„è¿™äº›ï¼Œæ ¸å¿ƒçš„æ€è·¯è¿˜æ˜¯å¯»æ‰¾å¯†åº¦å’ŒSDFä¹‹é—´çš„å…³è”ï¼Œæ‰¾åˆ°è¿™ç§å…³è”ä»¥åï¼Œå°±å¯ä»¥æŠŠSDFåº”ç”¨åˆ°NeRFçš„æ¡†æ¶ä¸­å»ã€‚æ‰€ä»¥ï¼ŒNeuSæ˜¯ä¸€ç§åŠæ³•ï¼Œå½“ç„¶ä¹Ÿä¼šæœ‰å…¶å®ƒåŠæ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-26-30.png"></p><p>æ¯”å¦‚VolSDFåˆ©ç”¨æ‹‰æ™®æ‹‰æ–¯åˆ†å¸ƒè¡¨ç¤ºå¯†åº¦å’ŒSDFä¹‹é—´çš„å˜æ¢ã€‚Unisurfåˆ™æ˜¯é‡‡ç”¨Occupancy Fieldï¼Œè€Œä¸æ˜¯SDFã€‚æ­¤å¤–ï¼Œé™¤äº†å…³æ³¨å‰æ™¯ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åŒæ—¶å…³æ³¨èƒŒæ™¯ï¼Œè¿™æ–¹é¢çš„å·¥ä½œæ˜¯NeRF++ã€‚é€šè¿‡å°†å‰æ™¯æ”¾åˆ°åœ†é‡Œï¼ŒèƒŒæ™¯æ”¾åˆ°åœ†å¤–ï¼Œåˆ†åˆ«è®­ç»ƒä¸¤ä¸ªæ¨¡å‹æ¥åˆ†åˆ«åˆæˆã€‚</p><h2 id="3-åœºæ™¯ä¸‰ç»´é‡å»º"><a href="#3-åœºæ™¯ä¸‰ç»´é‡å»º" class="headerlink" title="3 åœºæ™¯ä¸‰ç»´é‡å»º"></a>3 åœºæ™¯ä¸‰ç»´é‡å»º</h2><h3 id="3-1-ä¼ ç»ŸCOLMAP"><a href="#3-1-ä¼ ç»ŸCOLMAP" class="headerlink" title="3.1 ä¼ ç»ŸCOLMAP"></a>3.1 ä¼ ç»ŸCOLMAP</h3><p><img src="/images/3D-Reconstruction-1/2022-05-27-03.png"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå±•ç¤ºäº†COLMAPè¿›è¡Œä¸‰ç»´åœºæ™¯é‡å»ºçš„æ­¥éª¤ã€‚ç®€å•æ¥è¯´å°±æ˜¯é¦–å…ˆå¯¹è¾“å…¥çš„å½±åƒè¿›è¡Œç‰¹å¾æå–ä¸åŒ¹é…ç­‰æ“ä½œï¼Œæ‰¾åˆ°å¯¹åº”å…³ç³»ï¼Œå¾—åˆ°ç›¸æœºçš„ä½å§¿ã€‚ç„¶ååœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œå¢é‡å¼é‡å»ºã€‚å½“ç„¶è¿™ä¸ªè¿‡ç¨‹ä¸å¯é¿å…åœ°ä¼šå¼•å…¥ä¸€äº›è¯¯å·®ï¼Œæ‰€ä»¥ä¼šç”¨BAç­‰è¿›è¡Œä¼˜åŒ–ã€‚ä¸Šé¢æåˆ°çš„æ˜¯ç”¨COLMAPè¿›è¡Œä¸‰ç»´é‡å»ºçš„æµç¨‹ã€‚å¦‚æœç”¨NeRFè¿›è¡Œä¸‰ç»´é‡å»ºï¼Œåº”è¯¥æœ‰ä»€ä¹ˆæ ·çš„æµç¨‹å‘¢ï¼Ÿ</p><h3 id="3-2-NeRF"><a href="#3-2-NeRF" class="headerlink" title="3.2 NeRF"></a>3.2 NeRF</h3><p><img src="/images/3D-Reconstruction-1/2022-05-27-04.png"></p><p>åˆ©ç”¨NeRFè¿›è¡Œä¸‰ç»´é‡å»ºï¼Œé¦–å…ˆè¦æœ‰ä¸€å †æ‹æ‘„çš„å½±åƒã€‚ç„¶åæˆ‘ä»¬è¿˜è¦æœ‰å¯¹åº”çš„æ¯ä¸€å¼ å½±åƒçš„ä½å§¿ã€‚è¿™ä¸ªä½å§¿å¯ä»¥æ˜¯é€šè¿‡SfMçš„æ–¹æ³•è·å¾—ï¼Œä¹Ÿå¯ä»¥é€šè¿‡SLAMè·å¾—ï¼Œæˆ–è€…è¯´å¤–éƒ¨ç›´æ¥æµ‹é‡æä¾›éƒ½å¯ä»¥ã€‚ç„¶åå°†å½±åƒ+ä½å§¿è¾“å…¥NeRFè¿›è¡Œè®­ç»ƒã€‚è®­ç»ƒå¥½ä»¥åï¼Œç»™å®šä¸€ä¸ªä½ç½®å’Œè§†è§’ï¼Œç½‘ç»œå°±å¯ä»¥ç»™å‡ºå¯†åº¦åœºå’Œé¢œè‰²åœºï¼ŒåŸºäºæ­¤å°±å¯ä»¥æ¸²æŸ“å‡ºåˆæˆè§†è§’å½±åƒã€‚é‚£ä¹ˆç›¸æ¯”äºä¼ ç»ŸCOLMAPï¼ŒNeRFæœ‰ä»€ä¹ˆä¼˜åŠ£å‘¢ï¼Ÿä¸»è¦ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼šç¬¬ä¸€ï¼ŒNeRFçš„é‡å»ºç»“æœç›¸æ¯”äºCOLMAPè€Œè¨€æ˜¯æ›´åŠ ç¨ å¯†çš„ï¼›ç¬¬äºŒï¼Œæ ¹æ®ä¸Šé¢çš„ä»‹ç»ä¹Ÿå¯ä»¥çœ‹å‡ºï¼ŒNeRFç›¸æ¯”äºä¼ ç»Ÿæ–¹æ³•ï¼Œæµç¨‹ä¼šæ›´åŠ ç®€å•ã€‚ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼šç”¨æ›´ç®€å•çš„æµç¨‹è·å¾—äº†æ›´ç¨ å¯†çš„é‡å»ºã€‚</p><h2 id="4-åœºæ™¯é‡å»ºä¸­çš„æŒ‘æˆ˜"><a href="#4-åœºæ™¯é‡å»ºä¸­çš„æŒ‘æˆ˜" class="headerlink" title="4 åœºæ™¯é‡å»ºä¸­çš„æŒ‘æˆ˜"></a>4 åœºæ™¯é‡å»ºä¸­çš„æŒ‘æˆ˜</h2><p><img src="/images/3D-Reconstruction-1/2022-05-27-10.png"></p><p>æ¯«æ— ç–‘é—®ï¼ŒNeRFè·Ÿä¼ ç»Ÿé‡å»ºæŠ€æœ¯çš„åŒºåˆ«ä¸»è¦è¿˜æ˜¯åœ¨äºNeRFå¯ä»¥éšå¼åœ°å­¦ä¹ ä½“ç´ çš„è¡¨ç¤ºã€‚é€šè¿‡å¸¦æœ‰ä½å§¿çš„å¤šè§†å½±åƒï¼ŒNeRFå¯ä»¥å­¦ä¹ åˆ°åœºæ™¯çš„è¡¨è¾¾ï¼Œæœ€ç»ˆåˆæˆæ–°è§†è§’å½±åƒã€‚è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬åˆ†æå„ä¸ªæ­¥éª¤ï¼Œå¦‚ä¸‹ã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-11.png"></p><p>é¦–å…ˆï¼Œæˆ‘ä»¬çš„ç½‘ç»œåœ¨è®­ç»ƒé˜¶æ®µå¯¹äºè¾“å…¥æ˜¯æœ‰ä¸€å®šè¦æ±‚çš„ã€‚é¦–å…ˆæ˜¯ç›¸æœºä½å§¿ï¼Œæˆ‘ä»¬éœ€è¦è¾“å…¥çš„ç›¸æœºä½å§¿æ˜¯éå¸¸å‡†ç¡®çš„ï¼Œä¸ç„¶è®­ç»ƒçš„ç½‘ç»œæ•ˆæœä¸ä¼šå¾ˆå¥½ã€‚å¦å¤–ä¸€ä¸ªè¾“å…¥æ˜¯å¤šè§†å½±åƒï¼Œæˆ‘ä»¬è‡ªç„¶å¸Œæœ›æ˜¯è¦æœ‰ç¨³å®šã€ç»Ÿä¸€çš„å…‰ç…§ã€‚ä¸ç„¶å°±å¦‚åŒRGB-D SLAMä¸€æ ·ï¼Œå»ºå‡ºçš„å›¾é¢œè‰²ä¸å‡åŒ€ã€‚ç¬¬äºŒä¸ªæ˜¯è‡ªç„¶å¸Œæœ›åœºæ™¯ä¸­æ²¡æœ‰è¿åŠ¨ç‰©ä½“ï¼Œä¸ç„¶è¿™ç§ä¸ç»Ÿä¸€çš„è¿åŠ¨ä¼šç»™ä½å§¿ä¼°è®¡å¸¦æ¥å½±å“ã€‚æœ€åï¼Œå¯èƒ½å‡ºç°çœŸå®çš„å¤§åœºæ™¯ï¼Œå¦‚ä½•å¹³è¡¡æ€§èƒ½ï¼Œè¿›è¡Œä¼˜åŒ–ä¹Ÿæ˜¯å€¼å¾—æ€è€ƒçš„é—®é¢˜ã€‚æ‰€ä»¥ä¹‹åçš„å†…å®¹ä¸»è¦å›´ç»•è¾“å…¥å½±åƒã€è¾“å…¥ä½å§¿ä»¥åŠå¤§åœºæ™¯è¿™ä¸‰ä¸ªæ–¹é¢ä»‹ç»ã€‚</p><h2 id="5-Neural-Approach-to-Scene-Reconstruction"><a href="#5-Neural-Approach-to-Scene-Reconstruction" class="headerlink" title="5 Neural Approach to Scene Reconstruction"></a>5 Neural Approach to Scene Reconstruction</h2><h3 id="5-1-ä½å§¿ä¼˜åŒ–"><a href="#5-1-ä½å§¿ä¼˜åŒ–" class="headerlink" title="5.1 ä½å§¿ä¼˜åŒ–"></a>5.1 ä½å§¿ä¼˜åŒ–</h3><p><img src="/images/3D-Reconstruction-1/2022-05-27-13.png"></p><p>å‰é¢è¯´äº†ï¼ŒNeRFçš„è¾“å…¥ä¹‹ä¸€æ˜¯ç›¸æœºçš„ä½å§¿ï¼Œé™¤äº†ç‰©ç†æ„ä¹‰ä¸Šé€šè¿‡å¤–éƒ¨æµ‹é‡ç›´æ¥è·å¾—ä½å§¿çœŸå€¼ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å„ç§æ‰‹æ®µå»ç®—ä½å§¿ï¼š</p><ul><li>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å„ç§æ ‡å®šæ¿ï¼Œå¦‚Chessboardã€AprilTagã€ArUco boardç­‰ï¼Œé€šè¿‡ç‰¹æ®Šçš„ç®—æ³•ï¼Œå°±å¯ä»¥æ±‚å¾—ç›¸æœºç›¸å¯¹äºæ ‡å®šæ¿çš„ä½å§¿ï¼›</li><li>ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨å„ç§SLAMæ–¹æ³•è¿›è¡Œä½å§¿ä¼°è®¡ï¼›</li><li>ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯ä½¿ç”¨SfMæ–¹æ³•ï¼Œå¦‚COLMAPç­‰ï¼›</li><li>ç¬¬å››ç§æ–¹æ³•æ˜¯åŸºäºNeRFï¼Œæ¯”å¦‚ä¹‹å‰æåˆ°çš„iNeRFå·¥ä½œï¼Œé€šè¿‡ç»™å®šä¸€ä¸ªå½±åƒï¼Œå¾—åˆ°è¯¥å½±åƒç›¸å¯¹äºåœºæ™¯çš„ç›¸å¯¹ä½å§¿ã€‚</li></ul><p>è¿™å››ç§æ–¹æ³•å„æœ‰åƒç§‹ï¼š</p><ul><li>å¯¹äºåŸºäºæ ‡å®šæ¿çš„æ–¹æ³•ï¼Œæ˜¾ç„¶åªé€‚åˆäºå°åœºæ™¯ï¼Œå¯¹äºå®¤å¤–ç­‰å¤§åœºæ™¯å°±æ¯”è¾ƒæ— èƒ½ä¸ºåŠ›ï¼›</li><li>å¯¹äºSLAMæ–¹æ³•ï¼Œå…¶æœ¬èº«æ²¡æœ‰åœºæ™¯å¤§å°çš„é™åˆ¶ã€‚ä½†æ˜¯ç”±äºå…¶æ›´å…³æ³¨äºå®æ—¶æ€§ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šç‰ºç‰²äº†ä¸€å®šçš„ç²¾åº¦ï¼Œå¯¼è‡´å…¶ä¼°è®¡çš„ä½å§¿ç›¸æ¯”äºSfMæ–¹æ³•ç²¾åº¦è¦å·®ä¸€äº›ã€‚</li><li>å¯¹äºSfMæ–¹æ³•ï¼Œç›¸æ¯”äºSLAMæ–¹æ³•åˆ™æ˜¯ç›¸åï¼Œå…¶æ›´å…³æ³¨äºç²¾åº¦ï¼Œä½†æ˜¯è¿è¡Œæ•ˆç‡ä¼šå·®ä¸€äº›ï¼Œæ›´åŠ è€—æ—¶ï¼Œåªèƒ½ç¦»çº¿å¤„ç†ã€‚</li></ul><p>å› æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿå°±è¿›ä¸€æ­¥å›ç­”äº†ä¹‹å‰â€œæ²¡æœ‰å›¾ç‰‡ä½å§¿å¯ä»¥è®­ç»ƒNeRFå—â€ã€‚ä½†æ˜¾ç„¶çš„ï¼Œé™¤éæ˜¯éå¸¸é«˜ç²¾åº¦è®¾å¤‡æµ‹é‡çš„ä½å§¿ï¼Œå¦åˆ™ç®—å‡ºæ¥çš„ä½å§¿æˆ–å¤šæˆ–å°‘éƒ½ä¼šæœ‰ç‚¹å™ªå£°æˆ–è€…è¯´ä¸å‡†ç¡®ã€‚æ‰€ä»¥æˆ‘ä»¬å°±æƒ³ï¼Œèƒ½ä¸èƒ½è®©ç½‘ç»œæœ‰ä¸€å®šçš„å™ªå£°å®¹å¿èƒ½åŠ›ï¼Œæ‰€ä»¥BARFå°±å‡ºç°äº†ï¼Œæ¥è‡ªäºCMUï¼Œå¦‚ä¸‹ï¼š</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-14.png"></p><p>åœ¨è¿™ä¸ªå·¥ä½œä¸­ï¼Œä½œè€…åˆ©ç”¨ä¼ ç»ŸSLAMä¸­çš„BAæ–¹æ³•ä¼˜åŒ–å½±åƒä½å§¿ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ä¸€èˆ¬NeRFéœ€è¦ç²¾ç¡®çš„ä½å§¿ï¼Œä½†æ˜¯BARFè¾“å…¥çš„ä½å§¿å¯ä»¥æ˜¯æœ‰è¯¯å·®çš„ï¼Œé€šè¿‡ä»–ä»¬çš„æ–¹æ³•å¯ä»¥è°ƒæ•´è¿™ç§è¯¯å·®ï¼Œæœ€ç»ˆå¾—åˆ°å’ŒNeRFç›¸åŒçš„æ•ˆæœã€‚</p><p>ä¸€äº›åŸºæœ¬çš„ä¸‰ç»´é‡å»ºåæ ‡ç³»ä»‹ç»å¦‚ä¸‹ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-15.png"></p><p>åœ¨BARFä¸­æ˜¯æ€ä¹ˆåšå‘¢ï¼Ÿå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-16.png"></p><p>æˆ‘ä»¬åšä¸€ä¸ªå¸§é—´BAï¼Œä½¿å¾—é‡æŠ•å½±è¯¯å·®æœ€å°ã€‚å½“ç„¶å­¦è¿‡SLAMçš„åº”è¯¥çŸ¥é“ï¼Œè¿™ä¸€å—ç†è®ºæ¨å¯¼è¿˜æ˜¯æŒºéš¾çš„ï¼Œå¦‚æœä»å®é™…åº”ç”¨çš„è§’åº¦ï¼Œå¯èƒ½ä¼šç®€å•ä¸€äº›ï¼Œå› ä¸ºå¾ˆå¤šä¸œè¥¿å·²ç»å†™å¥½äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æ‹¿æ¥ç”¨å°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹ã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-17.png"></p><p>ä½†è¿˜æœ‰ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯æˆ‘ä»¬å‰é¢æåˆ°è¿‡çš„NeRFä¸­çš„positional encodingã€‚æˆ‘ä»¬åˆ©ç”¨è¿™ç§æ‰‹æ®µä½¿å¾—ç½‘ç»œæœ‰èƒ½åŠ›æ„ŸçŸ¥åˆ°å½±åƒä¸­çš„ä½é¢‘å’Œé«˜é¢‘ä¿¡æ¯ï¼Œè€Œä¸æ˜¯ç®€å•çš„xã€yã€zåæ ‡ã€‚ä½†è¿™ç¡®å®ä¼šç»™ä½å§¿ä¼˜åŒ–å¸¦æ¥å›°éš¾ã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-18.png"></p><p>æˆ‘ä»¬å¦‚æœå¯¹positional encodingæ±‚å¯¼ï¼Œå°±ä¼šå¾—åˆ°å·¦ä¸‹è§’çš„å¼å­ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸ªæ¯”ä¾‹ç³»æ•°ã€‚è€Œä¸”è¿™ä¸ªç³»æ•°ä¸å±‚çº§æœ‰å…³ï¼Œå±‚çº§è¶Šé«˜ï¼Œä»£è¡¨é¢‘ç‡è¶Šé«˜ï¼Œä½†æ˜¯æƒé‡è¶Šå¤§ã€‚è¿™æ ·çš„ç»“æœå°±æ˜¯å¯¹äºé«˜é¢‘å’Œä½é¢‘çš„ä¿¡æ¯è¡¨è¾¾æ˜¯ä¸å‡è¡¡çš„ï¼Œç½‘ç»œæ›´å®¹æ˜“å­¦åˆ°ä¸€äº›é«˜é¢‘çš„éƒ¨åˆ†ã€‚</p><p>å› æ­¤ï¼ŒBARFæä¾›äº†ä¸€ç§æ–°çš„æœºåˆ¶ï¼Œå¦‚ä¸‹ã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-19.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒBARFé‡‡ç”¨äº†é€€ç«æœºåˆ¶ã€‚æœ¬è´¨ä¸Šæ¥è¯´å°±æ˜¯å¯¹positional encodingå¢åŠ äº†ä¸€ä¸ªæƒé‡ã€‚ç®€å•æ¥è¯´å°±æ˜¯ï¼Œåœ¨ç½‘ç»œåˆšå¼€å§‹è®­ç»ƒçš„æ—¶å€™ï¼Œåªå¼€æ”¾äº†ä½é¢‘çš„å“åº”ï¼Œè€Œéšç€è®­ç»ƒæ¬¡æ•°çš„å¢åŠ ï¼Œé€æ¸å¼€æ”¾é«˜é¢‘éƒ¨åˆ†ã€‚è¿™ä¹Ÿæ˜¯ä¸€ç§ç”±ç²—åˆ°ç»†çš„ç­–ç•¥ï¼Œå¯ä»¥ä¿è¯ç½‘ç»œåœ¨ä¸€å¼€å§‹çš„æ—¶å€™å°±ä¸ä¼šå­¦åˆ°ä»€ä¹ˆå¥‡å¥‡æ€ªæ€ªçš„ä¸œè¥¿ã€‚</p><p>ä¸‹å›¾æ˜¯BARFçš„æ•ˆæœå±•ç¤ºã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-20.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒåŠ äº†BARFä»¥åï¼Œåœºæ™¯çš„ç»†èŠ‚æ¢å¤åœ°éå¸¸å¥½ã€‚ç„¶åï¼Œå¦ä¸€ä¸ªå·¥ä½œiNeRFï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-21.png"></p><p>åœ¨æœ‰äº†ä¸€ä¸ªè®­ç»ƒå¥½çš„NeRFä»¥åï¼Œæˆ‘ä»¬å¯ä»¥å®ç°åŸºäºå½±åƒçš„å®šä½ã€‚</p><h3 id="5-2-å½±åƒä¼˜åŒ–"><a href="#5-2-å½±åƒä¼˜åŒ–" class="headerlink" title="5.2 å½±åƒä¼˜åŒ–"></a>5.2 å½±åƒä¼˜åŒ–</h3><p>åœ¨å¤„ç†å®Œäº†ä½å§¿ä¸å‡†çš„é—®é¢˜ä»¥åï¼Œå¦ä¸€ä¸ªé—®é¢˜å°±æ˜¯è¦å¯¹å›¾åƒè¿›è¡Œä¼˜åŒ–ï¼Œå¦‚ä¸Šé¢æè¿°ï¼Œåˆä¸»è¦åˆ†ä¸ºå…‰ç…§å˜åŒ–å’ŒåŠ¨æ€ç‰©ä½“ä¸¤ä¸ªæ–¹é¢ï¼Œä¸‹é¢åˆ†åˆ«ä»‹ç»ã€‚</p><h4 id="5-2-1-å…‰ç…§å˜åŒ–"><a href="#5-2-1-å…‰ç…§å˜åŒ–" class="headerlink" title="5.2.1 å…‰ç…§å˜åŒ–"></a>5.2.1 å…‰ç…§å˜åŒ–</h4><p><img src="/images/3D-Reconstruction-1/2022-05-27-22.png"></p><p>è¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒåœ¨äºï¼Œæˆ‘ä»¬è¾“å…¥NeRFçš„å½±åƒè‡ªç„¶æ˜¯å¸Œæœ›æ¯å¼ å½±åƒå…‰ç…§éƒ½æ¯”è¾ƒå‡åŒ€ï¼Œå˜åŒ–è¾ƒå°ã€‚è¿™åœ¨å…‰ç…§æ¡ä»¶æ§åˆ¶è¾ƒå¥½çš„å®¤å†…æˆ–è€…å°åœºæ™¯ä¸­è¿˜æ¯”è¾ƒå®¹æ˜“ï¼Œä½†æ˜¯å¯¹äºå®¤å¤–ç­‰å¤§åœºæ™¯å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ã€‚å¦‚ä½•å¯¹è¿™äº›ä¸å‡åŒ€çš„å…‰ç…§è¿›è¡Œä¼˜åŒ–ï¼Œæ˜¯è¿™éƒ¨åˆ†è¦è®¨è®ºçš„é—®é¢˜ã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-23.png"></p><p>ä¸€ç§è§£å†³ç­–ç•¥æ˜¯åœ¨RGBåŸŸå»ºæ¨¡ï¼Œé€šè¿‡è®¾ç½®æŸä¸ªå¯è°ƒæ•´çš„å‚æ•°ï¼Œä½¿å¾—ç½‘ç»œå…·å¤‡è°ƒæ•´å½±åƒçš„èƒ½åŠ›ã€‚å¦ä¸€ç§æ˜¯åœ¨ç¬¬ä¸€ç§çš„åŸºç¡€ä¸Šæ›´è¿›ä¸€æ­¥ï¼ŒæŠŠISPå¤„ç†pipelineä¸­çš„æ­¥éª¤åŒæ ·è¿›è¡Œå»ºæ¨¡ï¼Œè®©ç½‘ç»œå­¦ä¹ ã€‚æœ€åä¸€ç§æ˜¯ç›´æ¥å¯¹ä¼ æ„Ÿå™¨ç›´å‡ºçš„RAWæ•°æ®è¿›è¡Œè®­ç»ƒï¼Œå¾—åˆ°NeRFã€‚</p><p>è¿™æ–¹é¢çš„ç¬¬ä¸€ä¸ªå·¥ä½œæ˜¯NeRF in the Wildï¼Œå¦‚ä¸‹ã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-24.png"></p><p>å·¦ä¾§ä¸ºåŸå§‹NeRFçš„æµç¨‹ã€‚å³ä¾§ä½œè€…å¢åŠ äº†appearance embeddingå’Œtransient embeddingè¿™ä¸¤ä¸ªå˜é‡æ¥å­¦ä¹ é¢œè‰²çš„å˜åŒ–ã€‚ç»“æœå¦‚ä¸‹ã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-25.png"></p><p>è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬å¦‚æœè€ƒè™‘ISPå¤„ç†çš„ä¸€äº›æ­¥éª¤ï¼Œä¹Ÿå¯ä»¥å¯¹å…¶è¿›è¡Œå»ºæ¨¡ã€‚è¿™æ˜¯ADOPçš„å·¥ä½œï¼Œå¦‚ä¸‹ã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-26.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œç½‘ç»œæœ‰èƒ½åŠ›å­¦ä¹ åˆ°åœºæ™¯çš„ä¸€äº›æœ¬å¾çš„é¢œè‰²ã€‚æ¯”å¦‚é»„è‰²çš„æ²™å‘å› ä¸ºé€†å…‰åœ¨çœŸå®å½±åƒä¸­åæš—ï¼Œä½†æ˜¯åœ¨åˆæˆçš„å½±åƒä¸­ï¼Œå°±è¢«æ¢å¤çš„æ¯”è¾ƒå¥½äº†ã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-27.png"></p><p>æœ€åä¸€ç§æ€è·¯æ˜¯åœ¨Rawæ•°æ®ä¸ŠåšNeRFï¼Œè¿™æ˜¯NeRF in the darkçš„å·¥ä½œï¼Œå¦‚ä¸‹ã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-28.png"></p><p>å…¶å®æƒ³æ³•ä¹Ÿæ¯”è¾ƒç®€å•ã€‚å¸¸è§„çš„NeRFæ‹¿åˆ°çš„å½±åƒæ˜¯ç»è¿‡ISPå¤„ç†ä»¥åçš„å½±åƒï¼Œè¿™ç§å¤„ç†å¼•å…¥äº†å„ç§éçº¿æ€§å˜æ¢ï¼Œé‚£ä¹ˆç½‘ç»œå»æ‹Ÿåˆè¿™ç§å˜æ¢å…¶å®æ˜¯æ¯”è¾ƒå›°éš¾çš„äº‹æƒ…ã€‚å¦å¤–ï¼Œåœ¨å¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿä¼šå‹ç¼©ä½å®½ï¼Œå¯¼è‡´ä¸€äº›ä¿¡æ¯æŸå¤±ã€‚æ‰€ä»¥ä½œè€…å°±ç›´æ¥åœ¨RAWæ•°æ®ä¸Šè®­ç»ƒNeRFã€‚</p><h4 id="5-2-2-åŠ¨æ€ç‰©ä½“"><a href="#5-2-2-åŠ¨æ€ç‰©ä½“" class="headerlink" title="5.2.2 åŠ¨æ€ç‰©ä½“"></a>5.2.2 åŠ¨æ€ç‰©ä½“</h4><p>åœ¨å¤„ç†äº†å…‰ç…§ä¸å‡è¡¡çš„æƒ…å†µä»¥åï¼Œå½±åƒç›¸å…³çš„å¦ä¸€ä¸ªæŒ‘æˆ˜å°±æ˜¯åŠ¨æ€ç‰©ä½“ã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-29.png"></p><p>è§£å†³è¿™ä¸ªé—®é¢˜ä¸€èˆ¬æ¥è¯´æœ‰ä¸¤ç§åšæ³•ï¼Œå¦‚ä¸‹ã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-30.png"></p><p>ä¸€ä¸ªç®€å•çš„æƒ³æ³•å°±æ˜¯ï¼Œåˆ©ç”¨è¯­ä¹‰ä¿¡æ¯è¯†åˆ«å‡ºä¸€äº›å¯èƒ½è¿åŠ¨çš„ç‰©ä½“ï¼Œç„¶åæŠŠå®ƒä»¬å¿½ç•¥æ‰(ä¸Šå›¾å·¦è¾¹)ã€‚ä½†è¿™æ ·æœ‰ä¸ªæ½œåœ¨çš„é—®é¢˜ï¼Œå¦‚æœè¢«æ“¦é™¤çš„ç‰©ä½“åœ¨å…¶å®ƒè§†è§’ä¸‹ä¹Ÿæ²¡è§è¿‡ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿç©ºæ´ã€‚å¦ä¸€ç§åŠæ³•å°±æ˜¯ï¼ŒçœŸæ­£çš„å¯¹åŠ¨æ€ç‰©ä½“çš„é‡å»ºå®Œæˆï¼Œå…·ä½“å¯ä»¥é€šè¿‡å…‰çº¿å˜æ¢æ¥é‡å»ºåŠ¨æ€ç‰©ä½“(ä¸Šå›¾å³è¾¹)ã€‚</p><p>ä¸€ä¸ªå·¥ä½œNeural Scene Graphså°±æ˜¯è¿™æ ·ä¸€ä¸ªå·¥ä½œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-31.png"></p><p>ä½œè€…é€šè¿‡åœºæ™¯å›¾å°†åœºæ™¯å’Œè¿åŠ¨ç›®æ ‡åˆ†å‰²å¼€ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚å„ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»æ˜¯é€šè¿‡ç›¸å¯¹å˜æ¢å¾—åˆ°çš„ã€‚åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼ŒèƒŒæ™¯å•ç‹¬ç”¨NeRFè®­ç»ƒã€‚è€Œå¯¹äºå‰æ™¯ç›®æ ‡ï¼Œæœ‰ä¸¤ç§ä¸åŒçš„åšæ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-32.png"></p><p>ä¸€ç§æ–¹æ³•æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¯ä¸€ä¸ªè¿åŠ¨ç‰©ä½“å•ç‹¬ç”¨ä¸€ä¸ªå¾ˆå°çš„NLPæ¥å­¦ä¹ ï¼Œé€šè¿‡å¤šä¸ªNLPæœ€ç»ˆå¯¹æ¯ä¸ªè¿åŠ¨ç›®æ ‡è¿›è¡Œæ¢å¤ã€‚å¦ä¸€ç§åˆ™æ˜¯ï¼Œå¯¹äºä¸€ç±»ç‰©ä½“ï¼Œå…±äº«ä¸€ä¸ªå¤§çš„NLPï¼Œé€šè¿‡å­¦ä¹ latent codeæ¥åŒºåˆ†ä¸åŒçš„å®ä¾‹ã€‚è¿™ä¸¤ç§æ–¹å¼éœ€è¦æ ¹æ®å…·ä½“åœºæ™¯å†³å®šã€‚å½“åœºæ™¯ä¸­è½¦è¾†å¾ˆå¤šçš„æ—¶å€™ï¼Œå‰è€…çš„å‚æ•°é‡æˆ–è€…å­¦ä¹ éš¾åº¦æ˜¯éšç€æ•°é‡è€Œçº¿æ€§å¢é•¿çš„ï¼Œè€Œåè€…å› ä¸ºå…±äº«å‚æ•°åˆ™ä¸ä¼šæœ‰æ˜æ˜¾çš„å¢é•¿ã€‚ä½†å¦‚æœæˆ‘ä»¬éœ€è¦å¯¹æ¯ä¸ªè½¦è¿›è¡Œç²¾ç»†çš„å»ºæ¨¡ï¼Œé‚£ä¹ˆæ˜¾ç„¶å‰è€…æ›´åŠ åˆé€‚ä¸€äº›ã€‚å®é™…æ¸²æŸ“è¿‡ç¨‹ä¸ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-33.png"></p><h3 id="5-3-å¤§åœºæ™¯æŒ‘æˆ˜"><a href="#5-3-å¤§åœºæ™¯æŒ‘æˆ˜" class="headerlink" title="5.3 å¤§åœºæ™¯æŒ‘æˆ˜"></a>5.3 å¤§åœºæ™¯æŒ‘æˆ˜</h3><p>æœ€åä¸€éƒ¨åˆ†æ˜¯NeRFåœ¨å¤§åœºæ™¯ä¸­çš„æŒ‘æˆ˜ï¼Œå¦‚ä½•å¹³è¡¡æ€§èƒ½ä¸ç²¾åº¦ç­‰é—®é¢˜ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-34.png"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¯¹äºä¸€äº›è¾ƒå°çš„åœºæ™¯ï¼Œè§‚æµ‹ä¸€èˆ¬éƒ½æ˜¯ç”±å¤–å‘å†…è¿›è¡Œèšåˆçš„ã€‚è¿™æ ·æˆ‘ä»¬å¾ˆå®¹æ˜“å¾—åˆ°è¢«æ‘„ç‰©ä½“çš„ä¸‰ç»´åŒ…å›´æ¡†ã€‚ä½†åœ¨å®¤å¤–ç­‰å¤§åœºæ™¯ä¸­ï¼Œå¾ˆéš¾æœ‰ä¸€ä¸ªä¸‰ç»´çš„åŒ…å›´æ¡†å¯ä»¥æŠŠæ•´ä¸ªåœºæ™¯åŒ…å«åœ¨é‡Œé¢ã€‚å¦å¤–ï¼Œå¯¹äºå®¤å¤–çš„åœºæ™¯ï¼Œè¿˜ä¸å¯é¿å…çš„æœ‰â€œå¤©ç©ºâ€é—®é¢˜ã€‚åœ¨é‡‡é›†è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šè§†è§’éƒ½ä¼šé‡‡é›†åˆ°å¤©ç©ºçš„åƒç´ ï¼Œä½†äº‹å®ä¸Šè¿™äº›åƒç´ æ˜¯æˆ‘ä»¬é‡å»ºä¸­ä¸éœ€è¦è€ƒè™‘(ç®€å•çš„æ–¹æ³•æ˜¯å¢åŠ mask)ã€‚æ­¤å¤–è¿˜æœ‰è¿œå¤„åœºæ™¯çš„ç»†èŠ‚ä¼˜åŒ–é—®é¢˜ç­‰ã€‚å¯¹äºå¤§åœºæ™¯çš„å»ºæ¨¡ï¼Œè¿˜æ˜¯ç›¸å¯¹å¤æ‚çš„ã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-35.png"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåœ¨æœ€å·¦è¾¹çš„å›¾ä¸­ï¼Œæˆ‘ä»¬ç»™è¿œå¤„åˆ†é…è¾ƒå¤§æƒé‡ï¼Œé‚£ä¹ˆè¿‘å¤„å°±ä¼šç›¸å¯¹æ¨¡ç³Šã€‚åä¹‹ï¼Œè¿‘å¤„æƒé‡é«˜ä»¥åï¼Œè¿œå¤„åˆä¼šå˜æ¨¡ç³Šã€‚æ‰€ä»¥å…¶å®æ˜¯æ¯”è¾ƒéš¾çš„é—®é¢˜ã€‚åœ¨KITTIæ•°æ®ä¸Šä¹Ÿæ˜¯ä¸€æ ·ï¼Œè¿œå¤„çš„æ ‘æœ¨å¯èƒ½å‘ç”Ÿä¸€äº›åç§»ã€‚æ‰€ä»¥æ€»ç»“èµ·æ¥å°±æ˜¯ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•é€šè¿‡æœ‰é™çš„èµ„æºæ¥æŒæ¡åœºæ™¯ä¸­çš„æ‰€æœ‰ç»†èŠ‚ã€‚å°½ç®¡å¾ˆå›°éš¾ï¼Œä½†è¿˜æ˜¯æœ‰ç›¸å…³å·¥ä½œï¼Œå¦‚ä¸‹ã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-36.png"></p><p>Block NeRFä¸»è¦æ˜¯é’ˆå¯¹è¡—æ™¯æ•°æ®çš„å¤„ç†ï¼Œé€šè¿‡å¯¹åœºæ™¯è¿›è¡Œåˆ†å—ï¼Œå¹¶ä¿è¯å„ä¸ªå—ä¹‹é—´æœ‰é‡å ï¼Œå®ç°å¤šä¸ªNeRFçš„è”åˆã€‚Mega NeRFä¸»è¦æ˜¯é’ˆå¯¹æ— äººæœºæ•°æ®çš„å¤„ç†ã€‚å®ƒçš„æ€è·¯å’ŒInstant NGPå’ŒKiloNeRFæœ‰ä¸€å®šçš„ç›¸ä¼¼ä¹‹å¤„ã€‚ä¸‹å›¾å±•ç¤ºäº†Block NeRFæ›´ç»†èŠ‚çš„å†…å®¹ã€‚</p><p><img src="/images/3D-Reconstruction-1/2022-05-27-37.png"></p><p>è¿™é‡Œè¿˜å¼•å…¥äº†Visibilityæ¦‚å¿µã€‚ç®€å•æ¥è¯´å°±æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è¦æ¸²æŸ“æŸä¸ªä½ç½®çš„å½±åƒï¼Œç†è®ºä¸Šæ¥è¯´æˆ‘ä»¬è¦æŸ¥è¯¢æ‰€æœ‰çš„NeRFç½‘ç»œï¼Œæ‰¾åˆ°é‚£äº›å’Œå½“å‰è§†è§’ç›¸å…³çš„è¿›è¡Œæ¸²æŸ“ã€‚ä½†è¿™æ ·æ¯ä¸ªNeRFç½‘ç»œéƒ½æŸ¥è¯¢ï¼Œæ˜¾ç„¶æ˜¯éå¸¸è€—æ—¶çš„ã€‚æ‰€ä»¥ä½œè€…åˆè®­ç»ƒäº†ä¸€ä¸ªå°ç½‘ç»œã€‚è¿™ä¸ªç½‘ç»œçš„ä½œç”¨æ˜¯åˆ¤æ–­æŸä¸ªä½ç½®æ˜¯å¦åœ¨å½“å‰NeRFçš„åœºæ™¯ä¸­ã€‚è¿™æ ·åªéœ€è¦æŸ¥è¯¢ç›¸å…³çš„NeRFç½‘ç»œå°±å¯ä»¥ï¼Œè€Œä¸éœ€è¦æ¯ä¸ªéƒ½éå†ï¼Œæå‡äº†æ•ˆç‡ã€‚</p><h2 id="6-å‚è€ƒèµ„æ–™"><a href="#6-å‚è€ƒèµ„æ–™" class="headerlink" title="6 å‚è€ƒèµ„æ–™"></a>6 å‚è€ƒèµ„æ–™</h2><ol><li><a href="https://zhaoxuhui.top/blog/2022/05/14/megvii-cv-master-nerf-note-1.html">æ—·è§†CV MasteråŸºäºç¥ç»ç½‘ç»œçš„3Dé‡å»ºè®­ç»ƒè¥è¯¾ç¨‹ç¬”è®°1</a></li><li><a href="https://zhaoxuhui.top/blog/2022/05/26/megvii-cv-master-nerf-note-2.html">æ—·è§†CV MasteråŸºäºç¥ç»ç½‘ç»œçš„3Dé‡å»ºè®­ç»ƒè¥è¯¾ç¨‹ç¬”è®°2</a></li><li><a href="https://zhaoxuhui.top/blog/2022/05/27/megvii-cv-master-nerf-note-3.html">æ—·è§†CV MasteråŸºäºç¥ç»ç½‘ç»œçš„3Dé‡å»ºè®­ç»ƒè¥è¯¾ç¨‹ç¬”è®°3</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NeRF </tag>
            
            <tag> ä¸‰ç»´é‡å»º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯»åšçš„é€‰æ‹©ã€è¿‡ç¨‹ã€å‡ºè·¯</title>
      <link href="2023/04/06/meeting-3/"/>
      <url>2023/04/06/meeting-3/</url>
      
        <content type="html"><![CDATA[<h1 id="è¯»åšçš„é€‰æ‹©ã€è¿‡ç¨‹ã€å‡ºè·¯"><a href="#è¯»åšçš„é€‰æ‹©ã€è¿‡ç¨‹ã€å‡ºè·¯" class="headerlink" title="è¯»åšçš„é€‰æ‹©ã€è¿‡ç¨‹ã€å‡ºè·¯"></a>è¯»åšçš„é€‰æ‹©ã€è¿‡ç¨‹ã€å‡ºè·¯</h1><blockquote><p>ä¸­ç§‘é™¢åšå£«ï¼Œç¨‹å°å…­</p></blockquote><p><strong>ä¸ºä»€ä¹ˆè¯»åšï¼Ÿ</strong></p><img src="/images/meeting-3/image-20230406155514725.png" style="zoom:50%;"><ul><li><p>å»é«˜æ ¡ã€ç ”ç©¶æ‰€ã€ä¼ä¸šçš„ç ”ç©¶é™¢ï¼Œå¿…é¡»è¦è¯»åšï¼Œè¿™æ˜¯ä¸ªé—¨æ§›</p></li><li><p>æµ·å½’ï¼Œç‰¹åˆ«æ˜¯çŸ¥åå­¦æ ¡ï¼Œä¼˜åŠ¿éå¸¸å¤§</p></li><li><p>éœ€è¦åšåšåï¼Œå»å¥½å‡ ä¸ªåœ°æ–¹åšåšåï¼Œå»ç§¯ç´¯ä¸€äº›äººè„‰ã€é¡¹ç›®ã€ç»éªŒï¼Œæœ€åæ‰èƒ½å»å½“ä¸€ä¸ªè€å¸ˆ</p><p>è¯»åš28ï¼Œåšå£«å30ï¼Œå¯èƒ½ç¨³å®šä¸‹æ¥éƒ½æ˜¯30ä»¥ä¸Šäº†</p></li></ul><p><strong>é€‰è€å¸ˆï¼š</strong></p><img src="/images/meeting-3/image-20230406160242078.png" style="zoom:50%;"><p>å¯¼å¸ˆã€å›¢é˜Ÿéƒ½å¾ˆé‡è¦ï¼šå¯¼å¸ˆåŸºæœ¬å†³å®šäº†è¯»åšæœŸé—´èƒ½å¹²å‡ºä»€ä¹ˆäº‹ã€‚</p><p>å°½é‡é€‰æ‹©å¹´è½»æœ‰å†²åŠ²çš„å¯¼å¸ˆï¼š</p><ul><li>æ¯”å¦‚å¼ å¯Œï¼ŒçŸ­çŸ­å‡ å¹´æ—¶é—´ï¼Œä»é¢†åŸŸå†…æ²¡äººçŸ¥é“ï¼Œåˆ°æ•´ä¸ªé¢†åŸŸå†…éƒ½çŸ¥é“ã€‚</li><li>è€å¸ˆéƒ½éå¸¸æ‹¼ï¼Œå¹´è½»è€å¸ˆè¦æ‰“å“è‡ªå·±çš„åå£°ã€‚</li><li>è€å¸ˆæœ¬èº«èƒ½åŠ›ä¹Ÿå¾ˆå¼ºï¼ŒçŸ¥åå®éªŒå®¤å‡ºæ¥çš„ã€‚</li><li>æŒ‡å¯¼éå¸¸å¤šï¼Œå¯¹ç¬¬ä¸€ä¸ªå­¦ç”ŸåŸºæœ¬æ˜¯æ‰‹æŠŠæ‰‹æŒ‡å¯¼ï¼Œä¹Ÿéå¸¸pushã€‚</li></ul><p>æŒ‚åå·¨ä½¬å¯¼å¸ˆï¼š</p><ul><li>å¾ˆå¤šéƒ½ä¸å¸¦å­¦ç”Ÿï¼Œéƒ½æ˜¯åšè¡Œæ”¿çš„</li><li>å¾ˆæœ‰å¯èƒ½å°è€å¸ˆå¸¦å­¦ç”Ÿï¼Œç”šè‡³æ˜¯ç»„é‡Œé¢çš„å¸ˆå…„å¸¦</li><li>å¯èƒ½å·²ç»èººå¹³äº†ï¼Œè‡ªå·±å•¥éƒ½æœ‰äº†ï¼Œä¸ä¼šé‚£ä¹ˆè´Ÿè´£äº†</li></ul><p><strong>è¯»åšçš„è¿‡ç¨‹ï¼š</strong></p><img src="/images/meeting-3/image-20230406153243562.png" style="zoom:50%;"><ul><li><p>ç¬¬ä¸€å¹´åŸºæœ¬æ˜¯çœ‹è®ºæ–‡æ‰¾æ€è·¯ã€‚</p><p>çœ‹é¢†åŸŸå†…æ¯”è¾ƒæ–°çš„ï¼Œå­¦æ ¡æ¯”è¾ƒå¥½çš„ç¡•åšè®ºæ–‡ï¼Œä¼šçœ‹æ¯”è¾ƒä¹…ï¼›</p><p>å¤šçœ‹è‹±æ–‡æ–‡çŒ®ï¼Œè¶Šçœ‹è¶Šå¤šçš„æ—¶å€™ï¼Œç›´æ¥å°±çœ‹æ‡‚ã€‚</p></li><li><p>å†™ä»£ç å¯¹SLAMæ–¹å‘æ˜¯éå¸¸é‡è¦çš„ï¼›ï¼ˆè¯»ä»£ç ï¼Œç»™å¼€æºçš„ä»£ç å†™æ³¨é‡Šä¹Ÿæ˜¯å¾ˆé‡è¦çš„ï¼Œå¤ç°ä»£ç æ›´é‡è¦ï¼‰</p><p>æ–°æ‰‹å†™è®ºæ–‡çš„æ—¶å€™ï¼Œå¯èƒ½å‘ç°å¾ˆå¤šçš„ä¸œè¥¿éƒ½æ²¡åŠæ³•å†™æˆå…¬å¼ï¼Œä½†å®é™…ä¸Šå¾ˆå¤šç†è®ºéœ€è¦ç”¨æ•°å­¦å…¬å¼å»è¡¨è¾¾ï¼Œä¸€ä¸ªæ˜¯æ²¡æœ‰æ­§ä¹‰ï¼Œä¸€ä¸ªæ˜¯æ•°å­¦å…¬å¼æ˜¯ç›¸é€šçš„ï¼Œå¤§å®¶ä¸€çœ‹å…¬å¼å°±çŸ¥é“ä½œè€…çš„æ°´å¹³æ€ä¹ˆæ ·ã€‚ä¸€ç¯‡å°è®ºæ–‡é‡Œé¢æ²¡ä»€ä¹ˆå…¬å¼ï¼Œå¤§æ¦‚ç‡ä¹Ÿä¼šè¢«æ‹’ã€‚</p><blockquote><p>æ¨å…¬å¼æŒ‡çš„æ˜¯æŠŠè‡ªå·±åšçš„å·¥ä½œå˜æˆå…¬å¼çš„èƒ½åŠ›ï¼Œæˆ–è€…è¯´æ˜¯å¯¹è‡ªå·±å…·ä½“çš„å·¥ä½œæŠ½è±¡è¡¨è¾¾çš„èƒ½åŠ›</p></blockquote></li><li><p>æœŸåˆŠæŠ•ç¨¿å¯èƒ½è¦åŠå¹´å¤šï¼Œé•¿çš„æœ‰ä¸€å¹´ï¼Œè¦ç»™è‡ªå·±ç•™å¥½è¶³å¤Ÿçš„æ—¶é—´ï¼</p></li><li><p>å­¦æœ¯äº¤æµä¼šè®®ï¼Œèƒ½å»çš„å°½é‡å»ï¼Œäº‰å–åœ¨ä¸Šé¢ä½œæŠ¥å‘Šã€‚</p><p>äº¤æµéå¸¸é‡è¦ï¼Œæ¯”å¦‚é—®ä¸€é—®åˆ«äººçš„æ€è·¯æ˜¯æ€ä¹ˆæ¥çš„ã€‚</p></li><li><p>è¯»åšçš„æ—¶å€™è¦æŠŠäº‹æƒ…å°½æ—©æå®šï¼Œä¸è¦å»æ‹–ï¼ŒåŒ…æ‹¬ç»“å©šã€æ‰¾å·¥ä½œã€å‘è®ºæ–‡ç­‰ç­‰ã€‚</p></li></ul><p><strong>æœ€åï¼Œæœ€é‡è¦çš„ä¸€ç‚¹ï¼š</strong></p><p>å¦‚æœåšå£«æœŸé—´æ²¡æœ‰åšå‡ºä»€ä¹ˆæˆæœï¼Œä¸è¦æƒ³ç€åšå£«æ¯•ä¸šåèƒ½åšå‡ºä»€ä¹ˆå­¦æœ¯æˆæœï¼Œè¿™äº›å¤§ç‰›åŸºæœ¬éƒ½æ˜¯åšå£«æœŸé—´åšå‡ºäº†éå¸¸å‰å®³çš„æˆæœã€‚å¦‚æœåšå£«æœŸé—´éå¸¸å¹³åº¸ï¼Œç­‰æ¯•ä¸šä¹‹åæƒ³ä¸€é£å†²å¤©ï¼ŒåŸºæœ¬æ²¡æœ‰å¯èƒ½ã€‚</p><p>åšå£«æœŸé—´çœŸçš„æ˜¯åœ¨ç»™è‡ªå·±å¹²ï¼Œå¤§å®¶éƒ½æ˜¯ä¸ºäº†æ¯•ä¸šã€æ‹¿è®ºæ–‡ã€æ‰¾æ›´å¥½çš„å·¥ä½œã€å»æ›´å¥½çš„å­¦æ ¡ï¼Œéƒ½æ˜¯åœ¨ç»™è‡ªå·±æ‹¼å‘½ã€‚ç­‰æ¯•ä¸šä¹‹åï¼Œè‡ªå·±çš„èº«ä»½å·²ç»å˜äº†ï¼Œå»é«˜æ ¡æ˜¯æ™®é€šè€å¸ˆï¼Œå»ä¼ä¸šæ˜¯å‘˜å·¥ï¼ŒåŠ¨åŠ›ä¸ä¸€æ ·äº†ã€æ°›å›´ä¹Ÿä¸ä¸€æ ·äº†ã€‚</p><p>è¯»ä¹¦çš„æ—¶å€™å¯ä»¥ä¸€å¿ƒä¸€æ„ç ”ç©¶è¿™ä¸ªä¸œè¥¿ï¼Œè€Œåˆ°äº†å…¬å¸åˆ°äº†å­¦æ ¡åˆ°äº†ç¤¾ä¼šä¸Šä¹‹åï¼Œä¼šæœ‰å„ç§ä¹±ä¸ƒå…«ç³Ÿçš„äº‹æƒ…ã€‚</p><p>æƒ³åšæˆä»€ä¹ˆäº‹æƒ…ï¼Œæœ€å¥½çš„å…¶å®å°±æ˜¯è¯»ä¹¦çš„è¿™å‡ å¹´ï¼Œè¿™å‡ å¹´çš„ç¯å¢ƒæ˜¯æœ€ç†æƒ³çš„ã€‚</p><blockquote><p>åšå£«æ˜¯ä½ è„±äº§æç§‘ç ”çš„æ—¶é—´ï¼Œè¿™æ—¶å€™ä½ çš„è„‘åŠ›å·²ç»ä½¿ç”¨åˆ°äº†æé™ã€‚å°†æ¥ä½ è¦å…»å®¶ç³Šå£å¸¦å°å­©ï¼Œåˆè¦æ•™ä¹¦åšé¡¹ç›®ç”šè‡³å…¼èŒè¡Œæ”¿ï¼Œæ›´æ²¡æœ‰æ—¶é—´å’Œç²¾åŠ›å»æå­¦é—®ã€‚</p><p>åæˆåŠ›éƒ½åšä¸æˆçš„äº‹ï¼Œä¸è¦ç›¸ä¿¡é ä¸ƒæˆåŠ›èƒ½æˆåŠŸï¼</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç»éªŒåˆ†äº« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SLAMè®ºæ–‡ä»é›¶åˆ°ä¸€</title>
      <link href="2023/03/26/meeting-2/"/>
      <url>2023/03/26/meeting-2/</url>
      
        <content type="html"><![CDATA[<h1 id="SLAMè®ºæ–‡ä»é›¶åˆ°ä¸€"><a href="#SLAMè®ºæ–‡ä»é›¶åˆ°ä¸€" class="headerlink" title="SLAMè®ºæ–‡ä»é›¶åˆ°ä¸€"></a>SLAMè®ºæ–‡ä»é›¶åˆ°ä¸€</h1><blockquote><p>å¯¹2023å¹´3æœˆ26æ—¥å¾®ä¿¡å…¬ä¼—å·ã€Šè®¡ç®—æœºè§†è§‰lifeã€‹ç›´æ’­çš„ä¸€ä¸ªæ€»ç»“</p></blockquote><p><strong>ä¸»è®²äººçš„ç»å†ï¼š</strong></p><ul><li><p><strong>ä¸»è®²äººæƒ…å†µï¼š</strong></p><p>åšâ¼€å¼€å§‹å…¥é—¨ï¼Œç»å†äº†â¼€å¹´å¤šå‘äº†ç¬¬â¼€ç¯‡è®ºæ–‡ï¼ˆé¡¶ä¼šï¼‰ï¼›</p><p>å®éªŒå®¤æ²¡æœ‰è¶³å¤Ÿçš„ç§¯æ·€ï¼Œç¼ºä¹æŒ‡å¯¼ï¼›ç›®å‰å‘è¡¨äº†RALã€ICRAç­‰ã€‚</p></li><li><p><strong>å¼€å§‹çš„é—®é¢˜ï¼š</strong></p><p>æ²¡æœ‰æ­£é¢åé¦ˆï¼›ä¸çŸ¥é“æ€ä¹ˆé€‰é¢˜ï¼›ä¸çŸ¥é“æ€ä¹ˆçœ‹è®ºæ–‡å’Œä»£ç ï¼›ä¸€ç›´åœ¨å…¥é—¨ï¼Œä»æ¥æ²¡è¿›é—¨ã€‚</p></li><li><p><strong>è½¬å˜çš„å¥‘æœºï¼š</strong></p><p>åŠ å…¥äº†æ˜Ÿçƒï¼Œç„¶åå¼€å§‹å’Œåˆ«äººäº¤æµï¼Œäº¤æµæ˜¯éå¸¸é‡è¦çš„ã€‚</p><blockquote><p>æˆ‘è§‰å¾—æœ€é‡è¦çš„å¥‘æœºè¿˜æ˜¯ç¬¬ä¸€ç¯‡è®ºæ–‡æƒ³æ³•çš„æå‡ºï¼Œæœ‰æƒ³æ³•äº†å·¥ä½œæ‰æœ‰æ˜ç¡®çš„æ–¹å‘ï¼Œå„ç§æ­£é¢çš„åé¦ˆæ‰ä¼šåˆ°æ¥ã€‚</p></blockquote></li><li><p><strong>å¼€å§‹åšç ”ç©¶ï¼š</strong></p><p>è¡ŒåŠ¨å†™ä»£ç ï¼Œåšå®éªŒï¼Œæ€è€ƒç»“è®ºï¼Œåå¤åšå®éªŒï¼›æŠ•ç¨¿ï¼›ä¿®ç¨¿ï¼Œå›å¤å®¡ç¨¿äººã€‚</p><ul><li><p>ORB-SLAM3æœ‰ä¸ªçªå‡ºçš„è´¡çŒ®ï¼Œå³å¤šåœ°å›¾ï¼Œè€Œä¸»è®²äººå­¦ä¹ ORB-SLAM3çš„åŒæ—¶åœ¨åšæ— å…±åŒè§†é‡çš„å¤šç›¸æœºä¹‹é—´çš„æ ‡å®šé¡¹ç›®ï¼Œè¿™ä¸¤ä¸ªä¸œè¥¿çªç„¶äº§ç”Ÿäº†å…±é¸£ï¼›</p></li><li><p>ä¹‹åæå‡ºäº†â€œå°è¯•å¤šç›¸æœºåˆ†åˆ«è¿è¡ŒORB-SLAM3å»ºå›¾ï¼Œ ç„¶åå»ºå›¾ä¹‹ååˆ©ç”¨æ¯ä¸ªç›¸æœºçš„åœ°å›¾æ¥è®¡ç®—æ ‡å®šå‚æ•°â€çš„æƒ³æ³•ï¼›</p></li><li><p>å¼€å§‹åœ¨ORB-SLAM3çš„åŸºç¡€ä¸Šæ”¹ä»£ç ï¼Œé›†ä¸­çœ‹æŸäº›éƒ¨åˆ†çš„ä»£ç ï¼Œå†™äº†ä¸¤ä¸ªæœˆçš„ä»£ç ï¼Œåšäº†å®éªŒï¼Œç„¶åè¿™ä¸ªç›¸æœºæ ‡å®šçš„ç²¾åº¦æ˜¯OKçš„ï¼›</p></li><li><p>åœ¨å‰ä¸€æ­¥çš„åŸºç¡€ä¸Šå¼€å§‹æ€è€ƒä¸ºä»€ä¹ˆæœ‰çš„åœºæ™¯æ•ˆæœä¸å¤ªå¥½ï¼Œå¦‚ä½•æ”¹è¿›ï¼Œå¦‚ä½•é€‰æ‹©ç‰¹å¾ç‚¹ï¼Œå¦‚ä½•æ¶ˆé™¤ORB-SLAM3çš„ç´¯ç§¯è¯¯å·®ç­‰ï¼›</p></li><li><p>æœ€ç»ˆåšå®Œå®éªŒï¼Œç¬¬â¼€æ¬¡æ­£å¼å†™å°è®ºæ–‡ï¼ŒæŠ•äº†RALï¼Œè¿‡äº†ä¸¤ä¸ªæœˆæ”¶åˆ° reviewï¼Œç„¶åç»™äº†â¼€ä¸ªæœˆæ”¹ç¨¿æ—¶é—´ï¼Œæ ¹æ®å®¡ç¨¿äººæ„è§è¡¥å……å®éªŒï¼Œæ”¹è¿›æ–¹æ¡ˆï¼Œå’Œå®¡ç¨¿äººè§£é‡Šè‡ªå·±çš„å·¥ä½œï¼Œæœ€åæˆåŠŸè¢«æ¥æ”¶ã€‚</p></li><li><p>åœ¨å‘äº†ç¬¬â¼€ç¯‡è®ºæ–‡ä¹‹åå°±ä¸ç„¦è™‘äº†ï¼Œç”Ÿæ´»çŠ¶æ€ä¹Ÿå¥½èµ·æ¥äº†ï¼Œå‘è®ºæ–‡åŸºæœ¬çš„æµç¨‹éƒ½ç†Ÿæ‚‰è¿‡â¼€éï¼Œå¯ä»¥æ›´å¿«åœ°å‘å‡ºæ–°çš„è®ºæ–‡äº†ã€‚</p></li></ul></li><li><p><strong>è®ºæ–‡ä»ä¸€åˆ°å¤šï¼š</strong></p><p>æ²¡æœ‰å±±é¡¶ä¸Šçš„æŒ‡å¯¼ï¼Œå°±ç«™åœ¨å±±è…°ä¸ŠæŒ‡è·¯ã€‚æ‰€ä»¥ä½œä¸ºç«™åœ¨å±±è…°ä¸Šçš„äººï¼Œå¼€å§‹å¸®åŠ©å››ä¸ªå¸ˆå¼Ÿå­¦ä¹ ï¼Œå¸®åŠ©ä»–ä»¬å…¥é—¨ï¼Œä»¥è¾“å‡ºçš„æ–¹å¼è¿›è¡Œæ€è€ƒã€‚</p></li></ul><p><strong>å­¦ä¹ å»ºè®®ï¼š</strong></p><ul><li>å•æ‰“ç‹¬æ–—ä¸å¯å–ï¼Œä¸€å®šè¦æ‰¾ç»„ç»‡ï¼Œå¤šäº¤æµï¼Œä¿æŒè¾“å‡ºï¼›</li><li>ä¿è¯ä¸€å®šé‡çš„è¾“å…¥ï¼Œæœ‰è¾“å…¥æ‰èƒ½æœ‰äº§å‡ºï¼›<ul><li>æ¯”å¦‚ç›´æ¥çœ‹ä»£ç ï¼ŒORB-SLAMã€VINSçš„ä»£ç ï¼Œä½†æ˜¯ä¸€å®šè¦æ˜ç™½è‡ªå·±çœ‹ä»£ç çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Œè¦å¸¦ç€é—®é¢˜å»çœ‹ï¼›</li><li>å·¥ä½œçš„åˆ›æ–°ç‚¹ä¸€å®šä¼šåœ¨è®ºæ–‡é‡Œé¢ä½“ç°å‡ºæ¥ï¼Œè€Œä»£ç æ˜¯å…·ä½“çš„å®ç°ç»†èŠ‚ï¼Œå¯¹ä¸æ„Ÿå…´è¶£çš„ç‚¹ï¼Œå¯ä»¥æŠŠè¿™äº›ä»£ç å½“ä½œå·¥å…·æ¥ä½¿ç”¨ã€‚</li><li>å¯ä»¥ç»„å»ºä¸€ä¸ªå­¦ä¹ å°ç»„ï¼Œä¸¤ä¸‰ä¸ªäººï¼Œæ¯å¤©çœ‹ç‚¹è®ºæ–‡ï¼Œç„¶åçœ‹åˆ°æ„Ÿå…´è¶£çš„è®ºæ–‡ï¼Œå¯ä»¥å¯¹è¿™ç¯‡è®ºæ–‡è¿›è¡Œä¸€ä¸ªå¤ç°ã€‚</li></ul></li><li>æŠ“ä½ä¸€ä¸ªæ¨¡å—åšï¼Œç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼ˆæ¯”å¦‚å‰é¢ï¼ŒæŠŠå¼€æºä»£ç å½“ä½œå·¥å…·æ¥ä½¿ç”¨ï¼‰ï¼›</li><li>æœ‰ç›®çš„æ€§çš„å­¦ä¹ ï¼Œä¸€å®šè¦çŸ¥é“è‡ªå·±å­¦ä¹ æ˜¯ä¸ºäº†ä»€ä¹ˆï¼›</li><li>å®šä¸€ä¸ªèƒ½æœ‰åé¦ˆçš„ç›®æ ‡å¾ˆé‡è¦ï¼ŒåŒ…æ‹¬é•¿è¿œè§„åˆ’å’ŒçŸ­æœŸç›®æ ‡ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç»éªŒåˆ†äº« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡ ç§å…³é”®å¸§é€‰æ‹©æ–¹æ¡ˆ</title>
      <link href="2023/03/25/slam-learning-5/"/>
      <url>2023/03/25/slam-learning-5/</url>
      
        <content type="html"><![CDATA[<h1 id="å‡ ç§å…³é”®å¸§é€‰æ‹©æ–¹æ¡ˆ"><a href="#å‡ ç§å…³é”®å¸§é€‰æ‹©æ–¹æ¡ˆ" class="headerlink" title="å‡ ç§å…³é”®å¸§é€‰æ‹©æ–¹æ¡ˆ"></a>å‡ ç§å…³é”®å¸§é€‰æ‹©æ–¹æ¡ˆ</h1><h2 id="ORB-SLAM"><a href="#ORB-SLAM" class="headerlink" title="ORB-SLAM"></a>ORB-SLAM</h2><p>æ’å…¥å…³é”®å¸§çš„æ¡ä»¶å³æ˜¯å¿…é¡»æ»¡è¶³æ¡ä»¶1ä»¥åŠæ»¡è¶³2.1-2.3ä¸­ä»»æ„ä¸€ä¸ªæ¡ä»¶ã€‚</p><p><strong>å¿…é¡»æ»¡è¶³çš„æ¡ä»¶ï¼š</strong></p><p><strong>1.</strong> å†…ç‚¹æ•°å¿…é¡»è¶…è¿‡è®¾å®šçš„æœ€å°é˜ˆå€¼ï¼Œå¹¶ä¸”é‡å åº¦ä¸èƒ½å¤ªå¤§ï¼›</p><p><strong>åŸå› ï¼š</strong>ä¿è¯å…³é”®å¸§è·Ÿè¸ªçš„è´¨é‡ï¼ŒåŒæ—¶ï¼Œé¿å…å¼•å…¥è¿‡å¤šçš„ä¿¡æ¯å†—ä½™ã€‚</p><p><strong>ä¸‰é€‰ä¸€çš„æ¡ä»¶ï¼š</strong></p><p><strong>2.1</strong> è·ç¦»ä¸Šæ¬¡æ’å…¥å…³é”®å¸§å·²ç»è¿‡å»MAXå¸§ï¼ŒMAXæ˜¯ORB-SLAM2é¢„è®¾çš„æœ€å¤§å€¼ï¼›</p><p><strong>åŸå› ï¼š</strong>é˜²æ­¢è¿‡å»å¤ªå¤šå¸§ï¼Œè·Ÿè¸ªä¸¢å¤±ã€‚</p><p><strong>2.2</strong> è·ç¦»ä¸Šæ¬¡æ’å…¥å…³é”®å¸§è‡³å°‘è¿‡å»MINå¸§ï¼Œä¸”å±€éƒ¨å»ºå›¾çº¿ç¨‹å¤„äºç©ºé—²çŠ¶æ€ï¼ŒMINæ˜¯ORB-SLAM2é¢„è®¾çš„æœ€å°å€¼ï¼›</p><p><strong>åŸå› ï¼š</strong>é˜²æ­¢å›¾åƒé‡å åº¦å¤ªé«˜ï¼Œå¹¶ä¸”å±€éƒ¨å»ºå›¾çº¿ç¨‹æœ‰ç©ºé—²å¤„ç†æ–°çš„å…³é”®å¸§ã€‚</p><p><strong>2.3</strong> å±€éƒ¨å»ºå›¾çº¿ç¨‹ä¸­å…³é”®å¸§é˜Ÿåˆ—çš„å…³é”®å¸§æ•°é‡ä¸è¶…è¿‡3ä¸ªï¼›</p><p><strong>åŸå› ï¼š</strong>ä¸»è¦ä¹Ÿæ˜¯è€ƒè™‘å±€éƒ¨å»ºå›¾çº¿ç¨‹çš„å¤„ç†èƒ½åŠ›ï¼Œä»¥åŠä¿¡æ¯çš„å†—ä½™åº¦é—®é¢˜å§ã€‚</p><h2 id="VOLDOR-SLAM"><a href="#VOLDOR-SLAM" class="headerlink" title="VOLDOR-SLAM"></a>VOLDOR-SLAM</h2><p>ä½¿ç”¨å¯è§æ€§è¦†ç›–ç‡ï¼ˆVisibility-Coverageï¼‰æŒ‡æ ‡é€‰æ‹©å…³é”®å¸§ã€‚</p><p>VCæŒ‡æ ‡å®šä¹‰åœ¨å·²çŸ¥å§¿æ€çš„å¸§$I_1,I_2$ä¸Šï¼Œå…¶ä¸­åªæœ‰$I_1$å¯èƒ½å…·æœ‰æ·±åº¦å›¾ã€‚VCæŒ‡æ ‡ä½äºè®¾å®šé˜ˆå€¼çš„ç¬¬ä¸€å¸§å°†è¢«é€‰æ‹©ä¸ºä¸‹ä¸€æ‰¹çš„å‚è€ƒå¸§ï¼Œè€Œå½“å‰æ‰¹æ¬¡çš„å‚è€ƒå¸§å’Œæœ€æ–°å…³é”®å¸§ä¹‹é—´çš„VCæŒ‡æ ‡ä½äºè®¾å®šé˜ˆå€¼ï¼Œè®²å½“å‰æ‰¹æ¬¡çš„å‚è€ƒå¸§æ³¨å†Œä¸ºå…³é”®å¸§ã€‚<br>$$<br>VC=\frac{2}{Visibility^{-1}+Coverage^{-1}}<br>$$<br>å…¶ä¸­$Visibility$æ˜¯$I_1$ä¸­æŠ•å½±åˆ°$I_2$å†…çš„æ·±åº¦åƒç´ æ¯”ä¾‹ï¼›$Coverage$æ˜¯$I_2$ä¸­å›¾åƒåŒºåŸŸè¢«$I_1$ä¸­æ·±åº¦åƒç´ æŠ•å½±æ‰€è¦†ç›–çš„æ¯”ä¾‹ã€‚</p><h2 id="VINS-Mono"><a href="#VINS-Mono" class="headerlink" title="VINS-Mono"></a>VINS-Mono</h2><p>VINS-Monoæœ‰ä¸¤ä¸ªç”¨äºé€‰æ‹©å…³é”®å¸§çš„æ¡ä»¶ï¼Œæ»¡è¶³ä¸€ä¸ªå³å¯ã€‚</p><p><strong>1.</strong> ä¸å‰ä¸€ä¸ªå…³é”®å¸§çš„å¹³å‡è§†å·®ï¼›</p><p>å½“å‰å¸§å’Œæœ€æ–°å…³é”®å¸§ä¹‹é—´è·Ÿè¸ªç‰¹å¾çš„å¹³å‡è§†å·®è¶…è¿‡ä¸€å®šé˜ˆå€¼ï¼Œå°†å½“å‰å¸§å¸§è§†ä¸ºæ–°å…³é”®å¸§ã€‚ç”±äºå¹³ç§»å’Œæ—‹è½¬éƒ½ä¼šå¯¼è‡´è§†å·®ï¼Œè€Œçº¯æ—‹è½¬è¿åŠ¨ä¸èƒ½å¤Ÿå¯¹ç‰¹å¾è¿›è¡Œä¸‰è§’æµ‹é‡ï¼Œæ‰€ä»¥åœ¨è®¡ç®—è§†å·®æ—¶vins-monoè¿˜ä½¿ç”¨é™€èºä»ªæµ‹é‡çš„çŸ­æœŸç§¯åˆ†æ¥è¡¥å¿æ—‹è½¬ã€‚</p><p><strong>2.</strong> è·Ÿè¸ªè´¨é‡ï¼›</p><p>å¦‚æœè·Ÿè¸ªç‰¹å¾çš„æ•°é‡ä½äºæŸä¸ªé˜ˆå€¼ï¼Œå°†æ­¤å¸§è§†ä¸ºæ–°çš„å…³é”®å¸§ï¼Œè¿™æ ·æ˜¯ä¸ºäº†é¿å…å®Œå…¨ä¸¢å¤±ç‰¹å¾è½¨è¿¹ã€‚</p><h2 id="LSD-SLAM"><a href="#LSD-SLAM" class="headerlink" title="LSD-SLAM"></a>LSD-SLAM</h2><p>å¦‚æœç›¸æœºè·ç¦»ç°æœ‰åœ°å›¾å¤ªè¿œï¼Œåˆ™ä¼šæ ¹æ®æœ€è¿‘è·Ÿè¸ªçš„å›¾åƒåˆ›å»ºä¸€ä¸ªæ–°çš„å…³é”®å¸§ã€‚</p><p>å¯¹å½“å‰å…³é”®å¸§çš„ç›¸å¯¹è·ç¦»å’Œè§’åº¦çš„åŠ æƒç»„åˆè¿›è¡Œé˜ˆå€¼å¤„ç†ï¼š<br>$$<br>dist(\xi_{ji}):=\xi_{ji}^T\mathrm{W}\xi_{ji}<br>$$<br>å…¶ä¸­ï¼Œ$\mathrm{W}$æ˜¯åŒ…å«æƒé‡çš„å¯¹è§’çŸ©é˜µï¼Œè€Œ$\xi_{ji}$æ˜¯ä¸¤å¸§ä¹‹é—´çš„ç›¸ä¼¼å˜æ¢çŸ©é˜µã€‚</p><h2 id="BAD-SLAM"><a href="#BAD-SLAM" class="headerlink" title="BAD SLAM"></a>BAD SLAM</h2><p>æ²¡æœ‰ä½œä¸¥æ ¼çš„ç­›é€‰ï¼Œè€Œæ˜¯æ¯10ç§’å–ä¸€å¸§ä¸ºå…³é”®å¸§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§†è§‰é‡Œç¨‹è®¡æ€»ç»“</title>
      <link href="2023/03/24/slam-learning-4/"/>
      <url>2023/03/24/slam-learning-4/</url>
      
        <content type="html"><![CDATA[<h1 id="è§†è§‰é‡Œç¨‹è®¡æ€»ç»“"><a href="#è§†è§‰é‡Œç¨‹è®¡æ€»ç»“" class="headerlink" title="è§†è§‰é‡Œç¨‹è®¡æ€»ç»“"></a>è§†è§‰é‡Œç¨‹è®¡æ€»ç»“</h1><h2 id="ä»»åŠ¡ç›®æ ‡"><a href="#ä»»åŠ¡ç›®æ ‡" class="headerlink" title="ä»»åŠ¡ç›®æ ‡"></a>ä»»åŠ¡ç›®æ ‡</h2><p>ã€Šè§†è§‰SLAMåå››è®²ã€‹é‡Œé¢ä»‹ç»åˆ°è§†è§‰é‡Œç¨‹è®¡çš„ä»»åŠ¡æ˜¯ï¼š</p><ol><li>ä¼°ç®—ç›¸é‚»å›¾åƒé—´ç›¸æœºçš„è¿åŠ¨</li><li>ä¼°è®¡å±€éƒ¨åœ°å›¾</li></ol><h2 id="åŸºæœ¬æ–¹æ³•"><a href="#åŸºæœ¬æ–¹æ³•" class="headerlink" title="åŸºæœ¬æ–¹æ³•"></a>åŸºæœ¬æ–¹æ³•</h2><p>è§†è§‰é‡Œç¨‹è®¡å¸¸ç”¨çš„æ–¹æ³•æ˜¯ç‰¹å¾ç‚¹æ³•ã€å…‰æµæ³•ã€ç›´æ¥æ³•ã€‚</p><p>ç¬”è€…è®¤ä¸ºè¿™å‡ ç§æ–¹æ³•æœ€æ ¹æœ¬çš„åŒºåˆ«åœ¨è¯¯å·®å‡½æ•°ä¸Šï¼Œæ‰€ä»¥è¿™é‡Œä¸å†ä»æœ€æœ€åŸºç¡€çš„fastè§’ç‚¹ã€ORBç‰¹å¾ç‚¹ã€ç°åº¦ä¸å˜å‡è®¾ç­‰å¼€å§‹ä»‹ç»ï¼Œè¿™äº›å†…å®¹å¯ä»¥é˜…è¯»ã€Šè§†è§‰SLAMåå››è®²ã€‹ã€‚ä¸‹é¢æœ¬æ–‡å°†ç«™åœ¨è¯¯å·®å‡½æ•°çš„è§’åº¦å¯¹è¿™å‡ ç§æ–¹æ³•è¿›è¡Œä»‹ç»ã€‚</p><h3 id="ç‰¹å¾ç‚¹æ³•"><a href="#ç‰¹å¾ç‚¹æ³•" class="headerlink" title="ç‰¹å¾ç‚¹æ³•"></a>ç‰¹å¾ç‚¹æ³•</h3><p>ç‰¹å¾ç‚¹æ³•çš„ç›®æ ‡æ˜¯æœ€å°åŒ–é‡æŠ•å½±è¯¯å·®ï¼Œå³æŠ•å½±åæ ‡å’Œè§‚æµ‹åæ ‡ï¼ˆæ ¹æ®è§‚æµ‹çš„ä½å§¿åšæŠ•å½±ï¼‰çš„å·®ã€‚</p><p>æ¯”å¦‚ï¼Œåœ¨PnPé—®é¢˜ä¸­ï¼Œé‡æŠ•å½±è¯¯å·®ä¸º3Dç‚¹çš„æŠ•å½±ä½ç½®ä¸è§‚æµ‹ä½ç½®çš„å·®ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å…¬å¼è¿›è¡Œè¡¨è¿°ï¼š<br>$$<br>\min_{T} \frac{1}{2} \sum^n_{i-1} |u_i - \frac{1}{s_i}KTP_i|^2_2<br>$$<br>å…¶ä¸­ï¼Œ$T$æ˜¯ç›¸æœºçš„ä½å§¿ï¼Œ$P_i$æ˜¯æŸä¸ªç©ºé—´ç‚¹çš„åæ ‡ï¼ˆåœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹ï¼‰ï¼Œè€Œ$u_i$æ˜¯è¯¥ç‚¹æŠ•å½±çš„åƒç´ åæ ‡ï¼Œ$s_i$ä¸ºè¯¥ç‚¹çš„æ·±åº¦ï¼ˆåœ¨å½“å‰ç›¸æœºåæ ‡ç³»ä¸‹ï¼‰ï¼Œ$K$ä¸ºç›¸æœºå†…å‚ã€‚</p><p>è€Œåœ¨ICPé—®é¢˜ä¸­ï¼Œå¤„ç†çš„éƒ½æ˜¯3Dç‚¹ï¼Œä¸å†æœ‰ç›¸æœºå†…å‚ï¼Œé‡æŠ•å½±è¯¯å·®è¡¨ç°ä¸ºä¸‹é¢çš„å½¢å¼ï¼š<br>$$<br>\min_{R,t} \frac{1}{2} \sum^n_{i-1} | (p_i - (Rp_iâ€™+t)) |^2_2<br>$$<br>å…¶ä¸­ï¼Œ$R,t$ä¸ºç›¸æœºä½å§¿ï¼Œ$p_i$å’Œ$p_iâ€™$ä¸ºé…å¯¹å¥½çš„3Dç‚¹ï¼ˆåœ¨ä¸åŒå¸§çš„ç›¸æœºåæ ‡ç³»ä¸‹ï¼‰ã€‚</p><p>ç‰¹å¾ç‚¹æ³•çš„æ™®éæµç¨‹ä¸ºï¼š</p><ul><li>æå–å›¾åƒç‰¹å¾ç‚¹</li><li>è®¡ç®—ç‰¹å¾ç‚¹çš„æè¿°å­</li><li>é€šè¿‡æè¿°å­åŒ¹é…ç‰¹å¾ç‚¹</li><li>åˆ©ç”¨ä¸‰è§’æµ‹é‡ã€å¯¹æå‡ ä½•ã€PnPã€ICPç­‰ç®—æ³•ä¼°è®¡ç›¸æœºè¿åŠ¨</li></ul><h3 id="å…‰æµæ³•"><a href="#å…‰æµæ³•" class="headerlink" title="å…‰æµæ³•"></a>å…‰æµæ³•</h3><p>å…‰æµæ±‚è§£çš„æ˜¯æœ€å°åŒ–å…‰åº¦è¯¯å·®ï¼Œç›®çš„æ˜¯è·Ÿè¸ªç‰¹å¾ç‚¹çš„è¿åŠ¨ã€‚</p><p>æœ€å°åŒ–å…‰åº¦è¯¯å·®å¯ä»¥è¡¨è¿°ä¸ºä¸‹é¢çš„å½¢å¼ï¼š<br>$$<br>\min_{\Delta x,\Delta y} | I_1(x,y)-I_2(x+\Delta x,y+\Delta y) |^2_2<br>$$<br>å…¶ä¸­$I_1(x,y)$ä¸ºç¬¬ä¸€å¼ å›¾è±¡åœ¨åƒç´ åæ ‡$(x,y)$å¤„çš„åƒç´ å€¼ï¼Œ$I_2(x+\Delta x,y+\Delta y)$ä¸ºç¬¬äºŒå¼ å›¾è±¡åœ¨åƒç´ åæ ‡$(x+\Delta x,y+\Delta y)$å¤„çš„åƒç´ å€¼ã€‚</p><p>å…‰æµæ³•çš„æ™®éæµç¨‹ä¸ºï¼š</p><ul><li>æå–å›¾åƒç‰¹å¾ç‚¹</li><li>æ ¹æ®å…‰æµè·Ÿè¸ªç‰¹å¾ç‚¹çš„è¿åŠ¨ï¼Œé¿å…äº†è®¡ç®—å’ŒåŒ¹é…æè¿°å­çš„è¿‡ç¨‹</li><li>åˆ©ç”¨ä¸‰è§’æµ‹é‡ã€å¯¹æå‡ ä½•ã€PnPã€ICPç­‰ç®—æ³•ä¼°è®¡ç›¸æœºè¿åŠ¨</li></ul><h3 id="ç›´æ¥æ³•"><a href="#ç›´æ¥æ³•" class="headerlink" title="ç›´æ¥æ³•"></a>ç›´æ¥æ³•</h3><p>ç›´æ¥æ³•çš„ä¼˜åŒ–ç›®æ ‡ä¸ºæœ€å°åŒ–å…‰åº¦è¯¯å·®ï¼Œå…·ä½“çš„å…¬å¼å¦‚ä¸‹ï¼š<br>$$<br>\min_{T} J(T)=e_i^Te_i, \quad e_i=I_1(p_{1,i})-I_2(p_{2,i}).<br>$$<br>å…¶ä¸­ï¼Œ$T$ä¸ºç›¸æœºä½å§¿ï¼Œ$I_1(p_{1,i})$ä¸ºç¬¬1å¼ å›¾ç‰‡ä¸Šç‚¹$p_{1,i}$å¤„çš„åƒç´ å€¼ï¼Œ$I_2(p_{2,i})$åŒç†ã€‚</p><p>éœ€è¦æ³¨æ„ï¼Œç‚¹$p_{1,i}$å’Œç‚¹$p_{2,i}$çš„å…³ç³»ä¸ºï¼š<br>$$<br>\begin{align}<br>p_{1,i}=&amp;\frac{1}{Z_1}KP_i, \\<br>p_{2,i}=&amp;\frac{1}{Z_2}K(RP_i+t)= \frac{1}{Z_2}K(TP)_{1:3}<br>\end{align}<br>$$<br>è¿™é‡Œ$K$ä¸ºç›¸æœºä½å§¿ï¼Œ$P_i$ä¸ºå¯¹åº”çš„3Dç‚¹åæ ‡ï¼ˆåœ¨ç¬¬ä¸€å¸§ç›¸æœºåæ ‡ç³»ä¸‹ï¼‰ï¼Œ$R,t$ï¼ˆå¯¹åº”æç¾¤ä¸º$T$ï¼‰ä¸ºç¬¬äºŒå¸§æ—¶ç›¸æœºçš„æ—‹è½¬å’Œå¹³ç§»ï¼Œ$Z_1$ä¸ºç‚¹$P_i$åœ¨ç¬¬ä¸€å¸§ç›¸æœºåæ ‡ç³»ä¸‹çš„æ·±åº¦ï¼Œ$Z_2$åŒç†ã€‚</p><p>ç›´æ¥æ³•çš„æ™®éæµç¨‹ä¸ºï¼š</p><ul><li>æå–å…³é”®ç‚¹æˆ–è€…ç›´æ¥äº§ç”Ÿéšæœºç‚¹</li><li>è€ƒè™‘ç©ºé—´ç‚¹åœ¨ä¸¤å¸§ä¸­çš„åƒç´ ä½ç½®</li><li>å»ºç«‹è¯¯å·®æ¨¡å‹ï¼Œé€šè¿‡è®¡ç®—æœ€å°å…‰åº¦è¯¯å·®æ¥ä¼˜åŒ–ç›¸æœºè¿åŠ¨</li></ul><h2 id="ä»£è¡¨å·¥ä½œ"><a href="#ä»£è¡¨å·¥ä½œ" class="headerlink" title="ä»£è¡¨å·¥ä½œ"></a>ä»£è¡¨å·¥ä½œ</h2><table><thead><tr><th>æ–¹æ³•</th><th>ä»£è¡¨å·¥ä½œ</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>ç‰¹å¾ç‚¹æ³•</td><td>ORB-SLAM</td><td></td></tr><tr><td>å…‰æµæ³•</td><td>VOLDOR-SLAMã€FlowFusionã€VINS-Mono</td><td>å…‰æµä¼¼ä¹ä¸»è¦ç”¨åœ¨åŠ¨æ€åœºæ™¯ä¸‹ï¼Œæˆ–è€…å’Œæ·±åº¦å­¦ä¹ ç»“åˆèµ·æ¥</td></tr><tr><td>ç›´æ¥æ³•</td><td>LSD-SLAMã€DSOã€SVOã€BAD-SLAM</td><td></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ã€ŠDENSE RGB SLAM WITH NEURAL IMPLICIT MAPSã€‹</title>
      <link href="2023/03/19/paper-reading-dim-slam/"/>
      <url>2023/03/19/paper-reading-dim-slam/</url>
      
        <content type="html"><![CDATA[<h1 id="è®ºæ–‡é˜…è¯»ã€ŠDENSE-RGB-SLAM-WITH-NEURAL-IMPLICIT-MAPSã€‹"><a href="#è®ºæ–‡é˜…è¯»ã€ŠDENSE-RGB-SLAM-WITH-NEURAL-IMPLICIT-MAPSã€‹" class="headerlink" title="è®ºæ–‡é˜…è¯»ã€ŠDENSE RGB SLAM WITH NEURAL IMPLICIT MAPSã€‹"></a>è®ºæ–‡é˜…è¯»ã€ŠDENSE RGB SLAM WITH NEURAL IMPLICIT MAPSã€‹</h1><p>æœ¬è®ºæ–‡æå‡ºäº†ä¸€ç§å…·æœ‰ç¥ç»éšå¼æ˜ å°„è¡¨ç¤ºçš„ç¨ å¯†RGB SLAMã€‚è¯¥æ–¹æ¡ˆä¸éœ€è¦æ·±åº¦è¾“å…¥ï¼Œå¹¶ä¸”ä¸éœ€è¦ä»»ä½•é¢„è®­ç»ƒæ¨¡å‹ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡ï¼Œæœ¬æ–‡å¼•å…¥äº†ä¸€ä¸ªåˆ†å±‚çš„ç‰¹å¾ä½“ç§¯æ¥è¾…åŠ©éšå¼åœ°å›¾è§£ç å™¨ï¼Œæœ‰æ•ˆåœ°èåˆä¸åŒå°ºåº¦çš„å½¢çŠ¶çº¿ç´¢ä»¥ä¿ƒè¿›åœ°å›¾é‡å»ºã€‚åŒæ—¶ï¼Œé€šè¿‡åŒ¹é…æ¸²æŸ“å’Œè¾“å…¥è§†é¢‘å¸§æ¥åŒæ—¶è§£å†³ç›¸æœºè¿åŠ¨å’Œç¥ç»éšå¼åœ°å›¾ã€‚ä¸ºäº†æ›´å¥½åœ°çº¦æŸç›¸æœºå§¿æ€å’Œåœºæ™¯å‡ ä½•ï¼Œæœ¬æ–‡è¿›ä¸€æ­¥åœ¨æŸå¤±å‡½æ•°ä¸­åº”ç”¨äº†å…‰åº¦æ›²ç¿˜æŸå¤±ï¼ˆsophisticated warping lossï¼‰ã€‚</p><p><strong>æœ¬æ–‡äº®ç‚¹å¦‚ä¸‹ï¼š</strong></p><ol><li>ç¬¬ä¸€ä¸ªä½¿ç”¨ç¥ç»éšå¼è¡¨è¾¾å®ç°äº†ç¨ å¯†é‡å»ºçš„RGB-SLAMç³»ç»Ÿ</li><li>ä¸éœ€è¦ä»»ä½•é¢„è®­ç»ƒæ¨¡å‹ï¼Œå¦‚å•ç›®æ·±åº¦ä¼°è®¡å’Œå…‰æµï¼Œå°±èƒ½åŒæ—¶ä¼˜åŒ–åœºæ™¯å’Œç›¸æœºä½å§¿ã€‚</li><li>ç›¸æœºä½å§¿çš„å‡†ç¡®åº¦è¶…è¿‡äº†ä»¥å‰çš„æ–¹æ³•å¹¶ä¸”ç”šè‡³è¶…è¿‡äº†ä¸€äº›æœ€æ–°çš„RGB-D SLAMæ–¹æ³•ã€‚</li></ol><h2 id="ç³»ç»Ÿæ¦‚è¿°"><a href="#ç³»ç»Ÿæ¦‚è¿°" class="headerlink" title="ç³»ç»Ÿæ¦‚è¿°"></a>ç³»ç»Ÿæ¦‚è¿°</h2><p><img src="/images/paper-reading-dim-slam/image-20230310220512566.png"></p><p>ç»™å®šRGBè§†é¢‘ä½œä¸ºè¾“å…¥ï¼Œæœ¬æ–‡çš„æ–¹æ³•æ—¨åœ¨åŒæ—¶æ¢å¤3Dåœºæ™¯å›¾å’Œç›¸æœºè¿åŠ¨ã€‚é€šè¿‡å…·æœ‰å¯å­¦ä¹ çš„å¤šåˆ†è¾¨ç‡ç‰¹å¾ä½“ç§¯çš„ç¥ç»éšå¼å‡½æ•°æ¥è¡¨ç¤ºåœºæ™¯å›¾ã€‚é€šè¿‡æ²¿ç€è§†å›¾å…‰çº¿ä»ä½“ç§¯ç½‘æ ¼ä¸­é‡‡æ ·ç‰¹å¾ï¼Œå¹¶ä½¿ç”¨MLPè§£ç å™¨æŸ¥è¯¢é‡‡æ ·ç‰¹å¾ï¼Œå¯ä»¥åœ¨ç»™å®šä¼°è®¡çš„ç›¸æœºå‚æ•°çš„æƒ…å†µä¸‹æ¸²æŸ“æ¯ä¸ªåƒç´ çš„æ·±åº¦å’Œé¢œè‰²ã€‚ç”±äºæ­¤æ¸²æŸ“è¿‡ç¨‹æ˜¯å¯åŒºåˆ†çš„ï¼Œå› æ­¤å¯ä»¥é€šè¿‡æœ€å°åŒ–åœ¨å…‰åº¦æ¸²æŸ“æŸå¤±å’Œç¿˜æ›²æŸå¤±ä¸Šå®šä¹‰çš„ç›®æ ‡å‡½æ•°æ¥åŒæ—¶ä¼˜åŒ–ç¥ç»éšå¼è´´å›¾ä»¥åŠç›¸æœºå§¿åŠ¿ã€‚</p><h3 id="IMPLICIT-MAP-REPRESENTATION"><a href="#IMPLICIT-MAP-REPRESENTATION" class="headerlink" title="IMPLICIT MAP REPRESENTATION"></a>IMPLICIT MAP REPRESENTATION</h3><p>è¿™éƒ¨åˆ†å’ŒNICE-SLAMå·®ä¸å¤šï¼Œçœç•¥äº†ã€‚</p><h3 id="JOINT-OPTIMIZATION"><a href="#JOINT-OPTIMIZATION" class="headerlink" title="JOINT OPTIMIZATION"></a>JOINT OPTIMIZATION</h3><blockquote><p>è¿™é‡Œåº”è¯¥æ˜¯è¿™ä¸ªå·¥ä½œæœ€å…³é”®çš„åœ°æ–¹</p><p>æœ¬æ–‡ç”¨çš„æŸå¤±å‡½æ•°å’Œå•ç›®æ·±åº¦ä¼°è®¡çš„ä¸€äº›å·¥ä½œæ¯”è¾ƒç›¸ä¼¼</p></blockquote><p>æœ¬æ–‡æ‰€ä½¿ç”¨çš„æŸå¤±å‡½æ•°ç”±ä¸‰ç§æŸå¤±æ„æˆï¼š</p><ul><li><p>Photometric Rendering Lossï¼š</p><p><img src="/images/paper-reading-dim-slam/image-20230319161744607.png"></p></li><li><p>PhotometricWarping Lossï¼š</p><p><img src="/images/paper-reading-dim-slam/image-20230319162048410.png"></p></li><li><p>Regularization Lossï¼š</p><p><img src="/images/paper-reading-dim-slam/image-20230319162109708-16792140906562.png"></p></li></ul><p>æœ€ç»ˆè¦ä¼˜åŒ–çš„ç›®æ ‡å‡½æ•°ä¸ºï¼š</p><p><img src="/images/paper-reading-dim-slam/image-20230319162157530.png"></p><h3 id="System"><a href="#System" class="headerlink" title="System"></a>System</h3><p>æœ¬èŠ‚ä»‹ç»äº†æ„å»ºå®Œæ•´çš„è§†è§‰SLAMç³»ç»Ÿçš„å‡ ä¸ªå…³é”®ç»„ä»¶ã€‚</p><p><strong>åˆå§‹åŒ–</strong>    å½“æ”¶é›†åˆ°ä¸€å°ç»„å¸§ï¼ˆåœ¨æœ¬æ–‡æ‰€æœ‰çš„å®éªŒä¸­ä¸º 13 å¸§ï¼‰æ—¶æ‰§è¡Œåˆå§‹åŒ–ã€‚ ç¬¬ä¸€å¸§çš„å§¿åŠ¿è®¾ç½®ä¸ºå•ä½çŸ©é˜µã€‚ ç„¶åå‰©ä½™å¸§çš„å§¿åŠ¿ä» Ni è¿­ä»£çš„ç›®æ ‡å‡½æ•°ä¸­ä¼˜åŒ–ã€‚ åˆå§‹åŒ–åï¼Œç¬¬ä¸€å¸§è¢«æ·»åŠ åˆ°å…¨å±€å…³é”®å¸§é›†ä¸­å¹¶å›ºå®šã€‚ MLP è§£ç å™¨çš„å‚æ•°åœ¨åˆå§‹åŒ–åä¹Ÿæ˜¯å›ºå®šçš„ã€‚</p><blockquote><p>åˆå§‹åŒ–è¿™ä¸€æ­¥åº”è¯¥ç±»ä¼¼ä¼ ç»Ÿçš„å•ç›®SLAMï¼Œç›®çš„æ˜¯å¾—åˆ°å°ºåº¦å’Œä¸–ç•Œåæ ‡ç³»ï¼Ÿ</p><p>å¦å¤–ï¼Œè§£ç å™¨æ˜¯MLPç½‘ç»œï¼Œè€Œç¼–ç å™¨æ˜¯Nerfé‡Œé‚£ç§Positional encodingï¼Ÿ</p></blockquote><p><strong>çª—å£ä¼˜åŒ–</strong>    åœ¨æ‘„åƒæœºè·Ÿè¸ªæœŸé—´ï¼Œæœ¬æ–‡çš„æ–¹æ³•å§‹ç»ˆä¿æŒæ´»åŠ¨å¸§çš„çª—å£ï¼ˆåœ¨æœ¬æ–‡çš„æ‰€æœ‰å®éªŒä¸­ä¸º 21 å¸§ï¼‰ã€‚ æ´»åŠ¨å¸§åŒ…æ‹¬ä¸¤ç§ä¸åŒç±»å‹ï¼šå±€éƒ¨çª—å£å¸§å’Œå…¨å±€å…³é”®å¸§ã€‚ å¯¹äºå¸§ kï¼Œæœ¬æ–‡å°†ç´¢å¼•ä» k âˆ’ 5 åˆ° k + 5 çš„å¸§è§†ä¸ºå±€éƒ¨çª—å£å¸§ã€‚ æœ¬æ–‡è¿›ä¸€æ­¥ä»å…¨å±€å…³é”®å¸§é›†ä¸­é‡‡æ · 10 ä¸ªå…³é”®å¸§ã€‚ å…·ä½“æ¥è¯´ï¼Œæœ¬æ–‡åœ¨å¸§ k ä¸Šéšæœºç»˜åˆ¶ 100 ä¸ªåƒç´ ï¼Œå¹¶ä½¿ç”¨ä¼°è®¡çš„ç›¸æœºä½å§¿ P å’Œæ·±åº¦ D å°†å®ƒä»¬æŠ•å½±åˆ°æ‰€æœ‰å…³é”®å¸§ã€‚ ç„¶åï¼Œæœ¬æ–‡é€šè¿‡è®¡ç®—æŠ•å½±åœ¨è¿™äº›å…³é”®å¸§è¾¹ç•Œå†…çš„åƒç´ çš„ç™¾åˆ†æ¯”æ¥è¯„ä¼°è§†å›¾é‡å ç‡ã€‚ ä¹‹åï¼Œæœ¬æ–‡ä»é‡å ç‡è¶…è¿‡ 70% çš„å…³é”®å¸§ä¸­éšæœºé€‰æ‹© 10 ä¸ªå…³é”®å¸§æ¥æ„æˆå…¨å±€å…³é”®å¸§é›†ã€‚ ç„¶åï¼Œæ‰€æœ‰è¿™äº›æ´»åŠ¨å¸§éƒ½ç”¨äºä¼˜åŒ–éšå¼åœºæ™¯è¡¨ç¤ºå’Œ N_w æ¬¡è¿­ä»£çš„å§¿åŠ¿ã€‚ çª—å£ä¼˜åŒ–åï¼Œæœ€æ—§çš„å±€éƒ¨å¸§ k-5 è¢«åˆ é™¤ï¼Œä¸€ä¸ªæ–°çš„å…·æœ‰ç­‰é€Ÿè¿åŠ¨æ¨¡å‹çš„ k+6 å¸§è¢«æ·»åŠ åˆ°å±€éƒ¨çª—å£å¸§çš„é›†åˆä¸­ã€‚åœ¨è·Ÿè¸ªæœŸé—´ï¼Œæ‰€æœ‰å…¨å±€å…³é”®å¸§çš„ç›¸æœºå§¿åŠ¿éƒ½æ˜¯å›ºå®šçš„ã€‚è¯·å‚é˜…é™„å½•ä¸­æœ‰å…³çª—å£ä¼˜åŒ–çš„ä¸¤ä¸ªçº¿ç¨‹æƒ…å†µä¸‹çš„æ˜ å°„ã€‚</p><blockquote><p>åº”è¯¥æ˜¯æ¯”è¾ƒå¸¸è§çš„æ–¹æ³•</p></blockquote><p><strong>å…³é”®å¸§é€‰æ‹©</strong>    éµå¾ªç±»ä¼¼äºiMAPå’ŒNICE-SLAMçš„ç®€å•å…³é”®å¸§é€‰æ‹©æœºåˆ¶ã€‚å…·ä½“æ¥è¯´ï¼Œå¦‚æœè§†é‡å‘ç”Ÿæ˜¾è‘—å˜åŒ–ï¼Œåˆ™ä¼šæ·»åŠ ä¸€ä¸ªæ–°çš„å…³é”®å¸§ã€‚</p><h2 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h2><p><strong>Q1ï¼šè®­ç»ƒNerféœ€è¦çš„è¾“å…¥æ˜¯ä»€ä¹ˆï¼Ÿéœ€è¦æ·±åº¦å—ï¼Ÿ</strong></p><p>è®­ç»ƒNeRFçš„è¾“å…¥æ•°æ®æ˜¯ï¼šä»ä¸åŒä½ç½®æ‹æ‘„åŒä¸€åœºæ™¯çš„å›¾ç‰‡ï¼Œæ‹æ‘„è¿™äº›å›¾ç‰‡çš„ç›¸æœºä½å§¿ã€ç›¸æœºå†…å‚ï¼Œä»¥åŠåœºæ™¯çš„èŒƒå›´ã€‚è‹¥å›¾åƒæ•°æ®é›†ç¼ºå°‘ç›¸æœºå‚æ•°çœŸå€¼ï¼Œä½œè€…ä¾¿ä½¿ç”¨ç»å…¸SfMé‡å»ºè§£å†³æ–¹æ¡ˆ<a href="https://colmap.github.io/">COLMAP</a>ä¼°è®¡äº†éœ€è¦çš„å‚æ•°ï¼Œå½“ä½œçœŸå€¼ä½¿ç”¨ã€‚</p><p><strong>Q2ï¼šNerfçš„æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>NeRFé‡Œçš„äº”ç»´å‘é‡ï¼ˆä½ç½®+è§†è§’ï¼‰æ˜¯æŒ‡ä»ç›¸æœºåŸç‚¹å‡ºå‘çš„ä¸€æ¡å°„çº¿ä¸Šçš„ç‚¹å’Œå°„çº¿çš„æ–¹å‘ï¼ˆå˜æ¢åˆ°ä¸–ç•Œåæ ‡ç³»ï¼‰ï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼ŒNeRFæ•´ä¸ªæµç¨‹åº”è¯¥æ˜¯ä¸‹é¢è¿™æ ·ï¼š</p><ul><li>æ•°æ®é¢„å¤„ç†ï¼šæ ¹æ®æ‰€æœ‰å›¾åƒæ•°æ®ï¼Œå¾—åˆ°ç›¸æœºå†…å‚ï¼ˆç„¦è·ï¼Œ1ä¸ªå‚æ•°ï¼‰ã€ç›¸æœºä½å§¿ï¼ˆåæ ‡å˜æ¢ï¼Œ12ä¸ªå‚æ•°ï¼‰å’Œç¨€ç–3Dç‚¹ï¼ˆæ¨ç†ç‰©ä½“ç¦»ç›¸æœºæœ€è¿‘å’Œæœ€è¿œè·ç¦»ï¼Œ2ä¸ªå‚æ•°ï¼‰ï¼Œç»™æ¯å¼ å›¾åƒèµ‹äºˆ17ä¸ªå‚æ•°ï¼ˆ1+12+2+2ï¼Œå…¶ä¸­æœ€åä¸€ä¸ª2ä¸ºå›¾åƒçš„é•¿å®½ï¼‰</li><li>è®­ç»ƒï¼šå‡†å¤‡å¥½å›¾åƒï¼ˆç”¨äºæä¾›realåƒç´ å€¼ï¼‰å’Œ17ä¸ªå‚æ•°ï¼Œæ ¹æ®ç›¸æœºä½å§¿å’Œç›¸æœºç„¦è·å¾—åˆ°æˆåƒå¹³é¢ï¼Œå¹¶æ ¹æ®å›¾åƒçš„é•¿å®½é™åˆ¶æˆåƒèŒƒå›´ã€‚å–æˆåƒå¹³é¢ä¸­æŸä¸€ä½ç½®ï¼ˆå¯¹åº”çš„realåƒç´ å€¼æ˜¯å·²çŸ¥çš„ï¼‰ï¼Œä¸ç›¸æœºä½ç½®çš„è¿çº¿æ„æˆä¸€æ¡å°„çº¿ï¼Œå¾—åˆ°äºŒç»´çš„è§†è§’å‚æ•°ï¼Œåœ¨æœ€è¿‘å’Œæœ€è¿œè·ç¦»å†…é‡‡æ · n ä¸ªç‚¹ï¼Œå¾—åˆ°ä¸‰ç»´çš„ä½ç½®å‚æ•°ï¼Œæ„æˆnä¸ªäº”ç»´å‘é‡ã€‚ç„¶åæ ¹æ®ç›¸æœºä½å§¿å‚æ•°è½¬åŒ–åˆ°ä¸–ç•Œåæ ‡ç³»ï¼Œé€å…¥MLPä¸­ï¼Œé¢„æµ‹æ¯ä¸ªç‚¹çš„rgbå’Œsigmaï¼Œæ­¤æ—¶å¹¶ä¸ä¼šç›´æ¥å¯¹é‡‡æ ·ç‚¹è¿›è¡Œç›‘ç£ï¼Œè€Œæ˜¯æ ¹æ®ä½“æ¸²æŸ“å¾—åˆ°fakeåƒç´ å€¼ï¼Œé€šè¿‡realå’Œfakeä¹‹é—´çš„è¯¯å·®æ¥ç›‘ç£è®­ç»ƒã€‚</li><li>æµ‹è¯•ï¼šåªè¦äº‹å…ˆç¡®å®š17ä¸ªå‚æ•°ï¼Œå…¶ä»–æ­¥éª¤å’Œè®­ç»ƒç±»ä¼¼ã€‚</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒåŸå§‹çš„nerfä»£ç å‡è®¾å…‰å¿ƒåç§»é‡æ˜¯H/2, W/2ã€‚å¦å¤–ï¼Œå®é™…ä»£ç å®ç°çš„æ—¶å€™ï¼Œè§†è§’ç”¨çš„æ˜¯ä¸‰ç»´çš„æ–¹å‘å‘é‡è¡¨ç¤ºã€‚</p><p><strong>Q3ï¼šNerfã€iMAPã€NICE-SLAMã€DIM-SLAMåœ¨æŸå¤±å‡½æ•°ä¸Šçš„åŒºåˆ«</strong></p><p><strong>Nerfï¼š</strong>æŸå¤±å‡½æ•°æ˜¯ç²—ç•¥å’Œç²¾ç»†æ¸²æŸ“çš„æ¸²æŸ“åƒç´ é¢œè‰²å’ŒçœŸå®åƒç´ é¢œè‰²ä¹‹é—´çš„æ€»å¹³æ–¹è¯¯å·®ã€‚</p><p><img src="/images/paper-reading-dim-slam/image-20220819213135323.png"></p><p><strong>iMAPï¼š</strong>å…‰åº¦æŸå¤±æ˜¯æ¸²æŸ“å’Œæµ‹é‡é¢œè‰²å€¼ä¹‹é—´çš„L1èŒƒæ•°ï¼›</p><p><img src="/images/paper-reading-dim-slam/image-20220830225657705.png"></p><p>å‡ ä½•æŸå¤±æµ‹é‡æ·±åº¦å·®å¼‚ï¼Œå¦å¤–è¿˜ä½¿ç”¨æ·±åº¦æ–¹å·®ä½œä¸ºå½’ä¸€åŒ–å› å­ï¼Œåœ¨å¯¹è±¡è¾¹ç•Œç­‰ä¸ç¡®å®šåŒºåŸŸé™ä½æŸå¤±ã€‚</p><p><img src="/images/paper-reading-dim-slam/image-20220830225809862.png"></p><p>æœ€ç»ˆä¼˜åŒ–çš„ç›®æ ‡å‡½æ•°æ˜¯è¿™ä¸¤ä¸ªæŸå¤±çš„åŠ æƒå’Œï¼š</p><p><img src="/images/paper-reading-dim-slam/image-20220830225854970.png"></p><p><strong>NICE-SLAMï¼š</strong>å‡ ä½•æŸå¤±åªæ˜¯åœ¨ç²—ç³™å±‚å’Œç²¾ç»†å±‚ä¸Šè§‚æµ‹æ·±åº¦å’Œé¢„æµ‹æ·±åº¦ä¹‹é—´çš„L1æŸå¤±ï¼›</p><p><img src="/images/paper-reading-dim-slam/image-20220830110038114.png"></p><p>å…‰åº¦æŸå¤±æ˜¯Mä¸ªé‡‡æ ·åƒç´ ç‚¹ä¸Šæ¸²æŸ“é¢œè‰²å’Œè§‚æµ‹é¢œè‰²å€¼ä¹‹é—´çš„ä¸€ä¸ªL1æŸå¤±ã€‚</p><p><img src="/images/paper-reading-dim-slam/image-20220830110106917.png"></p><p>æœ€ç»ˆä¼˜åŒ–çš„ç›®æ ‡å‡½æ•°ä¸ºï¼š</p><p><img src="/images/paper-reading-dim-slam/image-20220830110419117.png"></p><p><strong>DIM-SLAMï¼š</strong>è§æœ¬æ–‡çš„[JOINT OPTIMIZATION](#JOINT OPTIMIZATION)éƒ¨åˆ†ã€‚</p><p><strong>Q4ï¼šNICE-SLAMã€Nerfç­‰å·¥ä½œæ˜¯å¦‚ä½•æ²¿ç€ç›¸æœºå°„çº¿è¿›è¡Œé‡‡æ ·çš„ï¼Œæ·±åº¦dè¦å¦‚ä½•ç¡®å®šï¼Ÿ</strong></p><p>TODOï¼Œè¿™é‡Œå®Œå…¨ä¸äº†è§£ã€‚ã€‚ã€‚</p><hr><p>åˆ†äº«ä¸¤ç¯‡æ–‡ç« ï¼š</p><ul><li>æ·±åº¦å­¦ä¹ ä¹‹å•ç›®æ·±åº¦ä¼°è®¡ (Chapter.1)ï¼šåŸºç¡€ç¯‡ - æ¡”å­æ¯›çš„æ–‡ç«  - çŸ¥ä¹ <a href="https://zhuanlan.zhihu.com/p/29864012">https://zhuanlan.zhihu.com/p/29864012</a></li><li>æ·±åº¦å­¦ä¹ ä¹‹å•ç›®æ·±åº¦ä¼°è®¡ (Chapter.2)ï¼šæ— ç›‘ç£å­¦ä¹ ç¯‡ - æ¡”å­æ¯›çš„æ–‡ç«  - çŸ¥ä¹ <a href="https://zhuanlan.zhihu.com/p/29968267">https://zhuanlan.zhihu.com/p/29968267</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ã€ŠORB-SLAM2ï¼šan Open-Source SLAM System for Monocular, Stereo and RGB-D Camerasã€‹</title>
      <link href="2023/03/07/paper-reading-orb-slam2/"/>
      <url>2023/03/07/paper-reading-orb-slam2/</url>
      
        <content type="html"><![CDATA[<h1 id="è®ºæ–‡é˜…è¯»ã€ŠORB-SLAM2-an-Open-Source-SLAM-System-for-Monocular-Stereo-and-RGB-D-Camerasã€‹"><a href="#è®ºæ–‡é˜…è¯»ã€ŠORB-SLAM2-an-Open-Source-SLAM-System-for-Monocular-Stereo-and-RGB-D-Camerasã€‹" class="headerlink" title="è®ºæ–‡é˜…è¯»ã€ŠORB-SLAM2: an Open-Source SLAM System for Monocular, Stereo and RGB-D Camerasã€‹"></a>è®ºæ–‡é˜…è¯»ã€ŠORB-SLAM2: an Open-Source SLAM System for Monocular, Stereo and RGB-D Camerasã€‹</h1><p>æœ¬æ–‡æå‡ºäº†ORB-SLAM2ï¼Œå®ƒæ˜¯åŸºäºå•ç›®ã€åŒç›®æˆ–RGB-Dç›¸æœºçš„ä¸€ä¸ªå®Œæ•´çš„SLAMç³»ç»Ÿï¼Œå…¶ä¸­åŒ…æ‹¬åœ°å›¾é‡ç”¨ã€å›ç¯æ£€æµ‹å’Œé‡å®šä½åŠŸèƒ½ã€‚</p><h2 id="å‰ç½®å·¥ä½œORB-SLAM"><a href="#å‰ç½®å·¥ä½œORB-SLAM" class="headerlink" title="å‰ç½®å·¥ä½œORB-SLAM"></a>å‰ç½®å·¥ä½œORB-SLAM</h2><p>åŸºäºåŒç›®å’ŒRGB-Dç›¸æœºçš„ORB-SLAM2æ˜¯å»ºç«‹åœ¨åŸºäºç‰¹å¾çš„å•ç›®ORB-SLAMçš„åŸºç¡€ä¸Šçš„ã€‚æ‰€ä»¥ï¼Œè¿™é‡Œé¦–å…ˆå›é¡¾ä¸€ä¸‹å‰ç½®å·¥ä½œ ORB-SLAMã€‚</p><img src="/images/paper-reading-orb-slam2/orb-slam.png" style="zoom: 50%;"><p>ORB-SLAMç³»ç»Ÿæ¦‚è¿°ï¼Œæ˜¾ç¤ºäº†è·Ÿè¸ªï¼Œå±€éƒ¨å»ºå›¾å’Œå›ç¯æ£€æµ‹è¿™ä¸‰ä¸ªçº¿ç¨‹æ‰§è¡Œçš„æ‰€æœ‰æ­¥éª¤ã€‚è¿˜æ˜¾ç¤ºäº†åœ°ç‚¹è¯†åˆ«æ¨¡å—å’Œåœ°å›¾çš„ä¸»è¦ç»„ä»¶ã€‚</p><ul><li><p>è·Ÿè¸ª</p><p>è´Ÿè´£å¯¹æ¯ä¸€å¸§æ‘„åƒæœºè¿›è¡Œå®šä½ï¼Œå¹¶å†³å®šä½•æ—¶æ’å…¥ä¸€ä¸ªæ–°çš„å…³é”®å¸§ã€‚é¦–å…ˆä¸å‰ä¸€å¸§è¿›è¡Œåˆå§‹ç‰¹å¾åŒ¹é…ï¼Œå¹¶ä½¿ç”¨çº¯è¿åŠ¨çš„BAä¼˜åŒ–å§¿åŠ¿ã€‚å¦‚æœè·Ÿè¸ªä¸¢å¤±ï¼ˆä¾‹å¦‚ç”±äºé®æŒ¡æˆ–çªç„¶çš„ç§»åŠ¨ï¼‰ï¼Œåˆ™ä½¿ç”¨åœ°ç‚¹è¯†åˆ«æ¨¡å—æ¥è¿›è¡Œå…¨å±€é‡æ–°å®šä½ã€‚ä¸€æ—¦æœ‰äº†å¯¹æ‘„åƒæœºå§¿åŠ¿å’Œç‰¹å¾åŒ¹é…çš„åˆæ­¥ä¼°è®¡ï¼Œå°±ä¼šä½¿ç”¨ç³»ç»Ÿç»´æŠ¤çš„å…³é”®å¸§çš„å…±å­˜å›¾æ¥æ£€ç´¢å±€éƒ¨å¯è§å›¾ã€‚ç„¶åï¼Œé€šè¿‡é‡æ–°æŠ•å½±å¯»æ‰¾ä¸æœ¬åœ°åœ°å›¾ç‚¹çš„åŒ¹é…ï¼Œå¹¶é€šè¿‡æ‰€æœ‰çš„åŒ¹é…å†æ¬¡ä¼˜åŒ–æ‘„åƒæœºçš„å§¿åŠ¿ã€‚æœ€åï¼Œè·Ÿè¸ªçº¿ç¨‹å†³å®šæ˜¯å¦æ’å…¥ä¸€ä¸ªæ–°çš„å…³é”®å¸§ã€‚</p></li><li><p>å±€éƒ¨å»ºå›¾</p><p>å¤„ç†æ–°çš„å…³é”®å¸§å¹¶æ‰§è¡Œå±€éƒ¨BAï¼Œä»¥åœ¨ç›¸æœºå§¿æ€çš„å‘¨å›´ç¯å¢ƒä¸­å®ç°æœ€ä½³é‡å»ºã€‚æ–°å…³é”®å¸§ä¸­æœªåŒ¹é…ORBçš„æ–°å¯¹åº”å…³ç³»åœ¨å…±è§†æ€§å›¾ä¸­çš„è¿æ¥å…³é”®å¸§ä¸­æœç´¢ï¼Œä»¥ä¸‰è§’åŒ–æ–°ç‚¹ã€‚åˆ›å»ºåä¸€æ®µæ—¶é—´ï¼ŒåŸºäºè·Ÿè¸ªæœŸé—´æ”¶é›†çš„ä¿¡æ¯ï¼Œåº”ç”¨ç´§æ€¥ç‚¹å‰”é™¤ç­–ç•¥ï¼Œä»¥ä¾¿ä»…ä¿ç•™é«˜è´¨é‡ç‚¹ã€‚å±€éƒ¨æ˜ å°„è¿˜è´Ÿè´£å‰”é™¤å†—ä½™å…³é”®å¸§ã€‚</p></li><li><p>å›ç¯æ£€æµ‹</p><p>åœ¨æ¯ä¸ªæ–°çš„å…³é”®å¸§ä¸­æœç´¢å›ç¯ã€‚å¦‚æœæ£€æµ‹åˆ°ä¸€ä¸ªå›ç¯ï¼Œå°±è®¡ç®—ä¸€ä¸ªç›¸ä¼¼æ€§å˜æ¢ï¼Œå¾—åˆ°å›ç¯ä¸­ç§¯ç´¯çš„æ¼‚ç§»ã€‚ç„¶åï¼Œå›ç¯çš„ä¸¤è¾¹è¢«å¯¹é½ï¼Œé‡å¤çš„ç‚¹è¢«èåˆã€‚æœ€åï¼Œå¯¹ç›¸ä¼¼æ€§çº¦æŸè¿›è¡Œå§¿åŠ¿å›¾ä¼˜åŒ–ï¼Œä»¥å®ç°å…¨å±€ä¸€è‡´æ€§ã€‚ä¸»è¦çš„åˆ›æ–°ä¹‹å¤„åœ¨äºï¼Œæˆ‘ä»¬åœ¨åŸºæœ¬å›¾ä¸Šè¿›è¡Œä¼˜åŒ–ï¼Œè¿™æ˜¯ä¸€ä¸ªæ›´ç¨€ç–çš„å…±å­˜å›¾å­å›¾ã€‚</p></li></ul><blockquote><p>orb-slamæ›´å…·ä½“çš„ç»†èŠ‚è¿˜æ˜¯çœ‹è®ºæ–‡å’Œä»£ç ï¼Œè®ºæ–‡æŠŠè¿™ä¸ªå·¥ä½œè®²å¾—ç‰¹åˆ«è¯¦ç»†ï¼ï¼ï¼</p><p>é˜…è¯»orb-slam2çš„ä»£ç æœ‰é—®é¢˜æ—¶ï¼Œä¹Ÿå¯ä»¥å†å›æ¥çœ‹è¿™ä¸¤ç¯‡è®ºæ–‡ï¼Œå¸®åŠ©æŒºå¤§çš„ã€‚</p></blockquote><h2 id="ORB-SLAM2çš„ç³»ç»Ÿæ¶æ„"><a href="#ORB-SLAM2çš„ç³»ç»Ÿæ¶æ„" class="headerlink" title="ORB-SLAM2çš„ç³»ç»Ÿæ¶æ„"></a>ORB-SLAM2çš„ç³»ç»Ÿæ¶æ„</h2><p><img src="/images/paper-reading-orb-slam2/orb-slam2.png"></p><p>ORB-SLAM2ç”±ä¸‰ä¸ªä¸»è¦çš„å¹¶è¡Œçº¿ç¨‹ç»„æˆï¼šè·Ÿè¸ªã€å±€éƒ¨å»ºå›¾å’Œå›ç¯æ£€æµ‹ã€‚åœ¨å›ç¯æ£€æµ‹åä¼šæ‰§è¡Œç¬¬å››ä¸ªçº¿ç¨‹ï¼Œè¿›è¡Œå…¨å±€BAã€‚è·Ÿè¸ªçº¿ç¨‹ä¼šå¯¹åŒç›®å’ŒRGB-Dè¾“å…¥è¿›è¡Œé¢„å¤„ç†ï¼Œä»è€Œä½¿å¾—ç³»ç»Ÿå…¶å®ƒéƒ¨åˆ†å¯ä»¥ç‹¬ç«‹äºè¾“å…¥ä¼ æ„Ÿå™¨è¿è¡Œã€‚è™½ç„¶è¿™å¼ å›¾æ²¡æœ‰å±•ç¤ºï¼Œä½†ORB-SLAM2ä¹Ÿå¯ä»¥åŸºäºå•ç›®è¾“å…¥è¿è¡Œã€‚</p><p>è¯¥ç³»ç»Ÿå…·æœ‰ä¸‰ä¸ªä¸»è¦çš„å¹¶è¡Œçº¿ç¨‹ï¼š</p><p>1ï¼‰è·Ÿè¸ªçº¿ç¨‹æ˜¯ç”¨æ¥åœ¨æ¯ä¸€å¸§ä¸­å®šä½ç›¸æœºçš„ä½ç½®ï¼Œé€šè¿‡åŒ¹é…ç‰¹å¾å’Œå±€éƒ¨åœ°å›¾å¹¶ä¸”è¿›è¡Œè¿åŠ¨BAï¼ˆmotion-only BAï¼‰æœ€å°åŒ–é‡æŠ•å½±è¯¯å·®ï¼›</p><p>2ï¼‰å±€éƒ¨å»ºå›¾çº¿ç¨‹æ˜¯ç”¨æ¥ç®¡ç†å’Œä¼˜åŒ–å±€éƒ¨åœ°å›¾ï¼›</p><p>3ï¼‰å›ç¯æ£€æµ‹çº¿ç¨‹æ˜¯ç”¨æ¥æ£€æµ‹å¤§å›ç¯ï¼Œå¹¶é€šè¿‡æ‰§è¡Œä½å§¿å›¾ä¼˜åŒ–æ¥ä¿®æ­£ç´¯ç§¯è¯¯å·®ã€‚è¯¥çº¿ç¨‹åœ¨ä½å§¿å›¾ä¼˜åŒ–åä¼šå¯åŠ¨ç¬¬å››ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œå…¨å±€BAï¼Œè®¡ç®—æœ€ä¼˜çš„ç»“æ„å’Œè¿åŠ¨ç»“æœã€‚</p><p>è¯¥ç³»ç»ŸåµŒå…¥äº†ä¸€ä¸ªåŸºäºDBoW2 çš„ä½ç½®è¯†åˆ«æ¨¡å—ï¼Œåœ¨å‘ç”Ÿè·Ÿè¸ªå¤±è´¥ï¼ˆä¾‹å¦‚ï¼šç¢°æ’ï¼‰æˆ–è€…åœ¨å»ºå¥½å›¾çš„åœºæ™¯ä¸­é‡æ–°åˆå§‹åŒ–æ—¶ç”¨æ¥è¿›è¡Œé‡å®šä½ï¼Œä»¥åŠç”¨æ¥è¿›è¡Œå›ç¯æ£€æµ‹ã€‚è¯¥ç³»ç»Ÿç»´æŠ¤äº†ä¸€ä¸ªå…³è”å¯è§åœ°å›¾ï¼ˆconvisible mapï¼‰ï¼Œæ­¤åœ°å›¾å°†æ¯ä¸¤ä¸ªè§‚å¯Ÿåˆ°ç›¸åŒåœ°å›¾ç‚¹çš„å…³é”®å¸§è¿æ¥åˆ°ä¸€èµ·ï¼›åŒæ—¶è¯¥ç³»ç»Ÿä¹Ÿç»´æŠ¤äº†ä¸€ä¸ªæœ€å°ç”Ÿæˆæ ‘ï¼Œå®ƒè¿æ¥äº†æ‰€æœ‰çš„å…³é”®å¸§ã€‚è¿™ç§åœ°å›¾ç»“æ„å®ç°äº†å¯¹äºå…³é”®å¸§å±€éƒ¨çª—çš„æ£€ç´¢ï¼Œå› æ­¤è·Ÿè¸ªçº¿ç¨‹å’Œå±€éƒ¨å»ºå›¾çº¿ç¨‹å¯ä»¥å±€éƒ¨åœ°è¿è¡Œï¼Œä½¿å…¶å¯ä»¥åœ¨å¤§åœºæ™¯ä¸­å·¥ä½œï¼›åŒæ—¶è¯¥ç»“æ„åœ¨å›ç¯é—­åˆè¿›è¡Œä½å§¿å›¾ä¼˜åŒ–æ—¶ï¼Œä¹Ÿå¯ä½œä¸ºä¼˜åŒ–çš„å›¾ç»“æ„ã€‚</p><h2 id="åŸºäºORB-SLAMè¿›è¡Œçš„å·¥ä½œ"><a href="#åŸºäºORB-SLAMè¿›è¡Œçš„å·¥ä½œ" class="headerlink" title="åŸºäºORB-SLAMè¿›è¡Œçš„å·¥ä½œ"></a>åŸºäºORB-SLAMè¿›è¡Œçš„å·¥ä½œ</h2><p>è¿™ç¯‡è®ºæ–‡åé¢ä¸»è¦ä»‹ç»åœ¨ORB-SLAMåŸºç¡€ä¸Šè¿›è¡Œçš„å·¥ä½œï¼Œå³å¦‚ä½•ä½¿ç”¨åŒç›®/æ·±åº¦ä¿¡æ¯ï¼Œä»¥åŠç³»ç»Ÿçš„å“ªäº›éƒ¨åˆ†å°†ä¼šè¢«å½±å“ã€‚</p><p><strong>TRACKINGéƒ¨åˆ†</strong></p><p>ORB-SLAMåœ¨åˆå§‹åŒ–çš„æ—¶å€™æ˜¯è®¡ç®—ä¸¤å¸§ä¹‹é—´çš„ç›¸å¯¹poseï¼Œç„¶åç”¨ä¸‰è§’æµ‹é‡çš„æ–¹å¼åˆå§‹åŒ–åœ°å›¾ç‚¹é›†ï¼Œå®ƒåŒæ—¶è®¡ç®—äº†ä¸¤ä¸ªæ¨¡å‹ï¼ˆä¸€ä¸ªåŸºç¡€çŸ©é˜µFï¼Œä¸€ä¸ªå•åº”çŸ©é˜µHï¼‰ï¼Œæœ€åé€‰æ‹©ä¸€ä¸ªæ›´å¥½çš„æ¨¡å‹æ¥æ±‚è§£SFMé—®é¢˜ã€‚</p><p>ORB-SLAM2å¤šäº†ä¸€ä¸ªé¢„å¤„ç†çš„éƒ¨åˆ†ï¼ŒæŠŠRGB-Dè¾“å…¥æˆ–è€…åŒç›®çš„è¾“å…¥å¤„ç†æˆä¸ºå•ç›®ç‰¹å¾ç‚¹å’Œè¿™äº›ç‰¹å¾ç‚¹å¯¹åº”çš„æ·±åº¦ï¼Œä¹‹åç³»ç»Ÿçš„å…¨éƒ¨è¿ç®—å°±åŸºäºè¿™äº›ç‰¹å¾ï¼Œè€Œè¾“å…¥çš„å›¾åƒå°±è¢«ä¸¢å¼ƒäº†ã€‚</p><blockquote><p>ORB-SLAMåº”è¯¥ä¹Ÿæ˜¯åŸºäºè¿™äº›ç‰¹å¾åšè¿ç®—ï¼Ÿ</p></blockquote><p>å…¶ä¸­ï¼ŒRGB-Dè¾“å…¥ä¹Ÿè¢«ä»–ä»¬å¤„ç†æˆç±»ä¼¼åŒç›®çš„è¾“å…¥äº†ï¼Œä»–ä»¬ä¸ºRGB-Då›¾åƒä¸­æå–çš„ç‰¹å¾ç‚¹è®¡ç®—äº†ä¸€ä¸ªè™šæ‹Ÿçš„å³å›¾åæ ‡ï¼Œè¿™æ ·å°±å¯ä»¥ç»Ÿä¸€çš„è¿›è¡Œå¤„ç†ã€‚è¿™é‡Œä»–ä»¬æ˜¯æŠŠç‰¹å¾ç‚¹åˆ’åˆ†ä¸ºè¿‘å¤„ç‚¹å’Œè¿œå¤„ç‚¹ï¼Œè¿‘å¤„ç‰¹å¾ç‚¹å¯ä»¥è¢«å®‰å…¨åœ°ä¸‰è§’åŒ–ï¼Œæ·±åº¦èƒ½è¢«ç²¾ç¡®ä¼°è®¡ï¼Œè€Œè¿œå¤„ç‰¹å¾ç‚¹æä¾›äº†ç²¾ç¡®åœ°æ—‹è½¬ä¿¡æ¯ï¼Œä¸è¿‡æ— æ³•æä¾›ç²¾ç¡®çš„å°ºåº¦å’Œå¹³ç§»ä¿¡æ¯ï¼Œåªæœ‰è¿œå¤„ç‰¹å¾ç‚¹åœ¨å¤šä¸ªè§†å›¾ä¸­å­˜åœ¨çš„æ—¶å€™æ‰ä¼šè¢«ä¸‰è§’åŒ–ã€‚</p><p>å› ä¸ºåŒç›®æˆ–è€…RGB-Dèƒ½å¤Ÿç›´æ¥ä»å•å¸§å›¾åƒè·å–æ·±åº¦ä¿¡æ¯ï¼Œæ‰€ä»¥ç¬¬ä¸€å¸§è®¾ç½®ä¸ºå…³é”®å¸§ï¼Œå…¶ä½å§¿è®¾ç½®ä¸ºåˆå§‹å§¿æ€ï¼Œå¹¶ä¸”æ ¹æ®æ‰€æœ‰çš„ç«‹ä½“å…³é”®ç‚¹æ¥å»ºç«‹ä¸€ä¸ªåˆå§‹åœ°å›¾ã€‚</p><p><strong>FULL BAéƒ¨åˆ†</strong></p><p>ORB-SLAMçš„è®ºæ–‡é‡Œåœ¨è®²åˆå§‹åŒ–ï¼ˆIV. AUTOMATIC MAP INITIALIZATION ï¼‰çš„æ—¶å€™æåˆ°åˆå§‹åŒ–è¿‡ç¨‹çš„æœ€åä¼šæ‰§è¡Œä¸€ä¸ªå…¨å±€çš„BAæ¥å®Œå–„åˆå§‹åŒ–çš„é‡å»ºã€‚</p><p>è€ŒORB-SLAM2è¿™é‡Œæ˜¯åœ¨ä½å§¿å›¾ä¼˜åŒ–åï¼Œå†é‡‡ç”¨å…¨å±€BAä¼˜åŒ–æ¥å¾—åˆ°æœ€ä¼˜è§£ã€‚è¿™ä¸ªä¼˜åŒ–è¿‡ç¨‹å¯èƒ½å¼€é”€ä¼šå¾ˆå¤§ï¼Œæ‰€ä»¥è¢«æ”¾åœ¨ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹ä¸­ï¼Œä»è€Œä½¿å¾—ç³»ç»Ÿå¯ä»¥æŒç»­å»ºç«‹åœ°å›¾ã€æ£€æµ‹å›ç¯ã€‚</p><p>ä½†è¿™æ ·ä¼šå¯¼è‡´BAè¾“å‡ºä¸å½“å‰åœ°å›¾çŠ¶æ€ä¹‹é—´è¿›è¡Œèåˆäº§ç”Ÿå›°éš¾ã€‚å¦‚æœåœ¨ä¼˜åŒ–è¿è¡Œçš„åŒæ—¶å‘ç°äº†æ–°çš„å›ç¯ï¼ŒORB-SLAM2å°±åœæ­¢ä¼˜åŒ–ï¼Œè½¬è€Œå»é—­åˆå›ç¯ï¼Œè¿™å°†å†æ¬¡å¯åŠ¨å…¨å±€BAä¼˜åŒ–ã€‚å½“å…¨å±€BAå®Œæˆæ—¶ï¼Œå°±éœ€è¦å°†å…¨å±€BAä¼˜åŒ–æ›´æ–°åçš„å…³é”®å¸§å’Œç‚¹çš„é›†åˆï¼Œä¸åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­æ’å…¥çš„æœªæ›´æ–°çš„å…³é”®å¸§å’Œç‚¹ï¼Œè¿›è¡Œèåˆã€‚è¿™é€šè¿‡å°†æ›´æ–°çš„å…³é”®å¸§çš„ä¿®æ­£ï¼ˆæœªä¼˜åŒ–ä½å§¿è‡³ä¼˜åŒ–ä½å§¿çš„å˜æ¢ï¼‰æ²¿ç”Ÿæˆæ ‘ä¼ é€’è‡³æœªæ›´æ–°çš„å…³é”®å¸§æ¥å®Œæˆã€‚æœªæ›´æ–°çš„ç‚¹ä¾æ®å®ƒä»¬çš„å‚è€ƒå¸§çš„ä¿®æ­£æ¥è¿›è¡Œå˜æ¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ã€ŠFeature-Realistic Neural Fusion for Real-Time, Open Set Scene Understandingã€‹</title>
      <link href="2023/03/06/paper-reading-feature-realistic-neural-fusion-for-real-time-open-set-scene-understanding/"/>
      <url>2023/03/06/paper-reading-feature-realistic-neural-fusion-for-real-time-open-set-scene-understanding/</url>
      
        <content type="html"><![CDATA[<h1 id="Feature-Realistic-Neural-Fusion-for-Real-Time-Open-Set-Scene-Understanding"><a href="#Feature-Realistic-Neural-Fusion-for-Real-Time-Open-Set-Scene-Understanding" class="headerlink" title="Feature-Realistic Neural Fusion for Real-Time, Open Set Scene Understanding"></a>Feature-Realistic Neural Fusion for Real-Time, Open Set Scene Understanding</h1><h2 id="å›é¡¾iMAP"><a href="#å›é¡¾iMAP" class="headerlink" title="å›é¡¾iMAP"></a>å›é¡¾iMAP</h2><blockquote><p>è¿™ç¯‡å·¥ä½œå¾ˆå¤§éƒ¨åˆ†éƒ½åŸºäºiMAPï¼Œå»å¹´æš‘å‡æˆ‘<a href="https://immortalqx.github.io/2022/08/31/paper-reading-imap/">ç¿»è¯‘äº†è¿™ç¯‡è®ºæ–‡</a></p></blockquote><ul><li><p>ä½¿ç”¨éšå¼ç¥ç»åœºæ™¯è¡¨ç¤ºå¹¶èƒ½å¤Ÿè”åˆä¼˜åŒ–å®Œæ•´ 3D åœ°å›¾å’Œç›¸æœºå§¿åŠ¿çš„ç¨ å¯†å®æ—¶ SLAM ç³»ç»Ÿã€‚ï¼ˆä½¿ç”¨å¤šå±‚æ„ŸçŸ¥å™¨ (MLP) ä½œä¸ºæ‰‹æŒ RGB-D ç›¸æœºçš„å®æ—¶ SLAM ç³»ç»Ÿä¸­å”¯ä¸€çš„åœºæ™¯è¡¨ç¤ºï¼‰</p></li><li><p>iMAPç³»ç»Ÿæ¡†æ¶</p><p><img src="/images/paper-reading-feature-realistic-neural-fusion-for-real-time-open-set-scene-understanding/image-20220830225347891.png"></p><blockquote><p>å¤§æ¦‚æ˜¯è¿™ä¹ˆè¿è¡Œçš„ï¼Œä¸ªäººçŒœæµ‹</p></blockquote><ul><li><p><strong>Implicit Scene Neural Network</strong></p><p>MLPçš„ä½œç”¨æ˜¯ä¿å­˜3Dåœºæ™¯ï¼Œè¾“å…¥ä¸€ä¸ª3Dåæ ‡ç»è¿‡å¤„ç†å¯ä»¥æŸ¥è¯¢åˆ°è¿™ä¸ªç‚¹çš„é¢œè‰²å’Œä½“ç§¯å¯†åº¦å€¼ï¼›</p><p>é€šè¿‡æŸ¥è¯¢çš„ç»“æœå¯ä»¥æ¸²æŸ“å‡ºè¯¥ç‚¹çš„æ·±åº¦å’Œé¢œè‰²ã€‚</p></li><li><p><strong>Depth and Colour Rendering</strong></p><p>æ ¹æ®å½“å‰çš„ç›¸æœºä½å§¿å’ŒæŸäº›å…³é”®ç‚¹çš„åƒç´ åæ ‡ï¼ŒåæŠ•å½±å¾—åˆ°è¿™äº›å…³é”®ç‚¹çš„ä¸–ç•Œåæ ‡ï¼›</p><p>é€šè¿‡MLPæŸ¥è¯¢è¿™äº›ä¸–ç•Œåæ ‡çš„é¢œè‰²å’Œä½“ç§¯å¯†åº¦å€¼ï¼›</p><p>æ ¹æ®é¢œè‰²å’Œä½“ç§¯å¯†åº¦å€¼è¿›è¡Œæ·±åº¦å’Œé¢œè‰²çš„æ¸²æŸ“ï¼›</p><p>å°†æ¸²æŸ“çš„é¢œè‰²å›¾å’Œæ·±åº¦å›¾ä¸å½“å‰ç›¸æœºçœŸæ­£çœ‹åˆ°çš„å›¾ä½œæ¯”è¾ƒï¼Œè®¡ç®—è¯¯å·®ï¼›</p><p>æ ¹æ®è¯¯å·®è¿›è¡Œä¼˜åŒ–ï¼Œæ›´æ–°äº†ï¼Ÿï¼ˆæ›´æ–°çš„æ˜¯ç›¸æœºä½å§¿ï¼Ÿè¿˜æ˜¯ç½‘ç»œå‚æ•°ï¼Ÿè¿™ä¸¤ä¸ªæ€ä¹ˆå¤„ç†ï¼Ÿï¼‰</p></li><li><p><strong>Joint optimisation</strong></p><p>æ ¹æ®è¯¯å·®è¿›è¡Œè”åˆä¼˜åŒ–ï¼Œæ›´æ–°ç½‘ç»œå‚æ•°å’Œç›¸æœºä½å§¿ï¼›ï¼ˆå…‰åº¦æŸå¤±å’Œå‡ ä½•æŸå¤±è¡¨é¢ä¸Šæ˜¯å’Œä½å§¿æœ‰å…³çš„ï¼Œä½†æ˜¯æ¸²æŸ“æ˜¯é€šè¿‡ç½‘ç»œæ¸²æŸ“çš„ï¼Œæ‰€ä»¥åº”è¯¥å°±å¯ä»¥è”åˆä¼˜åŒ–ï¼Œä½†å…·ä½“æ€ä¹ˆåšæˆ‘ä¸æ¸…æ¥šã€‚ã€‚ã€‚ï¼‰</p><p>è¿™é‡ŒæŸå¤±å‡½æ•°ä¸“é—¨èµ‹äºˆå…‰åº¦è¯¯å·®æƒé‡ï¼Œåº”è¯¥æ˜¯è¦å‡è½»å…‰ç…§çš„å½±å“ã€‚</p></li><li><p><strong>Keyframe Selection</strong></p><p>æ ¹æ®ç¨€ç–çš„å…³é”®å¸§æ¥è¿›è¡Œè”åˆä¼˜åŒ–ã€‚å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå…³é”®å¸§ç”¨äºåˆå§‹åŒ–ç½‘ç»œå’Œå›ºå®šä¸–ç•Œåæ ‡ç³»ã€‚</p><p>è¿™ç¯‡å·¥ä½œå…³é”®å¸§é€‰æ‹©çš„æ–¹æ¡ˆæ˜¯ï¼š</p><p>æ£€æµ‹æ–°åŒºåŸŸçš„æ˜¾è‘—æ€§ï¼ˆæ–°åŒºåŸŸæ˜¯ä¸æ˜¯éå¸¸æ–°ï¼Ÿéå¸¸æ–°å°±åŠ å…¥å…³é”®å¸§ï¼ï¼‰</p><p>è¿™é‡Œä¼¼ä¹æ˜¯ç”¨æ·±åº¦è¯¯å·®æ¥åˆ¤æ–­çš„ï¼Œåˆ¤æ–­ä¸€ä¸ªæ–°åŒºåŸŸé‡Œé¢å·²ç»è¢«è§£é‡Šçš„å¸§çš„æ¯”ä¾‹ã€‚</p></li><li><p>Active Sampling</p><p>ç•¥ã€‚è¿™é‡Œå°è±¡ä¸­ä¸é‡è¦ï¼Œå¹¶ä¸”nice-slamé‡Œé¢ä¼¼ä¹è¯´è¿™éƒ¨åˆ†å¯¹æ€§èƒ½æå‡çš„å½±å“éå¸¸æœ‰é™ã€‚</p></li></ul></li></ul><h2 id="ä¸»è¦å·¥ä½œ"><a href="#ä¸»è¦å·¥ä½œ" class="headerlink" title="ä¸»è¦å·¥ä½œ"></a>ä¸»è¦å·¥ä½œ</h2><p>æå‡ºäº†ä¸€ç§ç®—æ³•ï¼Œè¯¥ç®—æ³•å°†æ¥è‡ªæ ‡å‡†é¢„è®­ç»ƒç½‘ç»œçš„ä¸€èˆ¬å­¦ä¹ ç‰¹å¾èåˆä¸ºå®æ—¶SLAMæœŸé—´é«˜æ•ˆçš„3Då‡ ä½•ç¥ç»åœºè¡¨ç¤ºã€‚èåˆçš„3Dç‰¹å¾å›¾ç»§æ‰¿äº†ç¥ç»åœºå‡ ä½•è¡¨ç¤ºçš„ä¸€è‡´æ€§ã€‚è¿™æ„å‘³ç€åœ¨è¿è¡Œæ—¶äº¤äº’çš„å¾®å°æ•°é‡çš„äººç±»æ ‡ç­¾ä½¿å¯¹è±¡ç”šè‡³å¯¹è±¡çš„ä¸€éƒ¨åˆ†èƒ½å¤Ÿä»¥å¼€æ”¾é›†çš„æ–¹å¼è¢«ç¨³å¥åœ°å‡†ç¡®åœ°åˆ†å‰²ã€‚</p><blockquote><p>æŠŠiMAPå’Œé¢„è®­ç»ƒç‰¹å¾èåˆèµ·æ¥äº†ï¼Ÿ</p></blockquote><h2 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h2><h3 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h3><p><img src="/images/paper-reading-feature-realistic-neural-fusion-for-real-time-open-set-scene-understanding/image-20230306160434854.png"></p><p>è¯¥ç³»ç»Ÿä¸»è¦ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p><ul><li><p>é¢„è®­ç»ƒçš„2Då›¾åƒç‰¹å¾æå–å™¨</p><blockquote><p>è¢«å†»ç»“äº†ï¼ŒæŒ‡çš„æ˜¯ç½‘ç»œå‚æ•°ä¸ä¼šè¢«æ”¹åŠ¨ï¼Ÿæ‰€ä»¥è¾“å…¥çš„å›¾åƒç‰¹å¾å°±æ˜¯å›ºå®šä¸å˜çš„äº†ï¼Œç›¸å½“äºç›¸æœºçš„å‚æ•°è¢«å›ºå®šäº†ï¼Ÿ</p></blockquote></li><li><p>ç±»ä¼¼iMAPçš„SLAMç³»ç»Ÿï¼Œå³SLAMåç«¯</p></li></ul><p>æœ¬æ–‡çš„ä¸€èˆ¬æ–¹æ³•æ˜¯<strong>é€šè¿‡ä½“ç§¯æ¸²æŸ“æ¥è¿‘ä¼¼ä¸€ç»„ç‰¹å¾å›¾</strong>ï¼Œè¿™äº›ç‰¹å¾å›¾æ˜¯ç”¨ç‰¹å¾æå–å™¨ F ä»ä¸€ç»„å›¾åƒä¸­è·å¾—çš„ã€‚è¿™é‡Œæ”¾å¼ƒäº†å¯¹é¢œè‰²å’Œä¾èµ–è§†å›¾ï¼ˆview-dependantï¼‰çš„æ•ˆæœè¿›è¡Œå»ºæ¨¡ï¼Œä»¥ç¼“è§£åœºæ™¯MLPçš„é—®é¢˜ã€‚</p><h3 id="A-Scene-Network"><a href="#A-Scene-Network" class="headerlink" title="A. Scene Network"></a>A. Scene Network</h3><p><img src="/images/paper-reading-feature-realistic-neural-fusion-for-real-time-open-set-scene-understanding/image-20230306160449588.png"></p><ul><li><p>è¯¥åœºæ™¯è¡¨ç¤ºç½‘ç»œç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p><p>å·¦è¾¹æ˜¯ç±»ä¼¼Nerfçš„MLPï¼Œç”¨äºè¡¨ç¤ºæ•´ä¸ªåœºæ™¯ï¼Œå³ä¸‰ç»´ç¥ç»åœºï¼›</p><p>å³è¾¹æ˜¯å•å±‚æ„ŸçŸ¥å™¨ï¼Œæ ¹æ®2Dæ¸²æŸ“çš„ç»“æœå¾—åˆ°æœ€ç»ˆçš„ç‰¹å¾å›¾ã€‚</p></li><li><p>MLPç½‘ç»œï¼š</p><p>è¾“å…¥ä¸‰ç»´åæ ‡ï¼Œè¾“å‡ºä½“ç§¯å¯†åº¦ã€ç‰¹å¾å‘é‡ã€è¯­ä¹‰å¯¹æ•°ã€‚</p><p>åœ¨è¿›å…¥MLPç½‘ç»œä¹‹å‰ï¼Œæœ‰ä¸€ä¸ªPositional Encodingè¿‡ç¨‹ï¼Œè¿™é‡Œç›®çš„æ˜¯ç¡®ä¿æ‹Ÿåˆé«˜é¢‘ç‰¹å¾æ˜ å°„çš„è¡¨ç¤ºèƒ½åŠ›</p><blockquote><p>nerfé‡Œé¢æœ‰ä¸€ä¸ªå·®ä¸å¤šçš„è¿‡ç¨‹ï¼Œè§<a href="https://immortalqx.github.io/2022/08/19/nerf-notes-1/#5-1-Positional-encoding">NeRFå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ï¼šè®ºæ–‡ç¿»è¯‘</a></p></blockquote></li><li><p>æ ¹æ®MLPè¾“å‡ºçš„ä½“ç§¯å¯†åº¦è®¡ç®—äº†ä½“ç§¯æ¸²æŸ“æƒé‡ï¼Œç„¶åæ ¹æ®è¿™ä¸ªæƒé‡è®¡ç®—æ·±åº¦ã€ç‰¹å¾ã€è¯­ä¹‰é€»è¾‘ã€‚</p><blockquote><p>è¿™é‡Œçš„â€œè¯­ä¹‰é€»è¾‘â€æœ‰ä»€ä¹ˆç”¨å¤„ï¼Ÿè¿™æ˜¯æ¯ä¸ªç‰¹å¾çš„æ ‡ç­¾å—ï¼Ÿ</p><p>è¿™éƒ¨åˆ†ï¼Œå‰ä¸¤ä¸ªå…¬å¼å’ŒiMAPåŸºæœ¬ä¸€æ ·ï¼Œwçš„æ„ä¹‰ä¹Ÿä¸€æ ·</p></blockquote><p><img src="/images/paper-reading-feature-realistic-neural-fusion-for-real-time-open-set-scene-understanding/image-20230306214201812.png"></p></li><li><p>å…³é”®å¸§é€‰ç”¨ä¸iMAPä¸€æ ·ï¼Œæ ¹æ®æ·±åº¦æ¸²æŸ“çš„è¯¯å·®æ¥é€‰æ‹©ã€‚</p></li></ul><h3 id="B-Latent-Feature-Rendering"><a href="#B-Latent-Feature-Rendering" class="headerlink" title="B. Latent Feature Rendering"></a>B. Latent Feature Rendering</h3><p>è¿™é‡Œä¸»è¦ä»‹ç»å‰é¢è®²çš„ä¸€ç§æ½œåœ¨çš„ç‰¹å¾æ¸²æŸ“æ–¹æ³•ã€‚</p><p>æœ¬æ–‡æ²¡æœ‰ä½¿ç”¨ä¹‹å‰Nerfé‚£ç§çš„æ¸²æŸ“æ–¹æ³•ï¼Œè€Œæ˜¯ä½¿ç”¨äº†æ„ŸçŸ¥å™¨æ¥è§£å†³æ¸²æŸ“é—®é¢˜ã€‚</p><blockquote><p>çœ‹èµ·æ¥æ˜¯åªæœ‰ä¸€ä¸ªæ„ŸçŸ¥å™¨ï¼Œç„¶åæ¸²æŸ“äº†æ¯ä¸ªç‚¹çš„ç‰¹å¾ï¼Ÿ</p></blockquote><p><img src="/images/paper-reading-feature-realistic-neural-fusion-for-real-time-open-set-scene-understanding/image-20230306214238132.png"></p><h3 id="C-Feature-Extractors"><a href="#C-Feature-Extractors" class="headerlink" title="C. Feature Extractors"></a>C. Feature Extractors</h3><p>è¿™é‡Œå°±æäº†ä¸€å¥æœ¬æ–‡æ„å»ºçš„ç³»ç»Ÿå¯¹2Då‰ç«¯æ˜¯ä¸å¯çŸ¥çš„ï¼Œå¤§æ¦‚ç”¨ä»€ä¹ˆæ ·çš„ç‰¹å¾æå–å™¨æå–ç‰¹å¾éƒ½å¯ä»¥ï¼Œä½†æ˜¯è¿™ä¸ªç³»ç»Ÿè¿˜æ˜¯èƒ½å¤Ÿèåˆè¿™äº›æå–å‡ºæ¥çš„ç‰¹å¾ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ ¹æ®ç›®å‰æˆ‘ç†è§£çš„å†…å®¹ï¼Œæœ¬æ–‡çš„ç³»ç»Ÿæ¡†æ¶åº”è¯¥æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š</p><p><img src="/images/paper-reading-feature-realistic-neural-fusion-for-real-time-open-set-scene-understanding/image-20230306213537354.png"></p><p>å’ŒiMAPä¸ä¸€æ ·çš„åœ°æ–¹æ˜¯ï¼š</p><ul><li>è¾“å…¥ï¼šå¯¹è¾“å…¥çš„RGBå›¾åƒåšäº†ä¸€ä¸ªç‰¹å¾æå–ï¼Œå°†åŸæœ¬çš„{I,D}è¾“å…¥å˜æˆäº†{F,D}ï¼›</li><li>ç½‘ç»œéƒ¨åˆ†ï¼šéƒ½æ˜¯è¾“å…¥ä¸‰ç»´ç‚¹åæ ‡ï¼ŒiMAPç½‘ç»œè¾“å‡ºé¢œè‰²å’Œä½“ç§¯å¯†åº¦å€¼ï¼Œè€Œæœ¬æ–‡æ˜¯ç‰¹å¾ã€ä½“ç§¯å¯†åº¦å’Œè¯­ä¹‰ï¼ˆå¤šäº†ä¸€ä¸ªè¯­ä¹‰ï¼‰ï¼›</li><li>æ¸²æŸ“éƒ¨åˆ†ï¼šæœ¬æ–‡å’ŒiMAPçš„å…¬å¼åŸºæœ¬ä¸€æ ·ï¼Œä½†æœ¬æ–‡æŠŠæ¸²æŸ“åçš„ç‰¹å¾åˆç”¨æ„ŸçŸ¥å™¨è¿›è¡Œäº†ä¸€éå¤„ç†ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS231A Lecture 9ï¼šFitting and Matching</title>
      <link href="2022/11/23/cs231a-lecture9/"/>
      <url>2022/11/23/cs231a-lecture9/</url>
      
        <content type="html"><![CDATA[<h1 id="CS231A-Lecture-9ï¼šFitting-and-Matching"><a href="#CS231A-Lecture-9ï¼šFitting-and-Matching" class="headerlink" title="CS231A Lecture 9ï¼šFitting and Matching"></a>CS231A Lecture 9ï¼šFitting and Matching</h1><blockquote><p>lecture 9 ä¹Ÿæ²¡ä»€ä¹ˆå†…å®¹ï¼Œä¸è¿‡è¿˜æ˜¯å¥½å¥½è®°ä¸€ä¸‹ï¼Œéœå¤«å˜æ¢ä¹‹å‰ä¸å¤ªäº†è§£ã€‚ã€‚ã€‚</p></blockquote><blockquote><p><strong>Reading:</strong> </p><p>[HZ] Chapter: 4 â€œEstimation â€“ 2D projective transformationâ€</p><p>[HZ] Chapter: 11 â€œComputation of the fundamental matrix Fâ€</p><p>[FP] Chapter:10 â€œGrouping and model fittingâ€</p></blockquote><h2 id="Problem-formulation"><a href="#Problem-formulation" class="headerlink" title="Problem formulation"></a>Problem formulation</h2><p><strong>Fitting (æ‹Ÿåˆ)</strong></p><img src="/images/cs231a-lecture9/image-20221123153930630.png" style="zoom:50%;"><img src="/images/cs231a-lecture9/image-20221123155619402.png" style="zoom:50%;"><h2 id="Least-square-methods"><a href="#Least-square-methods" class="headerlink" title="Least square methods"></a>Least square methods</h2><blockquote><p>æœ€å°äºŒä¹˜æ³•</p></blockquote><img src="/images/cs231a-lecture9/image-20221123160115372.png" style="zoom:50%;"><img src="/images/cs231a-lecture9/image-20221123161648007.png" style="zoom:50%;"><img src="/images/cs231a-lecture9/image-20221123161702037.png" style="zoom:50%;"><img src="/images/cs231a-lecture9/image-20221123161719516.png" style="zoom:50%;"><img src="/images/cs231a-lecture9/image-20221123161806523.png" style="zoom:50%;"><p><font color="red"><strong>CONCLUSION</strong></font>: Least square is not robust w.r.t. outliers</p><h2 id="RANSAC"><a href="#RANSAC" class="headerlink" title="RANSAC"></a>RANSAC</h2><blockquote><p>è§ï¼š<a href="https://immortalqx.github.io/2021/11/28/ransac/#%E7%AE%97%E6%B3%95%E5%9F%BA%E6%9C%AC%E6%80%9D%E6%83%B3%E5%92%8C%E6%B5%81%E7%A8%8B">ä½¿ç”¨RANSACç®—æ³•æ‹Ÿåˆç‚¹äº‘ä¸­çš„å¹³é¢</a></p><p>è¿™é‡Œä»…è¡¥å……å‡ ä¸ªéœ€è¦å…³æ³¨çš„åœ°æ–¹ã€‚</p></blockquote><p><strong>RANSACçš„ä¸¤ä¸ªåŸºæœ¬å‡è®¾</strong></p><img src="/images/cs231a-lecture9/image-20221123162611114.png" style="zoom:50%;"><p><strong>How many samples?</strong></p><img src="/images/cs231a-lecture9/image-20221123163159911.png" style="zoom:50%;"><img src="/images/cs231a-lecture9/image-20221123163143006.png" style="zoom:50%;"><p><strong>Conclusions</strong></p><img src="/images/cs231a-lecture9/image-20221123163314947.png" style="zoom:50%;"><h2 id="Hough-transforms"><a href="#Hough-transforms" class="headerlink" title="Hough transforms"></a>Hough transforms</h2><blockquote><p>P.V.C. Hough, <em>Machine Analysis of Bubble Chamber Pictures,</em> Proc. Int. Conf. High Energy Accelerators and Instrumentation, 1959 </p></blockquote><img src="/images/cs231a-lecture9/image-20221123165028131.png" style="zoom:50%;"><img src="/images/cs231a-lecture9/image-20221123165105277.png" style="zoom:50%;"><img src="/images/cs231a-lecture9/image-20221123165756572.png" style="zoom:50%;"><img src="/images/cs231a-lecture9/image-20221123172108198.png" style="zoom:50%;"><p><strong>Conclusions</strong></p><img src="/images/cs231a-lecture9/image-20221123172156915.png" style="zoom:50%;"><p><strong>Generalized Hough transform</strong></p><blockquote><p>D. Ballard, Generalizing the Hough Transform to Detect Arbitrary Shapes, Pattern Recognition 13(2), 1981</p></blockquote><img src="/images/cs231a-lecture9/image-20221123172828867.png" style="zoom:50%;"><p><strong>æ€è€ƒï¼š</strong></p><p>è¯¾ä»¶é‡Œé¢éœå¤«å˜æ¢è®²çš„å¹¶ä¸æ¸…æ¥šï¼Œè¿™é‡Œè¡¥å……ä¸€äº›å†…å®¹ï¼š</p><ul><li><a href="https://zhuanlan.zhihu.com/p/47649796">éœå¤«å˜æ¢â€”â€”ç¥å¥‡çš„ç‰¹å¾æå–ç®—æ³•</a></li><li><a href="https://jishuin.proginn.com/p/763bfbd6c025">å²ä¸Šæœ€å…¨éœå¤«å˜æ¢è¯¦è§£ï¼ˆå«æºç ï¼‰</a></li><li><a href="https://zhuanlan.zhihu.com/p/448935812">éœå¤«åœ†æ£€æµ‹åŸç†</a></li></ul><h2 id="Multi-model-fitting"><a href="#Multi-model-fitting" class="headerlink" title="Multi-model fitting"></a>Multi-model fitting</h2><p><strong>Fitting multiple models</strong></p><img src="/images/cs231a-lecture9/image-20221123201037831.png" style="zoom:50%;"><p><strong>Incremental line fitting</strong></p><img src="/images/cs231a-lecture9/image-20221123201124279-16692064695511.png" style="zoom:50%;">]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CS231A </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS231A Lecture 7ï¼šMulti-view geometry (2)</title>
      <link href="2022/11/21/cs231a-lecture7-2/"/>
      <url>2022/11/21/cs231a-lecture7-2/</url>
      
        <content type="html"><![CDATA[<h1 id="CS231A-Lecture-7ï¼šMulti-view-geometry-2"><a href="#CS231A-Lecture-7ï¼šMulti-view-geometry-2" class="headerlink" title="CS231A Lecture 7ï¼šMulti-view geometry (2)"></a>CS231A Lecture 7ï¼šMulti-view geometry (2)</h1><blockquote><p><strong>Reading:</strong> </p><p>[HZ] Chapter 10 â€œ3D reconstruction of cameras and structureâ€</p><p>[HZ] Chapter 18 â€œN-view computational methodsâ€</p><p>[HZ] Chapter 19 â€œAuto-calibrationâ€</p><p>[FP] Chapter 13 â€œprojective structure from motionâ€</p><p>[Szelisky] Chapter 7 â€œStructure from motionâ€</p></blockquote><h2 id="Perspective-SFM"><a href="#Perspective-SFM" class="headerlink" title="Perspective SFM"></a>Perspective SFM</h2><blockquote><p>å¤ä¹ ï¼š<a href="https://immortalqx.github.io/2022/10/28/cs231a-lecture4/">Single View Metrology</a></p></blockquote><h3 id="Structure-from-motion-problem"><a href="#Structure-from-motion-problem" class="headerlink" title="Structure from motion problem"></a>Structure from motion problem</h3><img src="/images/cs231a-lecture7-2/image-20221120212756627.png" style="zoom:50%;"><img src="/images/cs231a-lecture7-2/image-20221120213038698.png" style="zoom:50%;"><h4 id="Structure-from-Motion-Ambiguities"><a href="#Structure-from-Motion-Ambiguities" class="headerlink" title="Structure from Motion Ambiguities"></a>Structure from Motion Ambiguities</h4><img src="/images/cs231a-lecture7-2/image-20221120213631419.png" style="zoom:50%;"><p> <strong>ambiguities for 3D reconstructionï¼š</strong></p><img src="/images/cs231a-lecture7-2/image-20221121153226261.png" style="zoom:50%;"><h4 id="The-Structure-from-Motion-Problem"><a href="#The-Structure-from-Motion-Problem" class="headerlink" title="The Structure-from-Motion Problem"></a>The Structure-from-Motion Problem</h4><img src="/images/cs231a-lecture7-2/image-20221120213648334.png" style="zoom:50%;"><h4 id="Projective-Ambiguity"><a href="#Projective-Ambiguity" class="headerlink" title="Projective Ambiguity"></a>Projective Ambiguity</h4><img src="/images/cs231a-lecture7-2/image-20221121175914571.png" style="zoom:50%;"><h4 id="Metric-reconstruction-upgrade"><a href="#Metric-reconstruction-upgrade" class="headerlink" title="Metric reconstruction (upgrade)"></a>Metric reconstruction (upgrade)</h4><img src="/images/cs231a-lecture7-2/image-20221121175949492.png" style="zoom:50%;"><h4 id="Structure-from-Motion-methods"><a href="#Structure-from-Motion-methods" class="headerlink" title="Structure from Motion methods"></a>Structure from Motion methods</h4><ol><li><strong>Recovering structure and motion up to perspective ambiguity</strong><ul><li>Algebraic approach (by fundamental matrix)</li><li>Factorization method (by SVD)</li><li>Bundle adjustment</li></ul></li><li><strong>Resolving the perspective ambiguity</strong></li></ol><p><strong>ç–‘é—®</strong></p><p><strong>Qï¼šå¦‚ä½•ç†è§£â€œIf the cameras are not calibrated, cameras and points can only be recovered up to a 4x4 projective (where the 4x4 projective is defined up to scale)â€</strong></p><p><strong>Aï¼š</strong>æ„Ÿè§‰è¿™é‡Œè¯´çš„æ˜¯ï¼Œå› ä¸ºä¸çŸ¥é“ç›¸æœºçš„å†…å‚ï¼Œç¼ºå°‘äº†çº¦æŸæ¡ä»¶ï¼Œæœ€ç»ˆæ¢å¤çš„åœºæ™¯å’Œå®é™…çš„åœºæ™¯å·®äº†ä¸€ä¸ªæŠ•å½±å˜æ¢ã€‚æ¯”å¦‚ï¼Œå®é™…çš„motionåº”è¯¥æ˜¯åˆšæ€§å˜æ¢ï¼Œä½†æˆ‘ä»¬å› ä¸ºä¸çŸ¥é“ç›¸æœºå†…å‚ï¼Œåªèƒ½æ¢å¤æˆæŠ•å½±å˜æ¢ï¼Œå°±åƒâ€Projective Ambiguityâ€œè¿™ä¸ªéƒ¨åˆ†ä¸€æ ·ã€‚ä½†ä¸ºä»€ä¹ˆçŸ¥é“ç›¸æœºå†…å‚ä¹‹åèƒ½å¤Ÿæ¢å¤åˆ°åˆšæ€§å˜æ¢å‘¢ï¼Ÿ</p><p>è¿™é‡Œåº”è¯¥æ˜¯çŸ¥é“å†…å‚ä¹‹åå¯ä»¥æŠŠ$M$æ±‚å‡ºæ¥ï¼Œè¿™æ ·$X$ä¹Ÿç¡®å®šäº†ï¼Œå°±æ¶ˆé™¤æ­§ä¹‰äº†ã€‚</p><p><strong>Qï¼šè¿™é‡Œçš„æœªçŸ¥é‡æ•°ç›®ä¸º$11m+3n-15$ï¼Œå…¶ä¸­çš„$-15$æ˜¯æ€ä¹ˆæ¥çš„ï¼Ÿ</strong></p><p><strong>Aï¼š</strong>TODOï¼ˆæˆ‘å‘ç°ï¼Œåœ¨cs231a winter1415çš„è¯¾ç¨‹ä¸­ï¼Œpptè¯´è¿™é‡Œçš„æœªçŸ¥æ•°æ˜¯$11m+3n-16$ï¼Œæˆ‘çŒœè¿™ä¸ªåº”è¯¥æ˜¯å’Œprojective transformationæœ‰å…³ç³»ï¼Œå®ƒåˆšå¥½16ä¸ªæ•°ï¼Œç„¶å15ä¸ªæœªçŸ¥é‡ï¼›å¯èƒ½è¿™ä¸ªå€¼åœ¨è¿™é‡Œæ±‚ä¸å‡ºï¼Œæˆ–è€…åœ¨è¿™é‡Œä¸ç”¨æ±‚ï¼Œç„¶ååªèƒ½ç”¨å…¶ä»–æ‰‹æ®µæ±‚è§£ï¼Œæ¯”å¦‚self calibrationï¼Ÿï¼‰</p><h3 id="Recovering-structure-and-motion-up-to-perspective-ambiguity"><a href="#Recovering-structure-and-motion-up-to-perspective-ambiguity" class="headerlink" title="Recovering structure and motion up to perspective ambiguity"></a>Recovering structure and motion up to perspective ambiguity</h3><h4 id="Algebraic-approach-2-view-case"><a href="#Algebraic-approach-2-view-case" class="headerlink" title="Algebraic approach (2-view case)"></a>Algebraic approach (2-view case)</h4><h5 id="Compute-the-fundamental-matrix-F-from-two-views"><a href="#Compute-the-fundamental-matrix-F-from-two-views" class="headerlink" title="Compute the fundamental matrix F from two views"></a>Compute the fundamental matrix F from two views</h5><img src="/images/cs231a-lecture7-2/image-20221121202801817.png" style="zoom:50%;"><h5 id="Use-F-to-estimate-projective-cameras"><a href="#Use-F-to-estimate-projective-cameras" class="headerlink" title="Use F to estimate projective cameras"></a>Use F to estimate projective cameras</h5><img src="/images/cs231a-lecture7-2/image-20221121203938026.png" style="zoom:50%;"><img src="/images/cs231a-lecture7-2/image-20221121204500893.png" style="zoom:50%;"><p><strong>Cross product as matrix multiplication</strong></p><img src="/images/cs231a-lecture7-2/image-20221121204654529.png" style="zoom:33%;"><img src="/images/cs231a-lecture7-2/image-20221121204803490.png" style="zoom:33%;"><p><strong>Compute cameras</strong></p><img src="/images/cs231a-lecture7-2/image-20221121204855976.png" style="zoom:50%;"><img src="/images/cs231a-lecture7-2/image-20221121205610397.png" style="zoom:50%;"><p><strong>Interpretation of b</strong> </p><p>å›é¡¾lecture5ä»‹ç»çš„Epipolar Constraint</p><img src="/images/cs231a-lecture7-2/image-20221121210121660.png" style="zoom:50%;"><img src="/images/cs231a-lecture7-2/image-20221121210150661.png" style="zoom:50%;"><h5 id="Use-these-cameras-to-triangulate-and-estimate-points-in-3D"><a href="#Use-these-cameras-to-triangulate-and-estimate-points-in-3D" class="headerlink" title="Use these cameras to triangulate and estimate points in 3D"></a>Use these cameras to triangulate and estimate points in 3D</h5><p><strong>Triangulation</strong></p><img src="/images/cs231a-lecture7-2/image-20221121210326543.png" style="zoom:50%;"><h4 id="Algebraic-approach-the-N-views-case"><a href="#Algebraic-approach-the-N-views-case" class="headerlink" title="Algebraic approach: the N-views case"></a>Algebraic approach: the N-views case</h4><img src="/images/cs231a-lecture7-2/image-20221121210541009.png" style="zoom:50%;"><h4 id="Bundle-adjustment"><a href="#Bundle-adjustment" class="headerlink" title="Bundle adjustment"></a>Bundle adjustment</h4><h5 id="Limitations-of-the-approaches-so-far"><a href="#Limitations-of-the-approaches-so-far" class="headerlink" title="Limitations of the approaches so far"></a>Limitations of the approaches so far</h5><img src="/images/cs231a-lecture7-2/image-20221121210840225.png" style="zoom:50%;"><h5 id="About-BA"><a href="#About-BA" class="headerlink" title="About BA"></a>About BA</h5><img src="/images/cs231a-lecture7-2/image-20221121211920908.png" style="zoom:50%;"><h5 id="General-Calibration-Problem"><a href="#General-Calibration-Problem" class="headerlink" title="General Calibration Problem"></a>General Calibration Problem</h5><img src="/images/cs231a-lecture7-2/image-20221121212715597.png" style="zoom:50%;"><h5 id="Advantages-amp-Limitations"><a href="#Advantages-amp-Limitations" class="headerlink" title="Advantages &amp; Limitations"></a>Advantages &amp; Limitations</h5><img src="/images/cs231a-lecture7-2/image-20221121212749032.png" style="zoom:50%;"><h3 id="Resolving-the-perspective-ambiguity-Self-calibration"><a href="#Resolving-the-perspective-ambiguity-Self-calibration" class="headerlink" title="Resolving the perspective ambiguity: Self-calibration"></a>Resolving the perspective ambiguity: Self-calibration</h3><h4 id="About-Self-calibration"><a href="#About-Self-calibration" class="headerlink" title="About Self-calibration"></a>About Self-calibration</h4><img src="/images/cs231a-lecture7-2/image-20221121213019969.png" style="zoom:50%;"><h4 id="Several-approaches"><a href="#Several-approaches" class="headerlink" title="Several approaches"></a>Several approaches</h4><blockquote><p>å¤ä¹ ï¼š<a href="https://immortalqx.github.io/2022/10/28/cs231a-lecture4/#Estimating-geometry-from-a-single-image">Estimating geometry from a single image</a></p></blockquote><img src="/images/cs231a-lecture7-2/image-20221121213459393.png" style="zoom:50%;"><h5 id="Direct-approach"><a href="#Direct-approach" class="headerlink" title="Direct approach"></a>Direct approach</h5><img src="/images/cs231a-lecture7-2/image-20221121214257946.png" style="zoom:50%;"><p><strong>Projections of conics across views</strong></p><img src="/images/cs231a-lecture7-2/image-20221121214350159.png" style="zoom:50%;"><p><strong>Projection of absolute conics across views</strong></p><blockquote><p>From lecture 4, [HZ] page 210, sec. 8.5.1</p></blockquote><img src="/images/cs231a-lecture7-2/image-20221121214501672.png" style="zoom:50%;"><p><strong>Kruppa equations</strong></p><blockquote><p>[Faugeras et al. 92] From [HZ] page 471 </p></blockquote><img src="/images/cs231a-lecture7-2/image-20221121214622506.png" style="zoom:50%;"><img src="/images/cs231a-lecture7-2/image-20221121214643244.png" style="zoom:50%;"><p><strong>Advantages &amp; Limitations</strong></p><img src="/images/cs231a-lecture7-2/image-20221121214702464.png" style="zoom:50%;"><p><strong>ç–‘é—®</strong></p><p><strong>Qï¼šè¿™é‡Œçš„çŸ©é˜µ$F$è¡¨ç¤ºä»€ä¹ˆï¼Ÿ</strong></p><p><strong>Aï¼š</strong>TODO</p><h5 id="Algebraic-approach-Multi-view-approach"><a href="#Algebraic-approach-Multi-view-approach" class="headerlink" title="Algebraic approach (Multi-view approach)"></a>Algebraic approach (Multi-view approach)</h5><img src="/images/cs231a-lecture7-2/image-20221121214849946.png" style="zoom:50%;"><img src="/images/cs231a-lecture7-2/image-20221121214940374.png" style="zoom:50%;"><p><strong>Art of self-calibration:</strong> </p><img src="/images/cs231a-lecture7-2/image-20221121215039297.png" style="zoom:50%;"><h4 id="Inject-information-about-the-camera-during-the-bundle-adjustment-optimization"><a href="#Inject-information-about-the-camera-during-the-bundle-adjustment-optimization" class="headerlink" title="Inject information about the camera during the bundle adjustment optimization"></a>Inject information about the camera during the bundle adjustment optimization</h4><img src="/images/cs231a-lecture7-2/image-20221121213524460.png" style="zoom:50%;">]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CS231A </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS231A Lecture 7ï¼šMulti-view geometry (1)</title>
      <link href="2022/11/12/cs231a-lecture7-1/"/>
      <url>2022/11/12/cs231a-lecture7-1/</url>
      
        <content type="html"><![CDATA[<h1 id="CS231A-Lecture-7ï¼šMulti-view-geometry-1"><a href="#CS231A-Lecture-7ï¼šMulti-view-geometry-1" class="headerlink" title="CS231A Lecture 7ï¼šMulti-view geometry (1)"></a>CS231A Lecture 7ï¼šMulti-view geometry (1)</h1><blockquote><p><strong>Reading:</strong> </p><p>[HZ] Chapter 10 â€œ3D reconstruction of cameras and structureâ€</p><p>[HZ] Chapter 18 â€œN-view computational methodsâ€</p><p>[HZ] Chapter 19 â€œAuto-calibrationâ€</p><p>[FP] Chapter 13 â€œprojective structure from motionâ€</p><p>[Szelisky] Chapter 7 â€œStructure from motionâ€</p></blockquote><h2 id="The-SFM-problem"><a href="#The-SFM-problem" class="headerlink" title="The SFM problem"></a>The SFM problem</h2><img src="/images/cs231a-lecture7-1/image-20221105194801806.png" style="zoom:50%;"><img src="/images/cs231a-lecture7-1/image-20221105194811248.png" style="zoom:50%;"><img src="/images/cs231a-lecture7-1/image-20221105194828131.png" style="zoom:50%;"><h2 id="Affine-SFM"><a href="#Affine-SFM" class="headerlink" title="Affine SFM"></a>Affine SFM</h2><h3 id="Affine-structure-from-motion-simpler-problem"><a href="#Affine-structure-from-motion-simpler-problem" class="headerlink" title="Affine structure from motion(simpler problem)"></a>Affine structure from motion(simpler problem)</h3><img src="/images/cs231a-lecture7-1/image-20221105194851562.png" style="zoom:50%;"><img src="/images/cs231a-lecture7-1/image-20221105194901691.png" style="zoom:50%;"><p><strong>Perspective vs Affine</strong></p><p>å¤ä¹ ï¼š<a href="https://immortalqx.github.io/2022/10/28/cs231a-lecture4/#2D-transformations">2D transformations</a></p><img src="/images/cs231a-lecture7-1/image-20221105194956531.png" style="zoom: 50%;"><p><strong>Affine cameras</strong></p><img src="/images/cs231a-lecture7-1/image-20221105195029644.png" style="zoom:50%;"><p><strong>The Affine Structure-from-Motion Problem</strong></p><img src="/images/cs231a-lecture7-1/image-20221120121639627.png" style="zoom:50%;"><img src="/images/cs231a-lecture7-1/image-20221105195107859.png" style="zoom:50%;"><p><strong>æ€è€ƒï¼š</strong></p><p>è¿™é‡Œä¹ä¸€çœ‹æ˜¯åªçŸ¥é“$x_{ij}$ï¼Œè¦æ±‚ç­‰å¼å³è¾¹çš„ä¸‰ä¸ªæœªçŸ¥é‡ï¼Œçœ‹èµ·æ¥è§£ä¸å‡ºæ¥ã€‚</p><p>ä¸è¿‡æŠŠè¿™é‡Œçš„å¯¹åº”å…³ç³»ç†æ¸…æ¥šå°±å¯ä»¥ç†è§£äº†ï¼Œ$x_{ij}$æ˜¯$X_j$åœ¨ç¬¬$i$å¼ å›¾ä¸Šçš„æŠ•å½±ï¼Œè€Œ$A_i$å’Œ$b_i$æ˜¯æ„æˆå¯¹åº”ç¬¬$i$å¼ å›¾çš„æŠ•å½±çŸ©é˜µ$M_i$ã€‚</p><p>å¹¶ä¸”ï¼Œè¿™é‡Œæ¯ä¸€ä¸ª$x_{ij}$èƒ½æä¾›2ä¸ªç­‰å¼ï¼Œå³$\begin{cases} &amp;m_1X_j = x_{ij}[0] \\ &amp;m_2X_j=x_{ij}[1] \end{cases}$ï¼Œæ€»å…±å¯ä»¥æœ‰$2m\times n$ä¸ªç­‰å¼ï¼›</p><p>è€Œ$M_i$æœ‰8ä¸ªæœªçŸ¥é‡ï¼Œè€Œ$X_j$æœ‰3ä¸ªæœªçŸ¥é‡ï¼Œæ€»å…±è¦æ±‚è§£çš„æœªçŸ¥é‡æ•°ç›®ä¸º$8m+3n-8$ä¸ªã€‚</p><p>å› æ­¤ï¼Œè¿™ä¸ªç­‰å¼åœ¨ä¸€å®šæƒ…å†µä¸‹æ˜¯å¯ä»¥æ±‚è§£çš„ã€‚</p><p><strong>ç–‘é—®</strong></p><p><strong>Qï¼šä¸ºä»€ä¹ˆæœªçŸ¥é‡çš„æ•°ç›®æ˜¯$8m+3n-8$å‘¢ï¼Ÿè¿™ä¸ª$-8$æ˜¯å¦‚ä½•æ¥çš„ï¼Ÿ</strong></p><p><strong>Aï¼š</strong>æˆ‘è®¤ä¸ºè¿™é‡Œåº”è¯¥æ˜¯æœ‰ä¸€å¸§å›¾åƒçš„æŠ•å½±çŸ©é˜µæ˜¯å·²çŸ¥çš„ï¼Œæ¯”å¦‚å‡å®šç¬¬ä¸€å¸§å›¾è±¡æ˜¯åœ¨ä¸–ç•Œåæ ‡ç³»åŸç‚¹æ‹æ‘„çš„ï¼Œæˆ–è€…å‡å®šå·²çŸ¥ä¸–ç•Œåæ ‡ç³»ä¸ç›¸æœºåæ ‡ç³»åœ¨æŸä¸€å¸§ä¸‹çš„å…³ç³»ï¼Œå°±å¯ä»¥å¾—åˆ°è¿™å¸§çš„æŠ•å½±çŸ©é˜µï¼›ä¸ç„¶çš„è¯ï¼Œå¯èƒ½æ‰¾ä¸å‡ºä¸€ä¸ªåˆé€‚çš„åˆå§‹å€¼æ¥æ±‚è§£è¿™ä¸ªæ–¹ç¨‹ç»„ï¼Œæˆ–è€…å¯èƒ½è¿™ä¸ªæ–¹ç¨‹ç»„æœ‰æ— ç©·ä¸ªè§£ï¼Œè€Œæˆ‘ä»¬éœ€è¦çš„åªæ˜¯ä¸€ä¸ªæœ‰ç°å®æ„ä¹‰ï¼ˆæ¯”å¦‚æŒ‡å®šäº†ä¸–ç•Œåæ ‡ç³»ï¼‰çš„è§£ã€‚</p><h3 id="A-factorization-method-â€“Tomasi-amp-Kanade-algorithm"><a href="#A-factorization-method-â€“Tomasi-amp-Kanade-algorithm" class="headerlink" title="A factorization method â€“Tomasi &amp; Kanade algorithm"></a>A factorization method â€“Tomasi &amp; Kanade algorithm</h3><blockquote><p>C. Tomasi and T. KanadeShape and motion from image streams under orthography: A factorization </p><p>method. <em>IJCV</em>, 9(2):137-154, November 1992. </p></blockquote><h4 id="Data-centering"><a href="#Data-centering" class="headerlink" title="Data centering"></a>Data centering</h4><p><strong>Centering:</strong> subtract the centroid of the image points</p><img src="/images/cs231a-lecture7-1/image-20221105203438027.png" style="zoom:50%;"><img src="/images/cs231a-lecture7-1/image-20221105203500148.png" style="zoom:50%;"><img src="/images/cs231a-lecture7-1/image-20221105203515533.png" style="zoom:50%;"><p>Thus, after centering, each <strong>normalize</strong>d observed point is related to the 3D point by</p><img src="/images/cs231a-lecture7-1/image-20221106145308078.png" style="zoom:50%;"><p>If the centroid of points in 3D = center of the world reference system</p><img src="/images/cs231a-lecture7-1/image-20221106145352145.png" style="zoom:50%;"><p><strong>æ€è€ƒï¼š</strong></p><p>è¿™é‡Œçš„å‡ ä½•æ„ä¹‰åº”è¯¥æ˜¯ï¼Œæœ¬æ¥è¿™ä¸€ç»„$X_j$æŠ•å½±åˆ°å›¾åƒ$i$ä¸­ï¼Œè¿˜éœ€è¦å¹³ç§»$b_i$æ‰èƒ½å¤Ÿä¸å›¾ä¸­çš„$x_{ij}$å¯¹åº”ä¸Šï¼›è€Œnormalizeä¹‹åï¼Œå¹³ç§»é‡$b_i$å°±è¢«æŠµæ¶ˆäº†ã€‚</p><h4 id="Factorization"><a href="#Factorization" class="headerlink" title="Factorization"></a>Factorization</h4><blockquote><p>å¤ä¹ ï¼šçº¿æ€§ä»£æ•°</p></blockquote><img src="/images/cs231a-lecture7-1/image-20221120163624398.png" style="zoom:50%;"><p><strong>Factorizing the Measurement Matrix</strong></p><img src="/images/cs231a-lecture7-1/image-20221106150020351.png" style="zoom:50%;"><img src="/images/cs231a-lecture7-1/image-20221106150042818.png" style="zoom:50%;"><img src="/images/cs231a-lecture7-1/image-20221106151035346.png" style="zoom:50%;"><img src="/images/cs231a-lecture7-1/image-20221106151141903.png" style="zoom:50%;"><img src="/images/cs231a-lecture7-1/image-20221106151234386.png" style="zoom:50%;"><p><strong>ç–‘é—®</strong></p><p><strong>Qï¼šä»€ä¹ˆæ˜¯å¥‡å¼‚å€¼åˆ†è§£ï¼Ÿ</strong></p><p><strong>Aï¼š</strong>è§<a href="https://zh.m.wikipedia.org/zh-hans/%E5%A5%87%E5%BC%82%E5%80%BC%E5%88%86%E8%A7%A3">å¥‡å¼‚å€¼åˆ†è§£-ç»´åŸºç™¾ç§‘</a>å’Œ<a href="https://www.cnblogs.com/pinard/p/6251584.html">å¥‡å¼‚å€¼åˆ†è§£(SVD)åŸç†ä¸åœ¨é™ç»´ä¸­çš„åº”ç”¨</a>ã€‚</p><p><strong>Qï¼šè¿™é‡Œçš„$W_3$æŒ‡çš„æ˜¯$W$ä¸­å‰3ä¸ªå¥‡å¼‚å€¼å—ï¼Ÿ$W$ä¸­çš„å¥‡å¼‚å€¼æ˜¯æŒ‰ç…§å¤§å°æ’åºçš„å—ï¼Ÿ</strong></p><p><strong>Aï¼š</strong>ä»ç½‘ä¸ŠæŸ¥åˆ°çš„ç»“æœæ˜¯<strong>å¯ä»¥éšæ„æ’åˆ—ï¼Œå¥‡å¼‚å€¼ä¸å¥‡å¼‚å‘é‡å¯¹åº”ä¸Šå°±è¡Œ</strong>ï¼›ä¸è¿‡<strong>å¸¸è§çš„åšæ³•æ˜¯å°†å¥‡å¼‚å€¼ç”±å¤§è€Œå°æ’åˆ—ï¼Œå¦‚æ­¤$W$ä¾¿èƒ½ç”±$D$å”¯ä¸€ç¡®å®šäº†</strong>ï¼ˆä½†æ˜¯$U$å’Œ$V$ä»ç„¶ä¸èƒ½ç¡®å®šï¼‰ã€‚è¿™é‡Œ$W$çš„å¥‡å¼‚å€¼åº”è¯¥æ˜¯æŒ‰å¤§å°æ’åºçš„ï¼Œ$W_3$å°±æ˜¯å‰3ä¸ªå¥‡å¼‚å€¼ï¼Œä¹Ÿæ˜¯æœ€å¤§çš„3ä¸ªå¥‡å¼‚å€¼ï¼ˆä¸Šé¢ä¹Ÿè¯´äº†$D$çš„ç§©ä¸º3ï¼Œåªåº”è¯¥å­˜åœ¨3ä¸ªéé›¶å¥‡å¼‚å€¼ï¼Œæ›´å°çš„å¥‡å¼‚å€¼å¯èƒ½å°±æ˜¯å™ªå£°äº†ï¼Œè¿‘ä¼¼çš„æ•ˆæœä¹Ÿä¸å¥½ï¼‰ã€‚</p><p><strong>Qï¼šå…³äºSVDåˆ†è§£çš„å”¯ä¸€æ€§è®¨è®º</strong></p><p><strong>Aï¼š</strong>è¯¥éƒ¨åˆ†å‚è€ƒç½‘å€ï¼š<a href="http://amsword.is-programmer.com/posts/35966.html">å¯¹SVDå”¯ä¸€æ€§çš„ç†è§£</a></p><p><strong>å›é¡¾SVDåˆ†è§£çš„å®šä¹‰ï¼š</strong></p><p>å¯¹äºä»»ä½•ä¸€ä¸ª$m \times n$çš„çŸ©é˜µ$A$ï¼Œéƒ½å­˜åœ¨è¿™æ ·ä¸€ä¸ªåˆ†è§£<br>$$<br>A=U\Sigma V^T<br>$$<br>å…¶ä¸­$U$æ˜¯$m \times m$çš„é…‰çŸ©é˜µï¼Œä¹Ÿå°±æ˜¯$UU^* = I$ï¼›$V$æ˜¯ä¸€ä¸ª$n \times n$çš„é…‰çŸ©é˜µï¼›$\Sigma$æ˜¯ä¸€ä¸ª$m \times n$çš„çŸ©é˜µï¼Œéå¯¹è§’ä¸Šçš„å…ƒç´ éƒ½æ˜¯0ï¼Œå¯¹è§’çº¿ä¸Šçš„å…ƒç´ éƒ½æ˜¯éè´Ÿçš„å®æ•°ï¼Œä¸ç®¡$A$æ˜¯å®æ•°çŸ©é˜µï¼Œè¿˜æ˜¯é…‰ç©ºé—´ä¸­çš„çŸ©é˜µï¼Œæˆ–è€…è¯´æœ‰è™šæ•°å…ƒç´ ã€‚</p><p><strong>å…ˆè®¨è®º$\Sigma$çš„å”¯ä¸€æ€§ï¼š</strong></p><p>å‡è®¾æœ‰ä¸€ä¸ªç½®æ¢çŸ©é˜µ$J$ï¼ˆå·¦ä¹˜å®ƒæ˜¯åšè¡Œäº¤æ¢ï¼Œå³ä¹˜å®ƒæ˜¯åšåˆ—äº¤æ¢ï¼Œè€Œä¸”$JJ^T=I$ï¼Œ$J_m$è¡¨ç¤ºçŸ©é˜µå¤§å°ä¸º$m \times m$ï¼‰ï¼Œé‚£ä¹ˆä»ç„¶æœ‰ä¸‹é¢çš„å¼å­æˆç«‹ï¼š<br>$$<br>A=(UJ_m)(J_m\Sigma J_n)(VJ_n)^T<br>$$<br>è¿™è¯´æ˜ï¼Œ<strong>SVDåˆ†è§£æ˜¯ä¸å”¯ä¸€çš„</strong>ã€‚ä½†æ˜¯æ³¨æ„åˆ°$\Sigma$æ˜¯å¯¹è§’çŸ©é˜µï¼Œå¯¹è§’çº¿ä¸Šçš„å…ƒç´ ï¼ˆå¥‡å¼‚å€¼ï¼‰æ˜¯ç”±çŸ©é˜µ$A$å”¯ä¸€ç¡®å®šçš„ï¼Œä¸Šé¢çš„å˜æ¢ä»…ä»…æ˜¯å°†å®ƒå¯¹è§’çº¿ä¸Šçš„å…ƒç´ è¿›è¡Œäº†ä¸€ä¸ªé‡æ–°çš„æ’åˆ—ï¼Œæˆ‘ä»¬å¯ä»¥<strong>å›ºå®š$\Sigma$ä¸­å…ƒç´ çš„æ’åˆ—ï¼ˆæ¯”å¦‚ä»å¤§åˆ°å°æ’åºï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥å”¯ä¸€ç¡®å®š$\Sigma$çŸ©é˜µã€‚</strong></p><p><strong>å†è®¨è®º$\Sigma$ç¡®å®šæ—¶ï¼Œ$U$ä¸$V$çš„å”¯ä¸€æ€§ï¼š</strong></p><p>å‡è®¾æœ‰ä¸€ä¸ªå¯¹è§’æ–¹é˜µ$K$ï¼ˆå¯¹è§’çº¿ä¸Šå…ƒç´ å…·æœ‰$e^{i\phi}$çš„å½¢å¼ï¼Œä¸”$\phi$äº’ä¸ç›¸åŒï¼Œ$KK^*=I$ï¼Œ$K_m$è¡¨ç¤ºçŸ©é˜µå¤§å°ä¸º$m \times m$ï¼‰ï¼Œé‚£ä¹ˆä»ç„¶æœ‰ä¸‹é¢çš„å¼å­æˆç«‹ï¼š<br>$$<br>A = U K_m K_m^* \Sigma K_n (  V K_n^* )^T<br>$$<br>å½“$K_m$å¯¹è§’çº¿ä¸Šç¬¬$i$ä¸ªå…ƒç´ å’Œ$K_n$å¯¹è§’çº¿ä¸Šç¬¬$i$ä¸ªå…ƒç´ ç›¸åŒæ—¶ï¼Œæœ‰$K_m^*\Sigma K_n = \Sigma$</p><p>è¿™è¯´æ˜ï¼Œ<strong>åœ¨$\Sigma$ç¡®å®šæ—¶ï¼ŒSVDåˆ†è§£å¾—åˆ°çš„$U$ä¸$V$ä¹Ÿä¸æ˜¯å”¯ä¸€çš„ã€‚</strong></p><h3 id="Affine-Ambiguity"><a href="#Affine-Ambiguity" class="headerlink" title="Affine Ambiguity"></a>Affine Ambiguity</h3><p>æˆ‘ä»¬åœ¨ä¸Šé¢æŠŠAffine SFMé—®é¢˜æè¿°æˆ$D=MS$ï¼Œå…¶ä¸­$D$æ˜¯$2m \times n$ä¸ªäºŒç»´ç‚¹$x_{ij}$æ„æˆçš„çŸ©é˜µï¼Œ$M$æ˜¯$m$å¼ å›¾åƒçš„$A_i$çŸ©é˜µæ„æˆçš„çŸ©é˜µï¼Œè€Œ$S$åˆ™æ˜¯$n$ä¸ªä¸‰ç»´ç‚¹$X_j$æ„æˆçš„çŸ©é˜µã€‚</p><p>é€šè¿‡å¯¹çŸ©é˜µ$D$åšSVDåˆ†è§£ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°$\begin{cases} &amp;M &amp;\approx U_3 \\ &amp;S &amp;\approx W_3V_3^T \end{cases}$</p><img src="/images/cs231a-lecture7-1/image-20221106151611906.png" style="zoom:50%;"><p>ä½†åˆ†è§£çš„ç»“æœä¸æ˜¯å”¯ä¸€çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><img src="/images/cs231a-lecture7-1/image-20221106151623116.png" style="zoom:50%;"><img src="/images/cs231a-lecture7-1/image-20221106151712582.png" style="zoom:50%;"><p><strong>ç–‘é—®</strong></p><p><strong>Qï¼šè¿™éƒ¨åˆ†è¯´çš„â€œåˆ†è§£çš„ç»“æœä¸å”¯ä¸€â€æŒ‡çš„æ˜¯SVDåˆ†è§£ç»“æœä¸å”¯ä¸€ï¼Œè¿˜æ˜¯æŒ‡å¯¹$M$ä¸$S$è¿›è¡Œä¸€äº›å˜æ¢å¯ä»¥å¾—åˆ°åŒæ ·çš„ç»“æœï¼Ÿ</strong></p><p><strong>Aï¼š</strong>æˆ‘è§‰å¾—æ˜¯åä¸€ç§ï¼ŒæŒ‡çš„æ˜¯å¯èƒ½SVDåˆ†è§£çš„ç»“æœå’Œå®é™…çš„æƒ…å†µå·®äº†ä¸€ä¸ªä»¿å°„å˜æ¢ã€‚</p><h3 id="Similarity-Ambiguity"><a href="#Similarity-Ambiguity" class="headerlink" title="Similarity Ambiguity"></a>Similarity Ambiguity</h3><img src="/images/cs231a-lecture7-1/image-20221106153553521.png" style="zoom:50%;"><img src="/images/cs231a-lecture7-1/image-20221106153640184.png" style="zoom:50%;">]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CS231A </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS231A Lecture 6ï¼šStereo Systems</title>
      <link href="2022/11/05/cs231a-lecture6/"/>
      <url>2022/11/05/cs231a-lecture6/</url>
      
        <content type="html"><![CDATA[<h1 id="CS231A-Lecture-6ï¼šStereo-Systems"><a href="#CS231A-Lecture-6ï¼šStereo-Systems" class="headerlink" title="CS231A Lecture 6ï¼šStereo Systems"></a>CS231A Lecture 6ï¼šStereo Systems</h1><blockquote><p><strong>Reading:</strong> </p><p>[HZ] Chapter: 9 â€œEpip. Geom. and the Fundam. Matrix Transf.â€</p><p>[HZ] Chapter: 18 â€œN view computational methodsâ€</p><p>[FP] Chapters: 7 â€œStereopsisâ€</p><p>[FP] Chapters: 8 â€œStructure from Motionâ€</p></blockquote><h2 id="Rectification"><a href="#Rectification" class="headerlink" title="Rectification"></a>Rectification</h2><h3 id="Epipolar-geometry"><a href="#Epipolar-geometry" class="headerlink" title="Epipolar geometry"></a>Epipolar geometry</h3><img src="/images/cs231a-lecture6/image-20221030213010701.png" style="zoom:50%;"><h3 id="Epipolar-Constraint"><a href="#Epipolar-Constraint" class="headerlink" title="Epipolar Constraint"></a>Epipolar Constraint</h3><img src="/images/cs231a-lecture6/image-20221030213032834.png" style="zoom:50%;"><img src="/images/cs231a-lecture6/image-20221030213049192.png" style="zoom:50%;"><h3 id="Parallel-image-planes"><a href="#Parallel-image-planes" class="headerlink" title="Parallel image planes"></a>Parallel image planes</h3><img src="/images/cs231a-lecture6/image-20221030213159214.png" style="zoom:50%;"><img src="/images/cs231a-lecture6/image-20221030213211904.png" style="zoom:50%;"><p><strong>Essential matrix for parallel images</strong></p><img src="/images/cs231a-lecture6/image-20221030213231412.png" style="zoom:50%;"><p><strong>What are the directions of epipolar lines?</strong></p><img src="/images/cs231a-lecture6/image-20221030214447727.png" style="zoom:50%;"><p><strong>How are p and pâ€™ related?</strong></p><img src="/images/cs231a-lecture6/image-20221030214512860.png" style="zoom:50%;"><h3 id="Rectification-making-two-images-â€œparallelâ€"><a href="#Rectification-making-two-images-â€œparallelâ€" class="headerlink" title="Rectification: making two images â€œparallelâ€"></a>Rectification: making two images â€œparallelâ€</h3><p><strong>Rectification</strong></p><img src="/images/cs231a-lecture6/image-20221105160019522.png" style="zoom:50%;"><p><strong>Example</strong></p><img src="/images/cs231a-lecture6/image-20221105155837863.png" style="zoom:50%;"><p><strong>Why it is useful?</strong> </p><ul><li>Epipolar constraint $\rightarrow v = vâ€™$</li><li>New views can be synthesized by linear interpolation</li></ul><p><strong>Why are parallel images useful?</strong></p><ul><li><p><strong>Makes triangulation easy</strong></p><img src="/images/cs231a-lecture6/image-20221105160513904.png" style="zoom:50%;"><p>è¿™é‡Œæœ‰ç‚¹ç±»ä¼¼åŒç›®ç›¸æœºçš„æ¨¡å‹äº†ã€‚</p></li><li><p><strong>Makes the correspondence problem easier</strong></p></li></ul><h2 id="Correspondence-problem"><a href="#Correspondence-problem" class="headerlink" title="Correspondence problem"></a>Correspondence problem</h2><img src="/images/cs231a-lecture6/image-20221105162100749.png" style="zoom:50%;"><img src="/images/cs231a-lecture6/image-20221105162432580.png" style="zoom:50%;"><h3 id="Correlation-Methods"><a href="#Correlation-Methods" class="headerlink" title="Correlation Methods"></a>Correlation Methods</h3><h4 id="A-Simple-Idea"><a href="#A-Simple-Idea" class="headerlink" title="A Simple Idea"></a>A Simple Idea</h4><img src="/images/cs231a-lecture6/image-20221105163330962.png" style="zoom:50%;"><img src="/images/cs231a-lecture6/image-20221105163341560.png" style="zoom:50%;"><p><strong>æ€è€ƒï¼š</strong></p><p>è¿™é‡Œçš„é—®é¢˜æ˜¯ï¼Œåªæ£€æŸ¥ä¸€ä¸ªåƒç´ ç‚¹ï¼Œæ²¡æœ‰è€ƒè™‘åˆ°åƒç´ å€¼ç›¸åŒçš„ç‚¹å¯èƒ½æ¯”è¾ƒå¤šï¼Œå¾ˆå®¹æ˜“å¯¼è‡´é”™è¯¯åŒ¹é…ã€‚</p><h4 id="Window-based-correlation"><a href="#Window-based-correlation" class="headerlink" title="Window-based correlation"></a>Window-based correlation</h4><img src="/images/cs231a-lecture6/image-20221105163409282.png" style="zoom:50%;"><img src="/images/cs231a-lecture6/image-20221105164001164.png" style="zoom:50%;"><p><strong>æ€è€ƒï¼š</strong></p><p>è¿™é‡Œçš„é—®é¢˜æ˜¯ï¼Œåªè®¡ç®—ä¸¤ä¸ªçŸ©é˜µçš„ç‚¹ä¹˜ï¼Œå¹¶ä¸”è®¤ä¸ºæœ€å¤§å€¼æ˜¯åŒ¹é…çš„æœ€å¥½çš„ã€‚</p><p>è¿™æ ·å¤„ç†å¾ˆå®¹æ˜“å—åˆ°å…‰ç…§æˆ–è€…æ›å…‰çš„å½±å“ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><strong>Changes of brightness/exposure</strong></p><img src="/images/cs231a-lecture6/image-20221105164148204.png" style="zoom:50%;"><h4 id="Normalized-cross-correlation"><a href="#Normalized-cross-correlation" class="headerlink" title="Normalized cross-correlation"></a>Normalized cross-correlation</h4><img src="/images/cs231a-lecture6/image-20221105165228121.png" style="zoom:50%;"><h4 id="Effect-of-the-windowâ€™s-size"><a href="#Effect-of-the-windowâ€™s-size" class="headerlink" title="Effect of the windowâ€™s size"></a>Effect of the windowâ€™s size</h4><img src="/images/cs231a-lecture6/image-20221105165302206.png" style="zoom:50%;"><h4 id="Issues"><a href="#Issues" class="headerlink" title="Issues"></a>Issues</h4><ul><li><p><strong>Fore shortening effect</strong></p><img src="/images/cs231a-lecture6/image-20221105171518156.png" style="zoom:50%;"><p>è¿™ä¸ªç½‘ç«™æŠŠ<em>Fore shortening effect</em>ä»‹ç»çš„éå¸¸æ¸…æ¥šï¼š<a href="https://drawpaintacademy.com/foreshortening/">Foreshortening â€“ What It Means and How to Paint It</a></p><p>ä»ä¸Šå›¾ä¸­ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå·¦è¾¹ç›¸æœºæ‹æ‘„çš„ç‰©ä½“å¾ˆé•¿ï¼Œè€Œå³è¾¹å› ä¸ºè·ç¦»è¾ƒè¿œå°±ç¼©çŸ­äº†ã€‚å‰é¢å‡ ç§ç®—æ³•åœ¨è¿™é‡Œå®¹æ˜“å‡ºé—®é¢˜ï¼Œä»–ä»¬éƒ½æ˜¯åœ¨ä¸€æ¡æ°´å¹³çº¿ä¸ŠæŸ¥æ‰¾å›ºå®šå¤§å°çš„windowï¼Œä½†æ˜¯åˆ©ç”¨å›¾åƒé‡‘å­—å¡”åº”è¯¥å¯ä»¥å¤„ç†è¿™ç§é—®é¢˜ã€‚</p></li><li><p><strong>Occlusions</strong></p><img src="/images/cs231a-lecture6/image-20221105171537076.png" style="zoom:50%;"><p>å› ä¸ºé®æŒ¡å¯¼è‡´ä¸¤ä¸ªç›¸æœºè§‚å¯Ÿçš„å†…å®¹ä¸ä¸€æ ·ã€‚</p></li><li><p><strong>Base line trade-off</strong></p><img src="/images/cs231a-lecture6/image-20221105171610154.png" style="zoom:50%;"></li><li><p><strong>Homogeneous regions</strong> </p><img src="/images/cs231a-lecture6/image-20221105171706388.png" style="zoom:50%;"></li><li><p><strong>Repetitive patterns</strong></p><img src="/images/cs231a-lecture6/image-20221105171730038.png" style="zoom:50%;"></li></ul><p><strong>Correspondence problem is difficult!</strong></p><img src="/images/cs231a-lecture6/image-20221105194244286.png" style="zoom:50%;"><h4 id="Non-local-constraints"><a href="#Non-local-constraints" class="headerlink" title="Non-local constraints"></a>Non-local constraints</h4><img src="/images/cs231a-lecture6/image-20221105194521604-16677155424901.png" style="zoom:50%;">]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CS231A </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS231A Lecture 5ï¼šEpipolar Geometry</title>
      <link href="2022/11/01/cs231a-lecture5/"/>
      <url>2022/11/01/cs231a-lecture5/</url>
      
        <content type="html"><![CDATA[<h1 id="CS231A-Lecture-5ï¼šEpipolar-Geometry"><a href="#CS231A-Lecture-5ï¼šEpipolar-Geometry" class="headerlink" title="CS231A Lecture 5ï¼šEpipolar Geometry"></a>CS231A Lecture 5ï¼šEpipolar Geometry</h1><blockquote><p><strong>Reading:</strong> </p><p>[HZ] Chapter: 4 â€œEstimation â€“ 2D perspective transformations</p><p>[HZ] Chapter: 9 â€œEpipolar Geometry and the Fundamental Matrix Transformationâ€</p><p>[HZ] Chapter: 11 â€œComputation of the Fundamental Matrix Fâ€</p><p>[FP] Chapter: 7 â€œStereopsisâ€</p><p>[FP] Chapter: 8 â€œStructure from Motionâ€</p></blockquote><h2 id="Why-is-stereo-useful"><a href="#Why-is-stereo-useful" class="headerlink" title="Why is stereo useful?"></a>Why is stereo useful?</h2><h3 id="Recovering-structure-from-a-single-view"><a href="#Recovering-structure-from-a-single-view" class="headerlink" title="Recovering structure from a single view"></a>Recovering structure from a single view</h3><img src="/images/cs231a-lecture5/image-20221028213117490.png" style="zoom:50%;"><p><strong>Why is it so difficult?</strong></p><p>Intrinsic ambiguity of the mapping from 3D to image (2D)</p><h3 id="Triangulation"><a href="#Triangulation" class="headerlink" title="Triangulation"></a>Triangulation</h3><img src="/images/cs231a-lecture5/image-20221028213449943.png" style="zoom:50%;"><img src="/images/cs231a-lecture5/image-20221028213838238.png" style="zoom:50%;"><h3 id="Multi-stereo-view-geometry"><a href="#Multi-stereo-view-geometry" class="headerlink" title="Multi (stereo)-view geometry"></a>Multi (stereo)-view geometry</h3><img src="/images/cs231a-lecture5/image-20221030112623694.png" style="zoom:50%;"><h2 id="Epipolar-geometry"><a href="#Epipolar-geometry" class="headerlink" title="Epipolar geometry"></a>Epipolar geometry</h2><img src="/images/cs231a-lecture5/image-20221030113104085.png" style="zoom:50%;"><p><strong>Example: Parallel image planes</strong></p><img src="/images/cs231a-lecture5/image-20221030113159909.png" style="zoom:50%;"><p><strong>Example: Forward translation</strong></p><img src="/images/cs231a-lecture5/image-20221030113222727.png" style="zoom:50%;"><h3 id="Epipolar-constraints"><a href="#Epipolar-constraints" class="headerlink" title="Epipolar constraints"></a>Epipolar constraints</h3><ul><li>Two views of the same object </li><li>Given a point on left image, how can I find the corresponding point on right image?</li></ul><img src="/images/cs231a-lecture5/image-20221030152616682.png" style="zoom:50%;"><h3 id="The-Essential-Matrix"><a href="#The-Essential-Matrix" class="headerlink" title="The Essential Matrix"></a>The Essential Matrix</h3><img src="/images/cs231a-lecture5/image-20221030152708826.png" alt="=" style="zoom:50%;"><img src="/images/cs231a-lecture5/image-20221030153256822.png" style="zoom:50%;"><p><strong>Cross product as matrix multiplication</strong></p><img src="/images/cs231a-lecture5/image-20221030160127533.png" style="zoom: 50%;"><img src="/images/cs231a-lecture5/image-20221030160245903.png" style="zoom:50%;"><img src="/images/cs231a-lecture5/image-20221030160512471.png" style="zoom:50%;"><p><strong>æ€è€ƒï¼š</strong></p><ul><li><p>åœ¨è¿™ä¸ªéƒ¨åˆ†ï¼Œç‚¹$p$å’Œ$pâ€™$éƒ½æ˜¯é½æ¬¡çš„ï¼Œæ˜¯åƒç´ ç‚¹çš„å½’ä¸€åŒ–å¹³é¢ä¸Šçš„åæ ‡ï¼Œè€Œä¸æ˜¯åƒç´ ç‚¹åæ ‡ï¼›</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç›¸æœºæ˜¯æ ‡å‡†ç›¸æœºï¼Œå†…å‚$K$ä¸ºå•ä½çŸ©é˜µã€‚</p></li><li><p>åœ¨ã€Šè§†è§‰SLAMåå››è®²ã€‹ä¸­ï¼Œä½¿ç”¨é½æ¬¡åæ ‡è¡¨ç¤ºåƒç´ ç‚¹æ˜¯ä¸ºäº†è¡¨è¾¾ä¸€ä¸ªæŠ•å½±å…³ç³»ï¼Œè¿™æ ·çš„è¯$s\mathrm p$ä¸$\mathrm p$æˆæŠ•å½±å…³ç³»ï¼Œå®ƒä»¬åœ¨é½æ¬¡æ„ä¹‰ä¸‹ç›¸ç­‰ï¼Œä¹Ÿå¯ä»¥è¯´åœ¨å°ºåº¦æ„ä¹‰ä¸‹ç›¸ç­‰ï¼›</p><p>è¿™æ ·å¤„ç†å°±å¯ä»¥å¿½ç•¥åƒç´ ç‚¹$p$å’Œ$pâ€™$çš„æ·±åº¦ï¼ˆå›æƒ³ä¸€ä¸‹ç›¸æœºæ¨¡å‹ï¼‰ï¼Œç„¶åå»æ„é€ ä¸€ä¸ªå’Œä¸Šé¢ç›¸åŒçš„ç­‰å¼ï¼ˆæ–¹æ³•éƒ½æ˜¯ç›¸åŒçš„ï¼Œç»†èŠ‚æœ‰ç‚¹åŒºåˆ«è€Œå·²ã€‚ã€‚ï¼‰</p></li><li><p>æœ¬è´¨çŸ©é˜µ$E$æ˜¯å¹³ç§»å’Œæ—‹è½¬åšå‰ä¹˜å¾—åˆ°çš„ï¼Œä½†æ˜¯ç”±äºå°ºåº¦ç­‰ä»·æ€§ï¼Œå®ƒåªæœ‰5ä¸ªè‡ªç”±åº¦ã€‚</p></li></ul><p><strong>ç–‘é—®ï¼š</strong></p><p><strong>Qï¼šä»€ä¹ˆæ˜¯canonical camerasï¼Ÿ</strong></p><p><strong>Aï¼š</strong>TODOï¼ˆæ„Ÿè§‰æ˜¯ä¸€ä¸ªå®šä¹‰å§ï¼Œå†…å‚å·²çŸ¥çš„ç›¸æœºå°±å¯ä»¥è½¬åŒ–ä¸ºcanonical cameraï¼Œç„¶åcanonical cameraçš„å†…å‚çŸ©é˜µä¸ºå•ä½çŸ©é˜µï¼‰</p><h3 id="The-Fundamental-Matrix"><a href="#The-Fundamental-Matrix" class="headerlink" title="The Fundamental Matrix"></a>The Fundamental Matrix</h3><p>â€‹    <img src="/images/cs231a-lecture5/image-20221030161447171.png" style="zoom:50%;"></p><img src="/images/cs231a-lecture5/image-20221030161504159.png" style="zoom:50%;"><img src="/images/cs231a-lecture5/image-20221030161522518.png" alt="=" style="zoom:50%;"><img src="/images/cs231a-lecture5/image-20221030161535301.png" style="zoom:50%;"><p><strong>æ€è€ƒï¼š</strong></p><ul><li>è¿™éƒ¨åˆ†çš„pptå’Œ<strong>Essential Matrix</strong>éå¸¸ç±»ä¼¼ï¼Œä¸è¿‡è¿™éƒ¨åˆ†è€ƒè™‘äº†ç›¸æœºå†…å‚$K$ï¼ŒæŒ‡å‡ºäº†åƒç´ ç‚¹$p$ä¸canonical cameraä¸‹åƒç´ ç‚¹$p_c$çš„å¯¹åº”å…³ç³»ã€‚</li><li>åœ¨ã€Šè§†è§‰SLAMåå››è®²ã€‹ä¸­ï¼Œæ˜¯ç›´æ¥ä»åƒç´ ç‚¹$p$æ¨å¯¼åˆ°äº†æœ€åçš„ä¸€ä¸ªç­‰å¼ï¼Œç„¶åæŠŠç­‰å¼ä¸­é—´çš„éƒ¨åˆ†è®°ä½œåŸºç¡€çŸ©é˜µ$F$å’Œæœ¬è´¨çŸ©é˜µ$E$ï¼ˆæ‰€ä»¥è®²çš„æ²¡è¿™é—¨è¯¾çš„æ¸…æ¥šã€‚ã€‚ï¼‰</li><li>æœ¬è´¨çŸ©é˜µåˆ™æ˜¯åŸºæœ¬çŸ©é˜µçš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œæ˜¯åœ¨å½’ä¸€åŒ–å›¾åƒåæ ‡ä¸‹çš„åŸºæœ¬çŸ©é˜µã€‚</li></ul><h3 id="Why-F-is-useful"><a href="#Why-F-is-useful" class="headerlink" title="Why F is useful?"></a>Why F is useful?</h3><ul><li>Suppose $F$ is known</li><li>No additional information about the scene and camera is given</li><li>Given a point on left image, we can compute the corresponding epipolar line in the second image</li><li>$F$ captures information about the epipolar geometry of 2 views + camera parameters </li><li><strong>MORE IMPORTANTLY:</strong> $F$ gives constraints on how the scene changes under view point transformation (without reconstructing the scene!)</li><li>Powerful tool in:<ul><li>3D reconstruction</li><li>Multi-view object/scene matching </li></ul></li></ul><h2 id="Estimating-F"><a href="#Estimating-F" class="headerlink" title="Estimating F"></a>Estimating F</h2><h3 id="The-Eight-Point-Algorithm"><a href="#The-Eight-Point-Algorithm" class="headerlink" title="The Eight-Point Algorithm"></a>The Eight-Point Algorithm</h3><img src="/images/cs231a-lecture5/image-20221030162257043.png" style="zoom:50%;"><img src="/images/cs231a-lecture5/image-20221030162313064.png" style="zoom:50%;"><img src="/images/cs231a-lecture5/image-20221030162412915.png" style="zoom:50%;"><img src="/images/cs231a-lecture5/image-20221030182108208.png" style="zoom:50%;"><img src="/images/cs231a-lecture5/image-20221030182119932.png" style="zoom:50%;"><p><strong>Problems with the 8-Point Algorithm</strong></p><img src="/images/cs231a-lecture5/image-20221030182200026.png" style="zoom:50%;"><img src="/images/cs231a-lecture5/image-20221030182212332.png" style="zoom:50%;"><p><strong>æ€è€ƒï¼š</strong></p><p>åœ¨ã€Šè§†è§‰SLAMåå››è®²ã€‹ä¸­ï¼Œä¸»è¦ä»‹ç»äº†å…«ç‚¹æ³•æ±‚è§£æœ¬è´¨çŸ©é˜µ$E$ã€‚</p><p>ä¸ä¸Šé¢ä¸åŒçš„æ˜¯ï¼Œæœ¬è´¨çŸ©é˜µ$E$çš„$\Sigma=diag(\sigma,\sigma,0)$ï¼Œè€ŒåŸºç¡€çŸ©é˜µ$F$çš„$\Sigma=diag(s_1,s_2,0)$ã€‚</p><h3 id="The-Normalized-Eight-Point-Algorithm"><a href="#The-Normalized-Eight-Point-Algorithm" class="headerlink" title="The Normalized Eight-Point Algorithm"></a>The Normalized Eight-Point Algorithm</h3><h4 id="Normalization"><a href="#Normalization" class="headerlink" title="Normalization"></a>Normalization</h4><img src="/images/cs231a-lecture5/image-20221030182450732.png" style="zoom:50%;"><p><strong>Example of normalization</strong></p><img src="/images/cs231a-lecture5/image-20221030182509366.png" style="zoom:50%;"><img src="/images/cs231a-lecture5/image-20221030183453854.png" style="zoom:50%;"><h4 id="The-Normalized-Eight-Point-Algorithm-1"><a href="#The-Normalized-Eight-Point-Algorithm-1" class="headerlink" title="The Normalized Eight-Point Algorithm"></a>The Normalized Eight-Point Algorithm</h4><img src="/images/cs231a-lecture5/image-20221030183527084.png" style="zoom:50%;"><img src="/images/cs231a-lecture5/image-20221030183557170.png" style="zoom:50%;"><p><strong>æ€è€ƒï¼š</strong></p><p>è¿™é‡Œçš„normalizeå°±æ˜¯ç”¨å¦å¤–çš„å›¾åƒåæ ‡ç³»è¡¨ç¤ºåŒ¹é…çš„ç‰¹å¾ç‚¹ï¼Œè®©ç‰¹å¾ç‚¹æ›´å‡åŒ€çš„æ•£å¸ƒåœ¨åæ ‡åŸç‚¹å‘¨å›´ã€‚å¦‚æœç‰¹å¾ç‚¹æ•£å¸ƒåœ¨åŒä¸€å—åœ°åŒºï¼Œå½¼æ­¤éå¸¸æ¥è¿‘ï¼Œæˆ–è€…æœ‰çš„ç‰¹å¾ç‚¹çš„æ•°å€¼éå¸¸å¤§ï¼Œå¯èƒ½ä¼šå¯¹çŸ©é˜µ$W$å¸¦æ¥ä¸å¥½çš„å½±å“ã€‚</p><p>ç”±äºæ›´æ”¹äº†å›¾åƒçš„åæ ‡ç³»ï¼Œè¿™é‡Œè®¡ç®—å‡ºæ¥çš„åŸºç¡€çŸ©é˜µ$F$è¿˜éœ€è¦å†de-normalizeä¸€ä¸‹ã€‚</p><p>åœ¨course notes 3ä¸Šæœ‰æ›´è¯¦ç»†çš„è§£è¯»ï¼š</p><blockquote><p>The main problem of the standard Eight-Point Algorithm stems from the fact that $W$ is ill-conditioned for SVD. For SVD to work properly, $W$ should have one singular value equal to (or near) zero, with the other singular values being nonzero. However, the correspondences $p_i = (u_i, v_i, 1)$ will often have extremely large values in the first and second coordinates due to the pixel range of a modern camera (i.e. $p_i = (1832, 1023, 1)$). If the image points used to construct $W$ are in a relatively small region of the image, then each of the vectors for $p_i$ and $pâ€²_i$ will generally be very similar. Consequently, the constructed $W$ matrix will have one very large singular value, with the rest relatively small.</p><p>To solve this problem, we will normalize the points in the image before constructing $W$. This means we pre-condition $W$ by applying both a translation and scaling on the image coordinates.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CS231A </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS231A Lecture 4ï¼šSingle View Metrology</title>
      <link href="2022/10/28/cs231a-lecture4/"/>
      <url>2022/10/28/cs231a-lecture4/</url>
      
        <content type="html"><![CDATA[<h1 id="CS231A-Lecture-4ï¼šSingle-View-Metrology"><a href="#CS231A-Lecture-4ï¼šSingle-View-Metrology" class="headerlink" title="CS231A Lecture 4ï¼šSingle View Metrology"></a>CS231A Lecture 4ï¼šSingle View Metrology</h1><blockquote><p><strong>Reading:</strong></p><p>[HZ] Chapter 2 â€œProjective Geometry and Transformation in 2Dâ€</p><p>[HZ] Chapter 3 â€œProjective Geometry and Transformation in 3Dâ€</p><p>[HZ] Chapter 8 â€œMore Single View Geometryâ€</p><p>[Hoeim &amp; Savarese] Chapter 2</p></blockquote><h2 id="2D-transformations"><a href="#2D-transformations" class="headerlink" title="2D transformations"></a>2D transformations</h2><p>è¿™éƒ¨åˆ†ä»‹ç»äº†å››ç§2Då˜æ¢ï¼šIsometriesã€Similaritiesã€Affinityã€Projective</p><h3 id="Isometries"><a href="#Isometries" class="headerlink" title="Isometries"></a>Isometries</h3><p>ç­‰è·å˜æ¢ï¼ˆIsometriesï¼‰ï¼Œæ—‹è½¬+å¹³ç§»ã€‚</p><img src="/images/cs231a-lecture4/image-20221027210229618.png" style="zoom: 50%;"><h3 id="Similarities"><a href="#Similarities" class="headerlink" title="Similarities"></a>Similarities</h3><p>ç›¸ä¼¼å˜æ¢ï¼ˆSimilaritiesï¼‰ï¼Œç›¸å½“äºæ˜¯ç­‰è·å˜æ¢ä¸å‡åŒ€ç¼©æ”¾çš„ç»“åˆã€‚</p><img src="/images/cs231a-lecture4/image-20221027210243854.png" style="zoom:50%;"><h3 id="Affinity"><a href="#Affinity" class="headerlink" title="Affinity"></a>Affinity</h3><p>ä»¿å°„å˜æ¢ï¼ˆAffineï¼‰ï¼Œæ˜¯ä¸€ä¸ªå¹³ç§»å˜æ¢ä¸ä¸€ä¸ªéå¥‡å¼‚çº¿æ€§å˜æ¢çš„ç»“åˆã€‚</p><p>å…¶ä¸­çš„AçŸ©é˜µå¯ä»¥ç†è§£æˆæ—‹è½¬ä¸éå‡åŒ€ç¼©æ”¾çš„ç»“åˆã€‚</p><img src="/images/cs231a-lecture4/image-20221027210255599.png" style="zoom:50%;"><img src="/images/cs231a-lecture4/image-20221027210325706.png" style="zoom:50%;"><img src="/images/cs231a-lecture4/image-20221027210342130.png" style="zoom:50%;"><h3 id="Projective"><a href="#Projective" class="headerlink" title="Projective"></a>Projective</h3><p>å°„å½±å˜æ¢ï¼ˆProjectiveï¼‰ï¼Œæ˜¯é½æ¬¡åæ ‡çš„ä¸€èˆ¬éå¥‡å¼‚çº¿æ€§å˜æ¢ï¼Œæ‰©å±•äº†ä»¿å°„å˜æ¢ï¼Œæ˜¯éé½æ¬¡åæ ‡çš„ä¸€èˆ¬éå¥‡å¼‚çº¿æ€§å˜æ¢å’Œä¸€ä¸ªå¹³ç§»çš„å¤åˆã€‚</p><p><strong>å®šä¹‰ï¼š</strong>ç”±æœ‰é™æ¬¡ä¸­å¿ƒå°„å½±çš„ç§¯å®šä¹‰çš„ä¸¤æ¡ç›´çº¿é—´çš„ä¸€ä¸€å¯¹åº”å˜æ¢ç§°ä¸ºä¸€ç»´å°„å½±å˜æ¢ã€‚ç”±æœ‰é™æ¬¡ä¸­å¿ƒå°„å½±çš„ç§¯å®šä¹‰çš„ä¸¤ä¸ªå¹³é¢ä¹‹é—´çš„ä¸€ä¸€å¯¹åº”å˜æ¢ç§°ä¸ºäºŒç»´å°„å½±å˜æ¢ã€‚</p><p><strong>æ€§è´¨ï¼š</strong>äº¤æ¯”ä¸å˜æ€§</p><p>å¦‚æœå¹³é¢ä¸Šç‚¹åœºçš„ç‚¹å»ºç«‹äº†ä¸€ä¸ªä¸€ä¸€å¯¹åº”ï¼Œå¹¶ä¸”æ»¡è¶³ï¼š</p><p>ï¼ˆ1ï¼‰ä»»ä½•å…±çº¿ä¸‰ç‚¹çš„è±¡ä»æ˜¯å…±çº¿ä¸‰ç‚¹ï¼›</p><p>ï¼ˆ2ï¼‰å…±çº¿å››ç‚¹çš„äº¤æ¯”ä¸å˜ã€‚</p><p>åˆ™è¿™ä¸ªä¸€ä¸€å¯¹åº”å«åšç‚¹åœºçš„å°„å½±å˜æ¢ï¼Œç®€ç§°å°„å½±å˜æ¢ã€‚</p><img src="/images/cs231a-lecture4/image-20221027210358442.png" style="zoom:50%;"><p><strong>The cross ratioï¼š</strong></p><img src="/images/cs231a-lecture4/image-20221027210443284.png" style="zoom:50%;"><p><strong>ä¸å…¶ä»–å˜æ¢çš„å…³ç³»ï¼š</strong></p><ul><li><p>$H$çŸ©é˜µæ˜¯å¯é€†å®çŸ©é˜µï¼Œå½“$v$ç­‰äº0åˆ™å˜æˆäº†ä»¿å°„å˜æ¢ï¼›åœ¨ä»¿å°„å˜æ¢çš„å‰æä¸‹ï¼Œå·¦ä¸Šè§’çš„$2 \times 2$çŸ©é˜µæ­£äº¤æ—¶ä¸ºç›¸ä¼¼å˜æ¢ï¼›å·¦ä¸Šè§’çŸ©é˜µè¡Œåˆ—å¼ä¸º1æ—¶ä¸ºç­‰è·å˜æ¢ã€‚</p></li><li><p>å°„å½±å˜æ¢å¯ä»¥åˆ†è§£æˆä¸€ä¸²äº¤æ¢é“¾çš„å¤åˆã€‚<br>$$<br>H = H_{S}H_{A}H_{P} =<br>\begin{bmatrix} sR&amp;t \\ 0^{T} &amp; 1 \end{bmatrix}<br>\begin{bmatrix} K&amp;0 \\ 0^{T} &amp; 1 \end{bmatrix}<br>\begin{bmatrix} I&amp;0 \\ V^{T} &amp; v \end{bmatrix} =<br>\begin{bmatrix} A &amp; Vt\\ V^{T} &amp; v \end{bmatrix}<br>$$<br>å¯ä»¥çœ‹å‡ºä¸Šå¼ä¸­ï¼Œ$H_S$è¡¨ç¤ºç›¸ä¼¼å˜æ¢ï¼Œ$H_A$è¡¨ç¤ºä»¿å°„å˜æ¢ï¼Œ$H_P$è¡¨ç¤ºå°„å½±å˜æ¢ã€‚</p></li></ul><h3 id="Questions"><a href="#Questions" class="headerlink" title="Questions"></a>Questions</h3><p><strong>Qï¼šå°„å½±å˜æ¢ä¸ä»¿å°„å˜æ¢çš„æ ¹æœ¬åŒºåˆ«åœ¨äºå°„å½±å˜æ¢ä¸­å‘é‡$v$ä¸ä¸º0ï¼Œå¦‚ä½•ç†è§£ï¼Ÿ</strong></p><p><strong>Aï¼š</strong>å¯¹äºç†æƒ³ç‚¹$(x_{1},x_{2},0)^{T}$åœ¨ä»¿å°„å˜æ¢ä¸å°„å½±å˜æ¢ä¸‹é¢çš„æ˜ å°„ï¼š</p><ul><li><p>åœ¨ä»¿å°„å˜æ¢ä¸‹ï¼š<br>$$<br>\begin{bmatrix} A &amp;t \\ 0^{T} &amp; 1 \end{bmatrix}<br>\begin{pmatrix} x_{1}\\ x_{2}\\ 0 \end{pmatrix} =<br>\begin{pmatrix} A\begin{pmatrix} x_{1}\\ x_{2} \end{pmatrix} \\ 0 \end{pmatrix}<br>$$</p></li><li><p>åœ¨å°„å½±å˜æ¢ä¸‹ï¼š<br>$$<br>\begin{bmatrix} A &amp;t \\ V^{T} &amp; v \end{bmatrix}<br>\begin{pmatrix} x_{1}\\ x_{2}\\ 0 \end{pmatrix} =<br>\begin{pmatrix} A\begin{pmatrix} x_{1}\\ x_{2} \end{pmatrix} \\ v_{1}x_{1}+v_{2}x_{2}<br>\end{pmatrix}<br>$$</p></li></ul><p>å¯ä»¥çœ‹å‡ºï¼Œ<strong>å¯¹äºä»¿å°„å˜æ¢ï¼Œç†æƒ³ç‚¹å˜æ¢åè¿˜æ˜¯ç†æƒ³ç‚¹ï¼›å¯¹äºå°„å½±å˜æ¢ï¼Œç†æƒ³ç‚¹è¢«æ˜ å°„åˆ°æœ‰é™ç‚¹ã€‚è¯´æ˜å°„å½±å˜æ¢èƒ½å¯¹æ¶ˆå½±ç‚¹å»ºæ¨¡</strong>ã€‚</p><h2 id="Vanishing-points-and-lines"><a href="#Vanishing-points-and-lines" class="headerlink" title="Vanishing points and lines"></a>Vanishing points and lines</h2><h3 id="Lines-in-a-2D-plane"><a href="#Lines-in-a-2D-plane" class="headerlink" title="Lines in a 2D plane"></a>Lines in a 2D plane</h3><img src="/images/cs231a-lecture4/image-20221028161446651.png" style="zoom:50%;"><h4 id="Intersecting-lines"><a href="#Intersecting-lines" class="headerlink" title="Intersecting lines"></a>Intersecting lines</h4><img src="/images/cs231a-lecture4/image-20221028161704759.png" style="zoom:50%;"><h4 id="2D-Points-at-infinity-ideal-points"><a href="#2D-Points-at-infinity-ideal-points" class="headerlink" title="2D Points at infinity (ideal points)"></a>2D Points at infinity (ideal points)</h4><img src="/images/cs231a-lecture4/image-20221028162147134.png" style="zoom:50%;"><img src="/images/cs231a-lecture4/image-20221028162226539.png" style="zoom:50%;"><h4 id="Lines-infinity-l-infty"><a href="#Lines-infinity-l-infty" class="headerlink" title="Lines infinity $l_\infty$"></a>Lines infinity $l_\infty$</h4><img src="/images/cs231a-lecture4/image-20221028162718069.png" style="zoom:50%;"><h4 id="Projective-transformation"><a href="#Projective-transformation" class="headerlink" title="Projective transformation"></a>Projective transformation</h4><p>è¿™éƒ¨åˆ†å’Œ2D transformations-Questionsæ˜¯å¯¹åº”çš„ã€‚</p><h5 id="a-point-at-infinity"><a href="#a-point-at-infinity" class="headerlink" title="a point at infinity"></a>a point at infinity</h5><img src="/images/cs231a-lecture4/image-20221028163811252.png" style="zoom:50%;"><h5 id="a-line-in-2D"><a href="#a-line-in-2D" class="headerlink" title="a line (in 2D)"></a>a line (in 2D)</h5><img src="/images/cs231a-lecture4/image-20221028163842739.png" style="zoom:50%;"><h3 id="Points-and-planes-in-3D"><a href="#Points-and-planes-in-3D" class="headerlink" title="Points and planes in 3D"></a>Points and planes in 3D</h3><p><strong>3Dç©ºé—´ä¸­çš„ç‚¹ä¸å¹³é¢ï¼š</strong></p><img src="/images/cs231a-lecture4/image-20221028164728893.png" style="zoom:50%;"><p><strong>3Dç©ºé—´ä¸­çš„ç›´çº¿ï¼š</strong></p><img src="/images/cs231a-lecture4/image-20221028164740978.png" style="zoom:50%;"><p><img src="/images/cs231a-lecture4/image-20221028165448251.png"></p><p><strong>Points at infinity in 3D</strong></p><img src="/images/cs231a-lecture4/image-20221028164857067.png" style="zoom:50%;"><h4 id="Vanishing-points"><a href="#Vanishing-points" class="headerlink" title="Vanishing points"></a>Vanishing points</h4><img src="/images/cs231a-lecture4/image-20221028164924250.png" style="zoom:50%;"><h4 id="Vanishing-points-and-directions"><a href="#Vanishing-points-and-directions" class="headerlink" title="Vanishing points and directions"></a>Vanishing points and directions</h4><img src="/images/cs231a-lecture4/image-20221028174039533.png" style="zoom:50%;"><h4 id="Vanishing-horizon-line"><a href="#Vanishing-horizon-line" class="headerlink" title="Vanishing (horizon) line"></a>Vanishing (horizon) line</h4><img src="/images/cs231a-lecture4/image-20221028173200919.png" style="zoom:50%;"><p><strong>Example: Are these two lines parallel or not?</strong></p><img src="/images/cs231a-lecture4/image-20221028174055129.png" style="zoom:50%;"><h4 id="Vanishing-points-and-planes"><a href="#Vanishing-points-and-planes" class="headerlink" title="Vanishing points and planes"></a>Vanishing points and planes</h4><p>Furthermore, the horizon line allows us to compute useful properties about the world. For example, we can derive an interesting relationship between the the normal n of a plane in 3D with the corresponding horizon line $l_{horiz}$ in an image:</p><img src="/images/cs231a-lecture4/image-20221028174710565.png" style="zoom:50%;"><p>This means that if we can recognize the horizon line associated with a plane, and if our camera is calibrated, then we can estimate the orientation of that plane.</p><h4 id="Planes-at-infinity"><a href="#Planes-at-infinity" class="headerlink" title="Planes at infinity"></a>Planes at infinity</h4><img src="/images/cs231a-lecture4/image-20221028174817317.png" style="zoom:50%;"><h4 id="Angle-between-2-vanishing-points"><a href="#Angle-between-2-vanishing-points" class="headerlink" title="Angle between 2 vanishing points"></a>Angle between 2 vanishing points</h4><img src="/images/cs231a-lecture4/image-20221028174939830.png" style="zoom:50%;"><h4 id="Properties-of-omega"><a href="#Properties-of-omega" class="headerlink" title="Properties of $\omega$"></a>Properties of $\omega$</h4><img src="/images/cs231a-lecture4/image-20221028175128501.png" style="zoom:50%;"><h4 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h4><img src="/images/cs231a-lecture4/image-20221028175208575.png" style="zoom:50%;"><h3 id="Questions-1"><a href="#Questions-1" class="headerlink" title="Questions"></a>Questions</h3><p><strong>Qï¼šä¸ºä»€ä¹ˆæ— ç©·è¿œå¤„çš„çº¿$l_\infty=\begin{bmatrix} 0 \\ 0 \\ 1 \end{bmatrix}$</strong></p><p><strong>Aï¼š</strong>æœ‰ç©·ç‚¹æ˜¾ç„¶ä¸åœ¨$l_\infty$ä¸Šï¼Œå› æ­¤$\begin{bmatrix} x \\ y \\ 1 \end{bmatrix} l_\infty \neq 0$ï¼›æ— ç©·ç‚¹æ˜¾ç„¶åº”è¯¥åœ¨$l_\infty$ä¸Šï¼Œå› æ­¤$\begin{bmatrix} x \\ y \\ 0 \end{bmatrix} l_\infty = 0$ã€‚</p><p><strong>Qï¼šä¸ºä»€ä¹ˆ3Dä¸­ä¸¤æ¡å¹³è¡Œç›´çº¿çš„äº¤ç‚¹ä¸ç›´çº¿çš„æ–¹å‘å‘é‡æ˜¯ç›¸åŒçš„</strong></p><p><strong>Aï¼š</strong>TODOï¼ˆä¸è¿‡æŠŠä¸¤æ¡ç›´çº¿çš„ä¸€èˆ¬æ–¹ç¨‹æ‘†å‡ºæ¥ï¼Œç¡®å®å°±åº”è¯¥æ˜¯ç›´çº¿çš„æ–¹å‘å‘é‡æ‰æ»¡è¶³æ¡ä»¶ï¼‰</p><h2 id="Estimating-geometry-from-a-single-image"><a href="#Estimating-geometry-from-a-single-image" class="headerlink" title="Estimating geometry from a single image"></a>Estimating geometry from a single image</h2><h3 id="Single-view-calibration-example"><a href="#Single-view-calibration-example" class="headerlink" title="Single view calibration - example"></a>Single view calibration - example</h3><img src="/images/cs231a-lecture4/image-20221028175618266.png" style="zoom:50%;"><img src="/images/cs231a-lecture4/image-20221028175656737.png" style="zoom:50%;"><img src="/images/cs231a-lecture4/image-20221028175725632.png" style="zoom:50%;"><img src="/images/cs231a-lecture4/image-20221028175740607.png" style="zoom:50%;"><img src="/images/cs231a-lecture4/image-20221028175753728.png" style="zoom:50%;"><h3 id="Single-view-reconstruction-example"><a href="#Single-view-reconstruction-example" class="headerlink" title="Single view reconstruction - example"></a>Single view reconstruction - example</h3><img src="/images/cs231a-lecture4/image-20221028175836046.png" style="zoom:50%;"><img src="/images/cs231a-lecture4/image-20221028175847411.png" style="zoom:50%;"><h3 id="Single-view-reconstruction-drawbacks"><a href="#Single-view-reconstruction-drawbacks" class="headerlink" title="Single view reconstruction - drawbacks"></a>Single view reconstruction - drawbacks</h3><img src="/images/cs231a-lecture4/image-20221028175939406-16677053070291.png" style="zoom:50%;">]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CS231A </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS231A Lecture 3ï¼šCamera Calibration</title>
      <link href="2022/10/14/cs231a-lecture3/"/>
      <url>2022/10/14/cs231a-lecture3/</url>
      
        <content type="html"><![CDATA[<h1 id="CS231A-Lecture-3ï¼šCamera-Calibration"><a href="#CS231A-Lecture-3ï¼šCamera-Calibration" class="headerlink" title="CS231A Lecture 3ï¼šCamera Calibration"></a>CS231A Lecture 3ï¼šCamera Calibration</h1><blockquote><p>Reading: </p><p>[FP] Chapter 1 â€œGeometric Camera Calibrationâ€</p><p>[HZ] Chapter 7 â€œComputation of Camera Matrix Pâ€</p></blockquote><h2 id="Internal-and-External-parameters"><a href="#Internal-and-External-parameters" class="headerlink" title="Internal and External parameters"></a>Internal and External parameters</h2><img src="/images/cs231a-lecture3/image-20221012202055469.png" style="zoom:67%;"><h2 id="Calibration-Problem"><a href="#Calibration-Problem" class="headerlink" title="Calibration Problem"></a>Calibration Problem</h2><h3 id="Goal"><a href="#Goal" class="headerlink" title="Goal"></a>Goal</h3><p>Estimate intrinsic and extrinsic parameters from 1 or multiple images</p><h3 id="Mathematical-Expression"><a href="#Mathematical-Expression" class="headerlink" title="Mathematical Expression"></a>Mathematical Expression</h3><img src="/images/cs231a-lecture3/image-20221012203045100.png" style="zoom:67%;"><h3 id="How-many-correspondences-do-we-need"><a href="#How-many-correspondences-do-we-need" class="headerlink" title="How many correspondences do we need?"></a>How many correspondences do we need?</h3><ul><li><p>M has 11 unknowns</p></li><li><p>We need 11 equations</p></li><li><p>6 correspondences would do it</p><p>In practice, using more than 6 correspondences enables more robust results</p></li></ul><h3 id="How-to-list-equations"><a href="#How-to-list-equations" class="headerlink" title="How to list equations?"></a>How to list equations?</h3><img src="/images/cs231a-lecture3/image-20221012204246691.png" style="zoom:67%;"><img src="/images/cs231a-lecture3/image-20221012204259709.png" style="zoom:67%;"><img src="/images/cs231a-lecture3/image-20221012204424235.png" style="zoom:67%;"><img src="/images/cs231a-lecture3/image-20221012204530383.png" style="zoom:67%;"><h2 id="Homogeneous-M-x-N-Linear-Systems"><a href="#Homogeneous-M-x-N-Linear-Systems" class="headerlink" title="Homogeneous M x N Linear Systems"></a>Homogeneous M x N Linear Systems</h2><img src="/images/cs231a-lecture3/image-20221012204646720.png" style="zoom:80%;"><h2 id="Solve-calibration-problem-via-SVD-decomposition"><a href="#Solve-calibration-problem-via-SVD-decomposition" class="headerlink" title="Solve calibration problem via SVD decomposition"></a>Solve calibration problem via SVD decomposition</h2><h3 id="Calibration-Problem-1"><a href="#Calibration-Problem-1" class="headerlink" title="Calibration Problem"></a>Calibration Problem</h3><img src="/images/cs231a-lecture3/image-20221012210709319.png" style="zoom: 67%;"><h3 id="Extracting-camera-parameters"><a href="#Extracting-camera-parameters" class="headerlink" title="Extracting camera parameters"></a>Extracting camera parameters</h3><img src="/images/cs231a-lecture3/image-20221014100728333.png" style="zoom:67%;"><img src="/images/cs231a-lecture3/image-20221014100740977.png" style="zoom:67%;"><img src="/images/cs231a-lecture3/image-20221014100751444.png" style="zoom:67%;"><h3 id="Degenerate-cases"><a href="#Degenerate-cases" class="headerlink" title="Degenerate cases"></a>Degenerate cases</h3><img src="/images/cs231a-lecture3/image-20221014100820747.png" style="zoom:67%;"><h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><p><strong>Qï¼šä¸ºä»€ä¹ˆæ ‡å®šç›¸æœºä½¿ç”¨çš„ç‚¹ä¸èƒ½å¤Ÿåœ¨åŒä¸€ä¸ªå¹³é¢æˆ–è€…ä¸¤ä¸ªäºŒæ¬¡æ›²é¢çš„ç›¸äº¤æ›²çº¿ä¸Šï¼Ÿ</strong></p><p><strong>Aï¼š</strong>TODO</p><p><strong>Qï¼šå¸¸ç”¨çš„æ£‹ç›˜æ ¼æ ‡å®šæ³•ï¼Œä½¿ç”¨çš„ç‚¹åº”è¯¥æ˜¯åœ¨åŒä¸€ä¸ªå¹³é¢ä¸Šçš„ï¼Ÿå®ƒå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ</strong></p><p><strong>Aï¼š</strong>TODO</p><h2 id="Camera-calibration-with-radial-distortion"><a href="#Camera-calibration-with-radial-distortion" class="headerlink" title="Camera calibration with radial distortion"></a>Camera calibration with radial distortion</h2><h3 id="Review-radial-distortion"><a href="#Review-radial-distortion" class="headerlink" title="Review radial distortion"></a>Review radial distortion</h3><img src="/images/cs231a-lecture3/image-20221014104001784.png" style="zoom:67%;"><h3 id="Calibration-Problem-2"><a href="#Calibration-Problem-2" class="headerlink" title="Calibration Problem"></a>Calibration Problem</h3><p>æ ¹æ®ä¸Šä¸€ç¯‡åšå®¢æåˆ°çš„å¾„å‘ç•¸å˜å…¬å¼ï¼Œç»™å‡ºä¸‹é¢çš„æ–¹ç¨‹ã€‚</p><img src="/images/cs231a-lecture3/image-20221014104752131.png" style="zoom:67%;"><img src="/images/cs231a-lecture3/image-20221014104818934.png" style="zoom:67%;"><h3 id="General-Calibration-Problem"><a href="#General-Calibration-Problem" class="headerlink" title="General Calibration Problem"></a>General Calibration Problem</h3><img src="/images/cs231a-lecture3/image-20221014105054200.png" style="zoom:67%;"><img src="/images/cs231a-lecture3/image-20221014105109014.png" style="zoom:67%;"><img src="/images/cs231a-lecture3/image-20221014105124962.png" style="zoom:67%;"><h3 id="Estimate-m1-and-m2-and-ignore-the-radial-distortion"><a href="#Estimate-m1-and-m2-and-ignore-the-radial-distortion" class="headerlink" title="Estimate m1 and m2 and ignore the radial distortion"></a>Estimate m1 and m2 and ignore the radial distortion</h3><img src="/images/cs231a-lecture3/image-20221014110141419.png" style="zoom:67%;"><img src="/images/cs231a-lecture3/image-20221014110231133.png" style="zoom:67%;"><img src="/images/cs231a-lecture3/image-20221014110243031.png" style="zoom:67%;"><h3 id="Question-1"><a href="#Question-1" class="headerlink" title="Question"></a>Question</h3><p><strong>Qï¼šæœ¬è¯¾ç¨‹åªæåˆ°äº†åœ¨è€ƒè™‘å¾„å‘ç•¸å˜çš„æƒ…å†µä¸‹è¿›è¡Œç›¸æœºæ ‡å®šï¼Œå¦‚æœæŠŠåˆ‡å‘ç•¸å˜ä¹Ÿè€ƒè™‘è¿›æ¥ï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</strong></p><p><strong>Aï¼š</strong>TODO</p>]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CS231A </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS231A Lecture 2ï¼šCamera Models</title>
      <link href="2022/10/12/cs231a-lecture2/"/>
      <url>2022/10/12/cs231a-lecture2/</url>
      
        <content type="html"><![CDATA[<h1 id="CS231A-Lecture-2-Camera-Models"><a href="#CS231A-Lecture-2-Camera-Models" class="headerlink" title="CS231A Lecture 2: Camera Models"></a>CS231A Lecture 2: Camera Models</h1><blockquote><p>Reading: </p><ul><li><p>[FP] Chapter 1, â€œGeometric Camera Modelsâ€</p></li><li><p>[HZ] Chapter 6 â€œCamera Modelsâ€</p></li></ul></blockquote><h2 id="Pinhole-cameras"><a href="#Pinhole-cameras" class="headerlink" title="Pinhole cameras"></a>Pinhole cameras</h2><h3 id="Pinhole-Perspective"><a href="#Pinhole-Perspective" class="headerlink" title="Pinhole Perspective"></a>Pinhole Perspective</h3><p>ä¸‹é¢ä¸‰å¼ å›¾æè¿°çš„æ˜¯ï¼šä»ä¸–ç•Œåæ ‡ç³»åˆ°åƒå¹³é¢åæ ‡ç³»çš„å˜æ¢ï¼Œç‰©ä½“æœ€åæŠ•å½±åˆ°ç‰©ç†æˆåƒå¹³é¢ï¼ˆimage planeï¼‰ä¸Šã€‚</p><img src="/images/cs231a-lecture2/image-20221009202222922.png" style="zoom: 50%;"><img src="/images/cs231a-lecture2/image-20221009202348197.png" style="zoom:50%;"><img src="/images/cs231a-lecture2/image-20221009202317015.png" style="zoom: 50%;"><p>è¿™ç§é’ˆå­”é€è§†æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼šaï¼‰è¿œå¤„çš„ç‰©ä½“æˆçš„åƒæ›´å°ï¼›bï¼‰ä½äºæŸå¹³é¢ä¸­çš„ä¸¤æ¡å¹³è¡Œçº¿çš„æŠ•å½±ä¼¼ä¹ä¼šèšåœ¨æ°´å¹³çº¿hä¸Šï¼Œè¯¥æ°´å¹³çº¿hæ˜¯ç”±æˆåƒå¹³é¢ä¸å¹³è¡ŒäºæŸå¹³é¢å¹¶ç©¿è¿‡é’ˆå­”çš„å¹³é¢ç›¸äº¤è€Œå½¢æˆçš„ã€‚æ³¨æ„ï¼ŒæŸå¹³é¢ä¸­å¹³è¡Œäºæˆåƒå¹³é¢çš„çº¿æ ¹æœ¬æ²¡æœ‰å›¾åƒã€‚</p><img src="/images/cs231a-lecture2/image-20221010210150378.png" style="zoom:50%;"><h3 id="Weak-Perspective"><a href="#Weak-Perspective" class="headerlink" title="Weak Perspective"></a>Weak Perspective</h3><p><strong>å¼±é€è§†æŠ•å½±æ¨¡å‹ï¼š</strong>é’ˆå¯¹äºé’ˆå­”æˆåƒæ¨¡å‹åšäº†è¿›ä¸€æ­¥ç®€åŒ–ï¼Œ<strong>ç‰©ä½“æŠ•å½±æ—¶å„ä¸ªç‚¹ä¸å°å­”çš„è·ç¦»éƒ½ç”¨ç‰©ä½“çš„å¹³å‡è·ç¦»ä»£æ›¿</strong>ï¼Œå³ä¸å­˜åœ¨è¿‘å¤§è¿œå°äº†ï¼Œå› ä¸ºéƒ½æ˜¯ç›¸åŒè·ç¦»äº†ã€‚è¿™æ ·æˆåƒçš„å¤§å°å°±æ˜¯æˆåƒå¹³é¢ä¸é’ˆå­”è·ç¦»dï¼Œä»¥åŠç‰©ä½“ä¸é’ˆå­”è·ç¦»Dä¹‹é—´çš„æ¯”ä¾‹å†³å®šäº†ã€‚è¿™ä¸ªæ¨¡å‹å¯¹åº”çš„æŠ•å½±è¿‡ç¨‹å°±ç§°ä¹‹ä¸ºå¼±é€è§†æŠ•å½±ã€‚</p><blockquote><p>æ•™æåŸè¯ï¼šWhen a sceneâ€™s relief is small relative to its average distance from the camera, the magnifification can be taken to be constant. This projection model is called weak perspective, or scaled orthography.</p></blockquote><img src="/images/cs231a-lecture2/image-20221012150049870.png" style="zoom:67%;"><p><strong>perspectiveä¸weak perspectiveçš„åŒºåˆ«ï¼š</strong></p><img src="/images/cs231a-lecture2/image-20221012191106409.png" style="zoom:50%;"><img src="/images/cs231a-lecture2/image-20221012191121561.png" style="zoom:50%;"><img src="/images/cs231a-lecture2/image-20221012191136677.png" style="zoom:50%;"><h3 id="Orthographic-projection"><a href="#Orthographic-projection" class="headerlink" title="Orthographic projection"></a>Orthographic projection</h3><p><strong>æ­£äº¤æŠ•å½±æˆåƒæ¨¡å‹ï¼š</strong>åœ¨å¼±é€è§†æŠ•å½±ä¸Šè¿›ä¸€æ­¥ç®€åŒ–ï¼Œè®©å¼±é€è§†æŠ•å½±ä¸­ä»…å­˜çš„æ¯”ä¾‹ä¸º1ï¼Œå…¶æ•ˆæœç­‰åŒäºå¹³è¡Œå…‰çº¿æŠ•å°„åˆ°æˆåƒå¹³é¢ä¸Šã€‚è¿™ä¸ªæ¨¡å‹å¯¹åº”çš„æŠ•å½±è¿‡ç¨‹ç§°ä¹‹ä¸ºæ­£äº¤æŠ•å½±ã€‚æ­£äº¤æŠ•å½±ä¸æ¶‰åŠå›¾åƒç‰¹å¾çš„åè½¬ï¼Œå› æ­¤ï¼Œæ”¾å¤§å€æ•°ä¸ºè´Ÿå€¼ï¼Œè¿™æœ‰ç‚¹ä¸è‡ªç„¶ï¼Œä½†ç®€åŒ–äº†æŠ•å½±æ–¹ç¨‹ã€‚</p><img src="/images/cs231a-lecture2/image-20221012191159987.png" style="zoom:50%;"><h3 id="Questions"><a href="#Questions" class="headerlink" title="Questions"></a>Questions</h3><p><strong>Qï¼šIs the size of the apertureï¼ˆå…‰åœˆï¼Œå­”å¾„ï¼‰ important?</strong> </p><p><strong>Aï¼š</strong>å…‰åœˆè¶Šå¤§ï¼Œæˆåƒè¶Šæ¨¡ç³Šï¼›å…‰åœˆè¶Šå°ï¼Œæˆåƒè¶Šæ¸…æ™°ï¼Œä½†ä¼šè¶Šæ¥è¶Šæš—ï¼Œå› ä¸ºé€è¿‡çš„å…‰çº¿æ›´å°‘äº†ï¼ˆè¿˜æœ‰å¯èƒ½å‘ç”Ÿè¡å°„ï¼‰ã€‚</p><img src="/images/cs231a-lecture2/image-20221009204048000.png" style="zoom:50%;"><p><strong>Qï¼šå¦‚ä½•åº”å¯¹é€è¿‡å…‰çº¿æ›´å°‘çš„é—®é¢˜ï¼Ÿ</strong></p><p><strong>Aï¼š</strong>Adding lenses! ï¼ˆé€šè¿‡æ·»åŠ é€é•œå°†å…‰çº¿æ±‡èšåˆ°èƒ¶ç‰‡ä¸Šï¼‰</p><p><strong>Qï¼šPros and Cons of These Models</strong></p><p><strong>Aï¼š</strong></p><img src="/images/cs231a-lecture2/image-20221012191303069.png" style="zoom: 50%;"><h2 id="Cameras-amp-lenses"><a href="#Cameras-amp-lenses" class="headerlink" title="Cameras &amp; lenses"></a>Cameras &amp; lenses</h2><h3 id="A-lens-focuses-light-onto-the-film"><a href="#A-lens-focuses-light-onto-the-film" class="headerlink" title="A lens focuses light onto the film"></a>A lens focuses light onto the film</h3><img src="/images/cs231a-lecture2/image-20221009204732224.png" style="zoom:50%;"><img src="/images/cs231a-lecture2/image-20221009205952541.png" style="zoom:50%;"><h3 id="Paraxial-refraction-model"><a href="#Paraxial-refraction-model" class="headerlink" title="Paraxial refraction model"></a>Paraxial refraction model</h3><blockquote><h4 id="è¿‘è½´æŠ˜å°„æ¨¡å‹"><a href="#è¿‘è½´æŠ˜å°„æ¨¡å‹" class="headerlink" title="è¿‘è½´æŠ˜å°„æ¨¡å‹"></a>è¿‘è½´æŠ˜å°„æ¨¡å‹</h4></blockquote><p>ä¸‹é¢çš„pptä¸»è¦è¡¨è¾¾äº†ä¸€ä¸ªç‚¹ï¼Œå³ç›¸æœºçš„ç„¦è·ä¾ç„¶æ˜¯å°å­”åˆ°æˆåƒå¹³é¢çš„è·ç¦»ï¼Œå®ƒå’Œé€é•œçš„ç„¦è·æœ‰åŒºåˆ«ï¼ï¼ˆç›¸æœºç„¦è·è¿˜å¯ä»¥è®¡ç®—å‡ºæ¥ï¼Œç»å…¸çš„åˆä¸­ç‰©ç†é¢˜ã€‚ã€‚ã€‚ï¼‰</p><img src="/images/cs231a-lecture2/image-20221009210115436.png" style="zoom:50%;"><img src="/images/cs231a-lecture2/image-20221009210130425.png" style="zoom:50%;"><h3 id="Questions-1"><a href="#Questions-1" class="headerlink" title="Questions"></a>Questions</h3><p><strong>Qï¼šä¸ºä»€ä¹ˆç›¸æœºéœ€è¦è£…é€é•œï¼Ÿ</strong></p><p><strong>Aï¼š</strong>åœ¨æ•™æä¸Šæœ‰è¿™ä¹ˆä¸€å¥è¯ï¼šâ€œMost real cameras are equipped with lenses. There are two main reasons for this: <strong>The first one is to gather light</strong>, because a single ray of light would otherwise reach each point in the image plane under ideal pinhole projection. Real pinholes have a finite size, of course, so each point in the image plane is illuminated by a cone of light rays subtending a finite solid angle. The larger the hole, the wider the cone and the brighter the image, but a large pinhole gives blurry pictures. Shrinking the pinhole produces sharper images but reduces the amount of light reaching the image plane, and may introduce diffraction effects. <strong>Keeping the picture in sharp focus while gathering light from a large area is the second main reason for using a lens</strong>.â€</p><p><strong>Qï¼šé€é•œæ˜¯å¦‚ä½•èšé›†å…‰çº¿çš„ï¼Ÿ</strong></p><p><strong>Aï¼š</strong>å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><img src="/images/cs231a-lecture2/image-20221012150635379.png" style="zoom:67%;"><p><strong>Qï¼šç›¸æœºçš„é’ˆå­”å’Œé€é•œçš„å…³ç³»ï¼Ÿæœ‰äº†é€é•œä¹‹åè¿˜éœ€è¦é’ˆå­”å—ï¼Ÿ</strong></p><p><strong>Aï¼š</strong>æˆ‘çš„ç†è§£æ˜¯ï¼Œé€é•œä¸­å¿ƒç‚¹Oå°±æ˜¯æ‰€è°“çš„é’ˆå­”ã€‚</p><h2 id="The-geometry-of-pinhole-cameras-Intrinsic"><a href="#The-geometry-of-pinhole-cameras-Intrinsic" class="headerlink" title="The geometry of pinhole cameras-Intrinsic"></a>The geometry of pinhole cameras-Intrinsic</h2><h3 id="Converting-to-pixels"><a href="#Converting-to-pixels" class="headerlink" title="Converting to pixels"></a>Converting to pixels</h3><img src="/images/cs231a-lecture2/image-20221012162653991.png" style="zoom:50%;"><img src="/images/cs231a-lecture2/image-20221012162710839.png" style="zoom:50%;"><img src="/images/cs231a-lecture2/image-20221012161947590.png" style="zoom:50%;"><h3 id="Homogeneous-coordinates"><a href="#Homogeneous-coordinates" class="headerlink" title="Homogeneous coordinates"></a>Homogeneous coordinates</h3><img src="/images/cs231a-lecture2/image-20221012162801639.png" style="zoom: 50%;"><p><strong>Projective transformation in the homogenous coordinate system</strong></p><img src="/images/cs231a-lecture2/image-20221012162845363.png" style="zoom:50%;"><h3 id="The-Camera-Matrix"><a href="#The-Camera-Matrix" class="headerlink" title="The Camera Matrix"></a>The Camera Matrix</h3><img src="/images/cs231a-lecture2/image-20221012163725558.png" style="zoom:50%;"><h3 id="Camera-Skewness"><a href="#Camera-Skewness" class="headerlink" title="Camera Skewness"></a>Camera Skewness</h3><img src="/images/cs231a-lecture2/image-20221012163825727.png" style="zoom:50%;"><p><strong>How many degrees of freedom does K have?</strong></p><p><strong>5 degrees of freedom!</strong></p><h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><p><strong>Qï¼šä¸ºä»€ä¹ˆç›¸æœºå†…å‚Kæœ‰äº”ä¸ªè‡ªç”±åº¦ï¼Ÿ</strong></p><p><strong>Aï¼š</strong>çŸ©é˜µKä¸­æœ‰äº”ä¸ªäº’ç›¸ç‹¬ç«‹çš„å˜é‡ï¼</p><h2 id="The-geometry-of-pinhole-cameras-Extrinsic"><a href="#The-geometry-of-pinhole-cameras-Extrinsic" class="headerlink" title="The geometry of pinhole cameras-Extrinsic"></a>The geometry of pinhole cameras-Extrinsic</h2><h3 id="2D-Scale-Rotation-Translation"><a href="#2D-Scale-Rotation-Translation" class="headerlink" title="2D Scale + Rotation + Translation"></a>2D Scale + Rotation + Translation</h3><img src="/images/cs231a-lecture2/image-20221012164723567.png" style="zoom: 50%;"><h3 id="3D-Translation-and-Rotation"><a href="#3D-Translation-and-Rotation" class="headerlink" title="3D Translation and Rotation"></a>3D Translation and Rotation</h3><h4 id="3D-Rotation-of-Points"><a href="#3D-Rotation-of-Points" class="headerlink" title="3D Rotation of Points"></a>3D Rotation of Points</h4><img src="/images/cs231a-lecture2/image-20221012164904696.png" style="zoom:50%;"><h4 id="3D-Translation-of-Points"><a href="#3D-Translation-of-Points" class="headerlink" title="3D Translation of Points"></a>3D Translation of Points</h4><img src="/images/cs231a-lecture2/image-20221012164932821.png" style="zoom:50%;"><h4 id="Translation-and-Rotation"><a href="#Translation-and-Rotation" class="headerlink" title="Translation and Rotation"></a>Translation and Rotation</h4><img src="/images/cs231a-lecture2/image-20221012165020769.png" style="zoom:50%;"><h3 id="World-reference-system"><a href="#World-reference-system" class="headerlink" title="World reference system"></a>World reference system</h3><img src="/images/cs231a-lecture2/image-20221012165121998.png" style="zoom:50%;"><h3 id="The-projective-transformation"><a href="#The-projective-transformation" class="headerlink" title="The projective transformation"></a>The projective transformation</h3><img src="/images/cs231a-lecture2/image-20221012165344068.png" style="zoom:50%;"><p><strong>How many degrees of freedom does M have?</strong></p><p><strong>5 + 3 + 3 =11</strong></p><h2 id="Perspective-Projection-Matrices"><a href="#Perspective-Projection-Matrices" class="headerlink" title="Perspective Projection Matrices"></a>Perspective Projection Matrices</h2><p><img src="/images/cs231a-lecture2/image-20221012170926479.png"></p><h2 id="Camera-distortion"><a href="#Camera-distortion" class="headerlink" title="Camera distortion"></a>Camera distortion</h2><blockquote><p>è¯¥éƒ¨åˆ†å‚è€ƒï¼š<a href="https://xhy3054.github.io/camera-calibration-undistort">https://xhy3054.github.io/camera-calibration-undistort</a></p></blockquote><p>ç°ä»£ç›¸æœºä¸ºäº†è·å¾—æ›´å¥½çš„æˆåƒæ•ˆæœï¼Œç›¸æœºé‡Œä¸€èˆ¬éƒ½åŠ å…¥äº†é€é•œã€‚è€Œé€é•œçš„åŠ å…¥å¯¹æˆåƒè¿‡ç¨‹ä¸­å…‰çº¿çš„ä¼ æ’­ä¼šäº§ç”Ÿæ–°çš„å½±å“ï¼Œè¿›è€Œå‡ºç°ç•¸å˜ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§ä¸»è¦çš„ç•¸å˜ï¼ˆå…¶å®ä¹Ÿè¿˜æœ‰å…¶ä»–çš„ç§ç±»çš„ç•¸å˜ï¼Œä½†æ˜¯ä¸å¦‚è¿™ä¸¤ç§æ˜æ˜¾ï¼‰ï¼š</p><p><img src="/images/cs231a-lecture2/distort0.jpg"></p><h3 id="Radial-Distortion"><a href="#Radial-Distortion" class="headerlink" title="Radial Distortion"></a>Radial Distortion</h3><p><strong>å¾„å‘ç•¸å˜ï¼š</strong>é€é•œè‡ªèº«çš„å½¢çŠ¶å¯¹å…‰çº¿ä¼ æ’­ä¼šæœ‰å½±å“ï¼›</p><ul><li>æ¡¶å½¢ç•¸å˜ï¼šå›¾åƒæ”¾å¤§ç‡éšç€ä¸å…‰è½´ä¹‹é—´çš„è·ç¦»å¢åŠ è€Œå‡å°</li><li>æ•å½¢ç•¸å˜ï¼šå›¾åƒæ”¾å¤§ç‡éšç€ä¸å…‰è½´ä¹‹é—´çš„è·ç¦»å¢å¤§è€Œå¢å¤§</li></ul><img src="/images/cs231a-lecture2/image-20221014102255454.png" style="zoom:67%;"><p>ä¸€èˆ¬å¾„å‘ç•¸å˜å¯¹äºäºŒç»´å¹³é¢ä¸Šä¸€ä¸ªåæ ‡$(x,y)$ï¼ˆå¦‚ä¸Šå›¾ç•¸å˜æœ€å°çš„ç‚¹ä¸ºåæ ‡åŸç‚¹ï¼Œä¸€èˆ¬åœ¨å›¾åƒä¸­å¿ƒï¼Œ$r$æ˜¯ç‚¹åˆ°åŸç‚¹çš„è·ç¦»ï¼‰çš„å½±å“å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å…¬å¼è¡¨è¿°ï¼š<br>$$<br>x_{distorted} = x( 1 + k_1 r^2 + k_2 r^4 + k_3 r^6)<br>\\<br>y_{distorted} = y( 1 + k_1 r^2 + k_2 r^4 + k_3 r^6)<br>$$<br>æ— è®ºæ˜¯æ¡¶å½¢ç•¸å˜è¿˜æ˜¯æ•å½¢ç•¸å˜ï¼Œç”±äºä»–ä»¬éƒ½æ˜¯éšç€ä¸ä¸­å¿ƒä¹‹é—´çš„è·ç¦»å¢åŠ è€Œå¢åŠ ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ä¸€ä¸ª<strong>å¤šé¡¹å¼å‡½æ•°</strong>æ¥æè¿°ç•¸å˜å‰åçš„åƒç´ åæ ‡å˜åŒ–ã€‚</p><p>è¿™ä¸ªå…¬å¼ä¸­ï¼Œå¯¹äºç•¸å˜è¾ƒå°çš„å›¾åƒä¸­å¿ƒåŒºåŸŸï¼Œç•¸å˜ä¸»è¦æ˜¯$k_1$åœ¨èµ·ä½œç”¨ï¼›è€Œå¯¹äºç•¸å˜è¾ƒå¤§çš„è¾¹ç¼˜åŒºåŸŸï¼Œä¸»è¦æ˜¯$k_2$åœ¨èµ·ä½œç”¨ã€‚ä¸€èˆ¬çš„æ™®é€šæ‘„åƒå¤´ç”¨è¿™ä¸¤ä¸ªç³»æ•°å°±å·²ç»å¯ä»¥å¾ˆå¥½åœ°çº æ­£å¾„å‘ç•¸å˜äº†ï¼Œä½†æ˜¯å¯¹äºä¸€éƒ¨åˆ†ç•¸å˜å¾ˆå¤§çš„æ‘„åƒå¤´ï¼Œæ¯”å¦‚è¯´é±¼çœ¼é•œå¤´ç­‰ï¼Œè¿˜éœ€è¦åŠ å…¥$k_3$ç•¸å˜é¡¹æ‰èƒ½æ¯”è¾ƒå¥½çš„è¡¨è¿°ç•¸å˜æƒ…å†µã€‚</p><h3 id="Tangential-distortion"><a href="#Tangential-distortion" class="headerlink" title="Tangential distortion"></a>Tangential distortion</h3><p><strong>åˆ‡å‘ç•¸å˜</strong>ï¼šåœ¨æœºæ¢°ç»„è£…è¿‡ç¨‹ä¸­ï¼Œé€é•œå’Œæˆåƒå¹³é¢ä¸å¯èƒ½å®Œå…¨å¹³è¡Œï¼Œè¿™ä¹Ÿä¼šä½¿å¾—å…‰çº¿ç©¿è¿‡é€é•œæŠ•å½±åˆ°æˆåƒé¢æ—¶çš„ä½ç½®å‡ºç°å˜åŒ–ï¼›</p><p><img src="/images/cs231a-lecture2/distort1.png"></p><p>ä¸€èˆ¬åˆ‡å‘ç•¸å˜å¯¹äºäºŒç»´å¹³é¢ä¸Šçš„åæ ‡(x,y)çš„å½±å“å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å…¬å¼è¿›è¡Œè¡¨è¿°ï¼š<br>$$<br>x_{distorted} = x + 2p_1xy + p_2(r^2+2x^2)<br>\\<br>y_{distorted} = y + p_1(r^2+ 2y^2)+ 2p_2xy<br>$$</p><h3 id="Radial-and-tangential-distortion"><a href="#Radial-and-tangential-distortion" class="headerlink" title="Radial and tangential distortion"></a>Radial and tangential distortion</h3><p>ç»“åˆä¸Šé¢ä¸¤ç§å¾„å‘ç•¸å˜å’Œåˆ‡å‘ç•¸å˜çš„å…¬å¼ï¼Œå¯ä»¥å¾—åˆ°ç»¼åˆçš„å»ç•¸å˜å…¬å¼ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬é€šè¿‡äº”ä¸ªç•¸å˜ç³»æ•°å°±å¯ä»¥ç¡®å®šç‚¹åœ¨åƒç´ å¹³é¢çš„æ­£ç¡®ä½ç½®ã€‚<br>$$<br>x_{distorted} = x( 1 + k_1 r^2 + k_2 r^4 + k_3 r^6) + 2p_1xy + p_2(r^2+2x^2)<br>\\<br>y_{distorted} = y( 1 + k_1 r^2 + k_2 r^4 + k_3 r^6) + p_1(r^2+ 2y^2)+ 2p_2xy<br>$$</p>]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CS231A </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ã€ŠiMAPï¼šImplicit Mapping and Positioning in Real-Time ã€‹</title>
      <link href="2022/08/31/paper-reading-imap/"/>
      <url>2022/08/31/paper-reading-imap/</url>
      
        <content type="html"><![CDATA[<h1 id="è®ºæ–‡é˜…è¯»ã€ŠiMAP-Implicit-Mapping-and-Positioning-in-Real-Time-ã€‹"><a href="#è®ºæ–‡é˜…è¯»ã€ŠiMAP-Implicit-Mapping-and-Positioning-in-Real-Time-ã€‹" class="headerlink" title="è®ºæ–‡é˜…è¯»ã€ŠiMAP: Implicit Mapping and Positioning in Real-Time ã€‹"></a>è®ºæ–‡é˜…è¯»ã€ŠiMAP: Implicit Mapping and Positioning in Real-Time ã€‹</h1><h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><p>æˆ‘ä»¬é¦–æ¬¡å±•ç¤ºäº†å¤šå±‚æ„ŸçŸ¥å™¨ (MLP) å¯ä»¥ä½œä¸ºæ‰‹æŒ RGB-D ç›¸æœºçš„å®æ—¶ SLAM ç³»ç»Ÿä¸­å”¯ä¸€çš„åœºæ™¯è¡¨ç¤ºã€‚ æˆ‘ä»¬çš„ç½‘ç»œåœ¨æ²¡æœ‰å…ˆéªŒæ•°æ®çš„æƒ…å†µä¸‹è¿›è¡Œå®æ—¶æ“ä½œè®­ç»ƒï¼Œæ„å»ºäº†ä¸€ä¸ªç¨ å¯†çš„ã€ç‰¹å®šåœºæ™¯çš„éšå¼ 3D å ç”¨å’Œé¢œè‰²æ¨¡å‹ï¼Œè¯¥æ¨¡å‹ä¹Ÿå¯ç«‹å³ç”¨äºè·Ÿè¸ªã€‚</p><p>é€šè¿‡é’ˆå¯¹å®æ—¶å›¾åƒæµæŒç»­è®­ç»ƒç¥ç»ç½‘ç»œæ¥å®ç°å®æ—¶ SLAM éœ€è¦é‡å¤§åˆ›æ–°ã€‚ æˆ‘ä»¬çš„ iMAP ç®—æ³•ä½¿ç”¨å…³é”®å¸§ç»“æ„å’Œå¤šå¤„ç†è®¡ç®—æµç¨‹ï¼Œé‡‡ç”¨åŠ¨æ€ä¿¡æ¯å¼•å¯¼åƒç´ é‡‡æ ·æé«˜é€Ÿåº¦ï¼Œè·Ÿè¸ªé¢‘ç‡ä¸º 10 Hzï¼Œå…¨å±€åœ°å›¾æ›´æ–°é¢‘ç‡ä¸º 2 Hzã€‚ ä¸æ ‡å‡†ç¨ å¯† SLAM æŠ€æœ¯ç›¸æ¯”ï¼Œéšå¼ MLP çš„ä¼˜åŠ¿åŒ…æ‹¬å…·æœ‰è‡ªåŠ¨ç»†èŠ‚æ§åˆ¶çš„é«˜æ•ˆå‡ ä½•è¡¨ç¤ºä»¥åŠå¯¹æœªè§‚å¯ŸåŒºåŸŸï¼ˆä¾‹å¦‚å¯¹è±¡çš„åè¡¨é¢ï¼‰çš„å¹³æ»‘ã€åˆç†å¡«å……ã€‚</p><h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h2><p>ç”¨äºæ™ºèƒ½ä½“ç°è®¾å¤‡çš„å®æ—¶åŒæ­¥å®šä½å’Œæ˜ å°„ (SLAM) ç³»ç»Ÿå¿…é¡»é€æ­¥æ„å»º 3D ä¸–ç•Œçš„è¡¨ç¤ºï¼Œä»¥å®ç°å®šä½å’Œåœºæ™¯ç†è§£ã€‚ç†æƒ³çš„è¡¨ç¤ºåº”è¯¥ç²¾ç¡®åœ°ç¼–ç å‡ ä½•å›¾å½¢ï¼Œä½†ä¹Ÿåº”è¯¥æ˜¯é«˜æ•ˆçš„ï¼Œå¯ç”¨çš„å†…å­˜å®¹é‡å¯ä»¥æ ¹æ®åœºæ™¯å¤§å°å’Œå¤æ‚æ€§è‡ªé€‚åº”åœ°ä½¿ç”¨ï¼› é¢„æµ‹æ€§çš„ï¼Œèƒ½å¤Ÿåˆç†åœ°ä¼°è®¡æœªç›´æ¥è§‚å¯Ÿåˆ°çš„åŒºåŸŸçš„å½¢çŠ¶ï¼› çµæ´»ï¼Œæ— éœ€å¤§é‡è®­ç»ƒæ•°æ®æˆ–æ‰‹åŠ¨è°ƒæ•´å³å¯åœ¨æ–°åœºæ™¯ä¸‹è¿è¡Œã€‚</p><p>éšå¼ç¥ç»è¡¨ç¤ºæ˜¯ç¦»çº¿é‡å»ºçš„ä¸€ä¸ªæœ‰å‰é€”çš„æœ€æ–°è¿›å±•ï¼Œå®ƒä½¿ç”¨å¤šå±‚æ„ŸçŸ¥å™¨ (MLP) å°† 3D ç‚¹æ˜ å°„åˆ°å ç”¨æˆ–é¢œè‰²ï¼Œå¹¶ä»å¤´å¼€å§‹å¯¹å…¶è¿›è¡Œä¼˜åŒ–ä»¥é€‚åº”ç‰¹å®šåœºæ™¯ã€‚  MLP æ˜¯ä¸€ç§é€šç”¨çš„éšå¼å‡½æ•°é€¼è¿‘å™¨ï¼Œèƒ½å¤Ÿç”¨å¾ˆå°‘çš„å‚æ•°è¡¨ç¤ºå¯å˜ç»†èŠ‚å¹¶ä¸”æ²¡æœ‰é‡åŒ–ä¼ªå½±ã€‚å³ä½¿æ²¡æœ‰äº‹å…ˆçš„è®­ç»ƒï¼Œç½‘ç»œç»“æ„ä¸­å­˜åœ¨çš„å›ºæœ‰å…ˆéªŒä¹Ÿå…è®¸å®ƒä»éƒ¨åˆ†æ•°æ®ä¸­åšå‡ºç¨ å¯†çš„å‡ ä½•ä¼°è®¡ï¼Œå¹¶åˆç†åœ°å®Œæˆæœªè§‚å¯Ÿåˆ°çš„åŒºåŸŸã€‚</p><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬é¦–æ¬¡å±•ç¤ºäº† MLP å¯ä»¥ç”¨ä½œä½¿ç”¨æ‰‹æŒ RGB-D ç›¸æœºçš„å®æ—¶ SLAM ç³»ç»Ÿä¸­çš„å”¯ä¸€åœºæ™¯è¡¨ç¤ºã€‚ æˆ‘ä»¬éšæœºåˆå§‹åŒ–çš„ç½‘ç»œæ˜¯åœ¨å®æ—¶æ“ä½œä¸­è®­ç»ƒçš„ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä»»ä½•å…ˆå‰çš„è®­ç»ƒæ•°æ®ã€‚ æˆ‘ä»¬çš„ iMAP ç³»ç»Ÿè®¾è®¡æœ‰å…³é”®å¸§ç»“æ„å’Œå¤šå¤„ç†è®¡ç®—æµç¨‹ï¼Œè®©äººæƒ³èµ· PTAM ã€‚ åœ¨ä»¥è¶…è¿‡ 10 Hz è¿è¡Œçš„è·Ÿè¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†å®æ—¶ RGB-D è§‚å¯Ÿä¸æ¥è‡ª MLP åœºæ™¯åœ°å›¾çš„æ¸²æŸ“æ·±åº¦å’Œé¢œè‰²é¢„æµ‹å¯¹é½ã€‚ åŒæ—¶ï¼Œæ˜ å°„è¿‡ç¨‹é€‰æ‹©å¹¶ç»´æŠ¤ä¸€ç»„è§†ç‚¹è·¨è¶Šåœºæ™¯çš„å†å²å…³é”®å¸§ï¼Œå¹¶ä½¿ç”¨è¿™äº›å…³é”®å¸§ä¸æ–­è®­ç»ƒå’Œæ”¹è¿› MLPï¼ŒåŒæ—¶è”åˆä¼˜åŒ–å…³é”®å¸§å§¿åŠ¿ã€‚</p><p>åœ¨è·Ÿè¸ªå’Œæ˜ å°„ä¸­ï¼Œæˆ‘ä»¬åŠ¨æ€åœ°å¯¹ä¿¡æ¯é‡æœ€å¤§çš„ RGB-D åƒç´ è¿›è¡Œé‡‡æ ·ï¼Œä»¥å‡å°‘å‡ ä½•ä¸ç¡®å®šæ€§ï¼Œå®ç°å®æ—¶é€Ÿåº¦ã€‚ æˆ‘ä»¬çš„ç³»ç»Ÿåœ¨ Python ä¸­è¿è¡Œï¼Œæ‰€æœ‰ä¼˜åŒ–éƒ½æ˜¯é€šè¿‡å•ä¸ªæ¡Œé¢ CPU/GPU ç³»ç»Ÿä¸Šçš„æ ‡å‡† PyTorch æ¡†æ¶ã€‚</p><p>é€šè¿‡å°† SLAM è§†ä¸ºä¸€ä¸ªæŒç»­å­¦ä¹ é—®é¢˜ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ç§è¡¨ç¤ºï¼Œè¯¥è¡¨ç¤ºå¯ä»¥æœ‰æ•ˆåœ°è¡¨ç¤ºå…·æœ‰è¿ç»­å’Œè‡ªé€‚åº”åˆ†è¾¨ç‡çš„åœºæ™¯ï¼Œå¹¶ä¸”å…·æœ‰å‡ºè‰²çš„å¹³æ»‘æ’å€¼èƒ½åŠ›ä»¥å®ç°å®Œæ•´çš„ã€æ— æ‡ˆå¯å‡»çš„é‡å»ºï¼ˆå›¾ 1ï¼‰ã€‚ ä½¿ç”¨å¤§çº¦ 10~20 ä¸ªå…³é”®å¸§å’Œä¸€ä¸ªåªæœ‰ 1 MB å‚æ•°çš„ MLPï¼Œæˆ‘ä»¬å¯ä»¥å‡†ç¡®åœ°æ˜ å°„æ•´ä¸ªæˆ¿é—´ã€‚ æˆ‘ä»¬çš„åœºæ™¯è¡¨ç¤ºæ²¡æœ‰å›ºå®šçš„åˆ†è¾¨ç‡ï¼› å…³é”®å¸§çš„åˆ†å¸ƒè‡ªåŠ¨å®ç°é«˜æ•ˆçš„å¤šå°ºåº¦æ˜ å°„ã€‚</p><p><img src="/images/paper-reading-iMAP/image-20220830223022639.png" alt="å›¾ 1ï¼šä½¿ç”¨ Azure Kinect RGB-D æ‘„åƒå¤´ä»å®æ—¶ iMAP é‡å»ºæˆ¿é—´ï¼Œæ˜¾ç¤ºç¨ å¯†åœºæ™¯æ¨¡å‹ã€æ‘„åƒå¤´è·Ÿè¸ªå’Œè‡ªåŠ¨å…³é”®å¸§é›†ã€‚"></p><p>æˆ‘ä»¬åœ¨å„ç§çœŸå®ä¸–ç•Œåºåˆ—ä¸Šå±•ç¤ºäº†æˆ‘ä»¬çš„ç³»ç»Ÿï¼Œå¹¶å¯¹æ¥è‡ªæˆ¿é—´è§„æ¨¡çš„å‰¯æœ¬æ•°æ®é›†çš„ 8 ä¸ªåœºæ™¯è¿›è¡Œäº†è¯¦å°½çš„è¯„ä¼°å’Œçƒ§èš€åˆ†æã€‚ æˆ‘ä»¬è¡¨æ˜ï¼Œä¸æ ‡å‡†ç¨ å¯† SLAM ç³»ç»Ÿç›¸æ¯”ï¼ŒiMAP å¯ä»¥è¿›è¡Œæ›´å®Œæ•´çš„åœºæ™¯é‡å»ºï¼Œå¹¶ä¸”å†…å­˜å ç”¨æ˜æ˜¾æ›´å°ã€‚ æˆ‘ä»¬åœ¨ TUM RGB-D æ•°æ®é›†ä¸Šå±•ç¤ºäº†ä¸æœ€å…ˆè¿›çš„ SLAM ç³»ç»Ÿç›¸æ¯”å…·æœ‰ç«äº‰åŠ›çš„è·Ÿè¸ªæ€§èƒ½ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œè¿™ç¯‡è®ºæ–‡çš„ä¸»è¦è´¡çŒ®æ˜¯ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªä½¿ç”¨éšå¼ç¥ç»åœºæ™¯è¡¨ç¤ºå¹¶èƒ½å¤Ÿè”åˆä¼˜åŒ–å®Œæ•´ 3D åœ°å›¾å’Œç›¸æœºå§¿åŠ¿çš„ç¨ å¯†å®æ—¶ SLAM ç³»ç»Ÿã€‚</li><li>é€šè¿‡è‡ªåŠ¨å…³é”®å¸§é€‰æ‹©å’ŒæŸå¤±å¼•å¯¼ç¨€ç–ä¸»åŠ¨é‡‡æ ·å®ç°å®æ—¶å¢é‡è®­ç»ƒéšå¼åœºæ™¯ç½‘ç»œçš„èƒ½åŠ›ã€‚</li><li>æˆ‘ä»¬æå‡ºçš„SLAMå…¬å¼çš„å¹¶è¡Œå®ç°ï¼ˆå®Œå…¨åœ¨PyTorchä¸­å¤šå¤„ç†ï¼‰ï¼Œå®ƒä¸æ‰‹æŒRGB-Dç›¸æœºè”æœºå·¥ä½œã€‚</li></ul><h2 id="2-Related-Work"><a href="#2-Related-Work" class="headerlink" title="2. Related Work"></a>2. Related Work</h2><p><strong>è§†è§‰ SLAM ç³»ç»Ÿ Visual SLAM Systems</strong>    ç”¨äºå»ºæ¨¡ç¯å¢ƒçš„å®æ—¶è§†è§‰ SLAM ç³»ç»Ÿé€šå¸¸ä»¥åˆ†å±‚æ–¹å¼æ„å»ºï¼Œå…¶ä¸­ç¨€ç–è¡¨ç¤ºç”¨äºå®šä½ï¼Œæ›´è¯¦ç»†çš„å‡ ä½•æˆ–è¯­ä¹‰åˆ†å±‚ã€‚ ç„¶è€Œï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åœ¨â€œç¨ å¯† SLAMâ€èŒƒå¼ä¸­å·¥ä½œï¼Œå…¶ä¸­ç»Ÿä¸€çš„ç¨ å¯†åœºæ™¯è¡¨ç¤ºä¹Ÿæ˜¯ç›¸æœºè·Ÿè¸ªçš„åŸºç¡€ã€‚ ç¨ å¯†è¡¨ç¤ºé¿å…äº†ä»»æ„æŠ½è±¡ï¼Œä¾‹å¦‚å…³é”®ç‚¹ï¼Œèƒ½å¤Ÿä»¥ç¨³å¥çš„ä¸å˜æ–¹å¼è¿›è¡Œè·Ÿè¸ªå’Œé‡æ–°å®šä½ï¼Œå¹¶ä¸”ä½œä¸ºä¸ä¼ æ„Ÿå™¨æ— å…³çš„ã€ç»Ÿä¸€çš„ã€å®Œæ•´çš„ç©ºé—´è¡¨ç¤ºå…·æœ‰é•¿æœŸå¸å¼•åŠ›ã€‚</p><p>ç¨ å¯† SLAM ä¸­çš„ä¸€äº›æ–¹æ³•æ˜ç¡®è¡¨ç¤ºè¡¨é¢ï¼Œä½†éœ€è¦ç›´æ¥è¡¨ç¤ºä½“ç§¯ä»¥å®ç°å…¨é¢çš„åº”ç”¨ï¼Œä¾‹å¦‚è§„åˆ’ã€‚ å¦‚æœä½¿ç”¨å›ºå®šåˆ†è¾¨ç‡ï¼Œåˆ™ä½¿ç”¨å ç”¨æˆ–æœ‰ç¬¦å·è·ç¦»å‡½æ•°çš„ä½“ç§¯æ ‡å‡†è¡¨ç¤ºåœ¨å†…å­˜æ–¹é¢ä»£ä»·å¾ˆå¤§ã€‚ åˆ†å±‚æ–¹æ³•æ›´æœ‰æ•ˆï¼Œä½†å®ç°èµ·æ¥å¾ˆå¤æ‚ï¼Œå¹¶ä¸”é€šå¸¸åªæä¾›å°èŒƒå›´çš„è¯¦ç»†ä¿¡æ¯ã€‚ åœ¨ä»»ä½•ä¸€ç§æƒ…å†µä¸‹ï¼Œè¡¨ç¤ºéƒ½æ˜¯ç›¸å½“ä¸¥æ ¼çš„ï¼Œå¹¶ä¸”ç”±äºå®ƒä»¬ä½¿ç”¨äº†å¤§é‡çš„å‚æ•°ï¼Œå› æ­¤ä¸é€‚åˆä¸ç›¸æœºå§¿åŠ¿è¿›è¡Œè”åˆä¼˜åŒ–ã€‚</p><p>æœºå™¨å­¦ä¹ å¯ä»¥å‘ç°å¯†é›†ç»“æ„çš„ä½ç»´åµŒå…¥ï¼Œä»è€Œå®ç°é«˜æ•ˆã€è”åˆä¼˜åŒ–çš„è¡¨ç¤ºã€‚  CodeSLAMå°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œä½†ä½¿ç”¨æ·±åº¦å›¾è§†å›¾è¡¨ç¤ºè€Œä¸æ˜¯å®Œæ•´çš„ä½“ç§¯ 3Dã€‚ å­¦ä¹ æŠ€æœ¯ä¹Ÿè¢«ç”¨äºæ”¹è¿›å¯†é›†é‡å»ºï¼Œä½†éœ€è¦ç°æœ‰çš„æ‰«ææˆ–å…ˆéªŒçš„è®­ç»ƒæ•°æ®ã€‚</p><p><strong>ä½¿ç”¨ MLP è¿›è¡Œéšå¼åœºæ™¯è¡¨ç¤º Implicit Scene Representation with MLPs</strong>    åœ¨åˆ©ç”¨éšå¼MLPç¥ç»æ¨¡å‹è¿›è¡Œç›®æ ‡é‡å»ºã€ç›®æ ‡å‹ç¼©ã€æ–°çš„è§†å›¾åˆæˆå’Œåœºæ™¯å®Œæˆæ–¹é¢ï¼Œåœºæ™¯è¡¨ç¤ºå’Œå›¾å½¢æ˜¾ç¤ºå–å¾—äº†å¾ˆå¤§è¿›å±•ã€‚æœ€è¿‘çš„ä¸¤ç¯‡è®ºæ–‡ [35,39] ä¹Ÿæ¢è®¨äº†ç›¸æœºå§¿æ€ä¼˜åŒ–ã€‚ä½†æ˜¯åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿™äº›æ–¹æ³•è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªç¦»çº¿å·¥å…·ï¼Œè®¡ç®—è¦æ±‚æ˜¯å‡ å°æ—¶ã€å‡ å¤©æˆ–å‡ å‘¨ã€‚ç»“æœè¡¨æ˜ï¼Œå½“æ·±åº¦å›¾åƒå¯ç”¨æ—¶ï¼Œåˆ©ç”¨å¼•å¯¼ç¨€ç–é‡‡æ ·è¿›è¡Œæ¸²æŸ“å’Œè®­ç»ƒæ—¶ï¼Œè¿™äº›æ–¹æ³•é€‚ç”¨äºå®æ—¶SLAMã€‚</p><p><strong>æŒç»­å­¦ä¹  Continual Learning</strong>    é€šè¿‡ä½¿ç”¨å•ä¸ª MLP ä½œä¸ºä¸»åœºæ™¯æ¨¡å‹ï¼Œæˆ‘ä»¬å°†å®æ—¶ SLAM è§†ä¸ºåœ¨çº¿æŒç»­å­¦ä¹ ã€‚ ä¸€ä¸ªæœ‰æ•ˆçš„æŒç»­å­¦ä¹ ç³»ç»Ÿåº”è¯¥å±•ç¤ºå¯å¡‘æ€§ï¼ˆè·å–æ–°çŸ¥è¯†çš„èƒ½åŠ›ï¼‰å’Œç¨³å®šæ€§ï¼ˆä¿ç•™æ—§çŸ¥è¯†ï¼‰ã€‚ ç¾éš¾æ€§é—å¿˜æ˜¯ç¥ç»ç½‘ç»œçš„ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„ç‰¹æ€§ï¼Œå¹¶ä¸”æ˜¯ç¨³å®šæ€§çš„å¤±è´¥ï¼Œæ–°çš„ç»å†ä¼šè¦†ç›–è®°å¿†ã€‚</p><p>å‡è½»ç¾éš¾æ€§é—å¿˜çš„ä¸€é¡¹å·¥ä½œé‡ç‚¹æ˜¯ä½¿ç”¨ç›¸å¯¹æƒé‡æ¥ä¿æŠ¤è¡¨ç¤ºå…å—æ–°æ•°æ®çš„å½±å“ã€‚ è¿™è®©äººæƒ³èµ· SLAM ä¸­çš„ç»å…¸è¿‡æ»¤æ–¹æ³•ï¼Œä¾‹å¦‚ EKFï¼Œå€¼å¾—æœªæ¥ç ”ç©¶ã€‚ åœ¨å¯¹æ¯ä¸ªå•ç‹¬çš„ä»»åŠ¡è¿›è¡Œè®­ç»ƒåå†»ç»“æˆ–åˆå¹¶å­ç½‘ç»œçš„æ–¹æ³•å¯¹äº SLAM æ¥è¯´å¯èƒ½è¿‡äºç®€å•å’Œç¦»æ•£ã€‚</p><p>ç›¸åï¼Œæˆ‘ä»¬å°†æ³¨æ„åŠ›è½¬å‘åŸºäºé‡æ”¾çš„æŒç»­å­¦ä¹ æ–¹æ³•ï¼Œå…¶ä¸­å…ˆå‰çš„çŸ¥è¯†è¦ä¹ˆç›´æ¥å­˜å‚¨åœ¨ç¼“å†²åŒºä¸­ï¼Œè¦ä¹ˆå‹ç¼©åœ¨ç”Ÿæˆæ¨¡å‹ä¸­ã€‚ æˆ‘ä»¬ä½¿ç”¨ä¸€ç§ç®€å•çš„æ–¹æ³•ï¼Œè‡ªåŠ¨é€‰æ‹©å…³é”®å¸§æ¥å­˜å‚¨å’Œå‹ç¼©è¿‡å»çš„è®°å¿†ã€‚ æˆ‘ä»¬åœ¨æŒç»­è¿è¡Œçš„åœ°å›¾æ›´æ–°è¿‡ç¨‹ä¸­ä½¿ç”¨è¿™äº›å…³é”®å¸§çš„æŸå¤±å¼•å¯¼éšæœºæŠ½æ ·æ¥å®šæœŸé‡æ’­å’ŒåŠ å¼ºå…ˆå‰è§‚å¯Ÿåˆ°çš„åœºæ™¯åŒºåŸŸï¼ŒåŒæ—¶ç»§ç»­é€šè¿‡æ–°çš„å…³é”®å¸§æ·»åŠ ä¿¡æ¯ã€‚ åœ¨ SLAM æœ¯è¯­ä¸­ï¼Œè¿™ç§æ–¹æ³•ç±»ä¼¼äº PTAM å¼€åˆ›çš„æ–¹æ³•ï¼Œå…¶ä¸­å†å²å…³é”®å¸§é›†å’Œé‡å¤çš„å…¨å±€æŸè°ƒæ•´ä½œä¸ºé•¿æœŸåœºæ™¯è¡¨ç¤ºã€‚</p><h2 id="3-iMAP-A-Real-Time-Implicit-SLAM-System"><a href="#3-iMAP-A-Real-Time-Implicit-SLAM-System" class="headerlink" title="3. iMAP: A Real-Time Implicit SLAM System"></a>3. iMAP: A Real-Time Implicit SLAM System</h2><h3 id="3-1-System-Overview"><a href="#3-1-System-Overview" class="headerlink" title="3.1. System Overview"></a>3.1. System Overview</h3><p>å›¾2æ¦‚è¿°äº†iMAPçš„å·¥ä½œåŸç†ã€‚ä½¿ç”¨å°†3Dåæ ‡æ˜ å°„åˆ°é¢œè‰²å’Œä½“ç§¯å¯†åº¦çš„å…¨è¿æ¥ç¥ç»ç½‘ç»œ$ F_\theta $æ¥è¡¨ç¤º3Dä½“ç§¯å›¾ (ç¬¬3.2èŠ‚)ã€‚ç»™å®šç›¸æœºçš„å§¿æ€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç´¯ç§¯æ¥è‡ªåå‘æŠ•å½±å°„çº¿ä¸­çš„æ ·æœ¬çš„ç½‘ç»œæŸ¥è¯¢æ¥æ¸²æŸ“åƒç´ çš„é¢œè‰²å’Œæ·±åº¦ (ç¬¬3.3èŠ‚)ã€‚</p><p><img src="/images/paper-reading-iMAP/image-20220830225347891.png" alt="å›¾2ï¼šiMAP system pipeline."></p><p>æˆ‘ä»¬é€šè¿‡ç›¸å¯¹äºä¸€ç»„ç¨€ç–çš„ä¸»åŠ¨é‡‡æ ·æµ‹é‡å€¼ï¼ˆç¬¬ 3.6 èŠ‚ï¼‰é€æ­¥ä¼˜åŒ–ç½‘ç»œæƒé‡å’Œç›¸æœºä½å§¿ï¼Œä»æ·±åº¦å’Œå½©è‰²è§†é¢‘ä¸­æ˜ å°„åœºæ™¯ã€‚ ä¸¤ä¸ªè¿›ç¨‹åŒæ—¶è¿è¡Œï¼šè·Ÿè¸ªï¼ˆç¬¬ 3.4 èŠ‚ï¼‰ï¼Œå®ƒä¼˜åŒ–å½“å‰å¸§ç›¸å¯¹äºé”å®šç½‘ç»œçš„ä½å§¿ï¼› å’Œæ˜ å°„ï¼ˆç¬¬ 3.4 èŠ‚ï¼‰ï¼Œå®ƒè”åˆä¼˜åŒ–æ‰€é€‰å…³é”®å¸§çš„ç½‘ç»œå’Œç›¸æœºä½å§¿ï¼Œæ ¹æ®ä¿¡æ¯å¢ç›Šå¢é‡é€‰æ‹©ï¼ˆç¬¬ 3.5 èŠ‚ï¼‰ã€‚</p><h3 id="3-2-Implicit-Scene-Neural-Network"><a href="#3-2-Implicit-Scene-Neural-Network" class="headerlink" title="3.2. Implicit Scene Neural Network"></a>3.2. Implicit Scene Neural Network</h3><p>éµå¾ª NeRF ä¸­çš„ç½‘ç»œæ¶æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨å…·æœ‰ 4 ä¸ªç‰¹å¾å¤§å°ä¸º 256 çš„éšè—å±‚çš„ MLPï¼Œä»¥åŠå°† 3D åæ ‡$ \mathrm p = (x, y, z) $æ˜ å°„åˆ°é¢œè‰²å’Œä½“ç§¯å¯†åº¦å€¼çš„ä¸¤ä¸ªè¾“å‡ºå¤´ï¼š$ F_\theta{\mathrm p} = (\mathrm c , \rho)$ã€‚ ä¸ NeRF ä¸åŒï¼Œæˆ‘ä»¬ä¸è€ƒè™‘è§‚å¯Ÿæ–¹å‘ï¼Œå› ä¸ºæˆ‘ä»¬å¯¹é•œé¢åå°„å»ºæ¨¡ä¸æ„Ÿå…´è¶£ã€‚</p><p>æˆ‘ä»¬åº”ç”¨å‚…é‡Œå¶ç‰¹å¾ç½‘ç»œä¸­æå‡ºçš„é«˜æ–¯ä½ç½®åµŒå…¥å°†è¾“å…¥ 3D åæ ‡æå‡åˆ° n ç»´ç©ºé—´ï¼šsin(<strong>Bp</strong>)ï¼Œå…¶ä¸­ <strong>B</strong> æ˜¯ä»å…·æœ‰æ ‡å‡†åå·®$ \sigma $çš„æ­£æ€åˆ†å¸ƒé‡‡æ ·çš„ [nÃ—3] çŸ©é˜µã€‚ è¯¥åµŒå…¥ç”¨ä½œ MLP çš„è¾“å…¥ï¼Œä¹Ÿè¿æ¥åˆ°ç½‘ç»œçš„ç¬¬äºŒä¸ªæ¿€æ´»å±‚ã€‚ ä» SIREN [27] ä¸­æ±²å–çµæ„Ÿï¼Œæˆ‘ä»¬å…è®¸ä¼˜åŒ–åµŒå…¥çŸ©é˜µ <strong>B</strong>ï¼Œå®ç°ä¸ºå…·æœ‰æ­£å¼¦æ¿€æ´»çš„å•ä¸ªå…¨è¿æ¥å±‚ã€‚</p><h3 id="3-3-Depth-and-Colour-Rendering"><a href="#3-3-Depth-and-Colour-Rendering" class="headerlink" title="3.3. Depth and Colour Rendering"></a>3.3. Depth and Colour Rendering</h3><p>æˆ‘ä»¬çš„æ–°å¯å¾®æ¸²æŸ“å¼•æ“å— NeRF å’Œ NodeSLAM çš„å¯å‘ï¼ŒæŸ¥è¯¢åœºæ™¯ç½‘ç»œä»¥ä»ç»™å®šè§†å›¾è·å–æ·±åº¦å’Œå½©è‰²å›¾åƒã€‚</p><p>ç»™å®šä¸€ä¸ªç›¸æœºä½å§¿$ T_{WC} $å’Œä¸€ä¸ªåƒç´ åæ ‡$ [u, v] $ï¼Œæˆ‘ä»¬é¦–å…ˆåå‘æŠ•å½±ä¸€ä¸ªå½’ä¸€åŒ–çš„è§‚å¯Ÿæ–¹å‘å¹¶å°†å…¶è½¬æ¢ä¸ºä¸–ç•Œåæ ‡ï¼š$ r = T_{WC}K^{âˆ’1}[u, v]$ï¼Œç›¸æœºå†…åœ¨çŸ©é˜µ$ K $ã€‚ æˆ‘ä»¬æ²¿ç€å°„çº¿$ \mathrm p_i = d_i\mathrm r $å–ä¸€ç»„$ N $ä¸ªæ ·æœ¬ï¼Œå…·æœ‰ç›¸åº”çš„æ·±åº¦å€¼$ {d_1,Â·Â·Â·Â·, d_N}$ï¼Œå¹¶åœ¨ç½‘ç»œä¸­æŸ¥è¯¢é¢œè‰²å’Œä½“ç§¯å¯†åº¦$ (\mathrm c_i, \rho_i) = F_\theta(\mathrm p_i)$ã€‚æˆ‘ä»¬éµå¾ª NeRF çš„åˆ†å±‚å’Œåˆ†å±‚ä½“ç§¯é‡‡æ ·ç­–ç•¥ã€‚</p><p>ä½“ç§¯å¯†åº¦é€šè¿‡ä¹˜ä»¥æ ·æœ¬é—´è·ç¦»$ \delta_i = d_{i+1} - d_i $å¹¶é€šè¿‡æ¿€æ´»å‡½æ•°$ o_i = 1 - exp(-\rho_i \delta_i) $è½¬æ¢ä¸ºå ç”¨æ¦‚ç‡ã€‚ç„¶åæ¯ä¸ªæ ·æœ¬çš„å°„çº¿ç»ˆæ­¢æ¦‚ç‡å¯ä»¥ è®¡ç®—ä¸º$\omega_i = o_i \prod_{j = 1}^{i - 1}(1 - o_j)$ã€‚ æœ€åï¼Œæ·±åº¦å’Œé¢œè‰²è¢«æ¸²æŸ“ä¸ºæœŸæœ›å€¼ï¼š</p><p><img src="/images/paper-reading-iMAP/image-20220830225234185.png"></p><p>æˆ‘ä»¬å¯ä»¥å°†æ²¿å°„çº¿çš„æ·±åº¦æ–¹å·®è®¡ç®—ä¸ºï¼š</p><p><img src="/images/paper-reading-iMAP/image-20220830225300639.png"></p><h3 id="3-4-Joint-optimisation"><a href="#3-4-Joint-optimisation" class="headerlink" title="3.4. Joint optimisation"></a>3.4. Joint optimisation</h3><p>æˆ‘ä»¬è”åˆä¼˜åŒ–äº†éšå¼åœºæ™¯ç½‘ç»œå‚æ•°$ \theta $å’Œä¸æ–­å¢é•¿çš„$ W $å…³é”®å¸§é›†çš„ç›¸æœºå§¿æ€ï¼Œæ¯ä¸ªå…³é”®å¸§éƒ½æœ‰ç›¸å…³çš„é¢œè‰²å’Œæ·±åº¦æµ‹é‡ä»¥åŠåˆå§‹å§¿æ€ä¼°è®¡ï¼š${I_i,D_i,T_i}$ã€‚</p><p>æˆ‘ä»¬çš„æ¸²æŸ“å‡½æ•°å¯¹äºè¿™äº›å˜é‡æ˜¯å¯å¾®çš„ï¼Œå› æ­¤æˆ‘ä»¬æ‰§è¡Œè¿­ä»£ä¼˜åŒ–ä»¥æœ€å°åŒ–æ¯ä¸ªå…³é”®å¸§ä¸­é€‰å®šæ•°é‡çš„æ¸²æŸ“åƒç´ $ s_i $çš„å‡ ä½•å’Œå…‰åº¦è¯¯å·®ã€‚</p><p>å…‰åº¦æŸå¤±æ˜¯æ¸²æŸ“å’Œæµ‹é‡é¢œè‰²å€¼$ e_i^p[u,v] = \left| I_i[u,v] - \hat I_i[u,v] \right| $ä¹‹é—´çš„ L1 èŒƒæ•°ï¼Œç”¨äº$ M $ä¸ªåƒç´ æ ·æœ¬ï¼š</p><p><img src="/images/paper-reading-iMAP/image-20220830225657705.png"></p><p>å‡ ä½•æŸå¤±æµ‹é‡æ·±åº¦å·®å¼‚$ e_i^g[u,v] = \left| D_i[u,v] - \hat D_i[u,v] \right| $å¹¶ä½¿ç”¨æ·±åº¦æ–¹å·®ä½œä¸ºå½’ä¸€åŒ–å› å­ï¼Œåœ¨å¯¹è±¡è¾¹ç•Œç­‰ä¸ç¡®å®šåŒºåŸŸé™ä½æŸå¤±ï¼š</p><p><img src="/images/paper-reading-iMAP/image-20220830225809862.png"></p><p>æˆ‘ä»¬å°† Adamä¼˜åŒ–å™¨åº”ç”¨äºä¸¤ä¸ªæŸå¤±çš„åŠ æƒå’Œï¼Œå› å­$ \lambda_p $è°ƒæ•´èµ‹äºˆå…‰åº¦è¯¯å·®çš„æƒé‡ï¼š</p><p><img src="/images/paper-reading-iMAP/image-20220830225854970.png"></p><p><strong>ç›¸æœºè¿½è¸ª Camera Tracking</strong>    åœ¨åœ¨çº¿ SLAM ä¸­ï¼Œæ¥è¿‘å¸§ç‡çš„æ‘„åƒæœºè·Ÿè¸ªå¾ˆé‡è¦ï¼Œå› ä¸ºå¯¹è¾ƒå°ä½ç§»çš„ä¼˜åŒ–æ›´åŠ ç¨³å¥ã€‚ æˆ‘ä»¬è¿è¡Œä¸€ä¸ªå¹¶è¡Œè·Ÿè¸ªè¿‡ç¨‹ï¼Œåœ¨ä½¿ç”¨ç›¸åŒçš„æŸå¤±å’Œä¼˜åŒ–å™¨çš„åŒæ—¶ï¼Œä»¥æ¯”è”åˆä¼˜åŒ–é«˜å¾—å¤šçš„å¸§é€Ÿç‡è¿ç»­ä¼˜åŒ–æœ€æ–°å¸§ç›¸å¯¹äºå›ºå®šåœºæ™¯ç½‘ç»œçš„ä½å§¿ã€‚ è·Ÿè¸ªçš„å§¿åŠ¿åˆå§‹åŒ–åœ¨é€‰å®šå…³é”®å¸§çš„æ˜ å°„è¿‡ç¨‹ä¸­è¢«ç»†åŒ–ã€‚</p><h3 id="3-5-Keyframe-Selection"><a href="#3-5-Keyframe-Selection" class="headerlink" title="3.5. Keyframe Selection"></a>3.5. Keyframe Selection</h3><p>ä½¿ç”¨æ¥è‡ªè§†é¢‘æµçš„æ‰€æœ‰å›¾åƒè”åˆä¼˜åŒ–ç½‘ç»œå‚æ•°å’Œç›¸æœºä½å§¿åœ¨è®¡ç®—ä¸Šæ˜¯ä¸å¯è¡Œçš„ã€‚ ç„¶è€Œï¼Œç”±äºè§†é¢‘å›¾åƒä¸­å­˜åœ¨å·¨å¤§çš„å†—ä½™ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ç»„ç¨€ç–çš„ä»£è¡¨æ€§å…³é”®å¸§æ¥è¡¨ç¤ºä¸€ä¸ªåœºæ™¯ï¼Œè¿™äº›å…³é”®å¸§æ˜¯æ ¹æ®ä¿¡æ¯å¢ç›Šå¢é‡é€‰æ‹©çš„ã€‚ å§‹ç»ˆé€‰æ‹©ç¬¬ä¸€å¸§æ¥åˆå§‹åŒ–ç½‘ç»œå¹¶å›ºå®šä¸–ç•Œåæ ‡ç³»ã€‚ æ¯æ¬¡æ·»åŠ æ–°çš„å…³é”®å¸§æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šé”å®šæˆ‘ä»¬ç½‘ç»œçš„å‰¯æœ¬ä»¥è¡¨ç¤ºæˆ‘ä»¬åœ¨é‚£ä¸ªæ—¶é—´ç‚¹çš„ 3D åœ°å›¾çš„å¿«ç…§ã€‚ éšåçš„å¸§å°†æ ¹æ®è¯¥å‰¯æœ¬è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœå®ƒä»¬çœ‹åˆ°ä¸€ä¸ªæ˜¾ç€çš„æ–°åŒºåŸŸï¼Œåˆ™é€‰æ‹©å®ƒä»¬ã€‚</p><p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬æ¸²æŸ“ä¸€ç»„ç»Ÿä¸€çš„åƒç´ æ ·æœ¬$ s $å¹¶è®¡ç®—å½’ä¸€åŒ–æ·±åº¦è¯¯å·®å°äºé˜ˆå€¼$ t_D = 0.1 $çš„æ¯”ä¾‹$ P $ï¼Œä»¥æµ‹é‡æˆ‘ä»¬çš„åœ°å›¾å¿«ç…§å·²ç»è§£é‡Šçš„å¸§çš„æ¯”ä¾‹ï¼š</p><p><img src="/images/paper-reading-iMAP/image-20220830230036340.png"></p><p>å½“è¯¥æ¯”ä¾‹ä½äºé˜ˆå€¼$ P &lt; t_P $ï¼ˆæˆ‘ä»¬å°†$ t_P $è®¾ç½®ä¸º0.65ï¼‰æ—¶ï¼Œè¯¥å¸§å°†æ·»åŠ åˆ°å…³é”®å¸§é›†ã€‚å½’ä¸€åŒ–æ·±åº¦è¯¯å·®ä¼šäº§ç”Ÿè‡ªé€‚åº”å…³é”®å¸§é€‰æ‹©ï¼Œå½“ç›¸æœºæ›´é è¿‘ç‰©ä½“æ—¶ï¼Œéœ€è¦æ›´é«˜çš„ç²¾åº¦ï¼Œå› æ­¤éœ€è¦æ›´ç´§å¯†çš„å…³é”®å¸§ã€‚</p><p>åœ¨æ˜ å°„è¿‡ç¨‹ä¸­æ¥æ”¶åˆ°çš„æ¯ä¸€å¸§éƒ½ç”¨äºè”åˆä¼˜åŒ–å‡ æ¬¡è¿­ä»£ï¼ˆ10 åˆ° 20 æ¬¡ä¹‹é—´ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬çš„å…³é”®å¸§é›†æ€»æ˜¯ç”±æ‰€é€‰é›†ä»¥åŠä¸æ–­å˜åŒ–çš„æœ€æ–°å¸§ç»„æˆã€‚</p><h3 id="3-6-Active-Sampling"><a href="#3-6-Active-Sampling" class="headerlink" title="3.6. Active Sampling"></a>3.6. Active Sampling</h3><p><strong>å›¾åƒä¸»åŠ¨é‡‡æ · Image Active Sampling</strong>    æ¸²æŸ“å’Œä¼˜åŒ–æ‰€æœ‰å›¾åƒåƒç´ åœ¨è®¡ç®—å’Œå†…å­˜æ–¹é¢ä»£ä»·å¾ˆå¤§ã€‚ æˆ‘ä»¬åˆ©ç”¨å›¾åƒè§„å¾‹æ€§åœ¨æ¯æ¬¡è¿­ä»£ä¸­ä»…æ¸²æŸ“å’Œä¼˜åŒ–ä¸€ç»„éå¸¸ç¨€ç–çš„éšæœºåƒç´ ï¼ˆæ¯å¼ å›¾åƒ 200 ä¸ªï¼‰ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¸²æŸ“æŸå¤±æ¥æŒ‡å¯¼åœ¨å…·æœ‰æ›´é«˜ç»†èŠ‚çš„ä¿¡æ¯åŒºåŸŸæˆ–é‡å»ºå°šä¸ç²¾ç¡®çš„ä¿¡æ¯åŒºåŸŸä¸­çš„ä¸»åŠ¨é‡‡æ ·ã€‚</p><p>æ¯æ¬¡è”åˆä¼˜åŒ–è¿­ä»£åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µã€‚é¦–å…ˆï¼Œæˆ‘ä»¬é‡‡æ ·ä¸€ç»„$ s_i $åƒç´ ï¼Œå‡åŒ€åˆ†å¸ƒåœ¨æ¯ä¸ªå…³é”®å¸§çš„æ·±åº¦å’Œé¢œè‰²å›¾åƒä¸Šã€‚è¿™äº›åƒç´ ç”¨äºæ›´æ–°ç½‘ç»œå’Œç›¸æœºä½å§¿ï¼Œå¹¶è®¡ç®—æŸå¤±ç»Ÿè®¡ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†æ¯å¼ å›¾åƒåˆ’åˆ†ä¸º [8Ã—8] ç½‘æ ¼ï¼Œå¹¶è®¡ç®—æ¯ä¸ªæ­£æ–¹å½¢åŒºåŸŸ$ R_j $å†…çš„å¹³å‡æŸå¤±ï¼Œå…¶ä¸­$ j = {1, 2, Â· Â· Â· , 64} $ï¼š</p><p><img src="/images/paper-reading-iMAP/image-20220830230713156.png"></p><p>å…¶ä¸­$ r_j = s_i \cap R_j $æ˜¯ä»$ R_j $å‡åŒ€é‡‡æ ·çš„åƒç´ ã€‚ æˆ‘ä»¬å°†è¿™äº›ç»Ÿè®¡æ•°æ®å½’ä¸€åŒ–ä¸ºæ¦‚ç‡åˆ†å¸ƒï¼š</p><p><img src="/images/paper-reading-iMAP/image-20220830230837596.png"></p><p>æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªåˆ†å¸ƒå¯¹æ¯ä¸ªåŒºåŸŸé‡æ–°é‡‡æ ·ä¸€ç»„æ–°çš„$ n_i \cdot f_i[j] $ä¸ªå‡åŒ€æ ·æœ¬ï¼ˆ$ n_i $æ˜¯æ¯ä¸ªå…³é”®å¸§ä¸­çš„æ€»æ ·æœ¬ï¼‰ï¼Œå°†æ›´å¤šæ ·æœ¬åˆ†é…åˆ°å…·æœ‰é«˜æŸå¤±çš„åŒºåŸŸã€‚ åœºæ™¯ç½‘ç»œä½¿ç”¨æ¥è‡ªæ´»åŠ¨æ ·æœ¬çš„æŸå¤±è¿›è¡Œæ›´æ–°ï¼ˆåœ¨ç›¸æœºè·Ÿè¸ªä¸­ä»…ä½¿ç”¨ç»Ÿä¸€é‡‡æ ·ï¼‰ã€‚ å›¾åƒä¸»åŠ¨é‡‡æ ·å¦‚å›¾ 3 æ‰€ç¤ºã€‚</p><p><img src="/images/paper-reading-iMAP/image-20220830230953670.png" alt="å›¾ 3ï¼šå›¾åƒä¸»åŠ¨é‡‡æ ·ã€‚ å·¦ï¼šä½¿ç”¨ä¸€ç»„å‡åŒ€æ ·æœ¬çš„å‡ ä½•æŸå¤±è®¡ç®—æ•´ä¸ªå›¾åƒç½‘æ ¼çš„æŸå¤±åˆ†å¸ƒã€‚ å³å›¾ï¼šæ ¹æ®æŸå¤±åˆ†å¸ƒè¿›ä¸€æ­¥åˆ†é…æ´»åŠ¨æ ·æœ¬ã€‚"></p><p><strong>å…³é”®å¸§ä¸»åŠ¨é‡‡æ · Keyframe Active Sampling</strong>    åœ¨ iMAP ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ç»„é€‰å®šçš„å…³é”®å¸§ä¸æ–­ä¼˜åŒ–æˆ‘ä»¬çš„åœºæ™¯åœ°å›¾ï¼Œä½œä¸ºè®°å¿†åº“æ¥é¿å…ç½‘ç»œé—å¿˜ã€‚ æˆ‘ä»¬å¸Œæœ›å°†æ›´å¤šæ ·æœ¬åˆ†é…ç»™å…·æœ‰æ›´é«˜æŸå¤±çš„å…³é”®å¸§ï¼Œå› ä¸ºå®ƒä»¬ä¸æ–°æ¢ç´¢çš„ã€é«˜åº¦è¯¦ç»†çš„æˆ–ç½‘ç»œå¼€å§‹å¿˜è®°çš„åŒºåŸŸç›¸å…³ã€‚ æˆ‘ä»¬éµå¾ªç±»ä¼¼äºå›¾åƒä¸»åŠ¨é‡‡æ ·çš„è¿‡ç¨‹ï¼Œå¹¶å°† ni ä¸ªæ ·æœ¬åˆ†é…ç»™æ¯ä¸ªå…³é”®å¸§ï¼Œä¸å…³é”®å¸§ä¹‹é—´çš„æŸå¤±åˆ†å¸ƒæˆæ¯”ä¾‹ï¼Œè§å›¾ 4ã€‚</p><p><strong>æœ‰ç•Œå…³é”®å¸§é€‰æ‹© Bounded Keyframe Selection</strong>    éšç€ç›¸æœºç§»åŠ¨åˆ°æ–°çš„å’Œæœªæ¢ç´¢çš„åŒºåŸŸï¼Œæˆ‘ä»¬çš„å…³é”®å¸§é›†ä¸æ–­å¢é•¿ã€‚ ä¸ºäº†ç»‘å®šè”åˆä¼˜åŒ–è®¡ç®—ï¼Œæˆ‘ä»¬åœ¨æ¯æ¬¡è¿­ä»£ä¸­é€‰æ‹©ä¸€ä¸ªå›ºå®šæ•°é‡çš„å…³é”®å¸§ï¼ˆå®æ—¶ç³»ç»Ÿä¸­ä¸º 3 ä¸ªï¼‰ï¼Œæ ¹æ®æŸå¤±åˆ†å¸ƒéšæœºé‡‡æ ·ã€‚ æˆ‘ä»¬æ€»æ˜¯åœ¨è”åˆä¼˜åŒ–ä¸­åŒ…å«æœ€åä¸€ä¸ªå…³é”®å¸§å’Œå½“å‰å®æ—¶å¸§ï¼Œä»¥ç»„æˆä¸€ä¸ª$ W = 5 $ä¸æ–­å˜åŒ–çš„å¸§çš„æœ‰ç•Œçª—å£ã€‚ å‚è§å›¾ 4ã€‚</p><p><img src="/images/paper-reading-iMAP/image-20220830231107081-16618741509601.png" alt="å›¾4: å…³é”®å¸§ä¸»åŠ¨é‡‡æ ·ã€‚æˆ‘ä»¬åœ¨æ³¨å†Œçš„å…³é”®å¸§ä¸Šä¿æŒæŸè€—åˆ†å¸ƒã€‚è¯¥åˆ†å¸ƒç”¨äºå¯¹å…³é”®å¸§ (çº¢è‰²æ¡†) çš„æœ‰ç•Œçª—å£è¿›è¡Œé‡‡æ ·ï¼Œå¹¶ç”¨äºåœ¨æ¯ä¸ªå…³é”®å¸§ä¸­åˆ†é…åƒç´ æ ·æœ¬ã€‚"></p><h2 id="4-Experimental-Results"><a href="#4-Experimental-Results" class="headerlink" title="4. Experimental Results"></a>4. Experimental Results</h2><p>é€šè¿‡ç»¼åˆå®éªŒï¼Œæˆ‘ä»¬è¯„ä¼°äº† iMAP çš„ 3D é‡å»ºå’Œè·Ÿè¸ªï¼Œå¹¶å¯¹è®¾è®¡é€‰æ‹©çš„å‡†ç¡®æ€§å’Œé€Ÿåº¦è¿›è¡Œäº†è¯¦ç»†çš„çƒ§èš€åˆ†æã€‚</p><h3 id="4-1-Experimental-Setup"><a href="#4-1-Experimental-Setup" class="headerlink" title="4.1. Experimental Setup"></a>4.1. Experimental Setup</h3><p><strong>æ•°æ®é›†</strong>    æˆ‘ä»¬åœ¨æ¨¡æ‹Ÿå’ŒçœŸå®åºåˆ—ä¸Šè¿›è¡Œå®éªŒã€‚ å¯¹äºé‡å»ºè¯„ä¼°ï¼Œæˆ‘ä»¬ä½¿ç”¨ Replica æ•°æ®é›†ï¼Œè¿™æ˜¯å¯¹çœŸå®æˆ¿é—´è§„æ¨¡ç¯å¢ƒçš„é«˜è´¨é‡ 3D é‡å»ºï¼Œæœ‰ 5 ä¸ªåŠå…¬å®¤å’Œ 3 ä¸ªå…¬å¯“ã€‚ å¯¹äºæ¯ä¸ª Replica åœºæ™¯ï¼Œæˆ‘ä»¬æ¸²æŸ“ 2000 ä¸ª RGB-D å¸§çš„éšæœºè½¨è¿¹ã€‚ å¯¹äºåŸå§‹æ‘„åƒæœºè®°å½•ï¼Œæˆ‘ä»¬ä½¿ç”¨æ‰‹æŒå¼ Microsoft Azure Kinect åœ¨å„ç§ç¯å¢ƒä¸­æ•è· RGB-D è§†é¢‘ï¼Œå¹¶åœ¨ TUM RGB-D æ•°æ®é›†ä¸Šè¿›è¡Œæµ‹è¯•ä»¥è¯„ä¼°æ‘„åƒæœºè·Ÿè¸ªã€‚</p><p><strong>å®æ–½ç»†èŠ‚</strong>    å¯¹äºæ‰€æœ‰å®éªŒï¼Œæˆ‘ä»¬è®¾ç½®ä»¥ä¸‹é»˜è®¤å‚æ•°ï¼šå…³é”®å¸§é…å‡†é˜ˆå€¼$ t_P = 0.65 $ï¼Œå…‰åº¦æŸå¤±åŠ æƒ$ \lambda_p = 5 $ï¼Œå…³é”®å¸§çª—å£å¤§å°$ W = 5 $ï¼Œåƒç´ æ ·æœ¬$ |s_i|  = 200 $ï¼Œä½ç½®åµŒå…¥å¤§å°$ m = 93 $å’Œ$ \sigma = 25$ï¼Œä»¥åŠ 32 ä¸ªç²—åˆ†ç±»å’Œ 12 ä¸ªç»†åˆ†ç±»ç”¨äºæ¸²æŸ“ã€‚  3D ç‚¹åæ ‡é€šè¿‡$\frac {1}{10}$å½’ä¸€åŒ–ä»¥æ¥è¿‘ [0, 1] èŒƒå›´ã€‚</p><p>åœ¨æ‰‹æŒç›¸æœºçš„åœ¨çº¿æ“ä½œä¸­ï¼Œåˆ°è¾¾å¤„ç†å¸§ä¹‹é—´çš„æµå¼å›¾åƒè¢«ä¸¢å¼ƒã€‚ å¯¹äºæ­¤å¤„ä»‹ç»çš„å®éªŒï¼Œæ¯ä¸ªæ•è·çš„å¸§éƒ½è¢«å¤„ç†ï¼Œä»¥ 10 Hz è¿è¡Œã€‚ å¦‚æœéœ€è¦ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨ç»Ÿä¸€ä½“ç´ ç½‘æ ¼ä¸­ä»ç½‘ç»œæŸ¥è¯¢å ç”¨å€¼ï¼Œç„¶åè¿è¡Œè¡Œè¿›ç«‹æ–¹ä½“æ¥æ¢å¤ç½‘æ ¼é‡å»ºã€‚ ç½‘æ ¼åŒ–ç”¨äºå¯è§†åŒ–å’Œè¯„ä¼°ç›®çš„ï¼Œä¸æ„æˆæˆ‘ä»¬çš„ SLAM ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚</p><h3 id="4-2-Scene-Reconstruction-Evaluation"><a href="#4-2-Scene-Reconstruction-Evaluation" class="headerlink" title="4.2. Scene Reconstruction Evaluation"></a>4.2. Scene Reconstruction Evaluation</h3><p><strong>å°ºåº¦</strong>    æˆ‘ä»¬ä»åœ°é¢å®å†µå’Œé‡å»ºç½‘æ ¼ä¸­é‡‡æ ·äº†200000ä¸ªç‚¹ï¼Œå¹¶è®¡ç®—äº†ä¸‰ä¸ªå®šé‡æŒ‡æ ‡ï¼šç²¾åº¦ï¼ˆcmï¼‰ï¼šé‡å»ºç½‘æ ¼ä¸­çš„é‡‡æ ·ç‚¹ä¸æœ€è¿‘åœ°é¢å®å†µç‚¹ä¹‹é—´çš„å¹³å‡è·ç¦»ï¼›å®Œæˆåº¦ï¼ˆcmï¼‰ï¼šé‡‡æ ·ç‚¹ä¸åœ°é¢çœŸå®ç½‘æ ¼å’Œæœ€è¿‘é‡å»ºç‚¹ä¹‹é—´çš„å¹³å‡è·ç¦»ï¼›å’Œå®Œæˆç‡ï¼ˆ&lt;5cm%ï¼‰ï¼šé‡å»ºç½‘æ ¼ä¸­å®Œæˆå°äº5cmçš„ç‚¹çš„ç™¾åˆ†æ¯”ã€‚</p><p><img src="/images/paper-reading-iMAP/image-20220830233300102.png" alt="å›¾ 5ï¼šReplica room-0 çš„é‡å»ºå’Œè·Ÿè¸ªç»“æœä»¥åŠæ³¨å†Œçš„å…³é”®å¸§ã€‚"></p><p><img src="/images/paper-reading-iMAP/image-20220830233317768.png" alt="å›¾ 6ï¼šiMAPï¼ˆå·¦ï¼‰è®¾æ³•å¡«å……æœªè§‚å¯Ÿåˆ°çš„åŒºåŸŸï¼Œè¿™äº›åŒºåŸŸå¯è¢«è§†ä¸º TSDF èåˆä¸­çš„æ¼æ´ï¼ˆå³ï¼‰ã€‚"></p><p>è”åˆä¼˜åŒ– 3D åœ°å›¾å’Œç›¸æœºä½å§¿çš„èƒ½åŠ›ä½¿æˆ‘ä»¬çš„ç³»ç»Ÿèƒ½å¤Ÿæ„å»ºå®Œæ•´çš„å…¨å±€è¿è´¯åœºæ™¯é‡å»ºï¼Œå¦‚å›¾ 1 å’Œ 7 æ‰€ç¤ºï¼Œä»¥åŠå‡†ç¡®çš„ç›¸æœºè·Ÿè¸ªï¼Œå¦‚å›¾ 5 æ‰€ç¤ºã€‚iMAP çš„é²æ£’æ€§å’Œå¤šåŠŸèƒ½æ€§ é€šè¿‡å›¾ 9 å’Œ 8 ä¸­çš„é‡å»ºï¼Œåœ¨å„ç§çœŸå®ä¸–ç•Œçš„å½•éŸ³ä¸­å¾—åˆ°äº†è¯æ˜ï¼Œè¿™äº›é‡å»ºæ˜¾ç¤ºäº†å®ƒåœ¨ä»æ•´ä¸ªæˆ¿é—´åˆ°å°ç‰©ä½“å’Œè–„ç»“æ„çš„è§„æ¨¡ä¸Šå·¥ä½œçš„èƒ½åŠ›ã€‚</p><p><img src="/images/paper-reading-iMAP/image-20220830233059436.png" alt="å›¾ 7ï¼šå‰¯æœ¬é‡å»ºï¼Œçªå‡ºæ˜¾ç¤º iMAP å¦‚ä½•å¡«å……æœªè§‚å¯Ÿåˆ°çš„åŒºåŸŸï¼Œè¿™äº›åŒºåŸŸæ˜¯ TSDF èåˆä¸­çš„ç™½æ´ã€‚"></p><p><img src="/images/paper-reading-iMAP/image-20220830233041963.png" alt="å›¾ 8ï¼šä½¿ç”¨ Azure Kinect æ˜ å°„çš„å„ç§çœŸå®åœºæ™¯çš„å¯¹æ¯”é‡å»ºç»“æœã€‚  TDSF èåˆç»“æœä¸­çš„ç™½æ´ä¼¼ä¹ç”± iMAP å¡«å……ã€‚"></p><p><img src="/images/paper-reading-iMAP/image-20220830233021258.png" alt="å›¾ 9ï¼šiMAP åœ¨å„ç§ç°å®ä¸–ç•Œè®¾ç½®ä¸­çš„å®æ—¶é‡å»ºç»“æœã€‚"></p><p>æˆ‘ä»¬å°†iMAPä¸­çš„åœºæ™¯é‡å»ºä¸TSDF fusionè¿›è¡Œäº†æ¯”è¾ƒï¼Œåè€…æ˜¯åŸºäºèåˆçš„å¯†é›†SLAMæ–¹æ³•çš„ä»£è¡¨ã€‚ä¸ºäº†éš”ç¦»é‡å»ºï¼Œæˆ‘ä»¬ä½¿ç”¨iMAPç”Ÿæˆçš„æ‘„åƒæœºè·Ÿè¸ªè¿›è¡ŒTSDF fusionã€‚æˆ‘ä»¬çš„éšå¼è¡¨ç¤ºæœ€æ˜¾è‘—çš„ä¼˜åŠ¿æ˜¯èƒ½å¤Ÿåœ¨æœªè§‚å¯Ÿåˆ°çš„åŒºåŸŸå¡«å……ï¼Œå¦‚å›¾7å’Œå›¾8æ‰€ç¤ºã€‚iMAPåœ¨æ‰€æœ‰8ä¸ªå¤åˆ¶åœºæ™¯ä¸­å¹³å‡å®ç°äº†4%çš„é«˜å®Œæˆç‡ï¼Œå¦‚è¡¨1æ‰€ç¤ºï¼Œoffice-3çš„å®Œæˆç‡æé«˜äº†11%ã€‚</p><p>å…·æœ‰ä¸åŒé…ç½®è®¾ç½®çš„ iMAP å’Œ TSDF èåˆçš„å†…å­˜æ¶ˆè€—å¦‚è¡¨ 2 æ‰€ç¤ºã€‚åœ¨ TSDF èåˆä¸­é»˜è®¤å€¼ä¸º 2563 ä½“ç´ åˆ†è¾¨ç‡å’Œ iMAP ä¸­çš„ç½‘ç»œå®½åº¦ä¸º 256 æ—¶ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿå¯ä»¥è¡¨ç¤ºå†…å­˜ä½¿ç”¨é‡å‡å°‘ 60 å€çš„åœºæ™¯ï¼ŒåŒæ—¶è·å¾—ç›¸ä¼¼çš„ é‡å»ºç²¾åº¦å¦‚è¡¨ 1 æ‰€ç¤ºã€‚</p><p><img src="/images/paper-reading-iMAP/image-20220830233129794.png" alt="è¡¨1ï¼š8ä¸ªå®¤å†…å¤åˆ¶åœºæ™¯çš„é‡å»ºç»“æœã€‚æˆ‘ä»¬æŠ¥å‘Šäº†æ¯ä¸ªåœºæ™¯ä¸­æœ€é«˜çš„å®Œæˆç‡ï¼Œä»¥åŠç›¸åº”çš„å‡†ç¡®æ€§å’Œå®Œæˆç‡å€¼ã€‚"></p><p><img src="/images/paper-reading-iMAP/image-20220830232944402.png" alt="è¡¨ 2ï¼šå†…å­˜æ¶ˆè€—ï¼šå¯¹äº iMAP ä½œä¸ºç½‘ç»œå¤§å°çš„å‡½æ•°ï¼Œå¯¹äºä½“ç´ åˆ†è¾¨ç‡çš„ TSDF èåˆã€‚"></p><p>å½“ä½¿ç”¨çœŸå®ç›¸æœºæ—¶ï¼Œé™¤äº†æ›´å¥½åœ°å®Œæˆå¤–ï¼Œæˆ‘ä»¬çš„æ–¹æ³•åœ¨æ·±åº¦ç›¸æœºæ— æ³•æä¾›å‡†ç¡®è¯»æ•°çš„åœ°æ–¹ï¼ˆå¦‚é»‘è‰²ç‰©ä½“ï¼ˆå›¾8dï¼‰å’Œåå°„æˆ–é€æ˜è¡¨é¢ï¼ˆå›¾6ï¼‰ï¼‰ä¼˜äºTSDFèåˆã€‚è¿™ç§æ€§èƒ½å¯å½’å› äºé‡å»ºçš„å…‰åº¦æŸå¤±ä»¥åŠåœ°å›¾ç½‘ç»œçš„æ’å€¼èƒ½åŠ›ã€‚</p><h3 id="4-3-TUM-Evaluation"><a href="#4-3-TUM-Evaluation" class="headerlink" title="4.3. TUM Evaluation"></a>4.3. TUM Evaluation</h3><p>æˆ‘ä»¬åœ¨æ¥è‡ª TUM RGB-D çš„ä¸‰ä¸ªåºåˆ—ä¸Šè¿è¡Œ iMAPã€‚ è·Ÿè¸ª ATE RMSE å¦‚è¡¨ 3 æ‰€ç¤ºã€‚æˆ‘ä»¬ä¸åŸºäºé¢å…ƒçš„ BAD-SLAMã€TSDF èåˆ Kintinuouså’Œç¨€ç– ORB-SLAM2 ç­‰æœ€å…ˆè¿›çš„ SLAM ç³»ç»Ÿè¿›è¡Œäº†æ¯”è¾ƒã€‚ åœ¨å§¿åŠ¿å‡†ç¡®æ€§æ–¹é¢ï¼ŒiMAP çš„è¡¨ç°å¹¶ä¸ä¼˜äºå®ƒä»¬ï¼Œä½†åœ¨ 2 åˆ° 6 å˜ç±³çš„è¯¯å·®æ–¹é¢å…·æœ‰ç«äº‰åŠ›ã€‚ ç½‘æ ¼é‡å»ºå¦‚å›¾ 10 æ‰€ç¤ºã€‚åœ¨å›¾ 11 ä¸­ï¼Œæˆ‘ä»¬å¼ºè°ƒäº† iMAP å¦‚ä½•å¡«å……æœªè§‚å¯ŸåŒºåŸŸä¸­çš„å­”ï¼Œè¿™ä¸ BAD-SLAM ä¸åŒã€‚</p><p><img src="/images/paper-reading-iMAP/image-20220830232831812.png" alt="è¡¨ 3ï¼šåœ¨ TUM RGB-D æ•°æ®é›†ä¸Šä»¥å˜ç±³ä¸ºå•ä½çš„ ATE RMSEã€‚"></p><p><img src="/images/paper-reading-iMAP/image-20220830232809469.png" alt="å›¾ 10ï¼šTUM æ•°æ®é›†çš„ iMAP é‡å»ºç»“æœã€‚"></p><p><img src="/images/paper-reading-iMAP/image-20220830232904051.png" alt="å›¾ 11ï¼šiMAPï¼ˆé¡¶éƒ¨ï¼‰å¯¹ BAD-SLAMï¼ˆåº•éƒ¨ï¼‰çš„å­”å¡«å……èƒ½åŠ›ã€‚"></p><h3 id="4-4-Ablative-Analysis"><a href="#4-4-Ablative-Analysis" class="headerlink" title="4.4. Ablative Analysis"></a>4.4. Ablative Analysis</h3><p>æˆ‘ä»¬ä½¿ç”¨æœ€å¤§çš„ Replica åœºæ™¯åˆ†æå½±å“æˆ‘ä»¬ç³»ç»Ÿçš„è®¾è®¡é€‰æ‹©ï¼šoffice-2 å’Œä¸‰ä¸ªä¸åŒçš„éšæœºç§å­ã€‚ å®Œæˆç‡ç»“æœå’Œæ—¶åºå¦‚è¡¨ 4 æ‰€ç¤ºã€‚æˆ‘ä»¬å‘ç°ç½‘ç»œ$ width = 256 $ï¼Œå…³é”®å¸§çª—å£å¤§å°é™åˆ¶ä¸º$ W = 5 $ï¼Œæ¯å¸§ 200 åƒç´ æ ·æœ¬æä¾›äº†æ”¶æ•›é€Ÿåº¦å’Œå‡†ç¡®æ€§çš„æœ€ä½³æŠ˜è¡·ã€‚æˆ‘ä»¬åœ¨å›¾ 12 ä¸­è¿›ä¸€æ­¥è¡¨æ˜ï¼Œä¸»åŠ¨é‡‡æ ·æ¯”éšæœºé‡‡æ ·èƒ½å¤Ÿå®ç°æ›´å¿«çš„ç²¾åº¦æ”¶æ•›å’Œæ›´é«˜çš„åœºæ™¯å®Œæˆåº¦ã€‚</p><p><img src="/images/paper-reading-iMAP/image-20220830232727343.png" alt="è¡¨ 4ï¼šè·Ÿè¸ªï¼ˆ6 æ¬¡è¿­ä»£ï¼‰å’Œæ˜ å°„ï¼ˆ10 æ¬¡è¿­ä»£ï¼‰çš„æ—¶åºç»“æœï¼Œåœ¨åŒä¸€ GPU ä¸ŠåŒæ—¶è¿è¡Œã€‚ é»˜è®¤é…ç½®ï¼šç½‘ç»œå®½åº¦ 256ï¼Œçª—å£å¤§å° 5ï¼Œæ¯ä¸ªå…³é”®å¸§ 200 ä¸ªæ ·æœ¬ã€‚ æœ€åä¸€è¡Œï¼šå‰¯æœ¬ office-2 çš„å®Œæˆç‡ã€‚"></p><p>è¿™äº›è®¾è®¡é€‰æ‹©ä½¿æˆ‘ä»¬çš„åœ¨çº¿éšå¼SLAMç³»ç»Ÿèƒ½å¤Ÿä»¥10Hzçš„é¢‘ç‡è¿è¡Œä»¥è¿›è¡Œè·Ÿè¸ªï¼Œä»¥2Hzçš„é¢‘ç‡è¿›è¡Œæ˜ å°„ã€‚æˆ‘ä»¬çš„å®éªŒè¯æ˜äº†éšæœºæŠ½æ ·åœ¨ä¼˜åŒ–ä¸­çš„ä½œç”¨ï¼Œå¹¶å¼ºè°ƒäº†å…³é”®å‘ç°ï¼Œå³ä½¿ç”¨éšæœºå˜åŒ–çš„ä¿¡æ¯è¿›è¡Œå¿«é€Ÿè¿­ä»£æ¯”ä½¿ç”¨å¯†é›†å’Œç¼“æ…¢è¿­ä»£æ›´å¥½ã€‚</p><p>å°†å‡ ä½•å’Œå…‰åº¦æŸå¤±ç»“åˆèµ·æ¥ï¼Œä½¿æˆ‘ä»¬çš„ç³»ç»Ÿèƒ½å¤Ÿä»å‡ ä¸ªå…³é”®å¸§è·å¾—å…¨æˆ¿é—´å°ºåº¦çš„é‡å»ºï¼›å¯¹äºè¡¨1ä¸­çš„8ä¸ªå¤åˆ¶åœºæ™¯ï¼Œå¹³å‡ä¸º13ã€‚å¦‚è¡¨5æ‰€ç¤ºï¼Œä½¿ç”¨æ›´å¤šå…³é”®å¸§å¯¹è¿›ä¸€æ­¥æé«˜åœºæ™¯å®Œæˆç‡å‡ ä¹æ²¡æœ‰ä½œç”¨ã€‚</p><p><img src="/images/paper-reading-iMAP/image-20220830232657552.png" alt="è¡¨ 5ï¼šReplica office-2 ä¸­ä¸åŒé€‰æ‹©é˜ˆå€¼çš„å…³é”®å¸§æ•°å’Œå®Œæˆç‡ç»“æœã€‚"></p><p>éšå¼åœºæ™¯ç½‘ç»œå…·æœ‰åœ¨æ·»åŠ é«˜é¢‘åœºæ™¯ç»†èŠ‚ä¹‹å‰å¿«é€Ÿæ”¶æ•›åˆ°ä½é¢‘å½¢çŠ¶çš„ç‰¹æ€§ã€‚ å›¾ 13 æ˜¾ç¤ºäº†æ¥è‡ªé™æ€æ‘„åƒæœºçš„ç½‘ç»œè®­ç»ƒï¼Œå¹³å‡è¶…è¿‡ 5 ä¸ªä¸åŒçš„çœŸå®åœºæ™¯ã€‚ æ·±åº¦æŸå¤±åœ¨ä¸€ç§’é’Ÿå†…é™è‡³ 5 å˜ç±³ä»¥ä¸‹ï¼› åœ¨ 4 ç§’å†…ä½äº 2 å˜ç±³ï¼› ç„¶åç»§ç»­ç¼“æ…¢ä¸‹é™ã€‚å½“æ˜ å°„ä¸€ä¸ªæ–°åœºæ™¯æ—¶ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿéœ€è¦å‡ ç§’é’Ÿæ¥è¿›è¡Œç²—ç•¥çš„é‡å»ºï¼Œå¹¶éœ€è¦å‡ åˆ†é’Ÿæ¥æ·»åŠ ç²¾ç»†çš„ç»†èŠ‚ã€‚ åœ¨å›¾ 14 ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†ç³»ç»Ÿå¦‚ä½•ä»ç²—ç•¥é‡å»ºå¼€å§‹ï¼Œå¹¶éšç€ç½‘ç»œè®­ç»ƒå’Œç›¸æœºé è¿‘ç‰©ä½“è€Œæ·»åŠ ç»†èŠ‚ã€‚ è¿™æ˜¯ SLAM ä¸­çš„ä¸€ä¸ªæœ‰ç”¨å±æ€§ï¼Œå› ä¸ºå®ƒä½¿å®æ—¶è·Ÿè¸ªå³ä½¿åœ¨ç§»åŠ¨åˆ°æœªæ¢ç´¢åŒºåŸŸæ—¶ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œã€‚</p><p><img src="/images/paper-reading-iMAP/image-20220830232622823.png" alt="å›¾ 13ï¼šè¾¾åˆ° 5cmã€2cmã€1cm å’Œ 0.75cm æ·±åº¦è¯¯å·®åˆ†åˆ«éœ€è¦å¤§çº¦ 1ã€4ã€20ã€43 ç§’ã€‚"></p><p><img src="/images/paper-reading-iMAP/image-20220830232552221.png" alt="å›¾ 14ï¼šé‡å»ºç»†èŠ‚çš„æ¼”å˜ã€‚"></p><h2 id="5-Conclusions"><a href="#5-Conclusions" class="headerlink" title="5. Conclusions"></a>5. Conclusions</h2><p>æˆ‘ä»¬å°†å¯†é›† SLAM è§†ä¸ºå®æ—¶æŒç»­å­¦ä¹ ï¼Œå¹¶è¡¨æ˜ MLP å¯ä»¥ä½œä¸ºå®æ—¶ç³»ç»Ÿä¸­å”¯ä¸€çš„åœºæ™¯è¡¨ç¤ºä»å¤´å¼€å§‹è®­ç»ƒï¼Œä»è€Œä½¿ RGB-D ç›¸æœºèƒ½å¤Ÿæ„å»ºå’Œè·Ÿè¸ªå®Œæ•´ä¸”å‡†ç¡®çš„ä½“ç§¯æ¨¡å‹ æˆ¿é—´è§„æ¨¡çš„åœºæ™¯ã€‚ æˆ‘ä»¬æ–¹æ³•çš„å®æ—¶ä½†é•¿æœŸ SLAM æ€§èƒ½çš„å…³é”®æ˜¯ï¼šå¹¶è¡Œè·Ÿè¸ªå’Œæ˜ å°„ã€ç”¨äºå¿«é€Ÿä¼˜åŒ–çš„æŸå¤±å¼•å¯¼åƒç´ é‡‡æ ·ä»¥åŠæ™ºèƒ½å…³é”®å¸§é€‰æ‹©ä½œä¸ºé‡æ”¾ä»¥é¿å…ç½‘ç»œé—å¿˜ã€‚  iMAP çš„æœªæ¥æ–¹å‘åŒ…æ‹¬å¦‚ä½•åˆ¶ä½œæ›´ç»“æ„åŒ–å’Œç»„åˆæ€§çš„è¡¨ç¤ºï¼Œä»¥æ˜ç¡®åœ°æ¨ç†åœºæ™¯ä¸­çš„è‡ªç›¸ä¼¼æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡é˜…è¯»ã€ŠNICE-SLAMï¼šNeural Implicit Scalable Encoding for SLAMã€‹</title>
      <link href="2022/08/30/paper-reading-nice-slam/"/>
      <url>2022/08/30/paper-reading-nice-slam/</url>
      
        <content type="html"><![CDATA[<h1 id="è®ºæ–‡é˜…è¯»ã€ŠNICE-SLAM-Neural-Implicit-Scalable-Encoding-for-SLAMã€‹"><a href="#è®ºæ–‡é˜…è¯»ã€ŠNICE-SLAM-Neural-Implicit-Scalable-Encoding-for-SLAMã€‹" class="headerlink" title="è®ºæ–‡é˜…è¯»ã€ŠNICE-SLAM: Neural Implicit Scalable Encoding for SLAMã€‹"></a>è®ºæ–‡é˜…è¯»ã€ŠNICE-SLAM: Neural Implicit Scalable Encoding for SLAMã€‹</h1><p><img src="/images/paper-reading-nice-slam/poster_nice-slam_00.png"></p><h2 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h2><p>ç¥ç»éšå¼è¡¨å¾æœ€è¿‘åœ¨å„ä¸ªé¢†åŸŸéƒ½æ˜¾ç¤ºå‡ºäº†ä»¤äººé¼“èˆçš„ç»“æœï¼ŒåŒ…æ‹¬åœ¨åŒæ­¥å®šä½å’Œå»ºå›¾(SLAM)æ–¹é¢çš„è‰¯å¥½è¿›å±•ã€‚ç„¶è€Œï¼Œç°æœ‰çš„æ–¹æ³•ä¼šäº§ç”Ÿè¿‡åº¦å¹³æ»‘çš„åœºæ™¯é‡å»ºï¼Œå¹¶éš¾ä»¥æ‰©å±•åˆ°å¤§å‹åœºæ™¯ã€‚è¿™äº›é™åˆ¶ä¸»è¦æ˜¯ç”±äºå®ƒä»¬ç®€å•çš„å…¨è¿æ¥ç½‘ç»œæ¶æ„ï¼Œæ²¡æœ‰åœ¨è§‚æµ‹ä¸­åŒ…å«å±€éƒ¨ä¿¡æ¯ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæå‡ºäº†<strong>NICE-SLAM</strong>ï¼Œä¸€ç§é€šè¿‡å¼•å…¥<strong>å±‚æ¬¡å¼åœºæ™¯è¡¨ç¤ºï¼ˆhierarchical scene representationï¼‰</strong>æ¥æ•´åˆå¤šå±‚å±€éƒ¨ä¿¡æ¯çš„ç¨ å¯†SLAMç³»ç»Ÿã€‚ç”¨é¢„å…ˆè®­ç»ƒå¥½çš„å‡ ä½•å…ˆéªŒæ¥ä¼˜åŒ–è¿™ç§è¡¨ç¤ºï¼Œå¯ä»¥åœ¨å¤§å‹å®¤å†…åœºæ™¯ä¸Šè¿›è¡Œç¨ å¯†é‡å»ºã€‚ä¸æœ€è¿‘çš„ç¥ç»éšå¼SLAMç³»ç»Ÿç›¸æ¯”ï¼Œæˆ‘ä»¬çš„æ–¹æ³•æ›´å…·å¯æ‰©å±•æ€§ã€é«˜æ•ˆå’Œé²æ£’æ€§ã€‚åœ¨5ä¸ªå…·æœ‰æŒ‘æˆ˜æ€§çš„æ•°æ®é›†ä¸Šçš„å®éªŒè¡¨æ˜ï¼ŒNICE-SLAMåœ¨å»ºå›¾å’Œè·Ÿè¸ªè´¨é‡æ–¹é¢éƒ½å…·æœ‰ç«äº‰æ€§çš„ç»“æœã€‚</p><h2 id="1-å¼•è¨€"><a href="#1-å¼•è¨€" class="headerlink" title="1. å¼•è¨€"></a>1. å¼•è¨€</h2><p>ç¨ å¯†è§†è§‰SLAMæ˜¯3Dè®¡ç®—æœºè§†è§‰çš„ä¸€ä¸ªåŸºç¡€é—®é¢˜ï¼Œåœ¨è‡ªåŠ¨é©¾é©¶ã€å®¤å†…æœºå™¨äººã€æ··åˆç°å®ç­‰é¢†åŸŸæœ‰ç€å¹¿æ³›çš„åº”ç”¨ã€‚ä¸ºäº†ä½¿SLAMç³»ç»Ÿåœ¨å®é™…åº”ç”¨ç¨‹åºä¸­çœŸæ­£æœ‰ç”¨ï¼Œä»¥ä¸‹å±æ€§æ˜¯å¿…ä¸å¯å°‘çš„ã€‚<strong>é¦–å…ˆ</strong>ï¼Œæˆ‘ä»¬å¸Œæœ›SLAMç³»ç»Ÿèƒ½å¤Ÿæ˜¯å®æ—¶çš„ã€‚<strong>æ¥ä¸‹æ¥</strong>ï¼Œè¯¥ç³»ç»Ÿåº”è¯¥æœ‰èƒ½åŠ›å¯¹æ²¡æœ‰è§‚æµ‹çš„åŒºåŸŸåšå‡ºåˆç†çš„é¢„æµ‹ã€‚<strong>æ­¤å¤–</strong>ï¼Œè¯¥ç³»ç»Ÿåº”è¯¥èƒ½å¤Ÿæ‰©å±•åˆ°å¤§å‹åœºæ™¯ã€‚<strong>æœ€å</strong>ï¼Œå¯¹æœ‰å™ªå£°æˆ–è§‚æµ‹ç¼ºå¤±çš„æƒ…å†µå…·æœ‰é²æ£’æ€§æ˜¯è‡³å…³é‡è¦çš„ã€‚</p><p>åœ¨å®æ—¶ç¨ å¯†è§†è§‰SLAMç³»ç»Ÿçš„èŒƒå›´å†…ï¼Œè¿‘å‡ å¹´RGB-Dç›¸æœºå·²ç»å¼•å…¥äº†è®¸å¤šæ–¹æ³•ã€‚ä¼ ç»Ÿçš„ç¨ å¯†è§†è§‰SLAMç³»ç»Ÿæ»¡è¶³å®æ—¶éœ€æ±‚ï¼Œå¯ä»¥ç”¨äºå¤§è§„æ¨¡åœºæ™¯ï¼Œä½†ä»–ä»¬<strong>æ— æ³•å¯¹æœªè§‚æµ‹åˆ°çš„åŒºåŸŸåšå‡ºåˆç†çš„å‡ ä½•ä¼°è®¡</strong>ã€‚å¦ä¸€æ–¹é¢ï¼ŒåŸºäºå­¦ä¹ çš„SLAMæ–¹æ³•è·å¾—ä¸€å®šæ°´å¹³çš„é¢„æµ‹èƒ½åŠ›ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸åœ¨ç‰¹å®šä»»åŠ¡çš„æ•°æ®é›†ä¸Šè¿›è¡Œè®­ç»ƒã€‚æ­¤å¤–ï¼Œ<strong>åŸºäºå­¦ä¹ çš„æ–¹æ³•å¾€å¾€èƒ½æ›´å¥½åœ°å¤„ç†å™ªå£°å’Œå¼‚å¸¸å€¼</strong>ã€‚ç„¶è€Œï¼Œè¿™äº›æ–¹æ³•é€šå¸¸åªåœ¨å…·æœ‰å¤šä¸ªå¯¹è±¡çš„å°åœºæ™¯ä¸­å·¥ä½œã€‚æœ€è¿‘ï¼ŒSucarç­‰äººåœ¨å®æ—¶ç¨ å¯†SLAMç³»ç»Ÿï¼ˆç§°ä¸º<strong>iMAP</strong>ï¼‰ä¸­åº”ç”¨äº†<strong>ç¥ç»éšå¼è¡¨ç¤ºï¼ˆneural implicit representationï¼‰</strong>ï¼Œä»–ä»¬å¯¹æˆ¿é—´å¤§å°çš„æ•°æ®é›†æ˜¾ç¤ºäº†è‰¯å¥½çš„è·Ÿè¸ªå’Œå»ºå›¾ç»“æœã€‚ç„¶è€Œï¼Œå½“æ‰©å±•åˆ°æ›´å¤§çš„åœºæ™¯æ—¶ï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ªç”±å¤šä¸ªæˆ¿é—´ç»„æˆçš„å…¬å¯“ï¼Œåœ¨ç¨ å¯†é‡å»ºå’Œç›¸æœºè·Ÿè¸ªç²¾åº¦æ–¹é¢éƒ½å¯ä»¥è§‚å¯Ÿåˆ°æ˜¾è‘—çš„æ€§èƒ½ä¸‹é™ã€‚</p><p>iMAPçš„å…³é”®é™åˆ¶å› ç´ æºäºå®ƒä½¿ç”¨äº†ä¸€ä¸ªå•ä¸€çš„å¤šå±‚æ„ŸçŸ¥å™¨(MLP)æ¥è¡¨ç¤ºæ•´ä¸ªåœºæ™¯ï¼Œå®ƒåªèƒ½éšç€æ¯ä¸€ä¸ªæ–°çš„ã€æ½œåœ¨çš„éƒ¨åˆ†åœºæ™¯è€Œè¿›è¡Œå…¨å±€æ›´æ–°RGB-Dè§‚æµ‹ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œæœ€è¿‘çš„å·¥ä½œè¯æ˜ï¼Œå»ºç«‹åŸºäºå¤šçº§ç½‘æ ¼ç‰¹å¾å¯ä»¥å¸®åŠ©ä¿å­˜å‡ ä½•ç»†èŠ‚å’Œé‡å»ºå¤æ‚çš„åœºæ™¯ï¼Œä½†è¿™äº›éƒ½æ˜¯æ²¡æœ‰å®æ—¶åŠŸèƒ½çš„ç¦»çº¿æ–¹æ³•ã€‚</p><p>åœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬è¯•å›¾ç»“åˆ<strong>åˆ†å±‚åœºæ™¯è¡¨å¾ï¼ˆhierarchical scene representationï¼‰</strong>å’Œ<strong>ç¥ç»éšå¼è¡¨å¾ï¼ˆneural implicit representationï¼‰</strong>çš„ä¼˜åŠ¿ï¼Œä»¥å®Œæˆç¨ å¯†RGB-D SLAMçš„ä»»åŠ¡ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¼•å…¥äº†NICE-SLAMï¼Œè¿™æ˜¯ä¸€ç§ç¨ å¯†çš„RGB-D SLAMç³»ç»Ÿï¼Œå¯ä»¥åº”ç”¨äºå¤§è§„æ¨¡åœºæ™¯ï¼ŒåŒæ—¶ä¿æŒé¢„æµ‹èƒ½åŠ›ã€‚æˆ‘ä»¬çš„å…³é”®æ€æƒ³æ˜¯<strong>ç”¨å±‚æ¬¡ç‰¹å¾ç½‘æ ¼æ¥è¡¨ç¤ºåœºæ™¯çš„å‡ ä½•å½¢çŠ¶å’Œå¤–è§‚</strong>ï¼Œå¹¶ç»“åˆåœ¨ä¸åŒç©ºé—´åˆ†è¾¨ç‡ä¸‹é¢„è®­ç»ƒçš„ç¥ç»éšå¼è§£ç å™¨çš„<strong>å½’çº³åå·®ï¼ˆinductive biasesï¼‰</strong>ã€‚é€šè¿‡ä»å ç”¨ç‡å’Œå½©è‰²è§£ç å™¨è¾“å‡ºä¸­å¾—åˆ°çš„æ¸²æŸ“åçš„æ·±åº¦å’Œå½©è‰²å›¾åƒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æœ€å°åŒ–<strong>é‡æ¸²æŸ“æŸå¤±ï¼ˆre-rendering lossesï¼‰</strong>ï¼Œåªåœ¨å¯è§†èŒƒå›´å†…ä¼˜åŒ–ç‰¹å¾ç½‘æ ¼ã€‚æˆ‘ä»¬å¯¹å„ç§å®¤å†…RGB-Dåºåˆ—è¿›è¡Œäº†å¹¿æ³›çš„è¯„ä¼°ï¼Œå¹¶è¯æ˜äº†æˆ‘ä»¬çš„æ–¹æ³•çš„å¯æ‰©å±•æ€§å’Œé¢„æµ‹èƒ½åŠ›ã€‚æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬åšå‡ºäº†ä»¥ä¸‹è´¡çŒ®ï¼š</p><ul><li>æˆ‘ä»¬æå‡ºäº†<strong>NICE-SLAM</strong>ï¼Œä¸€ä¸ªç¨ å¯†çš„RGB-D SLAMç³»ç»Ÿï¼Œå¯¹äºå„ç§å…·æœ‰æŒ‘æˆ˜æ€§çš„åœºæ™¯å…·æœ‰å®æ—¶èƒ½åŠ›ã€å¯æ‰©å±•æ€§ã€å¯é¢„æµ‹æ€§ä»¥åŠé²æ£’æ€§ã€‚</li><li>NICE-SLAMçš„æ ¸å¿ƒæ˜¯ä¸€ä¸ª<strong>å±‚æ¬¡åŒ–çš„ã€åŸºäºç½‘æ ¼çš„ç¥ç»éšå¼ç¼–ç </strong>ã€‚ä¸å…¨å±€ç¥ç»åœºæ™¯ç¼–ç ç›¸æ¯”ï¼Œè¿™ç§è¡¨ç¤º<strong>å…è®¸å±€éƒ¨æ›´æ–°</strong>ï¼Œè¿™æ˜¯é’ˆå¯¹å¤§è§„æ¨¡æ–¹æ³•çš„å…ˆå†³æ¡ä»¶ã€‚</li><li>æˆ‘ä»¬å¯¹å„ç§æ•°æ®é›†è¿›è¡Œäº†å¹¿æ³›çš„è¯„ä¼°ï¼Œä»è€Œè¯æ˜äº†åœ¨å»ºå›¾å’Œè·Ÿè¸ªæ–¹é¢çš„ç«äº‰æ€§èƒ½ã€‚</li></ul><h2 id="2-ç›¸å…³å·¥ä½œ"><a href="#2-ç›¸å…³å·¥ä½œ" class="headerlink" title="2. ç›¸å…³å·¥ä½œ"></a>2. ç›¸å…³å·¥ä½œ</h2><p><strong>ç¨ å¯†è§†è§‰SLAM</strong>ã€‚å¤§å¤šæ•°ç°ä»£çš„è§†è§‰SLAMæ–¹æ³•éƒ½éµå¾ªäº†Kleinç­‰äººçš„å¼€åˆ›æ€§å·¥ä½œä¸­å¼•å…¥çš„æ•´ä½“æ¶æ„ï¼Œå°†ä»»åŠ¡åˆ†è§£ä¸ºå»ºå›¾å’Œè·Ÿè¸ªã€‚åœ°å›¾è¡¨ç¤ºé€šå¸¸å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š<strong>ä»¥è§†å›¾ä¸ºä¸­å¿ƒï¼ˆview-centricï¼‰</strong>å’Œ<strong>ä»¥ä¸–ç•Œä¸ºä¸­å¿ƒï¼ˆworld-centricï¼‰</strong>ã€‚ç¬¬ä¸€ä¸ªæ˜¯<strong>å°†ä¸‰ç»´å‡ ä½•å›¾å½¢é”šå®šåˆ°ç‰¹å®šçš„å…³é”®å¸§ä¸Š</strong>ï¼Œé€šå¸¸åœ¨å¯†é›†çš„è®¾ç½®ä¸­è¡¨ç¤ºä¸ºæ·±åº¦å›¾ã€‚è¿™ç±»äº§å“æ—©æœŸçš„ä¾‹å­ä¹‹ä¸€æ˜¯DTAMã€‚ç”±äºå…¶ç®€å•æ€§ï¼ŒDTAMå·²è¢«å¹¿æ³›åº”ç”¨äºæœ€è¿‘è®¸å¤šåŸºäºå­¦ä¹ çš„SLAMç³»ç»Ÿã€‚ä¾‹å¦‚ï¼ŒDeepV2Dåœ¨å›å½’æ·±åº¦å’Œå§¿æ€ä¼°è®¡ä¹‹é—´äº¤æ›¿ï¼Œä½†ä½¿ç”¨äº†æµ‹è¯•æ—¶é—´ä¼˜åŒ–ã€‚BA-Netå’ŒDeepFactoré€šè¿‡ä½¿ç”¨ä¸€ç»„åŸºç¡€æ·±åº¦å›¾ç®€åŒ–äº†ä¼˜åŒ–é—®é¢˜ã€‚è¿˜æœ‰ä¸€äº›æ–¹æ³•ï¼Œå¦‚CodeSLAMã€Sceneå’ŒNodeSLAMï¼Œå®ƒä»¬å¯ä»¥ä¼˜åŒ–ä¸€ä¸ªå¯è§£ç æˆå…³é”®å¸§æˆ–å¯¹è±¡æ·±åº¦å›¾çš„æ½œåœ¨è¡¨ç¤ºã€‚Droid-SLAMä½¿ç”¨å›å½’å…‰æµæ¥å®šä¹‰å‡ ä½•æ®‹å·®è¿›è¡Œç»†åŒ–ã€‚TANDEMç»“åˆäº†å¤šè§†å›¾ç«‹ä½“å‡ ä½•å’ŒDSOçš„å®æ—¶ç¨ å¯†SLAMç³»ç»Ÿã€‚å¦ä¸€æ–¹é¢ï¼Œä»¥ä¸–ç•Œä¸ºä¸­å¿ƒçš„åœ°å›¾è¡¨ç¤ºå°†ä¸‰ç»´å‡ ä½•å›¾å½¢å›ºå®šåœ¨ç»Ÿä¸€çš„ä¸–ç•Œåæ ‡ä¸­ï¼Œå¯ä»¥è¿›ä¸€æ­¥åˆ’åˆ†ä¸ºè¡¨é¢ï¼ˆsurfelsï¼‰å’Œä½“ç´ ç½‘æ ¼ï¼ˆvoxel gridsï¼‰ï¼Œé€šå¸¸å­˜å‚¨å ç”¨æ¦‚ç‡æˆ–TSDFå€¼ã€‚ä½“ç´ ç½‘æ ¼å·²å¹¿æ³›åº”ç”¨äºRGB-D SLAMï¼Œä¾‹å¦‚Kinect-Fusionã€‚åœ¨æˆ‘ä»¬æå‡ºçš„ç®¡é“ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿ<strong>é‡‡ç”¨äº†ä½“ç´ ç½‘æ ¼è¡¨ç¤º</strong>ã€‚ä¸ä»¥å‰çš„SLAMæ–¹æ³•ç›¸æ¯”ï¼Œæˆ‘ä»¬å­˜å‚¨å‡ ä½•çš„éšå¼æ½œåœ¨ç¼–ç ï¼Œå¹¶åœ¨å»ºå›¾è¿‡ç¨‹ä¸­ç›´æ¥ä¼˜åŒ–å®ƒä»¬ã€‚è¿™ç§æ›´ä¸°å¯Œçš„è¡¨ç¤ºæ–¹å¼å…è®¸æˆ‘ä»¬åœ¨è¾ƒä½çš„ç½‘æ ¼åˆ†è¾¨ç‡ä¸‹å®ç°æ›´ç²¾ç¡®çš„å‡ ä½•å›¾å½¢ã€‚</p><p><strong>ç¥ç»éšå¼è¡¨ç¤º</strong>ã€‚æœ€è¿‘ï¼Œç¥ç»éšå¼è¡¨ç¤ºåœ¨å¯¹è±¡å‡ ä½•è¡¨ç¤ºã€åœºæ™¯è¡¥å…¨ã€æ–°è§†å›¾åˆæˆè¿˜æœ‰ç”Ÿæˆæ¨¡å‹æ–¹é¢æ˜¾ç¤ºå‡ºäº†å¾ˆå¥½çš„ç»“æœã€‚æœ€è¿‘çš„å‡ ç¯‡è®ºæ–‡è¯•å›¾ç”¨RGB-(D)è¾“å…¥æ¥é¢„æµ‹åœºæ™¯çº§çš„å‡ ä½•å½¢çŠ¶ï¼Œä½†å®ƒä»¬éƒ½å‡è®¾äº†ç»™å®šçš„ç›¸æœºå§¿æ€ã€‚å¦ä¸€ç»„å·¥ä½œè§£å†³äº†ç›¸æœºå§¿æ€ä¼˜åŒ–çš„é—®é¢˜ï¼Œä½†å®ƒä»¬éœ€è¦ä¸€ä¸ªç›¸å½“é•¿çš„ä¼˜åŒ–è¿‡ç¨‹ï¼Œè¿™å¹¶<strong>ä¸é€‚åˆå®æ—¶åº”ç”¨</strong>ã€‚ä¸æˆ‘ä»¬çš„æ–¹æ³•æœ€ç›¸å…³çš„å·¥ä½œæ˜¯<strong>iMAP</strong>ã€‚ç»™å®šä¸€ä¸ªRGB-Dåºåˆ—ï¼Œä»–ä»¬å¼•å…¥äº†ä¸€ä¸ªå®æ—¶ç¨ å¯†SLAMç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿä½¿ç”¨ä¸€ä¸ªå•ä¸€çš„å¤šå±‚æ„ŸçŸ¥å™¨(MLP)æ¥ç´§å‡‘åœ°è¡¨ç¤ºå®Œæ•´çš„åœºæ™¯ã€‚ç„¶è€Œï¼Œç”±äº<strong>å•ä¸ªMLPå¤šå±‚æ„ŸçŸ¥æœºæ¨¡å‹å®¹é‡æœ‰é™ï¼ŒiMAPä¸èƒ½äº§ç”Ÿè¯¦ç»†çš„åœºæ™¯å‡ ä½•å½¢çŠ¶å’Œç²¾ç¡®çš„æ‘„åƒæœºè·Ÿè¸ªï¼Œç‰¹åˆ«æ˜¯å¯¹äºè¾ƒå¤§çš„åœºæ™¯</strong>ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç±»ä¼¼äºiMAPçš„å¯æ‰©å±•çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒç»“åˆäº†å¯å­¦ä¹ çš„æ½œåœ¨åµŒå…¥å’Œä¸€ä¸ªé¢„å…ˆè®­ç»ƒçš„è¿ç»­éšå¼è§£ç å™¨ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬çš„æ–¹æ³•å¯ä»¥é‡å»ºå¤æ‚çš„å‡ ä½•å½¢çŠ¶å’Œä¸ºæ›´å¤§çš„å®¤å†…åœºæ™¯é¢„æµ‹è¯¦ç»†çš„çº¹ç†ï¼ŒåŒæ—¶ä¿æŒæ›´å°‘çš„è®¡ç®—å’Œæ›´å¿«çš„æ”¶æ•›ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæœ‰çš„å·¥ä½œè¿˜å°†ä¼ ç»Ÿçš„ç½‘æ ¼ç»“æ„ä¸å­¦ä¹ åˆ°çš„ç‰¹å¾è¡¨ç¤ºç»“åˆèµ·æ¥ï¼Œä»¥å®ç°å¯æ‰©å±•æ€§ï¼Œä½†å®ƒä»¬éƒ½ä¸æ˜¯å®æ—¶çš„ã€‚æ­¤å¤–ï¼ŒDI-Fusionä¹Ÿä¼˜åŒ–äº†ç»™å®šRGB-Dåºåˆ—çš„ç‰¹å¾ç½‘æ ¼ï¼Œä½†å®ƒä»¬çš„é‡å»ºé€šå¸¸åŒ…å«å­”æ´ï¼Œå®ƒä»¬çš„ç›¸æœºè·Ÿè¸ªå¯¹çº¯è¡¨é¢æ¸²æŸ“æŸå¤±æ²¡æœ‰é²æ£’æ€§ã€‚</p><h2 id="3-æ–¹æ³•"><a href="#3-æ–¹æ³•" class="headerlink" title="3. æ–¹æ³•"></a>3. æ–¹æ³•</h2><p>æˆ‘ä»¬åœ¨å›¾2ä¸­æ¦‚è¿°äº†æˆ‘ä»¬çš„æ–¹æ³•ã€‚æˆ‘ä»¬ä½¿ç”¨å››ä¸ªç‰¹å¾ç½‘æ ¼åŠå…¶ç›¸åº”çš„è§£ç å™¨æ¥è¡¨ç¤ºåœºæ™¯å‡ ä½•ç»“æ„å’Œå¤–è§‚ï¼ˆç¬¬3.1èŠ‚ï¼‰ã€‚æˆ‘ä»¬ä½¿ç”¨ä¼°è®¡çš„cam-eraæ ¡å‡†æ¥è·Ÿè¸ªæ¯ä¸ªåƒç´ çš„è§‚å¯Ÿå…‰çº¿ã€‚é€šè¿‡æ²¿è§‚å¯Ÿå…‰çº¿é‡‡æ ·ç‚¹å¹¶æŸ¥è¯¢ç½‘ç»œï¼Œæˆ‘ä»¬å¯ä»¥æ¸²æŸ“è¯¥å…‰çº¿çš„æ·±åº¦å’Œé¢œè‰²å€¼ï¼ˆç¬¬3.2èŠ‚ï¼‰ã€‚é€šè¿‡æœ€å°åŒ–æ·±åº¦å’Œé¢œè‰²çš„é‡æ–°æ¸²æŸ“æŸå¤±ï¼Œæˆ‘ä»¬èƒ½å¤Ÿä»¥äº¤æ›¿æ–¹å¼ï¼ˆç¬¬3.3èŠ‚ï¼‰ä¼˜åŒ–é€‰å®šå…³é”®å¸§ï¼ˆç¬¬3-4èŠ‚ï¼‰çš„ç›¸æœºå§¿æ€å’Œåœºæ™¯å‡ ä½•ä½“ã€‚</p><p><img src="/images/paper-reading-nice-slam/image-20220830095757113.png" alt="å›¾2. ç³»ç»Ÿæ¦‚è¿°ã€‚æ–¹æ³•ä»¥RGB-Då›¾åƒæµä½œä¸ºè¾“å…¥ï¼Œå¹¶è¾“å‡ºç›¸æœºå§¿æ€å’Œå­¦ä¹ åˆ°çš„åˆ†å±‚ç‰¹å¾ç½‘æ ¼å½¢å¼çš„åœºæ™¯è¡¨ç¤ºã€‚ä»å³åˆ°å·¦çš„pipelineå¯è§£é‡Šä¸ºä¸€ä¸ªç”Ÿæˆæ¨¡å‹ï¼Œå®ƒä»ç»™å®šçš„åœºæ™¯è¡¨ç¤ºå’Œç›¸æœºå§¿æ€ä¸­å‘ˆç°æ·±åº¦å’Œå½©è‰²å›¾åƒã€‚åœ¨æµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡é€šè¿‡å¯å¾®åˆ†æ¸²æŸ“å™¨ï¼ˆä»å·¦åˆ°å³ï¼‰åå‘ä¼ æ’­å›¾åƒå’Œæ·±åº¦é‡å»ºæŸå¤±ï¼Œé€šè¿‡æ±‚è§£é€†é—®é¢˜æ¥ä¼°è®¡åœºæ™¯è¡¨ç¤ºå’Œç›¸æœºå§¿æ€ã€‚è¿™ä¸¤ä¸ªå®ä½“éƒ½åœ¨äº¤æ›¿ä¼˜åŒ–ä¸­è¿›è¡Œä¼°è®¡ï¼šæ˜ å°„ï¼šåå‘ä¼ æ’­ä»…æ›´æ–°åˆ†å±‚åœºæ™¯è¡¨ç¤ºï¼›è·Ÿè¸ªï¼šåå‘ä¼ æ’­ä»…æ›´æ–°ç›¸æœºå§¿åŠ¿ã€‚ä¸ºäº†æ›´å¥½çš„å¯è¯»æ€§ï¼Œæˆ‘ä»¬å°†å‡ ä½•ç¼–ç çš„ç²¾ç»†æ¯”ä¾‹ç½‘æ ¼ä¸å¤§å°ç›¸åŒçš„é¢œè‰²ç½‘æ ¼è¿æ¥èµ·æ¥ï¼Œå¹¶å°†å…¶æ˜¾ç¤ºä¸ºå…·æœ‰ä¸¤ä¸ªå±æ€§ï¼ˆçº¢è‰²å’Œæ©™è‰²ï¼‰çš„ä¸€ä¸ªç½‘æ ¼ã€‚"></p><h3 id="3-1-åˆ†å±‚åœºæ™¯è¡¨ç¤º-Hierarchical-Scene-Representation"><a href="#3-1-åˆ†å±‚åœºæ™¯è¡¨ç¤º-Hierarchical-Scene-Representation" class="headerlink" title="3.1 åˆ†å±‚åœºæ™¯è¡¨ç¤º Hierarchical Scene Representation"></a>3.1 åˆ†å±‚åœºæ™¯è¡¨ç¤º Hierarchical Scene Representation</h3><p>æˆ‘ä»¬ç°åœ¨ä»‹ç»äº†æˆ‘ä»¬çš„åˆ†å±‚åœºæ™¯è¡¨ç¤ºï¼Œå®ƒç»“åˆäº†å¤šå±‚æ¬¡ç½‘æ ¼ç‰¹å¾å’Œé¢„å…ˆè®­ç»ƒçš„è§£ç å™¨çš„å ç”¨é¢„æµ‹ã€‚è¯¥å‡ ä½•å›¾å½¢è¢«ç¼–ç åˆ°ä¸‰ä¸ªç‰¹å¾ç½‘æ ¼$\phi_\theta^l$ä¸­ï¼Œå¯¹åº”çš„MLPå¤šå±‚æ„ŸçŸ¥æœºè§£ç  $f^l $ï¼Œå…¶ä¸­$ l \in  \{ 0 , 1 , 2  \}  $æŒ‡çš„æ˜¯<strong>ç²—ç³™å±‚ï¼ˆcoarseï¼‰ã€ä¸­é—´å±‚ï¼ˆmid-levelï¼‰ä»¥åŠç²¾ç»†å±‚ï¼ˆfine-levelï¼‰</strong>åœºæ™¯ç»†èŠ‚ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰ä¸€ä¸ªå•ç‹¬çš„ç‰¹å¾ç½‘æ ¼$ \psi_\omega $ä»¥åŠè§£ç å™¨$ g_\omega $å»å»ºæ¨¡åœºæ™¯å¤–è§‚ã€‚è¿™é‡Œ$ \theta $å’Œ$ \omega $åˆ†åˆ«æŒ‡çš„æ˜¯å‡ ä½•å’Œé¢œè‰²çš„ä¼˜åŒ–å‚æ•°ï¼Œæ¯”å¦‚ï¼Œç½‘æ ¼ä¸­çš„ç‰¹å¾ä»¥åŠé¢œè‰²è§£ç å™¨ä¸­çš„æƒé‡ã€‚</p><p><strong>ä¸­é—´å±‚ï¼ˆMid-levelï¼‰å’Œç²¾ç»†å±‚( Fine-level )å‡ ä½•è¡¨ç¤º</strong>ã€‚è§‚æµ‹çš„åœºæ™¯å‡ ä½•æ˜¯è¡¨ç¤ºåœ¨ä¸­é—´å±‚å’Œç²¾ç»†å±‚ç‰¹å¾ç½‘æ ¼ä¸­çš„ã€‚åœ¨é‡å»ºè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä»¥ä¸€ç§ä»ç²—åˆ°ç»†çš„æ–¹å¼ä½¿ç”¨è¿™ä¸¤ä¸ªç½‘æ ¼ï¼Œé¦–å…ˆé€šè¿‡ä¼˜åŒ–ä¸­å±‚ç‰¹å¾ç½‘æ ¼æ¥é‡å»ºå‡ ä½•ç»“æ„ï¼Œç„¶åä½¿ç”¨ç²¾ç»†çº§è¿›è¡Œç»†åŒ–ã€‚åœ¨å®ç°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨è¾¹é•¿åˆ†åˆ«ä¸º32cmå’Œ16cmçš„ä½“ç´ ç½‘æ ¼ï¼Œé™¤äº†TUM RGBDï¼ˆ16cmå’Œ8cmï¼‰å¤–ã€‚å¯¹äºä¸­é—´å±‚å‡ ä½•è¡¨ç¤ºï¼Œè¿™äº›ç‰¹å¾è¢«ä½¿ç”¨ç›¸å…³çš„MLPå¤šå±‚æ„ŸçŸ¥æœºç›´æ¥è§£ç ä¸ºå ç”¨æ¦‚ç‡å€¼$ f^1 $ã€‚å¯¹äºä»»ä½•ç‚¹$ \mathrm p \in \mathbb{R}^3 $ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å ç”¨æ¦‚ç‡å€¼ä¸º</p><p><img src="/images/paper-reading-nice-slam/image-20220830103457027.png"></p><p>å…¶ä¸­$ \phi_\theta^1(\mathrm p) $è¡¨ç¤ºç‰¹å¾ç½‘æ ¼åœ¨ç‚¹$ \mathrm p $å¤„è¿›è¡Œ<strong>ä¸‰çº¿æ€§æ’å€¼ï¼ˆtri-linearly interpolatedï¼‰</strong>ã€‚ç›¸å¯¹ä½çš„åˆ†è¾¨ç‡å…è®¸æˆ‘ä»¬é«˜æ•ˆçš„ä¼˜åŒ–ç½‘æ ¼ç‰¹å¾å»æ‹Ÿåˆè§‚æµ‹å€¼ã€‚ä¸ºäº†åœ¨åœºæ™¯å‡ ä½•å›¾å½¢ä¸­æ•æ‰æ›´å°çš„é«˜é¢‘ç»†èŠ‚ï¼Œæˆ‘ä»¬ä»¥<strong>æ®‹å·®ï¼ˆresidualï¼‰</strong>çš„æ–¹å¼æ·»åŠ åˆ°<strong>ç²¾ç»†å±‚fine-level</strong>çš„ç‰¹å¾ä¸­ã€‚ç‰¹åˆ«åœ°ï¼Œç²¾ç»†å±‚ç‰¹å¾è§£ç å™¨å°†ç›¸åº”çš„ä¸­é—´å±‚ç‰¹å¾å’Œç²¾ç»†å±‚ç‰¹å¾ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¾“å‡ºä¸€ä¸ªæ¥è‡ªä¸­é—´å±‚å ç”¨çš„åç§»é‡ï¼Œæ¯”å¦‚ï¼š</p><p><img src="/images/paper-reading-nice-slam/image-20220830103443393.png"></p><p>å…¶ä¸­ï¼Œä¸€ä¸ªç‚¹çš„æœ€ç»ˆå ç”¨å€¼è¡¨ç¤ºå¦‚ä¸‹ï¼š</p><p><img src="/images/paper-reading-nice-slam/image-20220830103422480.png"></p><p>æ³¨æ„ï¼Œæˆ‘ä»¬å›ºå®šé¢„è®­ç»ƒçš„è§£ç å™¨$ f^1 $å’Œ$ f^2 $ï¼Œå¹¶é€šè¿‡å®Œæ•´çš„ä¼˜åŒ–è¿‡ç¨‹ä»…ä¼˜åŒ–ç‰¹å¾ç½‘æ ¼$ \phi_\theta^1 $å’Œã€‚æˆ‘ä»¬$ \phi_\theta^2 $è¯æ˜ï¼Œè¿™æœ‰åŠ©äºç¨³å®šä¼˜åŒ–å’Œå­¦ä¹ ä¸€è‡´çš„å‡ ä½•å›¾å½¢ã€‚</p><p><strong>ç²—ç³™å±‚ï¼ˆCoarse-levelï¼‰å‡ ä½•è¡¨ç¤ºã€‚</strong>ç²—ç³™å±‚ç‰¹å¾ç½‘æ ¼çš„ç›®çš„æ˜¯æ•æ‰åœºæ™¯çš„é«˜çº§å‡ ä½•å›¾å½¢ï¼ˆä¾‹å¦‚ï¼Œå¢™å£ã€åœ°æ¿ç­‰ï¼‰ï¼Œå¹¶ç‹¬ç«‹äºä¸­é—´å±‚å’Œç²¾ç»†å±‚è¿›è¡Œä¼˜åŒ–ã€‚ç²—ç³™ç½‘æ ¼çš„ç›®æ ‡æ˜¯èƒ½å¤Ÿé¢„æµ‹è§‚æµ‹åˆ°çš„å‡ ä½•å›¾å½¢ï¼ˆåœ¨ä¸­é—´å±‚/ç²¾ç»†å±‚ä¸­è¿›è¡Œç¼–ç ï¼‰ä¹‹å¤–çš„è¿‘ä¼¼å ç”¨å€¼ï¼Œå³ä½¿æ¯ä¸ªç²—ç³™ä½“ç´ åªæœ‰è¢«éƒ¨åˆ†è§‚æµ‹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªéå¸¸ä½çš„åˆ†è¾¨ç‡ï¼Œåœ¨å®ç°ä¸­å®ƒçš„è¾¹é•¿ä¸º2ç±³ã€‚ä¸ä¸­é—´å±‚ç½‘æ ¼ç±»ä¼¼ï¼Œæˆ‘ä»¬é€šè¿‡æ’å€¼ç‰¹å¾å¹¶é€šè¿‡å¤šå±‚æ„ŸçŸ¥æœºç›´æ¥è§£ç ä¸ºå ç”¨å€¼ï¼Œæ¯”å¦‚ï¼š</p><p><img src="/images/paper-reading-nice-slam/image-20220830103650838.png"></p><p>åœ¨è·Ÿè¸ªè¿‡ç¨‹ä¸­ï¼Œç²—ç³™å±‚å ç”¨å€¼ä»…ç”¨äºé¢„æµ‹ä»¥å‰æœªè§‚æµ‹åˆ°çš„åœºæ™¯éƒ¨åˆ†ã€‚è¿™ç§é¢„æµ‹çš„å‡ ä½•å½¢çŠ¶å…è®¸æˆ‘ä»¬è·Ÿè¸ªï¼Œå³ä½¿æ˜¯å½“å½“å‰å¤§éƒ¨åˆ†å›¾åƒä»¥å‰æ˜¯æ²¡çœ‹åˆ°è¿‡çš„ã€‚</p><p><strong>é¢„è®­ç»ƒç‰¹å¾ç¼–ç å™¨ï¼ˆPre-training Feature Decodersï¼‰</strong>ã€‚åœ¨æˆ‘ä»¬çš„æ¡†æ¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸‰ç§ä¸åŒçš„å›ºå®šçš„å¤šå±‚æ„ŸçŸ¥æœºæ¥å°†ç½‘æ ¼ç‰¹å¾è§£ç ä¸ºå ç”¨å€¼ã€‚ç²—ç³™å’Œä¸­é—´å±‚è§£ç å™¨ä½œä¸ºConvONetçš„ä¸€éƒ¨åˆ†è¿›è¡Œé¢„è®­ç»ƒï¼Œå®ƒç”±ä¸€ä¸ªCNNç¼–ç å™¨å’Œä¸€ä¸ªMLPè§£ç å™¨ç»„æˆã€‚æˆ‘ä»¬ä½¿ç”¨é¢„æµ‹å€¼å’ŒçœŸå€¼GTä¹‹é—´çš„<strong>äºŒè¿›åˆ¶äº¤å‰ç†µæŸå¤±ï¼ˆbinary cross-entropyï¼‰</strong>æ¥è®­ç»ƒç¼–ç å™¨/è§£ç å™¨ã€‚ç»è¿‡è®­ç»ƒåï¼Œæˆ‘ä»¬åªä½¿ç”¨å¤šå±‚æ„ŸçŸ¥æœºMLPè§£ç å™¨ï¼Œå› ä¸ºæˆ‘ä»¬å°†ç›´æ¥ä¼˜åŒ–ç‰¹å¾ï¼Œä»¥é€‚åº”æˆ‘ä»¬çš„é‡å»ºç®¡é“ä¸­çš„è§‚æµ‹å€¼ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œé¢„å…ˆè®­ç»ƒå¥½çš„è§£ç å™¨å¯ä»¥åœ¨è§£ç æˆ‘ä»¬ä¼˜åŒ–åçš„ç‰¹å¾æ—¶ï¼Œåˆ©ç”¨ä»è®­ç»ƒé›†å­¦ä¹ åˆ°çš„<strong>ç‰¹å®šäºåˆ†è¾¨ç‡ï¼ˆresolution-specificï¼‰</strong>çš„å…ˆéªŒã€‚</p><p>åŒæ ·çš„ç­–ç•¥ä¹Ÿç”¨äºé¢„è®­ç»ƒç²¾ç»†å±‚è§£ç å™¨ï¼Œé™¤äº†æˆ‘ä»¬åªæ˜¯åœ¨è¾“å…¥åˆ°è§£ç å™¨ä¹‹å‰å°†ä¸­é—´å±‚ç‰¹å¾$ \phi_\theta^1(\mathrm p) $ä¸ç²¾ç»†å±‚ç‰¹å¾$ \phi_\theta^2(\mathrm p) $è¿æ¥åœ¨ä¸€èµ·ã€‚</p><p><strong>é¢œè‰²è¡¨ç¤ºï¼ˆColor representationï¼‰</strong>ã€‚è™½ç„¶æˆ‘ä»¬ä¸»è¦å¯¹åœºæ™¯å‡ ä½•å½¢çŠ¶æ„Ÿå…´è¶£ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¯¹é¢œè‰²ä¿¡æ¯è¿›è¡Œç¼–ç ï¼Œå…è®¸æˆ‘ä»¬æ¸²æŸ“RGBå›¾åƒï¼Œä»è€Œä¸ºè·Ÿè¸ªæä¾›äº†é¢å¤–çš„ä¿¡å·ã€‚ä¸ºäº†åœ¨åœºæ™¯ä¸­ç¼–ç é¢œè‰²ä¿¡æ¯ï¼Œæˆ‘ä»¬åº”ç”¨äº†å…¶å®ƒç‰¹å¾ç½‘æ ¼$ \psi_\omega $å’Œè§£ç å™¨$ g_\omega $ï¼š</p><p><img src="/images/paper-reading-nice-slam/image-20220830104042286.png"></p><p>å…¶ä¸­ï¼Œ$ \omega $è¡¨ç¤ºåœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­çš„å¯å­¦ä¹ å‚æ•°ï¼Œä¸åŒäºå…·æœ‰è¾ƒå¼ºå…ˆéªŒä¿¡æ¯çš„å‡ ä½•ç»“æ„ï¼Œæˆ‘ä»¬å‘ç°ï¼Œè”åˆä¼˜åŒ–é¢œè‰²ç‰¹å¾$ \psi_\omega $å’Œè§£ç å™¨$ g_\omega $å¯ä»¥æé«˜è·Ÿè¸ªæ€§èƒ½ï¼Œå¦‚è¡¨5æ‰€ç¤ºã€‚è¯·æ³¨æ„ï¼Œä¸iMAPç±»ä¼¼ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´é—å¿˜é—®é¢˜ï¼Œè€Œä¸”é¢œè‰²åªåœ¨å±€éƒ¨ä¿æŒä¸€è‡´ã€‚å¦‚æœæˆ‘ä»¬æƒ³å¯è§†åŒ–æ•´ä¸ªåœºæ™¯çš„é¢œè‰²ï¼Œå®ƒå¯ä»¥è¿›è¡Œå…¨å±€ä¼˜åŒ–ä½œä¸ºåå¤„ç†æ­¥éª¤ã€‚</p><p><strong>ç½‘ç»œè®¾è®¡ï¼ˆNetwork Designï¼‰</strong>ã€‚å¯¹äºæ‰€æœ‰çš„MLPå¤šå±‚æ„ŸçŸ¥æœºè§£ç å™¨ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†32ä¸ªå’Œ5ä¸ªå…¨è¿æ¥å—çš„éšè—ç‰¹å¾ç»´åº¦ã€‚é™¤äº†ç²—ç³™å±‚çš„å‡ ä½•è¡¨ç¤ºå¤–ï¼Œä½œä¸ºMLPè§£ç å™¨çš„è¾“å…¥ä¹‹å‰ï¼Œæˆ‘ä»¬åœ¨ç‚¹$ \mathrm{p} $å¤„åº”ç”¨äº†ä¸€ä¸ªå¯å­¦ä¹ çš„é«˜æ–¯ä½ç½®ç¼–ç ã€‚æˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼Œè¿™å…è®¸å‘ç°å‡ ä½•å½¢çŠ¶å’Œå¤–è§‚çš„é«˜é¢‘ç»†èŠ‚ã€‚</p><h3 id="3-2-æ·±åº¦å’Œé¢œè‰²æ¸²æŸ“-Depth-and-Color-Rendering"><a href="#3-2-æ·±åº¦å’Œé¢œè‰²æ¸²æŸ“-Depth-and-Color-Rendering" class="headerlink" title="3.2 æ·±åº¦å’Œé¢œè‰²æ¸²æŸ“ Depth and Color Rendering"></a>3.2 æ·±åº¦å’Œé¢œè‰²æ¸²æŸ“ Depth and Color Rendering</h3><p>æœ€è¿‘å—ç¥ç»è¾å°„åœºNeRFä¸­ä½“ç§¯æ¸²æŸ“æˆåŠŸçš„å¯å‘ï¼Œæˆ‘ä»¬è¿˜å»ºè®®ä½¿ç”¨ä¸€ä¸ªå¯å¾®æ¸²æŸ“è¿‡ç¨‹ï¼Œè¯¥è¿‡ç¨‹é›†æˆäº†æ¥è‡ª3.1å°èŠ‚æˆ‘ä»¬çš„åœºæ™¯è¡¨ç¤ºä¸­é¢„æµ‹å ç”¨ç‡å’Œé¢œè‰²ã€‚</p><p>ç»™å®šç›¸æœºå†…å‚å’Œå½“å‰ç›¸æœºçš„ä½å§¿ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—ä¸€ä¸ªåƒç´ åæ ‡çš„è§†çº¿æœå‘ã€‚æˆ‘ä»¬é¦–å…ˆæ²¿ç€å°„çº¿ä¸Šçš„$ N_{strat} $ä¸ªç‚¹è¿›è¡Œåˆ†å±‚é‡‡æ ·ï¼Œå¹¶ä¸”åœ¨æ·±åº¦å€¼é™„è¿‘å‡åŒ€é‡‡æ ·$ N_{imp} $ä¸ªç‚¹ï¼Œæ¯æ¡å°„çº¿å…±é‡‡æ ·$  N=N_{strat}+N_{imp} $ä¸ªç‚¹ã€‚æ›´æ­£å¼ä¸€ç‚¹ï¼Œä»¤$  \mathrm{p}_i  =  \mathrm{o}  + d_i\mathrm{r}  ,  i   \in  \{ 1 , â€¦ , N \}  $è¡¨ç¤ºç»™å®šç›¸æœºåŸç‚¹$ \mathrm{o} $çš„å°„çº¿$ \mathrm{r} $ä¸Šçš„é‡‡æ ·ç‚¹ï¼Œ$ d_i $å¯¹åº”äºæ²¿è¯¥å°„çº¿ä¸Šç‚¹$ \mathrm p_i $çš„æ·±åº¦å€¼ã€‚</p><p>å¯¹äºæ¯ä¸ªç‚¹$ \mathrm p_i $ï¼Œé‡‡ç”¨å…¬å¼(4)ã€å…¬å¼ï¼ˆ3ï¼‰ã€å…¬å¼ï¼ˆ5ï¼‰ï¼Œæˆ‘ä»¬èƒ½åˆ†åˆ«è®¡ç®—å‡ºç²—ç³™å±‚çš„å ç”¨æ¦‚ç‡å€¼$ o_{\mathrm p_i}^0 $ï¼Œç²¾ç»†å±‚å ç”¨æ¦‚ç‡å€¼$ o_{\mathrm p_i} $ï¼Œä»¥åŠé¢œè‰²å€¼$ c_{\mathrm p_i} $ã€‚æˆ‘ä»¬åœ¨ç‚¹$\mathrm p_i$ä¸Šå»ºæ¨¡å°„çº¿çš„<strong>ç»ˆæ­¢æ¦‚ç‡ï¼ˆtermination probabilityï¼‰</strong>ï¼Œåœ¨ç²—ç³™å±‚ä¸Šï¼š$\omega_i^c = o_{\mathrm p_i}^0  \prod_{ j = 1 }^{ i - 1 } (1 - o_{\mathrm p_j}^0 ) $ï¼Œåœ¨ç²¾ç»†å±‚ä¸Šï¼š$\omega_i^f = o_{\mathrm p_i}  \prod_{j = 1}^{i - 1} (1 - o_{\mathrm p_j}) $ ã€‚</p><p>æœ€åï¼Œå¯¹äºæ¯æ¡å°„çº¿ï¼Œç²—ç³™å±‚å’Œç²¾ç»†å±‚çš„æ·±åº¦å’Œé¢œè‰²éƒ½å¯ä»¥æ¸²æŸ“ä¸ºï¼š</p><p><img src="/images/paper-reading-nice-slam/image-20220830105607305.png"></p><p>æ­¤å¤–ï¼Œæ²¿ç€å°„çº¿æˆ‘ä»¬ä¹Ÿè®¡ç®—<strong>æ·±åº¦æ–¹å·®ï¼ˆdepth variancesï¼‰</strong>ï¼š</p><p><img src="/images/paper-reading-nice-slam/image-20220830105621987.png"></p><h3 id="3-3-å»ºå›¾å’Œè·Ÿè¸ªMapping-and-Tracking"><a href="#3-3-å»ºå›¾å’Œè·Ÿè¸ªMapping-and-Tracking" class="headerlink" title="3.3 å»ºå›¾å’Œè·Ÿè¸ªMapping and Tracking"></a>3.3 å»ºå›¾å’Œè·Ÿè¸ªMapping and Tracking</h3><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è¯¦ç»†æä¾›æˆ‘ä»¬åˆ†å±‚åœºæ™¯è¡¨ç¤ºä¸­çš„åœºæ™¯å‡ ä½•$ \theta $å’Œå¤–è§‚$ \omega $å‚æ•°ï¼Œä»¥åŠç›¸æœºå§¿æ€çš„ä¼˜åŒ–ã€‚</p><p><strong>å»ºå›¾ï¼ˆMappingï¼‰</strong>ã€‚ä¸ºäº†ä¼˜åŒ–3.1å°èŠ‚ä¸­æåˆ°çš„åœºæ™¯è¡¨ç¤ºï¼Œæˆ‘ä»¬ä»å½“å‰å¸§å’Œæ‰€é€‰çš„å…³é”®å¸§ä¸­ç»Ÿä¸€é‡‡æ ·æ€»Mä¸ªåƒç´ ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä»¥ä¸€ç§åˆ†é˜¶æ®µçš„æ–¹å¼æ¥æ‰§è¡Œä¼˜åŒ–ä»¥æœ€å°åŒ–<strong>å‡ ä½•æŸå¤±ï¼ˆgeometric lossï¼‰å’Œå…‰åº¦æŸå¤±ï¼ˆphotometric lossï¼‰</strong>ã€‚</p><p><strong>å‡ ä½•æŸå¤±</strong>åªæ˜¯åœ¨ç²—ç³™å±‚å’Œç²¾ç»†å±‚ä¸Šè§‚æµ‹æ·±åº¦å’Œé¢„æµ‹æ·±åº¦ä¹‹é—´çš„$ L_1 $æŸå¤±ï¼š</p><p><img src="/images/paper-reading-nice-slam/image-20220830110038114.png"></p><p><strong>å…‰åº¦æŸå¤±</strong>æ˜¯$M$ä¸ªé‡‡æ ·åƒç´ ç‚¹ä¸Šæ¸²æŸ“é¢œè‰²å’Œè§‚æµ‹é¢œè‰²å€¼ä¹‹é—´çš„ä¸€ä¸ª$L_1$æŸå¤±ï¼š</p><p><img src="/images/paper-reading-nice-slam/image-20220830110106917.png"></p><p>åœ¨ç¬¬ä¸€é˜¶æ®µï¼Œæˆ‘ä»¬åªä½¿ç”¨å…¬å¼ï¼ˆ8ï¼‰ä¸­çš„å‡ ä½•æŸå¤±$ \mathcal L_g^f $æ¥ä¼˜åŒ–ä¸­é—´å±‚çš„ç‰¹å¾ç½‘æ ¼ $\phi_\theta^1$ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…±åŒä¼˜åŒ–äº†ä¸­é—´å±‚å’Œç²¾ç»†å±‚çš„ $\phi_\theta^1$ï¼Œ$\phi_\theta^2$ç‰¹å¾ï¼Œå…·æœ‰ç›¸åŒçš„ç²¾ç»†å±‚çš„æ·±åº¦æŸå¤±$ \mathcal L_g^f $ã€‚æœ€åï¼Œæˆ‘ä»¬è¿›è¡Œ<strong>å±€éƒ¨BAä¼˜åŒ–ï¼Œå…±åŒä¼˜åŒ–æ‰€æœ‰å±‚æ¬¡çš„ç‰¹å¾ç½‘æ ¼ã€é¢œè‰²è§£ç å™¨ä»¥åŠ$K$ä¸ªé€‰å®šå…³é”®å¸§çš„ç›¸æœºå¤–å‚</strong>$ {\mathrm R_i,\mathrm t_i} $ã€‚</p><p><img src="/images/paper-reading-nice-slam/image-20220830110419117.png"></p><p>å…¶ä¸­ï¼Œ$ \lambda_p$æ˜¯æŸå¤±æƒé‡å› å­ã€‚</p><p>è¿™ç§å¤šé˜¶æ®µä¼˜åŒ–æ–¹æ¡ˆå¯ä»¥æ›´å¥½åœ°æ”¶æ•›ï¼Œå› ä¸ºæ›´é«˜åˆ†è¾¨ç‡çš„å¤–è§‚å’Œç²¾ç»†å±‚ç‰¹å¾å¯ä»¥ä¾èµ–äºæ¥è‡ªä¸­é—´å±‚ç‰¹å¾ç½‘æ ¼çš„å·²ç»ç»†åŒ–çš„å‡ ä½•å½¢çŠ¶ã€‚</p><p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨ä¸‰ä¸ªçº¿ç¨‹ä¸­å¹¶è¡ŒåŒ–ç³»ç»Ÿä»¥åŠ å¿«ä¼˜åŒ–è¿‡ç¨‹ï¼šä¸€ä¸ªçº¿ç¨‹ç”¨äºç²—ç³™å±‚å»ºå›¾ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹ç”¨äºä¸­é—´å±‚å’Œç²¾ç»†å±‚å‡ ä½•å’Œé¢œè‰²ä¼˜åŒ–ï¼Œç¬¬ä¸‰ä¸ªçº¿ç¨‹ç”¨äºç›¸æœºè·Ÿè¸ªã€‚</p><p><strong>ç›¸æœºè·Ÿè¸ªï¼ˆCamera Trackingï¼‰</strong>ã€‚é™¤äº†ä¼˜åŒ–åœºæ™¯è¡¨ç¤ºä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¹¶è¡Œè¿è¡Œç›¸æœºè·Ÿè¸ªæ¥ä¼˜åŒ–å½“å‰å¸§çš„ç›¸æœºå§¿æ€ï¼Œæ¯”å¦‚ï¼Œæ—‹è½¬çŸ©é˜µå’Œå¹³ç§»å‘é‡ã€‚æœ€åï¼Œæˆ‘ä»¬åœ¨å½“å‰å¸§ä¸­é‡‡æ ·$ M_t $ä¸ªåƒç´ å¹¶åœ¨å…¬å¼ï¼ˆ9ï¼‰ä¸­åº”ç”¨ç›¸åŒçš„å…‰åº¦æŸå¤±ï¼Œä½†ä½¿ç”¨äº†ä¿®æ”¹åçš„å‡ ä½•æŸå¤±ï¼š</p><p><img src="/images/paper-reading-nice-slam/image-20220830110515715.png"></p><p>ä¿®æ­£åçš„æŸå¤±å‡å°äº†é‡å»ºå‡ ä½•ä¸­çš„æŸäº›åŒºåŸŸï¼Œå¦‚ç‰©ä½“è¾¹ç¼˜ã€‚ç›¸æœºè·Ÿè¸ªæœ€ç»ˆè¢«è¡¨è¿°ä¸ºä»¥ä¸‹æœ€å°åŒ–é—®é¢˜ï¼š</p><p><img src="/images/paper-reading-nice-slam/image-20220830110533217.png"></p><p>ç²—ç³™å±‚çš„ç‰¹å¾ç½‘æ ¼èƒ½å¤Ÿå¯¹åœºæ™¯å‡ ä½•å›¾å½¢è¿›è¡ŒçŸ­ç¨‹é¢„æµ‹ã€‚å½“ç›¸æœºç§»åŠ¨åˆ°ä»¥å‰æœªè§‚å¯Ÿåˆ°çš„åŒºåŸŸæ—¶ï¼Œè¿™ç§æ¨ç®—å‡ºçš„å‡ ä½•å½¢çŠ¶ä¸ºè·Ÿè¸ªæä¾›äº†ä¸€ä¸ªæœ‰æ„ä¹‰çš„ä¿¡å·ã€‚ä½¿å…¶å¯¹çªç„¶å¸§ä¸¢å¤±æˆ–ç›¸æœºå¿«é€Ÿç›¸æœºç§»åŠ¨æ›´åŠ é²æ£’ã€‚æˆ‘ä»¬åœ¨è¡¥å……ææ–™ä¸­æä¾›äº†å®éªŒå†…å®¹ã€‚</p><p><strong>å¯¹åŠ¨æ€ç‰©ä½“çš„é²æ£’æ€§ï¼ˆRobustness to Dynamic Objectsï¼‰</strong>ã€‚ä¸ºäº†ä½¿ä¼˜åŒ–åœ¨è·Ÿè¸ªè¿‡ç¨‹ä¸­å¯¹åŠ¨æ€å¯¹è±¡æ›´åŠ é²æ£’ï¼Œæˆ‘ä»¬ä½¿ç”¨å¤§çš„æ·±åº¦/é¢œè‰²é‡æ¸²æŸ“æŸå¤±æ¥è¿‡æ»¤åƒç´ ã€‚æˆ‘ä»¬ä»ä¼˜åŒ–ä¸­åˆ é™¤é‚£äº›ï¼Œå…¬å¼ï¼ˆ12ï¼‰ä¸­æŸå¤±å¤§äºå½“å‰å¸§ä¸­æ‰€æœ‰åƒç´ çš„10å€æŸå¤±ä¸­å€¼çš„åƒç´ ã€‚å›¾6æ˜¾ç¤ºäº†ä¸€ä¸ªåŠ¨æ€å¯¹è±¡è¢«å¿½ç•¥ï¼Œå› ä¸ºå®ƒä¸åœ¨æ¸²æŸ“çš„RGBå’Œæ·±åº¦å›¾åƒä¸­ã€‚è¯·æ³¨æ„ï¼Œå¯¹äºè¿™ä¸ªä»»åŠ¡ï¼Œæˆ‘ä»¬åªåœ¨å»ºå›¾è¿‡ç¨‹ä¸­ä¼˜åŒ–åœºæ™¯è¡¨ç¤ºã€‚åœ¨åŠ¨æ€ç¯å¢ƒä¸‹è”åˆä¼˜åŒ–ç›¸æœºå‚æ•°å’Œåœºæ™¯è¡¨ç¤ºæ˜¯ä¸é‡è¦çš„ï¼Œæˆ‘ä»¬æŠŠå®ƒçœ‹ä½œæ˜¯ä¸€ä¸ªæœªæ¥æœ‰æ„æ€çš„å‘å±•æ–¹å‘ã€‚</p><h3 id="3-4-å…³é”®å¸§é€‰å–-Keyframe-Selection"><a href="#3-4-å…³é”®å¸§é€‰å–-Keyframe-Selection" class="headerlink" title="3.4 å…³é”®å¸§é€‰å– Keyframe Selection"></a>3.4 å…³é”®å¸§é€‰å– Keyframe Selection</h3><p>ä¸å…¶ä»–SLAMç³»ç»Ÿç±»ä¼¼ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ç»„é€‰å®šçš„å…³é”®å¸§ä¸æ–­ä¼˜åŒ–æˆ‘ä»¬çš„åˆ†å±‚åœºæ™¯è¡¨ç¤ºã€‚æˆ‘ä»¬æŒ‰ç…§ä¸iMAPç›¸åŒçš„ç­–ç•¥ï¼Œ<strong>ç»´æŠ¤ä¸€ä¸ªå…¨å±€å…³é”®å¸§åˆ—è¡¨</strong>ï¼Œå…¶ä¸­æˆ‘ä»¬<strong>æ ¹æ®ä¿¡æ¯å¢ç›Šé€æ­¥æ·»åŠ æ–°çš„å…³é”®å¸§</strong>ã€‚ç„¶è€Œï¼Œä¸iMAPç›¸æ¯”ï¼Œæˆ‘ä»¬åªåŒ…å«åœ¨ä¼˜åŒ–åœºæ™¯å‡ ä½•å›¾å½¢æ—¶ï¼Œä¸å½“å‰å¸§æœ‰è§†è§‰é‡å çš„å…³é”®å¸§ã€‚è¿™æ˜¯å¯èƒ½çš„ï¼Œå› ä¸ºæˆ‘ä»¬èƒ½å¤Ÿå¯¹åŸºäºç½‘æ ¼çš„è¡¨ç¤ºè¿›è¡Œå±€éƒ¨æ›´æ–°ï¼Œè€Œä¸”æˆ‘ä»¬ä¸ä¼šé­å—åŒæ ·çš„é—å¿˜é—®é¢˜ã€‚è¿™ç§å…³é”®å¸§é€‰æ‹©ç­–ç•¥ä¸ä»…ç¡®ä¿äº†å½“å‰è§†å›¾ä¹‹å¤–çš„å‡ ä½•å›¾å½¢ä¿æŒé™æ€ï¼Œè€Œä¸”è¿˜å¯¼è‡´äº†ä¸€ä¸ªéå¸¸æœ‰æ•ˆçš„ä¼˜åŒ–é—®é¢˜ï¼Œå› ä¸ºæ¯æ¬¡æˆ‘ä»¬åªä¼˜åŒ–å¿…è¦çš„å‚æ•°ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆéšæœºé‡‡æ ·åƒç´ ï¼Œå¹¶ä½¿ç”¨ä¼˜åŒ–çš„ç›¸æœºå§¿æ€åå‘æŠ•å½±å¯¹åº”çš„æ·±åº¦ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†ç‚¹äº‘æŠ•å½±åˆ°å…¨å±€å…³é”®å¸§åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…³é”®å¸§ä¸Šã€‚ä»é‚£äº›æœ‰æŠ•å½±ç‚¹çš„å…³é”®å¸§ä¸­ï¼Œæˆ‘ä»¬éšæœºé€‰æ‹©äº†$ Kâˆ’2 $å¸§ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜åœ¨åœºæ™¯è¡¨ç¤ºä¼˜åŒ–ä¸­åŒ…æ‹¬äº†æœ€è¿‘çš„å…³é”®å¸§å’Œå½“å‰å¸§ï¼Œå½¢æˆæ€»å…±$ K $ä¸ªæ´»åŠ¨å¸§ã€‚å…³äºå…³é”®å¸§é€‰æ‹©ç­–ç•¥çš„æ¶ˆèç ”ç©¶ï¼ˆAblation Studyï¼‰ï¼Œè¯·å‚é˜…ç¬¬4.4èŠ‚ã€‚</p><h2 id="4-å®éªŒ"><a href="#4-å®éªŒ" class="headerlink" title="4. å®éªŒ"></a>4. å®éªŒ</h2><p>æˆ‘ä»¬åœ¨å¤šç§æ•°æ®é›†ä¸Šè¯„ä¼°æˆ‘ä»¬çš„SLAMæ¡†æ¶ï¼ŒåŒ…æ‹¬çœŸå®çš„å’Œåˆæˆçš„ï¼Œä¸åŒçš„å¤§å°å’Œå¤æ‚æ€§ã€‚æˆ‘ä»¬è¿˜è¿›è¡Œäº†ä¸€é¡¹å…¨é¢çš„æ¶ˆèç ”ç©¶æ¥æ”¯æŒæˆ‘ä»¬çš„è®¾è®¡é€‰æ‹©ã€‚</p><h3 id="4-1-å®éªŒè®¾ç½®"><a href="#4-1-å®éªŒè®¾ç½®" class="headerlink" title="4.1 å®éªŒè®¾ç½®"></a>4.1 å®éªŒè®¾ç½®</h3><p><strong>æ•°æ®é›†Datasets</strong>ã€‚æˆ‘ä»¬è€ƒè™‘äº†5ä¸ªé€šç”¨æ•°æ®é›†ï¼šReplicaã€ScanNetã€TUM RGB-Dæ•°æ®é›†ã€Co-Fusionæ•°æ®é›†ï¼Œä»¥åŠä¸€ä¸ªæœ‰å¤šä¸ªæˆ¿é—´çš„è‡ªå·±è·å–çš„å¤§å…¬å¯“ã€‚æˆ‘ä»¬éµå¾ªTUM RGB-Dæ•°æ®é›†ç›¸åŒçš„é¢„å¤„ç†æ­¥éª¤ã€‚</p><p><strong>åŸºå‡†Baselines</strong>ã€‚æˆ‘ä»¬å°†TSDF-Fusionä¸æˆ‘ä»¬çš„ç›¸æœºä½å§¿è¿›è¡Œäº†æ¯”è¾ƒï¼Œä½“ç´ ç½‘æ ¼åˆ†è¾¨ç‡ä¸º 2563 ï¼ŒDI-Fusionä½¿ç”¨å…¶å®˜æ–¹å®ç°ï¼Œä»¥åŠæˆ‘ä»¬é’ˆå¯¹iMAPçš„é‡æ–°å®ç°ï¼šiMAPâˆ—ã€‚æˆ‘ä»¬çš„é‡æ–°å®ç°åœ¨ä¸¤ä¸ªåœºæ™¯é‡å»ºå’Œç›¸æœºè·Ÿè¸ªä¸­å…·æœ‰ä¸åŸå§‹iMAPç›¸ä¼¼çš„æ€§èƒ½ã€‚</p><p><strong>åº¦é‡æŒ‡æ ‡Metrics</strong>ã€‚æˆ‘ä»¬åŒæ—¶ä½¿ç”¨äºŒç»´å’Œä¸‰ç»´çš„åº¦é‡å€¼æ¥è¯„ä¼°åœºæ™¯çš„å‡ ä½•å›¾å½¢ã€‚å¯¹äºäºŒç»´åº¦é‡ï¼Œæˆ‘ä»¬è¯„ä¼°äº†æ¥è‡ªé‡å»ºç½‘æ ¼å’ŒGTçœŸå€¼ç½‘æ ¼çš„1000ä¸ªéšæœºé‡‡æ ·çš„æ·±åº¦å›¾ä¸Šçš„L1æŸå¤±ã€‚ä¸ºäº†è¿›è¡Œå…¬å¹³çš„æ¯”è¾ƒï¼Œæˆ‘ä»¬åœ¨è®¡ç®—å¹³å‡L1æŸå¤±ä¹‹å‰ï¼Œå°†åŒè¾¹æ±‚è§£å™¨åº”ç”¨äºDI-Fusionå’ŒTSDF-Fusionæ¥å¡«å……æ·±åº¦å­”æ´ã€‚å¯¹äº3DæŒ‡æ ‡ï¼Œæˆ‘ä»¬éµå¾ªiMAPè®ºæ–‡çš„åšæ³•ï¼Œå¹¶è€ƒè™‘ç²¾åº¦Accuracy[cm]ã€å®ŒæˆCompletion[cm]å’Œå®Œæˆç‡[&lt;5cm%]ï¼Œé™¤äº†æˆ‘ä»¬åˆ é™¤äº†ä¸åœ¨ä»»ä½•ç›¸æœºçš„è§‚å¯Ÿéšœç¢å†…çš„ä¸å¯è§åŒºåŸŸã€‚å¯¹äºç›¸æœºè·Ÿè¸ªçš„è¯„ä¼°ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ATE RMSEã€‚å¦‚æœæ²¡æœ‰å¦å¤–æŒ‡å®šï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†æŠ¥å‘Š5æ¬¡è¿è¡Œçš„å¹³å‡ç»“æœã€‚</p><p><strong>å®ç°ç»†èŠ‚Implementation Details</strong>ã€‚æˆ‘ä»¬åœ¨ä¸€å°æ‹¥æœ‰3.80GHz Intel i7-10700K CPUä¸NVIDIA RTX 3090 GPUçš„å°å¼ç”µè„‘ä¸Šè¿è¡Œæˆ‘ä»¬çš„SLAMç³»ç»Ÿã€‚åœ¨æˆ‘ä»¬æ‰€æœ‰çš„å®éªŒä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å°„çº¿ $N_{strat}=32$ å’Œ $N_{imp}=16$ ä¸Šçš„é‡‡æ ·ç‚¹æ•°ï¼Œå…‰åº¦æŸå¤±åŠ æƒ$ \lambda_p=0.2 $å’Œ$ \lambda_{pt}=0.5 $ã€‚å¯¹äºå°è§„æ¨¡çš„åˆæˆæ•°æ®é›†ï¼ˆReplicaå’ŒCo-Fusionï¼‰ï¼Œæˆ‘ä»¬é€‰æ‹©äº†$ K=5 $ä¸ªå…³é”®å¸§å’Œåˆ†åˆ«é‡‡æ ·$ M=1000 $å’Œ$ M_t=200 $ä¸ªåƒç´ ã€‚å¯¹äºå¤§è§„æ¨¡çš„çœŸå®æ•°æ®é›†(ScanNetå’Œè‡ªæ•è·åœºæ™¯)ï¼Œæˆ‘ä»¬ä½¿ç”¨$ K=10 ï¼Œ M=5000 ï¼Œ M_t=1000 $ã€‚å¯¹äºå…·æœ‰æŒ‘æˆ˜æ€§çš„TUM RGB-Dæ•°æ®é›†ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†$K=10 ï¼Œ M=5000 ï¼Œ M_t=5000$ã€‚å¯¹äºæˆ‘ä»¬é‡æ–°å®ç°çš„iMAPâˆ—ï¼Œæˆ‘ä»¬éµå¾ªæ–‡çŒ®ä¸­æåˆ°çš„æ‰€æœ‰è¶…å‚æ•°ï¼Œé™¤äº†æˆ‘ä»¬å°†é‡‡æ ·åƒç´ çš„æ•°é‡è®¾ç½®ä¸º5000ï¼Œå› ä¸ºå®ƒåœ¨é‡å»ºå’Œè·Ÿè¸ªä¸­éƒ½æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚</p><h3 id="4-2-å»ºå›¾å’Œè·Ÿè¸ªçš„è¯„ä¼°-Evaluation-of-Mapping-and-Tracking"><a href="#4-2-å»ºå›¾å’Œè·Ÿè¸ªçš„è¯„ä¼°-Evaluation-of-Mapping-and-Tracking" class="headerlink" title="4.2 å»ºå›¾å’Œè·Ÿè¸ªçš„è¯„ä¼° Evaluation of Mapping and Tracking"></a>4.2 å»ºå›¾å’Œè·Ÿè¸ªçš„è¯„ä¼° Evaluation of Mapping and Tracking</h3><p><strong>Replicaæ•°æ®é›†ä¸Šçš„è¯„ä¼°</strong>ã€‚ä¸ºäº†è¯„ä¼°Replicaï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ç”±iMAPçš„ä½œè€…æä¾›çš„ç›¸åŒçš„æ¸²æŸ“RGB-Dåºåˆ—ã€‚é€šè¿‡åˆ†å±‚çš„åœºæ™¯è¡¨ç¤ºï¼Œæˆ‘ä»¬çš„æ–¹æ³•èƒ½å¤Ÿåœ¨æœ‰é™çš„è¿­ä»£ä¸­ç²¾ç¡®åœ°é‡å»ºå‡ ä½•å›¾å½¢ã€‚å¦‚<strong>è¡¨1</strong>æ‰€ç¤ºï¼ŒNICE-SLAMåœ¨å‡ ä¹æ‰€æœ‰æŒ‡æ ‡ä¸Šéƒ½æ˜¾è‘—ä¼˜äºbaselineåŸºå‡†æ–¹æ³•ï¼ŒåŒæ—¶ä¿æŒäº†åˆç†çš„å†…å­˜æ¶ˆè€—ã€‚å®šæ€§åœ°è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä»<strong>å›¾3</strong>ä¸­çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„æ–¹æ³•äº§ç”Ÿäº†æ›´æ¸…æ™°çš„å‡ ä½•å½¢çŠ¶å’Œæ›´å°‘çš„ä¼ªå½±ã€‚</p><p><img src="/images/paper-reading-nice-slam/image-20220830100300984.png" alt="è¡¨1. Replicaæ•°æ®é›†ä¸Šçš„é‡å»ºç»“æœã€‚iMAPâˆ—è¡¨ç¤ºæˆ‘ä»¬é‡æ–°å®ç°çš„iMAPã€‚TSDF-Fusionä½¿ç”¨æ¥è‡ªNICE-SLAMçš„ç›¸æœºä½å§¿ã€‚æ¯ä¸ªåœºæ™¯çš„è¯¦ç»†åº¦é‡æ ‡å‡†å¯ä»¥åœ¨è¡¥å……æ–‡ä»¶ä¸­æ‰¾åˆ°ã€‚"></p><p><img src="/images/paper-reading-nice-slam/image-20220830100311009.png" alt="å›¾3. Replicaæ•°æ®é›†ä¸Šçš„é‡å»ºç»“æœã€‚iMAPâˆ—æ˜¯æŒ‡æˆ‘ä»¬é‡æ–°å®ç°çš„iMAPã€‚"></p><p><strong>TUM RGB-Dæ•°æ®é›†ä¸Šçš„è¯„ä¼°</strong>ã€‚æˆ‘ä»¬è¿˜è¯„ä¼°äº†åœ¨å°å‹TUM RGB-Dæ•°æ®é›†ä¸Šçš„ç›¸æœºè·Ÿè¸ªæ€§èƒ½ã€‚å¦‚<strong>è¡¨2</strong>æ‰€ç¤ºï¼Œæˆ‘ä»¬çš„æ–¹æ³•ä¼˜äºiMAPå’ŒDI-Fusionï¼Œå°½ç®¡æˆ‘ä»¬çš„è®¾è®¡æ›´é€‚åˆå¤§åœºæ™¯ã€‚å¯ä»¥æ³¨æ„åˆ°ï¼Œè·Ÿè¸ªæœ€å¥½çš„æ–¹æ³•ï¼ˆBAD-SLAMï¼ŒORB-SLAM2ï¼‰ä»ç„¶ä¼˜äºåŸºäºéšå¼åœºæ™¯è¡¨ç¤ºçš„æ–¹æ³•ï¼ˆiMAPå’Œæˆ‘ä»¬çš„æ–¹æ³•ï¼‰ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬çš„æ–¹æ³•<strong>æ˜¾è‘—åœ°å‡å°‘äº†è¿™ä¸¤ç±»æ–¹æ³•ä¹‹é—´çš„å·®è·ï¼ŒåŒæ—¶ä¿ç•™äº†éšå¼è¡¨ç¤ºçš„è¡¨å¾ä¼˜åŠ¿</strong>ã€‚</p><p><img src="/images/paper-reading-nice-slam/image-20220830100359426.png" alt="è¡¨2. TUM RGB-Dæ•°æ®é›†ä¸Šçš„ç›¸æœºè·Ÿè¸ªç»“æœã€‚ é‡‡ç”¨ATE RMSE[cm]ï¼ˆâ†“ï¼‰ä½œä¸ºè¯„ä»·æŒ‡æ ‡ã€‚NICE-SLAMå‡å°‘äº†ä½¿ç”¨ç¥ç»éšå¼è¡¨ç¤ºçš„SLAMæ–¹æ³•ä¸ä¼ ç»Ÿæ–¹æ³•ä¹‹é—´çš„å·®è·ã€‚æˆ‘ä»¬æŠ¥å‘Šäº†è¿™ä¸ªè¡¨ä¸­æ‰€æœ‰æ–¹æ³•çš„5æ¬¡è¿è¡Œä¸­æœ€å¥½çš„ä¸€æ¬¡ã€‚å–iMAPã€badslamã€Kintinuouså’ŒORB-SLAM2çš„æ•°æ®ã€‚"></p><p><strong>ScanNetæ•°æ®é›†ä¸Šçš„è¯„ä¼°</strong>ã€‚æˆ‘ä»¬ä»ScanNetä¸­é€‰æ‹©å¤šä¸ªå¤§å‹åœºæ™¯æ¥åŸºå‡†æµ‹è¯•ä¸åŒæ–¹æ³•çš„å¯æ‰©å±•æ€§ã€‚å¯¹äºå›¾4ä¸­æ‰€ç¤ºçš„å‡ ä½•å½¢çŠ¶ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ¥šåœ°æ³¨æ„åˆ°ï¼Œæ¯”èµ·TSDF-Fusionã€DI-Fusionå’ŒiMAPâˆ—ï¼Œ<strong>NICE-SLAMäº§ç”Ÿäº†æ›´æ¸…æ™°ã€æ›´è¯¦ç»†çš„å‡ ä½•å½¢çŠ¶</strong>ã€‚åœ¨è·Ÿè¸ªæ–¹é¢ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ï¼ŒiMAPâˆ—å’ŒDI-Fusionè¦ä¹ˆå®Œå…¨å¤±è´¥ï¼Œè¦ä¹ˆå¼•å…¥äº†è¾ƒå¤§çš„æ¼‚ç§»ï¼Œè€Œæˆ‘ä»¬çš„æ–¹æ³•<strong>æˆåŠŸåœ°é‡å»ºäº†æ•´ä¸ªåœºæ™¯</strong>ã€‚åœ¨è·Ÿè¸ªæ–¹é¢ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ï¼ŒiMAPâˆ—å’ŒDI-Fusionè¦ä¹ˆå®Œå…¨å¤±è´¥ï¼Œè¦ä¹ˆå¼•å…¥äº†è¾ƒå¤§çš„æ¼‚ç§»ï¼Œè€Œæˆ‘ä»¬çš„æ–¹æ³•æˆåŠŸåœ°é‡å»ºäº†æ•´ä¸ªåœºæ™¯ã€‚ä»å®šé‡ä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬çš„è·Ÿè¸ªç»“æœä¹Ÿæ˜æ˜¾æ¯”DI-Fusionå’ŒiMAPâˆ—æ›´å‡†ç¡®ï¼Œå¦‚<strong>è¡¨3</strong>æ‰€ç¤ºã€‚</p><p><img src="/images/paper-reading-nice-slam/image-20220830100510404.png" alt="è¡¨3. ScanNetæ•°æ®é›†ä¸Šçš„ç›¸æœºè·Ÿè¸ªç»“æœã€‚æˆ‘ä»¬æ–¹æ³•åœ¨è¿™ä¸ªæ•°æ®é›†ä¸Šå§‹ç»ˆäº§ç”Ÿæ›´å¥½çš„ç»“æœã€‚é‡‡ç”¨ATE RMSEï¼ˆâ†“ï¼‰ä½œä¸ºè¯„ä»·åº¦é‡ã€‚"></p><p><img src="/images/paper-reading-nice-slam/image-20220830100518979.png" alt="å›¾4. ScanNetæ•°æ®é›†ä¸Šçš„3Dé‡å»ºå’Œè·Ÿè¸ªã€‚ é»‘è‰²è½¨è¿¹æ˜¯æ¥è‡ªScanNetï¼Œçº¢è‰²è½¨è¿¹æ˜¯æœ¬æ–‡æ–¹æ³•çš„è·Ÿè¸ªç»“æœã€‚æˆ‘ä»¬å°è¯•äº†iMAPâˆ—çš„å„ç§è¶…å‚æ•°ï¼Œç»“æœæœ€å¥½ï¼Œä½†å¤§å¤šè¾ƒå·®"></p><p><strong>åœ¨æ›´å¤§åœºæ™¯æ•°æ®é›†ä¸Šçš„è¯„ä¼°</strong>ã€‚ä¸ºäº†è¯„ä¼°æˆ‘ä»¬çš„æ–¹æ³•çš„å¯æ‰©å±•æ€§ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªæœ‰å¤šä¸ªæˆ¿é—´çš„å¤§å…¬å¯“ä¸­æ•è·äº†ä¸€ä¸ªåºåˆ—ã€‚<strong>å›¾1</strong>å’Œ<strong>å›¾5</strong>æ˜¾ç¤ºäº†ä½¿ç”¨NICE-SLAMã€DI-Fusionå’ŒiMAP*è·å¾—çš„é‡å»ºç»“æœã€‚ä½œä¸ºå‚è€ƒï¼Œæˆ‘ä»¬è¿˜å±•ç¤ºäº†åœ¨Open3Dä¸­ä½¿ç”¨ç¦»çº¿å·¥å…·Redwoudçš„ä¸‰ç»´é‡å»ºã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒNICE-SLAMä¸ç¦»çº¿æ–¹æ³•å…·æœ‰ç›¸ä¼¼çš„ç»“æœï¼Œè€ŒiMAPâˆ—å’ŒDI-FusioNæ— æ³•é‡å»ºæ•´ä¸ªåºåˆ—ã€‚</p><img src="/images/paper-reading-nice-slam/image-20220830100553865.png" alt="å›¾1. é‡‡ç”¨NICE-SLAMè¿›è¡Œå¤šä¸ªæˆ¿é—´å…¬å¯“çš„ä¸‰ç»´é‡å»ºã€‚ä¸€ä¸ªå±‚æ¬¡åŒ–çš„ç‰¹å¾ç½‘æ ¼è”åˆç¼–ç å‡ ä½•å›¾å½¢å’Œé¢œè‰²ä¿¡æ¯ï¼Œå¹¶åŒæ—¶ç”¨äºå»ºå›¾å’Œè·Ÿè¸ªã€‚æˆ‘ä»¬æè¿°äº†æœ€ç»ˆçš„é¢ç‰‡å’Œç›¸æœºè·Ÿè¸ªè½¨è¿¹ã€‚" style="zoom:50%;"><p><img src="/images/paper-reading-nice-slam/image-20220830100608619.png" alt="å›¾5. åœ¨å¤šæˆ¿é—´å…¬å¯“æ•°æ®é›†ä¸Šçš„ä¸‰ç»´é‡å»ºå’Œè·Ÿè¸ªã€‚ç›¸æœºè·Ÿè¸ªè½¨è¿¹ç”¨çº¢è‰²æ˜¾ç¤ºã€‚iMAP*å’ŒDI-Fusionæœªèƒ½é‡å»ºå‡ºæ•´ä¸ªåºåˆ—ã€‚æˆ‘ä»¬è¿˜æ˜¾ç¤ºäº†ç¦»çº¿æ–¹æ³•çš„ç»“æœä½œä¸ºå‚è€ƒ"></p><h3 id="4-3-æ€§èƒ½åˆ†æ-Performance-Analysis"><a href="#4-3-æ€§èƒ½åˆ†æ-Performance-Analysis" class="headerlink" title="4.3 æ€§èƒ½åˆ†æ Performance Analysis"></a>4.3 æ€§èƒ½åˆ†æ Performance Analysis</h3><p>é™¤äº†å¯¹ä¸åŒæ•°æ®é›†ä¸Šçš„åœºæ™¯é‡å»ºå’Œç›¸æœºè·Ÿè¸ªçš„è¯„ä¼°å¤–ï¼Œä¸‹é¢æˆ‘ä»¬è¿˜è¯„ä¼°äº†æ‰€æå‡ºæ–¹æ¡ˆçš„å…¶ä»–ç‰¹æ€§ã€‚</p><p><strong>è®¡ç®—å¤æ‚åº¦Computation Complexity</strong>ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ¯”è¾ƒäº†æŸ¥è¯¢ä¸€ä¸ª3Dç‚¹çš„é¢œè‰²å’Œå ç”¨ç‡/ä½“ç§¯å¯†åº¦æ‰€éœ€çš„æµ®ç‚¹æ“ä½œ(FLOPs)çš„æ•°é‡ï¼Œè§<strong>è¡¨4</strong>ã€‚æˆ‘ä»¬çš„æ–¹æ³•åªéœ€è¦iMAP 1/4 çš„FLOPã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå³ä½¿åœ¨éå¸¸å¤§çš„åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬æ–¹æ³•ä¸­çš„æµç¨‹ä¹Ÿä¿æŒä¸å˜ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œç”±äºiMAPä¸­ä½¿ç”¨å•ä¸€MLPï¼ŒMLPçš„å®¹é‡é™åˆ¶å¯èƒ½éœ€è¦æ›´å¤šçš„å‚æ•°ï¼Œè¿™å°±å¯¼è‡´æ›´å¤šçš„FLOPSã€‚</p><p><strong>è¿è¡Œæ—¶Runtime</strong>ã€‚æˆ‘ä»¬è¿˜åœ¨<strong>è¡¨4</strong>ä¸­æ¯”è¾ƒäº†ä½¿ç”¨ç›¸åŒæ•°é‡çš„åƒç´ æ ·æœ¬ï¼ˆ$ M_t=200 $ç”¨äºè·Ÿè¸ªå’Œ$ M=1000 $ç”¨äºå»ºå›¾ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬çš„æ–¹æ³•åœ¨è·Ÿè¸ªå’Œå»ºå›¾æ–¹é¢æ¯”iMAPåˆ†åˆ«å¿«2å€å’Œ3å€ã€‚è¿™è¡¨æ˜ä½¿ç”¨æµ…çš„å¤šå±‚æ„ŸçŸ¥æœºMLPè§£ç å™¨çš„ç‰¹å¾ç½‘æ ¼æ¯”å•ä¸€æ·±å±‚MLPçš„ä¼˜åŠ¿ã€‚</p><p><img src="/images/paper-reading-nice-slam/image-20220830100739492.png" alt="è¡¨4. è®¡ç®—å¤æ‚åº¦ä¸è¿ç®—æ—¶é—´ã€‚æˆ‘ä»¬çš„åœºæ™¯è¡¨ç¤ºä¸ä»…æé«˜äº†é‡å»ºå’Œè·Ÿè¸ªçš„è´¨é‡ï¼Œè€Œä¸”é€Ÿåº¦æ›´å¿«ã€‚iMAPçš„è¿è¡Œæ—¶å–è‡ªå…¶è®ºæ–‡[47]ä¸­çš„æ•°æ®ã€‚"></p><p><strong>å¯¹äºåŠ¨æ€ç‰©ä½“çš„é²æ£’æ€§Robustness to Dynamic Objects</strong>ã€‚è¿™é‡Œæˆ‘ä»¬è€ƒè™‘åŒ…å«åŠ¨æ€ç§»åŠ¨å¯¹è±¡çš„Co-Fusionæ•°æ®é›†ã€‚å¦‚<strong>å›¾6</strong>æ‰€ç¤ºï¼Œæˆ‘ä»¬çš„æ–¹æ³•åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­æ­£ç¡®åœ°è¯†åˆ«å¹¶å¿½ç•¥äº†å±äºåŠ¨æ€å¯¹è±¡çš„åƒç´ æ ·æœ¬ï¼Œè¿™å°†å¯¼è‡´æ›´å¥½çš„åœºæ™¯è¡¨ç¤ºå»ºæ¨¡ï¼ˆå‚è§æ¸²æŸ“çš„RGBå’Œæ·±åº¦ï¼‰ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜ä¸iMAPâˆ—åœ¨ç›¸åŒåºåˆ—ä¸Šè¿›è¡Œäº†ç›¸æœºè·Ÿè¸ªæ¯”è¾ƒã€‚æˆ‘ä»¬æ–¹æ³•å’ŒiMAPâˆ—çš„ATE RMSEè¯„åˆ†åˆ†åˆ«ä¸º<strong>1.6cm</strong>å’Œ7.8cmï¼Œè¿™æ¸…æ¥šåœ°è¯æ˜äº†æˆ‘ä»¬å¯¹åŠ¨æ€å¯¹è±¡çš„é²æ£’æ€§ã€‚</p><p><strong>å‡ ä½•é¢„æµ‹å’Œå­”æ´å¡«å……Geometry Forecast and Hole Filling</strong>ã€‚å¦‚<strong>å›¾7</strong>æ‰€ç¤ºï¼Œç”±äºä½¿ç”¨ç²—ç³™å±‚åœºæ™¯ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè¡¥å…¨æœªè§‚å¯Ÿåˆ°çš„åœºæ™¯åŒºåŸŸã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œç”±iMAPâˆ—é‡å»ºçš„çœ‹ä¸è§çš„åŒºåŸŸå™ªå£°å¾ˆå¤§ï¼Œå› ä¸ºåœ¨iMAPâˆ—ä¸­æ²¡æœ‰ç¼–ç åœºæ™¯å…ˆéªŒçŸ¥è¯†ã€‚</p><p><img src="/images/paper-reading-nice-slam/image-20220830100816351.png" alt="å›¾6. å¯¹äºåŠ¨æ€ç‰©ä½“çš„é²æ£’æ€§ã€‚æˆ‘ä»¬å±•ç¤ºäº†è¦†ç›–åœ¨å›¾åƒä¸Šçš„é‡‡æ ·åƒç´ çš„ä¸­é—´ï¼ˆå·¦ï¼‰ã€æ¸²æŸ“çš„RGBï¼ˆä¸­é—´ï¼‰å’Œæ¸²æŸ“çš„æ·±åº¦ï¼ˆå³ï¼‰ï¼Œä»¥è¯´æ˜å¤„ç†åŠ¨æ€ç¯å¢ƒçš„èƒ½åŠ›ã€‚è·Ÿè¸ªè¿‡ç¨‹ä¸­çš„æ©ç åƒç´ æ ·æœ¬ç”¨é»‘è‰²è¡¨ç¤ºï¼Œè€Œä½¿ç”¨çš„åƒç´ æ ·æœ¬ç”¨çº¢è‰²è¡¨ç¤ºã€‚"></p><p><img src="/images/paper-reading-nice-slam/image-20220830100840244.png" alt="å›¾7. å‡ ä½•é¢„æµ‹å’Œç©ºæ´å¡«å……ã€‚ç™½è‰²åŒºåŸŸæ˜¯è§‚æµ‹è¿‡çš„åŒºåŸŸï¼Œé’è‰²è¡¨ç¤ºæœªè§‚æµ‹ä½†è¢«é¢„æµ‹çš„åŒºåŸŸã€‚ç”±äºä½¿ç”¨äº†ç²—ç³™å±‚çš„åœºæ™¯å…ˆéªŒï¼Œæˆ‘ä»¬çš„æ–¹æ³•æ¯”iMAPâˆ—å…·æœ‰æ›´å¥½çš„é¢„æµ‹èƒ½åŠ›ã€‚è¿™åè¿‡æ¥ä¹Ÿæé«˜äº†æˆ‘ä»¬çš„è·Ÿè¸ªæ€§èƒ½ã€‚"></p><h3 id="4-4-æ¶ˆèå®éªŒAblation-Study"><a href="#4-4-æ¶ˆèå®éªŒAblation-Study" class="headerlink" title="4.4 æ¶ˆèå®éªŒAblation Study"></a>4.4 æ¶ˆèå®éªŒAblation Study</h3><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ç ”ç©¶æˆ‘ä»¬çš„åˆ†å±‚ç»“æ„çš„é€‰æ‹©å’Œé¢œè‰²è¡¨ç¤ºçš„é‡è¦æ€§ã€‚</p><p><strong>åˆ†å±‚ç»“æ„Hierarchical Architecture</strong>ã€‚<strong>å›¾8</strong>å°†æˆ‘ä»¬çš„åˆ†å±‚æ¶æ„ä¸å…¶ä»–ä¸¤ç§æƒ…å†µè¿›è¡Œæ¯”è¾ƒï¼šaï¼‰ä¸€ä¸ªç‰¹å¾ç½‘æ ¼ä¸æˆ‘ä»¬çš„ç²¾ç»†å±‚è¡¨ç¤ºå…·æœ‰ç›¸åŒçš„åˆ†è¾¨ç‡ï¼ˆåªæœ‰é«˜åˆ†è¾¨ç‡ï¼‰ï¼›bï¼‰ä¸€ä¸ªå…·æœ‰ä¸­é—´å±‚åˆ†è¾¨ç‡çš„ç‰¹å¾ç½‘æ ¼ï¼ˆåªæœ‰ä½åˆ†è¾¨ç‡ï¼‰ã€‚å½“ç²¾ç»†å±‚çš„è¡¨ç¤ºå‚ä¸ä¼˜åŒ–æ—¶ï¼Œæˆ‘ä»¬çš„å±‚æ¬¡ç»“æ„å¯ä»¥å¿«é€Ÿåœ°æ·»åŠ å‡ ä½•ç»†èŠ‚ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†æ›´å¥½çš„æ”¶æ•›æ€§ã€‚</p><p><strong>å±€éƒ¨å…‰æŸå¹³å·® Local BA</strong>ã€‚æˆ‘ä»¬åœ¨ScanNetä¸ŠéªŒè¯äº†å±€éƒ¨æ†æœºè°ƒæ•´çš„æœ‰æ•ˆæ€§ã€‚å¦‚æœæˆ‘ä»¬ä¸è”åˆä¼˜åŒ–Kä¸ªå…³é”®å¸§çš„ç›¸æœºå§¿æ€å’Œåœºæ™¯è¡¨ç¤ºï¼ˆåœ¨<strong>è¡¨5</strong>ä¸­æ²¡æœ‰å±€éƒ¨BAï¼‰ï¼Œåˆ™ç›¸æœºè·Ÿè¸ªä¸ä»…ç²¾åº¦æ˜æ˜¾é™ä½ï¼Œè€Œä¸”å¯é æ€§ä¹Ÿè¾ƒå·®ã€‚</p><p><strong>é¢œè‰²è¡¨ç¤ºColor Representation</strong>ã€‚åœ¨<strong>è¡¨5</strong>ä¸­ï¼Œæˆ‘ä»¬æ¯”è¾ƒäº†å…¬å¼ï¼ˆ9ï¼‰ä¸­æ²¡æœ‰å…‰åº¦æŸå¤±$ \mathcal{L}_p $çš„æ–¹æ³•ã€‚è¿™è¡¨æ˜ï¼Œè™½ç„¶ç”±äºæœ‰é™çš„ä¼˜åŒ–é¢„ç®—å’Œç¼ºä¹æ ·æœ¬ï¼Œæˆ‘ä»¬ä¼°è®¡çš„é¢œè‰²å¹¶ä¸å®Œç¾ç‚¹ï¼Œå­¦ä¹ è¿™ç§é¢œè‰²è¡¨ç¤ºä»ç„¶å¯¹ç²¾ç¡®çš„ç›¸æœºè·Ÿè¸ªèµ·ç€é‡è¦çš„ä½œç”¨ã€‚</p><p><strong>å…³é”®å¸§é€‰å–KeyFrame Selection</strong>ã€‚æˆ‘ä»¬ä½¿ç”¨iMAPçš„å…³é”®å¸§é€‰æ‹©ç­–ç•¥ï¼ˆè¡¨5ä¸­çš„w/iMAPå…³é”®å¸§ï¼‰æ¥æµ‹è¯•æˆ‘ä»¬çš„æ–¹æ³•ï¼Œå…¶ä¸­ä»–ä»¬ä»æ•´ä¸ªåœºæ™¯ä¸­é€‰æ‹©å…³é”®å¸§ã€‚è¿™å¯¹äºiMAPæ˜¯å¿…è¦çš„ï¼Œä»¥é˜²æ­¢å…¶ç®€å•çš„å¤šå±‚æ„ŸçŸ¥æœºå¿˜è®°äº†ä¹‹å‰çš„å‡ ä½•å½¢çŠ¶ã€‚ç„¶è€Œï¼Œå®ƒä¹Ÿä¼šå¯¼è‡´æ”¶æ•›ç¼“æ…¢å’Œä¸å‡†ç¡®çš„è·Ÿè¸ªã€‚</p><p><img src="/images/paper-reading-nice-slam/image-20220830101405391.png" alt="è¡¨5. æ¶ˆèå®éªŒã€‚æˆ‘ä»¬ç ”ç©¶äº†å±€éƒ¨BAã€é¢œè‰²è¡¨ç¤ºä»¥åŠæˆ‘ä»¬çš„å…³é”®å¸§é€‰æ‹©ç­–ç•¥çš„æœ‰æ•ˆæ€§ã€‚æ¯ä¸ªåœºæ™¯è¿è¡Œ5æ¬¡ï¼Œå¹¶è®¡ç®—å…¶ATE RMSEçš„å¹³å‡å€¼å’Œæ ‡å‡†å·®ã€‚æˆ‘ä»¬åœ¨ScanNetä¸­æŠ¥å‘Šäº†6ä¸ªåœºæ™¯çš„å¹³å‡å€¼"></p><p><img src="/images/paper-reading-nice-slam/image-20220830101414155.png" alt="å›¾8. åˆ†å±‚ç»“æ„æ¶ˆèå®éªŒã€‚å…·æœ‰åœ¨ä¸åŒç»“æ„çš„Replicaæ•°æ®é›†ä¸Šå¯¹å•ä¸ªæ·±åº¦å›¾åƒçš„å‡ ä½•ä¼˜åŒ–ã€‚ä¸ºäº†æ›´å¹³æ»‘ï¼Œæ›²çº¿å¯ä»¥æ›´å¥½åœ°å¯è§†åŒ–ã€‚"></p><h2 id="5-æ€»ç»“"><a href="#5-æ€»ç»“" class="headerlink" title="5. æ€»ç»“"></a>5. æ€»ç»“</h2><p>æˆ‘ä»¬æå‡ºäº†<strong>NICE-SLAM</strong>ï¼Œä¸€ç§ç¨ å¯†è§†è§‰SLAMæ–¹æ³•ï¼Œå®ƒç»“åˆäº†ç¥ç»éšå¼è¡¨ç¤ºçš„ä¼˜åŠ¿å’ŒåŸºäºå±‚æ¬¡ç½‘æ ¼çš„åœºæ™¯è¡¨ç¤ºçš„å¯æ‰©å±•æ€§ã€‚ä¸å•ä¸ªå¤§çš„å¤šå±‚æ„ŸçŸ¥æœºMLPçš„åœºæ™¯è¡¨ç¤ºç›¸æ¯”ï¼Œæˆ‘ä»¬çš„å®éªŒè¯æ˜ï¼Œæˆ‘ä»¬çš„è¡¨ç¤ºï¼ˆæµ…å±‚çš„MLPs+å¤šåˆ†è¾¨ç‡ç‰¹å¾ç½‘æ ¼ï¼‰ä¸ä»…ä¿è¯äº†ç²¾ç»†çš„å»ºå›¾å’Œé«˜çš„è·Ÿè¸ªç²¾åº¦ï¼Œä½†ç”±äºå±€éƒ¨åœºæ™¯æ›´æ–°çš„å¥½å¤„ï¼Œé€Ÿåº¦æ›´å¿«å’Œè®¡ç®—æ›´å°‘ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬çš„ç½‘ç»œèƒ½å¤Ÿå¡«è¡¥å°æ´ï¼Œå¹¶å°†åœºæ™¯å‡ ä½•æ¨æ–­åˆ°æœªè§‚å¯Ÿåˆ°çš„åŒºåŸŸï¼Œä»è€Œç¨³å®šç›¸æœºçš„è·Ÿè¸ªã€‚</p><p><strong>å±€é™æ€§Limitations</strong>ã€‚è¯¥æ–¹æ³•çš„é¢„æµ‹èƒ½åŠ›ä»…é™äºç²—ç³™è¡¨ç¤ºçš„å°ºåº¦ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬çš„æ–¹æ³•ä¸æ‰§è¡Œé—­ç¯æ£€æµ‹ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„æœªæ¥æ–¹å‘ã€‚æœ€ç»ˆï¼Œè™½ç„¶ä¼ ç»Ÿæ–¹æ³•ç¼ºä¹ä¸€äº›ç‰¹å¾ï¼Œä½†ä¸åŸºäºå­¦ä¹ çš„æ–¹æ³•ç›¸æ¯”ï¼Œä»ç„¶å­˜åœ¨ç€æ€§èƒ½å·®è·éœ€è¦å»ç¼©å°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Harry Shum &quot;You are what you write&quot;</title>
      <link href="2022/08/29/harry-shum-you-are-what-you-write/"/>
      <url>2022/08/29/harry-shum-you-are-what-you-write/</url>
      
        <content type="html"><![CDATA[<h1 id="Harry-Shum-â€œYou-are-what-you-writeâ€"><a href="#Harry-Shum-â€œYou-are-what-you-writeâ€" class="headerlink" title="Harry Shum â€œYou are what you writeâ€"></a>Harry Shum â€œYou are what you writeâ€</h1><blockquote><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.linkedin.com/pulse/you-what-write-harry-shum">https://www.linkedin.com/pulse/you-what-write-harry-shum</a></p></blockquote><p>Twitterã€PowerPointã€Facebookã€Instagram å’ŒçŸ­ä¿¡æ˜¯å¦æ­£åœ¨ä¾µèš€æˆ‘ä»¬çš„æ€è€ƒèƒ½åŠ›ï¼Ÿ</p><p>ä¸­å›½æœ‰å¥è°šè¯­â€œè§æ–‡å¦‚è§äººâ€ï¼Œå­—é¢æ„æ€æ˜¯â€œè¯»æ–‡çŒ®ï¼Œè§ä½œè€…â€ã€‚å¦‚æœæˆ‘ä»¬æ˜¯æˆ‘ä»¬æ‰€å†™çš„ï¼Œé‚£ä¹ˆä½œä¸ºä¸€ä¸ªç¤¾ä¼šçš„ä¸€å‘˜ï¼Œæˆ‘ä»¬å°†æˆä¸ºè°ï¼Ÿ</p><p>æœ€è¿‘æˆ‘ååœ¨ä¸€ä¸ªæŠ€æœ¯è¯„å®¡ä¸­ï¼Œå¬ç€æˆ‘ä»¬çš„ä¸€ä¸ªè¯„å®¡å‘˜æ‹·é—®æ­£åœ¨æ¼”è®²çš„å·¥ç¨‹å¸ˆï¼šä½ ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ç§è®¾è®¡ï¼Ÿä¸ºä»€ä¹ˆè¯¥æœåŠ¡æ˜¾ç¤ºæ•ˆæœä¸å¥½ï¼Ÿæœ‰å¤šå°‘ç”¨æˆ·ä¼šæ”¹ç”¨è¿™ä¸ªè§£å†³æ–¹æ¡ˆï¼Ÿ</p><p><strong>æ¼”è®²è€…çš„å›ç­”ç¼ºä¹æ·±åº¦ã€‚ä»–ä¼¼ä¹æ²¡æœ‰åšè¶³å¤Ÿçš„ä¸¥æ ¼æ€è€ƒï¼Œå°±æ˜¯é‚£ç§ä½ é™é™åœ°åä¸‹æ¥ï¼Œç­›é€‰ç ”ç©¶ï¼Œæ€è€ƒå„ç§é€‰æ‹©ï¼Œç¡®å®šä½ çŸ¥é“ä»€ä¹ˆï¼Œä¸çŸ¥é“ä»€ä¹ˆï¼Œä»¥åŠå“ªé‡Œéœ€è¦åšæ›´å¤šçš„å·¥ä½œã€‚</strong>æˆ‘ä½œä¸ºä¸€ä¸ªå¹´è½»çš„ç ”ç©¶äººå‘˜æ‰€åšçš„é‚£ç§æ€è€ƒï¼Œå½“æˆ‘èµ°æ·å¾„çš„æ—¶å€™ï¼ŒåŒè¡Œä»¬ä¼šæŠŠæˆ‘å’Œæˆ‘çš„å·¥ä½œæ‹†å¼€ã€‚é‚£æ—¶ï¼Œæˆ‘é‡‡ç”¨äº†ä¸€ç§æœ‰è§„å¾‹çš„æ–¹æ³•ï¼ŒèŠ±å‡ ä¸ªå°æ—¶æ¥æ€è€ƒï¼Œç”šè‡³èŠ±æ›´å¤šçš„æ—¶é—´æ¥æ€è€ƒæœ€å›°éš¾çš„éƒ¨åˆ†â€“æŠŠå®ƒå†™ä¸‹æ¥ã€‚</p><p>ä»Šå¤©ï¼Œé•¿ç¯‡å†™ä½œæ­£åœ¨è¢«å–ä»£ã€‚æ¨ç‰¹è¢«å½“ä½œå¯¹è¯ã€‚PowerPointå°†æ€æƒ³æµ“ç¼©ä¸ºå­å¼¹ã€‚æ–‡å­—å·²ç»è¢«æ¢æˆäº†è¡¨æƒ…ç¬¦å·å’ŒGIFã€‚è€Œæˆ‘ä»¬å·²ç»æ²‰è¿·äºè¿™äº›å™ªéŸ³ã€‚<a href="http://www.visualcapitalist.com/happens-internet-minute-2017/">åœ¨äº’è”ç½‘çš„ä¸€åˆ†é’Ÿå†…ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</a>1600ä¸‡æ¡æ–‡æœ¬ä¿¡æ¯ã€‚180ä¸‡æ¡å¿«ç…§ã€‚452,000æ¡æ¨ç‰¹ã€‚1.56äº¿å°ç”µå­é‚®ä»¶ã€‚è°æœ‰æ—¶é—´å»æ€è€ƒï¼Œæ›´ä¸ç”¨è¯´å†™ä½œäº†ï¼Ÿ</p><p>ä¹Ÿè®¸æˆ‘ä»¬ï¼Œåœ¨æŠ€æœ¯è¡Œä¸šï¼Œå·²ç»å¡‘é€ äº†è¿™ä¸ªç°å®ã€‚æˆ‘ä»¬åˆ›é€ äº†ç”µè¯ã€åº”ç”¨ç¨‹åºå’Œ24/7è¿æ¥çš„ä¸–ç•Œã€‚æˆ‘ä»¬è®©ç¤¾ä¼šæ”¾ä¸‹äº†ç¬”ã€‚ä»Šå¤©æˆ‘æ‰€åšçš„å”¯ä¸€å†™ä½œæ˜¯ç”µå­é‚®ä»¶æˆ–å¿«é€Ÿçš„å¾®ä¿¡å›å¤ã€‚</p><p>å› æ­¤ï¼Œç°åœ¨æˆ‘æ‹…å¿ƒæˆ‘ä»¬æ­£åœ¨å¤±å»ä¸€ä¸ªå®è´µçš„å·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ·±å…¥æ€è€ƒï¼Œè¡¨è¾¾æˆ‘ä»¬æœ€çœŸå®çš„ä¸€é¢ï¼Œå¹¶æ‰©å±•æˆ‘ä»¬å‘¨å›´äººçš„æ™ºåŠ›ã€‚è€Œå¯¹äºæˆ‘ä»¬æŠ€æœ¯ç•Œçš„äººæ¥è¯´ï¼Œè¿™å°¤å…¶ä»¤äººä¸å®‰ã€‚äººå·¥æ™ºèƒ½çš„é£é™©æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½é«˜ã€‚æˆ‘ä»¬é¢ä¸´ç€å·¨å¤§çš„å‹åŠ›ï¼Œè¦å¿«é€Ÿå‡ºè´§ï¼Œè¦å®ç°æ›´å¤šã€æ›´å¿«ï¼Œä½†æˆ‘ä»¬ä¸èƒ½ä»¥ç‰ºç‰²æœ€é«˜çš„å·¥ç¨‹è´¨é‡ä¸ºä»£ä»·æ¥å®ç°è¿™ä¸€ç‚¹ã€‚æˆ‘ä»¬å¿…é¡»ä»”ç»†è€ƒè™‘åæœå’Œæ›¿ä»£æ–¹æ¡ˆã€‚å½“ä¸€è¾†è‡ªåŠ¨é©¾é©¶æ±½è½¦æ’åˆ°äººæ—¶ï¼Œè°ä¼šå—åˆ°è´£å¤‡ï¼Ÿå†™ä»£ç çš„å·¥ç¨‹å¸ˆæ˜¯å¸æœºã€‚è°è¦å¯¹æœ‰åè§çš„äººå·¥æ™ºèƒ½ç®—æ³•è´Ÿè´£ï¼Ÿåˆ›é€ äººå·¥æ™ºèƒ½çš„å·¥ç¨‹å¸ˆã€‚</p><p>æˆ‘çœ‹åˆ°æ›´å°‘çš„å·¥ç¨‹å¸ˆæ’°å†™å’Œåˆ†äº«æ·±åº¦æ€è€ƒï¼Œä½†è¿™ç§æ·±åº¦æ€è€ƒæ‰èƒ½ç»™æ•´ä¸ªè¡Œä¸šå¸¦æ¥æ›´å¤š<a href="https://www.cnbc.com/2018/01/24/google-engineer-steve-yege-calls-company-100-percent-competitor-focused.html">çœŸæ­£çš„åˆ›æ–°</a>ã€‚<strong>æˆ‘ä»¬å°†å¦‚ä½•å®ç°é‡å¤§çš„å˜é©æ€§çªç ´è€Œä¸æ˜¯å¢é‡çš„é‡Œç¨‹ç¢‘ï¼Ÿ</strong></p><p><strong>é€šè¿‡å†™ä½œã€‚å› ä¸ºæ€è€ƒçš„æ–¹å¼å®é™…ä¸Šå°±æ˜¯å†™ä½œã€‚</strong></p><p>æŠŠç¬”æ”¾åœ¨çº¸ä¸Šè¿«ä½¿ä½ é€šè¿‡è¿­ä»£ã€ä¿®æ”¹å’Œæ¢ç´¢æ›¿ä»£æ–¹æ¡ˆæ¥å‘å±•å’Œå®Œå–„ä½ çš„æ€ç»´ã€‚ä»»ä½•èƒ½å¤Ÿæ·±å…¥æ€è€ƒçš„äººéƒ½å¯ä»¥å†™å‡ºæ¼‚äº®çš„ä»£ç ã€é¼“èˆäººå¿ƒçš„è®ºæ–‡æˆ–åˆ¶å®šè®¡åˆ’ï¼Œå°†ä¸‹ä¸€ä¸ªå¤§äº‹æƒ…ä»˜è¯¸å®æ–½ã€‚æˆ‘é¼“åŠ±ä½ é˜…è¯»<a href="https://www.reidhoffman.org/linkedin-pitch-to-greylock/">é‡Œå¾·-éœå¤«æ›¼ï¼ˆReid Hoffmanï¼‰å¯¹LinkedInçš„Bè½®æŠ•èµ„</a>ï¼Œä»–åœ¨å…¶ä¸­åˆ†äº«äº†å¸®åŠ©ä»–æˆåŠŸçš„æ€ç»´ã€‚å½“æ—¶ï¼Œä»–åˆ†äº«è¯´ï¼Œä¸€ä¸ªé£é™©å…¬å¸çš„åˆä¼™äººæ¥è§¦åˆ°äº†å¤§çº¦5000ä¸ªæŠ•ç¨¿ï¼Œæ›´ä»”ç»†åœ°çœ‹äº†600åˆ°800ä¸ªï¼Œåšäº†0åˆ°2ç¬”äº¤æ˜“ã€‚</p><p>å†™ä½œæä¾›äº†åˆ›é€ æŒä¹…äººå·¥åˆ¶å“çš„å¯èƒ½æ€§ã€‚æˆ‘æƒ³åˆ°äº†æˆ‘å‘è¡¨çš„è®ºæ–‡ï¼Œè™½ç„¶å¯èƒ½æ˜¯ä½œä¸ºå‚è€ƒææ–™ï¼Œä½†ä¹Ÿæ˜¯ç»ä¹…ä¸è¡°çš„ã€‚<a href="https://dl.acm.org/citation.cfm?id=344932">Plenoptic Sampling</a>. <a href="https://dl.acm.org/citation.cfm?id=1015719">Lazy Snapping</a>. <a href="https://www.semanticscholar.org/paper/Poisson-matting-Sun-Jia/263b48170776e98a3cf4fbdbdc391d596522c6dc">Poisson Matting</a>. è¿™äº›æ˜¯æˆ‘çš„å·¥ä½œå¯¹è®¡ç®—æœºè§†è§‰å’Œå›¾å½¢é¢†åŸŸçš„è´¡çŒ®ã€‚å®ƒä»¬å°†åœ¨æˆ‘èº«ä¸Šç”Ÿå­˜ï¼Œå¦‚æœæˆ‘å¹¸è¿çš„è¯ï¼Œç”šè‡³å¯ä»¥å¸®åŠ©å¡‘é€ ä¸€ä¸¤ä¸ªäººçš„æ€æƒ³ã€‚</p><p>æˆ‘åœ¨å¡å†…åŸºæ¢…éš†å¤§å­¦æœ€å–œæ¬¢çš„ä¸€ä½æ•™æˆ<a href="https://www.ri.cmu.edu/ri-faculty/takeo-kanade/">Takeo Kanade</a>è¯´ï¼Œ<strong>ä½ å¿…é¡»åƒå†™ä¾¦æ¢å°è¯´ä¸€æ ·å†™ç ”ç©¶è®ºæ–‡ã€‚ä½ éœ€è¦æ•…äº‹ã€æ‚¬å¿µã€æƒŠå–œå’Œ â€œå•Šå“ˆ â€œæ¥å‘åŒè¡Œè§£é‡Šä½ çš„æƒ³æ³•ï¼Œæ¿€åŠ±ä»–äººåšå‡ºè´¡çŒ®ï¼Œæ¨åŠ¨ä½ çš„å·¥ä½œå’Œæ•´ä¸ªé¢†åŸŸçš„å‘å±•ã€‚</strong></p><p>å†™ä½œæ˜¯ä¸€ä¸ªå‡è¡¡å™¨ï¼Œå¯ä»¥ä»æ•´ä¸ªå›¢é˜Ÿä¸­è·å¾—æœ€ä½³æ•ˆæœã€‚åœ¨äºšé©¬é€Šï¼Œæ¼”è®²æ˜¯ç”¨<a href="https://www.linkedin.com/pulse/beauty-amazons-6-pager-brad-porter/">å…­é¡µçº¸</a>å®Œæˆçš„ã€‚ä¼šè®®å¼€å§‹æ—¶ï¼Œæ¯ä¸ªäººéƒ½åœ¨é˜…è¯»ï¼Œç„¶åæ˜¯å¯¹ä½œè€…çš„è¯„è®ºå’Œæé—®ã€‚æ¯ä¸ªäººéƒ½åœ¨ç›¸åŒçš„ç¯å¢ƒä¸‹å·¥ä½œï¼Œå†…å‘çš„äººã€å¤–å‘çš„äººå’Œéæ¯è¯­çš„äººéƒ½æœ‰å¹³ç­‰çš„æœºä¼šæ¥è¡¨è¾¾ä»–ä»¬çš„æƒ³æ³•ã€‚è¿™ä¸æ˜¯å…³äºæ¼”è®²è€…çš„ä¸ªæ€§ï¼Œè€Œæ˜¯æ–‡å­—ã€‚</p><p>å½’æ ¹ç»“åº•ï¼Œå†™ä½œæœ‰åŠ©äºä½¿ä½ æˆåŠŸã€‚<strong>ä½ å¯èƒ½æ˜¯æœ€èªæ˜çš„äººï¼Œæœ‰æœ€å¥½çš„æƒ³æ³•ï¼Œä½†å¦‚æœä½ ä¸èƒ½ä»¥ä»¤äººä¿¡æœçš„æ–¹å¼ä¼ è¾¾ä½ çš„æƒ³æ³•ï¼Œä½ å°±ä¸ä¼šèµ°è¿œã€‚</strong>åœ¨æˆ‘ä»¬çš„AI+Rå›¢é˜Ÿä¸­ï¼Œæœ‰ä¸¤ä½å·¥ç¨‹å¸ˆä»¥å…¶ç»å¸¸æ€§çš„å†™ä½œä¹ æƒ¯æ¿€åŠ±ç€æˆ‘ï¼Œä»–ä»¬æ˜¯<a href="https://www.linkedin.com/in/bill-ramsey-4571513/">Bill Ramsey</a>å’Œ<a href="https://www.linkedin.com/in/ronnyk/">Ronny Kohavi</a>ã€‚Billåœ¨å¾®è½¯å†™äº†250å¤šç¯‡åšæ–‡ï¼Œä½¿æˆ‘ä»¬æ•´ä¸ªæŠ€æœ¯ç¤¾åŒºå—ç›Šã€‚å¯¹äºRonnyï¼Œä½ ç”šè‡³ä¸éœ€è¦è§åˆ°ä»–â€“ä»–é‚£ç¯‡è¢«é«˜åº¦å¼•ç”¨çš„A/Bæµ‹è¯•å®éªŒè®ºæ–‡è¯´æ˜äº†ä¸€åˆ‡ï¼Œä»–åœ¨LinkedInä¸Šå‘è¡¨çš„æ–‡ç« è®©æ•´ä¸ªè¡Œä¸šå—ç›Šã€‚</p><p>å½“ä½ åœ¨è¯»è¿™ç¯‡æ–‡ç« æ—¶ï¼Œä½ å¯èƒ½æ­£åœ¨è®°å½•ä½ çš„åå¯¹æ„è§ï¼šæˆ‘éœ€è¦æ¨åŠ¨ç»“æœï¼Œæ‰€ä»¥æˆ‘éœ€è¦ç›´æ¥å»å†™ä»£ç ã€‚æˆ‘ä»¥ä»£ç é—»åï¼Œæ‰€ä»¥æˆ‘ä¸éœ€è¦å†™è®ºæ–‡ã€‚æˆ‘ä¸æ˜¯native speakerï¼Œæˆ‘ç”¨ä»£ç è¯´è¯æ›´å¥½ã€‚æˆ‘ä¸çŸ¥é“è¯¥å†™äº›ä»€ä¹ˆã€‚æˆ‘æ²¡æœ‰æ—¶é—´â€¦â€¦ä½†æ˜¯ï¼Œä¸ºäº†ä½ è‡ªå·±çš„æˆåŠŸï¼Œä¸ºäº†ä½ å…¬å¸çš„æˆåŠŸï¼Œä¸ºäº†è¡Œä¸šçš„è¿›æ­¥ï¼Œè¯·æŠŠå®ƒä»¬æ”¾åœ¨ä¸€è¾¹ï¼Œå¼€å§‹å†™ä½œã€‚</p><p>æˆ‘çœ‹åˆ°æœ‰å¾ˆå¤šæœºä¼šå¯ä»¥å°†é•¿ç¯‡å†™ä½œé‡æ–°çº³å…¥å·¥ç¨‹æ–‡åŒ–â€“è§„åˆ’æ–‡ä»¶ã€é¡¹ç›®å»ºè®®ä¹¦ã€æŠ€æœ¯LRPã€è¯„è®ºæ–‡ç« ï¼Œä»¥æ¿€åŠ±æˆ‘ä»¬ä¸€èµ·å·¥ä½œï¼Œé›†ä½“åˆ›é€ å’ŒåŸ¹å…»å¤§çš„æƒ³æ³•å’Œå¤§çš„æ€ç»´ã€‚</p><p>æˆ‘æœ€è¿‘è¿ˆå‡ºäº†ç¬¬ä¸€æ­¥ï¼Œä¸æˆ‘çš„åŒäº‹Xiaodong Heå’ŒDi Liä¸€èµ·å†™äº†ä¸€ç¯‡ç ”ç©¶è®ºæ–‡ï¼Œ<a href="https://arxiv.org/abs/1801.01957">From Eliza to XiaoIce: Challenges and Opportunities with Social Chatbots</a>ï¼Œè¿™æ˜¯å¤šå¹´æ¥çš„ç¬¬ä¸€æ¬¡ï¼Œæ‰€ä»¥è¯·ä¸è¦è¯„å¤´è®ºè¶³ï¼Œåªæœ‰å»ºè®¾æ€§çš„åé¦ˆï¼</p><p>è®©æˆ‘ä»¬é€šè¿‡å†™æ›´å¤šçš„ä¸œè¥¿æ¥æ”¹å†™æˆ‘ä»¬çš„æ€æƒ³é¢†å¯¼åŠ›å’Œå·¥ç¨‹è´¨é‡çš„æ ‡å‡†å§!</p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç»éªŒåˆ†äº« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Richard Hamming &quot;You and Your Research&quot;</title>
      <link href="2022/08/29/richard-hamming-you-and-your-research/"/>
      <url>2022/08/29/richard-hamming-you-and-your-research/</url>
      
        <content type="html"><![CDATA[<h1 id="Richard-Hamming-â€œYou-and-Your-Researchâ€"><a href="#Richard-Hamming-â€œYou-and-Your-Researchâ€" class="headerlink" title="Richard Hamming â€œYou and Your Researchâ€"></a>Richard Hamming â€œYou and Your Researchâ€</h1><blockquote><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://www.cs.virginia.edu/~robins/YouAndYourResearch.html">https://www.cs.virginia.edu/~robins/YouAndYourResearch.html</a></p><p>ä¸­æ–‡é“¾æ¥ï¼š<a href="https://tieba.baidu.com/p/248718051?red_tag=0886115742">https://tieba.baidu.com/p/248718051?red_tag=0886115742</a></p></blockquote><p>1986å¹´3æœˆ7æ—¥ï¼ŒRichard Hammingåœ¨è´å°”é€šä¿¡ç ”ç©¶ä¸­å¿ƒç»™200å¤šåç§‘å­¦å®¶ä»¬ï¼Œåšäº†ä¸€æ¬¡æ¼”è®²ï¼Œé¢˜ç›®å«åšâ€You and Your Researchâ€ã€‚ä»–è¯•å›¾å›ç­”ä¸‹é¢è¿™æ ·ä¸€ä¸ªé—®é¢˜ã€‚</p><blockquote><p><strong>â€œä¸ºä»€ä¹ˆæœ‰çš„ç§‘å­¦å®¶åšå‡ºäº†å½±å“æ·±è¿œçš„é‡å¤§æˆæœï¼Œè€Œå¤§å¤šæ•°å…¶ä»–äººçš„æˆæœéƒ½è¢«å†å²é—å¿˜äº†ï¼Ÿâ€</strong></p></blockquote><p>è¿™ç¯‡æ¼”è®²éå¸¸æœ‰åï¼Œå±äºç»å…¸æ–‡çŒ®ã€‚ä¸ä»…å¯¹ç§‘å­¦å·¥ä½œè€…æœ‰å¯å‘æ„ä¹‰ï¼Œæ¯ä¸€ä¸ªä»äº‹åˆ›é€ æ€§å·¥ä½œçš„äººï¼Œéƒ½åº”è¯¥è¯»ä¸€ä¸‹ã€‚</p><p>ä¸‹é¢æ˜¯<a href="https://www.ruanyifeng.com/blog/2016/04/you-and-your-research.html">é˜®ä¸€å³°</a>çš„æ‘˜å½•ï¼Œåˆ é™¤äº†ä¸€äº›æ¶‰åŠå…·ä½“çš„äººå’Œäº‹çš„æ®µè½ï¼Œå†…å®¹æ›´é›†ä¸­æ˜“è¯»ï¼Œå¹¶ä¸”ä¸ºæ¯ä¸ªéƒ¨åˆ†åŠ ä¸Šäº†å°æ ‡é¢˜ã€‚</p><h2 id="You-and-Your-Research"><a href="#You-and-Your-Research" class="headerlink" title="You and Your Research"></a>You and Your Research</h2><p>æˆ‘æ¼”è®²çš„é¢˜ç›®æ˜¯â€ä½ å’Œä½ çš„ç ”ç©¶â€ã€‚æˆ‘è¦è°ˆçš„ä¸æ˜¯æ™®é€šçš„ç ”ç©¶ï¼Œè€Œæ˜¯é‡å¤§çš„ç ”ç©¶ï¼Œå°±æ˜¯ç›¸å½“è¯ºè´å°”å¥–é‚£ä¸€çº§åˆ«çš„ç ”ç©¶ã€‚æ¯”å¦‚ï¼Œç›¸å¯¹è®ºï¼Œé¦™å†œçš„ä¿¡æ¯è®ºï¼Œä»¥åŠå…¶ä»–æ°å‡ºçš„ç†è®ºâ€”-è¿™å°±æ˜¯æˆ‘è¦è®²çš„ã€‚</p><p>1945å¹´ï¼Œæˆ‘è¿›å…¥æ´›æ–¯é˜¿æ‹‰è«æ–¯å›½å®¶å®éªŒå®¤ï¼Œè´Ÿè´£è®¡ç®—æœºæ–¹é¢çš„äº‹ï¼Œå› æ­¤è§è¿‡è´¹æ›¼ã€è´¹ç±³ã€å¥¥æœ¬æµ·é»˜ç­‰å¤§ç§‘å­¦å®¶ã€‚æˆ‘ä¸€ç›´é—®è‡ªå·±è¿™æ ·çš„é—®é¢˜ï¼š â€œä¸ºä»€ä¹ˆä»–ä»¬åšå‡ºäº†è¿™æ ·çš„æˆæœï¼Ÿâ€å’Œâ€æˆ‘å’Œä»–ä»¬çš„å·®åˆ«æ˜¯ä»€ä¹ˆâ€ ã€‚æˆ‘è¯»äº†ä¼ è®°ã€è‡ªä¼ ï¼Œå»é—®ä»–ä»¬æœ¬äººï¼šâ€ä½ æ˜¯æ€ä¹ˆå¹²èµ·æ¥è¿™æ ·çš„äº‹çš„ï¼Ÿâ€ æˆ‘è¯•ç€ææ¸…åŸå› ï¼Œè¿™å°±æ˜¯ä»Šå¤©è¦è°ˆçš„å†…å®¹ã€‚</p><p>ä¸ºä»€ä¹ˆè¿™ä¸ªè¯é¢˜é‡è¦ï¼Ÿå› ä¸ºä½ åªæœ‰ä¸€æ¬¡ç”Ÿå‘½ã€‚å³ä½¿ä½ ç›¸ä¿¡æ¥ä¸–ï¼Œé‚£ä¹Ÿæ²¡å…³ç³»ï¼Œä¸ºä»€ä¹ˆä¸åœ¨ä»Šç”Ÿå°±åšä¸€äº›é‡å¤§çš„äº‹å‘¢ã€‚</p><h3 id="ä¸€ã€è¦æœ‰åšå¤§äº‹çš„æƒ³æ³•"><a href="#ä¸€ã€è¦æœ‰åšå¤§äº‹çš„æƒ³æ³•" class="headerlink" title="ä¸€ã€è¦æœ‰åšå¤§äº‹çš„æƒ³æ³•"></a>ä¸€ã€è¦æœ‰åšå¤§äº‹çš„æƒ³æ³•</h3><p>é¦–å…ˆï¼Œä½ è¦æœ‰å¹²å¤§äº‹çš„æƒ³æ³•ã€‚å¾ˆå¤šäººæ¯•ç”Ÿåªæ˜¯ä¾‹è¡Œå…¬äº‹èˆ¬åœ°ä»äº‹å®‰å…¨çš„å·¥ä½œï¼Œæ‰€ä»¥äº§å‡ºæœ‰é™ã€‚å°±è¿™ä¹ˆç®€å•ï¼šå¦‚æœä½ è¦å¹²å¤§äº‹ï¼Œä½ å¿…é¡»æ¯«ä¸è¿Ÿç–‘åœ°å»è§£å†³é‡å¤§éš¾é¢˜ã€‚</p><p>æˆ‘é‡åˆ°è´¹æ›¼æ—¶ï¼Œå°±çŸ¥é“ä»–è‚¯å®šèƒ½å¾—è¯ºè´å°”å¥–ã€‚å› ä¸ºä»–ä¼šä»äº‹ä¼Ÿå¤§çš„å·¥ä½œã€‚ä¸è®ºæœªæ¥èµ°å“ªä¸ªæ–¹å‘ï¼Œè¿™ä¸ªäººéƒ½ä¼šå¹²å¤§äº‹ã€‚</p><p>ä½ è¦è·Ÿè‡ªå·±è¯´ï¼Œå¾€å‰èµ°ï¼Œå»åšå¤§äº‹ï¼</p><h3 id="äºŒã€å¹´è½»çš„æ—¶å€™å°±è¦æœ‰å‹‡æ°”è¿½æ±‚ç­”æ¡ˆ"><a href="#äºŒã€å¹´è½»çš„æ—¶å€™å°±è¦æœ‰å‹‡æ°”è¿½æ±‚ç­”æ¡ˆ" class="headerlink" title="äºŒã€å¹´è½»çš„æ—¶å€™å°±è¦æœ‰å‹‡æ°”è¿½æ±‚ç­”æ¡ˆ"></a>äºŒã€å¹´è½»çš„æ—¶å€™å°±è¦æœ‰å‹‡æ°”è¿½æ±‚ç­”æ¡ˆ</h3><p>æˆåŠŸç§‘å­¦å®¶çš„é‡è¦å“è´¨ä¹‹ä¸€å°±æ˜¯å‹‡æ°”ã€‚</p><p>ä¸€æ—¦ä½ é¼“èµ·äº†å‹‡æ°”ï¼Œç›¸ä¿¡è‡ªå·±èƒ½è§£å†³é‡è¦çš„é—®é¢˜ï¼Œé‚£ä¹ˆä½ å°±è¡Œã€‚å¦‚æœä½ è§‰å¾—ä½ ä¸è¡Œï¼Œå‡ ä¹è‚¯å®šä½ ä¸ä¼šå»åšã€‚ä¼Ÿå¤§çš„ç§‘å­¦å®¶éƒ½å……æ»¡å‹‡æ°”ï¼Œä»–ä»¬ä¸ç®¡å‘¨å›´å¢ƒå†µï¼Œå‹‡å¾€ç›´å‰ï¼›ä»–ä»¬æ€è€ƒã€æ€è€ƒã€å†æ€è€ƒã€‚</p><p>å¹´é¾„æ˜¯å¦ä¸€ä¸ªå› ç´ ã€‚ä½ è¦åšå°±å¾—è¶å¹´è½»ã€‚çˆ±å› æ–¯å¦åšäº‹å°±æ—©ï¼Œæ‰€æœ‰çš„é‡å­ç†è®ºçš„å¤§ç§‘å­¦å®¶å¼€å§‹åšä»–ä»¬çš„â€äº‹â€çš„æ—¶å€™ï¼Œéƒ½æ—©å¾—å“äººã€‚å¤§å¤šæ•°æ•°å­¦å®¶ã€ç†è®ºç‰©ç†å­¦å®¶ï¼Œä»¥åŠå¤©ä½“ç‰©ç†å­¦å®¶éƒ½åœ¨ä»–ä»¬çš„æ—©å¹´ï¼Œä½œå‡ºäº†æˆ‘ä»¬å…¬è®¤çš„ä»–ä»¬æœ€å¥½çš„æˆå°±ã€‚è¿™å¹¶ä¸æ˜¯è¯´ä»–ä»¬å²æ•°å¤§äº†ä»¥åï¼Œå°±ä¸èƒ½åšæœ‰ç›Šçš„å·¥ä½œã€‚æ˜¯æˆ‘ä»¬è®¤ä¸ºä»–ä»¬æœ€æœ‰ä»·å€¼çš„äº‹æ˜¯ä»–ä»¬å¹´è½»çš„æ—¶å€™æ‰€ä¸ºã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨éŸ³ä¹ã€æ”¿æ²»å’Œæ–‡å­¦æ–¹é¢ï¼Œé€šå¸¸çš„æƒ…å†µæ˜¯ï¼Œé‚£äº›æˆ‘ä»¬ä»°æ…•çš„å¤§ä½œå“å¾€å¾€å‡ºç‚‰è¾ƒæ™šã€‚</p><h3 id="ä¸‰ã€å¿å—ä¸ç¡®å®šçš„çŠ¶æ€"><a href="#ä¸‰ã€å¿å—ä¸ç¡®å®šçš„çŠ¶æ€" class="headerlink" title="ä¸‰ã€å¿å—ä¸ç¡®å®šçš„çŠ¶æ€"></a>ä¸‰ã€å¿å—ä¸ç¡®å®šçš„çŠ¶æ€</h3><p>ä¼Ÿå¤§ç§‘å­¦å®¶è¿˜æœ‰å¦ä¸€ä¸ªæ€§æ ¼æ–¹é¢çš„ç‰¹ç‚¹ï¼Œé‚£å°±æ˜¯â€ä¼¼æ˜¯è€Œéâ€ã€‚å¤§å¤šæ•°äººæ„¿æ„ç›¸ä¿¡ä¸–ä¸Šä¸‡ç‰©éæ­¤å³å½¼ï¼Œæ˜¯éåˆ†æ˜ã€‚å¤§ç§‘å­¦å®¶ä»¬å´èƒ½å¾ˆå¤§ç¨‹åº¦åœ°å®¹å¿â€ä¼¼æ˜¯è€Œéâ€ã€‚ä»–ä»¬å¯¹è‡ªå·±çš„æƒ³æ³•éå¸¸è‡ªä¿¡ï¼Œä½†æ˜¯åˆä¿æŒè¶³å¤Ÿçš„è­¦è§‰ï¼Œéšæ—¶æŒ‘å‡ºå…¶ä¸­çš„é”™è¯¯å’Œç‘•ç–µã€‚</p><p>å¦‚æœä½ è¿‡äºè‡ªä¿¡ï¼Œä½ å°†å¿½è§†å…¶ä¸­çš„ç ´ç»½ï¼›å¦‚æœä½ è¿‡åˆ†æ€€ç–‘ï¼Œä½ ç”šè‡³å°†æ— ä»èµ·æ­¥ã€‚è¿™éœ€è¦ä¸€ä¸ªè‰¯å¥½çš„å¹³è¡¡ã€‚å¤šæ•°å¤§ç§‘å­¦å®¶éå¸¸æ¸…æ¥šä¸ºä»€ä¹ˆä»–ä»¬çš„ç†è®ºæ˜¯çœŸçŸ¥ç¼è§ï¼ŒåŒæ—¶ä¹ŸçŸ¥é“å“ªé‡Œè¿˜æœ‰äº›å°æ¯›ç—…ã€‚</p><h3 id="å››ã€æ¯”åˆ«äººå¤šåŠªåŠ›10"><a href="#å››ã€æ¯”åˆ«äººå¤šåŠªåŠ›10" class="headerlink" title="å››ã€æ¯”åˆ«äººå¤šåŠªåŠ›10%"></a>å››ã€æ¯”åˆ«äººå¤šåŠªåŠ›10%</h3><p>å¤§å¤šæ•°ä¼Ÿå¤§çš„ç§‘å­¦å®¶éƒ½æœ‰æƒŠäººçš„åŠ¨åŠ›ã€‚ä»–ä»¬æ€»æ˜¯æ¯”åˆ«äººæŠ•å…¥æ›´å¤šã€‚å‡è®¾ä¸¤ä¸ªäººæ‹¥æœ‰å‡ ä¹ä¸€æ ·çš„èƒ½åŠ›ï¼Œå…¶ä¸­ä¸€ä¸ªäººæ¯”å¦ä¸€ä¸ªäººå¤šå¹²10%ï¼Œå‡ å¹´åä»–å°†å¤šäº§ä¸€å€ã€‚</p><p>ä½ çŸ¥é“å¾—è¶Šå¤šï¼Œå°±å­¦å¾—è¶Šå¤šï¼›ä½ å­¦å¾—è¶Šå¤šï¼Œå°±åšå¾—è¶Šå¤šï¼›ä½ åšå¾—è¶Šå¤šï¼Œæœºä¼šå°±è¶Šå¤šã€‚</p><h3 id="äº”ã€å…¨åŠ›æŠ•å…¥é‡è¦çš„é—®é¢˜"><a href="#äº”ã€å…¨åŠ›æŠ•å…¥é‡è¦çš„é—®é¢˜" class="headerlink" title="äº”ã€å…¨åŠ›æŠ•å…¥é‡è¦çš„é—®é¢˜"></a>äº”ã€å…¨åŠ›æŠ•å…¥é‡è¦çš„é—®é¢˜</h3><p>å¦‚æœä½ æ‰¾åˆ°ä¸€ä»¶çœŸæ­£é‡è¦çš„äº‹æƒ…ï¼Œå°±ä¸è¦è®©ä»»ä½•åˆ«çš„äº‹æƒ…åˆ†æ•£ä½ çš„æ³¨æ„åŠ›ã€‚</p><p>å¤šæ•°å¤§ç§‘å­¦å®¶å£è¢‹é‡Œçº¦æœ‰ä¸€äºŒåä¸ªå¤§é—®é¢˜ï¼Œæƒ³æ–¹è®¾æ³•å»æ”»å…‹ã€‚æ¯å½“ä»–ä»¬å‘ç°ä¸€ä¸ªæ–°æƒ³æ³•å‡ºç°çš„æ—¶å€™ï¼Œä½ å°±ä¼šå¬åˆ°ä»–ä»¬è¯´ï¼šâ€å””ï¼Œè¿™ä¸ªä¸è¯¥é—®é¢˜æœ‰å…³ã€‚â€ ä»–ä»¬äºæ˜¯æŠ›å¼€å…¶ä»–ä¸€åˆ‡ï¼Œå…¨åŠ›æŠ•å…¥æ­¤é—®é¢˜ã€‚</p><p>ä»–ä»¬çš„æ€æƒ³æ˜¯æ—¶åˆ»å‡†å¤‡ç€çš„ï¼Œçœ‹è§æœºä¼šå°±ç´§è·Ÿå…¶åã€‚å½“ç„¶ï¼Œå¾ˆå¤šæ—¶å€™ä¹Ÿä¸èƒ½å¥æ•ˆï¼Œä¸€ä¸ªä¸»è¦çš„è¯€çªå°±æ˜¯æ´»å¾—é•¿ä¸€ç‚¹ã€‚</p><h3 id="å…­ã€æ•å¼€åŠå…¬å®¤å¤§é—¨"><a href="#å…­ã€æ•å¼€åŠå…¬å®¤å¤§é—¨" class="headerlink" title="å…­ã€æ•å¼€åŠå…¬å®¤å¤§é—¨"></a>å…­ã€æ•å¼€åŠå…¬å®¤å¤§é—¨</h3><p>å¦ä¸€ä¸ªæ€§æ ¼ç‰¹ç‚¹ï¼Œæˆ‘ä¸€å¼€å§‹æ²¡æ³¨æ„åˆ°ï¼šæœ‰äººçš„åŠå…¬å®¤å¤§é—¨æ˜¯å…³ç€çš„ï¼Œå¦ä¸€äº›äººæ˜¯å¼€ç€çš„ã€‚</p><p>æˆ‘è§‚å¯Ÿåˆ°ï¼Œå¦‚æœå…³ä¸ŠåŠå…¬å®¤çš„é—¨ï¼Œä½ ä»Šå¤©æˆ–æ˜å¤©ç¡®å®ä¼šæ¯”åˆ«äººå¤šå¹²ä¸å°‘çš„æ´»ã€‚ä½†æ˜¯ï¼Œåå¹´åå°±æœªå¿…äº†ã€‚å› ä¸ºä½ å¯èƒ½å¹²äº†ä¸å°‘ä¸å€¼å¾—å¹²çš„äº‹ã€‚é‚£äº›æŠŠé—¨æ•å¼€çš„äººï¼Œçš„ç¡®å—äº†å¾ˆå¤šçš„æ‰“æ‰°ï¼Œä½†ä»–ä¹Ÿä¸æ—¶åœ°è·å¾—çº¿ç´¢ï¼Œäº†è§£è¿™ä¸–ç•Œä»€ä¹ˆæ›´é‡è¦ã€‚</p><p>æˆ‘å¯ä»¥è¯´ï¼Œé‚£äº›æ•å¼€äº†é—¨å¹²æ´»çš„äººå’Œæœ€ç»ˆæˆå°±äº†å¤§äº‹çš„äººä¹‹é—´ï¼Œå­˜åœ¨åƒä¸ä¸‡ç¼•çš„è”ç³»ã€‚</p><h3 id="ä¸ƒã€åšå¯ä»¥æˆä¸ºä»–äººåŸºçŸ³çš„å·¥ä½œ"><a href="#ä¸ƒã€åšå¯ä»¥æˆä¸ºä»–äººåŸºçŸ³çš„å·¥ä½œ" class="headerlink" title="ä¸ƒã€åšå¯ä»¥æˆä¸ºä»–äººåŸºçŸ³çš„å·¥ä½œ"></a>ä¸ƒã€åšå¯ä»¥æˆä¸ºä»–äººåŸºçŸ³çš„å·¥ä½œ</h3><p>æ—©å¹´ï¼Œæˆ‘åœ¨æ”»å…‹ä¸€ä¸ªåˆä¸€ä¸ªéš¾é¢˜ï¼ŒæˆåŠŸçš„å¤šï¼Œå¤±è´¥çš„å°‘ã€‚å¯æ˜¯ï¼Œå‘¨äº”è§£å†³äº†ä¸€ä¸ªé—®é¢˜å›åˆ°å®¶é‡Œåï¼Œæˆ‘å´å¹¶ä¸å¿«æ´»ï¼Œåè€Œå¾ˆæ²®ä¸§ã€‚æˆ‘çœ‹åˆ°ç”Ÿæ´»å°±æ˜¯ä¸€ä¸ªé—®é¢˜æ¥ç€ä¸€ä¸ªé—®é¢˜åˆæ¥ç€å¦ä¸€ä¸ªé—®é¢˜ã€‚</p><p>æƒ³äº†ç›¸å½“é•¿ä¸€é˜µå­åï¼Œæˆ‘å†³å®šä»¥å¦ä¸€ç§æ–¹å¼å¹²æ´»ï¼šä½ çš„å·¥ä½œè¦æˆä¸ºåˆ«äººå·¥ä½œçš„åŸºçŸ³ï¼äºæ˜¯åˆ«äººå°±ä¼šè¯´ï¼š â€œçœ‹å“ªï¼Œæˆ‘ç«™åœ¨ä»–çš„è‚©è†€ä¹‹ä¸Šï¼Œæˆ‘çœ‹å¾—æ›´è¿œäº†ã€‚â€</p><p>ç§‘å­¦çš„æœ¬è´¨æ˜¯ç§¯ç´¯ï¼æˆ‘å†ä¹Ÿä¸å»åšç›¸äº’å­¤ç«‹çš„é—®é¢˜ï¼Œé™¤éå®ƒèƒ½ä»£è¡¨æŸä¸€ç±»é—®é¢˜çš„å…±æ€§ã€‚æˆ‘å†³ä¸å†å»è§£å†³å•ä¸€çš„é—®é¢˜ã€‚</p><p>ä½ è¦ä¹ˆè®©äººä»¬åœ¨ä½ çš„æˆæœä¸Šæœ‰æ‰€å»ºæ ‘ï¼Œè¦ä¹ˆåˆ«äººä¸å¾—ä¸æŠŠä½ å¹²çš„æ´»ä»å¤´å†æ¥å¤åˆ¶ä¸€éã€‚</p><h3 id="å…«ã€é‡è§†æ¨é”€å’Œè¡¨è¾¾è‡ªå·±"><a href="#å…«ã€é‡è§†æ¨é”€å’Œè¡¨è¾¾è‡ªå·±" class="headerlink" title="å…«ã€é‡è§†æ¨é”€å’Œè¡¨è¾¾è‡ªå·±"></a>å…«ã€é‡è§†æ¨é”€å’Œè¡¨è¾¾è‡ªå·±</h3><p>åšå®Œä¸€ä»¶äº‹æƒ…è¿˜ä¸å¤Ÿï¼Œä½ è¿˜å¾—æŠŠå®ƒâ€è´©å–â€å‡ºå»ã€‚</p><p>å¯¹äºä¸€ä¸ªç§‘å­¦å®¶è€Œè¨€ï¼Œæ¨é”€æ˜¯ä¸€ä»¶æ£˜æ‰‹çš„äº‹ã€‚è¿™å¾ˆè®¨åŒï¼Œä½ æœ¬ä¸è¯¥åšè¿™äº‹ï¼Œè¿™ä¸–ç•Œå°±è¯¥ç­‰ç€ï¼Œå½“ä½ åšæˆæŸä»¶å¤§äº‹æ—¶ï¼Œä»–ä»¬å°±è¯¥èµ¶å¿«å‡ºæ¥ä¸»åŠ¨è¿æ¥ã€‚ä½†æ˜¯ï¼Œäº‹ä¸æ„¿è¿ï¼Œæ¯ä¸ªäººéƒ½å¿™ç€ä»–ä»¬è‡ªå·±çš„æ´»ã€‚ä½ å¿…é¡»å¾ˆå¥½åœ°ä¸»åŠ¨ä»‹ç»ï¼Œä½¿å¾—ä»–ä»¬èƒ½æŠŠæ‰‹å¤´çš„æ´»æ”¾åœ¨ä¸€è¾¹ï¼Œè¿‡æ¥ç§ç§ä½ çš„ä¸œè¥¿ï¼Œç†è§£å®ƒï¼Œç„¶åå›è¿‡å¤´æ¥è¯´ï¼šâ€æ˜¯ï¼Œé‚£ç©æ„ä¸é”™ã€‚â€ ç°å®æ˜¯å³ä½¿ä½ å‘è¡¨äº†ç ”ç©¶æˆæœï¼Œå¦‚æœè¯»è€…ä»¬æŠŠä½ çš„æ–‡ç« ç¿»è¿‡å»ï¼Œä¸åœä¸‹æ¥è¯»å®ƒï¼Œä½ å°±ä¼šç«¹ç¯®æ‰“æ°´ä¸€åœºç©ºã€‚</p><p>ä½ å¾—å­¦ä¼šå†™å¥½ã€å†™æ¸…æ¥šä»¥ä¾¿äººä»¬æ„¿æ„çœ‹ï¼›ä½ å¿…é¡»å­¦ä¼šå‘è¡¨ç›¸å½“æ­£å¼çš„å‘è¨€ï¼›ä½ è¿˜å¿…é¡»å­¦ä¼šä½œå‡ºéæ­£å¼çš„è°ˆè¯ã€‚æˆ‘ä»¬æœ‰ä¸å°‘æ‰€è°“çš„â€åæ’ç§‘å­¦å®¶â€ã€‚åœ¨ä¸€ä¸ªä¼šè®®ä¸Šï¼Œä»–ä»¬æ›´æ„¿æ„é—­å£ä¸è°ˆã€‚ä»–ä»¬ä¸æ„¿ç«™åœ¨ä¸€ä¸ªç‚™æ‰‹å¯çƒ­çš„ä¼šè®®çš„ä¸­å¤®ï¼Œåœ¨å¤§åº­å¹¿ä¼—ä¹‹ä¸‹è¯´ï¼šâ€æˆ‘ä»¬åº”è¯¥åšè¿™ä»¶äº‹ï¼Œä¸ºäº†è¿™äº›åŸå› â€¦â€¦â€ ä½ å¿…é¡»æŒæ¡è¿™ç§å½¢å¼çš„äº¤æµï¼Œå‡†å¤‡å‘è¡¨æ¼”è¯´ã€‚</p><p>æˆ‘åˆšå¼€å§‹åšæ¼”è®²çš„æ—¶å€™ï¼Œéå¸¸éå¸¸ç´§å¼ ï¼Œå‡ ä¹è¡¨ç°å‡ºç”Ÿç†ä¸Šçš„ç—…æ€ã€‚æˆ‘æ„è¯†åˆ°ï¼Œæˆ‘å¾—å­¦ä¹ ä½œæ¼”è®²ï¼Œå¦åˆ™æ•´ä¸ªèŒä¸šç”Ÿæ¶¯å°±ä¸ä¼šæœ‰å¾ˆå¥½çš„å‘å±•ã€‚æˆ‘å†³å®šä¸€å®šè¦åšä¸€ä¸ªéå¸¸å¥½çš„æ¼”è®²ï¼Œä¸€ä¸ªçœŸæ­£ç¬¦åˆå¬ä¼—éœ€è¦çš„æ¼”è®²ï¼Œä¸åªé’ˆå¯¹ä¸“ä¸šäººå£«ï¼Œè€Œæ˜¯é’ˆå¯¹æ›´å¹¿æ³›çš„å¬ä¼—ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘è®¤ä¸ºï¼Œç ”ç©¶è¦åªèŠ±50%çš„æ—¶é—´ï¼Œå¦å¤–50%çš„æ—¶é—´ç”¨æ¥è¡¨è¾¾ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„æ•°å­—ã€‚</p><h3 id="ä¹ã€é˜…è¯»æ–¹æ³•æ¯”æ•°é‡æ›´é‡è¦"><a href="#ä¹ã€é˜…è¯»æ–¹æ³•æ¯”æ•°é‡æ›´é‡è¦" class="headerlink" title="ä¹ã€é˜…è¯»æ–¹æ³•æ¯”æ•°é‡æ›´é‡è¦"></a>ä¹ã€é˜…è¯»æ–¹æ³•æ¯”æ•°é‡æ›´é‡è¦</h3><p>ä½ ä¹Ÿä¸è¦åœ¨å›¾ä¹¦é¦†èŠ±å¤ªå¤šæ—¶é—´ï¼Œä¸€å‘³è¿½éšåˆ«äººçš„ç ”ç©¶æˆæœã€‚</p><p>è´å°”å®éªŒå®¤æœ‰ä¸ªåŒäº‹ï¼Œä¸€ä¸ªéå¸¸éå¸¸èªæ˜çš„å®¶ä¼™ã€‚ä»–è€åœ¨å›¾ä¹¦é¦†é‡Œå‘†ç€ï¼Œè¯»æ‰€æœ‰çš„ä¸œè¥¿ã€‚å¦‚æœä½ æƒ³è¦å‚è€ƒèµ„æ–™ï¼Œä½ åˆ°ä»–é‚£é‡Œå»ï¼Œä»–å°±ä¼šå‘Šè¯‰ä½ æ‰€æœ‰çš„å‚è€ƒèµ„æ–™ã€‚ä½†æˆ‘è§‰å¾—ï¼Œé•¿æ­¤ä»¥å¾€ï¼Œä»–ä¸ä¼šæœ‰ä»»ä½•ä»¥ä»–å‘½åçš„æˆæœã€‚ä»–ç°åœ¨å·²é€€ä¼‘ï¼Œæˆä¸ºäº†ä¸€ä¸ªå‰¯æ•™æˆã€‚ä»–æ˜¯å¾ˆæœ‰ä»·å€¼ï¼Œæˆ‘å¯¹æ­¤æ²¡æœ‰ç–‘é—®ã€‚ä»–å†™äº†ä¸€äº›ä¸é”™çš„æ–‡ç« ç™»åœ¨ã€Šç‰©ç†è¯„è®ºã€‹ä¸Šï¼Œä½†ä»–æ²¡æœ‰ä»¥ä»–å‘½åçš„æˆæœï¼Œå› ä¸ºä»–è¯»å¾—å¤ªå¤šã€‚å¦‚æœä½ æˆå¤©ç ”ç©¶åˆ«äººæ€ä¹ˆåšï¼Œä½ å°±ä¼šæŒ‰åˆ«äººçš„è€è·¯å­æ€è€ƒã€‚</p><p>å¦‚æœä½ æƒ³è¦æœ‰ä¸åŒçš„æ–°æ€ç»´ï¼Œä½ éœ€è¦å»ææ¸…é—®é¢˜ï¼Œè€Œä¸æ˜¯æˆå¤©é è¯»ä¹¦å»æ‰¾ç­”æ¡ˆã€‚è¿™ä¸æ˜¯å¯å–çš„æ–¹æ³•ã€‚</p><p>æˆ‘çš„å»ºè®®æ˜¯ï¼šé˜…è¯»ï¼Œä½†ä¸æ˜¯é é‡ï¼Œè€Œæ˜¯é æ­£ç¡®çš„é˜…è¯»æ–¹æ³•èµ·ä½œç”¨ã€‚</p><h3 id="åã€é‡è§†å†™ä¹¦"><a href="#åã€é‡è§†å†™ä¹¦" class="headerlink" title="åã€é‡è§†å†™ä¹¦"></a>åã€é‡è§†å†™ä¹¦</h3><p>çŸ­æœŸæ¥çœ‹ï¼Œè®ºæ–‡éå¸¸é‡è¦ã€‚ä½†å¦‚æœä½ æƒ³è¦ä¸€ä¸ªé•¿æœŸçš„è®¤å¯ï¼Œå†™ä¹¦çš„ä½œç”¨æ›´å¤§ï¼Œå› ä¸ºæˆ‘ä»¬å¤§å¤šæ•°äººéœ€è¦æ–¹å‘ã€‚ç°ä»Šçš„çŸ¥è¯†å‡ ä¹æ˜¯æ— ç©·çš„ï¼Œæˆ‘ä»¬éœ€è¦å¯»æ‰¾è‡ªå·±çš„æ–¹å‘ã€‚é‚£äº›å¸®åŠ©æˆ‘ä»¬èä¼šè´¯é€šçš„ã€ä»£è¡¨é‡è¦æ€æƒ³çš„ä¹¦ï¼Œä¼šè¢«åä»£çè§†ã€‚</p><p>å†™è®ºæ–‡ä¹Ÿæ˜¯å¿…è¦çš„ï¼Œä½†æˆ‘å€¾å‘äºè®¤ä¸ºï¼Œé•¿æœŸçœ‹ï¼Œé‚£äº›åªå†™è‡³å…³é‡è¦å†…å®¹çš„ä¹¦æ›´é‡è¦ã€‚</p><h3 id="åä¸€ã€è¿œè§è¶…å‡ºä½ çš„èƒ½åŠ›æ—¶ï¼Œæ‰å»åšç®¡ç†"><a href="#åä¸€ã€è¿œè§è¶…å‡ºä½ çš„èƒ½åŠ›æ—¶ï¼Œæ‰å»åšç®¡ç†" class="headerlink" title="åä¸€ã€è¿œè§è¶…å‡ºä½ çš„èƒ½åŠ›æ—¶ï¼Œæ‰å»åšç®¡ç†"></a>åä¸€ã€è¿œè§è¶…å‡ºä½ çš„èƒ½åŠ›æ—¶ï¼Œæ‰å»åšç®¡ç†</h3><p>å¦‚æœä½ æƒ³æˆä¸ºä¸€åä¼Ÿå¤§çš„ç ”ç©¶è€…ï¼Œå°±ä¸è¦æˆä¸ºä¸€ä¸ªå…¬å¸çš„æ€»è£ã€‚ä½ å¾—æ¸…æ¥šä½ è¦ä»€ä¹ˆã€‚</p><p>ä¸€å¤©ï¼Œæˆ‘åˆ°æˆ‘çš„è€æ¿Bodeé‚£é‡Œï¼Œå¯¹ä»–è¯´ï¼šâ€ä¸ºä»€ä¹ˆä½ è¦å½“è¿™ä¸ªéƒ¨é—¨çš„å¤´å‘¢ï¼Ÿä¸ºä»€ä¹ˆä½ ä¸å»å½“ä¸€åå¤§ç§‘å­¦å®¶å‘¢ï¼Ÿâ€ ä»–è¯´ï¼šâ€Hammingï¼Œ æˆ‘æœ‰è¿œè§ï¼ŒçŸ¥é“è´å°”å®éªŒå®¤çš„æ•°å­¦éƒ¨åˆ†è¦æ€æ ·ï¼Œå¦‚æœè¦è®©è¿™ä¸ªâ€è¿œè§â€å¾—åˆ°å…±è¯†ï¼Œæˆ‘å°±å¾—å½“ä¸Šéƒ¨é—¨çš„å¤´ã€‚â€</p><p>å½“ä½ è§‰å¾—ä½ æƒ³å¹²ä»€ä¹ˆçš„è¿œè§ï¼Œæ­£å¥½åœ¨ä½ çš„èƒ½åŠ›èŒƒå›´å†…ï¼Œä½ å°±åº”åŠªåŠ›è·å–å®ƒã€‚å¦‚æœæœ‰ä¸€å¤©ä½ çš„è¿œè§å¤§å¤§è¶…è¿‡äº†ä½ çš„èƒ½åŠ›æ—¶ï¼Œä½ å°±åº”è¯¥å»åšç®¡ç†å·¥ä½œã€‚è€Œä¸”ï¼Œè¿œè§è¶Šå¤§ï¼Œä½ å°±åº”åšè¶Šå¤§çš„ç®¡ç†ã€‚å¦‚æœä½ æ‹¥æœ‰ä¸€ä¸ªå…³äºæ•´ä¸ªå®éªŒå®¤åº”è¯¥å‘ä½•å¤„å»ï¼Œæˆ–è€…æœ‰å…³æ•´ä¸ªè´å°”ç³»ç»Ÿï¼Œä½ å°±å¾—åˆ°è¯¥å»çš„ä½å­è®©å®ƒå®ç°ã€‚ä½ ä»åº•å±‚æ˜¯æ— æ³•è½»æ˜“è®©å®ƒå®ç°çš„ã€‚</p><p>è¿™å–å†³äºä½ çš„ç›®æ ‡å’Œå¯¹ç›®æ ‡çš„æ¸´æœ›ã€‚æˆ‘é€‰æ‹©å›é¿ç®¡ç†å·¥ä½œå› ä¸ºæˆ‘æ›´å¸Œæœ›åšæˆ‘å®¹æ˜“åº”ä»˜çš„äº‹ã€‚ä½†è¿™æ˜¯æˆ‘çš„é€‰æ‹©ï¼Œåªå¯¹æˆ‘èµ·ä½œç”¨ã€‚æ¯ä¸ªäººæœ‰æƒåšå‡ºè‡ªå·±çš„é€‰æ‹©ï¼Œä¿æŒä¸€ä¸ªå¼€æ”¾çš„å¿ƒæ€ã€‚ä½†åˆ«è¯•ç€ä¸¤æ ·éƒ½å ã€‚</p><p>ï¼ˆå®Œï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç»éªŒåˆ†äº« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NeRFå­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰ï¼šç¥ç»éšå¼SLAMæ–¹æ³•</title>
      <link href="2022/08/28/nerf-notes-5/"/>
      <url>2022/08/28/nerf-notes-5/</url>
      
        <content type="html"><![CDATA[<h1 id="NeRFå­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰ï¼šç¥ç»éšå¼SLAMæ–¹æ³•"><a href="#NeRFå­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰ï¼šç¥ç»éšå¼SLAMæ–¹æ³•" class="headerlink" title="NeRFå­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰ï¼šç¥ç»éšå¼SLAMæ–¹æ³•"></a>NeRFå­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰ï¼šç¥ç»éšå¼SLAMæ–¹æ³•</h1><h2 id="iMAP-Implicit-Mapping-and-Positioning-in-Real-Time"><a href="#iMAP-Implicit-Mapping-and-Positioning-in-Real-Time" class="headerlink" title="iMAP: Implicit Mapping and Positioning in Real-Time"></a>iMAP: Implicit Mapping and Positioning in Real-Time</h2><h3 id="Motivation"><a href="#Motivation" class="headerlink" title="Motivation"></a>Motivation</h3><p>A multilayer perceptron (MLP) can serve as the only scene representation in a real-time SLAM system for a handheld RGB-D camera.</p><h3 id="Novelty"><a href="#Novelty" class="headerlink" title="Novelty"></a>Novelty</h3><img src="/images/nerf-notes-5/image-20220828142210542.png" style="zoom: 80%;"><h3 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h3><h4 id="System-Overview"><a href="#System-Overview" class="headerlink" title="System Overview"></a>System Overview</h4><p><img src="/images/nerf-notes-5/image-20220828143520145.png"></p><h4 id="Implicit-Scene-Neural-Network"><a href="#Implicit-Scene-Neural-Network" class="headerlink" title="Implicit Scene Neural Network"></a>Implicit Scene Neural Network</h4><p><img src="/images/nerf-notes-5/image-20220828143947957.png"></p><h4 id="Depth-and-Colour-Rendering"><a href="#Depth-and-Colour-Rendering" class="headerlink" title="Depth and Colour Rendering"></a>Depth and Colour Rendering</h4><p><img src="/images/nerf-notes-5/image-20220828144007758.png"></p><h4 id="Joint-optimization-Camera-Tracking"><a href="#Joint-optimization-Camera-Tracking" class="headerlink" title="Joint optimization/Camera Tracking"></a>Joint optimization/Camera Tracking</h4><p><img src="/images/nerf-notes-5/image-20220828144052400.png"></p><h4 id="Keyframe-Selection"><a href="#Keyframe-Selection" class="headerlink" title="Keyframe Selection"></a>Keyframe Selection</h4><p><img src="/images/nerf-notes-5/image-20220828144322859.png"></p><p><img src="/images/nerf-notes-5/image-20220828144339666.png"></p><p>å¤§è‡´çš„æµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>å‡è®¾æœ‰ä¸€ä¸ªkeyframeå·²ç»åŠ å…¥äº†ï¼Œæ­¤æ—¶å¤åˆ¶ç½‘ç»œçš„å‚æ•°ï¼Œä½œä¸ºå½“å‰åœ°å›¾çš„snapshotï¼ˆå°±æ˜¯æ–°å¢keyframeå°±æ›´æ–°å½“å‰åœ°å›¾çš„snapshotï¼‰ï¼›</li><li>ç„¶åæ¯æ¬¡æ–°å¾—åˆ°ä¸€å¸§å›¾åƒï¼Œå°±ä»å½“å‰çš„snapshotæ¸²æŸ“ä¸€å¼ depthå›¾ï¼ˆè¿™é‡Œä¸éœ€è¦æ˜¯æ¸²æŸ“æ•´å¼ å›¾ï¼Œå¯ä»¥æ˜¯æ¸²æŸ“ä¸€éƒ¨åˆ†ï¼Œå¾—åˆ°ä¸€ä¸ªç»Ÿè®¡è§„å¾‹ï¼‰ï¼›</li><li>æ ¹æ®æ¸²æŸ“çš„pixel samplesï¼Œå’Œground truthçš„pixelç›¸å‡ï¼Œè§‚å¯Ÿæ–°è§‚å¯Ÿåˆ°çš„ä¸€å¸§ï¼Œæœ‰ç™¾åˆ†ä¹‹å¤šå°‘çš„åŒºåŸŸæ˜¯å·²ç»è¢«ä¹‹å‰lockçš„networkè¡¨è¾¾äº†ï¼›</li><li>å¦‚æœè¿™ä¸ªåŒºåŸŸå¹¶ä¸æ˜¯å¾ˆå¤šï¼Œè¯´æ˜è¿™ä¸€å¸§æœ‰å¾ˆå¤šæ–°çš„åœ°æ–¹ï¼Œå°±åº”è¯¥åŠ å…¥åˆ°keyframe listä¸­ã€‚</li></ul><h4 id="Active-Sampling"><a href="#Active-Sampling" class="headerlink" title="Active Sampling"></a>Active Sampling</h4><p><img src="/images/nerf-notes-5/image-20220828145010688.png"></p><p>è¿™é‡Œçš„æ“ä½œæ˜¯ï¼š</p><ul><li>æŠŠä¸€å¼ å›¾åˆ†æˆå¾ˆå¤šçš„binï¼ˆç®±å­ï¼‰ï¼Œç„¶åå‡åŒ€çš„é‡‡æ ·å¹¶ä¸”æ¸²æŸ“å‡ºæ¥ï¼Œè§‚å¯Ÿlossçš„åˆ†å¸ƒæ˜¯ä»€ä¹ˆæ ·çš„ã€‚</li><li>ä¹‹åæˆ‘ä»¬æ ¹æ®lossçš„åˆ†å¸ƒæ¥åˆ†é…pixelçš„æ•°é‡ã€‚å¦‚æœæœ‰çš„åœ°æ–¹lossç›¸å¯¹è¾ƒå¤§ï¼Œé‚£è¿™äº›åŒºåŸŸå°±åº”è¯¥æ›´å¤šçš„ä¼˜åŒ–ï¼Œå¯ä»¥å¤šsampleä¸€äº›pixelã€‚ï¼ˆä»ä¸Šå›¾å°±èƒ½çœ‹å‡ºæ¥ï¼Œlosså¤§çš„åœ°æ–¹ï¼Œå³è¾¹å°çº¢ç‚¹ä¹Ÿè¦å¤šä¸€äº›ï¼‰</li></ul><p><img src="/images/nerf-notes-5/image-20220828145023433.png"></p><p>è¿™é‡Œçš„æ“ä½œæ˜¯ï¼š</p><ul><li>æ¯æ¬¡mappingçš„æ—¶å€™åªé€‰å¸¸æ•°ä¸ªkeyframeï¼Œæ¯”å¦‚åªé€‰5ä¸ªkeyframeåŠ å…¥åˆ°mappingä¸­ã€‚</li><li>å¯ä»¥è®¾è®¡æ›´å¥½çš„æœºåˆ¶è¿›è¡Œkeyframeçš„é€‰æ‹©ï¼Œæ¯”å¦‚å¯¹æ¯ä¸ªkeyframeéƒ½è¿›è¡Œä¸€ä¸‹æ¸²æŸ“ï¼Œç„¶åçœ‹çœ‹lossçš„åˆ†å¸ƒæ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚å¦‚æœæœ‰çš„keyframeçš„lossæ¯”è¾ƒå¤§ï¼Œå°±åº”è¯¥åŠ å…¥åˆ°mappingä¸­ï¼Œlossæ¯”è¾ƒå¤§å°±è¯´æ˜ç½‘ç»œå·²ç»å¿˜æ‰ä¹‹å‰å­¦ä¹ çš„keyframeäº†ï¼Œæˆ‘ä»¬åº”å½“è®©è¿™äº›keyframeå‚ä¸mappingæ¥åŠ å¼ºç½‘ç»œçš„è®°å¿†ã€‚</li></ul><h3 id="Experiments"><a href="#Experiments" class="headerlink" title="Experiments"></a>Experiments</h3><h4 id="Scene-Reconstruction-Evaluation"><a href="#Scene-Reconstruction-Evaluation" class="headerlink" title="Scene Reconstruction Evaluation"></a>Scene Reconstruction Evaluation</h4><p><img src="/images/nerf-notes-5/image-20220828151136832.png"></p><p><img src="/images/nerf-notes-5/image-20220828152057866.png"></p><p><img src="/images/nerf-notes-5/image-20220828152155886.png"></p><img src="/images/nerf-notes-5/image-20220828152114392.png" style="zoom:80%;"><p>è¿™é‡Œåšå®éªŒçš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„TSDF Fusionåªæ˜¯ä¸€ä¸ªmappingçš„æ–¹æ³•ï¼Œå¿…é¡»ç»™ä»–ä¸€ä¸ªç›¸æœºä½ç½®ï¼Œè€Œå¦‚æœç»™ground truthè‚¯å®šä¸å…¬å¹³ï¼Œæ‰€ä»¥ç»™äº†iMAPçš„ç›¸æœºä½ç½®ã€‚</p><p>ä¸Šé¢çš„è¡¨æ ¼ä¸­ï¼ŒåŠ ç²—çš„æ•°æ®æ˜¯æœ€å¥½çš„ï¼Œå¯ä»¥å‘ç°TSDF Fusionçš„è¯¯å·®ï¼ˆAcc.ï¼‰æœ€ä½ï¼Œè€ŒiMAPçš„Completionå’ŒCompletion Rationaléƒ½æ˜¯æœ€é«˜çš„ã€‚</p><p>åˆ†æï¼š</p><p>å¯¹äºTSDF Fusionï¼Œå®ƒç¡®ä¿¡çš„åœ°æ–¹æ‰ä¼šå»ºå›¾ï¼Œä¸ç¡®å®šçš„åœ°æ–¹ä¸ä¼šå»ºå›¾ï¼Œæ‰€ä»¥Accuracyä¼šé«˜ä¸€äº›ï¼ˆAccuracyæŒ‡çš„æ˜¯é‡å»ºçš„ç»“æœåˆ°ground truthçš„è·ç¦»ï¼‰ï¼Œä¹Ÿæ˜¯å› ä¸ºè¿™ä¸ªï¼Œä»–çš„completionä¼šä½ä¸€äº›ã€‚</p><h4 id="TUM-Evaluation"><a href="#TUM-Evaluation" class="headerlink" title="TUM Evaluation"></a>TUM Evaluation</h4><img src="/images/nerf-notes-5/image-20220828152303765.png" style="zoom:80%;"><p>è¿™é‡ŒæŠŠiMAPå’Œå¦å¤–ä¸‰ç§ä¼ ç»Ÿæ–¹æ³•ä½œäº†æ¯”è¾ƒï¼Œè¡¨ä¸­çš„æ•°æ®æ˜¯è¯¯å·®ã€‚å¯ä»¥çœ‹åˆ°iMAPçš„è¯¯å·®æ¯”è¾ƒå¤§ï¼Œä½†æ˜¯è¿˜æ˜¯è¯´æ˜iMAPèƒ½å¤Ÿåœ¨TUMè¿™æ ·æ¯”è¾ƒå¤æ‚çš„æ•°æ®é›†ä¸Šé¢è·‘é€šã€‚</p><p><img src="/images/nerf-notes-5/image-20220828152436760.png"></p><p>ç±»ä¼¼äºä¹‹å‰çš„æ¯”è¾ƒï¼ŒiMAPèƒ½å¤Ÿå¡«è¡¥ä¸€äº›æ²¡æœ‰çœ‹åˆ°çš„åœ°æ–¹ã€‚</p><h4 id="Ablative-Analysis"><a href="#Ablative-Analysis" class="headerlink" title="Ablative Analysis"></a>Ablative Analysis</h4><p><img src="/images/nerf-notes-5/image-20220828152530019.png"></p><p>è¿™é‡Œæ¯”è¾ƒäº†æœ‰æ— Active Samplingçš„åŒºåˆ«ã€‚Acc.æ˜¯è¯¯å·®ï¼Œè¶Šä½è¶Šå¥½ï¼Œè€ŒComp. Ratioæ˜¯è¶Šé«˜è¶Šå¥½ï¼Œå¯ä»¥çœ‹åˆ°Active Sampleæ˜¯èƒ½å¤Ÿèµ·åˆ°æ¯”è¾ƒå¥½çš„æ•ˆæœã€‚</p><p><img src="/images/nerf-notes-5/image-20220828153107325.png"></p><p>iMAPè¿™ä¸ªå·¥ä½œè¿˜å‘ç°ï¼Œç½‘ç»œèƒ½å¤Ÿå¾ˆå¿«çš„æŠŠä½é¢‘çš„ä¿¡å·æ”¶æ•›çš„æ¯”è¾ƒå¥½ï¼Œè€Œé«˜é¢‘çš„ç»†èŠ‚éœ€è¦æ…¢æ…¢çš„åŠ å…¥ã€‚</p><p>ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼Œç½‘ç»œå¯ä»¥å¾ˆå¿«åœ°æŠŠDepth Erroré™åˆ°æ¯”è¾ƒå°ï¼Œä½†å¦‚æœè¦ç»§ç»­çš„é™ä½è¯¯å·®å°±æ¯”è¾ƒéš¾äº†ã€‚</p><p><img src="/images/nerf-notes-5/image-20220828153259485.png"></p><p>è¿™é‡Œå±•ç¤ºäº†ç½‘ç»œé‡å»ºçš„è¿‡ç¨‹ï¼Œå’Œä¸Šé¢çš„å›¾æ˜¯å¯¹åº”çš„ã€‚å¯ä»¥çœ‹åˆ°ç½‘ç»œèƒ½å¤Ÿå¾ˆå¿«æŠŠå¤§è‡´çš„æ ·å­é‡å»ºå‡ºæ¥ï¼Œç„¶åå†æ…¢æ…¢çš„åŠ ç»†èŠ‚ï¼Œæ¯”å¦‚ä¹¦æŸœä¸Šé¢ã€å¢™ä¸Šé¢çš„ä¸€äº›ç»†èŠ‚ã€‚</p><h2 id="NICE-SLAM-Neural-Implicit-Scalable-Encoding-for-SLAM"><a href="#NICE-SLAM-Neural-Implicit-Scalable-Encoding-for-SLAM" class="headerlink" title="NICE-SLAM: Neural Implicit Scalable Encoding for SLAM"></a>NICE-SLAM: Neural Implicit Scalable Encoding for SLAM</h2><p>NICE-SLAMå¯ä»¥åœ¨<strong>å¤§è§„æ¨¡çš„å®¤å†…åœºæ™¯</strong>ä¸­ç”Ÿæˆå¯†é›†çš„å‡ ä½•ä¸å‡†ç¡®çš„ç›¸æœºè·Ÿè¸ªã€‚</p><h3 id="Neural-Implicit-Representations"><a href="#Neural-Implicit-Representations" class="headerlink" title="Neural Implicit Representations"></a>Neural Implicit Representations</h3><p><img src="/images/nerf-notes-5/image-20220828154646170.png"></p><p>ç¥ç»éšå¼è¡¨è¾¾å¯ä»¥æ•è·é«˜ä¿çœŸçš„å‡ ä½•</p><p><img src="/images/nerf-notes-5/image-20220828160226134.png"></p><p>ä¹Ÿå¯ä»¥æ¸²æŸ“å¾ˆé«˜æ¸…æ™°åº¦çš„å›¾ç‰‡</p><p><img src="/images/nerf-notes-5/image-20220828160257679.png"></p><h3 id="iMAP-vs-NICE-SLAM"><a href="#iMAP-vs-NICE-SLAM" class="headerlink" title="iMAP vs NICE-SLAM"></a>iMAP vs NICE-SLAM</h3><p><img src="/images/nerf-notes-5/image-20220828160931068.png"></p><p><img src="/images/nerf-notes-5/image-20220828160941848.png"></p><p>iMAPæ˜¯é€šè¿‡æŒç»­å­¦ä¹ çš„æ–¹å¼åŒæ—¶ä¼°è®¡ç›¸æœºä½å§¿å’Œå¯†é›†çš„åœºæ™¯å‡ ä½•ã€‚ä½†æ˜¯ç”±äºiMAPä½¿ç”¨å•ä¸ªMLPä½œä¸ºåœºæ™¯çš„å”¯ä¸€è¡¨è¾¾ï¼Œæ‰€ä»¥å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>å®¹é‡æœ‰é™ï¼Œå½“åœºæ™¯å˜å¤§æ—¶ï¼ŒiMAPä¼šå¤±è´¥ï¼›</li><li>æ¯ä¸ªæ–°è¾“å…¥çš„RGBDå¸§éƒ½å¯ä»¥æ›´æ–°æ•´ä¸ªMLPï¼Œå› æ­¤ä¼šé‡åˆ°é—å¿˜çš„é—®é¢˜ï¼›</li><li>ä¼˜åŒ–æ•´ä¸ªMLPéå¸¸æ…¢ï¼Œå°¤å…¶æ˜¯å½“MLPå˜å¾—éå¸¸å¤§æ—¶ã€‚</li></ul><p><img src="/images/nerf-notes-5/image-20220828161143121.png"></p><p><img src="/images/nerf-notes-5/image-20220828161302418.png"></p><p>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒNICE-SLAMå¯¹åœºæ™¯è¡¨è¾¾åšäº†ç®€å•æœ‰æ•ˆçš„æ”¹è¿›ï¼Œä¼˜åŒ–åˆ†å±‚ç‰¹å¾ç½‘æ ¼ï¼Œå¹¶ä¸”ç»“åˆä¸åŒç©ºé—´å±‚çº§ä¸‹è®­ç»ƒçš„å¾®å‹MLPçš„å½’çº³åå·®ï¼Œä½¿ç”¨è¿™ç§è¡¨è¾¾NICE-SLAMåœ¨å¤§è§„æ¨¡å®¤å†…åœºæ™¯è¡¨ç¤ºä¸­è¡¨ç°è‰¯å¥½ï¼Œè§£å†³äº†ç½‘ç»œé—å¿˜é—®é¢˜ï¼Œå¹¶ä¸”ä¿è¯äº†æ›´å°‘çš„è¿è¡Œæ—¶é—´ï¼Œå¯ä»¥å¿«é€Ÿæ”¶æ•›ã€‚</p><h3 id="Pipeline"><a href="#Pipeline" class="headerlink" title="Pipeline"></a>Pipeline</h3><p>å¦‚ä¸‹å›¾ï¼Œå·¦ä¾§ä¸ºRGBDåºåˆ—ï¼ŒNICE-SLAMåŒæ—¶ä¼°è®¡ç›¸æœºä½å§¿å’Œåœºæ™¯çš„ä¸‰ç»´å‡ ä½•ï¼Œè¡¨ç¤ºä¸ºåˆ†å±‚ç‰¹å¾ç½‘æ ¼ï¼Œå¦‚å³ä¾§æ‰€ç¤ºã€‚</p><p>é¦–å…ˆï¼Œæ ¹æ®ç›¸æœºå‚æ•°éšæœºé‡‡æ ·å°„çº¿ï¼Œæ²¿æ¯æ¡å°„çº¿è¿›è¡Œä¸‰ç»´ç‚¹çš„é‡‡æ ·ï¼Œå¹¶ä¸”ä½¿ç”¨ä¸‰çº¿æ€§æ’å€¼æå–æ¯ä¸ªç‚¹çš„ç‰¹å¾ï¼ˆå¯¹åº”å›¾ä¸­å³ä¸‹è§’â€Ray -&gt; Point Samplerâ€œéƒ¨åˆ†ï¼‰ï¼›</p><p>æ¥ç€ï¼Œä½¿ç”¨å¾®å‹çš„MLPé¢„æµ‹å…‰çº¿ä¸Šä¸‰ç»´ç‚¹çš„å ç”¨å€¼å’Œé¢œè‰²å€¼ï¼ˆå¯¹åº”å›¾å³ä¾§æµ…è“è‰²éƒ¨åˆ†ï¼‰ï¼›</p><p>æœ€åï¼Œä½¿ç”¨ç±»ä¼¼NeRFçš„ä½“æ¸²æŸ“æ–¹ç¨‹ï¼Œæ²¿å°„çº¿å»å’Œï¼Œç”Ÿæˆæ·±åº¦å’Œå½©è‰²å›¾åƒï¼ˆå¯¹åº”å›¾ä¸­é—´æ·±è“è‰²çš„éƒ¨åˆ†ï¼‰ã€‚</p><p><img src="/images/nerf-notes-5/image-20220828162554601.png"></p><p>æˆ‘ä»¬å…³æ³¨è¾“å…¥å’Œç”Ÿæˆå›¾åƒä¹‹é—´çš„é‡æ¸²æŸ“æŸå¤±ï¼Œç”±äºæ¸²æŸ“è¿‡ç¨‹æ˜¯å¯å¾®çš„ï¼Œèƒ½å¤Ÿä»¥äº¤æ›¿æ–¹å¼åå‘æ±‚å¯¼ï¼Œæœ€å°åŒ–é‡æ¸²æŸ“æŸå¤±ã€‚é€šè¿‡ä¼˜åŒ–åˆ†å±‚ç‰¹å¾ç½‘æ ¼æ¥å®ç°mappingï¼›é€šè¿‡ä¼˜åŒ–ç›¸æœºå‚æ•°æ¥å®ç°trackingã€‚</p><p><img src="/images/nerf-notes-5/image-20220828162606024.png"></p><h3 id="MLP-pretraining"><a href="#MLP-pretraining" class="headerlink" title="MLP pretraining"></a>MLP pretraining</h3><p>å¾®å‹MLPï¼Œä¹Ÿå°±æ˜¯MLPçš„è§£ç å™¨ï¼Œæ˜¯ä½œä¸ºConvolutional Occupancy Networksçš„ä¸€éƒ¨åˆ†è¿›è¡Œäº†é¢„è®­ç»ƒã€‚è€ŒConvolutional Occupancy Networksç”±ä¸€ä¸ªCNNçš„ç¼–ç å™¨å’Œä¸€ä¸ªMLPçš„è§£ç å™¨ç»„æˆï¼Œä¸å…¶ç›¸åŒï¼Œæˆ‘ä»¬åœ¨è®­ç»ƒçš„æ—¶å€™ä¹Ÿæ˜¯ä½¿ç”¨äº†é¢„æµ‹å€¼å’ŒçœŸå®å€¼ä¹‹é—´çš„äº¤å‰ç†µæŸå¤±æ¥è®­ç»ƒç¼–ç å™¨å’Œè§£ç å™¨ã€‚</p><p>è®­ç»ƒä¹‹åï¼ŒNICE-SLAMä½¿ç”¨è§£ç å™¨çš„MLPï¼Œè¿™æ ·åœ¨ä¼˜åŒ–ç‰¹å¾ç½‘æ ¼æ—¶ï¼Œé¢„è®­ç»ƒçš„è§£ç å™¨å¯ä»¥åˆ©ç”¨ä»è®­ç»ƒé›†ä¸­å­¦ä¹ åˆ°çš„ç‰¹å®šå…ˆéªŒæ¥æŒ‡å¯¼ä¼˜åŒ–ã€‚</p><p><img src="/images/nerf-notes-5/image-20220828162636320.png"></p><h3 id="More-About-Feature-Grid"><a href="#More-About-Feature-Grid" class="headerlink" title="More About Feature Grid"></a>More About Feature Grid</h3><p><img src="/images/nerf-notes-5/image-20220828231515424.png"></p><p>å›¾ä¸­çš„MLPéƒ½æ˜¯åœ¨ä¸Šé¢Convolutional Occupancy Networksçš„æ¡†æ¶ä¸­è®­ç»ƒå‡ºæ¥çš„ã€‚</p><p>Coarse Levelå¯¹åº”çš„ç½‘æ ¼åˆ†è¾¨ç‡æ¯”è¾ƒå¤§ï¼Œå•ç‹¬çš„å‡ºä¸€ä¸ªOccupancyï¼Œå•ç‹¬çš„æ¸²æŸ“ä¸€å¼ depthå›¾ï¼Œåªä¼šç”¨åœ¨æ²¡æœ‰è¢«è§‚æµ‹åˆ°çš„éƒ¨åˆ†ä¸Šï¼›</p><p>Mid Levelå¯¹åº”çš„æ˜¯åˆ†è¾¨ç‡ä¸­ç­‰çš„ç‰¹å¾ç½‘æ ¼ï¼Œä»ä¸­æ‹¿åˆ°featureå’Œç‚¹åæ ‡ï¼Œè¿‡MLPå¯ä»¥å¾—åˆ°ä¸€ä¸ªoccupancyå€¼ï¼›</p><p>Fine Levelæ˜¯åœ¨Mid Levelçš„åŸºç¡€ä¸Šé¢„æµ‹ä¸€ä¸ªÎ”ï¼Œå®ƒæ˜¯ä»æ›´é«˜çš„åˆ†è¾¨ç‡é‡Œå¾—åˆ°featureï¼Œå¹¶ä¸”æŠŠä¸­ç­‰åˆ†è¾¨ç‡çš„ä¹Ÿè€ƒè™‘è¿›æ¥ã€‚æœ€åè¿™ä¸¤ä¸ªMLPå¾—åˆ°çš„occupancyå åŠ èµ·æ¥ï¼Œå¾—åˆ°æœ€åFine Levelçš„Occupancyï¼›</p><p>Color Leveè¿™é‡Œï¼Œé¢œè‰²æ˜¯éœ€è¦æ¯”è¾ƒé«˜åˆ†è¾¨ç‡çš„Feature Gridï¼Œå› ä¸ºé«˜é¢‘ä¿¡æ¯æ¯”è¾ƒå¤šï¼Œç„¶ååªä»Hierarchical Feature Gridé‡Œé¢å–åˆ°featureï¼Œç„¶åè·Ÿç‚¹åæ ‡ä¸€èµ·è¿‡MLPï¼Œæ‹¿åˆ°color predictionï¼›</p><p>æœ€ç»ˆé€šè¿‡ç±»ä¼¼NeRFçš„æ¸²æŸ“å™¨å¾—åˆ°depthå’Œcolorå›¾ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„å‡ ä½•MLPï¼ˆCoarse Mid Fine Levelï¼‰éƒ½æ˜¯fixturesçš„ï¼Œè¿™æ ·å°±å¯ä»¥è¿›è¡Œå±€éƒ¨çš„æ›´æ–°ï¼Œå› ä¸ºè¿™æ ·voxel featureæ˜¯å’Œä½ç½®æœ‰å…³çš„ï¼Œä¸ä¼šåƒiMAPä¸€æ ·æ”¹å˜MLPçš„ä¸€ä¸ªå‚æ•°å°±å½±å“æ•´ä¸ªæ¢¯åº¦ã€‚</p><h3 id="Depth-and-Color-Rendering"><a href="#Depth-and-Color-Rendering" class="headerlink" title="Depth and Color Rendering"></a>Depth and Color Rendering</h3><img src="/images/nerf-notes-5/image-20220828235737837.png" style="zoom:80%;"><p>éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š</p><ul><li>NICE-SLAMæ²¡æœ‰ç¬¬äºŒè½®é‡‡æ ·ï¼ˆNeRFå’ŒiMAPéƒ½æœ‰ç¬¬äºŒè½®é‡‡æ ·ï¼Œç¬¬äºŒè½®é‡‡æ ·æ ¹æ®ç¬¬ä¸€è½®é‡‡æ ·çš„ç»“æœè¿›è¡Œåˆ†é…ï¼‰ï¼Œå› ä¸ºæœ¬èº«æœ‰depthå›¾ï¼Œå¯ä»¥åœ¨depthå›¾å¯¹åº”çš„è¡¨é¢é™„è¿‘å¤šé‡‡æ ·ä¸€äº›ï¼Œæ ¹æ®ç»éªŒå°†é‡‡æ ·é—´éš”å®šä¹‰ä¸º5%çš„depthå€¼ï¼ˆdepthå€¼æŒ‡çš„æ˜¯å½“å‰å…‰çº¿çš„æ·±åº¦å€¼ï¼‰ã€‚æ‰€ä»¥è¿™é‡Œçš„Importanceå°±ç›´æ¥åœ¨è¡¨é¢é™„è¿‘é‡‡æ ·ã€‚</li><li>NICE-SLAMä½¿ç”¨äº†Occupancyä½œä¸ºå‡ ä½•çš„è¡¨è¾¾è€Œä¸æ˜¯volume densityï¼Œå› ä¸ºvolume densityè¿‡äº†marching cubeä¹‹åç»“æœéƒ½ä¸æ˜¯å¾ˆå¥½ï¼ˆä¸»è®²äººè¿™é‡Œè¯´æœ‰ä¸€äº›å·¥ä½œä¸­æœ‰å¯¹æ¯”å›¾ï¼‰</li></ul><h3 id="Mapping"><a href="#Mapping" class="headerlink" title="Mapping"></a>Mapping</h3><img src="/images/nerf-notes-5/image-20220828235802444.png" style="zoom:80%;"><p>éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š</p><ul><li><p>Geometric lossæŒ‡çš„æ˜¯æ¸²æŸ“å‡ºæ¥çš„depthè¦å’Œground truthè§‚æµ‹çš„depthå°½å¯èƒ½æ¥è¿‘çš„loss</p></li><li><p>Photometric losså°±æ˜¯æ¸²æŸ“å‡ºæ¥çš„é¢œè‰²ä¹Ÿè¦å’Œground truthæ¥è¿‘çš„loss</p></li><li><p>Staged optimization</p><ul><li>ç¬¬ä¸€é˜¶æ®µåªä¼˜åŒ–mid-levelï¼Œä½¿ç”¨å‡ ä½•æŸå¤±</li><li>ç¬¬äºŒé˜¶æ®µè”åˆä¼˜åŒ–mid å’Œ fine levelï¼Œä»ç„¶ä½¿ç”¨å‡ ä½•æŸå¤±ï¼Œå› ä¸ºç›®å‰è¿˜æ˜¯æ²¡æœ‰colorå›¾</li><li>ç¬¬ä¸‰é˜¶æ®µè¿›è¡ŒBAæ“ä½œï¼ˆBundle Adjustmentï¼‰ï¼Œåœ¨ä¹‹å‰çš„åŸºç¡€ä¸ŠåŠ ä¸Šäº†colorå›¾å’Œç›¸æœºä½ç½®</li></ul></li><li><p>æ€»çš„ç›®æ ‡å‡½æ•°æ˜¯ä¸¤ä¸ªå‡ ä½•çš„lossï¼ˆä¸€ä¸ªæ˜¯coarse levelçš„depthå›¾ï¼Œä¸€ä¸ªæ˜¯midå’Œfine levelåŠ èµ·æ¥æ¸²æŸ“å‡ºæ¥çš„depthå›¾ï¼‰ï¼Œå’Œä¸€ä¸ªæ ¹æ®é¢œè‰²çš„loss</p><p>æœ€å°åŒ–çš„å¾…ä¼˜åŒ–å˜é‡æ˜¯æ‰€æœ‰çš„ç½‘æ ¼çš„å‚æ•°ï¼Œç”±äºcolorçš„MLPæ²¡æœ‰æ‰¾åˆ°æ¯”è¾ƒå¥½çš„è®­ç»ƒæ–¹å¼ï¼Œæ‰€ä»¥è¿™é‡ŒæŠŠcolorçš„MLPå‚æ•°ï¼ˆwï¼‰åŠ åˆ°é‡Œé¢å»ï¼ŒåŒæ—¶ç›¸æœºçš„å¤–å‚ï¼ˆRå’Œtï¼‰ä¹Ÿè¦åŠ åˆ°é‡Œé¢å»</p></li><li><p>NICE-SLAMä½¿ç”¨äº†ä¸‰ä¸ªçº¿ç¨‹ã€‚ä¸€ä¸ªçº¿ç¨‹æ˜¯coarse levelï¼Œä¸€ä¸ªçº¿ç¨‹è·‘staged optimizationï¼Œä¸€ä¸ªæ˜¯å‰ç«¯ç›¸æœºçš„tracking</p></li></ul><h3 id="Tracking"><a href="#Tracking" class="headerlink" title="Tracking"></a>Tracking</h3><img src="/images/nerf-notes-5/image-20220828235819703.png" style="zoom:80%;"><h3 id="ä¿è¯å±€éƒ¨æ›´æ–°çš„ä¸¤ä¸ªç³»ç»Ÿè®¾è®¡"><a href="#ä¿è¯å±€éƒ¨æ›´æ–°çš„ä¸¤ä¸ªç³»ç»Ÿè®¾è®¡" class="headerlink" title="ä¿è¯å±€éƒ¨æ›´æ–°çš„ä¸¤ä¸ªç³»ç»Ÿè®¾è®¡"></a>ä¿è¯å±€éƒ¨æ›´æ–°çš„ä¸¤ä¸ªç³»ç»Ÿè®¾è®¡</h3><p><img src="/images/nerf-notes-5/image-20220829003247098.png"></p><p>NICE-SLAMåŸºäºç½‘æ ¼çš„è¡¨ç¤ºæ˜¯åªæ”¯æŒå±€éƒ¨æ›´æ–°å¹¶ä¸”ä¸ä¼šé­å—ä¸iMAPç›¸åŒçš„é—å¿˜é—®é¢˜ï¼Œè¿™ä¸¤ä¸ªè®¾è®¡ä¸ä»…å¯ä»¥ç¡®ä¿å½“å‰è§†å›¾ä¹‹å¤–çš„å‡ ä½•ä¿æŒé™æ€ï¼ŒåŒæ—¶ä½¿å¾—ä¼˜åŒ–éå¸¸æœ‰æ•ˆï¼Œæ¯æ¬¡åªéœ€è¦ä¼˜åŒ–å¿…è¦çš„å‚æ•°ï¼Œå³ä¼˜åŒ–å½“å‰è§†é”¥å†…çš„ç½‘æ ¼ç‰¹å¾ï¼Œä¸éœ€è¦æŠŠæ•´ä¸ªç½‘æ ¼æ‰€æœ‰ç‰¹å¾æ”¾è¿›æ¥ä¼˜åŒ–ã€‚</p><p>ä¸Šå›¾è¯´æ˜äº†åªä¼˜åŒ–å½“å‰è§†é”¥å†…çš„ç½‘æ ¼ç‰¹å¾çš„æœ‰æ•ˆæ€§ã€‚å›¾ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½è¡¨ç¤ºä¸€ä¸ªç½‘æ ¼ç‰¹å¾ï¼ŒèŠ‚ç‚¹æ˜¯çº¢è‰²çš„è¡¨ç¤ºå¯ä»¥è¢«ä¼˜åŒ–ï¼Œè“è‰²è¡¨ç¤ºä¸å¯ä»¥è¢«ä¼˜åŒ–ã€‚</p><p>å·¦å›¾ä¸­ï¼Œæ‰€æœ‰çš„featureéƒ½å¯ä»¥è¢«ä¼˜åŒ–ï¼Œé€‰æ‹©ä¸€äº›keyframeï¼Œè¿™äº›keyframeä¼šå°„å‡ºä¸€äº›å°„çº¿ã€‚å‡è®¾å°„çº¿Aå’ŒBå°±æ˜¯ç›®å‰è¦è¿›è¡Œä¼˜åŒ–çš„ï¼Œå°„çº¿ä¸Šé¢ä¼šè¿›è¡Œé‡‡æ ·ï¼Œå½±å“åˆ°xç‚¹çš„featureï¼Œè€Œxç‚¹çš„featureä¼šå½±å“åˆ°å·¦å›¾ä¸­çº¢è‰²åŒºåŸŸã€‚å¦‚æœæœ‰ä¸€ä¸ªå°„çº¿Cï¼Œå› ä¸ºå°„çº¿Cæ²¡æœ‰å‚ä¸åˆ°mappingï¼Œæ‰€ä»¥æˆ‘ä»¬å¸Œæœ›å°„çº¿Cæ¸²æŸ“å‡ºæ¥çš„ç»“æœè·Ÿä»¥å‰ä¸€æ ·ï¼Œä½†å‡å¦‚xç‚¹å˜äº†ï¼Œé‚£ä¹ˆæ¸²æŸ“çš„ç»“æœå°±å˜äº†ï¼Œä¸æˆ‘ä»¬çš„å¸Œæœ›ä¸ç¬¦ã€‚</p><p>ä¸ºäº†è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œå°±åªå¯¹å½“å‰è§†é”¥å†…çš„ç½‘æ ¼ç‰¹å¾è¿›è¡Œä¼˜åŒ–ï¼Œå¦‚å³å›¾æ‰€ç¤ºã€‚è¿™æ ·ä¸ä»…ä¼šä¿ç•™ä¹‹å‰é‡å»ºçš„å‡ ä½•å½¢çŠ¶ï¼Œå¹¶ä¸”åœ¨ä¼˜åŒ–çš„è¿‡ç¨‹ä¸­ä¹Ÿä¼šæ˜¾è‘—çš„å‡å°å‚æ•°çš„æ•°é‡ã€‚</p><h3 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h3><h4 id="Reconstruction-Results-on-the-Replica-Dataset"><a href="#Reconstruction-Results-on-the-Replica-Dataset" class="headerlink" title="Reconstruction Results on the Replica Dataset"></a>Reconstruction Results on the Replica Dataset</h4><p><img src="/images/nerf-notes-5/image-20220829182217204.png"></p><p><img src="/images/nerf-notes-5/image-20220829182224544.png"></p><p>ç”±äºNICE-SLAMä½¿ç”¨çš„æ›´åæ˜¾ç¤ºçš„è¡¨è¾¾ï¼Œæ‰€ä»¥å ç”¨çš„ç©ºé—´æ¯”iMAPé«˜ã€‚</p><h4 id="Tracking-results-on-ScanNet"><a href="#Tracking-results-on-ScanNet" class="headerlink" title="Tracking results on ScanNet"></a>Tracking results on ScanNet</h4><p><img src="/images/nerf-notes-5/image-20220829182514836.png"></p><p><img src="/images/nerf-notes-5/image-20220829182524655.png"></p><h4 id="Camera-Tracking-Results-on-TUM-RGB-D"><a href="#Camera-Tracking-Results-on-TUM-RGB-D" class="headerlink" title="Camera Tracking Results on TUM RGB-D"></a>Camera Tracking Results on TUM RGB-D</h4><p><img src="/images/nerf-notes-5/image-20220829182544556.png"></p><h4 id="3D-Reconstruction-and-Tracking-on-a-Multi-room-Apartment"><a href="#3D-Reconstruction-and-Tracking-on-a-Multi-room-Apartment" class="headerlink" title="3D Reconstruction and Tracking on a Multi-room Apartment"></a>3D Reconstruction and Tracking on a Multi-room Apartment</h4><p><img src="/images/nerf-notes-5/image-20220829182641061.png"></p><h4 id="Geometry-Forecast-and-Hole-Filling"><a href="#Geometry-Forecast-and-Hole-Filling" class="headerlink" title="Geometry Forecast and Hole Filling"></a>Geometry Forecast and Hole Filling</h4><p><img src="/images/nerf-notes-5/image-20220829182741121.png"></p><h4 id="Robustness-to-Frame-Loss"><a href="#Robustness-to-Frame-Loss" class="headerlink" title="Robustness to Frame Loss"></a>Robustness to Frame Loss</h4><p><img src="/images/nerf-notes-5/image-20220829182806574.png"></p><h4 id="Computation-Complexity"><a href="#Computation-Complexity" class="headerlink" title="Computation Complexity"></a>Computation Complexity</h4><p><img src="/images/nerf-notes-5/image-20220829182835156.png"></p><h4 id="Ablation-Study-on-Tracking"><a href="#Ablation-Study-on-Tracking" class="headerlink" title="Ablation Study on Tracking"></a>Ablation Study on Tracking</h4><p><img src="/images/nerf-notes-5/image-20220829182847575.png"></p><h4 id="Ablation-Study-on-Hierarchical-Architecture"><a href="#Ablation-Study-on-Hierarchical-Architecture" class="headerlink" title="Ablation Study on Hierarchical Architecture"></a>Ablation Study on Hierarchical Architecture</h4><p><img src="/images/nerf-notes-5/image-20220829182903336.png"></p><h3 id="Future-Work"><a href="#Future-Work" class="headerlink" title="Future Work"></a>Future Work</h3><ul><li>Loop closure </li><li>Global BA </li><li>Adaptively assign voxels</li><li>Extend to outdoor scenes</li><li>Make tracking as accurate as traditional methods </li><li>NICE novel view rendering w/o the need of camera pose</li></ul>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NeRFå­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰ï¼šåŸºäºNeRFçš„ä¸‰ç»´åœºæ™¯é‡å»ºå’Œç†è§£</title>
      <link href="2022/08/24/nerf-notes-4/"/>
      <url>2022/08/24/nerf-notes-4/</url>
      
        <content type="html"><![CDATA[<h1 id="NeRFå­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰ï¼šåŸºäºNeRFçš„ä¸‰ç»´åœºæ™¯é‡å»ºå’Œç†è§£"><a href="#NeRFå­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰ï¼šåŸºäºNeRFçš„ä¸‰ç»´åœºæ™¯é‡å»ºå’Œç†è§£" class="headerlink" title="NeRFå­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰ï¼šåŸºäºNeRFçš„ä¸‰ç»´åœºæ™¯é‡å»ºå’Œç†è§£"></a>NeRFå­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰ï¼šåŸºäºNeRFçš„ä¸‰ç»´åœºæ™¯é‡å»ºå’Œç†è§£</h1><h2 id="NeRFçš„èƒŒæ™¯å’ŒåŸºç¡€åŸç†"><a href="#NeRFçš„èƒŒæ™¯å’ŒåŸºç¡€åŸç†" class="headerlink" title="NeRFçš„èƒŒæ™¯å’ŒåŸºç¡€åŸç†"></a>NeRFçš„èƒŒæ™¯å’ŒåŸºç¡€åŸç†</h2><h3 id="åœºæ™¯è¡¨å¾-Scene-Representations"><a href="#åœºæ™¯è¡¨å¾-Scene-Representations" class="headerlink" title="åœºæ™¯è¡¨å¾ Scene Representations"></a>åœºæ™¯è¡¨å¾ Scene Representations</h3><p><img src="/images/nerf-notes-4/image-20220827135123022.png"></p><h4 id="Classical-Geometric-Scene-Representation"><a href="#Classical-Geometric-Scene-Representation" class="headerlink" title="Classical Geometric Scene Representation"></a>Classical Geometric Scene Representation</h4><p><img src="/images/nerf-notes-4/image-20220827135218953.png"></p><h4 id="Neural-Scene-Representation"><a href="#Neural-Scene-Representation" class="headerlink" title="Neural Scene Representation"></a>Neural Scene Representation</h4><p><img src="/images/nerf-notes-4/image-20220827135331359.png"></p><h3 id="Neural-Radiance-Fields-NeRF"><a href="#Neural-Radiance-Fields-NeRF" class="headerlink" title="Neural Radiance Fields (NeRF)"></a>Neural Radiance Fields (NeRF)</h3><p>NeRFæ ¸å¿ƒæ˜¯ç”¨å…¨è¿æ¥ç¥ç»ç½‘ç»œæ¥ä»£è¡¨ä¸€ä¸ªä¸‰ç»´åœºæ™¯ï¼Œæœ¬è´¨ä¸Šæ¥è¯´NeRFæ˜¯å¯¹äºä¸‰ç»´ç©ºé—´çš„è¿ç»­åŒ–çš„ä½“ç´ ï¼ˆvolumetricï¼‰è¡¨å¾ï¼Œè€Œä¼ ç»Ÿçš„ä½“ç´ è¡¨å¾å€¾å‘äºå°†ç©ºé—´ç¦»æ•£ä¸ºä¸€ä¸ªä¸‰ç»´ç½‘æ ¼ï¼Œå¯¹åˆ†è¾¨ç‡æœ‰ä¸€å®šçš„è¦æ±‚ã€‚</p><p><img src="/images/nerf-notes-4/image-20220827140644609.png"></p><h2 id="NeRFä¸åœºæ™¯ç†è§£"><a href="#NeRFä¸åœºæ™¯ç†è§£" class="headerlink" title="NeRFä¸åœºæ™¯ç†è§£"></a>NeRFä¸åœºæ™¯ç†è§£</h2><h3 id="2D-Semantic-NeRF"><a href="#2D-Semantic-NeRF" class="headerlink" title="2D: Semantic-NeRF"></a>2D: Semantic-NeRF</h3><p><img src="/images/nerf-notes-4/image-20220827150341608.png"></p><p><img src="/images/nerf-notes-4/image-20220827150606140.png"></p><h4 id="Semantic-NeRFè®¾ç½®"><a href="#Semantic-NeRFè®¾ç½®" class="headerlink" title="Semantic-NeRFè®¾ç½®"></a>Semantic-NeRFè®¾ç½®</h4><p><img src="/images/nerf-notes-4/image-20220827150632151.png"></p><h4 id="Semantic-NeRFç½‘ç»œç»“æ„"><a href="#Semantic-NeRFç½‘ç»œç»“æ„" class="headerlink" title="Semantic-NeRFç½‘ç»œç»“æ„"></a>Semantic-NeRFç½‘ç»œç»“æ„</h4><p><img src="/images/nerf-notes-4/image-20220827150654064.png"></p><h4 id="Semantic-NeRFæ¸²æŸ“å…¬å¼ä¸æŸå¤±å‡½æ•°"><a href="#Semantic-NeRFæ¸²æŸ“å…¬å¼ä¸æŸå¤±å‡½æ•°" class="headerlink" title="Semantic-NeRFæ¸²æŸ“å…¬å¼ä¸æŸå¤±å‡½æ•°"></a>Semantic-NeRFæ¸²æŸ“å…¬å¼ä¸æŸå¤±å‡½æ•°</h4><img src="/images/nerf-notes-4/image-20220827150718117.png" style="zoom:67%;"><img src="/images/nerf-notes-4/image-20220827151927733.png" style="zoom:67%;"><h4 id="Semantic-NeRFåº”ç”¨"><a href="#Semantic-NeRFåº”ç”¨" class="headerlink" title="Semantic-NeRFåº”ç”¨"></a>Semantic-NeRFåº”ç”¨</h4><p><img src="/images/nerf-notes-4/image-20220827151950345.png"></p><h3 id="3D-NeSF"><a href="#3D-NeSF" class="headerlink" title="3D: NeSF"></a>3D: NeSF</h3><p><img src="/images/nerf-notes-4/image-20220827152228233.png"></p><p><strong>NeSFçš„æµç¨‹å›¾ï¼š</strong></p><p><img src="/images/nerf-notes-4/image-20220827152319237.png"></p><h2 id="åŸºäºNeRFçš„è¯­ä¹‰SLAM"><a href="#åŸºäºNeRFçš„è¯­ä¹‰SLAM" class="headerlink" title="åŸºäºNeRFçš„è¯­ä¹‰SLAM"></a>åŸºäºNeRFçš„è¯­ä¹‰SLAM</h2><h3 id="iMAP-Implicit-Mapping-and-Positioning-in-Real-Time"><a href="#iMAP-Implicit-Mapping-and-Positioning-in-Real-Time" class="headerlink" title="iMAP: Implicit Mapping and Positioning in Real-Time"></a>iMAP: Implicit Mapping and Positioning in Real-Time</h3><img src="/images/nerf-notes-4/image-20220827153221157.png" style="zoom:80%;"><h4 id="iMAPç³»ç»Ÿæµç¨‹"><a href="#iMAPç³»ç»Ÿæµç¨‹" class="headerlink" title="iMAPç³»ç»Ÿæµç¨‹"></a>iMAPç³»ç»Ÿæµç¨‹</h4><p><img src="/images/nerf-notes-4/image-20220827153208785.png"></p><h2 id="NeRF-SemanticsäºŸå¾…è§£å†³çš„é—®é¢˜"><a href="#NeRF-SemanticsäºŸå¾…è§£å†³çš„é—®é¢˜" class="headerlink" title="NeRF+SemanticsäºŸå¾…è§£å†³çš„é—®é¢˜"></a>NeRF+SemanticsäºŸå¾…è§£å†³çš„é—®é¢˜</h2><h3 id="æœªæ¥å·¥ä½œ"><a href="#æœªæ¥å·¥ä½œ" class="headerlink" title="æœªæ¥å·¥ä½œ"></a>æœªæ¥å·¥ä½œ</h3><p><img src="/images/nerf-notes-4/image-20220827153555543.png"></p><h3 id="è®¨è®º"><a href="#è®¨è®º" class="headerlink" title="è®¨è®º"></a>è®¨è®º</h3><p><img src="/images/nerf-notes-4/image-20220827153605058-16615887765601.png"></p>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NeRF </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NeRFå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰ï¼šåŸºäºNeRFçš„ä¸‰ç»´å†…å®¹ç”Ÿæˆ</title>
      <link href="2022/08/22/nerf-notes-3/"/>
      <url>2022/08/22/nerf-notes-3/</url>
      
        <content type="html"><![CDATA[<h1 id="NeRFå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰ï¼šåŸºäºNeRFçš„ä¸‰ç»´å†…å®¹ç”Ÿæˆ"><a href="#NeRFå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰ï¼šåŸºäºNeRFçš„ä¸‰ç»´å†…å®¹ç”Ÿæˆ" class="headerlink" title="NeRFå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰ï¼šåŸºäºNeRFçš„ä¸‰ç»´å†…å®¹ç”Ÿæˆ"></a>NeRFå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰ï¼šåŸºäºNeRFçš„ä¸‰ç»´å†…å®¹ç”Ÿæˆ</h1><h2 id="Why-NeRF-Succeeded"><a href="#Why-NeRF-Succeeded" class="headerlink" title="Why NeRF Succeeded"></a>Why NeRF Succeeded</h2><h3 id="Why-3D-content-creation-from-images"><a href="#Why-3D-content-creation-from-images" class="headerlink" title="Why 3D content creation from images"></a>Why 3D content creation from images</h3><h4 id="What-are-3D-contents"><a href="#What-are-3D-contents" class="headerlink" title="What are 3D contents"></a>What are 3D contents</h4><p>3Då†…å®¹æ˜¯å½¢çŠ¶å’Œå¤–è§‚æ¨¡å‹çš„ç»„åˆï¼Œå¯ä»¥ä»ä¸åŒçš„è§†ç‚¹æ¸²æŸ“ä¸º2Då›¾åƒã€‚</p><p><img src="/images/nerf-notes-3/image-20220826145404694.png"></p><h4 id="Rendering-and-inverse-rendering"><a href="#Rendering-and-inverse-rendering" class="headerlink" title="Rendering and inverse rendering"></a>Rendering and inverse rendering</h4><p>è®¡ç®—æœºå›¾å½¢å­¦ä¸»è¦æ˜¯å‡è®¾æˆ‘ä»¬æœ‰äº†è¿™äº›3Då†…å®¹ï¼Œå³å½¢çŠ¶ã€æè´¨å’Œå…‰ç…§ï¼Œæˆ‘ä»¬å¦‚ä½•è®¾è®¡æ›´é«˜æ•ˆå’Œé«˜è´¨é‡çš„æ¸²æŸ“æ“ä½œæ¥ç”Ÿæˆå›¾ç‰‡ã€‚</p><p>ä»è®¡ç®—æœºè§†è§‰çš„è§’åº¦æ¥è¯´çš„è¯ï¼Œæˆ‘ä»¬ç»™å®šäº†ä¸€å †å›¾ç‰‡ï¼Œå¯ä»¥æ˜¯ä»çœŸå®ä¸–ç•Œä¸­æ‹æ‘„çš„å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥æ˜¯æ¸²æŸ“å‡ºæ¥çš„å›¾ç‰‡ï¼Œé€šè¿‡åæ¸²æŸ“çš„æ“ä½œå»ç”Ÿæˆè¿™äº›3Då†…å®¹ã€‚</p><p>ä¸‹æ–‡ä¸»è¦è®¨è®ºçš„æ˜¯Inverse RenderingæŠ€æœ¯ã€‚</p><p><img src="/images/nerf-notes-3/image-20220826145519227.png"></p><h4 id="3-key-factors-in-inverse-rendering"><a href="#3-key-factors-in-inverse-rendering" class="headerlink" title="3 key factors in inverse rendering"></a>3 key factors in inverse rendering</h4><h5 id="What-shape-representations-to-use"><a href="#What-shape-representations-to-use" class="headerlink" title="What shape representations to use?"></a>What shape representations to use?</h5><p>è¿™éƒ¨åˆ†å¯ä»¥å‚è€ƒ<a href="https://immortalqx.github.io/2022/08/17/geometry-notes-1/">å‡ ä½•çš„éšå¼è¡¨ç¤ºä¸æ˜¾ç¤ºè¡¨ç¤º</a>ã€‚</p><p>åœ¨Inverse  Renderingä¸­ï¼Œéå¸¸å…³é”®çš„å°±æ˜¯é€‰æ‹©åˆé€‚çš„å½¢çŠ¶è¡¨å¾æ–¹å¼ï¼Œä¸åŒçš„æ–¹å¼æœ‰ä¸åŒçš„ä¼˜åŒ–ç‰¹ç‚¹ï¼Œä¼šå½±å“æˆ‘ä»¬åæ¸²æŸ“çš„éš¾åº¦ã€‚</p><p><img src="/images/nerf-notes-3/image-20220826150712723.png"></p><h5 id="What-appearance-representations-to-use"><a href="#What-appearance-representations-to-use" class="headerlink" title="What appearance representations to use?"></a>What appearance representations to use?</h5><p>ç¬¬ä¸€ç§æ–¹æ³•ï¼Œä¸Šé¢çš„æè´¨çº¹ç†è´´å›¾æ˜¯æŠŠ3Dçš„å½¢çŠ¶å±•å¼€æˆ2Dçš„å¹³é¢ï¼Œåœ¨æ¯ä¸ªå›¾ç‰‡ä¸Šå­˜å‚¨å¯¹åº”3Dç‚¹çš„æ€§è´¨ï¼Œæ¯”å¦‚ä¸–ç•Œåœ°å›¾å°±æ˜¯2Då¹³é¢ä¸Šè¡¨ç¤ºäº†3Dçš„åœ°çƒï¼›ä¸‹é¢çš„ç¯å¢ƒå…‰å¯ä»¥ç”¨ä¸‹é¢è¿™æ ·çš„å…¨æ™¯å›¾æ¥è®°å½•ã€‚æ ¹æ®æè´¨çº¹ç†è´´å›¾å’Œç¯å¢ƒå…‰å°±å¯ä»¥æ¸²æŸ“</p><p>ç¬¬äºŒç§æ–¹æ³•å«åšRadiance fieldï¼ˆè¾å°„åœºï¼‰ï¼Œæ—©æœŸçš„æ—¶å€™å«åšsurface light fieldï¼ˆ2000å¹´çš„æ–‡ç« ï¼‰ã€‚ ä»–çš„å®šä¹‰æ¯”è¾ƒç®€å•ï¼Œç‰©ä½“ä¸­çš„æ¯ä¸ªç‚¹ï¼Œä»ä¸åŒçš„è§’åº¦çœ‹ä¼šæœ‰ä¸åŒçš„å†…å®¹ï¼ˆé¢œè‰²ï¼‰ã€‚</p><p>ä¸¤ç§æ–¹æ³•çš„å¯¹æ¯”ï¼š</p><ul><li>å·¦è¾¹è¿™ç§æ–¹æ³•å°†ææ–™å’Œå…‰ç…§åˆ†å¼€äº†ï¼Œè€Œå³è¾¹æ²¡æœ‰ç»™ææ–™å’Œå…‰ç…§åˆ†å¼€å¤„ç†ã€‚</li><li>å·¦è¾¹çš„æ–¹æ³•æ˜¯éå¸¸ç†æƒ³çš„ï¼Œå¾ˆå®¹æ˜“ç¼–è¾‘æè´¨æˆ–è€…æ›´æ¢å…‰ç…§ï¼Œä½†åŒæ—¶åˆæ˜¯éå¸¸éš¾è§£å†³çš„ã€‚</li><li>å³è¾¹è¿™ç§æ–¹æ³•éå¸¸ç®€å•ï¼Œä½†æ˜¯å¾ˆéš¾å»ç¼–è¾‘ï¼Œå¾ˆéš¾æŠŠç‰©ä½“æ”¾åˆ°æ–°çš„ç¯å¢ƒå»è§‚å¯Ÿå®ƒçš„å¤–è§‚ï¼Œå› ä¸ºæ–°çš„ç¯å¢ƒå…‰ç…§ä¼šå˜åŒ–å¾ˆå¤šï¼Œå¯¼è‡´ç‰©ä½“çš„å¤–è§‚ä¹Ÿå˜åŒ–äº†ã€‚</li></ul><p><img src="/images/nerf-notes-3/image-20220826151123260.png"></p><h5 id="What-rendering-operator-to-use"><a href="#What-rendering-operator-to-use" class="headerlink" title="What rendering operator to use?"></a>What rendering operator to use?</h5><p><img src="/images/nerf-notes-3/image-20220826195207170.png"></p><h3 id="Why-NeRF-is-a-big-thing"><a href="#Why-NeRF-is-a-big-thing" class="headerlink" title="Why NeRF is a big thing"></a>Why NeRF is a big thing</h3><h4 id="Break-NeRF-into-3-components"><a href="#Break-NeRF-into-3-components" class="headerlink" title="Break NeRF into 3 components"></a>Break NeRF into 3 components</h4><p>Shapeï¼šNeRFä½¿ç”¨Soft opacity fieldè¡¨ç¤ºå½¢çŠ¶ï¼Œè¿™ç§æ–¹å¼éå¸¸softï¼Œç±»ä¼¼äºæŠŠç‰©ä½“è¡¨ç¤ºæˆä¸€ç§é›¾ã€‚</p><p>Appearanceï¼šNeRFä½¿ç”¨Radiance fieldè¡¨ç¤ºã€‚</p><p>Randeringï¼šNeRFæ¸²æŸ“çš„è¿‡ç¨‹ä¸­ï¼Œä¼šåœ¨åŒä¸€æ¡rayä¸Šsampleå¾ˆå¤šç‚¹ï¼Œå†æŠŠè¿™äº›ç‚¹ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°æœ€åè¿™æ¡rayçš„é¢œè‰²ã€‚ï¼ˆè®²åº§çš„å½•å±é‡Œé¢æœ‰è§†é¢‘ä»‹ç»ï¼‰</p><p><img src="/images/nerf-notes-3/image-20220826201154910.png"></p><p><img src="/images/nerf-notes-3/image-20220826202739889.png"></p><h4 id="Take-home-messages-from-NeRF"><a href="#Take-home-messages-from-NeRF" class="headerlink" title="Take-home messages from NeRF"></a>Take-home messages from NeRF</h4><h5 id="soft-shape"><a href="#soft-shape" class="headerlink" title="soft shape"></a>soft shape</h5><p>NeRFåˆå§‹åŒ–çš„æ—¶å€™ï¼Œç±»ä¼¼äºè™šç©ºçš„çŠ¶æ€ï¼Œä»€ä¹ˆä¹Ÿæ²¡æœ‰ï¼Œç„¶ååœ¨ä¼˜åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œimage lossä¼šåœ¨éœ€è¦çš„ä½ç½®ç”Ÿæˆéœ€è¦çš„ä¸‰ç»´æ¨¡å‹ã€‚</p><p><img src="/images/nerf-notes-3/image-20220826224752952.png"></p><p>ä¸hard geometryç›¸æ¯”è¾ƒï¼š</p><ul><li>ä¸éœ€è¦object segmentation maskï¼Œä¸ä¼šé¢ä¸´genusçš„é—®é¢˜ã€‚å¯¹äºhard geometryï¼Œå¦‚æœinitial shapeæ˜¯ä¸€ä¸ªçƒï¼Œæ²¡æœ‰object segmentation maskçš„è¯ï¼Œéœ€è¦æŠŠå®ƒå˜æˆåœ†ç¯æ˜¯ä¸€ä¸ªéå¸¸å›°éš¾çš„æ“ä½œã€‚</li><li>æ²¡æœ‰boundary discontinuityï¼Œå®¹æ˜“åšdifferentiable renderingã€‚</li><li>æ¸²æŸ“çš„ä»£ä»·å¾ˆå¤§ï¼Œæ¯”å¦‚ä¹‹å‰ä¸€æ¡rayçš„é¢œè‰²æ˜¯ä¸€æ¡rayä¸Šå¾ˆå¤šç‚¹çš„é¢œè‰²ç»“åˆèµ·æ¥çš„ï¼Œè€Œhard geometryé‡Œé¢åªéœ€è¦æ‰¾åˆ°ç›¸æœºçš„rayä¸è¡¨é¢çš„äº¤ç‚¹å³å¯æ¸²æŸ“ã€‚</li><li>å¯¹äºsoft shapeï¼Œç›®å‰è¿˜æ²¡æœ‰éå¸¸å¥½çš„å·¥å…·å»ç¼–è¾‘å®ƒã€‚</li></ul><p><img src="/images/nerf-notes-3/image-20220826224820202.png"></p><p>soft shapeç›¸å…³çš„æ–°å·¥ä½œï¼š</p><p><img src="/images/nerf-notes-3/image-20220826230027190.png"></p><h5 id="Fourier-features-fixes-the-spectral-bias-of-MLPs"><a href="#Fourier-features-fixes-the-spectral-bias-of-MLPs" class="headerlink" title="Fourier features fixes the spectral bias of MLPs"></a>Fourier features fixes the spectral bias of MLPs</h5><blockquote><p>è¿™é‡Œè®²åº§è®²çš„ä¸œè¥¿æ²¡å¤ªå¬æ‡‚ï¼Œæœ‰å‡ ä¸ªè‹±æ–‡å•è¯æ²¡å¬è¿‡ï¼Œï¼Œï¼Œ</p><p>ä¸è¿‡è¿™ä¸ªéƒ¨åˆ†NeRFè®ºæ–‡é‡Œé¢è®²äº†ï¼Œå°±æ˜¯é€šè¿‡é«˜ç»´å˜æ¢è®©MLPå¯ä»¥å­¦ä¹ é«˜é¢‘å‡½æ•°</p></blockquote><p><img src="/images/nerf-notes-3/image-20220826230343475.png"></p><h5 id="neural-fields-for-inverse-rendering"><a href="#neural-fields-for-inverse-rendering" class="headerlink" title="neural fields for inverse rendering"></a>neural fields for inverse rendering</h5><ul><li><p>Compactï¼šneural fieldsæŒ‡çš„æ˜¯ç”¨ç¥ç»ç½‘ç»œè¡¨ç¤ºä¿¡å·ï¼Œè¿™ç§è¡¨å¾æ–¹å¼ç‰¹åˆ«è¢–çã€‚æ¯”å¦‚æ¯éš”NeRFçš„å†…å®¹åªæœ‰10MB</p></li><li><p>Continuousï¼šè¿™ç§è¡¨ç¤ºæ–¹å¼ä»–çš„åœºæ™¯æ²¡æœ‰è¢«discretizedï¼Œå› ä¸ºå®ƒæ˜¯è¿ç»­çš„ï¼Œå¯ä»¥è¡¨ç¤ºæ›´åŠ é«˜è´¨é‡çš„ä¿¡å·</p></li><li><p>Flexible and easy for optimizationï¼šè¿™ä¸ªç¥ç»ç½‘ç»œæœ¬èº«æœ‰ä¸€äº›éå¸¸å¹³æ»‘çš„è¡¨ç¤ºæ–¹å¼ï¼Œæ‰€ä»¥å¾ˆå¥½ä¼˜åŒ–ã€‚</p></li></ul><p><img src="/images/nerf-notes-3/image-20220826230843872.png"></p><h2 id="NeRF"><a href="#NeRF" class="headerlink" title="NeRF++"></a>NeRF++</h2><blockquote><p>ä»è¿™é‡Œå¼€å§‹ä»‹ç»è‡ªå·±çš„å·¥ä½œäº†ï¼ŒNeRF++æ‰©å±•äº†NeRFåˆ°360 capture of unbounded scenesï¼Œè§£å†³çš„æ˜¯NeRFåªèƒ½å¤Ÿå¯¹æ²¡æœ‰èƒŒæ™¯çš„ç‰©ä½“è¿›è¡Œå»ºæ¨¡çš„é—®é¢˜ï¼Œå®ç°äº†æ—¢èƒ½å¤Ÿé‡å»ºå‰æ™¯ï¼Œä¹Ÿèƒ½å¤Ÿé‡å»ºèƒŒæ™¯ã€‚</p></blockquote><h3 id="5-Capture-scenarios"><a href="#5-Capture-scenarios" class="headerlink" title="5 Capture scenarios"></a>5 Capture scenarios</h3><ul><li>360 Inward-facingï¼šç‰©ä½“åœ¨ä¸­é—´ï¼Œç›¸æœºç»•ç€ç‰©ä½“æ‹ã€‚å¯¹äºNeRFï¼Œè¿™ç§æƒ…å†µæ²¡æœ‰èƒŒæ™¯ï¼ŒèƒŒæ™¯æ˜¯ç™½è‰²çš„ï¼Œä½†è¿™ç§æƒ…å†µç›¸å¯¹äºçœŸå®æƒ…å†µæ˜¯å¾ˆå›°éš¾çš„ã€‚</li><li>Forward-facingï¼šç›¸æœºåœ¨ä¸€ä¸ªå¾ˆå°çš„èŒƒå›´å†…è¿åŠ¨ï¼Œç›¸æœºåŸºæœ¬æœç€ä¸€ä¸ªæ–¹å‘ï¼ŒNeRFå¾ˆæ“…é•¿è¿™ç§åœºæ™¯ã€‚</li><li>360 Outward-facingï¼šç±»ä¼¼äºæ‹æ‘„å…¨æ™¯å›¾ã€‚</li><li>Unconstrained 360 Outward-facingï¼šç±»ä¼¼äº360 Outward-facingï¼Œä½†åˆ†å¸ƒæ›´åŠ ä¸è§„åˆ™</li><li>360 capture of unbounded scenesï¼š360 Inward-facingä¸360 Outward-facingçš„ç»“åˆï¼Œæ›´è´´åˆå®é™…çš„æƒ…å†µï¼Œå»æ‹æ‘„ä¸€ä¸ªå®é™…çš„ç‰©ä½“ï¼Œæ—¢èƒ½å¤Ÿæ‹æ‘„åˆ°å¤„äºä¸­å¤®çš„ç‰©ä½“ï¼Œä¹Ÿä¼šæ‹æ‘„åˆ°èƒŒæ™¯å›¾ã€‚</li></ul><p><img src="/images/nerf-notes-3/image-20220826235634923.png"></p><h3 id="Core-idea"><a href="#Core-idea" class="headerlink" title="Core idea"></a>Core idea</h3><h4 id="Separate-foreground-background"><a href="#Separate-foreground-background" class="headerlink" title="Separate foreground/background"></a>Separate foreground/background</h4><p>NeRFæœ‰ä¸€ç§å¾ˆå¥½çš„compositionalæ€§è´¨ï¼Œå®ƒçš„ä¸€æ¡rayä¸Šé¢sampleäº†å¾ˆå¤šçš„ç‚¹æœ€åå†æŠŠè¿™äº›ç‚¹ç»“åˆèµ·æ¥å¾—åˆ°rayçš„é¢œè‰²ï¼Œè¿™äº›ç‚¹åœ¨ç»“åˆçš„è¿‡ç¨‹ä¸­å°±å¯ä»¥è¢«åˆ†æˆå‰æ™¯å’ŒèƒŒæ™¯ã€‚</p><p><img src="/images/nerf-notes-3/image-20220827102747393.png"></p><h4 id="Symmetry-between-360-inward-facing-and-360-outward-facing-captures"><a href="#Symmetry-between-360-inward-facing-and-360-outward-facing-captures" class="headerlink" title="Symmetry between 360 inward-facing and 360 outward-facing captures"></a>Symmetry between 360 inward-facing and 360 outward-facing captures</h4><p>ä¸Šé¢è¿˜æ²¡æœ‰è§£å†³resolutioné—®é¢˜ï¼Œå› ä¸ºèƒŒæ™¯å¾ˆå¤§ï¼Œrayå¯èƒ½ä¼šå»¶ç”³åˆ°å¾ˆè¿œã€‚</p><p>å¯ä»¥ç”»ä¸€ä¸ªçƒï¼ŒæŠŠåœºæ™¯åŒ…å›´èµ·æ¥ï¼Œä¹Ÿå¯ä»¥ç”»ä¸€ä¸ªçƒæŠŠç›¸æœºåŒ…å›´èµ·æ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ä»è¿™é‡Œå¯ä»¥çœ‹å‡º360 inward-facing å’Œ 360 outward-facingæ˜¯æœ‰å¯¹ç§°å…³ç³»çš„ã€‚</p><p><img src="/images/nerf-notes-3/image-20220827103700850.png"></p><p>å¯ä»¥é€šè¿‡æ˜ å°„çš„æ–¹å¼ï¼ŒæŠŠoutward-facing captureè¿™ä¸ªéå¸¸å¤§çš„åœºæ™¯mapæˆä¸€ä¸ªBounded unit cubeã€‚</p><p>ä¸‹é¢è¿™ä¸ªçƒé‡Œé¢ï¼Œç¦»ä¸­å¿ƒè¶Šè¿œçš„åœ°æ–¹ï¼Œåœ¨cubeä¸­å°±æ›´å¯†ï¼Œè€Œè·ç¦»ä¸­å¿ƒæ›´è¿‘çš„åœ°æ–¹ï¼Œåœ¨cubeä¸­æ›´ç¨€ç–ã€‚</p><p><img src="/images/nerf-notes-3/image-20220827104111339.png"></p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯¹äºå‰æ™¯ï¼Œå®ƒçš„ç©ºé—´æ²¡æœ‰å—åˆ°ä»»ä½•çš„æŒ¤å‹ï¼Œè€Œå¯¹äºå¤–é¢çš„èƒŒæ™¯ï¼Œé€šè¿‡ä¸Šé¢çš„Inverted sphere parametrizationæ–¹å¼ï¼Œæ˜ å°„åˆ°äº†Bounded unit cubeé‡Œé¢ï¼Œç©ºé—´ä¼šå—åˆ°æŒ¤å‹ã€‚</p><p>è¿™æ ·ï¼ŒForegroundå’ŒBackgroundéƒ½å®šä¹‰åœ¨ä¸€ä¸ªunit cubeä¸­ï¼Œå°±å¯ä»¥ç”¨æ™®é€šçš„NeRFå»modelå®ƒäº†ã€‚ï¼ˆNeRFå°±æ˜¯compositionalçš„ï¼Œå¾ˆå®¹æ˜“å¾—åˆ°ç»“æœï¼‰</p><p><img src="/images/nerf-notes-3/image-20220827104848368.png"></p><h3 id="NeRF-vs-NeRF"><a href="#NeRF-vs-NeRF" class="headerlink" title="NeRF++ vs NeRF"></a>NeRF++ vs NeRF</h3><ul><li>NeRF faces resolution issue for 360 captures of unbounded scenes</li><li>NeRF++ separates foreground/background modelling, as NeRF is compositional</li><li>NeRF++ uses inverted sphere parametrization to establish symmetry between 360 inward-facing and 360 outward-facing captures </li></ul><h2 id="Future-works"><a href="#Future-works" class="headerlink" title="Future works"></a>Future works</h2><p><img src="/images/nerf-notes-3/image-20220827113930120.png"></p><h2 id="Questions"><a href="#Questions" class="headerlink" title="Questions"></a>Questions</h2><p><strong>Qï¼šä¸‰ç»´é‡å»ºä¸åæ¸²æŸ“çš„å…³ç³»ï¼Ÿ</strong></p><p><strong>Aï¼š</strong>ä¸‰ç»´é‡å»ºå¹¿ä¹‰ä¸Šä¹Ÿå¯ä»¥è¯´æ˜¯åæ¸²æŸ“ï¼Œä»–å¯ä»¥è¯´æ˜¯åæ¸²æŸ“çš„ç‰¹ä¾‹ã€‚ä¸‰ç»´é‡å»ºæ›´æ³¨é‡shapeï¼Œæ²¡æœ‰ç‰¹åˆ«å…³æ³¨Appearanceçš„éƒ¨åˆ†ã€‚</p><p><strong>Qï¼šå¦‚ä½•ç†è§£è¾å°„åœºï¼Ÿ</strong></p><p><strong>Aï¼š</strong>TODO</p><p><strong>Qï¼šä¸ºä»€ä¹ˆNeRFåªç”¨æ²¡æœ‰ç©ºé—´ä¿¡æ¯çš„MLPï¼Ÿ</strong></p><p><strong>Aï¼š</strong>TODO</p>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NeRF </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NeRFå­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰ï¼šè®ºæ–‡é˜…è¯»ä¸æ€è€ƒ</title>
      <link href="2022/08/21/nerf-notes-2/"/>
      <url>2022/08/21/nerf-notes-2/</url>
      
        <content type="html"><![CDATA[<h1 id="NeRFå­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰ï¼šè®ºæ–‡é˜…è¯»ä¸æ€è€ƒ"><a href="#NeRFå­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰ï¼šè®ºæ–‡é˜…è¯»ä¸æ€è€ƒ" class="headerlink" title="NeRFå­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰ï¼šè®ºæ–‡é˜…è¯»ä¸æ€è€ƒ"></a>NeRFå­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰ï¼šè®ºæ–‡é˜…è¯»ä¸æ€è€ƒ</h1><h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><p><strong>Qï¼šå¦‚ä½•ç†è§£ç¨€ç–çš„è¾“å…¥è§†å›¾é›†</strong></p><p><strong>Aï¼š</strong> a sparse set of input views ç¨€ç–çš„è¾“å…¥è§†å›¾é›†ã€‚ä¹Ÿå°±æ˜¯è¾“å…¥è§†å›¾å¹¶ä¸æ˜¯è¿ç»­çš„ï¼Œå¯èƒ½å°±æ˜¯åœ¨è‹¥å¹²ä¸ªæ–¹å‘æˆ–è€…è§’åº¦æ‹å‡ å¼ ç…§ç‰‡ï¼Œå°±èƒ½åˆæˆä¸€ä¸ªè¿ç»­çš„360åº¦ç¯ç»•çš„åœºæ™¯</p><p><strong>Qï¼šå¦‚ä½•ç†è§£volume density</strong></p><p>volume densityå­—é¢æ„æ€æ˜¯ä½“ç§¯å¯†åº¦ï¼Œå®é™…ä¸Šç†è§£ä¸º<strong>ä¸é€æ˜åº¦</strong>ä¼šæ›´å¥½ï¼Œä¸é€æ˜åº¦å¯¹åº”å¯¹å…‰çš„å¸æ”¶èƒ½åŠ›ï¼Œvolume densityè¶Šå¤§ï¼Œä¸é€æ˜åº¦è¶Šé«˜ï¼Œå¯¹å…‰çš„å¸æ”¶èƒ½åŠ›è¶Šå¼ºã€‚</p><p>è¿™ä¸ªåœ¨åé¢çš„å…¬å¼æœ‰æ‰€æ¶‰åŠã€‚</p><p><strong>Qï¼šä¸ºä»€ä¹ˆè¦è¾“å…¥è¿™ä¹ˆäº”ä¸ªåæ ‡ï¼Ÿ</strong></p><p><strong>Aï¼š</strong>å› ä¸ºè€ƒè™‘åˆ°ä¸åŒè§†è§’ä¸ŠæŸä¸€ç‚¹çš„é¢œè‰²æ˜¯ä¸ä¸€æ ·çš„ã€‚æ­£å› å¦‚æ­¤ï¼ŒåŸæ–‡ç”¨äº†view-dependentï¼Œå³æŸç‚¹çš„é¢œè‰²æ˜¯è·Ÿè§†è§’ç›¸å…³çš„</p><p><strong>Qï¼šå¦‚ä½•ç†è§£5Dåæ ‡ï¼ˆç©ºé—´ä½ç½®$(xï¼Œyï¼Œz)$å’Œè§‚å¯Ÿæ–¹å‘$(Î¸ï¼ŒÏ†)$)ï¼Ÿ</strong></p><p><strong>Aï¼š</strong>ä½œè€…åº”è¯¥æ˜¯ç¡®å®šäº†æŸä¸ªåæ ‡ç³»ï¼Œç©ºé—´ä½ç½®$(x,y,z)$å°±æ˜¯è¢«è§‚å¯Ÿç‰©ä½“æŸä¸ªç‚¹åœ¨è¿™ä¸ªåæ ‡ç³»ä¸­çš„åæ ‡ï¼Œè€Œè§‚å¯Ÿæ–¹å‘$(Î¸ï¼ŒÏ†)$å°±æ˜¯ç›¸æœºæŒ‡å‘è¢«è§‚å¯Ÿç‰©ä½“è¿™ä¸ªç‚¹çš„å°„çº¿ï¼Œé€šè¿‡ä¸¤ä¸ªè§’åº¦å¯ä»¥è¡¨ç¤ºä¸‰ç»´ä¸‹çš„ä¸€æ¡å°„çº¿ã€‚</p><h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1 Introduction"></a>1 Introduction</h2><p><strong>Qï¼šä»€ä¹ˆæ˜¯MLPç½‘ç»œï¼Ÿ</strong></p><p><strong>Aï¼š</strong>å¤šå±‚æ„ŸçŸ¥å™¨ï¼ˆMultilayer Perceptronï¼Œç¼©å†™MLPï¼‰æ˜¯ä¸€ç§å‰å‘ç»“æ„çš„äººå·¥ç¥ç»ç½‘ç»œï¼Œæ˜ å°„ä¸€ç»„è¾“å…¥å‘é‡åˆ°ä¸€ç»„è¾“å‡ºå‘é‡ã€‚MLPå¯ä»¥è¢«çœ‹ä½œæ˜¯ä¸€ä¸ªæœ‰å‘å›¾ï¼Œç”±å¤šä¸ªçš„èŠ‚ç‚¹å±‚æ‰€ç»„æˆï¼Œæ¯ä¸€å±‚éƒ½å…¨è¿æ¥åˆ°ä¸‹ä¸€å±‚ã€‚é™¤äº†è¾“å…¥èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªå¸¦æœ‰éçº¿æ€§æ¿€æ´»å‡½æ•°çš„ç¥ç»å…ƒï¼ˆæˆ–ç§°å¤„ç†å•å…ƒï¼‰ã€‚ä¸€ç§è¢«ç§°ä¸ºåå‘ä¼ æ’­ç®—æ³•çš„ç›‘ç£å­¦ä¹ æ–¹æ³•å¸¸è¢«ç”¨æ¥è®­ç»ƒMLPã€‚</p><p><strong>Qï¼šè¿˜æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Ÿ</strong></p><blockquote><p>è¿™é‡Œæ˜¯æ¬è¿çš„ï¼Œç›®å‰å¹¶ä¸äº†è§£PINN</p></blockquote><p><strong>Aï¼š</strong>è¿™ç¯‡è®ºæ–‡çš„æ€æƒ³éå¸¸åƒæµä½“åŠ›å­¦çš„PINNï¼Œä¹Ÿæ˜¯ä½¿ç”¨ä¸€ä¸ªç¥ç»ç½‘ç»œæ‹ŸåˆæŸä¸€ä¸ªå¯¹è±¡ã€‚PINNæ˜¯ç”¨ç½‘ç»œè¾“å‡ºå°½å¯èƒ½æ‹Ÿåˆç¦»æ•£ç‚¹çš„å‡½æ•°å€¼ï¼Œè€ŒNERFå°±æ˜¯ç”¨ç¥ç»ç½‘ç»œçš„è¾“å‡ºæ‹Ÿåˆç¨€ç–çš„ç›¸æœºæ‹æ‘„å›¾åƒã€‚è€Œä¸”ï¼Œä¸ä¸€èˆ¬çš„é—®é¢˜ä¸åŒï¼ŒPINNå’ŒNERFéƒ½æ˜¯å°½å¯èƒ½è¿‡æ‹Ÿåˆæ ‡ç­¾å€¼ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯åº”ç”¨äºæŸä¸€ä¸ªç‰¹å®šçš„å¯¹è±¡ï¼Œå¦‚å‰è€…åº”ç”¨äºæŸä¸€ä¸ªåå¾®åˆ†æ–¹ç¨‹ï¼ˆç»„ï¼‰ï¼Œåè€…åº”ç”¨äºæŸä¸€ä¸ªåœºæ™¯ã€‚ä½†æ˜¯è¿™å¼•å‡ºäº†å¦ä¸€ä¸ªé—®é¢˜ï¼šç½‘ç»œçš„æ³›åŒ–æ€§å¾ˆå·®ï¼Œå³ä¸èƒ½é€šè¿‡å¾®è°ƒå°†ç½‘ç»œè¿ç§»é€‚åº”äºå¦ä¸€ä¸ªä¸åŒçš„åœºæ™¯ã€‚</p><p>å¦å¤–æœ‰å¾ˆå¤šä¼˜ç‚¹ä¹Ÿæ˜¯PINNå’ŒNERFæ‰€å…±é€šçš„ã€‚æ¯”å¦‚ï¼Œæµä½“åŠ›å­¦æ±‚è§£æ–¹ç¨‹çš„æ•°å€¼æ–¹æ³•ï¼Œéœ€è¦é‡‡æ ·å¤§é‡çš„ç‚¹æ‰èƒ½é€¼è¿‘çœŸå®è§£ï¼Œè€Œä¸”å¤©ç„¶çš„æ—¶åºç‰¹å¾å¯¼è‡´äº†æ±‚è§£æ•ˆç‡çš„ä½ä¸‹ï¼›NERFä»¥å‰çš„å­˜å‚¨ç¦»æ•£åŒ–ä½“ç½‘ç»œä¹Ÿéœ€è¦è€—è´¹å¤§é‡å­˜å‚¨æˆæœ¬ã€‚</p><p>æ›´ä¸€èˆ¬åœ°è¯´ï¼ŒPINNå…¨ç§°æ˜¯physical-informed neural networkï¼ŒNERFæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§ç‰©ç†ç†è®ºä¸ç¥ç»ç½‘ç»œçš„èåˆã€‚æµä½“åŠ›å­¦çš„PINNå’ŒNERFæœ‰å¤©ç„¶çš„è¿‘ä¼¼æ€§è‡ªç„¶ä¹Ÿå°±ä¸å¥‡æ€ªäº†ã€‚</p><h2 id="2-Related-Work"><a href="#2-Related-Work" class="headerlink" title="2 Related Work"></a>2 Related Work</h2><p>æš‚æ—¶æ²¡æœ‰é—®é¢˜</p><h2 id="3-Neural-Radiance-Field-Scene-Representation"><a href="#3-Neural-Radiance-Field-Scene-Representation" class="headerlink" title="3 Neural Radiance Field Scene Representation"></a>3 Neural Radiance Field Scene Representation</h2><p><strong>Qï¼šå¦‚ä½•ç†è§£â€We encourage the representation to be multiview consistent by restricting the network to predict the volume density Ïƒ as a function of only the location x, while allowing the RGB color c to be predicted as a function of both location and viewing direction. â€œå³ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆè¦é™åˆ¶ä½“ç§¯å¯†åº¦Ïƒä½œä¸ºä½ç½®xçš„å‡½æ•°ï¼Œè€Œè®©é¢œè‰²cä½œä¸ºä½ç½®xå’Œè§‚çœ‹æ–¹å‘(Î¸ï¼ŒÏ†)çš„å‡½æ•°ï¼Ÿè§‚çœ‹æ–¹å‘(Î¸ï¼ŒÏ†)ä¸ºä»€ä¹ˆä¼šå½±å“å¤šè§†å›¾çš„ä¸€è‡´æ€§ï¼Ÿ</strong></p><p><strong>æ€è€ƒï¼š</strong>ä»è®ºæ–‡é‡Œé¢çœ‹ï¼Œå®ƒè¿™é‡Œçš„æ“ä½œæ˜¯å…ˆç”¨8ä¸ªå®Œå…¨è¿æ¥å±‚å¤„ç†è¾“å…¥çš„3Dåæ ‡$(xï¼Œyï¼Œz)$ï¼Œå¾—åˆ°ä¸€ä¸ªä½“ç§¯å¯†åº¦$Ïƒ$å’Œ256ç»´çš„ç‰¹å¾å‘é‡ã€‚ç„¶åç‰¹å¾å‘é‡å’Œè§‚çœ‹æ–¹å‘$(Î¸ï¼ŒÏ†)$è¿æ¥èµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ª256+2ç»´çš„å‘é‡ï¼Œå†ç»™åˆ°æœ€åçš„å…¨è¿æ¥å±‚é‡Œé¢ï¼Œä»è€Œè¾“å‡ºä¸è¯•å›¾ç›¸å…³çš„é¢œè‰²$c$ã€‚</p><p>è¿™æ ·å¤„ç†è™½ç„¶æ˜¯ä¸ºäº†é™åˆ¶ä½“ç§¯å¯†åº¦Ïƒä½œä¸ºä½ç½®xçš„å‡½æ•°ï¼Œä½†ä¼šä¸ä¼šä¹Ÿå¯¼è‡´é¢œè‰²$c$å’Œè§‚å¯Ÿæ–¹å‘$(Î¸ï¼ŒÏ†)$çš„å…³ç³»ä¸æ˜¯å¾ˆå¤§äº†ï¼ˆæ¯•ç«Ÿåªå äº†ä¸¤ä¸ªç»´åº¦ï¼‰ï¼Ÿè¿™æ ·çš„è¯ï¼Œå¦‚ä½•è®¾è®¡å¹¶ä¼˜åŒ–é’ˆå¯¹ç‰¹å®šç‰©ç†é—®é¢˜çš„ç½‘ç»œï¼Ÿ</p><p>åœ¨çŸ¥ä¹ä¸Šçœ‹åˆ°ä¸€ä¸ªå¾ˆæœ‰è¶£çš„æ¢è®¨ï¼šæˆ‘ä»¬ç›´è§‰ç†è§£ç©ºé—´ç‚¹å’Œé¢œè‰²æ˜¯æ²¡æœ‰ä»»ä½•å…³ç³»çš„ï¼Œåœ¨ä¸€ä¸ªç©ºé—´ç‚¹æ”¾ä»€ä¹ˆä¸œè¥¿å®Œå…¨æ˜¯äººä¸ºç¡®å®šã€‚ä½†æ˜¯è¿™ç¯‡æ–‡ç« å¯ä»¥é€šè¿‡MLPç¡¬æ‹Ÿåˆè¿™ç§å…³ç³»ï¼Œå…¶ä¸­ä¸€ä¸ªå‰ææ˜¯MLPåªç”¨äºæŸä¸€ç‰¹å®šåœºæ™¯çš„æ¸²æŸ“ï¼Œåªæ˜¯å­¦ä¹ è¿™ç§æ‹Ÿåˆå…³ç³»è€Œä¸æ˜¯å­¦ä¼šæ¨ç†ã€‚æ‰€ä»¥ï¼Œå¦‚æœè¦ä½¿å¾—ç½‘ç»œå…·å¤‡è¿ç§»æ³›åŒ–èƒ½åŠ›ï¼Œå¿…é¡»è§£é™¤åæ ‡ä¸RGBè¿™ç§ä¸åˆé€»è¾‘çš„æ˜ å°„å…³ç³»ã€‚</p><p><strong>Aï¼š</strong>TODO</p><h2 id="4-Volume-Rendering-with-Radiance-Fields"><a href="#4-Volume-Rendering-with-Radiance-Fields" class="headerlink" title="4 Volume Rendering with Radiance Fields"></a>4 Volume Rendering with Radiance Fields</h2><p><strong>Qï¼šå¦‚ä½•ç†è§£â€œThe volume density Ïƒ(x) can be interpreted as the diï¬€erential probability of a ray terminating at an inï¬nitesimal particle at location x. â€</strong></p><p><strong>Aï¼š</strong>æˆ‘è®¤ä¸ºè¿™é‡Œåº”è¯¥å’Œ<strong>Abstract</strong>éƒ¨åˆ†çš„é—®é¢˜<strong>â€œå¦‚ä½•ç†è§£volume densityâ€</strong>æ˜¯ä¸€æ ·çš„ã€‚è¿™å¥è¯ç¿»è¯‘è¿‡æ¥å°±æ˜¯â€œä½“ç§¯å¯†åº¦$Ïƒ(x)$å¯ä»¥è§£é‡Šä¸ºä¸€æ¡å°„çº¿åœ¨$x$ä½ç½®çš„æ— ç©·å°ç²’å­å¤„ç»ˆæ­¢çš„å¾®åˆ†æ¦‚ç‡â€ï¼Œæ¯”è¾ƒæ‹—å£ï¼Œä¸è¿‡å¾ˆæ˜æ˜¾å…³é”®éƒ¨åˆ†æ˜¯â€œå°„çº¿åœ¨æŸä¸ªä½ç½®ç»ˆæ­¢çš„å¾®åˆ†æ¦‚ç‡â€ã€‚è¿™çœ‹èµ·æ¥åº”è¯¥å’Œä¹‹å‰è§£é‡Šçš„ä¸é€æ˜åº¦å·®ä¸å¤šï¼Œå…‰åœ¨è¿™é‡Œç»ˆæ­¢ï¼ˆè¢«å¸æ”¶ï¼‰çš„æ¦‚ç‡è¶Šå¤§å°±è¯´æ˜è¿™é‡Œè¶Šä¸é€æ˜ã€‚è€Œä¹‹æ‰€ä»¥æ˜¯å¾®åˆ†æ¦‚ç‡ï¼Œåº”è¯¥æ˜¯ä½“ç§¯å¯†åº¦$Ïƒ(x)$è¡¨ç¤ºçš„åªæ˜¯æŸä¸ªç‚¹çš„ä¸é€æ˜ç‡ã€‚</p><p><strong>Qï¼šå‰é¢å®šä¹‰çš„ç½‘ç»œå·²ç»è®¡ç®—å‡ºäº†ä»æŸä¸ªè§†è§’çœ‹åˆ°çš„æŸç‚¹é¢œè‰²$c=(rï¼Œgï¼Œb)$å’Œä½“ç§¯å¯†åº¦$Ïƒ$ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œä»ç„¶éœ€è¦é€šè¿‡å…¬å¼1æŠŠé¢„æœŸé¢œè‰²$C$è®¡ç®—å‡ºæ¥ï¼Ÿå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸ºä»€ä¹ˆä¸ç›´æ¥æ‹Ÿåˆï¼Ÿ</strong></p><p><strong>Aï¼š</strong>$C$æ˜¯æœ€ç»ˆæ¸²æŸ“æ—¶éœ€è¦è®¡ç®—çš„å€¼ï¼Œ$c$æ˜¯RGBé¢œè‰²å€¼ã€‚æ‹Ÿåˆçš„åªæ˜¯ç©ºé—´å•ç‚¹çš„é¢œè‰²$c$ï¼Œåªæœ‰é€šè¿‡ç¦»æ•£ç§¯åˆ†ä¸€æ¡å…‰çº¿ä¸Šæ‰€æœ‰é‡‡æ ·å•ç‚¹çš„é¢œè‰²$c$ï¼Œæ‰èƒ½å¾—åˆ°ä»æŸä¸ªè§†è§’çœ‹è¿‡å»çš„2Då›¾åƒä¸ŠæŸä¸ªç‚¹çš„æœ€ç»ˆæ¸²æŸ“é¢œè‰²ã€‚å¦‚æœç¡¬è¦æ‹Ÿåˆæ•´æ¡å…‰çº¿æ‰€æœ‰ç‚¹çš„$C$ä¸”ä½¿å®ƒä»¬ä¸€æ ·ï¼Œé‚£å°±åªæ˜¯angle-dependentè€Œéview-dependentäº†ï¼ŒRGBå’Œxyzåæ ‡å‚æ•°è¿˜æ˜¯æœ‰å…³ç³»çš„ã€‚</p><p><strong>PSï¼šè¿™éƒ¨åˆ†å…¬å¼1åˆ°å…¬å¼3æ˜¯è¿ç»­ç§¯åˆ†ç¦»æ•£åŒ–çš„æ¨å¯¼ï¼Œè¿™æ˜¯æœ€åŸºæœ¬çš„æ•°å€¼æ–¹æ³•ï¼Œéœ€è¦å¥½å¥½å›é¡¾ä¸€ä¸‹ï¼ï¼ï¼å¦å¤–ä¸€ä¸ªå°±æ˜¯ï¼Œç›®å‰æ²¡æœ‰å­¦ä¹ å›¾å½¢å­¦ç›¸å…³çš„ä¸€äº›çŸ¥è¯†ï¼Œè¿™æ–¹é¢çŸ¥è¯†æ¬ ç¼ºæ¯”è¾ƒå¤šã€‚</strong></p><h2 id="5-Optimizing-a-Neural-Radiance-Field"><a href="#5-Optimizing-a-Neural-Radiance-Field" class="headerlink" title="5 Optimizing a Neural Radiance Field"></a>5 Optimizing a Neural Radiance Field</h2><h3 id="5-1-Positional-encoding"><a href="#5-1-Positional-encoding" class="headerlink" title="5.1 Positional encoding"></a>5.1 Positional encoding</h3><p><strong>Qï¼šä¸ºä»€ä¹ˆç¬¬ä¸€æ®µè¯´ä½¿ç”¨é«˜é¢‘å‡½æ•°å°†è¾“å…¥æ˜ å°„åˆ°æ›´é«˜ç»´ç©ºé—´ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°æ‹ŸåˆåŒ…å«é«˜é¢‘å˜åŒ–çš„æ•°æ®ï¼Ÿ</strong></p><p><strong>æ€è€ƒï¼š</strong>è¿™ç§æ•°æ®é«˜é¢‘å˜åŒ–çš„æ€æƒ³ä¸ä»…ä»…å±€é™åœ¨ä¸‰ç»´é‡å»ºä¸­ã€‚æˆ‘è§‰å¾—å¯ä»¥æ³›åŒ–åˆ°å…·æœ‰å‰§çƒˆåŸŸå˜åŒ–çš„æ•°æ®é›†ï¼Œæ­¤æ—¶å¯ä»¥å¯¹è¾“å…¥æ•°æ®è¿›è¡Œé«˜ç»´æ˜ å°„ï¼Œä»¥è·å¾—å¯¹æ•°æ®æ›´å¥½çš„è¡¨å¾ï¼Œæ›´å¥½åœ°å®ç°æ•°æ®åŸŸé€‚åº”ã€‚</p><p><strong>Aï¼š</strong>TODO</p><p><strong>Qï¼šå¦‚ä½•ç†è§£æ­¤å¤„çš„ç¼–ç å‡½æ•°ï¼Ÿ</strong></p><p><strong>Aï¼š</strong>TODO</p><h3 id="5-2-Hierarchical-volume-sampling"><a href="#5-2-Hierarchical-volume-sampling" class="headerlink" title="5.2 Hierarchical volume sampling"></a>5.2 Hierarchical volume sampling</h3><p><strong>Qï¼šä¸ºä»€ä¹ˆé€šè¿‡åŒæ—¶ä¼˜åŒ–ä¸¤ä¸ªç½‘ç»œï¼ˆç²—ç½‘ç»œå’Œç»†ç½‘ç»œï¼‰å¯ä»¥è§£å†³è‡ªç”±ç©ºé—´å’Œé®æŒ¡åŒºåŸŸè¢«é‡å¤é‡‡æ ·çš„é—®é¢˜ï¼Ÿ</strong></p><p><strong>Aï¼š</strong>TODO</p><h3 id="5-3-Implementation-details"><a href="#5-3-Implementation-details" class="headerlink" title="5.3 Implementation details"></a>5.3 Implementation details</h3><p>æš‚æ—¶æ²¡æœ‰é—®é¢˜</p><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ol><li><a href="https://zhuanlan.zhihu.com/p/542200751">NeRFè®ºæ–‡é˜…è¯»</a></li><li><a href="http://www.liuxiao.org/2021/11/%e8%ae%ba%e6%96%87%e7%ac%94%e8%ae%b0%ef%bc%9anerf-representing-scenes-as-neural-radiance-fields-for-view-synthesis/">è®ºæ–‡ç¬”è®°ï¼šNeRF: Representing Scenes as Neural Radiance Fields for View Synthesis</a></li><li><a href="https://zhuanlan.zhihu.com/p/360365941">ã€NeRFè®ºæ–‡ç¬”è®°ã€‘ç”¨äºè§†å›¾åˆæˆçš„ç¥ç»è¾å°„åœºæŠ€æœ¯</a></li><li><a href="https://blog.csdn.net/YuhsiHu/article/details/124318473">ã€è®ºæ–‡ç²¾è¯»ã€‘NeRFä¸­çš„æ•°å­¦å…¬å¼æ¨å¯¼</a></li><li><a href="https://raymondkevin.top/2021/07/22/neural-radiance-fields-volume-rendering-%E5%85%AC%E5%BC%8F%E5%88%86%E6%9E%90/">Neural Radiance Fieldâ€™s Volume Rendering å…¬å¼åˆ†æ</a></li><li><a href="https://zh.m.wikipedia.org/zh-hans/%E5%A4%9A%E5%B1%82%E6%84%9F%E7%9F%A5%E5%99%A8">å¤šå±‚æ„ŸçŸ¥å™¨</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NeRF </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NeRFå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ï¼šè®ºæ–‡ç¿»è¯‘</title>
      <link href="2022/08/19/nerf-notes-1/"/>
      <url>2022/08/19/nerf-notes-1/</url>
      
        <content type="html"><![CDATA[<h1 id="NeRFå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ï¼šè®ºæ–‡ç¿»è¯‘"><a href="#NeRFå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ï¼šè®ºæ–‡ç¿»è¯‘" class="headerlink" title="NeRFå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ï¼šè®ºæ–‡ç¿»è¯‘"></a>NeRFå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ï¼šè®ºæ–‡ç¿»è¯‘</h1><blockquote><p>NeRF: Representing Scenes as Neural Radiance Fields for View Synthesis</p></blockquote><h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><p>æˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–¹æ³•ï¼Œé€šè¿‡ä½¿ç”¨ç¨€ç–çš„è¾“å…¥è§†å›¾é›†æ¥ä¼˜åŒ–åº•å±‚çš„è¿ç»­ä½“ç§¯åœºæ™¯å‡½æ•°ï¼Œæ¥å®ç°åˆæˆå¤æ‚åœºæ™¯çš„æ–°è§†å›¾çš„æœ€æ–°ç»“æœã€‚æˆ‘ä»¬çš„ç®—æ³•ä½¿ç”¨ä¸€ä¸ªå…¨è¿æ¥ï¼ˆéå·ç§¯ï¼‰æ·±åº¦ç½‘ç»œè¡¨ç¤ºä¸€ä¸ªåœºæ™¯ï¼Œè¯¥ç½‘ç»œçš„è¾“å…¥æ˜¯ä¸€ä¸ªè¿ç»­çš„5Dåæ ‡ï¼ˆç©ºé—´ä½ç½®$(x, y, z)$å’Œè§‚çœ‹æ–¹å‘$(\theta, \varphi)$ï¼‰ï¼Œå…¶è¾“å‡ºæ˜¯è¯¥ç©ºé—´ä½ç½®çš„ä½“ç§¯å¯†åº¦å’Œè§†å›¾ç›¸å…³çš„å‘å°„è¾å°„ã€‚æˆ‘ä»¬é€šè¿‡æŸ¥è¯¢æ²¿ç€ç›¸æœºå…‰çº¿çš„5Dåæ ‡æ¥åˆæˆè§†å›¾ï¼Œå¹¶ä½¿ç”¨ç»å…¸çš„ä½“ç§¯æ¸²æŸ“æŠ€æœ¯å°†è¾“å‡ºçš„é¢œè‰²å’Œå¯†åº¦æŠ•å½±åˆ°å›¾åƒä¸­ã€‚å› ä¸ºä½“ç§¯æ¸²æŸ“æ˜¯è‡ªç„¶å¯å¾®çš„ï¼Œä¼˜åŒ–æˆ‘ä»¬çš„è¡¨ç¤ºæ‰€éœ€çš„å”¯ä¸€è¾“å…¥æ˜¯ä¸€ç»„å…·æœ‰å·²çŸ¥ç›¸æœºå§¿æ€çš„å›¾åƒã€‚æˆ‘ä»¬æè¿°äº†å¦‚ä½•æœ‰æ•ˆåœ°ä¼˜åŒ–ç¥ç»è¾å°„åœºï¼Œä»¥å‘ˆç°å…·æœ‰å¤æ‚çš„å‡ ä½•å½¢çŠ¶å’Œå¤–è§‚çš„åœºæ™¯çš„é€¼çœŸçš„æ–°è§‚ç‚¹ï¼Œå¹¶å±•ç¤ºäº†ä¼˜äºä¹‹å‰çš„ç¥ç»æ¸²æŸ“å’Œè§‚ç‚¹åˆæˆå·¥ä½œçš„ç»“æœã€‚</p><h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1 Introduction"></a>1 Introduction</h2><p>åœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ç›´æ¥ä¼˜åŒ–è¿ç»­5Dåœºæ™¯è¡¨ç¤ºçš„å‚æ•°æ¥æœ€å°åŒ–ç½‘ç»œè¾“å‡ºå€¼ä¸æ•è·å›¾åƒä¹‹é—´çš„è¯¯å·®ï¼Œè§£å†³äº†é•¿æœŸå­˜åœ¨çš„è§†å›¾åˆæˆé—®é¢˜ã€‚</p><p><img src="/images/nerf-notes-1/image-20220818203438571.png" alt="å›¾1ï¼šæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–¹æ³•ï¼Œä»ä¸€ç»„è¾“å…¥å›¾åƒä¸­ä¼˜åŒ–åœºæ™¯çš„è¿ç»­5Dç¥ç»è¾å°„åœºè¡¨ç¤ºï¼ˆåœ¨ä»»ä½•è¿ç»­ä½ç½®çš„ä½“ç§¯å¯†åº¦å’Œå–å†³äºè§†å›¾çš„é¢œè‰²ï¼‰ã€‚æˆ‘ä»¬ä½¿ç”¨æ¥è‡ªä½“ç§¯æ¸²æŸ“çš„æŠ€æœ¯ï¼Œæ²¿ç€å°„çº¿ç§¯ç´¯è¿™ä¸ªåœºæ™¯è¡¨ç¤ºçš„æ ·æœ¬ï¼Œä»ä»»ä½•è§†è§’æ¸²æŸ“åœºæ™¯ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯è§†åŒ–äº†åœ¨å‘¨å›´åŠçƒä¸Šéšæœºæ•è·çš„åˆæˆDrumsåœºæ™¯çš„100ä¸ªè¾“å…¥è§†å›¾ï¼Œå¹¶å±•ç¤ºäº†ä»æˆ‘ä»¬ä¼˜åŒ–çš„NeRFè¡¨ç¤ºä¸­æ¸²æŸ“çš„ä¸¤ä¸ªæ–°è§†å›¾ã€‚"></p><p>æˆ‘ä»¬å°†é™æ€åœºæ™¯è¡¨ç¤ºä¸ºè¿ç»­çš„5Då‡½æ•°ï¼Œè¯¥å‡½æ•°çš„è¾“å‡ºå€¼æ˜¯ç©ºé—´ä¸­æ¯ä¸ªç‚¹$(xï¼Œyï¼Œz)$åœ¨æ¯ä¸ªæ–¹å‘$(\thetaï¼Œ\varphi)$ä¸Šå‘å°„çš„è¾å°„åº¦ï¼Œä»¥åŠæ¯ä¸ªç‚¹å¤„çš„å¯†åº¦ã€‚è¯¥å¯†åº¦ç±»ä¼¼äºå¯å¾®åˆ†çš„ä¸é€æ˜åº¦ï¼Œä»£è¡¨å…‰çº¿é€šè¿‡$(xï¼Œyï¼Œz)$æ—¶ç´¯ç§¯çš„è¾å°„é‡ã€‚æˆ‘ä»¬çš„æ–¹æ³•é€šè¿‡ä»å•ä¸€çš„5Dåæ ‡$(xï¼Œyï¼Œzï¼Œ\thetaï¼Œ\varphi)$å›å½’åˆ°ä½“ç§¯å¯†åº¦å’Œä¸è§†è§’æœ‰å…³çš„RGBé¢œè‰²ï¼Œæ¥ä¼˜åŒ–æ²¡æœ‰ä»»ä½•å·ç§¯å±‚çš„æ·±åº¦å®Œå…¨è¿æ¥çš„ç¥ç»ç½‘ç»œï¼Œç”¨è¿™ä¸ªç½‘ç»œæ¥è¡¨ç¤ºè¯¥å‡½æ•°ã€‚ä¸ºäº†æ¸²æŸ“NERFï¼Œæˆ‘ä»¬ï¼šï¼ˆ1ï¼‰ä½¿ç›¸æœºå…‰çº¿ç©¿è¿‡åœºæ™¯ä»¥ç”Ÿæˆä¸€ç»„é‡‡æ ·çš„3Dç‚¹ï¼›ï¼ˆ2ï¼‰ä½¿ç”¨è¿™äº›ç‚¹åŠå…¶å¯¹åº”çš„2Dè§‚å¯Ÿæ–¹å‘ä½œä¸ºç¥ç»ç½‘ç»œçš„è¾“å…¥ä»¥äº§ç”Ÿä¸€ç»„è¾“å‡ºçš„é¢œè‰²å’Œå¯†åº¦ï¼Œä»¥åŠï¼ˆ3ï¼‰ä½¿ç”¨ç»å…¸ç«‹ä½“æ¸²æŸ“æŠ€æœ¯å°†è¿™äº›é¢œè‰²å’Œå¯†åº¦ç´¯ç§¯åˆ°2Då›¾åƒä¸­ã€‚å› ä¸ºè¿™ä¸ªè¿‡ç¨‹è‡ªç„¶æ˜¯å¯å¾®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¢¯åº¦ä¸‹é™æ¥ä¼˜åŒ–è¿™ä¸ªæ¨¡å‹ï¼Œæ–¹æ³•æ˜¯æœ€å°åŒ–æ¯ä¸ªè§‚å¯Ÿå›¾åƒå’Œä»æˆ‘ä»¬çš„è¡¨ç¤ºå‘ˆç°çš„å¯¹åº”è§†å›¾ä¹‹é—´çš„è¯¯å·®ã€‚åœ¨å¤šä¸ªè§†å›¾ä¸Šæœ€å°åŒ–è¯¥è¯¯å·®ï¼Œé¼“åŠ±ç½‘ç»œé€šè¿‡å‘åŒ…å«çœŸå®åŸºç¡€åœºæ™¯å†…å®¹çš„ä½ç½®åˆ†é…é«˜ä½“ç§¯å¯†åº¦å’Œå‡†ç¡®çš„é¢œè‰²æ¥é¢„æµ‹åœºæ™¯çš„è¿è´¯æ¨¡å‹ã€‚å›¾2ç›´è§‚åœ°æ˜¾ç¤ºäº†è¿™ä¸ªæ•´ä½“ç®¡é“ã€‚</p><p><img src="/images/nerf-notes-1/image-20220818203247431.png" alt="å›¾2ï¼šæˆ‘ä»¬çš„ç¥ç»è¾å°„åœºåœºæ™¯è¡¨ç¤ºå’Œå¯åŒºåˆ†çš„æ¸²æŸ“ç¨‹åºçš„æ¦‚è¿°ã€‚æˆ‘ä»¬é€šè¿‡æ²¿ç›¸æœºå°„çº¿çš„5Dåæ ‡ï¼ˆä½ç½®å’Œè§‚å¯Ÿæ–¹å‘ï¼‰é‡‡æ ·æ¥åˆæˆå›¾åƒï¼ˆaï¼‰ï¼Œå°†è¿™äº›ä½ç½®è¾“å…¥MLPä»¥äº§ç”Ÿé¢œè‰²å’Œä½“ç§¯å¯†åº¦ï¼ˆbï¼‰ï¼Œå¹¶ä½¿ç”¨ä½“ç§¯æ¸²æŸ“æŠ€æœ¯å°†è¿™äº›å€¼åˆæˆä¸ºå›¾åƒï¼ˆcï¼‰ã€‚è¿™ä¸ªæ¸²æŸ“å‡½æ•°æ˜¯å¯å¾®åˆ†çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡æœ€å°åŒ–åˆæˆå›¾åƒå’Œåœ°é¢çœŸå®è§‚å¯Ÿå›¾åƒä¹‹é—´çš„æ®‹å·®æ¥ä¼˜åŒ–æˆ‘ä»¬çš„åœºæ™¯è¡¨ç°ï¼ˆdï¼‰ã€‚"></p><p>æˆ‘ä»¬å‘ç°ï¼ŒNERFçš„åŸºç¡€å®ç°ä¸èƒ½æ”¶æ•›åˆ°è¶³å¤Ÿé«˜çš„åˆ†è¾¨ç‡è¡¨ç¤ºï¼Œå¹¶ä¸”åœ¨æ¯æ¡ç›¸æœºå…‰çº¿æ‰€éœ€çš„æ ·æœ¬æ•°å¾ˆåºæ‚ã€‚æˆ‘ä»¬é€šè¿‡ä½¿ç”¨ä½ç½®ç¼–ç æ¥å˜æ¢è¾“å…¥çš„5Dåæ ‡æ¥è§£å†³è¿™äº›é—®é¢˜ï¼Œè¯¥ä½ç½®ç¼–ç ä½¿å¾—MLPèƒ½å¤Ÿè¡¨ç¤ºæ›´é«˜é¢‘ç‡çš„å‡½æ•°ï¼Œå¹¶ä¸”æˆ‘ä»¬æå‡ºäº†åˆ†å±‚é‡‡æ ·è¿‡ç¨‹æ¥å‡å°‘å®ç°é«˜é¢‘ç‡é‡‡æ ·è¿‡ç¨‹æ‰€éœ€è¦çš„æ•°æ®ç‚¹ã€‚</p><p>æˆ‘ä»¬çš„æ–¹æ³•ç»§æ‰¿äº†ä½“ç§¯è¡¨ç¤ºçš„ä¼˜ç‚¹ï¼šä¸¤è€…éƒ½å¯ä»¥è¡¨ç¤ºå¤æ‚çš„çœŸå®ä¸–ç•Œå‡ ä½•å’Œå¤–è§‚ï¼Œå¹¶ä¸”éå¸¸é€‚åˆä½¿ç”¨åŸºäºæ¢¯åº¦çš„ä¼˜åŒ–æ–¹æ³•ã€‚é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬çš„æ–¹æ³•å…‹æœäº†åœ¨é«˜åˆ†è¾¨ç‡ä¸‹å»ºæ¨¡å¤æ‚åœºæ™¯æ—¶ï¼Œå­˜å‚¨ç¦»æ•£åŒ–ä½“ç´ ç½‘æ ¼æ‰€éœ€è¦çš„é«˜æ˜‚æˆæœ¬ã€‚æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬çš„å·¥ä½œå¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ ç‚¹ï¼š</p><p>ï¼ˆ1ï¼‰ä¸€ç§å°†å…·æœ‰å¤æ‚å‡ ä½•å½¢çŠ¶å’Œææ–™çš„è¿ç»­åœºæ™¯è¡¨ç¤ºä¸º5Dç¥ç»è¾å°„åœºçš„æ–¹æ³•ï¼Œå‚æ•°åŒ–ä¸ºåŸºæœ¬MLPç½‘ç»œã€‚</p><p>ï¼ˆ2ï¼‰ä¸€ä¸ªåŸºäºç»å…¸ä½“ç§¯æ¸²æŸ“æŠ€æœ¯çš„å¯åŒºåˆ†çš„æ¸²æŸ“ç¨‹åºï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥ä¼˜åŒ–è¿™äº›æ¥è‡ªæ ‡å‡†RGBå›¾åƒçš„è¡¨ç¤ºã€‚è¿™åŒ…æ‹¬ä¸€ä¸ªåˆ†å±‚é‡‡æ ·ç­–ç•¥ï¼Œå°†MLPçš„èƒ½åŠ›åˆ†é…ç»™å…·æœ‰å¯è§åœºæ™¯å†…å®¹çš„ç©ºé—´ã€‚</p><p>ï¼ˆ3ï¼‰å°†æ¯ä¸ªè¾“å…¥çš„5Dåæ ‡æ˜ å°„åˆ°æ›´é«˜çš„ç»´åº¦ç©ºé—´çš„ä½ç½®ç¼–ç ï¼Œè¿™ä½¿æˆ‘ä»¬èƒ½å¤ŸæˆåŠŸåœ°ä¼˜åŒ–ç¥ç»è¾å°„åœºä»¥è¡¨ç¤ºé«˜é¢‘çš„åœºæ™¯å†…å®¹ã€‚</p><p>æˆ‘ä»¬è¯æ˜äº†æˆ‘ä»¬æ‰€å¾—åˆ°çš„ç¥ç»è¾å°„åœºæ–¹æ³•åœ¨æ•°é‡å’Œè´¨é‡ä¸Šéƒ½ä¼˜äºæœ€å…ˆè¿›çš„è§†å›¾åˆæˆæ–¹æ³•ï¼ŒåŒ…æ‹¬å°†ç¥ç»ä¸‰ç»´è¡¨å¾é€‚åˆäºåœºæ™¯çš„ä½œå“ï¼Œä»¥åŠè®­ç»ƒæ·±åº¦å·ç§¯ç½‘ç»œä»¥é¢„æµ‹é‡‡æ ·ä½“ç§¯è¡¨å¾çš„ä½œå“ã€‚æ®æˆ‘ä»¬æ‰€çŸ¥ï¼Œæœ¬æ–‡æå‡ºäº†ç¬¬ä¸€ä¸ªè¿ç»­çš„ç¥ç»åœºæ™¯è¡¨å¾ï¼Œèƒ½å¤Ÿä»è‡ªç„¶ç¯å¢ƒä¸­æ‹æ‘„çš„RGBå›¾åƒä¸­å‘ˆç°å‡ºçœŸå®ç‰©ä½“å’Œåœºæ™¯çš„é«˜åˆ†è¾¨ç‡é€¼çœŸçš„æ–°è§†å›¾ã€‚</p><h2 id="2-Related-Work"><a href="#2-Related-Work" class="headerlink" title="2 Related Work"></a>2 Related Work</h2><p>è®¡ç®—æœºè§†è§‰çš„ä¸€ä¸ªå¾ˆæœ‰å‰é€”çš„æ–¹å‘æ˜¯åœ¨MLPçš„æƒé‡ä¸­ç¼–ç å¯¹è±¡å’Œåœºæ™¯ï¼Œå®ƒç›´æ¥ä»ä¸‰ç»´ç©ºé—´ä½ç½®æ˜ å°„åˆ°å½¢çŠ¶çš„éšå¼è¡¨ç¤ºã€‚ç„¶è€Œï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿™äº›æ–¹æ³•è¿˜æ— æ³•ä»¥ä¸ä½¿ç”¨ä¸‰è§’å½¢ç½‘æ ¼æˆ–ä½“ç´ ç½‘æ ¼ç­‰ç¦»æ•£è¡¨ç¤ºåœºæ™¯ç›¸åŒçš„ä¿çœŸåº¦å†ç°å…·æœ‰å¤æ‚å‡ ä½•å½¢çŠ¶çš„çœŸå®åœºæ™¯ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å›é¡¾è¿™ä¸¤é¡¹å·¥ä½œï¼Œå¹¶å°†å®ƒä»¬ä¸æˆ‘ä»¬çš„æ–¹æ³•è¿›è¡Œå¯¹æ¯”ï¼Œè¿™å¢å¼ºäº†ç¥ç»åœºæ™¯è¡¨ç¤ºçš„èƒ½åŠ›ï¼Œä»¥äº§ç”Ÿæ¸²æŸ“å¤æ‚çš„ç°å®åœºæ™¯çš„æœ€å…ˆè¿›çš„ç»“æœã€‚</p><h3 id="2-1-Neural-3D-shape-representations"><a href="#2-1-Neural-3D-shape-representations" class="headerlink" title="2.1 Neural 3D shape representations"></a>2.1 Neural 3D shape representations</h3><p>æœ€è¿‘çš„å·¥ä½œé€šè¿‡ä¼˜åŒ–å°†$xyz$åæ ‡æ˜ å°„åˆ°æœ‰ç¬¦å·çš„è·ç¦»å‡½æ•°æˆ–å ç”¨åœºçš„æ·±åº¦ç½‘ç»œï¼Œç ”ç©¶äº†è¿ç»­ä¸‰ç»´å½¢çŠ¶ä½œä¸ºæ°´å¹³é›†çš„éšå¼è¡¨ç¤ºã€‚ç„¶è€Œï¼Œè¿™äº›æ¨¡å‹å—åˆ°å…¶è®¿é—®åœ°é¢çœŸå®ä¸‰ç»´å‡ ä½•çš„éœ€æ±‚çš„é™åˆ¶ï¼Œé€šå¸¸æ¥è‡ªåˆæˆçš„ä¸‰ç»´å½¢çŠ¶æ•°æ®é›†ï¼Œå¦‚ShapeNetã€‚éšåçš„å·¥ä½œé€šè¿‡åˆ¶å®šå¯å¾®æ¸²æŸ“å‡½æ•°ï¼Œæ”¾å®½äº†å¯¹åœ°é¢çœŸå®ä¸‰ç»´å½¢çŠ¶çš„è¦æ±‚ï¼Œå…è®¸ç¥ç»éšå¼å½¢çŠ¶è¡¨ç¤ºä»…ä½¿ç”¨äºŒç»´å›¾åƒè¿›è¡Œä¼˜åŒ–ã€‚Niemeyerç­‰äººå°†æ›²é¢è¡¨ç¤ºä¸ºä¸‰ç»´å ç”¨åœºï¼Œå¹¶ä½¿ç”¨æ•°å€¼æ–¹æ³•æ‰¾åˆ°æ¯æ¡å…‰çº¿çš„æ›²é¢äº¤ç‚¹ï¼Œç„¶åä½¿ç”¨éšå¼å¾®åˆ†è®¡ç®—ç²¾ç¡®çš„å¯¼æ•°ã€‚æ¯ä¸ªå°„çº¿äº¤å‰ä½ç½®ä½œä¸ºç¥ç»ä¸‰ç»´çº¹ç†åŸŸçš„è¾“å…¥ï¼Œè¯¥åŸŸé¢„æµ‹è¯¥ç‚¹çš„æ¼«åå°„é¢œè‰²ã€‚Sitzmannç­‰äººä½¿ç”¨ä¸€ç§ä¸é‚£ä¹ˆç›´æ¥çš„ç¥ç»ä¸‰ç»´è¡¨ç¤ºï¼Œåªéœ€åœ¨æ¯ä¸ªè¿ç»­çš„ä¸‰ç»´åæ ‡ä¸Šè¾“å‡ºä¸€ä¸ªç‰¹å¾å‘é‡å’ŒRGBé¢œè‰²ï¼Œå¹¶æå‡ºä¸€ä¸ªç”±æ²¿ç€æ¯æ¡å°„çº¿è¡Œè¿›æ¥å†³å®šè¡¨é¢çš„ä½ç½®çš„é€’å½’ç¥ç»ç½‘ç»œç»„æˆçš„å¯å¾®å‘ˆç°å‡½æ•°ã€‚</p><p>è™½ç„¶è¿™äº›æŠ€æœ¯å¯èƒ½ä»£è¡¨å¤æ‚å’Œé«˜åˆ†è¾¨ç‡çš„å‡ ä½•ï¼Œä½†åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå®ƒä»¬ä»…é™äºä½å‡ ä½•å¤æ‚åº¦çš„ç®€å•å½¢çŠ¶ï¼Œå¯¼è‡´è¿‡åº¦å¹³æ»‘æ¸²æŸ“ã€‚æˆ‘ä»¬å±•ç¤ºäº†ä¸€ç§ä¼˜åŒ–ç½‘ç»œç¼–ç 5ç»´è¾å°„åœºï¼ˆå…·æœ‰äºŒç»´è§†è§‰ç›¸å…³å¤–è§‚çš„ä¸‰ç»´ä½“ç§¯ï¼‰çš„æ›¿ä»£ç­–ç•¥ï¼Œå¯ä»¥ä»£è¡¨æ›´é«˜åˆ†è¾¨ç‡çš„å‡ ä½•å½¢çŠ¶å’Œå¤–è§‚ï¼Œä»¥å‘ˆç°å¤æ‚åœºæ™¯çš„é€¼çœŸçš„æ–°è§†å›¾ã€‚</p><h3 id="2-2-View-synthesis-and-image-based-rendering"><a href="#2-2-View-synthesis-and-image-based-rendering" class="headerlink" title="2.2 View synthesis and image-based rendering"></a>2.2 View synthesis and image-based rendering</h3><p>è®¡ç®—æœºè§†è§‰å’Œå›¾åƒç¤¾åŒºé€šè¿‡ä»è§‚å¯Ÿåˆ°çš„å›¾åƒä¸­é¢„æµ‹ä¼ ç»Ÿçš„å‡ ä½•å›¾å½¢å’Œå¤–è§‚è¡¨ç¤ºï¼Œåœ¨æ–°è§†å›¾åˆæˆçš„ä»»åŠ¡ä¸Šå–å¾—äº†é‡å¤§è¿›å±•ã€‚ä¸€ç§æµè¡Œçš„æ–¹æ³•æ˜¯ä½¿ç”¨åŸºäºç½‘æ ¼çš„åœºæ™¯è¡¨ç¤ºã€‚å¯å¾®åˆ†æ …æ ¼å™¨æˆ–ç¤ºè¸ªå™¨å¯ä»¥ç›´æ¥ä¼˜åŒ–ç½‘æ ¼è¡¨ç¤ºï¼Œä½¿ç”¨æ¢¯åº¦ä¸‹é™å¤åˆ¶ä¸€ç»„è¾“å…¥å›¾åƒã€‚ç„¶è€Œï¼ŒåŸºäºå›¾åƒé‡æŠ•å½±çš„åŸºäºæ¢¯åº¦çš„ç½‘æ ¼ä¼˜åŒ–å¾€å¾€æ˜¯å›°éš¾çš„ï¼Œå¯èƒ½æ˜¯ç”±äºå±€éƒ¨æœ€å°å€¼æˆ–æŸå¤±æ™¯è§‚çš„æ¡ä»¶è¾ƒå·®ã€‚æ­¤å¤–ï¼Œè¯¥ç­–ç•¥è¦æ±‚åœ¨ä¼˜åŒ–ä¹‹å‰æä¾›ä¸€ä¸ªå…·æœ‰å›ºå®šæ‹“æ‰‘çš„æ¨¡æ¿ç½‘æ ¼ä½œä¸ºåˆå§‹åŒ–ï¼Œè¿™å¯¹äºæ— çº¦æŸçš„çœŸå®åœºæ™¯é€šå¸¸æ˜¯ä¸å¯ç”¨çš„ã€‚</p><p>å¦ä¸€ç±»æ–¹æ³•ä½¿ç”¨ä½“ç§¯è¡¨ç¤ºæ¥è§£å†³ä»ä¸€ç»„è¾“å…¥çš„RGBå›¾åƒä¸­è¿›è¡Œé«˜è´¨é‡é€¼çœŸçš„è§†ç‚¹åˆæˆçš„ä»»åŠ¡ã€‚ä½“ç§¯æ–¹æ³•èƒ½å¤Ÿå®é™…åœ°è¡¨ç¤ºå¤æ‚çš„å½¢çŠ¶å’Œææ–™ï¼Œéå¸¸é€‚åˆåŸºäºæ¢¯åº¦çš„ä¼˜åŒ–ï¼Œå¹¶ä¸”å¾€å¾€æ¯”åŸºäºç½‘æ ¼çš„æ–¹æ³•äº§ç”Ÿæ›´å°‘çš„è§†è§‰ä¸Šåˆ†æ•£æ³¨æ„åŠ›çš„ä¼ªå½±ã€‚æ—©æœŸçš„ä½“ç§¯æµ‹é‡æ–¹æ³•ä½¿ç”¨è§‚å¯Ÿåˆ°çš„å›¾åƒæ¥ç›´æ¥å½©è‰²ä½“ç´ ç½‘æ ¼ã€‚æœ€è¿‘ï¼Œä¸€äº›æ–¹æ³•ä½¿ç”¨å¤šä¸ªåœºæ™¯çš„å¤§å‹æ•°æ®é›†æ¥è®­ç»ƒæ·±åº¦ç½‘ç»œï¼Œä»ä¸€ç»„è¾“å…¥å›¾åƒä¸­é¢„æµ‹é‡‡æ ·çš„ä½“ç§¯è¡¨ç¤ºï¼Œç„¶åä½¿ç”¨alphaåˆæˆæˆ–å­¦ä¹ åˆæˆåœ¨æµ‹è¯•æ—¶å‘ˆç°æ–°çš„è§†å›¾ã€‚å…¶ä»–å·¥ä½œé’ˆå¯¹æ¯ä¸ªç‰¹å®šåœºæ™¯ä¼˜åŒ–äº† CNN å’Œé‡‡æ ·ä½“ç´ ç½‘æ ¼çš„ç»„åˆï¼Œä½¿å¾— CNN å¯ä»¥è¡¥å¿æ¥è‡ªä½åˆ†è¾¨ç‡ä½“ç´ ç½‘æ ¼çš„ç¦»æ•£åŒ–ä¼ªå½±ï¼Œæˆ–è€…å…è®¸é¢„æµ‹çš„ä½“ç´ ç½‘æ ¼æ ¹æ®è¾“å…¥æ—¶é—´æˆ–åŠ¨ç”»æ§åˆ¶è€Œå˜åŒ–ã€‚å°½ç®¡è¿™äº›ä½“ç§¯æŠ€æœ¯åœ¨æ–°è§†å›¾åˆæˆæ–¹é¢å–å¾—äº†ä»¤äººå°è±¡æ·±åˆ»çš„ç»“æœï¼Œä½†ç”±äºå…¶ç¦»æ•£é‡‡æ ·ï¼Œå…¶æ‰©å±•åˆ°æ›´é«˜åˆ†è¾¨ç‡å›¾åƒçš„èƒ½åŠ›å—åˆ°æ—¶é—´å’Œç©ºé—´å¤æ‚æ€§çš„æ ¹æœ¬é™åˆ¶â€”â€”æ¸²æŸ“æ›´é«˜åˆ†è¾¨ç‡çš„å›¾åƒéœ€è¦æ›´ç²¾ç»†çš„ä¸‰ç»´ç©ºé—´é‡‡æ ·ã€‚æˆ‘ä»¬é€šè¿‡åœ¨æ·±åº¦å…¨è¿æ¥ç¥ç»ç½‘ç»œçš„å‚æ•°ä¸­ç¼–ç ä¸€ä¸ªè¿ç»­çš„ä½“ç§¯æ¥è§„é¿è¿™ä¸ªé—®é¢˜ï¼Œè¿™ä¸ä»…äº§ç”Ÿæ¯”ä¹‹å‰çš„ä½“ç§¯æ–¹æ³•æ˜æ˜¾æ›´é«˜è´¨é‡çš„æ¸²æŸ“ï¼Œè€Œä¸”åªéœ€è¦è¿™äº›é‡‡æ ·ä½“ç§¯è¡¨ç¤ºçš„å­˜å‚¨æˆæœ¬çš„ä¸€å°éƒ¨åˆ†ã€‚</p><h2 id="3-Neural-Radiance-Field-Scene-Representation"><a href="#3-Neural-Radiance-Field-Scene-Representation" class="headerlink" title="3 Neural Radiance Field Scene Representation"></a>3 Neural Radiance Field Scene Representation</h2><p>æˆ‘ä»¬å°†è¿ç»­åœºæ™¯è¡¨ç¤ºä¸º5DçŸ¢é‡å‡½æ•°ï¼Œå…¶è¾“å…¥æ˜¯3Dä½ç½®$x=(xï¼Œyï¼Œz)$å’Œ2Dè§‚å¯Ÿæ–¹å‘$(\thetaï¼Œ\varphi)$çš„ç»„åˆï¼Œå…¶è¾“å‡ºæ˜¯ä»æŸä¸ªè§†è§’çœ‹åˆ°çš„æŸç‚¹é¢œè‰²$c=(rï¼Œgï¼Œb)$å’Œä½“ç§¯å¯†åº¦$\sigma$ã€‚å®é™…å¤„ç†ä¸­ï¼Œæˆ‘ä»¬ç”¨MLPç½‘ç»œé€¼è¿‘è¿™ç§è¿ç»­çš„5Dåœºæ™¯è¡¨ç¤ºï¼Œå¹¶ä¼˜åŒ–å…¶æƒé‡$\Theta$ï¼Œä»æ¯ä¸ªè¾“å…¥çš„5Dåæ ‡æ˜ å°„åˆ°å…¶ç›¸åº”çš„ä½“ç§¯å¯†åº¦å’Œå®šå‘å‘å°„é¢œè‰²ã€‚</p><p>ä¸ºäº†è®©è¡¨ç¤ºçš„å¤šè§†å›¾ä¸€è‡´ï¼Œæˆ‘ä»¬é€šè¿‡é™åˆ¶ç½‘ç»œé¢„æµ‹ä½“ç§¯å¯†åº¦$\sigma$ä»…ä½œä¸ºä½ç½®$x$çš„å‡½æ•°ï¼ŒåŒæ—¶å…è®¸RGBé¢œè‰²$c$ä½œä¸ºä½ç½®å’Œè§‚çœ‹æ–¹å‘çš„å‡½æ•°æ¥é¢„æµ‹ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼ŒMLP$F_\Theta$é¦–å…ˆå¤„ç†å…·æœ‰8ä¸ªå®Œå…¨è¿æ¥å±‚çš„è¾“å…¥3Dåæ ‡$x$ï¼ˆä½¿ç”¨ReLUæ¿€æ´»å’Œæ¯å±‚256ä¸ªé€šé“ï¼‰ï¼Œå¹¶è¾“å‡º$\sigma$å’Œä¸€ä¸ª256ç»´çš„ç‰¹å¾å‘é‡ã€‚ç„¶åï¼Œè¿™ä¸ªç‰¹å¾å‘é‡ä¸ç›¸æœºå°„çº¿çš„æŸ¥çœ‹æ–¹å‘è¿æ¥èµ·æ¥ï¼Œå¹¶ä¼ é€’åˆ°ä¸€ä¸ªé¢å¤–çš„å®Œå…¨è¿æ¥å±‚ï¼ˆä½¿ç”¨ReLUæ¿€æ´»å’Œ128ä¸ªé€šé“ï¼‰ï¼Œè¾“å‡ºä¸è§†å›¾ç›¸å…³çš„RGBé¢œè‰²ã€‚</p><p>å…³äºæˆ‘ä»¬çš„æ–¹æ³•å¦‚ä½•ä½¿ç”¨è¾“å…¥æŸ¥çœ‹æ–¹å‘ï¼ˆthe input viewing directionï¼‰æ¥è¡¨ç¤ºéå…°ä¼¯å¼ï¼ˆnon-Lambertianï¼‰çš„æ•ˆæœï¼Œè¯·å‚è§å›¾3ã€‚</p><p><img src="/images/nerf-notes-1/image-20220819170634947-16609183673502.png" alt="å›¾3ï¼šä¸€ç§ä¸è§†å›¾ç›¸å…³çš„å‘å°„è¾å°„çš„å¯è§†åŒ–æ–¹æ³•ã€‚æˆ‘ä»¬çš„ç¥ç»è¾å°„åœºè¡¨ç¤ºè¾“å‡ºRGBé¢œè‰²ä½œä¸ºç©ºé—´ä½ç½®xå’Œè§‚å¯Ÿæ–¹å‘dçš„5Då‡½æ•°ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åœ¨èˆ¹èˆ¶åœºæ™¯çš„ç¥ç»è¡¨ç¤ºä¸­å¯è§†åŒ–ä¸¤ä¸ªç©ºé—´ä½ç½®çš„æ–¹å‘é¢œè‰²åˆ†å¸ƒã€‚åœ¨ï¼ˆaï¼‰å’Œï¼ˆbï¼‰ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†æ¥è‡ªä¸¤ä¸ªä¸åŒçš„ç›¸æœºä½ç½®çš„ä¸¤ä¸ªå›ºå®šçš„3Dç‚¹çš„å¤–è§‚ï¼šä¸€ä¸ªåœ¨èˆ¹çš„ä¸€ä¾§ï¼ˆæ©™è‰²æ’å›¾ï¼‰ï¼Œå¦ä¸€ä¸ªåœ¨æ°´é¢ä¸Šï¼ˆè“è‰²æ’å›¾ï¼‰ã€‚æˆ‘ä»¬çš„æ–¹æ³•é¢„æµ‹äº†è¿™ä¸¤ä¸ªä¸‰ç»´ç‚¹çš„ä¸æ–­å˜åŒ–çš„é•œé¢å¤–è§‚ï¼Œå¹¶ä¸”åœ¨ï¼ˆcï¼‰ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†è¿™ç§è¡Œä¸ºå¦‚ä½•åœ¨è§‚çœ‹æ–¹å‘çš„æ•´ä¸ªåŠçƒè¿ç»­åœ°æ¨å¹¿ã€‚"></p><p>å¦‚å›¾4æ‰€ç¤ºï¼Œåœ¨æ²¡æœ‰è§†å›¾ä¾èµ–æ€§çš„æƒ…å†µä¸‹è®­ç»ƒçš„æ¨¡å‹ï¼ˆä»…$x$ä½œä¸ºè¾“å…¥ï¼‰éš¾ä»¥è¡¨ç¤ºé•œé¢åå°„ã€‚</p><p><img src="/images/nerf-notes-1/image-20220819170644501.png" alt="å›¾4ï¼šåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å±•ç¤ºäº†æˆ‘ä»¬çš„å®Œæ•´æ¨¡å‹å¦‚ä½•ä»è¡¨ç¤ºä¸è§†å›¾ç›¸å…³çš„è¾å°„äº®åº¦å’Œé€šè¿‡é«˜é¢‘ä½ç½®ç¼–ç ä¼ é€’è¾“å…¥åæ ‡ä¸­è·ç›Šã€‚ç§»é™¤è§†å›¾ç›¸å…³æ€§å¯é˜²æ­¢æ¨¡å‹åœ¨æ¨åœŸæœºè¸æ¿ä¸Šé‡æ–°åˆ›å»ºé•œé¢åå°„ã€‚åˆ é™¤ä½ç½®ç¼–ç ä¼šå¤§å¤§é™ä½æ¨¡å‹è¡¨ç¤ºé«˜é¢‘å‡ ä½•ä½“å’Œçº¹ç†çš„èƒ½åŠ›ï¼Œä»è€Œå¯¼è‡´è¿‡åº¦å¹³æ»‘çš„å¤–è§‚ã€‚"></p><h2 id="4-Volume-Rendering-with-Radiance-Fields"><a href="#4-Volume-Rendering-with-Radiance-Fields" class="headerlink" title="4 Volume Rendering with Radiance Fields"></a>4 Volume Rendering with Radiance Fields</h2><p>æˆ‘ä»¬çš„5Dç¥ç»è¾å°„åœºå°†åœºæ™¯è¡¨ç¤ºä¸ºç©ºé—´ä¸­ä»»æ„ç‚¹çš„ä½“ç§¯å¯†åº¦å’Œç‚¹çš„é¢œè‰²ã€‚æˆ‘ä»¬ä½¿ç”¨ç»å…¸ç«‹ä½“æ¸²æŸ“çš„åŸç†æ¥æ¸²æŸ“é€šè¿‡åœºæ™¯çš„ä»»ä½•å…‰çº¿çš„é¢œè‰²ã€‚ä½“ç§¯å¯†åº¦$\sigma(x)$å¯ä»¥è§£é‡Šä¸ºä¸€æ¡å°„çº¿åœ¨$x$ä½ç½®çš„æ— ç©·å°ç²’å­å¤„ç»ˆæ­¢çš„å¾®åˆ†æ¦‚ç‡ã€‚</p><p>å…·æœ‰è¿‘è¾¹ç•Œå’Œè¿œè¾¹ç•Œ$t_n$å’Œ$t_f$çš„ç›¸æœºå°„çº¿$r(t)=o+td$çš„é¢„æœŸé¢œè‰²$C(r)$ä¸ºï¼š</p><p><img src="/images/nerf-notes-1/image-20220819180135061.png"></p><p>å‡½æ•°$T(t)$è¡¨ç¤ºæ²¿å°„çº¿ä»$t_n$åˆ°$t$çš„ç´¯ç§¯é€è¿‡ç‡ï¼Œå³å°„çº¿ä»$t_n$ä¼ æ’­åˆ°$t$è€Œæ²¡æœ‰å‡»ä¸­ä»»ä½•å…¶ä»–ç²’å­çš„æ¦‚ç‡ã€‚ä»æˆ‘ä»¬çš„è¿ç»­ç¥ç»è¾å°„åœºæ¸²æŸ“ä¸€ä¸ªè§†å›¾ï¼Œéœ€è¦ä¼°è®¡é€šè¿‡æ‰€éœ€çš„è™šæ‹Ÿç›¸æœºçš„æ¯ä¸ªåƒç´ è·Ÿè¸ªçš„ç›¸æœºå°„çº¿çš„è¿™ä¸ªç§¯åˆ†$C(r)$ã€‚</p><p>æˆ‘ä»¬ç”¨æ±‚ç§¯æ³•å¯¹è¿™ä¸ªè¿ç»­ç§¯åˆ†è¿›è¡Œäº†æ•°å€¼ä¼°è®¡ã€‚ç¡®å®šæ€§æ±‚äº¤é€šå¸¸ç”¨äºæ¸²æŸ“ç¦»æ•£ä½“ç´ ç½‘æ ¼ï¼Œå®ƒå°†æœ‰æ•ˆåœ°é™åˆ¶æˆ‘ä»¬çš„è¡¨ç¤ºçš„åˆ†è¾¨ç‡ï¼Œå› ä¸ºMLPåªèƒ½åœ¨ä¸€ä¸ªå›ºå®šçš„ç¦»æ•£ä½ç½®é›†ä¸Šè¢«æŸ¥è¯¢ã€‚ç›¸åï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ†å±‚æŠ½æ ·æ–¹æ³•ï¼Œæˆ‘ä»¬å°†$[t_nï¼Œt_f]$åˆ’åˆ†ä¸º$N$ä¸ªå‡åŒ€é—´éš”çš„é—´éš”ï¼Œç„¶åä»æ¯ä¸ªé—´éš”ä¸­å‡åŒ€éšæœºæŠ½å–ä¸€ä¸ªæ ·æœ¬ï¼š</p><p><img src="/images/nerf-notes-1/image-20220819180214509.png"></p><p>è™½ç„¶æˆ‘ä»¬ä½¿ç”¨ä¸€ç»„ç¦»æ•£çš„æ ·æœ¬æ¥ä¼°è®¡ç§¯åˆ†ï¼Œä½†åˆ†å±‚æŠ½æ ·ä½¿æˆ‘ä»¬èƒ½å¤Ÿè¡¨ç¤ºä¸€ä¸ªè¿ç»­çš„åœºæ™¯è¡¨ç¤ºï¼Œå› ä¸ºå®ƒå¯¼è‡´MLPåœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­åœ¨è¿ç»­çš„ä½ç½®è¿›è¡Œè¯„ä¼°ã€‚æˆ‘ä»¬ä½¿ç”¨è¿™äº›æ ·æœ¬æ¥ä¼°è®¡$C(r)$ä¸Maxè®¨è®ºçš„ä½“ç§¯æ¸²æŸ“å®¡æŸ¥ä¸­çš„æ±‚ç§¯è§„åˆ™ï¼š</p><p><img src="/images/nerf-notes-1/image-20220819180728845.png"></p><p>å…¶ä¸­$\delta_i = t_{i+1}-t_i$æ˜¯ç›¸é‚»æ ·æœ¬ä¹‹é—´çš„è·ç¦»ã€‚ä»$(c_iï¼Œ\sigma_i)$åŒºé—´è®¡ç®—$\hat C(r)$çš„å‡½æ•°æ˜¯å¯å¾®çš„ï¼Œå¹¶ä¸”å¯ä»¥ç®€åŒ–ä¸ºä¼ ç»Ÿçš„$\alpha$åˆæˆï¼Œå…¶ä¸­$\alpha=1-exp(-\sigma_i\delta_i)$ã€‚</p><h2 id="5-Optimizing-a-Neural-Radiance-Field"><a href="#5-Optimizing-a-Neural-Radiance-Field" class="headerlink" title="5 Optimizing a Neural Radiance Field"></a>5 Optimizing a Neural Radiance Field</h2><p>åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬æè¿°äº†å°†åœºæ™¯å»ºæ¨¡ä¸ºç¥ç»è¾å°„åœºå¹¶ä»è¯¥è¡¨ç¤ºä¸­æ¸²æŸ“æ–°è§†å›¾æ‰€éœ€çš„æ ¸å¿ƒç»„ä»¶ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼Œè¿™äº›ç»„ä»¶ä¸è¶³ä»¥å®ç°æœ€å¥½çš„è´¨é‡ã€‚æˆ‘ä»¬å¼•å…¥äº†ä¸¤ç§æ”¹è¿›æ–¹æ³•æ¥è¡¨ç¤ºé«˜åˆ†è¾¨ç‡å¤æ‚åœºæ™¯ã€‚ç¬¬ä¸€ç§æ˜¯<strong>å¯¹è¾“å…¥åæ ‡è¿›è¡Œä½ç½®ç¼–ç </strong>ï¼Œæœ‰åŠ©äºMLPè¡¨ç¤ºé«˜é¢‘å‡½æ•°ï¼Œç¬¬äºŒç§æ˜¯<strong>åˆ†å±‚é‡‡æ ·</strong>ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿæœ‰æ•ˆåœ°å¯¹è¿™ç§é«˜é¢‘è¡¨ç¤ºè¿›è¡Œé‡‡æ ·ã€‚</p><h3 id="5-1-Positional-encoding"><a href="#5-1-Positional-encoding" class="headerlink" title="5.1 Positional encoding"></a>5.1 Positional encoding</h3><p>å°½ç®¡ç¥ç»ç½‘ç»œæ˜¯é€šç”¨å‡½æ•°é€¼è¿‘å™¨ï¼Œä½†æˆ‘ä»¬å‘ç°ï¼Œè®©ç½‘ç»œ$F_\Theta$ç›´æ¥æ“ä½œ$xyz\theta\varphi$è¾“å…¥åæ ‡ä¼šå¯¼è‡´æ¸²æŸ“åœ¨è¡¨ç¤ºé¢œè‰²å’Œå‡ ä½•ç»“æ„çš„é«˜é¢‘å˜åŒ–æ–¹é¢è¡¨ç°ä¸ä½³ã€‚è¿™ä¸Rahamanç­‰äººæœ€è¿‘çš„å·¥ä½œä¸€è‡´ï¼Œè¿™è¡¨æ˜æ·±å±‚ç½‘ç»œåå‘äºå­¦ä¹ ä½é¢‘å‡½æ•°ã€‚ä»–ä»¬è¿˜è¡¨æ˜ï¼Œåœ¨å°†è¾“å…¥ä¼ é€’åˆ°ç½‘ç»œä¹‹å‰ï¼Œä½¿ç”¨é«˜é¢‘å‡½æ•°å°†è¾“å…¥æ˜ å°„åˆ°æ›´é«˜ç»´ç©ºé—´ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°æ‹ŸåˆåŒ…å«é«˜é¢‘å˜åŒ–çš„æ•°æ®ã€‚</p><p>æˆ‘ä»¬åœ¨ç¥ç»åœºæ™¯è¡¨ç¤ºçš„èƒŒæ™¯ä¸‹åˆ©ç”¨äº†è¿™äº›å‘ç°ï¼Œå°†$F_\Theta$é‡æ–°å®šä¹‰ä¸ºä¸¤ä¸ªå‡½æ•°$F_\Theta=Fâ€™_\Thetaâ—¦\gamma$ï¼ˆä¸€ä¸ªæ˜¯å­¦ä¹ çš„ï¼Œä¸€ä¸ªä¸æ˜¯å­¦ä¹ çš„ï¼‰çš„ç»„åˆï¼Œè¿™æ ·æ˜¾è‘—çš„æé«˜äº†æ€§èƒ½ã€‚è¿™é‡Œï¼Œ$\gamma$æ˜¯ä»$\mathbb R$åˆ°é«˜ç»´ç©ºé—´$\mathbb R^{2L}$çš„æ˜ å°„ï¼Œè€Œ$Fâ€™_\Theta$ä»ç„¶åªæ˜¯ä¸€ä¸ªæ­£åˆ™MLPã€‚å½¢å¼ä¸Šï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ç¼–ç å‡½æ•°æ˜¯ï¼š</p><p><img src="/images/nerf-notes-1/image-20220819202905807.png"></p><p>è¯¥å‡½æ•°$\gamma(Â·)$åˆ†åˆ«åº”ç”¨äº$x$ä¸­çš„ä¸‰ä¸ªåæ ‡å€¼ä¸­çš„æ¯ä¸€ä¸ªï¼ˆå®ƒä»¬è¢«å½’ä¸€åŒ–ä¸º$[âˆ’1,1]$ï¼‰å’Œç¬›å¡å°”è§‚å¯Ÿæ–¹å‘å•ä½å‘é‡$d$çš„ä¸‰ä¸ªåˆ†é‡ï¼ˆå…¶é€šè¿‡æ„é€ ä½äº$[âˆ’1, 1]$ï¼‰ã€‚åœ¨æˆ‘ä»¬çš„å®éªŒä¸­ï¼Œæˆ‘ä»¬å°†$\gamma(x)$è®¾ä¸º$L=10$ï¼Œ$\gamma(d)$è®¾ä¸º$L=4$ã€‚</p><p>åœ¨æµè¡Œçš„ Transformer æ¶æ„ä¸­ä½¿ç”¨äº†ç±»ä¼¼çš„æ˜ å°„ï¼Œå®ƒè¢«ç§°ä¸ºä½ç½®ç¼–ç ã€‚ ç„¶è€Œï¼ŒTransformers å°†å®ƒç”¨äºä¸åŒçš„ç›®æ ‡ï¼Œå³æä¾›åºåˆ—ä¸­ä»¤ç‰Œçš„ç¦»æ•£ä½ç½®ä½œä¸ºä¸åŒ…å«ä»»ä½•é¡ºåºæ¦‚å¿µçš„æ¶æ„çš„è¾“å…¥ã€‚ ç›¸åï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™äº›å‡½æ•°å°†è¿ç»­è¾“å…¥åæ ‡æ˜ å°„åˆ°æ›´é«˜ç»´ç©ºé—´ï¼Œä»¥ä½¿æˆ‘ä»¬çš„ MLP æ›´å®¹æ˜“é€¼è¿‘æ›´é«˜é¢‘ç‡çš„å‡½æ•°ã€‚ </p><h3 id="5-2-Hierarchical-volume-sampling"><a href="#5-2-Hierarchical-volume-sampling" class="headerlink" title="5.2 Hierarchical volume sampling"></a>5.2 Hierarchical volume sampling</h3><p>æˆ‘ä»¬åœ¨æ²¿æ¯æ¡ç›¸æœºå…‰çº¿çš„ $N$ ä¸ªæŸ¥è¯¢ç‚¹å¤„å¯†é›†è¯„ä¼°ç¥ç»è¾å°„åœºç½‘ç»œçš„æ¸²æŸ“ç­–ç•¥æ˜¯ä½æ•ˆçš„ï¼šå¯¹æ¸²æŸ“å›¾åƒæ²¡æœ‰è´¡çŒ®çš„è‡ªç”±ç©ºé—´å’Œé®æŒ¡åŒºåŸŸä»ç„¶è¢«é‡å¤é‡‡æ ·ã€‚ æˆ‘ä»¬ä»ä½“ç§¯æ¸²æŸ“çš„æ—©æœŸå·¥ä½œä¸­æ±²å–çµæ„Ÿï¼Œå¹¶æå‡ºäº†ä¸€ç§åˆ†å±‚è¡¨ç¤ºï¼Œé€šè¿‡æŒ‰æ¯”ä¾‹åˆ†é…æ ·æœ¬å¯¹æœ€ç»ˆæ¸²æŸ“çš„é¢„æœŸå½±å“æ¥æé«˜æ¸²æŸ“æ•ˆç‡ã€‚</p><p>æˆ‘ä»¬ä¸åªæ˜¯ä½¿ç”¨å•ä¸ªç½‘ç»œæ¥è¡¨ç¤ºåœºæ™¯ï¼Œè€Œæ˜¯åŒæ—¶ä¼˜åŒ–ä¸¤ä¸ªç½‘ç»œï¼šä¸€ä¸ªâ€œç²—â€å’Œä¸€ä¸ªâ€œç²¾ç»†â€ã€‚æˆ‘ä»¬é¦–å…ˆä½¿ç”¨åˆ†å±‚æŠ½æ ·å¯¹ä¸€ç»„$N_c$ä½ç½®è¿›è¡ŒæŠ½æ ·ï¼Œå¹¶è¯„ä¼°è¿™äº›ä½ç½®çš„â€œç²—ç•¥â€ç½‘ç»œï¼Œå¦‚æ–¹ç¨‹å¼ï¼ˆ2ï¼‰å’Œï¼ˆ3ï¼‰ä¸­æ‰€è¿°ã€‚ç»™å®šè¿™ä¸ªâ€œç²—ç•¥â€ç½‘ç»œçš„è¾“å‡ºï¼Œç„¶åæˆ‘ä»¬æ²¿ç€æ¯æ¡å°„çº¿äº§ç”Ÿæ›´æœ‰ä¿¡æ¯é‡çš„ç‚¹é‡‡æ ·ï¼Œå…¶ä¸­æ ·æœ¬åå‘ä½“ç§¯çš„ç›¸å…³éƒ¨åˆ†ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆä»æ–¹ç¨‹å¼ï¼ˆ3ï¼‰ä¸­é‡å†™æ¥è‡ªç²—ç½‘ç»œ $\hat C_c(r)$ çš„ alpha åˆæˆé¢œè‰²ä½œä¸ºæ²¿å°„çº¿çš„æ‰€æœ‰é‡‡æ ·é¢œè‰²$c_i$çš„åŠ æƒå’Œï¼š</p><p><img src="/images/nerf-notes-1/image-20220819211125521.png"></p><p>å°†è¿™äº›æƒé‡å½’ä¸€åŒ–ä¸º$\hat w_i=w_i/\sum^{N_c}_{j=1}w_j$æ²¿å°„çº¿ç”Ÿæˆåˆ†æ®µå¸¸æ•° PDFã€‚æˆ‘ä»¬ä½¿ç”¨é€†å˜æ¢é‡‡æ ·ä»è¯¥åˆ†å¸ƒä¸­é‡‡æ ·ç¬¬äºŒç»„$N_f$ä¸ªä½ç½®ï¼Œåœ¨ç¬¬ä¸€ç»„å’Œç¬¬äºŒç»„æ ·æœ¬çš„å¹¶é›†å¤„è¯„ä¼°æˆ‘ä»¬çš„â€œç²¾ç»†â€ç½‘ç»œï¼Œå¹¶ä½¿ç”¨å…¬å¼ï¼ˆ3ï¼‰ï¼Œä¸è¿‡æ˜¯ä½¿ç”¨æ‰€æœ‰$N_c+N_f$æ ·æœ¬è®¡ç®—å…‰çº¿$\hat C_f(r)$çš„æœ€ç»ˆæ¸²æŸ“é¢œè‰²ã€‚æ­¤è¿‡ç¨‹å°†æ›´å¤šæ ·æœ¬åˆ†é…ç»™æˆ‘ä»¬å¸Œæœ›åŒ…å«å¯è§å†…å®¹çš„åŒºåŸŸã€‚è¿™ä¸é‡è¦æ€§é‡‡æ ·çš„ç›®æ ‡ç±»ä¼¼ï¼Œä½†æˆ‘ä»¬ä½¿ç”¨é‡‡æ ·å€¼ä½œä¸ºæ•´ä¸ªç§¯åˆ†åŸŸçš„éå‡åŒ€ç¦»æ•£åŒ–ï¼Œè€Œä¸æ˜¯å°†æ¯ä¸ªæ ·æœ¬è§†ä¸ºæ•´ä¸ªç§¯åˆ†çš„ç‹¬ç«‹æ¦‚ç‡ä¼°è®¡ã€‚</p><h3 id="5-3-Implementation-details"><a href="#5-3-Implementation-details" class="headerlink" title="5.3 Implementation details"></a>5.3 Implementation details</h3><p>æˆ‘ä»¬ä¸ºæ¯ä¸ªåœºæ™¯ä¼˜åŒ–å•ç‹¬çš„ç¥ç»è¿ç»­ä½“ç§¯è¡¨ç¤ºç½‘ç»œã€‚è¿™åªéœ€è¦åœºæ™¯çš„æ•è·RGBå›¾åƒæ•°æ®é›†ã€ç›¸åº”çš„æ‘„åƒæœºå§¿æ€å’Œå†…åœ¨å‚æ•°ä»¥åŠåœºæ™¯è¾¹ç•Œï¼ˆæˆ‘ä»¬ä½¿ç”¨åœ°é¢çœŸå®æ‘„åƒæœºå§¿æ€ã€å†…åœ¨å‚æ•°å’Œåˆæˆæ•°æ®çš„è¾¹ç•Œï¼Œå¹¶ä½¿ç”¨COLMAPæ¥ä¼°è®¡çœŸå®æ•°æ®çš„è¿™äº›å‚æ•°ï¼‰ã€‚åœ¨æ¯æ¬¡ä¼˜åŒ–è¿­ä»£ä¸­ï¼Œæˆ‘ä»¬ä»æ•°æ®é›†ä¸­æ‰€æœ‰åƒç´ çš„é›†åˆä¸­éšæœºé‡‡æ ·ä¸€æ‰¹æ‘„åƒæœºå…‰çº¿ï¼Œç„¶åæŒ‰ç…§ç¬¬5.2èŠ‚æ‰€è¿°çš„åˆ†å±‚é‡‡æ ·ï¼Œä»ç²—ç½‘ç»œä¸­æŸ¥è¯¢$N_c$æ ·æœ¬ï¼Œä»ç»†ç½‘ç»œä¸­æŸ¥è¯¢$N_c+N_f$æ ·æœ¬ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ç¬¬4èŠ‚ä¸­æè¿°çš„ä½“æ¸²æŸ“è¿‡ç¨‹æ¥æ¸²æŸ“ä¸¤ç»„æ ·æœ¬ä¸­æ¯ä¸ªå…‰çº¿çš„é¢œè‰²ã€‚æˆ‘ä»¬çš„æŸå¤±å‡½æ•°æ˜¯ç²—ç•¥å’Œç²¾ç»†æ¸²æŸ“çš„æ¸²æŸ“åƒç´ é¢œè‰²å’ŒçœŸå®åƒç´ é¢œè‰²ä¹‹é—´çš„æ€»å¹³æ–¹è¯¯å·®ï¼š</p><p><img src="/images/nerf-notes-1/image-20220819213135323.png"></p><p>å…¶ä¸­ï¼Œ$R$æ˜¯æ¯ä¸ªæ‰¹æ¬¡ä¸­çš„å…‰çº¿é›†ï¼Œ$C(R)$ã€$\hat C(R)$å’Œ$\hat C_f(r)$åˆ†åˆ«æ˜¯å…‰çº¿$R$çš„åŸºæœ¬çœŸå€¼ã€ç²—ä½“ç§¯é¢„æµ‹å’Œç»†ä½“ç§¯é¢„æµ‹RGBé¢œè‰²ã€‚è¯·æ³¨æ„ï¼Œå³ä½¿æœ€ç»ˆæ¸²æŸ“æ¥è‡ª$\hat C_f(r)$ï¼Œæˆ‘ä»¬ä¹Ÿå°†$\hat C_c(r)$çš„æŸå¤±æœ€å°åŒ–ï¼Œä»¥ä¾¿ç²—ç½‘ç»œçš„æƒé‡åˆ†å¸ƒå¯ç”¨äºåœ¨ç»†ç½‘ç»œä¸­åˆ†é…æ ·æœ¬ã€‚</p><p>åœ¨æˆ‘ä»¬çš„å®éªŒä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†4096æ¡å°„çº¿çš„æ‰¹é‡å¤§å°ï¼Œæ¯ä¸ªå°„çº¿åœ¨ç²—ä½“ç§¯ä¸­çš„$N_c=64$ä¸ªåæ ‡å¤„é‡‡æ ·ï¼Œåœ¨ç»†ä½“ç§¯ä¸­çš„$N_f=128$ä¸ªé™„åŠ åæ ‡å¤„é‡‡æ ·ã€‚æˆ‘ä»¬ä½¿ç”¨Adamä¼˜åŒ–å™¨ï¼Œå­¦ä¹ é€Ÿç‡ä»$5Ã—10^{-4}$å¼€å§‹ï¼Œåœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­æŒ‡æ•°è¡°å‡åˆ°$5Ã—10^{âˆ’5}$ï¼ˆå…¶ä»–Adamè¶…å‚æ•°ä¿ç•™ä¸ºé»˜è®¤å€¼$Î²_1=0.9$ï¼Œ$Î²_2=0.999$ï¼Œä»¥åŠ $\epsilon= 10^{âˆ’7}$)ã€‚åœ¨å•ä¸ªNVIDIA V100 GPUä¸Šï¼Œå•ä¸ªåœºæ™¯çš„ä¼˜åŒ–é€šå¸¸éœ€è¦å¤§çº¦100-300kæ¬¡è¿­ä»£æ‰èƒ½æ”¶æ•›ï¼ˆå¤§çº¦1-2å¤©ï¼‰ã€‚</p><h2 id="6-Results"><a href="#6-Results" class="headerlink" title="6 Results"></a>6 Results</h2><p>æˆ‘ä»¬å®šé‡ï¼ˆè¡¨ 1ï¼‰å’Œå®šæ€§ï¼ˆå›¾ 5 å’Œ 6ï¼‰è¡¨æ˜æˆ‘ä»¬çš„æ–¹æ³•ä¼˜äºä»¥å‰çš„å·¥ä½œï¼Œå¹¶æä¾›å¹¿æ³›çš„æ¶ˆèç ”ç©¶æ¥éªŒè¯æˆ‘ä»¬çš„è®¾è®¡é€‰æ‹©ï¼ˆè¡¨ 2ï¼‰ã€‚ æˆ‘ä»¬æ•¦ä¿ƒè¯»è€…è§‚çœ‹æˆ‘ä»¬çš„è¡¥å……è§†é¢‘ï¼Œä»¥æ›´å¥½åœ°äº†è§£æˆ‘ä»¬çš„æ–¹æ³•åœ¨æ¸²æŸ“æ–°é¢–è§†å›¾çš„å¹³æ»‘è·¯å¾„æ—¶å¯¹åŸºçº¿æ–¹æ³•çš„æ˜¾ç€æ”¹è¿›ã€‚</p><h3 id="6-1-Datasets"><a href="#6-1-Datasets" class="headerlink" title="6.1 Datasets"></a>6.1 Datasets</h3><h4 id="Synthetic-renderings-of-objects"><a href="#Synthetic-renderings-of-objects" class="headerlink" title="Synthetic renderings of objects"></a>Synthetic renderings of objects</h4><p>æˆ‘ä»¬é¦–å…ˆå±•ç¤ºäº†ä¸¤ä¸ªç‰©ä½“åˆæˆæ¸²æŸ“æ•°æ®é›†çš„å®éªŒç»“æœï¼ˆè¡¨1ï¼Œâ€œDiffuse synthetic 360â—¦â€ å’Œâ€œç°å®åˆæˆ360â€â—¦â€). æ·±åº¦ä½“ç´ [40]æ•°æ®é›†åŒ…å«å››ä¸ªå…·æœ‰ç®€å•å‡ ä½•ç»“æ„çš„æœ—ä¼¯å¯¹è±¡ã€‚ä»ä¸ŠåŠçƒé‡‡æ ·çš„è§†ç‚¹ä»¥512Ã—512åƒç´ æ¸²æŸ“æ¯ä¸ªå¯¹è±¡ï¼ˆ479ä½œä¸ºè¾“å…¥ï¼Œ1000ç”¨äºæµ‹è¯•ï¼‰ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜ç”Ÿæˆäº†è‡ªå·±çš„æ•°æ®é›†ï¼Œå…¶ä¸­åŒ…å«å…«ä¸ªå¯¹è±¡çš„è·¯å¾„è·Ÿè¸ªå›¾åƒï¼Œè¿™äº›å¯¹è±¡å…·æœ‰å¤æ‚çš„å‡ ä½•ç»“æ„å’ŒçœŸå®çš„éæœ—ä¼¯æè´¨ã€‚å…­ä¸ªæ˜¯ä»ä¸ŠåŠçƒé‡‡æ ·çš„è§†ç‚¹æ¸²æŸ“çš„ï¼Œä¸¤ä¸ªæ˜¯ä»æ•´ä¸ªçƒä½“é‡‡æ ·çš„è§†ç‚¹ç»˜åˆ¶çš„ã€‚æˆ‘ä»¬æ¸²æŸ“æ¯ä¸ªåœºæ™¯çš„100ä¸ªè§†å›¾ä½œä¸ºè¾“å…¥ï¼Œ200ä¸ªè§†å›¾ç”¨äºæµ‹è¯•ï¼Œæ‰€æœ‰è§†å›¾å‡ä¸º800Ã—800åƒç´ ã€‚</p><p><img src="/images/nerf-notes-1/image-20220819214247424.png" alt="è¡¨1ï¼šæˆ‘ä»¬çš„æ–¹æ³•åœ¨åˆæˆå›¾åƒå’ŒçœŸå®å›¾åƒæ•°æ®é›†ä¸Šçš„å®šé‡æ€§èƒ½ä¼˜äºå…ˆå‰çš„å·¥ä½œã€‚æˆ‘ä»¬æŠ¥å‘Šäº†PSNR/SSIMï¼ˆè¶Šé«˜è¶Šå¥½ï¼‰å’ŒLPIPSï¼ˆè¶Šä½è¶Šå¥½ï¼‰ã€‚æ·±åº¦ä½“ç´ æ•°æ®é›†ç”±4ä¸ªå…·æœ‰ç®€å•å‡ ä½•ç»“æ„çš„ä¸åŒå¯¹è±¡ç»„æˆã€‚æˆ‘ä»¬çš„çœŸå®åˆæˆæ•°æ®é›†ç”±8ä¸ªå…·æœ‰å¤æ‚éæœ—ä¼¯æè´¨çš„å‡ ä½•å¤æ‚å¯¹è±¡çš„è·¯å¾„è·Ÿè¸ªæ¸²æŸ“ç»„æˆã€‚çœŸå®æ•°æ®é›†ç”±8ä¸ªçœŸå®åœºæ™¯çš„æ‰‹æŒå‰å‘æ•æ‰ç»„æˆï¼ˆNVæ— æ³•åœ¨æ­¤æ•°æ®ä¸Šè¿›è¡Œè¯„ä¼°ï¼Œå› ä¸ºå®ƒä»…é‡å»ºæœ‰ç•Œä½“ç§¯å†…çš„å¯¹è±¡ï¼‰ã€‚è™½ç„¶LLFFå®ç°äº†ç•¥å¥½çš„LPIPï¼Œä½†æˆ‘ä»¬æ•¦ä¿ƒè¯»è€…è§‚çœ‹æˆ‘ä»¬çš„è¡¥å……è§†é¢‘ï¼Œå…¶ä¸­æˆ‘ä»¬çš„æ–¹æ³•å®ç°äº†æ›´å¥½çš„å¤šè§†å›¾ä¸€è‡´æ€§ï¼Œå¹¶äº§ç”Ÿäº†æ¯”æ‰€æœ‰åŸºçº¿æ›´å°‘çš„ä¼ªå½±ã€‚"></p><h4 id="Real-images-of-complex-scenes"><a href="#Real-images-of-complex-scenes" class="headerlink" title="Real images of complex scenes"></a>Real images of complex scenes</h4><p>æˆ‘ä»¬å±•ç¤ºäº†ä½¿ç”¨å¤§è‡´å‰å‘å›¾åƒæ•è·çš„å¤æ‚ç°å®ä¸–ç•Œåœºæ™¯çš„ç»“æœï¼ˆè¡¨ 1ï¼Œâ€œReal ForwardFacingâ€ï¼‰ã€‚ è¯¥æ•°æ®é›†åŒ…å«ç”¨æ‰‹æŒæ‰‹æœºæ‹æ‘„çš„ 8 ä¸ªåœºæ™¯ï¼ˆ5 ä¸ªå–è‡ª LLFF è®ºæ–‡ï¼Œ3 ä¸ªæˆ‘ä»¬æ‹æ‘„ï¼‰ï¼Œç”¨ 20 åˆ° 62 å¼ å›¾åƒæ‹æ‘„ï¼Œå…¶ä¸­$ 1/8 $ç”¨äºæµ‹è¯•é›†ã€‚ æ‰€æœ‰å›¾åƒå‡ä¸º$ 1008Ã—756 $åƒç´ ã€‚</p><h3 id="6-2-Comparisons"><a href="#6-2-Comparisons" class="headerlink" title="6.2 Comparisons"></a>6.2 Comparisons</h3><p>ä¸ºäº†è¯„ä¼°æˆ‘ä»¬çš„æ¨¡å‹ï¼Œæˆ‘ä»¬å°†å…¶ä¸å½“å‰æ€§èƒ½æœ€ä½³çš„è§†å›¾åˆæˆæŠ€æœ¯è¿›è¡Œæ¯”è¾ƒï¼Œè¯¦æƒ…å¦‚ä¸‹ã€‚é™¤å±€éƒ¨å…‰åœºèåˆå¤–ï¼Œæ‰€æœ‰æ–¹æ³•éƒ½ä½¿ç”¨ç›¸åŒçš„è¾“å…¥è§†å›¾é›†ä¸ºæ¯ä¸ªåœºæ™¯è®­ç»ƒå•ç‹¬çš„ç½‘ç»œï¼Œè¯¥æ–¹æ³•åœ¨å¤§å‹æ•°æ®é›†ä¸Šè®­ç»ƒå•ä¸ª3Då·ç§¯ç½‘ç»œï¼Œç„¶åä½¿ç”¨ç›¸åŒçš„è®­ç»ƒç½‘ç»œåœ¨æµ‹è¯•æ—¶å¤„ç†æ–°åœºæ™¯çš„è¾“å…¥å›¾åƒã€‚</p><h4 id="Neural-Volumesï¼ˆNVï¼‰"><a href="#Neural-Volumesï¼ˆNVï¼‰" class="headerlink" title="Neural Volumesï¼ˆNVï¼‰"></a>Neural Volumesï¼ˆNVï¼‰</h4><p>åˆæˆå®Œå…¨ä½äºä¸åŒèƒŒæ™¯å‰é¢çš„æœ‰ç•Œä½“ç§¯å†…çš„å¯¹è±¡çš„æ–°é¢–è§†å›¾ï¼ˆå¿…é¡»åœ¨æ²¡æœ‰æ„Ÿå…´è¶£å¯¹è±¡çš„æƒ…å†µä¸‹å•ç‹¬æ•è·ï¼‰ã€‚å®ƒä¼˜åŒ–äº†æ·±åº¦ä¸‰ç»´å·ç§¯ç½‘ç»œï¼Œä»¥é¢„æµ‹å…·æœ‰1283ä¸ªæ ·æœ¬çš„ç¦»æ•£åŒ–RGB$\alpha$ä½“ç´ ç½‘æ ¼ä»¥åŠå…·æœ‰323ä¸ªæ ·æœ¬çš„ä¸‰ç»´æ‰­æ›²ç½‘æ ¼ã€‚è¯¥ç®—æ³•é€šè¿‡ä½¿æ‘„åƒæœºå…‰çº¿è¡Œè¿›é€šè¿‡æ‰­æ›²çš„ä½“ç´ ç½‘æ ¼æ¥æ¸²æŸ“æ–°è§†å›¾ã€‚</p><h4 id="Scene-Representation-Networksï¼ˆSRNï¼‰"><a href="#Scene-Representation-Networksï¼ˆSRNï¼‰" class="headerlink" title="Scene Representation Networksï¼ˆSRNï¼‰"></a>Scene Representation Networksï¼ˆSRNï¼‰</h4><p>å°†è¿ç»­åœºæ™¯è¡¨ç¤ºä¸ºä¸é€æ˜è¡¨é¢ï¼Œç”±å°†æ¯ä¸ª$(xï¼Œyï¼Œz)$åæ ‡æ˜ å°„åˆ°ç‰¹å¾å‘é‡çš„MLPéšå¼å®šä¹‰ã€‚ä»–ä»¬è®­ç»ƒä¸€ä¸ªé€’å½’ç¥ç»ç½‘ç»œï¼Œé€šè¿‡ä½¿ç”¨ä»»ä½•3Dåæ ‡å¤„çš„ç‰¹å¾å‘é‡æ¥é¢„æµ‹æ²¿ç€å…‰çº¿çš„ä¸‹ä¸€æ­¥å¤§å°ï¼Œæ²¿ç€å…‰çº¿åœ¨åœºæ™¯è¡¨ç¤ºä¸­è¡Œè¿›ã€‚æœ€åä¸€æ­¥çš„ç‰¹å¾å‘é‡è¢«è§£ç ä¸ºæ›²é¢ä¸Šè¯¥ç‚¹çš„å•ä¸€é¢œè‰²ã€‚</p><h4 id="Local-Light-Field-Fusionï¼ˆLLFFï¼‰"><a href="#Local-Light-Field-Fusionï¼ˆLLFFï¼‰" class="headerlink" title="Local Light Field Fusionï¼ˆLLFFï¼‰"></a>Local Light Field Fusionï¼ˆLLFFï¼‰</h4><p>LLFFè®¾è®¡ç”¨äºä¸ºé‡‡æ ·è‰¯å¥½çš„å‰å‘åœºæ™¯ç”ŸæˆçœŸå®æ„Ÿæ–°é¢–çš„è§†å›¾ã€‚å®ƒä½¿ç”¨ç»è¿‡è®­ç»ƒçš„ä¸‰ç»´å·ç§¯ç½‘ç»œç›´æ¥é¢„æµ‹æ¯ä¸ªè¾“å…¥è§†å›¾çš„ç¦»æ•£åŒ–æˆªå¤´ä½“é‡‡æ ·RGB$\alpha$ç½‘æ ¼ï¼ˆå¤šå¹³é¢å›¾åƒæˆ–MPIï¼‰ï¼Œç„¶åé€šè¿‡$\alpha$åˆæˆå’Œå°†é™„è¿‘çš„MPIæ··åˆåˆ°æ–°è§†ç‚¹ä¸­æ¥æ¸²æŸ“æ–°è§†å›¾ã€‚</p><p><img src="/images/nerf-notes-1/image-20220819214609455.png" alt="å›¾5ï¼šä½¿ç”¨åŸºäºç‰©ç†çš„æ¸²æŸ“å™¨ç”Ÿæˆçš„æ–°åˆæˆæ•°æ®é›†çš„åœºæ™¯çš„æµ‹è¯•é›†è§†å›¾æ¯”è¾ƒã€‚æˆ‘ä»¬çš„æ–¹æ³•èƒ½å¤Ÿæ¢å¤å‡ ä½•ç»“æ„å’Œå¤–è§‚çš„ç»†èŠ‚ï¼Œå¦‚èˆ¹çš„ç´¢å…·ã€ä¹é«˜çš„é½¿è½®å’Œè¸æ¿ã€éº¦å…‹é£çš„é—ªäº®æ”¯æ¶å’Œç½‘æ ¼æ ¼æ …ä»¥åŠææ–™çš„éæœ—ä¼¯åå°„ã€‚LLFFå±•ç¤ºäº†éº¦å…‹é£æ”¯æ¶ä¸Šçš„å¸¦çŠ¶ä¼ªå½±å’Œææ–™çš„ç‰©ä½“è¾¹ç¼˜ï¼Œä»¥åŠèˆ¹æ¡…æ†å’Œä¹é«˜ç‰©ä½“å†…éƒ¨çš„é‡å½±ä¼ªå½±ã€‚SRNåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šäº§ç”Ÿæ¨¡ç³Šå’Œæ‰­æ›²çš„æ¸²æŸ“ã€‚ç¥ç»ä½“ç§¯æ— æ³•æ•æ‰éº¦å…‹é£æ ¼æ …æˆ–ä¹é«˜é½¿è½®ä¸Šçš„ç»†èŠ‚ï¼Œä¹Ÿå®Œå…¨æ— æ³•æ¢å¤èˆ¹ä¸Šç´¢å…·çš„å‡ ä½•ç»“æ„ã€‚"></p><p><img src="/images/nerf-notes-1/image-20220819214638645.png" alt="å›¾6ï¼šçœŸå®ä¸–ç•Œåœºæ™¯çš„æµ‹è¯•é›†è§†å›¾çš„æ¯”è¾ƒã€‚LLFFä¸“ä¸ºè¯¥ç”¨ä¾‹è®¾è®¡ï¼ˆçœŸå®åœºæ™¯çš„å‰å‘æ•æ‰ï¼‰ã€‚æˆ‘ä»¬çš„æ–¹æ³•èƒ½å¤Ÿåœ¨æ¸²æŸ“è§†å›¾ä¸­æ¯”LLFFæ›´ä¸€è‡´åœ°è¡¨ç¤ºç²¾ç»†å‡ ä½•ä½“ï¼Œå¦‚T-rexä¸­çš„è•¨ç±»æ¤ç‰©å¶å­å’Œéª¨æ¶è‚‹éª¨å’Œæ æ†æ‰€ç¤ºã€‚æˆ‘ä»¬çš„æ–¹æ³•è¿˜æ­£ç¡®é‡å»ºLLFFéš¾ä»¥æ¸…æ™°æ¸²æŸ“çš„éƒ¨åˆ†é®æŒ¡åŒºåŸŸï¼Œä¾‹å¦‚åº•éƒ¨è•¨ç±»ä½œç‰©å¶å­åé¢çš„é»„è‰²æ¶å­å’Œåº•éƒ¨å…°èŠ±ä½œç‰©èƒŒæ™¯ä¸­çš„ç»¿è‰²å¶å­ã€‚å¤šé‡æ¸²æŸ“ä¹‹é—´çš„æ··åˆä¹Ÿå¯èƒ½å¯¼è‡´LLFFä¸­çš„é‡å¤è¾¹ç¼˜ï¼Œå¦‚é¡¶éƒ¨å…°èŠ±ä½œç‰©ä¸­æ‰€ç¤ºã€‚SRNæ•æ‰æ¯ä¸ªåœºæ™¯ä¸­çš„ä½é¢‘å‡ ä½•å’Œé¢œè‰²å˜åŒ–ï¼Œä½†æ— æ³•å†ç°ä»»ä½•ç»†èŠ‚ã€‚"></p><h3 id="6-3-Discussion"><a href="#6-3-Discussion" class="headerlink" title="6.3 Discussion"></a>6.3 Discussion</h3><p>æˆ‘ä»¬å½»åº•è¶…è¶Šäº†åœ¨æ‰€æœ‰åœºæ™¯ä¸­ä¼˜åŒ–æ¯ä¸ªåœºæ™¯ï¼ˆNV å’Œ SRNï¼‰çš„å•ç‹¬ç½‘ç»œçš„ä¸¤ä¸ªåŸºçº¿ã€‚ æ­¤å¤–ï¼Œä¸ LLFFï¼ˆé™¤ä¸€ä¸ªæŒ‡æ ‡å¤–çš„æ‰€æœ‰æŒ‡æ ‡ï¼‰ç›¸æ¯”ï¼Œæˆ‘ä»¬äº§ç”Ÿäº†è´¨é‡å’Œæ•°é‡ä¸Šæ›´ä¼˜è¶Šçš„æ¸²æŸ“ï¼ŒåŒæ—¶ä»…ä½¿ç”¨å®ƒä»¬çš„è¾“å…¥å›¾åƒä½œä¸ºæˆ‘ä»¬çš„æ•´ä¸ªè®­ç»ƒé›†ã€‚</p><p>SRNæ–¹æ³•äº§ç”Ÿé«˜åº¦å¹³æ»‘çš„å‡ ä½•ä½“å’Œçº¹ç†ï¼Œå…¶è§†å›¾åˆæˆçš„è¡¨ç¤ºèƒ½åŠ›å—åˆ°é™åˆ¶ï¼Œå› ä¸ºæ¯ä¸ªç›¸æœºå…‰çº¿ä»…é€‰æ‹©ä¸€ä¸ªæ·±åº¦å’Œé¢œè‰²ã€‚NVåŸºçº¿èƒ½å¤Ÿæ•è·åˆç†è¯¦ç»†çš„ä½“ç§¯å‡ ä½•ç»“æ„å’Œå¤–è§‚ï¼Œä½†å…¶ä½¿ç”¨çš„åº•å±‚æ˜¾å¼1283ä½“ç´ ç½‘æ ¼é˜»æ­¢å…¶ç¼©æ”¾ä»¥é«˜åˆ†è¾¨ç‡è¡¨ç¤ºç²¾ç»†ç»†èŠ‚ã€‚LLFFç‰¹åˆ«æä¾›äº†ä¸€ä¸ªâ€œé‡‡æ ·å‡†åˆ™â€ï¼Œè¾“å…¥è§†å›¾ä¹‹é—´çš„è§†å·®ä¸è¶…è¿‡64åƒç´ ï¼Œå› æ­¤å®ƒç»å¸¸æ— æ³•ä¼°è®¡åˆæˆæ•°æ®é›†ä¸­çš„æ­£ç¡®å‡ ä½•ä½“ï¼Œå…¶ä¸­åŒ…å«å¤šè¾¾400-500åƒç´ çš„è§†å›¾ä¹‹é—´è§†å·®ã€‚æ­¤å¤–ï¼ŒLLFFåœ¨ä¸åŒåœºæ™¯è¡¨ç¤ºä¹‹é—´è¿›è¡Œæ··åˆï¼Œä»¥å‘ˆç°ä¸åŒçš„è§†å›¾ï¼Œå¯¼è‡´è§†è§‰ä¸Šåˆ†æ•£æ³¨æ„åŠ›çš„ä¸ä¸€è‡´æ€§ï¼Œè¿™åœ¨æˆ‘ä»¬çš„è¡¥å……è§†é¢‘ä¸­å¾ˆæ˜æ˜¾ã€‚</p><p>è¿™äº›æ–¹æ³•ä¹‹é—´æœ€å¤§çš„å®é™…æƒè¡¡æ˜¯æ—¶é—´ä¸ç©ºé—´ã€‚æ‰€æœ‰æ¯”è¾ƒçš„å•åœºæ™¯æ–¹æ³•æ¯ä¸ªåœºæ™¯è‡³å°‘éœ€è¦12å°æ—¶çš„è®­ç»ƒã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒLLFFå¯ä»¥åœ¨10åˆ†é’Ÿå†…å¤„ç†ä¸€ä¸ªå°çš„è¾“å…¥æ•°æ®é›†ã€‚ç„¶è€Œï¼ŒLLFFä¸ºæ¯ä¸ªè¾“å…¥å›¾åƒç”Ÿæˆä¸€ä¸ªå¤§çš„ä¸‰ç»´ä½“ç´ ç½‘æ ¼ï¼Œå¯¼è‡´å·¨å¤§çš„å­˜å‚¨éœ€æ±‚ï¼ˆä¸€ä¸ªâ€œçœŸå®åˆæˆâ€åœºæ™¯è¶…è¿‡15GBï¼‰ã€‚æˆ‘ä»¬çš„æ–¹æ³•åªéœ€è¦5 MBçš„ç½‘ç»œæƒé‡ï¼ˆä¸LLFFç›¸æ¯”ï¼Œç›¸å¯¹å‹ç¼©ä¸º3000Ã—ï¼‰ï¼Œè¿™ç”šè‡³æ¯”æˆ‘ä»¬ä»»ä½•æ•°æ®é›†ä¸­å•ä¸ªåœºæ™¯çš„è¾“å…¥å›¾åƒçš„å†…å­˜æ›´å°‘ã€‚</p><h3 id="6-4-Ablation-studies"><a href="#6-4-Ablation-studies" class="headerlink" title="6.4 Ablation studies"></a>6.4 Ablation studies</h3><p>æˆ‘ä»¬é€šè¿‡è¡¨2ä¸­çš„å¹¿æ³›æ¶ˆèç ”ç©¶éªŒè¯äº†ç®—æ³•çš„è®¾è®¡é€‰æ‹©å’Œå‚æ•°ã€‚æˆ‘ä»¬åœ¨â€œçœŸå®åˆæˆ360Â°â€ åœºæ™¯ã€‚ç¬¬9è¡Œæ˜¾ç¤ºäº†ä½œä¸ºå‚è€ƒç‚¹çš„å®Œæ•´æ¨¡å‹ã€‚ç¬¬1è¡Œæ˜¾ç¤ºäº†æˆ‘ä»¬æ¨¡å‹çš„æœ€å°ç‰ˆæœ¬ï¼Œæ²¡æœ‰ä½ç½®ç¼–ç ï¼ˆ$PE$ï¼‰ã€è§†å›¾ç›¸å…³æ€§ï¼ˆ$VD$ï¼‰æˆ–åˆ†å±‚é‡‡æ ·ï¼ˆ$H$ï¼‰ã€‚åœ¨ç¬¬2-4è¡Œä¸­ï¼Œæˆ‘ä»¬ä»å®Œæ•´æ¨¡å‹ä¸­ä¸€æ¬¡ä¸€ä¸ªåœ°åˆ é™¤è¿™ä¸‰ä¸ªç»„ä»¶ï¼Œè§‚å¯Ÿåˆ°ä½ç½®ç¼–ç ï¼ˆç¬¬2è¡Œï¼‰å’Œè§†å›¾ç›¸å…³æ€§ï¼ˆç¬¬3è¡Œï¼‰æä¾›äº†æœ€å¤§çš„å®šé‡æ•ˆç›Šï¼Œéšåæ˜¯åˆ†å±‚é‡‡æ ·ï¼ˆç¬¬4è¡Œï¼‰ã€‚ç¬¬5-6è¡Œæ˜¾ç¤ºäº†éšç€è¾“å…¥å›¾åƒæ•°é‡çš„å‡å°‘ï¼Œæˆ‘ä»¬çš„æ€§èƒ½å¦‚ä½•ä¸‹é™ã€‚è¯·æ³¨æ„ï¼Œå½“æä¾›100å¹…å›¾åƒæ—¶ï¼Œæˆ‘ä»¬çš„æ–¹æ³•ä»…ä½¿ç”¨25å¹…è¾“å…¥å›¾åƒçš„æ€§èƒ½åœ¨æ‰€æœ‰åº¦é‡ä¸­ä»è¶…è¿‡NVã€SRNå’ŒLLFFï¼ˆè§è¡¥å……ææ–™ï¼‰ã€‚åœ¨ç¬¬7-8è¡Œä¸­ï¼Œæˆ‘ä»¬éªŒè¯äº†åœ¨$x$çš„ä½ç½®ç¼–ç ä¸­ä½¿ç”¨çš„æœ€å¤§é¢‘ç‡$L$çš„é€‰æ‹©ï¼ˆç”¨äº$d$çš„æœ€å¤§é¢‘ç‡æŒ‰æ¯”ä¾‹ç¼©æ”¾ï¼‰ã€‚ä»…ä½¿ç”¨5ä¸ªé¢‘ç‡ä¼šé™ä½æ€§èƒ½ï¼Œä½†å°†é¢‘ç‡æ•°ä»10ä¸ªå¢åŠ åˆ°15ä¸ªä¸ä¼šæé«˜æ€§èƒ½ã€‚æˆ‘ä»¬è®¤ä¸ºï¼Œä¸€æ—¦$2^L$è¶…è¿‡é‡‡æ ·è¾“å…¥å›¾åƒä¸­å­˜åœ¨çš„æœ€å¤§é¢‘ç‡ï¼ˆæˆ‘ä»¬çš„æ•°æ®ä¸­çº¦ä¸º1024ï¼‰ï¼Œå¢åŠ $L$çš„ç›Šå¤„å°±ä¼šå—åˆ°é™åˆ¶ã€‚</p><p><img src="/images/nerf-notes-1/image-20220819215424287.png" alt="è¡¨2ï¼šæˆ‘ä»¬æ¨¡å‹çš„æ¶ˆèç ”ç©¶ã€‚è¿™äº›åº¦é‡æ˜¯æˆ‘ä»¬çœŸå®åˆæˆæ•°æ®é›†ä¸­8ä¸ªåœºæ™¯çš„å¹³å‡å€¼ã€‚è¯¦ç»†è¯´æ˜è§ç¬¬6.4èŠ‚ã€‚"></p><h2 id="7-Conclusion"><a href="#7-Conclusion" class="headerlink" title="7 Conclusion"></a>7 Conclusion</h2><p>æˆ‘ä»¬çš„å·¥ä½œç›´æ¥è§£å†³äº†ä»¥å‰ä½¿ç”¨MLPå°†å¯¹è±¡å’Œåœºæ™¯è¡¨ç¤ºä¸ºè¿ç»­å‡½æ•°çš„å·¥ä½œçš„ä¸è¶³ã€‚æˆ‘ä»¬è¯æ˜ï¼Œå°†åœºæ™¯è¡¨ç¤ºä¸º5Dç¥ç»è¾å°„åœºï¼ˆè¾“å‡ºä½“ç§¯å¯†åº¦å’Œè§†ä¸º3Dä½ç½®å’Œ2Dè§‚çœ‹æ–¹å‘çš„å‡½æ•°çš„è§†ç›¸å…³å‘å°„è¾å°„çš„MLPï¼‰æ¯”ä¹‹å‰ä¸»è¦çš„è®­ç»ƒæ·±åº¦å·ç§¯ç½‘ç»œä»¥è¾“å‡ºç¦»æ•£ä½“ç´ è¡¨ç¤ºçš„æ–¹æ³•äº§ç”Ÿæ›´å¥½çš„æ¸²æŸ“ã€‚</p><p>å°½ç®¡æˆ‘ä»¬æå‡ºäº†ä¸€ç§åˆ†å±‚é‡‡æ ·ç­–ç•¥ï¼Œä»¥æé«˜æ¸²æŸ“çš„é‡‡æ ·æ•ˆç‡ï¼ˆç”¨äºè®­ç»ƒå’Œæµ‹è¯•ï¼‰ï¼Œä½†åœ¨ç ”ç©¶æœ‰æ•ˆä¼˜åŒ–å’Œæ¸²æŸ“ç¥ç»è¾å°„åœºçš„æŠ€æœ¯æ–¹é¢ä»æœ‰æ›´å¤šçš„è¿›å±•ã€‚æœªæ¥å·¥ä½œçš„å¦ä¸€ä¸ªæ–¹å‘æ˜¯å¯è§£é‡Šæ€§ï¼šä½“ç´ ç½‘æ ¼å’Œç½‘æ ¼ç­‰é‡‡æ ·è¡¨ç¤ºå…è®¸å¯¹æ¸²æŸ“è§†å›¾çš„é¢„æœŸè´¨é‡å’Œæ•…éšœæ¨¡å¼è¿›è¡Œæ¨ç†ï¼Œä½†ä¸æ¸…æ¥šå½“æˆ‘ä»¬åœ¨æ·±åº¦ç¥ç»ç½‘ç»œçš„æƒé‡ä¸­ç¼–ç åœºæ™¯æ—¶å¦‚ä½•åˆ†æè¿™äº›é—®é¢˜ã€‚æˆ‘ä»¬ç›¸ä¿¡ï¼Œè¿™é¡¹å·¥ä½œåœ¨åŸºäºçœŸå®ä¸–ç•Œå›¾åƒçš„å›¾å½¢ç®¡é“æ–¹é¢å–å¾—äº†è¿›å±•ï¼Œå…¶ä¸­å¤æ‚åœºæ™¯å¯ä»¥ç”±ä»å®é™…å¯¹è±¡å’Œåœºæ™¯çš„å›¾åƒä¼˜åŒ–çš„ç¥ç»è¾å°„åœºç»„æˆã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ol><li><a href="https://blog.csdn.net/qq_43620967/article/details/124467551">NeRFè®ºæ–‡ç¿»è¯‘ç¬”è®°</a></li><li><a href="https://zhuanlan.zhihu.com/p/542200751">NeRFè®ºæ–‡é˜…è¯»</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> NeRF&amp;3DGS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NeRF </tag>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡ ä½•çš„éšå¼è¡¨ç¤ºä¸æ˜¾ç¤ºè¡¨ç¤º</title>
      <link href="2022/08/17/geometry-notes-1/"/>
      <url>2022/08/17/geometry-notes-1/</url>
      
        <content type="html"><![CDATA[<h1 id="å‡ ä½•çš„éšå¼è¡¨ç¤ºä¸æ˜¾ç¤ºè¡¨ç¤º"><a href="#å‡ ä½•çš„éšå¼è¡¨ç¤ºä¸æ˜¾ç¤ºè¡¨ç¤º" class="headerlink" title="å‡ ä½•çš„éšå¼è¡¨ç¤ºä¸æ˜¾ç¤ºè¡¨ç¤º"></a>å‡ ä½•çš„éšå¼è¡¨ç¤ºä¸æ˜¾ç¤ºè¡¨ç¤º</h1><h2 id="Many-Ways-to-Represent-Geometry"><a href="#Many-Ways-to-Represent-Geometry" class="headerlink" title="Many Ways to Represent Geometry"></a>Many Ways to Represent Geometry</h2><p><strong>Implicit</strong> éšå¼è¡¨ç¤º</p><ul><li>algebraic surface</li><li>level sets</li><li>distance functions</li><li>â€¦</li></ul><p><strong>Explicit</strong> æ˜¾ç¤ºè¡¨ç¤º</p><ul><li>point cloud</li><li>polygon mesh</li><li>subdivision, NURBS</li><li>â€¦</li></ul><p>Each choice best suited to a different task/type of geometry</p><h2 id="Implicit-éšå¼è¡¨ç¤º"><a href="#Implicit-éšå¼è¡¨ç¤º" class="headerlink" title="Implicit éšå¼è¡¨ç¤º"></a>Implicit éšå¼è¡¨ç¤º</h2><p>éšå¼è¡¨ç¤ºå°±æ˜¯å‘Šè¯‰æˆ‘ä»¬ç‚¹æ»¡è¶³æŸç§<strong>ç‰¹å®šçš„å…³ç³»</strong>ï¼Œè€Œä¸æ˜¯å‘Šè¯‰æˆ‘ä»¬ç‚¹å…·ä½“åœ¨å“ªã€‚</p><h3 id="More-Implicit-Representations-in-Computer-Graphics"><a href="#More-Implicit-Representations-in-Computer-Graphics" class="headerlink" title="More Implicit Representations in Computer Graphics"></a>More Implicit Representations in Computer Graphics</h3><h4 id="Algebraic-Surfaces"><a href="#Algebraic-Surfaces" class="headerlink" title="Algebraic Surfaces"></a>Algebraic Surfaces</h4><p>ç›´æ¥ç”¨æ•°å­¦å…¬å¼è¡¨ç¤ºï¼Œæœ€å¤§çš„é—®é¢˜æ˜¯ä¸ç›´è§‚ï¼Œæ¯”å¦‚å³è¾¹çš„å¿ƒå½¢å¾ˆéš¾ç›´è§‚çš„æƒ³å‡ºæ¥ï¼Œè€Œæ›´å¤æ‚çš„æƒ…å†µå°±å¾ˆéš¾è¡¨ç¤ºï¼Œæ¯”å¦‚ä¸‹é¢çš„å¥¶ç‰›å°±å¾ˆéš¾ç”¨å…¬å¼è¡¨ç¤ºå‡ºæ¥ã€‚</p><img src="/images/geometry-notes-1/image-20220817174204989.png" style="zoom:67%;"><h4 id="Constructive-Solid-Geometry"><a href="#Constructive-Solid-Geometry" class="headerlink" title="Constructive Solid Geometry"></a>Constructive Solid Geometry</h4><p>é€šè¿‡ä¸€ç³»åˆ—åŸºæœ¬å‡ ä½•çš„åŸºæœ¬è¿ç®—æ¥å®šä¹‰æ–°çš„å‡ ä½•ã€‚</p><p>æ¯”å¦‚ä¸‹é¢åœ†æŸ±Aã€çƒBå°±æ˜¯åŸºæœ¬å‡ ä½•ï¼Œé€šè¿‡ç±»ä¼¼äºé›†åˆçš„äº¤ã€å¹¶ã€å·®è¿ç®—ï¼Œå°±å¯ä»¥å½¢æˆæ–°çš„å‡ ä½•ã€‚</p><img src="/images/geometry-notes-1/image-20220817174235470.png" style="zoom:67%;"><h4 id="Distance-Functions"><a href="#Distance-Functions" class="headerlink" title="Distance Functions"></a>Distance Functions</h4><p>ä¸ç›´æ¥æè¿°å‡ ä½•çš„è¡¨é¢ï¼Œè€Œæ˜¯æè¿°ç©ºé—´ä¸­ä»»æ„ä¸€ä¸ªç‚¹åˆ°ç‰©ä½“è¡¨é¢çš„æœ€å°è·ç¦»ã€‚</p><p>ç‰©ä½“å†…è·ç¦»ä¸ºè´Ÿï¼Œç‰©ä½“è¡¨é¢è·ç¦»ä¸ºé›¶ï¼Œç‰©ä½“å¤–è·ç¦»ä¸ºæ­£ã€‚</p><img src="/images/geometry-notes-1/image-20220817174252399.png" style="zoom:67%;"><p>å¯ä»¥å°†ä¸¤ä¸ªè·ç¦»å‡½æ•°åšblendingï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„å‡ ä½•ç‰©ä½“ã€‚</p><img src="/images/geometry-notes-1/image-20220817174346265.png" style="zoom:67%;"><p>è·ç¦»å‡½æ•°çš„è¡¨ç¤ºèƒ½åŠ›éå¸¸å¼ºï¼Œæ¯”å¦‚ä¸‹å›¾çš„ä¾‹å­ï¼Œå®ƒå°†ç‰©ä½“ä¹‹é—´çš„è”ç³»åœ†æ»‘çš„è¿‡åº¦è¿‡å»ã€‚</p><img src="/images/geometry-notes-1/image-20220817180535506.png" style="zoom:67%;"><h4 id="Level-Set-Methods"><a href="#Level-Set-Methods" class="headerlink" title="Level Set Methods"></a>Level Set Methods</h4><p>å¦‚æœè·ç¦»å‡½æ•°ä¸æ–¹ä¾¿å†™æˆè§£æçš„å½¢å¼ï¼Œè¿˜å¯ä»¥é€šè¿‡æ°´å¹³é›†çš„æ–¹æ³•è¡¨ç¤ºå‡ºæ¥ã€‚æ°´å¹³é›†å’Œä¸Šé¢è·ç¦»å‡½æ•°çš„åŒºåˆ«ä»…ä»…æ˜¯è¡¨ç¤ºå½¢å¼çš„åŒºåˆ«ã€‚</p><p>å¯ä»¥é€šè¿‡åŒçº¿æ€§æ’å€¼ç­‰æ–¹æ³•ï¼Œå¾—åˆ°$f(x)=0$çš„ä½ç½®ã€‚</p><p>åœ°ç†ä¸Šçš„ç­‰é«˜çº¿å’Œæ°´å¹³é›†æ¯”è¾ƒç±»ä¼¼ï¼Œä¸€æ¡ç­‰é«˜çº¿å°±æ˜¯$f(x)$ç­‰äºæŸä¸ªé«˜åº¦çš„åœ°æ–¹ã€‚</p><img src="/images/geometry-notes-1/image-20220817174408560.png" style="zoom:67%;"><p>æ°´å¹³é›†ä¸ä¸€å®šè¦å®šä¹‰åœ¨äºŒç»´çš„æ ¼å­ä¸Šï¼Œä¹Ÿå¯ä»¥å®šä¹‰åœ¨ä¸‰ç»´çš„æ ¼å­ä¸Šï¼Œä¸‹é¢å°±æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><p>æ°´å¹³é›†æ ¹æ®ç»„ç»‡å¯†åº¦ï¼Œæ„æˆäº†ä¸‰ç»´ä½“ç§¯æ¨¡å‹ã€‚</p><img src="/images/geometry-notes-1/image-20220817180551459.png" style="zoom:67%;"><h4 id="Fractals"><a href="#Fractals" class="headerlink" title="Fractals"></a>Fractals</h4><p>å‡ ä½•è¿˜æœ‰ä¸€ç§ç‰¹æ®Šçš„æ–¹æ³•ï¼Œå«åšfractalï¼ˆåˆ†å½¢ï¼‰ã€‚</p><p>åˆ†å½¢æ˜¯ä¸€ä¸ªè‡ªç›¸ä¼¼çš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬åœ¨ä¸åŒçš„å°ºå¯¸ä¸Šï¼ŒæŒ‡çš„æ˜¯è‡ªå·±çš„ä¸€ä¸ªéƒ¨åˆ†å’Œå®ƒçš„æ•´ä½“é•¿å¾—éå¸¸åƒï¼Œç±»ä¼¼äºé€’å½’ã€‚</p><img src="/images/geometry-notes-1/image-20220817174431695.png" style="zoom:67%;"><h3 id="Pros-amp-Cons"><a href="#Pros-amp-Cons" class="headerlink" title="Pros &amp; Cons"></a>Pros &amp; Cons</h3><p><strong>Pros:</strong> </p><ul><li><p>compact description (e.g., a function)  </p></li><li><p>certain queries easy (inside object, distance to surface)  </p><p>å°†ç‚¹ä»£å…¥$f(x,y,z)$ï¼Œå¦‚æœå°äºé›¶åœ¨é‡Œé¢ï¼Œå¤§äºé›¶åœ¨å¤–é¢ï¼Œç­‰äºé›¶åœ¨é¢ä¸Šã€‚ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p><img src="/images/geometry-notes-1/image-20220816182952182.png" style="zoom:67%;"></li><li><p>good for ray-to-surface intersection (more later)  </p></li><li><p>for simple shapes, exact description / no sampling error  </p></li><li><p>easy to handle changes in topology (e.g., fluid)</p></li></ul><p><strong>Cons:</strong> </p><ul><li><p>difficult to model complex shapes</p></li><li><p>sampling can be hard</p><img src="/images/geometry-notes-1/image-20220816182336846.png" alt="" style="zoom: 50%;"></li></ul><h2 id="Explicit-æ˜¾ç¤ºè¡¨ç¤º"><a href="#Explicit-æ˜¾ç¤ºè¡¨ç¤º" class="headerlink" title="Explicit æ˜¾ç¤ºè¡¨ç¤º"></a>Explicit æ˜¾ç¤ºè¡¨ç¤º</h2><p>æ˜¾ç¤ºè¡¨ç¤ºæŒ‡çš„æ˜¯<strong>ç›´æ¥ç»™å‡ºæ‰€æœ‰çš„ç‚¹ï¼Œæˆ–è€…é€šè¿‡å‚æ•°æ˜ å°„ç»™å‡ºæ‰€æœ‰çš„ç‚¹</strong>ã€‚ä¸‹å›¾æ˜¯é€šè¿‡å‚æ•°æ˜ å°„è¡¨ç¤ºç‚¹çš„ä¾‹å­ã€‚</p><img src="/images/geometry-notes-1/image-20220817170953766.png" style="zoom: 50%;"><h3 id="Many-Explicit-Representations-in-Graphics"><a href="#Many-Explicit-Representations-in-Graphics" class="headerlink" title="Many Explicit Representations in Graphics"></a>Many Explicit Representations in Graphics</h3><h4 id="Point-Cloud"><a href="#Point-Cloud" class="headerlink" title="Point Cloud"></a>Point Cloud</h4><img src="/images/geometry-notes-1/image-20220817175002386.png" style="zoom:67%;"><h4 id="Polygon-Mesh"><a href="#Polygon-Mesh" class="headerlink" title="Polygon Mesh"></a>Polygon Mesh</h4><img src="/images/geometry-notes-1/image-20220817175139019.png" style="zoom:67%;"><h4 id="The-Wavefront-Object-File-obj-Forma"><a href="#The-Wavefront-Object-File-obj-Forma" class="headerlink" title="The Wavefront Object File (.obj) Forma"></a>The Wavefront Object File (.obj) Forma</h4><img src="/images/geometry-notes-1/image-20220817175231519.png" style="zoom:67%;"><h3 id="Pros-amp-Cons-1"><a href="#Pros-amp-Cons-1" class="headerlink" title="Pros &amp; Cons"></a>Pros &amp; Cons</h3><p><strong>Pros</strong>ï¼š</p><p>é‡‡æ ·å¾ˆç®€å•ï¼Œå°†æ‰€æœ‰çš„UVä»£å…¥å°±èƒ½å¾—åˆ°æ‰€æœ‰çš„ç‚¹äº†</p><img src="/images/geometry-notes-1/image-20220817171013319.png" alt="" style="zoom:50%;"><p><strong>Cons</strong>ï¼š</p><p>åˆ¤æ–­ç‚¹åœ¨è¡¨é¢çš„é‡Œé¢è¿˜æ˜¯å¤–é¢å¾ˆå›°éš¾</p><img src="/images/geometry-notes-1/image-20220817171033168.png" alt="" style="zoom:50%;"><h2 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h2><ol><li>åœ¨éšå¼è¡¨ç¤ºConstructive Solid Geometryéƒ¨åˆ†ï¼Œè¿™äº›è¿ç®—å¦‚ä½•ä½¿ç”¨è§£æçš„å½¢å¼è¡¨ç¤ºå‡ºæ¥ï¼Ÿå¦‚æœåŸºæœ¬å‡ ä½•ä¹‹é—´åªä½¿ç”¨ä¸€éƒ¨åˆ†åšè¿ç®—ï¼ˆä¸¤ä¸ªåŸºæœ¬å‡ ä½•çš„ä¸­å¿ƒä¸å¯¹é½ï¼‰ï¼Œåˆæ€ä¹ˆè¡¨ç¤ºï¼Ÿ</li><li>åœ¨æ˜¾ç¤ºè¡¨ç¤ºä¸­ï¼Œå¯ä»¥é€šè¿‡æ˜ å°„è¡¨ç¤ºå‡ ä½•ç‰©ä½“ï¼Œæ¯”å¦‚$f(u, v) = ((2 + cos u) cos v,(2 + cos u) sin v,sin u)$å°±è¡¨ç¤ºäº†ä¸€ä¸ªåœ†ç¯ï¼Œè¿™æ ·ä»äºŒç»´å‘ä¸‰ç»´æ˜ å°„çš„æ–¹å¼èƒ½å¤Ÿè¡¨ç¤ºæ‰€æœ‰çš„å‡ ä½•ç‰©ä½“å—ï¼Ÿå¦‚æœæ˜¯ä¸€å¤´å¥¶ç‰›ï¼Œå¯ä»¥ä½¿ç”¨$f(u,v)$çš„æ˜ å°„è¡¨ç¤ºå—ï¼Ÿå¦‚æœåœ†ç¯çš„ä½ç½®ç§»åŠ¨äº†ï¼Œæˆ–è€…å§¿æ€æ”¹å˜äº†ï¼Œè¿˜å¯ä»¥é€šè¿‡äºŒç»´å‘ä¸‰ç»´çš„æ˜ å°„è¡¨ç¤ºå—ï¼Ÿï¼ˆä¹Ÿè®¸å¯ä»¥å…ˆè®¡ç®—å‡ ä½•å½“å‰ä½ç½®åˆ°æŸä¸ªâ€œæ ‡å‡†ä½ç½®â€çš„æ˜ å°„å…³ç³»ï¼Œå³ä¸‰ç»´åˆ°ä¸‰ç»´çš„æ˜ å°„ï¼Œç„¶åæŠŠè¿™ä¸ªæ˜ å°„å†åé¦ˆåˆ°äºŒç»´åˆ°ä¸‰ç»´çš„æ˜ å°„ä¸­ï¼Ÿè¿™åº”è¯¥åªæ˜¯ä¸€ä¸ªçº¿æ€§çš„å˜æ¢ï¼Ÿï¼Ÿï¼Ÿï¼‰</li></ol><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ol><li><a href="https://blog.csdn.net/weixin_45314475/article/details/121732013">è®¡ç®—æœºå›¾å½¢å­¦å…¥é—¨ï¼ˆä¹ï¼‰-å‡ ä½•ï¼ˆåŸºæœ¬è¡¨ç¤ºæ–¹æ³•ï¼šéšå¼å’Œæ˜¾å¼ï¼‰</a></li><li><a href="https://sites.cs.ucsb.edu/~lingqi/teaching/games101.html">GAMES101: ç°ä»£è®¡ç®—æœºå›¾å½¢å­¦å…¥é—¨</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
            <tag> æ˜¾ç¤ºè¡¨ç¤º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸‰ç»´è§†è§‰çš„ç¥ç»éšå¼è¡¨ç¤º</title>
      <link href="2022/08/13/inr-notes-1/"/>
      <url>2022/08/13/inr-notes-1/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸‰ç»´è§†è§‰çš„ç¥ç»éšå¼è¡¨ç¤º"><a href="#ä¸‰ç»´è§†è§‰çš„ç¥ç»éšå¼è¡¨ç¤º" class="headerlink" title="ä¸‰ç»´è§†è§‰çš„ç¥ç»éšå¼è¡¨ç¤º"></a>ä¸‰ç»´è§†è§‰çš„ç¥ç»éšå¼è¡¨ç¤º</h1><h2 id="Traditional-3D-Reconstruction-Pipeline"><a href="#Traditional-3D-Reconstruction-Pipeline" class="headerlink" title="Traditional 3D Reconstruction Pipeline"></a>Traditional 3D Reconstruction Pipeline</h2><p><img src="/images/inr-notes-1/image-20220813134955574.png"></p><p>classical multi-view reconstruction:</p><ul><li>input a set of images</li><li>estimate camera poses using bundle adjustment</li><li>find dense correspondences</li><li>create depth maps</li><li>fuse these depth maps into a coherent reconstruction of the object or a bigger scene</li></ul><h2 id="3D-Representations"><a href="#3D-Representations" class="headerlink" title="3D Representations"></a>3D Representations</h2><p>å¯¹3Dç‰©ä½“è¡¨ç¤ºæ–¹æ³•æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯åŸºäºvoxelï¼ˆä½“ç´ ï¼‰ï¼ŒåŸºäºPointsï¼ˆç‚¹äº‘ï¼‰ï¼ŒåŸºäºmeshå’ŒåŸºäºvolumeçš„æ–¹æ³•ï¼Œå…¶ä¸­å‰ä¸‰ç§æ–¹æ³•çš„é—®é¢˜æ˜¯éƒ½æ˜¯ç¦»æ•£çš„ï¼Œè¿™å°±é€ æˆäº†å®ƒä»¬éƒ½æ˜¯ä¸å¯å¾®çš„ï¼›è€Œæœ€åçš„ä¸€ç§æ–¹æ³•åˆ™æ˜¯è¿ç»­å¯å¾®çš„æ–¹ç¨‹ã€‚</p><p><img src="/images/inr-notes-1/image-20220813164105835.png"></p><h3 id="åŸºäºvoxelï¼ˆä½“ç´ ï¼‰"><a href="#åŸºäºvoxelï¼ˆä½“ç´ ï¼‰" class="headerlink" title="åŸºäºvoxelï¼ˆä½“ç´ ï¼‰"></a>åŸºäºvoxelï¼ˆä½“ç´ ï¼‰</h3><p><img src="/images/inr-notes-1/image-20220813163921749.png"></p><h3 id="åŸºäºPointsï¼ˆç‚¹äº‘ï¼‰"><a href="#åŸºäºPointsï¼ˆç‚¹äº‘ï¼‰" class="headerlink" title="åŸºäºPointsï¼ˆç‚¹äº‘ï¼‰"></a>åŸºäºPointsï¼ˆç‚¹äº‘ï¼‰</h3><p><img src="/images/inr-notes-1/image-20220813163927732.png"></p><h3 id="åŸºäºmesh"><a href="#åŸºäºmesh" class="headerlink" title="åŸºäºmesh"></a>åŸºäºmesh</h3><p><img src="/images/inr-notes-1/image-20220813163936647.png"></p><h3 id="åŸºäºvolume"><a href="#åŸºäºvolume" class="headerlink" title="åŸºäºvolume"></a>åŸºäºvolume</h3><p><img src="/images/inr-notes-1/image-20220813163943333.png"></p><p><img src="/images/inr-notes-1/image-20220813163951122.png"></p><h2 id="Limitations"><a href="#Limitations" class="headerlink" title="Limitations"></a>Limitations</h2><p><img src="/images/inr-notes-1/image-20220813164115576.png"></p><p><img src="/images/inr-notes-1/image-20220813164123406.png"></p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="https://www.youtube.com/watch?v=F9mRv4v80w0&amp;list=WL&amp;index=4">TUM AI Lecture Series - Neural Implicit Representations for 3D Vision (Andreas Geiger)</a></li><li><a href="http://www.cvlibs.net/publications/Mescheder2019CVPR_slides.pdf">Mescheder2019CVPR_slides</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>éšå¼ç¥ç»è¡¨ç¤º</title>
      <link href="2022/08/12/inr-notes-0/"/>
      <url>2022/08/12/inr-notes-0/</url>
      
        <content type="html"><![CDATA[<h1 id="éšå¼ç¥ç»è¡¨ç¤º"><a href="#éšå¼ç¥ç»è¡¨ç¤º" class="headerlink" title="éšå¼ç¥ç»è¡¨ç¤º"></a>éšå¼ç¥ç»è¡¨ç¤º</h1><h2 id="ä»€ä¹ˆæ˜¯éšå¼ç¥ç»è¡¨ç¤ºï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯éšå¼ç¥ç»è¡¨ç¤ºï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯éšå¼ç¥ç»è¡¨ç¤ºï¼Ÿ"></a>ä»€ä¹ˆæ˜¯éšå¼ç¥ç»è¡¨ç¤ºï¼Ÿ</h2><p>éšå¼ç¥ç»è¡¨ç¤ºï¼ˆImplicit Neural Representationsï¼‰æ˜¯ä¸€ç§å¯¹å„ç§ä¿¡å·è¿›è¡Œå‚æ•°åŒ–çš„æ–°æ–¹æ³•ã€‚</p><p>ä¼ ç»Ÿçš„ä¿¡å·è¡¨ç¤ºé€šå¸¸æ˜¯ç¦»æ•£çš„â€”â€”ä¾‹å¦‚ï¼Œå›¾åƒæ˜¯ç¦»æ•£çš„åƒç´ ç½‘æ ¼ï¼ŒéŸ³é¢‘ä¿¡å·æ˜¯ç¦»æ•£çš„å¹…åº¦æ ·æœ¬ï¼Œ3D å½¢çŠ¶é€šå¸¸è¢«å‚æ•°åŒ–ä¸ºä½“ç´ ã€ç‚¹äº‘æˆ–ç½‘æ ¼çš„ç½‘æ ¼ã€‚</p><p>è€Œåœ¨çœŸå®ä¸–ç•Œä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„ä¸–ç•Œå¯ä»¥è®¤ä¸ºæ˜¯è¿ç»­çš„ï¼Œæˆ–è€…è¿‘ä¼¼è¿ç»­çš„ï¼Œå› æ­¤å¯ä»¥è€ƒè™‘ä½¿ç”¨è¿ç»­å‡½æ•°æ¥è¡¨ç¤ºä¿¡å·çš„çœŸå®çŠ¶æ€ã€‚éšå¼ç¥ç»è¡¨ç¤ºå°±å°†ä¿¡å·å‚æ•°åŒ–ä¸ºè¿ç»­å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†ä¿¡å·çš„åŸŸï¼ˆå³ï¼Œåæ ‡ã€‚ä¾‹å¦‚å›¾åƒçš„åƒç´ åæ ‡ï¼‰æ˜ å°„åˆ°è¯¥åæ ‡å¤„çš„ä»»ä½•å†…å®¹ï¼ˆå¯¹äºå›¾åƒå°±æ˜¯[R,G,B]ï¼‰ã€‚ ä½†æ˜¯è¿™äº›å‡½æ•°å¾ˆéš¾å¤„ç†ï¼Œæˆ‘ä»¬æ— ä»å¾—çŸ¥è¿ç»­å‡½æ•°çš„å‡†ç¡®å½¢å¼ï¼Œ å› æ­¤æœ‰äººæå‡º<strong>ç”¨ç¥ç»ç½‘ç»œæ¥é€¼è¿‘è¿ç»­å‡½æ•°ï¼Œè¿™ç§è¡¨ç¤ºæ–¹æ³•è¢«ç§°ä¸ºéšå¼ç¥ç»è¡¨ç¤ºâ€œï¼ˆImplicit Neural Representationï¼ŒINRï¼‰</strong>ã€‚</p><h2 id="éšå¼ç¥ç»è¡¨ç¤ºçš„ä¼˜ç‚¹ï¼Ÿ"><a href="#éšå¼ç¥ç»è¡¨ç¤ºçš„ä¼˜ç‚¹ï¼Ÿ" class="headerlink" title="éšå¼ç¥ç»è¡¨ç¤ºçš„ä¼˜ç‚¹ï¼Ÿ"></a>éšå¼ç¥ç»è¡¨ç¤ºçš„ä¼˜ç‚¹ï¼Ÿ</h2><p>é¦–å…ˆï¼Œå®ƒä»¬ä¸å†ä¸ç©ºé—´åˆ†è¾¨ç‡è€¦åˆï¼Œä¾‹å¦‚ï¼Œå›¾åƒä¸åƒç´ æ•°è€¦åˆã€‚ è¿™æ˜¯å› ä¸ºå®ƒä»¬æ˜¯è¿ç»­å‡½æ•°ï¼ å› æ­¤ï¼Œå¯¹ä¿¡å·è¿›è¡Œå‚æ•°åŒ–æ‰€éœ€çš„å†…å­˜ä¸ç©ºé—´åˆ†è¾¨ç‡æ— å…³ï¼Œå¹¶ä¸”ä»…ä¸åº•å±‚ä¿¡å·çš„å¤æ‚æ€§æˆæ¯”ä¾‹ã€‚ å¦ä¸€ä¸ªæ¨è®ºæ˜¯éšå¼è¡¨ç¤ºå…·æœ‰â€œæ— é™åˆ†è¾¨ç‡â€â€”â€”å®ƒä»¬å¯ä»¥ä»¥ä»»æ„ç©ºé—´åˆ†è¾¨ç‡è¿›è¡Œé‡‡æ ·ã€‚è¿™å¯¹äºè®¸å¤šåº”ç”¨ç¨‹åºéå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚è¶…åˆ†è¾¨ç‡ï¼Œæˆ–åœ¨ 3D å’Œæ›´é«˜ç»´åº¦çš„å‚æ•°åŒ–ä¿¡å·ä¸­ï¼Œå…¶ä¸­å†…å­˜éœ€æ±‚éšç€ç©ºé—´åˆ†è¾¨ç‡å¿«é€Ÿå¢é•¿ã€‚ </p><p>æ­¤å¤–ï¼Œè·¨ç¥ç»éšå¼è¡¨ç¤ºçš„æ³›åŒ–ç›¸å½“äºåœ¨å‡½æ•°ç©ºé—´ä¸Šå­¦ä¹ å…ˆéªŒï¼Œé€šè¿‡å­¦ä¹ ç¥ç»ç½‘ç»œæƒé‡çš„å…ˆéªŒæ¥å®ç°â€”â€”è¿™é€šå¸¸è¢«ç§°ä¸ºå…ƒå­¦ä¹ ï¼ˆmeta-learningï¼‰ï¼Œæ˜¯ä¸¤ä¸ªéå¸¸æ´»è·ƒçš„ç ”ç©¶çš„ä¸€ä¸ªéå¸¸ä»¤äººå…´å¥‹çš„äº¤å‰é¢†åŸŸï¼ å¦ä¸€ä¸ªä»¤äººå…´å¥‹çš„äº¤å‰é¢†åŸŸæ˜¯åœ¨ç¥ç»éšå¼è¡¨ç¤ºå’Œç¥ç»ç½‘ç»œæ¶æ„ä¸­çš„å¯¹ç§°æ€§ç ”ç©¶â€”â€”ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ª 3D æ—‹è½¬ç­‰å˜çš„ç¥ç»ç½‘ç»œæ¶æ„ä¼šç«‹å³é€šè¿‡ç¥ç»éšå¼è¡¨ç¤ºç”Ÿæˆæ—‹è½¬ç­‰å˜ç”Ÿæˆæ¨¡å‹çš„å¯è¡Œè·¯å¾„ã€‚</p><p>éšå¼ç¥ç»è¡¨ç¤ºçš„å¦ä¸€ä¸ªå…³é”®å‰æ™¯åœ¨äºç›´æ¥åœ¨è¿™äº›è¡¨ç¤ºç©ºé—´ä¸­æ“ä½œçš„ç®—æ³•ã€‚æ¢è¨€ä¹‹ï¼Œâ€œå·ç§¯ç¥ç»ç½‘ç»œâ€ä¸å¯¹éšå¼è¡¨ç¤ºçš„å›¾åƒè¿›è¡Œæ“ä½œçš„ç¥ç»ç½‘ç»œç­‰æ•ˆäºä»€ä¹ˆï¼Ÿ</p><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://github.com/vsitzmann/awesome-implicit-representations">Awesome Implicit Neural Representations</a></li><li><a href="https://zhuanlan.zhihu.com/p/372338398">Implicit Neural Representation éšå¼ç¥ç»è¡¨ç¤º</a></li><li><a href="https://zhuanlan.zhihu.com/p/423612080">Implicit Neural Representations: From Objects to 3D Sceneséšå¼ç¥ç»è¡¨å¾ï¼šä»ç‰©ä½“åˆ°ä¸‰ç»´åœºæ™¯</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšå¼è¡¨ç¤º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoä¸­åŒæ—¶ä½¿ç”¨å¤šä¸ªä¸»é¢˜</title>
      <link href="2022/04/17/hexo-multi-theme/"/>
      <url>2022/04/17/hexo-multi-theme/</url>
      
        <content type="html"><![CDATA[<h1 id="Hexoä¸­åŒæ—¶ä½¿ç”¨å¤šä¸ªä¸»é¢˜"><a href="#Hexoä¸­åŒæ—¶ä½¿ç”¨å¤šä¸ªä¸»é¢˜" class="headerlink" title="Hexoä¸­åŒæ—¶ä½¿ç”¨å¤šä¸ªä¸»é¢˜"></a>Hexoä¸­åŒæ—¶ä½¿ç”¨å¤šä¸ªä¸»é¢˜</h1><p>æœ€è¿‘æƒ³åœ¨githubä¸Šæ­å»ºä¸€ä¸ªHomepageï¼Œä½†æ˜¯æˆ‘çš„åšå®¢å·²ç»æŠŠimmortalqx.github.ioè¿™ä¸ªå‘ç»™å ç€äº†ã€‚</p><p>ä¸€ä¸ªå¾ˆè‡ªç„¶çš„æƒ³æ³•å°±æ˜¯è®©HexoåŒæ—¶ä½¿ç”¨å¤šä¸ªä¸»é¢˜ï¼Œä¸€ä¸ªä¸»é¢˜ç»™æˆ‘çš„åšå®¢ï¼Œä¸€ä¸ªä¸»é¢˜ç»™æˆ‘çš„Homepageï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ä¿æŒåšå®¢ç°çŠ¶çš„æƒ…å†µä¸‹æ­å»ºä¸€ä¸ªé£æ ¼ä¸¥è°¨çš„Homepageã€‚</p><h3 id="å®ç°æ€è·¯"><a href="#å®ç°æ€è·¯" class="headerlink" title="å®ç°æ€è·¯"></a>å®ç°æ€è·¯</h3><p>ç±»ä¼¼äº<code>hexo cl &amp;&amp; hexo g &amp;&amp; hexo d</code>è¿™æ ·çš„å‘½ä»¤ï¼Œå¯¹hexoæ¥è¯´æ˜¯é»˜è®¤æŒ‰ç…§<code>_config.yml</code>è®¾å®šçš„å‚æ•°æ¥æ‰§è¡Œæ¸²æŸ“çš„ã€‚è€Œ<code>_config.yml</code>æ–‡ä»¶ä¸­æŒ‡å®šäº†ç½‘ç«™çš„urlã€rootã€source_dirå’Œpublic_dirç­‰éå¸¸å…³é”®çš„æ•°æ®ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å†™ä¸¤ä¸ªconfigæ–‡ä»¶ï¼Œæ¯”å¦‚<code>_config.yml</code>ç»§ç»­ç”¨äºåšå®¢ï¼Œç„¶åæ–°å»ºä¸€ä¸ª<code>_config_homepage.yml</code>ç”¨äºæ­å»ºHomepageã€‚ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>hexo g</code>å¯ä»¥é»˜è®¤ä½¿ç”¨<code>_config.yml</code>æ¥æ­å»ºåšå®¢ï¼Œå†é€šè¿‡<code>hexo --config _config_homepage.yml g</code>æ¥æŒ‡å®šHomepageçš„configæ–‡ä»¶æ¥æ­å»ºHomepageã€‚</p><p>åœ¨ä½¿ç”¨<code>hexo --config _config_homepage.yml</code>ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹<code>_config_homepage.yml</code>æ–‡ä»¶ä¸­çš„å‚æ•°ï¼Œè®©Homepageä¾é™„äºåšå®¢ï¼Œå³æŠŠHomepageçš„public_diræ”¾åˆ°åšå®¢çš„public_dirä¸‹ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡ç±»ä¼¼äºimmortalqx.github.io/homepageçš„å½¢å¼æ¥è®¿é—®Homepageã€‚</p><h3 id="å®ç°è¿‡ç¨‹"><a href="#å®ç°è¿‡ç¨‹" class="headerlink" title="å®ç°è¿‡ç¨‹"></a>å®ç°è¿‡ç¨‹</h3><h4 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h4><ol><li><p>æ›´æ”¹åšå®¢é‡‡ç”¨çš„ä¸»é¢˜çš„configæ–‡ä»¶ï¼Œå°†æ–°å¢Homepageçš„æ ‡ç­¾ï¼ˆä¸åŒä¸»é¢˜è®¾ç½®æœ‰åŒºåˆ«ï¼Œè¿™é‡Œä»¥<a href="https://github.com/blinkfox/hexo-theme-matery">matery</a>ä¸ºä¾‹ï¼‰ã€‚</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">menu</span><span class="token punctuation">:</span>  <span class="token key atrule">Index</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>home<span class="token punctuation">...</span><span class="token punctuation">...</span>  <span class="token key atrule">Homepage</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /homepage    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>award<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>å¤åˆ¶rootç›®å½•ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ï¼Œé‡å‘½åä¸º<code>_config_homepage.yml</code>ã€‚</p></li><li><p>å®‰è£…éœ€è¦ä½¿ç”¨çš„æ–°ä¸»é¢˜ï¼ˆä»¥<a href="https://github.com/PhosphorW/hexo-theme-academia">academia</a>ä¸ºä¾‹ï¼‰ã€‚æ³¨æ„è¦è®°å¾—å®‰è£…æ–°ä¸»é¢˜éœ€è¦çš„ä¸€äº›ä¾èµ–ï¼Œé˜²æ­¢æ— æ³•è¿›è¡Œæ¸²æŸ“ã€‚</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token builtin class-name">cd</span> your-hexo-directory<span class="token function">git</span> clone https://github.com/PhosphorW/hexo-theme-academia.git themes/academia<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>ä¿®æ”¹<code>_config_homepage.yml</code>æ–‡ä»¶ï¼Œï¼ˆä¸‹é¢ä»…åˆ—å‡ºéœ€è¦ä¿®æ”¹çš„æ•°æ®ï¼Œæ ¹æ®ä½¿ç”¨çš„ä¸»é¢˜è¦ä¿®æ”¹çš„æ•°æ®å¯èƒ½ä¸ä¸€æ ·ï¼‰ã€‚</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Site</span><span class="token comment"># éƒ¨åˆ†é€‰é¡¹ç½®ç©ºï¼Œé˜²æ­¢å’Œé‡‡ç”¨çš„themeå†²çª</span><span class="token key atrule">title</span><span class="token punctuation">:</span> Homepage<span class="token key atrule">subtitle</span><span class="token punctuation">:</span> <span class="token string">'Homepage'</span><span class="token key atrule">description</span><span class="token punctuation">:</span><span class="token key atrule">keywords</span><span class="token punctuation">:</span><span class="token key atrule">author</span><span class="token punctuation">:</span><span class="token key atrule">language</span><span class="token punctuation">:</span> EN<span class="token key atrule">timezone</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">...</span><span class="token punctuation">...</span><span class="token comment"># URL</span><span class="token comment"># åœ¨åŸæ¥çš„åŸºç¡€ä¸Šå¢åŠ ä¸€ä¸ªâ€œ/homepageâ€</span><span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//Immortalqx.github.io/homepage<span class="token key atrule">root</span><span class="token punctuation">:</span> /homepage<span class="token punctuation">...</span><span class="token punctuation">...</span><span class="token comment"># Directory</span><span class="token comment"># æ–°è®¾ç½®ä¸€ä¸ªsourceæ–‡ä»¶å¤¹ï¼Œä½†æ˜¯publicæ–‡ä»¶å¤¹è¦æ”¾åˆ°åšå®¢çš„publicæ–‡ä»¶å¤¹ä¸‹(è¿™æ ·æ‰èƒ½å¤Ÿåœ¨åšå®¢ä¸­æ‰“å¼€Homepage)</span><span class="token key atrule">source_dir</span><span class="token punctuation">:</span> source_homepage<span class="token key atrule">public_dir</span><span class="token punctuation">:</span> public/homepage<span class="token punctuation">...</span><span class="token punctuation">...</span><span class="token comment"># Extensions</span><span class="token comment">## Plugins: https://hexo.io/plugins/</span><span class="token comment">## Themes: https://hexo.io/themes/</span><span class="token comment"># è®¾ç½®æˆéœ€è¦ä½¿ç”¨çš„æ–°ä¸»é¢˜</span><span class="token key atrule">theme</span><span class="token punctuation">:</span> academia<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>ä¿®æ”¹academiaä¸»é¢˜çš„configï¼Œæ›´æ”¹èµ„æºæ–‡ä»¶ç›®å½•ï¼Œiconã€faviconç­‰ã€‚è¿™é‡Œå°±çœ‹ä¸ªäººå–œå¥½äº†ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ–°å¢ä¸€ä¸ªè·³è½¬åˆ°åšå®¢çš„é“¾æ¥ï¼Œä¹Ÿå¯ä»¥ä¸å†™ã€‚</p></li><li><p>åˆ›å»ºé‡‡ç”¨æ–°ä¸»é¢˜çš„é¡µé¢ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hexo <span class="token parameter variable">--config</span> _config_homepage.yml new <span class="token string">"xxxxx"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>åœ¨æ–°é¡µé¢ä¸­å¢åŠ å†…å®¹ã€‚</p></li></ol><h4 id="å¼€å§‹éƒ¨ç½²"><a href="#å¼€å§‹éƒ¨ç½²" class="headerlink" title="å¼€å§‹éƒ¨ç½²"></a>å¼€å§‹éƒ¨ç½²</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hexo clhexo <span class="token parameter variable">--config</span> _config.yml ghexo <span class="token parameter variable">--config</span> _config_homepage.yml ghexo d<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>ç”±äºæœ¬åšå®¢ä»‹ç»çš„æ–¹æ³•ä¸­ï¼Œæ–°ä¸»é¢˜æ¸²æŸ“çš„é¡µé¢åœ¨åšå®¢çš„publicæ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡<code>hexo cl</code>æ¥æ¸…é™¤åŸæ¥æ¸²æŸ“çš„é¡µé¢ã€‚</li><li>é€šè¿‡<code>hexo --config</code>æ¥æŒ‡å®šconfigæ–‡ä»¶æ¸²æŸ“åšå®¢å’ŒHomepageã€‚</li><li>ç”±äºæ‰€æœ‰æ¸²æŸ“å†…å®¹éƒ½åœ¨åŸåšå®¢çš„publicæ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰€ä»¥è¿™é‡Œå¯¹åº”çš„æ˜¯åŒä¸€ä¸ªgithubä»“åº“ï¼Œåªéœ€è¦<code>hexo d</code>å°±èƒ½åŒæ—¶æŠŠä¸¤ä¸ªä¸»é¢˜æ¸²æŸ“çš„é¡µé¢æ¨é€è¿‡å»ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„å‰ç½®å£°æ˜</title>
      <link href="2022/04/10/cpp-notes-9/"/>
      <url>2022/04/10/cpp-notes-9/</url>
      
        <content type="html"><![CDATA[<h1 id="C-ä¸­çš„å‰ç½®å£°æ˜"><a href="#C-ä¸­çš„å‰ç½®å£°æ˜" class="headerlink" title="C++ä¸­çš„å‰ç½®å£°æ˜"></a>C++ä¸­çš„å‰ç½®å£°æ˜</h1><blockquote><p>æœ€è¿‘åœ¨é˜…è¯»orb-slam2çš„æºç ï¼Œä¸€çœ¼å°±çœ‹åˆ°äº†ä»£ç ä¸­çš„å‰ç½®å£°æ˜ï¼Œè¿™é‡Œåšä¸ªç¬”è®°å¤ä¹ ä¸€ä¸‹ã€‚</p></blockquote><p>æœ€æ–°çš„Google C++ Style Guideå¯¹å‰ç½®å£°æ˜çš„å»ºè®®æ˜¯ï¼š</p><p>Avoid using forward declarations where possible. Instead, <a href="https://google.github.io/styleguide/cppguide.html#Include_What_You_Use">include the headers you need</a>.</p><h2 id="Note-1"><a href="#Note-1" class="headerlink" title="Note 1"></a>Note 1</h2><blockquote><p>å‚è€ƒï¼š<a href="https://www.zhihu.com/question/63201378/answer/208096403">å¦‚ä½•çœ‹å¾…C++å‰ç½®å£°æ˜ï¼Ÿ - å¤æ´‹çš„å›ç­” - çŸ¥ä¹</a></p></blockquote><p>ç®€å•æ¥è¯´ï¼Œå‰ç½®å£°æ˜æœ€å¤§çš„å¥½å¤„å°±æ˜¯ã€<strong>èŠ‚çœç¼–è¯‘æ—¶é—´</strong>ã€ã€‚æ¯•ç«ŸC++çš„ç¼–è¯‘æ—¶é—´é•¿å·²ç»æ˜¯ä¸€ä¸ªè‡­åæ˜­è‘—äººäººå–Šæ‰“çš„é—®é¢˜ã€‚<strong>ä½†å¯¹äºGoogleæ¥è¯´ï¼Œè¿™æ–¹é¢çš„æ•ˆç‡èŠ‚çœå°±ä¸è§å¾—é‚£ä¹ˆå¯è§‚äº†</strong>â€”â€”æ¯•ç«ŸGoogleå†…éƒ¨æœ‰è¶…å¤§è§„æ¨¡çš„åˆ†å¸ƒå¼ç¼–è¯‘é›†ç¾¤ã€Forgeã€ã€‚å“ªæ€•æ˜¯åä¸‡ä»¥ä¸Šçš„targetï¼Œå…¨éƒ¨buildä¸€éä¹Ÿå°±æ˜¯å‡ åˆ†é’Ÿçš„äº‹æƒ…ã€‚</p><p>ä¸æ­¤åŒæ—¶ï¼Œå‰ç½®å£°æ˜å¸¦æ¥çš„é—®é¢˜åˆ™æ˜¾å¾—æ›´åŠ å…³é”®ï¼š</p><p>ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªç±»çš„å®ç°è€…éœ€è¦æŠŠè¿™ä¸ªç±»<strong>æ”¹ä¸ªåå­—/æ¢ä¸ªå‘½åç©ºé—´</strong>ï¼Œå‡ºäºå…¼å®¹æ€§ä»–åŸæœ¬å¯ä»¥åœ¨åŸå‘½åç©ºé—´é‡Œ/ç”¨åŸå<strong>é€šè¿‡usingæ¥èµ·ä¸€ä¸ªåˆ«åæŒ‡å‘æ–°ç±»</strong>ã€‚ç„¶è€Œ<strong>åˆ«åä¸èƒ½è¢«å‰å‘å£°æ˜</strong>ã€‚å†…ç½‘æœ‰ä¸€ä»½ä»£ç æ”¹åŠ¨ä¸€ä¸‹å­è¯•å›¾ä¿®æ”¹æ€»è®¡265ä¸ªå¤´æ–‡ä»¶ï¼Œå°±æ˜¯å®ç°è€…ä¸ºäº†è¦æ”¹è¿™ä¸ªç±»çš„åå­—è€Œä¸å¾—ä¸å»æ”¹æ‰€æœ‰çš„è°ƒç”¨å¤„ã€‚æƒ³ä¸€æƒ³ï¼Œå¦‚æœè¿™265ä¸ªæ–‡ä»¶åˆ†å±äº50ä¸ªä¸åŒçš„å›¢é˜Ÿï¼Œä½ å¾—æ‹¿åˆ°50ä¸ªäººçš„åŒæ„æ‰èƒ½æäº¤è¿™ä»½æ”¹åŠ¨ï¼Œæƒ³ä¸æƒ³æ‰“äººï¼Ÿ</p><p>å†ä¸¾ä¸€ä¸ªcode styleä¸­æåˆ°çš„ï¼Œæ›´ä¸ºä¸¥é‡çš„ä¾‹å­â€”â€”å®ƒå¯èƒ½å¯¼è‡´<strong>è¿è¡Œæ—¶å‡ºç°é”™è¯¯çš„ç»“æœ</strong>ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// b.h:</span><span class="token keyword">struct</span> <span class="token class-name">B</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">struct</span> <span class="token class-name">D</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token class-name">B</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">// good_user.cc:</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"b.h"</span></span><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>B<span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span>D<span class="token operator">*</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>  <span class="token comment">// calls f(B*)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è‹¥æŠŠ#includeæ¢æˆå‰ç½®å£°æ˜ï¼Œç”±äºå£°æ˜æ—¶ä¸çŸ¥é“Dæ˜¯Bçš„å­ç±»ï¼Œtest()ä¸­f(x)å°±ä¼šå¯¼è‡´f(void*)è¢«è°ƒç”¨ï¼Œè€Œä¸æ˜¯f(B*)ã€‚</p><p>å†æ¯”å¦‚ï¼ŒC++æ ‡å‡†5.3.5/5ä¸­è§„å®šï¼Œ<strong>deleteä¸€ä¸ªä¸å®Œæ•´ç±»å‹çš„æŒ‡é’ˆ</strong>æ—¶ï¼Œå¦‚æœè¿™ä¸ªç±»å‹æœ‰non-trivialçš„<a href="https://www.zhihu.com/search?q=%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22:%22answer%22,%22sourceId%22:208096403%7D">ææ„å‡½æ•°</a>ï¼Œé‚£ä¹ˆè¿™ç§è¡Œä¸ºæ˜¯<strong>æœªå®šä¹‰</strong>çš„ã€‚æŠŠå‰ç½®å£°æ˜æ¢æˆ#includeåˆ™èƒ½ä¿è¯æ¶ˆé™¤è¿™ç§é£é™©ã€‚</p><p>è¯šç„¶ï¼Œä»ç†è®ºä¸Šè¯´ï¼Œä¸€ä¸ªç‰›é€¼çš„ç¨‹åºå‘˜å½“ç„¶æ˜¯å¯ä»¥é€šè¿‡åˆ†æä¸€ä¸ªå¤´æ–‡ä»¶çš„æºç æ¥å†³å®šä¼šä¸ä¼šç¢°åˆ°ä»¥ä¸Šè¯¸å¤šå‘ï¼Œå¹¶ç”±æ­¤å†³å®šç”¨å“ªä¸ªå¥½ã€‚ä½†ä¸€æ¥ä¸æ˜¯æ‰€æœ‰äººéƒ½æ˜¯ç‰›é€¼ç¨‹åºå‘˜ï¼ŒäºŒæ¥ï¼ŒæŠŠç²¾åŠ›èŠ±è´¹åœ¨è¿™ä»¶äº‹æƒ…ä¸ŠçœŸçš„å€¼å¾—å—ï¼Ÿ</p><h2 id="Note-2"><a href="#Note-2" class="headerlink" title="Note 2"></a>Note 2</h2><blockquote><p>å‚è€ƒï¼š<a href="https://www.zhihu.com/question/379789314/answer/1082007099">c++ ä¸¤ä¸ªå¤´æ–‡ä»¶äº’ç›¸å¼•ç”¨ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ - ç¨‹åºå‘˜æŸ æª¬çš„å›ç­” - çŸ¥ä¹</a></p></blockquote><p>è¿™é‡Œè§¦å‘äº†C++çš„ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œå« <strong>C++å‰ç½®å£°æ˜</strong> è¿™æ˜¯å‘ç”Ÿè¿™ç§æƒ…å†µçš„æ ¹æœ¬åŸå› ï¼Œæˆ‘åœ¨è¿™é‡Œå¤§æ¦‚ç»™ä½ è®²ä¸€ä¸‹ã€‚</p><p>A.h:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">A_H</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">A_H</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"B.h"</span></span><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span><span class="token keyword">typedef</span> vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>sizetype size_type<span class="token punctuation">;</span>B b<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>B.h:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">B_H</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">B_H</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"A.h"</span></span><span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">{</span>A<span class="token double-colon punctuation">::</span>size_type num<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨è¿™ç§å¾ªç¯ä¾èµ–åœºæ™¯ä¸­ï¼Œç”±äºC++æ˜¯æŒ‰å•ä¸ªç¼–è¯‘å•å…ƒç¼–è¯‘çš„ï¼Œç¼–è¯‘æŠ¥é”™ã€‚</p><h3 id="è§£å†³æ–¹æ³•æ˜¯-å¼•å…¥å‰ç½®å£°æ˜ã€‚"><a href="#è§£å†³æ–¹æ³•æ˜¯-å¼•å…¥å‰ç½®å£°æ˜ã€‚" class="headerlink" title="è§£å†³æ–¹æ³•æ˜¯: å¼•å…¥å‰ç½®å£°æ˜ã€‚"></a>è§£å†³æ–¹æ³•æ˜¯: å¼•å…¥å‰ç½®å£°æ˜ã€‚</h3><ol><li>æŠŠAä¸­çš„Bè½¬æˆ<code>B*</code>ï¼›</li><li>class Aä¸­å…ˆå£°æ˜Bï¼Œä¹Ÿå°±æ˜¯å‰ç½®å£°æ˜ï¼›</li><li>A.h ç§»é™¤å¯¹ç±»B.hæ–‡ä»¶çš„åŒ…å«ï¼ˆè‹¥ç”¨äº†#ifdefåˆ™ä¸å¿…é¡»ï¼‰</li></ol><p>A.h:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">A_H</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">A_H</span></span><span class="token keyword">class</span> <span class="token class-name">B</span><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span><span class="token keyword">typedef</span> vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>sizetype size_type<span class="token punctuation">;</span>B<span class="token operator">*</span> b<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>B.h:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">B_H</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">B_H</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"A.h"</span></span><span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">{</span>A<span class="token double-colon punctuation">::</span>size_type num<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä¸ºä»€ä¹ˆè¦ç”¨æŒ‡é’ˆB-å‘¢ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨æŒ‡é’ˆB-å‘¢ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨æŒ‡é’ˆB* å‘¢ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ç”¨æŒ‡é’ˆB* å‘¢ï¼Ÿ</h3><p>å› ä¸ºç”¨äº†å‰ç½®å£°æ˜ï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®å®šå¯¹è±¡çš„å®é™…å¤§å°ï¼Œè€ŒæŒ‡é’ˆçš„å¤§å°åœ¨ç‰¹å®šæœºå™¨ç±»å‹ä¸Šæ˜¯å›ºå®šçš„ï¼ˆx86æœºå™¨æ˜¯4byteï¼Œx64æœºå™¨æ˜¯8byteï¼‰</p><h2 id="Note-3"><a href="#Note-3" class="headerlink" title="Note 3"></a>Note 3</h2><blockquote><p>å‚è€ƒï¼š<a href="https://www.zhihu.com/question/379789314/answer/1561485926">c++ ä¸¤ä¸ªå¤´æ–‡ä»¶äº’ç›¸å¼•ç”¨ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ - 60è·å…°ç›¾çš„å›ç­” - çŸ¥ä¹</a></p></blockquote><p>è‡ªå·±ä¹Ÿç¢°åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å‘ç°å‰ç½®å£°æ˜å¯èƒ½ä¼šæœ‰éšæ‚£ï¼Œè€Œä¸”ä»£ç ç»“æ„è¿˜æ˜¯ä¸å¤Ÿæ¸…æ™°ã€‚ä¸ªäººæ„Ÿè§‰ä¸€æ—¦å‡ºç°ç›¸äº’å¼•ç”¨ï¼Œå¤§æ¦‚ç‡æ˜¯ä¸¤ä¸ªæ¨¡å—è®¾è®¡çš„ä¸åˆç†ï¼Œåº”è¯¥æ˜¯å¯ä»¥æ‹†è§£çš„ã€‚çœ‹åˆ°å…¶ä»–ç­”ä¸»æœ‰è¯´æŠ½å‡ºä¸€ä¸ªå…±æœ‰çš„åŸºç±»ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ä¸é€‚ç”¨ã€‚ä¸ªäººçš„è§£å†³åŠæ³•æ˜¯æŠŠå…¶ä¸­ä¸€ä¸ªç±»æ‹†åˆ†ã€‚æ¯”å¦‚Aå’ŒBç›¸äº’å¼•ç”¨ï¼Œé‚£ä¹ˆæˆ‘æŠŠAæ‹†æˆCå’ŒDä¸¤ä¸ªç±»ã€‚é‚£ä¹ˆç°åœ¨æœ‰B,C,Dä¸‰ä¸ªç±»äº†ï¼Œæœ‰å¯èƒ½å°±è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p><p>ç®€è€Œè¨€ä¹‹ï¼Œè¦ä¹ˆçºµå‘æ‹†è§£ï¼Œè¦ä¹ˆæ¨ªå‘æ‹†è§£ã€‚</p><h2 id="Note-4"><a href="#Note-4" class="headerlink" title="Note 4"></a>Note 4</h2><blockquote><p>å‚è€ƒï¼š<a href="https://codeantenna.com/a/ZeGUBeamqi">C++ä¸­ï¼Œä¸¤ä¸ªå¤´æ–‡ä»¶äº’ç›¸å¼•ç”¨æ€ä¹ˆåŠ</a></p></blockquote><p>ä¸¤ä¸ªå¤´æ–‡ä»¶ç›¸äº’åŒ…å«ä¼šå¯¼è‡´è¶…å‰å¼•ç”¨çš„é—®é¢˜ï¼Œæ‰€è°“è¶…å‰å¼•ç”¨æ˜¯æŒ‡ä¸€ä¸ªç±»å‹åœ¨å®šä¹‰ä¹‹å‰å°±è¢«ç”¨æ¥å®šä¹‰å˜é‡å’Œå£°æ˜å‡½æ•°ã€‚å‘ç”Ÿè¿™ç§æƒ…å†µæ˜¯æ— æ³•ç¼–è¯‘é€šè¿‡çš„ï¼Œä¸è¿‡å¯ä»¥é‡‡å–ä¸€äº›æ‰‹æ®µè§£å†³è¯¥é—®é¢˜ã€‚</p><p>è¶…å‰å¼•ç”¨å¯¼è‡´çš„é”™è¯¯æœ‰ä»¥ä¸‹å‡ ç§å¤„ç†åŠæ³•ï¼š</p><h3 id="1-ä½¿ç”¨ç±»å£°æ˜"><a href="#1-ä½¿ç”¨ç±»å£°æ˜" class="headerlink" title="1. ä½¿ç”¨ç±»å£°æ˜"></a>1. ä½¿ç”¨ç±»å£°æ˜</h3><p>åœ¨è¶…å‰å¼•ç”¨ä¸€ä¸ªç±»ä¹‹å‰ï¼Œé¦–å…ˆç”¨ä¸€ä¸ªç‰¹æ®Šçš„è¯­å¥è¯´æ˜è¯¥æ ‡è¯†ç¬¦æ˜¯ä¸€ä¸ªç±»åï¼Œå³å°†è¢«è¶…å‰å¼•ç”¨ã€‚å…¶ä½¿ç”¨æ–¹æ³•æ˜¯ï¼š<br>  a)  ç”¨class ClassBï¼›å£°æ˜å³å°†è¶…å‰å¼•ç”¨çš„ç±»å<br>  b)  å®šä¹‰class ClassA<br>  c)  å®šä¹‰class ClassB;<br>  d)  ç¼–åˆ¶ä¸¤ä¸ªç±»çš„å®ç°ä»£ç ã€‚</p><p>ä¸Šè¿°æ–¹æ³•é€‚ç”¨äºæ‰€æœ‰ä»£ç åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒClassAå’ŒClassBåˆ†åˆ«æœ‰è‡ªå·±çš„å¤´æ–‡ä»¶å’Œcppæ–‡ä»¶ï¼Œè¿™ç§</p><p>æ–¹æ³•éœ€è¦æ¼”å˜æˆï¼š</p><p>   a) åˆ†åˆ«å®šä¹‰ClassAå’ŒClassBï¼Œå¹¶åœ¨cppæ–‡ä»¶ä¸­å®ç°ä¹‹<br>   b) åœ¨ä¸¤ä¸ªå¤´æ–‡ä»¶çš„å¼€å¤´åˆ†åˆ«ç”¨class ClassB;å’Œclass ClassA;å£°æ˜å¯¹æ–¹<br>   c) åœ¨ä¸¤ä¸ªcppæ–‡ä»¶ä¸­åˆ†åˆ«åŒ…å«å¦å¤–ä¸€ä¸ªç±»çš„å¤´æ–‡ä»¶</p><p>NOTE:è¿™ç§æ–¹æ³•åˆ‡è®°ä¸å¯ä½¿ç”¨ç±»åæ¥å®šä¹‰å˜é‡å’Œå‡½æ•°çš„å˜é‡å‚æ•°ï¼Œåªå¯ç”¨æ¥å®šä¹‰å¼•ç”¨æˆ–è€…æŒ‡é’ˆã€‚    </p><h3 id="2-ä½¿ç”¨å…¨å±€å˜é‡"><a href="#2-ä½¿ç”¨å…¨å±€å˜é‡" class="headerlink" title="2. ä½¿ç”¨å…¨å±€å˜é‡"></a>2. ä½¿ç”¨å…¨å±€å˜é‡</h3><p>ç”±äºå…¨å±€å˜é‡å¯ä»¥é¿å…è¶…å‰å¼•ç”¨ï¼Œä¸ç”¨èµ˜è¿°ã€‚æˆ‘çš„ä¹ æƒ¯æ˜¯ï¼ŒæŠŠç±»å¯¹è±¡çš„externè¯­å¥åŠ åœ¨è¯¥ç±»å¤´æ–‡ä»¶çš„æœ€åï¼Œå¤§å®¶å–œæ¬¢æ€æ ·å†™é‚£éƒ½æ²¡æœ‰ä»€ä¹ˆå¤§é—®é¢˜ï¼Œå…³é”®æ˜¯ä¿è¯ä¸è¦åœ¨å¤´æ–‡ä»¶ä¸­èƒ¡ä¹±åŒ…å«ã€‚</p><h3 id="3-ä½¿ç”¨åŸºç±»æŒ‡é’ˆ"><a href="#3-ä½¿ç”¨åŸºç±»æŒ‡é’ˆ" class="headerlink" title="3. ä½¿ç”¨åŸºç±»æŒ‡é’ˆ"></a>3. ä½¿ç”¨åŸºç±»æŒ‡é’ˆ</h3><p>è¿™ç§æ–¹æ³•æ˜¯åœ¨å¼•ç”¨è¶…å‰å¼•ç”¨ç±»çš„åœ°æ–¹ä¸€å¾‹ç”¨åŸºç±»æŒ‡é’ˆã€‚è€Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªäº’ç›¸å¼•ç”¨çš„ç±»å¹¶ä¸æ¶‰åŠå…¶åŸºç±»ï¼Œå› æ­¤ä¸ä¼šé€ æˆè¶…å‰å¼•ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ ç¼–ç¨‹è§„èŒƒï¼ˆäºŒï¼‰</title>
      <link href="2022/04/07/cpp-notes-8/"/>
      <url>2022/04/07/cpp-notes-8/</url>
      
        <content type="html"><![CDATA[<h1 id="C-ç¼–ç¨‹è§„èŒƒï¼ˆäºŒï¼‰"><a href="#C-ç¼–ç¨‹è§„èŒƒï¼ˆäºŒï¼‰" class="headerlink" title="C++ ç¼–ç¨‹è§„èŒƒï¼ˆäºŒï¼‰"></a>C++ ç¼–ç¨‹è§„èŒƒï¼ˆäºŒï¼‰</h1><blockquote><p>è¿™éƒ¨åˆ†å°±ç›´æ¥ä»é‚£è¾¹å¾€è¿™è¾¹æ¬è¿äº†</p></blockquote><h2 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h2><p>æ³¨é‡Šè™½ç„¶å†™èµ·æ¥å¾ˆç—›è‹¦, ä½†å¯¹ä¿è¯ä»£ç å¯è¯»æ€§è‡³å…³é‡è¦. ä¸‹é¢çš„è§„åˆ™æè¿°äº†å¦‚ä½•æ³¨é‡Šä»¥åŠåœ¨å“ªå„¿æ³¨é‡Š. å½“ç„¶ä¹Ÿè¦è®°ä½: æ³¨é‡Šå›ºç„¶å¾ˆé‡è¦, ä½†æœ€å¥½çš„ä»£ç åº”å½“æœ¬èº«å°±æ˜¯æ–‡æ¡£. æœ‰æ„ä¹‰çš„ç±»å‹åå’Œå˜é‡å, è¦è¿œèƒœè¿‡è¦ç”¨æ³¨é‡Šè§£é‡Šçš„å«ç³Šä¸æ¸…çš„åå­—.</p><p>ä½ å†™çš„æ³¨é‡Šæ˜¯ç»™ä»£ç è¯»è€…çœ‹çš„, ä¹Ÿå°±æ˜¯ä¸‹ä¸€ä¸ªéœ€è¦ç†è§£ä½ çš„ä»£ç çš„äºº. æ‰€ä»¥æ…·æ…¨äº›å§, ä¸‹ä¸€ä¸ªè¯»è€…å¯èƒ½å°±æ˜¯ä½ !</p><h3 id="æ³¨é‡Šé£æ ¼"><a href="#æ³¨é‡Šé£æ ¼" class="headerlink" title="æ³¨é‡Šé£æ ¼"></a>æ³¨é‡Šé£æ ¼</h3><p><strong>æ€»è¿°</strong></p><p>ä½¿ç”¨ <code>//</code> æˆ– <code>/* */</code>, ç»Ÿä¸€å°±å¥½.</p><p><strong>è¯´æ˜</strong></p><p><code>//</code> æˆ– <code>/* */</code> éƒ½å¯ä»¥; ä½† <code>//</code> <em>æ›´</em> å¸¸ç”¨. è¦åœ¨å¦‚ä½•æ³¨é‡ŠåŠæ³¨é‡Šé£æ ¼ä¸Šç¡®ä¿ç»Ÿä¸€.</p><h3 id="æ–‡ä»¶æ³¨é‡Š"><a href="#æ–‡ä»¶æ³¨é‡Š" class="headerlink" title="æ–‡ä»¶æ³¨é‡Š"></a>æ–‡ä»¶æ³¨é‡Š</h3><p><strong>æ€»è¿°</strong></p><p>åœ¨æ¯ä¸€ä¸ªæ–‡ä»¶å¼€å¤´åŠ å…¥ç‰ˆæƒå…¬å‘Š.</p><p>æ–‡ä»¶æ³¨é‡Šæè¿°äº†è¯¥æ–‡ä»¶çš„å†…å®¹. å¦‚æœä¸€ä¸ªæ–‡ä»¶åªå£°æ˜, æˆ–å®ç°, æˆ–æµ‹è¯•äº†ä¸€ä¸ªå¯¹è±¡, å¹¶ä¸”è¿™ä¸ªå¯¹è±¡å·²ç»åœ¨å®ƒçš„å£°æ˜å¤„è¿›è¡Œäº†è¯¦ç»†çš„æ³¨é‡Š, é‚£ä¹ˆå°±æ²¡å¿…è¦å†åŠ ä¸Šæ–‡ä»¶æ³¨é‡Š. é™¤æ­¤ä¹‹å¤–çš„å…¶ä»–æ–‡ä»¶éƒ½éœ€è¦æ–‡ä»¶æ³¨é‡Š.</p><p><strong>è¯´æ˜</strong></p><h4 id="æ³•å¾‹å…¬å‘Šå’Œä½œè€…ä¿¡æ¯"><a href="#æ³•å¾‹å…¬å‘Šå’Œä½œè€…ä¿¡æ¯" class="headerlink" title="æ³•å¾‹å…¬å‘Šå’Œä½œè€…ä¿¡æ¯"></a>æ³•å¾‹å…¬å‘Šå’Œä½œè€…ä¿¡æ¯</h4><p>æ¯ä¸ªæ–‡ä»¶éƒ½åº”è¯¥åŒ…å«è®¸å¯è¯å¼•ç”¨. ä¸ºé¡¹ç›®é€‰æ‹©åˆé€‚çš„è®¸å¯è¯ç‰ˆæœ¬.(æ¯”å¦‚, Apache 2.0, BSD, LGPL, GPL)</p><p>å¦‚æœä½ å¯¹åŸå§‹ä½œè€…çš„æ–‡ä»¶åšäº†é‡å¤§ä¿®æ”¹, è¯·è€ƒè™‘åˆ é™¤åŸä½œè€…ä¿¡æ¯.</p><h4 id="æ–‡ä»¶å†…å®¹"><a href="#æ–‡ä»¶å†…å®¹" class="headerlink" title="æ–‡ä»¶å†…å®¹"></a>æ–‡ä»¶å†…å®¹</h4><p>å¦‚æœä¸€ä¸ª <code>.h</code> æ–‡ä»¶å£°æ˜äº†å¤šä¸ªæ¦‚å¿µ, åˆ™æ–‡ä»¶æ³¨é‡Šåº”å½“å¯¹æ–‡ä»¶çš„å†…å®¹åšä¸€ä¸ªå¤§è‡´çš„è¯´æ˜, åŒæ—¶è¯´æ˜å„æ¦‚å¿µä¹‹é—´çš„è”ç³». ä¸€ä¸ªä¸€åˆ°ä¸¤è¡Œçš„æ–‡ä»¶æ³¨é‡Šå°±è¶³å¤Ÿäº†, å¯¹äºæ¯ä¸ªæ¦‚å¿µçš„è¯¦ç»†æ–‡æ¡£åº”å½“æ”¾åœ¨å„ä¸ªæ¦‚å¿µä¸­, è€Œä¸æ˜¯æ–‡ä»¶æ³¨é‡Šä¸­.</p><p>ä¸è¦åœ¨ <code>.h</code> å’Œ <code>.cc</code> ä¹‹é—´å¤åˆ¶æ³¨é‡Š, è¿™æ ·çš„æ³¨é‡Šåç¦»äº†æ³¨é‡Šçš„å®é™…æ„ä¹‰.</p><h3 id="ç±»æ³¨é‡Š"><a href="#ç±»æ³¨é‡Š" class="headerlink" title="ç±»æ³¨é‡Š"></a>ç±»æ³¨é‡Š</h3><p><strong>æ€»è¿°</strong></p><p>æ¯ä¸ªç±»çš„å®šä¹‰éƒ½è¦é™„å¸¦ä¸€ä»½æ³¨é‡Š, æè¿°ç±»çš„åŠŸèƒ½å’Œç”¨æ³•, é™¤éå®ƒçš„åŠŸèƒ½ç›¸å½“æ˜æ˜¾.</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// Iterates over the contents of a GargantuanTable.</span><span class="token comment">// Example:</span><span class="token comment">//    GargantuanTableIterator* iter = table-&gt;NewIterator();</span><span class="token comment">//    for (iter-&gt;Seek("foo"); !iter-&gt;done(); iter-&gt;Next()) {</span><span class="token comment">//      process(iter-&gt;key(), iter-&gt;value());</span><span class="token comment">//    }</span><span class="token comment">//    delete iter;</span><span class="token keyword">class</span> <span class="token class-name">GargantuanTableIterator</span> <span class="token punctuation">{</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>è¯´æ˜</strong></p><p>ç±»æ³¨é‡Šåº”å½“ä¸ºè¯»è€…ç†è§£å¦‚ä½•ä½¿ç”¨ä¸ä½•æ—¶ä½¿ç”¨ç±»æä¾›è¶³å¤Ÿçš„ä¿¡æ¯, åŒæ—¶åº”å½“æé†’è¯»è€…åœ¨æ­£ç¡®ä½¿ç”¨æ­¤ç±»æ—¶åº”å½“è€ƒè™‘çš„å› ç´ . å¦‚æœç±»æœ‰ä»»ä½•åŒæ­¥å‰æ, è¯·ç”¨æ–‡æ¡£è¯´æ˜. å¦‚æœè¯¥ç±»çš„å®ä¾‹å¯è¢«å¤šçº¿ç¨‹è®¿é—®, è¦ç‰¹åˆ«æ³¨æ„æ–‡æ¡£è¯´æ˜å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ç›¸å…³çš„è§„åˆ™å’Œå¸¸é‡ä½¿ç”¨.</p><p>å¦‚æœä½ æƒ³ç”¨ä¸€å°æ®µä»£ç æ¼”ç¤ºè¿™ä¸ªç±»çš„åŸºæœ¬ç”¨æ³•æˆ–é€šå¸¸ç”¨æ³•, æ”¾åœ¨ç±»æ³¨é‡Šé‡Œä¹Ÿéå¸¸åˆé€‚.</p><p>å¦‚æœç±»çš„å£°æ˜å’Œå®šä¹‰åˆ†å¼€äº†(ä¾‹å¦‚åˆ†åˆ«æ”¾åœ¨äº† <code>.h</code> å’Œ <code>.cc</code> æ–‡ä»¶ä¸­), æ­¤æ—¶, æè¿°ç±»ç”¨æ³•çš„æ³¨é‡Šåº”å½“å’Œæ¥å£å®šä¹‰æ”¾åœ¨ä¸€èµ·, æè¿°ç±»çš„æ“ä½œå’Œå®ç°çš„æ³¨é‡Šåº”å½“å’Œå®ç°æ”¾åœ¨ä¸€èµ·.</p><h3 id="å‡½æ•°æ³¨é‡Š"><a href="#å‡½æ•°æ³¨é‡Š" class="headerlink" title="å‡½æ•°æ³¨é‡Š"></a>å‡½æ•°æ³¨é‡Š</h3><p><strong>æ€»è¿°</strong></p><p>å‡½æ•°å£°æ˜å¤„çš„æ³¨é‡Šæè¿°å‡½æ•°åŠŸèƒ½; å®šä¹‰å¤„çš„æ³¨é‡Šæè¿°å‡½æ•°å®ç°.</p><p><strong>è¯´æ˜</strong></p><h4 id="å‡½æ•°å£°æ˜"><a href="#å‡½æ•°å£°æ˜" class="headerlink" title="å‡½æ•°å£°æ˜"></a>å‡½æ•°å£°æ˜</h4><p>åŸºæœ¬ä¸Šæ¯ä¸ªå‡½æ•°å£°æ˜å¤„å‰éƒ½åº”å½“åŠ ä¸Šæ³¨é‡Š, æè¿°å‡½æ•°çš„åŠŸèƒ½å’Œç”¨é€”. åªæœ‰åœ¨å‡½æ•°çš„åŠŸèƒ½ç®€å•è€Œæ˜æ˜¾æ—¶æ‰èƒ½çœç•¥è¿™äº›æ³¨é‡Š(ä¾‹å¦‚, ç®€å•çš„å–å€¼å’Œè®¾å€¼å‡½æ•°). æ³¨é‡Šä½¿ç”¨å™è¿°å¼ (â€œOpens the fileâ€) è€ŒéæŒ‡ä»¤å¼ (â€œOpen the fileâ€); æ³¨é‡Šåªæ˜¯ä¸ºäº†æè¿°å‡½æ•°, è€Œä¸æ˜¯å‘½ä»¤å‡½æ•°åšä»€ä¹ˆ. é€šå¸¸, æ³¨é‡Šä¸ä¼šæè¿°å‡½æ•°å¦‚ä½•å·¥ä½œ. é‚£æ˜¯å‡½æ•°å®šä¹‰éƒ¨åˆ†çš„äº‹æƒ….</p><p>å‡½æ•°å£°æ˜å¤„æ³¨é‡Šçš„å†…å®¹:</p><ul><li>å‡½æ•°çš„è¾“å…¥è¾“å‡º.</li><li>å¯¹ç±»æˆå‘˜å‡½æ•°è€Œè¨€: å‡½æ•°è°ƒç”¨æœŸé—´å¯¹è±¡æ˜¯å¦éœ€è¦ä¿æŒå¼•ç”¨å‚æ•°, æ˜¯å¦ä¼šé‡Šæ”¾è¿™äº›å‚æ•°.</li><li>å‡½æ•°æ˜¯å¦åˆ†é…äº†å¿…é¡»ç”±è°ƒç”¨è€…é‡Šæ”¾çš„ç©ºé—´.</li><li>å‚æ•°æ˜¯å¦å¯ä»¥ä¸ºç©ºæŒ‡é’ˆ.</li><li>æ˜¯å¦å­˜åœ¨å‡½æ•°ä½¿ç”¨ä¸Šçš„æ€§èƒ½éšæ‚£.</li><li>å¦‚æœå‡½æ•°æ˜¯å¯é‡å…¥çš„, å…¶åŒæ­¥å‰ææ˜¯ä»€ä¹ˆ?</li></ul><p>ä¸¾ä¾‹å¦‚ä¸‹:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// Returns an iterator for this table.  It is the client's</span><span class="token comment">// responsibility to delete the iterator when it is done with it,</span><span class="token comment">// and it must not use the iterator once the GargantuanTable object</span><span class="token comment">// on which the iterator was created has been deleted.</span><span class="token comment">//</span><span class="token comment">// The iterator is initially positioned at the beginning of the table.</span><span class="token comment">//</span><span class="token comment">// This method is equivalent to:</span><span class="token comment">//    Iterator* iter = table-&gt;NewIterator();</span><span class="token comment">//    iter-&gt;Seek("");</span><span class="token comment">//    return iter;</span><span class="token comment">// If you are going to immediately seek to another place in the</span><span class="token comment">// returned iterator, it will be faster to use NewIterator()</span><span class="token comment">// and avoid the extra seek.</span>Iterator<span class="token operator">*</span> <span class="token function">GetIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½†ä¹Ÿè¦é¿å…ç½—ç½—å—¦å—¦, æˆ–è€…å¯¹æ˜¾è€Œæ˜“è§çš„å†…å®¹è¿›è¡Œè¯´æ˜. ä¸‹é¢çš„æ³¨é‡Šå°±æ²¡æœ‰å¿…è¦åŠ ä¸Š â€œå¦åˆ™è¿”å› falseâ€, å› ä¸ºå·²ç»æš—å«å…¶ä¸­äº†:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// Returns true if the table cannot hold any more entries.</span><span class="token keyword">bool</span> <span class="token function">IsTableFull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ³¨é‡Šå‡½æ•°é‡è½½æ—¶, æ³¨é‡Šçš„é‡ç‚¹åº”è¯¥æ˜¯å‡½æ•°ä¸­è¢«é‡è½½çš„éƒ¨åˆ†, è€Œä¸æ˜¯ç®€å•çš„é‡å¤è¢«é‡è½½çš„å‡½æ•°çš„æ³¨é‡Š. å¤šæ•°æƒ…å†µä¸‹, å‡½æ•°é‡è½½ä¸éœ€è¦é¢å¤–çš„æ–‡æ¡£, å› æ­¤ä¹Ÿæ²¡æœ‰å¿…è¦åŠ ä¸Šæ³¨é‡Š.</p><p>æ³¨é‡Šæ„é€ /ææ„å‡½æ•°æ—¶, åˆ‡è®°è¯»ä»£ç çš„äººçŸ¥é“æ„é€ /ææ„å‡½æ•°çš„åŠŸèƒ½, æ‰€ä»¥ â€œé”€æ¯è¿™ä¸€å¯¹è±¡â€ è¿™æ ·çš„æ³¨é‡Šæ˜¯æ²¡æœ‰æ„ä¹‰çš„. ä½ åº”å½“æ³¨æ˜çš„æ˜¯æ³¨æ˜æ„é€ å‡½æ•°å¯¹å‚æ•°åšäº†ä»€ä¹ˆ (ä¾‹å¦‚, æ˜¯å¦å–å¾—æŒ‡é’ˆæ‰€æœ‰æƒ) ä»¥åŠææ„å‡½æ•°æ¸…ç†äº†ä»€ä¹ˆ. å¦‚æœéƒ½æ˜¯äº›æ— å…³ç´§è¦çš„å†…å®¹, ç›´æ¥çœæ‰æ³¨é‡Š. ææ„å‡½æ•°å‰æ²¡æœ‰æ³¨é‡Šæ˜¯å¾ˆæ­£å¸¸çš„.</p><h4 id="å‡½æ•°å®šä¹‰"><a href="#å‡½æ•°å®šä¹‰" class="headerlink" title="å‡½æ•°å®šä¹‰"></a>å‡½æ•°å®šä¹‰</h4><p>å¦‚æœå‡½æ•°çš„å®ç°è¿‡ç¨‹ä¸­ç”¨åˆ°äº†å¾ˆå·§å¦™çš„æ–¹å¼, é‚£ä¹ˆåœ¨å‡½æ•°å®šä¹‰å¤„åº”å½“åŠ ä¸Šè§£é‡Šæ€§çš„æ³¨é‡Š. ä¾‹å¦‚, ä½ æ‰€ä½¿ç”¨çš„ç¼–ç¨‹æŠ€å·§, å®ç°çš„å¤§è‡´æ­¥éª¤, æˆ–è§£é‡Šå¦‚æ­¤å®ç°çš„ç†ç”±. ä¸¾ä¸ªä¾‹å­, ä½ å¯ä»¥è¯´æ˜ä¸ºä»€ä¹ˆå‡½æ•°çš„å‰åŠéƒ¨åˆ†è¦åŠ é”è€ŒååŠéƒ¨åˆ†ä¸éœ€è¦.</p><p><em>ä¸è¦</em> ä» <code>.h</code> æ–‡ä»¶æˆ–å…¶ä»–åœ°æ–¹çš„å‡½æ•°å£°æ˜å¤„ç›´æ¥å¤åˆ¶æ³¨é‡Š. ç®€è¦é‡è¿°å‡½æ•°åŠŸèƒ½æ˜¯å¯ä»¥çš„, ä½†æ³¨é‡Šé‡ç‚¹è¦æ”¾åœ¨å¦‚ä½•å®ç°ä¸Š.</p><h3 id="å˜é‡æ³¨é‡Š"><a href="#å˜é‡æ³¨é‡Š" class="headerlink" title="å˜é‡æ³¨é‡Š"></a>å˜é‡æ³¨é‡Š</h3><p><strong>æ€»è¿°</strong></p><p>é€šå¸¸å˜é‡åæœ¬èº«è¶³ä»¥å¾ˆå¥½è¯´æ˜å˜é‡ç”¨é€”. æŸäº›æƒ…å†µä¸‹, ä¹Ÿéœ€è¦é¢å¤–çš„æ³¨é‡Šè¯´æ˜.</p><p><strong>è¯´æ˜</strong></p><h4 id="ç±»æ•°æ®æˆå‘˜"><a href="#ç±»æ•°æ®æˆå‘˜" class="headerlink" title="ç±»æ•°æ®æˆå‘˜"></a>ç±»æ•°æ®æˆå‘˜</h4><p>æ¯ä¸ªç±»æ•°æ®æˆå‘˜ (ä¹Ÿå«å®ä¾‹å˜é‡æˆ–æˆå‘˜å˜é‡) éƒ½åº”è¯¥ç”¨æ³¨é‡Šè¯´æ˜ç”¨é€”. å¦‚æœæœ‰éå˜é‡çš„å‚æ•°(ä¾‹å¦‚ç‰¹æ®Šå€¼, æ•°æ®æˆå‘˜ä¹‹é—´çš„å…³ç³», ç”Ÿå‘½å‘¨æœŸç­‰)ä¸èƒ½å¤Ÿç”¨ç±»å‹ä¸å˜é‡åæ˜ç¡®è¡¨è¾¾, åˆ™åº”å½“åŠ ä¸Šæ³¨é‡Š. ç„¶è€Œ, å¦‚æœå˜é‡ç±»å‹ä¸å˜é‡åå·²ç»è¶³ä»¥æè¿°ä¸€ä¸ªå˜é‡, é‚£ä¹ˆå°±ä¸å†éœ€è¦åŠ ä¸Šæ³¨é‡Š.</p><p>ç‰¹åˆ«åœ°, å¦‚æœå˜é‡å¯ä»¥æ¥å— <code>NULL</code> æˆ– <code>-1</code> ç­‰è­¦æˆ’å€¼, é¡»åŠ ä»¥è¯´æ˜. æ¯”å¦‚:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">private</span><span class="token operator">:</span> <span class="token comment">// Used to bounds-check table accesses. -1 means</span> <span class="token comment">// that we don't yet know how many entries the table has.</span> <span class="token keyword">int</span> num_total_entries_<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h4><p>å’Œæ•°æ®æˆå‘˜ä¸€æ ·, æ‰€æœ‰å…¨å±€å˜é‡ä¹Ÿè¦æ³¨é‡Šè¯´æ˜å«ä¹‰åŠç”¨é€”, ä»¥åŠä½œä¸ºå…¨å±€å˜é‡çš„åŸå› . æ¯”å¦‚:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// The total number of tests cases that we run through in this regression test.</span><span class="token keyword">const</span> <span class="token keyword">int</span> kNumTestCases <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="å®ç°æ³¨é‡Š"><a href="#å®ç°æ³¨é‡Š" class="headerlink" title="å®ç°æ³¨é‡Š"></a>å®ç°æ³¨é‡Š</h3><p><strong>æ€»è¿°</strong></p><p>å¯¹äºä»£ç ä¸­å·§å¦™çš„, æ™¦æ¶©çš„, æœ‰è¶£çš„, é‡è¦çš„åœ°æ–¹åŠ ä»¥æ³¨é‡Š.</p><p><strong>è¯´æ˜</strong></p><h4 id="ä»£ç å‰æ³¨é‡Š"><a href="#ä»£ç å‰æ³¨é‡Š" class="headerlink" title="ä»£ç å‰æ³¨é‡Š"></a>ä»£ç å‰æ³¨é‡Š</h4><p>å·§å¦™æˆ–å¤æ‚çš„ä»£ç æ®µå‰è¦åŠ æ³¨é‡Š. æ¯”å¦‚:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// Divide result by two, taking into account that x</span><span class="token comment">// contains the carry from the add.</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> result<span class="token operator">-&gt;</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  x <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">&lt;&lt;</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">*</span>result<span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token punctuation">(</span><span class="token operator">*</span>result<span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>  x <span class="token operator">&amp;=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="è¡Œæ³¨é‡Š"><a href="#è¡Œæ³¨é‡Š" class="headerlink" title="è¡Œæ³¨é‡Š"></a>è¡Œæ³¨é‡Š</h4><p>æ¯”è¾ƒéšæ™¦çš„åœ°æ–¹è¦åœ¨è¡Œå°¾åŠ å…¥æ³¨é‡Š. åœ¨è¡Œå°¾ç©ºä¸¤æ ¼è¿›è¡Œæ³¨é‡Š. æ¯”å¦‚:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// If we have enough memory, mmap the data portion too.</span>mmap_budget <span class="token operator">=</span> <span class="token generic-function"><span class="token function">max</span><span class="token generic class-name"><span class="token operator">&lt;</span>int64<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> mmap_budget <span class="token operator">-</span> index_<span class="token operator">-&gt;</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>mmap_budget <span class="token operator">&gt;=</span> data_size_ <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">MmapData</span><span class="token punctuation">(</span>mmap_chunk_bytes<span class="token punctuation">,</span> mlock<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token comment">// Error already logged.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„, è¿™é‡Œç”¨äº†ä¸¤æ®µæ³¨é‡Šåˆ†åˆ«æè¿°è¿™æ®µä»£ç çš„ä½œç”¨, å’Œæç¤ºå‡½æ•°è¿”å›æ—¶é”™è¯¯å·²ç»è¢«è®°å…¥æ—¥å¿—.</p><p>å¦‚æœä½ éœ€è¦è¿ç»­è¿›è¡Œå¤šè¡Œæ³¨é‡Š, å¯ä»¥ä½¿ä¹‹å¯¹é½è·å¾—æ›´å¥½çš„å¯è¯»æ€§:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token function">DoSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">// Comment here so the comments line up.</span><span class="token function">DoSomethingElseThatIsLonger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Two spaces between the code and the comment.</span><span class="token punctuation">{</span> <span class="token comment">// One space before comment when opening a new scope is allowed,</span>  <span class="token comment">// thus the comment lines up with the following comments and code.</span>  <span class="token function">DoSomethingElse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Two spaces before line comments normally.</span><span class="token punctuation">}</span>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> list<span class="token punctuation">{</span>                    <span class="token comment">// Comments in braced lists describe the next element...</span>                    <span class="token string">"First item"</span><span class="token punctuation">,</span>                    <span class="token comment">// .. and should be aligned appropriately.</span><span class="token string">"Second item"</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token function">DoSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* For trailing block comments, one space is fine. */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="å‡½æ•°å‚æ•°æ³¨é‡Š"><a href="#å‡½æ•°å‚æ•°æ³¨é‡Š" class="headerlink" title="å‡½æ•°å‚æ•°æ³¨é‡Š"></a>å‡½æ•°å‚æ•°æ³¨é‡Š</h4><p>å¦‚æœå‡½æ•°å‚æ•°çš„æ„ä¹‰ä¸æ˜æ˜¾, è€ƒè™‘ç”¨ä¸‹é¢çš„æ–¹å¼è¿›è¡Œå¼¥è¡¥:</p><ul><li>å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªå­—é¢å¸¸é‡, å¹¶ä¸”è¿™ä¸€å¸¸é‡åœ¨å¤šå¤„å‡½æ•°è°ƒç”¨ä¸­è¢«ä½¿ç”¨, ç”¨ä»¥æ¨æ–­å®ƒä»¬ä¸€è‡´, ä½ åº”å½“ç”¨ä¸€ä¸ªå¸¸é‡åè®©è¿™ä¸€çº¦å®šå˜å¾—æ›´æ˜æ˜¾, å¹¶ä¸”ä¿è¯è¿™ä¸€çº¦å®šä¸ä¼šè¢«æ‰“ç ´.</li><li>è€ƒè™‘æ›´æ”¹å‡½æ•°çš„ç­¾å, è®©æŸä¸ª <code>bool</code> ç±»å‹çš„å‚æ•°å˜ä¸º <code>enum</code> ç±»å‹, è¿™æ ·å¯ä»¥è®©è¿™ä¸ªå‚æ•°çš„å€¼è¡¨è¾¾å…¶æ„ä¹‰.</li><li>å¦‚æœæŸä¸ªå‡½æ•°æœ‰å¤šä¸ªé…ç½®é€‰é¡¹, ä½ å¯ä»¥è€ƒè™‘å®šä¹‰ä¸€ä¸ªç±»æˆ–ç»“æ„ä½“ä»¥ä¿å­˜æ‰€æœ‰çš„é€‰é¡¹, å¹¶ä¼ å…¥ç±»æˆ–ç»“æ„ä½“çš„å®ä¾‹. è¿™æ ·çš„æ–¹æ³•æœ‰è®¸å¤šä¼˜ç‚¹, ä¾‹å¦‚è¿™æ ·çš„é€‰é¡¹å¯ä»¥åœ¨è°ƒç”¨å¤„ç”¨å˜é‡åå¼•ç”¨, è¿™æ ·å°±èƒ½æ¸…æ™°åœ°è¡¨æ˜å…¶æ„ä¹‰. åŒæ—¶ä¹Ÿå‡å°‘äº†å‡½æ•°å‚æ•°çš„æ•°é‡, ä½¿å¾—å‡½æ•°è°ƒç”¨æ›´æ˜“è¯»ä¹Ÿæ˜“å†™. é™¤æ­¤ä¹‹å¤–, ä»¥è¿™æ ·çš„æ–¹å¼, å¦‚æœä½ ä½¿ç”¨å…¶ä»–çš„é€‰é¡¹, å°±æ— éœ€å¯¹è°ƒç”¨ç‚¹è¿›è¡Œæ›´æ”¹.</li><li>ç”¨å…·åå˜é‡ä»£æ›¿å¤§æ®µè€Œå¤æ‚çš„åµŒå¥—è¡¨è¾¾å¼.</li><li>ä¸‡ä¸å¾—å·²æ—¶, æ‰è€ƒè™‘åœ¨è°ƒç”¨ç‚¹ç”¨æ³¨é‡Šé˜æ˜å‚æ•°çš„æ„ä¹‰.</li></ul><p>æ¯”å¦‚ä¸‹é¢çš„ç¤ºä¾‹çš„å¯¹æ¯”:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// What are these arguments?</span><span class="token keyword">const</span> DecimalNumber product <span class="token operator">=</span> <span class="token function">CalculateProduct</span><span class="token punctuation">(</span>values<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å’Œ</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">ProductOptions options<span class="token punctuation">;</span>options<span class="token punctuation">.</span><span class="token function">set_precision_decimals</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>options<span class="token punctuation">.</span><span class="token function">set_use_cache</span><span class="token punctuation">(</span>ProductOptions<span class="token double-colon punctuation">::</span>kDontUseCache<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> DecimalNumber product <span class="token operator">=</span>    <span class="token function">CalculateProduct</span><span class="token punctuation">(</span>values<span class="token punctuation">,</span> options<span class="token punctuation">,</span> <span class="token comment">/*completion_callback=*/</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å“ªä¸ªæ›´æ¸…æ™°ä¸€ç›®äº†ç„¶.</p><h4 id="ä¸å…è®¸çš„è¡Œä¸º"><a href="#ä¸å…è®¸çš„è¡Œä¸º" class="headerlink" title="ä¸å…è®¸çš„è¡Œä¸º"></a>ä¸å…è®¸çš„è¡Œä¸º</h4><p>ä¸è¦æè¿°æ˜¾è€Œæ˜“è§çš„ç°è±¡, <em>æ°¸è¿œä¸è¦</em> ç”¨è‡ªç„¶è¯­è¨€ç¿»è¯‘ä»£ç ä½œä¸ºæ³¨é‡Š, é™¤éå³ä½¿å¯¹æ·±å…¥ç†è§£ C++ çš„è¯»è€…æ¥è¯´ä»£ç çš„è¡Œä¸ºéƒ½æ˜¯ä¸æ˜æ˜¾çš„. è¦å‡è®¾è¯»ä»£ç çš„äºº C++ æ°´å¹³æ¯”ä½ é«˜, å³ä¾¿ä»–/å¥¹å¯èƒ½ä¸çŸ¥é“ä½ çš„ç”¨æ„:</p><p>ä½ æ‰€æä¾›çš„æ³¨é‡Šåº”å½“è§£é‡Šä»£ç  <em>ä¸ºä»€ä¹ˆ</em> è¦è¿™ä¹ˆåšå’Œä»£ç çš„ç›®çš„, æˆ–è€…æœ€å¥½æ˜¯è®©ä»£ç è‡ªæ–‡æ¡£åŒ–.</p><p>æ¯”è¾ƒè¿™æ ·çš„æ³¨é‡Š:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// Find the element in the vector.  &lt;-- å·®: è¿™å¤ªæ˜æ˜¾äº†!</span><span class="token keyword">auto</span> iter <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">find</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> element<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>iter <span class="token operator">!=</span> v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">Process</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å’Œè¿™æ ·çš„æ³¨é‡Š:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// Process "element" unless it was already processed.</span><span class="token keyword">auto</span> iter <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">find</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> element<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>iter <span class="token operator">!=</span> v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">Process</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è‡ªæ–‡æ¡£åŒ–çš„ä»£ç æ ¹æœ¬å°±ä¸éœ€è¦æ³¨é‡Š. ä¸Šé¢ä¾‹å­ä¸­çš„æ³¨é‡Šå¯¹ä¸‹é¢çš„ä»£ç æ¥è¯´å°±æ˜¯æ¯«æ— å¿…è¦çš„:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">IsAlreadyProcessed</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">Process</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="æ ‡ç‚¹-æ‹¼å†™å’Œè¯­æ³•"><a href="#æ ‡ç‚¹-æ‹¼å†™å’Œè¯­æ³•" class="headerlink" title="æ ‡ç‚¹, æ‹¼å†™å’Œè¯­æ³•"></a>æ ‡ç‚¹, æ‹¼å†™å’Œè¯­æ³•</h3><p><strong>æ€»è¿°</strong></p><p>æ³¨æ„æ ‡ç‚¹, æ‹¼å†™å’Œè¯­æ³•; å†™çš„å¥½çš„æ³¨é‡Šæ¯”å·®çš„è¦æ˜“è¯»çš„å¤š.</p><p><strong>è¯´æ˜</strong></p><p>æ³¨é‡Šçš„é€šå¸¸å†™æ³•æ˜¯åŒ…å«æ­£ç¡®å¤§å°å†™å’Œç»“å°¾å¥å·çš„å®Œæ•´å™è¿°æ€§è¯­å¥. å¤§å¤šæ•°æƒ…å†µä¸‹, å®Œæ•´çš„å¥å­æ¯”å¥å­ç‰‡æ®µå¯è¯»æ€§æ›´é«˜. çŸ­ä¸€ç‚¹çš„æ³¨é‡Š, æ¯”å¦‚ä»£ç è¡Œå°¾æ³¨é‡Š, å¯ä»¥éšæ„ç‚¹, ä½†ä¾ç„¶è¦æ³¨æ„é£æ ¼çš„ä¸€è‡´æ€§.</p><p>è™½ç„¶è¢«åˆ«äººæŒ‡å‡ºè¯¥ç”¨åˆ†å·æ—¶å´ç”¨äº†é€—å·å¤šå°‘æœ‰äº›å°´å°¬, ä½†æ¸…æ™°æ˜“è¯»çš„ä»£ç è¿˜æ˜¯å¾ˆé‡è¦çš„. æ­£ç¡®çš„æ ‡ç‚¹, æ‹¼å†™å’Œè¯­æ³•å¯¹æ­¤ä¼šæœ‰å¾ˆå¤§å¸®åŠ©.</p><h3 id="TODO-æ³¨é‡Š"><a href="#TODO-æ³¨é‡Š" class="headerlink" title="TODO æ³¨é‡Š"></a>TODO æ³¨é‡Š</h3><p><strong>æ€»è¿°</strong></p><p>å¯¹é‚£äº›ä¸´æ—¶çš„, çŸ­æœŸçš„è§£å†³æ–¹æ¡ˆ, æˆ–å·²ç»å¤Ÿå¥½ä½†ä»ä¸å®Œç¾çš„ä»£ç ä½¿ç”¨ <code>TODO</code> æ³¨é‡Š.</p><p><code>TODO</code> æ³¨é‡Šè¦ä½¿ç”¨å…¨å¤§å†™çš„å­—ç¬¦ä¸² <code>TODO</code>, åœ¨éšåçš„åœ†æ‹¬å·é‡Œå†™ä¸Šä½ çš„åå­—, é‚®ä»¶åœ°å€, bug ID, æˆ–å…¶å®ƒèº«ä»½æ ‡è¯†å’Œä¸è¿™ä¸€ <code>TODO</code> ç›¸å…³çš„ issue. ä¸»è¦ç›®çš„æ˜¯è®©æ·»åŠ æ³¨é‡Šçš„äºº (ä¹Ÿæ˜¯å¯ä»¥è¯·æ±‚æä¾›æ›´å¤šç»†èŠ‚çš„äºº) å¯æ ¹æ®è§„èŒƒçš„ <code>TODO</code> æ ¼å¼è¿›è¡ŒæŸ¥æ‰¾. æ·»åŠ  <code>TODO</code> æ³¨é‡Šå¹¶ä¸æ„å‘³ç€ä½ è¦è‡ªå·±æ¥ä¿®æ­£, å› æ­¤å½“ä½ åŠ ä¸Šå¸¦æœ‰å§“åçš„ <code>TODO</code> æ—¶, ä¸€èˆ¬éƒ½æ˜¯å†™ä¸Šè‡ªå·±çš„åå­—.</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// TODO(kl@gmail.com): Use a "*" here for concatenation operator.</span><span class="token comment">// TODO(Zeke) change this to use relations.</span><span class="token comment">// TODO(bug 12345): remove the "Last visitors" feature</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¦‚æœåŠ  <code>TODO</code> æ˜¯ä¸ºäº†åœ¨ â€œå°†æ¥æŸä¸€å¤©åšæŸäº‹â€, å¯ä»¥é™„ä¸Šä¸€ä¸ªéå¸¸æ˜ç¡®çš„æ—¶é—´ â€œFix by November 2005â€), æˆ–è€…ä¸€ä¸ªæ˜ç¡®çš„äº‹é¡¹ (â€œRemove this code when all clients can handle XML responses.â€).</p><h3 id="å¼ƒç”¨æ³¨é‡Š"><a href="#å¼ƒç”¨æ³¨é‡Š" class="headerlink" title="å¼ƒç”¨æ³¨é‡Š"></a>å¼ƒç”¨æ³¨é‡Š</h3><p><strong>æ€»è¿°</strong></p><p>é€šè¿‡å¼ƒç”¨æ³¨é‡Šï¼ˆ<code>DEPRECATED</code> commentsï¼‰ä»¥æ ‡è®°æŸæ¥å£ç‚¹å·²å¼ƒç”¨.</p><p>æ‚¨å¯ä»¥å†™ä¸ŠåŒ…å«å…¨å¤§å†™çš„ <code>DEPRECATED</code> çš„æ³¨é‡Š, ä»¥æ ‡è®°æŸæ¥å£ä¸ºå¼ƒç”¨çŠ¶æ€. æ³¨é‡Šå¯ä»¥æ”¾åœ¨æ¥å£å£°æ˜å‰, æˆ–è€…åŒä¸€è¡Œ.</p><p>åœ¨ <code>DEPRECATED</code> ä¸€è¯å, åœ¨æ‹¬å·ä¸­ç•™ä¸‹æ‚¨çš„åå­—, é‚®ç®±åœ°å€ä»¥åŠå…¶ä»–èº«ä»½æ ‡è¯†.</p><p>å¼ƒç”¨æ³¨é‡Šåº”å½“åŒ…æ¶µç®€çŸ­è€Œæ¸…æ™°çš„æŒ‡å¼•, ä»¥å¸®åŠ©å…¶ä»–äººä¿®å¤å…¶è°ƒç”¨ç‚¹. åœ¨ C++ ä¸­, ä½ å¯ä»¥å°†ä¸€ä¸ªå¼ƒç”¨å‡½æ•°æ”¹é€ æˆä¸€ä¸ªå†…è”å‡½æ•°, è¿™ä¸€å‡½æ•°å°†è°ƒç”¨æ–°çš„æ¥å£.</p><p>ä»…ä»…æ ‡è®°æ¥å£ä¸º <code>DEPRECATED</code> å¹¶ä¸ä¼šè®©å¤§å®¶ä¸çº¦è€ŒåŒåœ°å¼ƒç”¨, æ‚¨è¿˜å¾—äº²è‡ªä¸»åŠ¨ä¿®æ­£è°ƒç”¨ç‚¹ï¼ˆcallsitesï¼‰, æˆ–æ˜¯æ‰¾ä¸ªå¸®æ‰‹.</p><p>ä¿®æ­£å¥½çš„ä»£ç åº”è¯¥ä¸ä¼šå†æ¶‰åŠå¼ƒç”¨æ¥å£ç‚¹äº†, ç€å®æ”¹ç”¨æ–°æ¥å£ç‚¹. å¦‚æœæ‚¨ä¸çŸ¥ä»ä½•ä¸‹æ‰‹, å¯ä»¥æ‰¾æ ‡è®°å¼ƒç”¨æ³¨é‡Šçš„å½“äº‹äººä¸€èµ·å•†é‡.</p><h2 id="æ ¼å¼"><a href="#æ ¼å¼" class="headerlink" title="æ ¼å¼"></a>æ ¼å¼</h2><p>æ¯ä¸ªäººéƒ½å¯èƒ½æœ‰è‡ªå·±çš„ä»£ç é£æ ¼å’Œæ ¼å¼, ä½†å¦‚æœä¸€ä¸ªé¡¹ç›®ä¸­çš„æ‰€æœ‰äººéƒ½éµå¾ªåŒä¸€é£æ ¼çš„è¯, è¿™ä¸ªé¡¹ç›®å°±èƒ½æ›´é¡ºåˆ©åœ°è¿›è¡Œ. æ¯ä¸ªäººæœªå¿…èƒ½åŒæ„ä¸‹è¿°çš„æ¯ä¸€å¤„æ ¼å¼è§„åˆ™, è€Œä¸”å…¶ä¸­çš„ä¸å°‘è§„åˆ™éœ€è¦ä¸€å®šæ—¶é—´çš„é€‚åº”, ä½†æ•´ä¸ªé¡¹ç›®æœä»ç»Ÿä¸€çš„ç¼–ç¨‹é£æ ¼æ˜¯å¾ˆé‡è¦çš„, åªæœ‰è¿™æ ·æ‰èƒ½è®©æ‰€æœ‰äººè½»æ¾åœ°é˜…è¯»å’Œç†è§£ä»£ç .</p><p>ä¸ºäº†å¸®åŠ©ä½ æ­£ç¡®çš„æ ¼å¼åŒ–ä»£ç , æˆ‘ä»¬å†™äº†ä¸€ä¸ª <a href="https://raw.githubusercontent.com/google/styleguide/gh-pages/google-c-style.el">emacs é…ç½®æ–‡ä»¶</a>.</p><h3 id="è¡Œé•¿åº¦"><a href="#è¡Œé•¿åº¦" class="headerlink" title="è¡Œé•¿åº¦"></a>è¡Œé•¿åº¦</h3><p><strong>æ€»è¿°</strong></p><p>æ¯ä¸€è¡Œä»£ç å­—ç¬¦æ•°ä¸è¶…è¿‡ 80.</p><p>æˆ‘ä»¬ä¹Ÿè®¤è¯†åˆ°è¿™æ¡è§„åˆ™æ˜¯æœ‰äº‰è®®çš„, ä½†å¾ˆå¤šå·²æœ‰ä»£ç éƒ½éµç…§è¿™ä¸€è§„åˆ™, å› æ­¤æˆ‘ä»¬æ„Ÿè§‰ä¸€è‡´æ€§æ›´é‡è¦.</p><p><strong>ä¼˜ç‚¹</strong></p><p>æå€¡è¯¥åŸåˆ™çš„äººè®¤ä¸ºå¼ºè¿«ä»–ä»¬è°ƒæ•´ç¼–è¾‘å™¨çª—å£å¤§å°æ˜¯å¾ˆé‡è›®çš„è¡Œä¸º. å¾ˆå¤šäººåŒæ—¶å¹¶æ’å¼€å‡ ä¸ªä»£ç çª—å£, æ ¹æœ¬æ²¡æœ‰å¤šä½™çš„ç©ºé—´æ‹‰ä¼¸çª—å£. å¤§å®¶éƒ½æŠŠçª—å£æœ€å¤§å°ºå¯¸åŠ ä»¥é™å®š, å¹¶ä¸” 80 åˆ—å®½æ˜¯ä¼ ç»Ÿæ ‡å‡†. é‚£ä¹ˆä¸ºä»€ä¹ˆè¦æ”¹å˜å‘¢?</p><p><strong>ç¼ºç‚¹</strong></p><p>åå¯¹è¯¥åŸåˆ™çš„äººåˆ™è®¤ä¸ºæ›´å®½çš„ä»£ç è¡Œæ›´æ˜“é˜…è¯». 80 åˆ—çš„é™åˆ¶æ˜¯ä¸Šä¸ªä¸–çºª 60 å¹´ä»£çš„å¤§å‹æœºçš„å¤æ¿ç¼ºé™·; ç°ä»£è®¾å¤‡å…·æœ‰æ›´å®½çš„æ˜¾ç¤ºå±, å¯ä»¥å¾ˆè½»æ¾åœ°æ˜¾ç¤ºæ›´å¤šä»£ç .</p><p><strong>ç»“è®º</strong></p><p>80 ä¸ªå­—ç¬¦æ˜¯æœ€å¤§å€¼.</p><p>å¦‚æœæ— æ³•åœ¨ä¸ä¼¤å®³æ˜“è¯»æ€§çš„æ¡ä»¶ä¸‹è¿›è¡Œæ–­è¡Œ, é‚£ä¹ˆæ³¨é‡Šè¡Œå¯ä»¥è¶…è¿‡ 80 ä¸ªå­—ç¬¦, è¿™æ ·å¯ä»¥æ–¹ä¾¿å¤åˆ¶ç²˜è´´. ä¾‹å¦‚, å¸¦æœ‰å‘½ä»¤ç¤ºä¾‹æˆ– URL çš„è¡Œå¯ä»¥è¶…è¿‡ 80 ä¸ªå­—ç¬¦.</p><p>åŒ…å«é•¿è·¯å¾„çš„ <code>#include</code> è¯­å¥å¯ä»¥è¶…å‡º80åˆ—.</p><p><a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/headers/#define-guard">å¤´æ–‡ä»¶ä¿æŠ¤</a> å¯ä»¥æ— è§†è¯¥åŸåˆ™.</p><h3 id="é-ASCII-å­—ç¬¦"><a href="#é-ASCII-å­—ç¬¦" class="headerlink" title="é ASCII å­—ç¬¦"></a>é ASCII å­—ç¬¦</h3><p><strong>æ€»è¿°</strong></p><p>å°½é‡ä¸ä½¿ç”¨é ASCII å­—ç¬¦, ä½¿ç”¨æ—¶å¿…é¡»ä½¿ç”¨ UTF-8 ç¼–ç .</p><p><strong>è¯´æ˜</strong></p><p>å³ä½¿æ˜¯è‹±æ–‡, ä¹Ÿä¸åº”å°†ç”¨æˆ·ç•Œé¢çš„æ–‡æœ¬ç¡¬ç¼–ç åˆ°æºä»£ç ä¸­, å› æ­¤é ASCII å­—ç¬¦åº”å½“å¾ˆå°‘è¢«ç”¨åˆ°. ç‰¹æ®Šæƒ…å†µä¸‹å¯ä»¥é€‚å½“åŒ…å«æ­¤ç±»å­—ç¬¦. ä¾‹å¦‚, ä»£ç åˆ†æå¤–éƒ¨æ•°æ®æ–‡ä»¶æ—¶, å¯ä»¥é€‚å½“ç¡¬ç¼–ç æ•°æ®æ–‡ä»¶ä¸­ä½œä¸ºåˆ†éš”ç¬¦çš„é ASCII å­—ç¬¦ä¸²; æ›´å¸¸è§çš„æ˜¯ (ä¸éœ€è¦æœ¬åœ°åŒ–çš„) å•å…ƒæµ‹è¯•ä»£ç å¯èƒ½åŒ…å«é ASCII å­—ç¬¦ä¸². æ­¤ç±»æƒ…å†µä¸‹, åº”ä½¿ç”¨ UTF-8 ç¼–ç , å› ä¸ºå¾ˆå¤šå·¥å…·éƒ½å¯ä»¥ç†è§£å’Œå¤„ç† UTF-8 ç¼–ç .</p><p>åå…­è¿›åˆ¶ç¼–ç ä¹Ÿå¯ä»¥, èƒ½å¢å¼ºå¯è¯»æ€§çš„æƒ…å†µä¸‹å°¤å…¶é¼“åŠ± â€”â€” æ¯”å¦‚ <code>"\xEF\xBB\xBF"</code>, æˆ–è€…æ›´ç®€æ´åœ°å†™ä½œ <code>u8"\uFEFF"</code>, åœ¨ Unicode ä¸­æ˜¯ <em>é›¶å®½åº¦ æ— é—´æ–­</em> çš„é—´éš”ç¬¦å·, å¦‚æœä¸ç”¨åå…­è¿›åˆ¶ç›´æ¥æ”¾åœ¨ UTF-8 æ ¼å¼çš„æºæ–‡ä»¶ä¸­, æ˜¯çœ‹ä¸åˆ°çš„.</p><p>(Yang.Y æ³¨: <code>"\xEF\xBB\xBF"</code> é€šå¸¸ç”¨ä½œ UTF-8 with BOM ç¼–ç æ ‡è®°)</p><p>ä½¿ç”¨ <code>u8</code> å‰ç¼€æŠŠå¸¦ <code>uXXXX</code> è½¬ä¹‰åºåˆ—çš„å­—ç¬¦ä¸²å­—é¢å€¼ç¼–ç æˆ UTF-8. ä¸è¦ç”¨åœ¨æœ¬èº«å°±å¸¦ UTF-8 å­—ç¬¦çš„å­—ç¬¦ä¸²å­—é¢å€¼ä¸Š, å› ä¸ºå¦‚æœç¼–è¯‘å™¨ä¸æŠŠæºä»£ç è¯†åˆ«æˆ UTF-8, è¾“å‡ºå°±ä¼šå‡ºé”™.</p><p>åˆ«ç”¨ C++11 çš„ <code>char16_t</code> å’Œ <code>char32_t</code>, å®ƒä»¬å’Œ UTF-8 æ–‡æœ¬æ²¡æœ‰å…³ç³», <code>wchar_t</code> åŒç†, é™¤éä½ å†™çš„ä»£ç è¦è°ƒç”¨ Windows API, åè€…å¹¿æ³›ä½¿ç”¨äº† <code>wchar_t</code>.</p><h3 id="ç©ºæ ¼è¿˜æ˜¯åˆ¶è¡¨ä½"><a href="#ç©ºæ ¼è¿˜æ˜¯åˆ¶è¡¨ä½" class="headerlink" title="ç©ºæ ¼è¿˜æ˜¯åˆ¶è¡¨ä½"></a>ç©ºæ ¼è¿˜æ˜¯åˆ¶è¡¨ä½</h3><p><strong>æ€»è¿°</strong></p><p>åªä½¿ç”¨ç©ºæ ¼, æ¯æ¬¡ç¼©è¿› 2 ä¸ªç©ºæ ¼.</p><p><strong>è¯´æ˜</strong></p><p>æˆ‘ä»¬ä½¿ç”¨ç©ºæ ¼ç¼©è¿›. ä¸è¦åœ¨ä»£ç ä¸­ä½¿ç”¨åˆ¶è¡¨ç¬¦. ä½ åº”è¯¥è®¾ç½®ç¼–è¾‘å™¨å°†åˆ¶è¡¨ç¬¦è½¬ä¸ºç©ºæ ¼.</p><h3 id="å‡½æ•°å£°æ˜ä¸å®šä¹‰"><a href="#å‡½æ•°å£°æ˜ä¸å®šä¹‰" class="headerlink" title="å‡½æ•°å£°æ˜ä¸å®šä¹‰"></a>å‡½æ•°å£°æ˜ä¸å®šä¹‰</h3><p><strong>æ€»è¿°</strong></p><p>è¿”å›ç±»å‹å’Œå‡½æ•°ååœ¨åŒä¸€è¡Œ, å‚æ•°ä¹Ÿå°½é‡æ”¾åœ¨åŒä¸€è¡Œ, å¦‚æœæ”¾ä¸ä¸‹å°±å¯¹å½¢å‚åˆ†è¡Œ, åˆ†è¡Œæ–¹å¼ä¸ <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/formatting/#function-calls">å‡½æ•°è°ƒç”¨</a> ä¸€è‡´.</p><p><strong>è¯´æ˜</strong></p><p>å‡½æ•°çœ‹ä¸Šå»åƒè¿™æ ·:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">ReturnType <span class="token class-name">ClassName</span><span class="token double-colon punctuation">::</span><span class="token function">FunctionName</span><span class="token punctuation">(</span>Type par_name1<span class="token punctuation">,</span> Type par_name2<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">DoSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœåŒä¸€è¡Œæ–‡æœ¬å¤ªå¤š, æ”¾ä¸ä¸‹æ‰€æœ‰å‚æ•°:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">ReturnType <span class="token class-name">ClassName</span><span class="token double-colon punctuation">::</span><span class="token function">ReallyLongFunctionName</span><span class="token punctuation">(</span>Type par_name1<span class="token punctuation">,</span> Type par_name2<span class="token punctuation">,</span>                                             Type par_name3<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">DoSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”šè‡³è¿ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ”¾ä¸ä¸‹:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">ReturnType <span class="token class-name">LongClassName</span><span class="token double-colon punctuation">::</span><span class="token function">ReallyReallyReallyLongFunctionName</span><span class="token punctuation">(</span>    Type par_name1<span class="token punctuation">,</span>  <span class="token comment">// 4 space indent</span>    Type par_name2<span class="token punctuation">,</span>    Type par_name3<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">DoSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2 space indent</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„ä»¥ä¸‹å‡ ç‚¹:</p><ul><li>ä½¿ç”¨å¥½çš„å‚æ•°å.</li><li>åªæœ‰åœ¨å‚æ•°æœªè¢«ä½¿ç”¨æˆ–è€…å…¶ç”¨é€”éå¸¸æ˜æ˜¾æ—¶, æ‰èƒ½çœç•¥å‚æ•°å.</li><li>å¦‚æœè¿”å›ç±»å‹å’Œå‡½æ•°ååœ¨ä¸€è¡Œæ”¾ä¸ä¸‹, åˆ†è¡Œ.</li><li>å¦‚æœè¿”å›ç±»å‹ä¸å‡½æ•°å£°æ˜æˆ–å®šä¹‰åˆ†è¡Œäº†, ä¸è¦ç¼©è¿›.</li><li>å·¦åœ†æ‹¬å·æ€»æ˜¯å’Œå‡½æ•°ååœ¨åŒä¸€è¡Œ.</li><li>å‡½æ•°åå’Œå·¦åœ†æ‹¬å·é—´æ°¸è¿œæ²¡æœ‰ç©ºæ ¼.</li><li>åœ†æ‹¬å·ä¸å‚æ•°é—´æ²¡æœ‰ç©ºæ ¼.</li><li>å·¦å¤§æ‹¬å·æ€»åœ¨æœ€åä¸€ä¸ªå‚æ•°åŒä¸€è¡Œçš„æœ«å°¾å¤„, ä¸å¦èµ·æ–°è¡Œ.</li><li>å³å¤§æ‹¬å·æ€»æ˜¯å•ç‹¬ä½äºå‡½æ•°æœ€åä¸€è¡Œ, æˆ–è€…ä¸å·¦å¤§æ‹¬å·åŒä¸€è¡Œ.</li><li>å³åœ†æ‹¬å·å’Œå·¦å¤§æ‹¬å·é—´æ€»æ˜¯æœ‰ä¸€ä¸ªç©ºæ ¼.</li><li>æ‰€æœ‰å½¢å‚åº”å°½å¯èƒ½å¯¹é½.</li><li>ç¼ºçœç¼©è¿›ä¸º 2 ä¸ªç©ºæ ¼.</li><li>æ¢è¡Œåçš„å‚æ•°ä¿æŒ 4 ä¸ªç©ºæ ¼çš„ç¼©è¿›.</li></ul><p>æœªè¢«ä½¿ç”¨çš„å‚æ•°, æˆ–è€…æ ¹æ®ä¸Šä¸‹æ–‡å¾ˆå®¹æ˜“çœ‹å‡ºå…¶ç”¨é€”çš„å‚æ•°, å¯ä»¥çœç•¥å‚æ•°å:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span> <span class="token keyword">public</span><span class="token operator">:</span>  <span class="token function">Foo</span><span class="token punctuation">(</span>Foo<span class="token operator">&amp;&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token keyword">const</span> Foo<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  Foo<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>Foo<span class="token operator">&amp;&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  Foo<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Foo<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœªè¢«ä½¿ç”¨çš„å‚æ•°å¦‚æœå…¶ç”¨é€”ä¸æ˜æ˜¾çš„è¯, åœ¨å‡½æ•°å®šä¹‰å¤„å°†å‚æ•°åæ³¨é‡Šèµ·æ¥:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span> <span class="token keyword">public</span><span class="token operator">:</span>  <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">Rotate</span><span class="token punctuation">(</span><span class="token keyword">double</span> radians<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Shape</span></span> <span class="token punctuation">{</span> <span class="token keyword">public</span><span class="token operator">:</span>  <span class="token keyword">void</span> <span class="token function">Rotate</span><span class="token punctuation">(</span><span class="token keyword">double</span> radians<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token class-name">Circle</span><span class="token double-colon punctuation">::</span><span class="token function">Rotate</span><span class="token punctuation">(</span><span class="token keyword">double</span> <span class="token comment">/*radians*/</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment">// å·® - å¦‚æœå°†æ¥æœ‰äººè¦å®ç°, å¾ˆéš¾çŒœå‡ºå˜é‡çš„ä½œç”¨.</span><span class="token keyword">void</span> <span class="token class-name">Circle</span><span class="token double-colon punctuation">::</span><span class="token function">Rotate</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å±æ€§, å’Œå±•å¼€ä¸ºå±æ€§çš„å®, å†™åœ¨å‡½æ•°å£°æ˜æˆ–å®šä¹‰çš„æœ€å‰é¢, å³è¿”å›ç±»å‹ä¹‹å‰:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">MUST_USE_RESULT <span class="token keyword">bool</span> <span class="token function">IsOK</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Lambda-è¡¨è¾¾å¼"><a href="#Lambda-è¡¨è¾¾å¼" class="headerlink" title="Lambda è¡¨è¾¾å¼"></a>Lambda è¡¨è¾¾å¼</h3><p><strong>æ€»è¿°</strong></p><p>Lambda è¡¨è¾¾å¼å¯¹å½¢å‚å’Œå‡½æ•°ä½“çš„æ ¼å¼åŒ–å’Œå…¶ä»–å‡½æ•°ä¸€è‡´; æ•è·åˆ—è¡¨åŒç†, è¡¨é¡¹ç”¨é€—å·éš”å¼€.</p><p><strong>è¯´æ˜</strong></p><p>è‹¥ç”¨å¼•ç”¨æ•è·, åœ¨å˜é‡åå’Œ <code>&amp;</code> ä¹‹é—´ä¸ç•™ç©ºæ ¼.</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">auto</span> add_to_x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span>x<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span> x <span class="token operator">+=</span> n<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>çŸ­ lambda å°±å†™å¾—å’Œå†…è”å‡½æ•°ä¸€æ ·.</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">std<span class="token double-colon punctuation">::</span>set<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> blacklist <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> digits <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>digits<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">remove_if</span><span class="token punctuation">(</span>digits<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> digits<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span>blacklist<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>               <span class="token keyword">return</span> blacklist<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">!=</span> blacklist<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>             digits<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å‡½æ•°è°ƒç”¨"><a href="#å‡½æ•°è°ƒç”¨" class="headerlink" title="å‡½æ•°è°ƒç”¨"></a>å‡½æ•°è°ƒç”¨</h3><p><strong>æ€»è¿°</strong></p><p>è¦ä¹ˆä¸€è¡Œå†™å®Œå‡½æ•°è°ƒç”¨, è¦ä¹ˆåœ¨åœ†æ‹¬å·é‡Œå¯¹å‚æ•°åˆ†è¡Œ, è¦ä¹ˆå‚æ•°å¦èµ·ä¸€è¡Œä¸”ç¼©è¿›å››æ ¼. å¦‚æœæ²¡æœ‰å…¶å®ƒé¡¾è™‘çš„è¯, å°½å¯èƒ½ç²¾ç®€è¡Œæ•°, æ¯”å¦‚æŠŠå¤šä¸ªå‚æ•°é€‚å½“åœ°æ”¾åœ¨åŒä¸€è¡Œé‡Œ.</p><p><strong>è¯´æ˜</strong></p><p>å‡½æ•°è°ƒç”¨éµå¾ªå¦‚ä¸‹å½¢å¼ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">bool</span> retval <span class="token operator">=</span> <span class="token function">DoSomething</span><span class="token punctuation">(</span>argument1<span class="token punctuation">,</span> argument2<span class="token punctuation">,</span> argument3<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœåŒä¸€è¡Œæ”¾ä¸ä¸‹, å¯æ–­ä¸ºå¤šè¡Œ, åé¢æ¯ä¸€è¡Œéƒ½å’Œç¬¬ä¸€ä¸ªå®å‚å¯¹é½, å·¦åœ†æ‹¬å·åå’Œå³åœ†æ‹¬å·å‰ä¸è¦ç•™ç©ºæ ¼ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">bool</span> retval <span class="token operator">=</span> <span class="token function">DoSomething</span><span class="token punctuation">(</span>averyveryveryverylongargument1<span class="token punctuation">,</span>                          argument2<span class="token punctuation">,</span> argument3<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å‚æ•°ä¹Ÿå¯ä»¥æ”¾åœ¨æ¬¡è¡Œ, ç¼©è¿›å››æ ¼ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">DoSomething</span><span class="token punctuation">(</span>        argument1<span class="token punctuation">,</span> argument2<span class="token punctuation">,</span>  <span class="token comment">// 4 ç©ºæ ¼ç¼©è¿›</span>        argument3<span class="token punctuation">,</span> argument4<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æŠŠå¤šä¸ªå‚æ•°æ”¾åœ¨åŒä¸€è¡Œä»¥å‡å°‘å‡½æ•°è°ƒç”¨æ‰€éœ€çš„è¡Œæ•°, é™¤éå½±å“åˆ°å¯è¯»æ€§. æœ‰äººè®¤ä¸ºæŠŠæ¯ä¸ªå‚æ•°éƒ½ç‹¬ç«‹æˆè¡Œ, ä¸ä»…æ›´å¥½è¯», è€Œä¸”æ–¹ä¾¿ç¼–è¾‘å‚æ•°. ä¸è¿‡, æ¯”èµ·æ‰€è°“çš„å‚æ•°ç¼–è¾‘, æˆ‘ä»¬æ›´çœ‹é‡å¯è¯»æ€§, ä¸”åè€…æ¯”è¾ƒå¥½åŠï¼š</p><p>å¦‚æœä¸€äº›å‚æ•°æœ¬èº«å°±æ˜¯ç•¥å¤æ‚çš„è¡¨è¾¾å¼, ä¸”é™ä½äº†å¯è¯»æ€§, é‚£ä¹ˆå¯ä»¥ç›´æ¥åˆ›å»ºä¸´æ—¶å˜é‡æè¿°è¯¥è¡¨è¾¾å¼, å¹¶ä¼ é€’ç»™å‡½æ•°ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> my_heuristic <span class="token operator">=</span> scores<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">*</span> y <span class="token operator">+</span> bases<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> retval <span class="token operator">=</span> <span class="token function">DoSomething</span><span class="token punctuation">(</span>my_heuristic<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æˆ–è€…æ”¾ç€ä¸ç®¡, è¡¥å……ä¸Šæ³¨é‡Šï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">bool</span> retval <span class="token operator">=</span> <span class="token function">DoSomething</span><span class="token punctuation">(</span>scores<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">*</span> y <span class="token operator">+</span> bases<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">// Score heuristic.</span>                          x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¦‚æœæŸå‚æ•°ç‹¬ç«‹æˆè¡Œ, å¯¹å¯è¯»æ€§æ›´æœ‰å¸®åŠ©çš„è¯, é‚£ä¹Ÿå¯ä»¥å¦‚æ­¤åš. å‚æ•°çš„æ ¼å¼å¤„ç†åº”å½“ä»¥å¯è¯»æ€§è€Œéå…¶ä»–ä½œä¸ºæœ€é‡è¦çš„åŸåˆ™.</p><p>æ­¤å¤–, å¦‚æœä¸€ç³»åˆ—å‚æ•°æœ¬èº«å°±æœ‰ä¸€å®šçš„ç»“æ„, å¯ä»¥é…Œæƒ…åœ°æŒ‰å…¶ç»“æ„æ¥å†³å®šå‚æ•°æ ¼å¼ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// é€šè¿‡ 3x3 çŸ©é˜µè½¬æ¢ widget.</span>my_widget<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> x3<span class="token punctuation">,</span>                    y1<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> y3<span class="token punctuation">,</span>                    z1<span class="token punctuation">,</span> z2<span class="token punctuation">,</span> z3<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆ—è¡¨åˆå§‹åŒ–æ ¼å¼"><a href="#åˆ—è¡¨åˆå§‹åŒ–æ ¼å¼" class="headerlink" title="åˆ—è¡¨åˆå§‹åŒ–æ ¼å¼"></a>åˆ—è¡¨åˆå§‹åŒ–æ ¼å¼</h3><p><strong>æ€»è¿°</strong></p><p>æ‚¨å¹³æ—¶æ€ä¹ˆæ ¼å¼åŒ–å‡½æ•°è°ƒç”¨, å°±æ€ä¹ˆæ ¼å¼åŒ– <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/others/#braced-initializer-list">åˆ—è¡¨åˆå§‹åŒ–</a>.</p><p><strong>è¯´æ˜</strong></p><p>å¦‚æœåˆ—è¡¨åˆå§‹åŒ–ä¼´éšç€åå­—, æ¯”å¦‚ç±»å‹æˆ–å˜é‡å, æ ¼å¼åŒ–æ—¶å°†å°†åå­—è§†ä½œå‡½æ•°è°ƒç”¨å, {} è§†ä½œå‡½æ•°è°ƒç”¨çš„æ‹¬å·. å¦‚æœæ²¡æœ‰åå­—, å°±è§†ä½œåå­—é•¿åº¦ä¸ºé›¶.</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// ä¸€è¡Œåˆ—è¡¨åˆå§‹åŒ–ç¤ºèŒƒ.</span><span class="token keyword">return</span> <span class="token punctuation">{</span>foo<span class="token punctuation">,</span> bar<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token function">functioncall</span><span class="token punctuation">(</span><span class="token punctuation">{</span>foo<span class="token punctuation">,</span> bar<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> p<span class="token punctuation">{</span>foo<span class="token punctuation">,</span> bar<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">// å½“ä¸å¾—ä¸æ–­è¡Œæ—¶.</span><span class="token function">SomeFunction</span><span class="token punctuation">(</span>    <span class="token punctuation">{</span><span class="token string">"assume a zero-length name before {"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// å‡è®¾åœ¨ { å‰æœ‰é•¿åº¦ä¸ºé›¶çš„åå­—.</span>    some_other_function_parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>SomeType variable<span class="token punctuation">{</span>    some<span class="token punctuation">,</span> other<span class="token punctuation">,</span> values<span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token string">"assume a zero-length name before {"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// å‡è®¾åœ¨ { å‰æœ‰é•¿åº¦ä¸ºé›¶çš„åå­—.</span>    SomeOtherType<span class="token punctuation">{</span>        <span class="token string">"Very long string requiring the surrounding breaks."</span><span class="token punctuation">,</span>  <span class="token comment">// éå¸¸é•¿çš„å­—ç¬¦ä¸², å‰åéƒ½éœ€è¦æ–­è¡Œ.</span>        some<span class="token punctuation">,</span> other values<span class="token punctuation">}</span><span class="token punctuation">,</span>    SomeOtherType<span class="token punctuation">{</span><span class="token string">"Slightly shorter string"</span><span class="token punctuation">,</span>  <span class="token comment">// ç¨çŸ­çš„å­—ç¬¦ä¸².</span>                  some<span class="token punctuation">,</span> other<span class="token punctuation">,</span> values<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>SomeType variable<span class="token punctuation">{</span>    <span class="token string">"This is too long to fit all in one line"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// å­—ç¬¦ä¸²è¿‡é•¿, å› æ­¤æ— æ³•æ”¾åœ¨åŒä¸€è¡Œ.</span>MyType m <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token comment">// æ³¨æ„äº†, æ‚¨å¯ä»¥åœ¨ { å‰æ–­è¡Œ.</span>    superlongvariablename1<span class="token punctuation">,</span>    superlongvariablename2<span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token keyword">short</span><span class="token punctuation">,</span> interior<span class="token punctuation">,</span> list<span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>interiorwrappinglist<span class="token punctuation">,</span>     interiorwrappinglist2<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ¡ä»¶è¯­å¥"><a href="#æ¡ä»¶è¯­å¥" class="headerlink" title="æ¡ä»¶è¯­å¥"></a>æ¡ä»¶è¯­å¥</h3><p><strong>æ€»è¿°</strong></p><p>å€¾å‘äºä¸åœ¨åœ†æ‹¬å·å†…ä½¿ç”¨ç©ºæ ¼. å…³é”®å­— <code>if</code> å’Œ <code>else</code> å¦èµ·ä¸€è¡Œ.</p><p><strong>è¯´æ˜</strong></p><p>å¯¹åŸºæœ¬æ¡ä»¶è¯­å¥æœ‰ä¸¤ç§å¯ä»¥æ¥å—çš„æ ¼å¼. ä¸€ç§åœ¨åœ†æ‹¬å·å’Œæ¡ä»¶ä¹‹é—´æœ‰ç©ºæ ¼, å¦ä¸€ç§æ²¡æœ‰.</p><p>æœ€å¸¸è§çš„æ˜¯æ²¡æœ‰ç©ºæ ¼çš„æ ¼å¼. å“ªä¸€ç§éƒ½å¯ä»¥, æœ€é‡è¦çš„æ˜¯ <em>ä¿æŒä¸€è‡´</em>. å¦‚æœä½ æ˜¯åœ¨ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶, å‚è€ƒå½“å‰å·²æœ‰æ ¼å¼. å¦‚æœæ˜¯å†™æ–°çš„ä»£ç , å‚è€ƒç›®å½•ä¸‹æˆ–é¡¹ç›®ä¸­å…¶å®ƒæ–‡ä»¶. è¿˜åœ¨çŠ¹è±«çš„è¯, å°±ä¸è¦åŠ ç©ºæ ¼äº†.</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// åœ†æ‹¬å·é‡Œæ²¡æœ‰ç©ºæ ¼.</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  <span class="token comment">// 2 ç©ºæ ¼ç¼©è¿›.</span><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// else ä¸ if çš„å³æ‹¬å·åŒä¸€è¡Œ.</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœä½ æ›´å–œæ¬¢åœ¨åœ†æ‹¬å·å†…éƒ¨åŠ ç©ºæ ¼:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">if</span> <span class="token punctuation">(</span> condition <span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// åœ†æ‹¬å·ä¸ç©ºæ ¼ç´§é‚» - ä¸å¸¸è§</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  <span class="token comment">// 2 ç©ºæ ¼ç¼©è¿›.</span><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>  <span class="token comment">// else ä¸ if çš„å³æ‹¬å·åŒä¸€è¡Œ.</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„æ‰€æœ‰æƒ…å†µä¸‹ <code>if</code> å’Œå·¦åœ†æ‹¬å·é—´éƒ½æœ‰ä¸ªç©ºæ ¼. å³åœ†æ‹¬å·å’Œå·¦å¤§æ‹¬å·ä¹‹é—´ä¹Ÿè¦æœ‰ä¸ªç©ºæ ¼:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">if</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span>     <span class="token comment">// å·® - IF åé¢æ²¡ç©ºæ ¼.</span><span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token comment">// å·® - { å‰é¢æ²¡ç©ºæ ¼.</span><span class="token keyword">if</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// å˜æœ¬åŠ å‰åœ°å·®.</span><span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// å¥½ - IF å’Œ { éƒ½ä¸ç©ºæ ¼ç´§é‚».</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœèƒ½å¢å¼ºå¯è¯»æ€§, ç®€çŸ­çš„æ¡ä»¶è¯­å¥å…è®¸å†™åœ¨åŒä¸€è¡Œ. åªæœ‰å½“è¯­å¥ç®€å•å¹¶ä¸”æ²¡æœ‰ä½¿ç”¨ <code>else</code> å­å¥æ—¶ä½¿ç”¨:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">==</span> kFoo<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">==</span> kBar<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token function">Bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¦‚æœè¯­å¥æœ‰ <code>else</code> åˆ†æ”¯åˆ™ä¸å…è®¸:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// ä¸å…è®¸ - å½“æœ‰ ELSE åˆ†æ”¯æ—¶ IF å—å´å†™åœ¨åŒä¸€è¡Œ</span><span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token function">DoThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token function">DoThat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>é€šå¸¸, å•è¡Œè¯­å¥ä¸éœ€è¦ä½¿ç”¨å¤§æ‹¬å·, å¦‚æœä½ å–œæ¬¢ç”¨ä¹Ÿæ²¡é—®é¢˜; å¤æ‚çš„æ¡ä»¶æˆ–å¾ªç¯è¯­å¥ç”¨å¤§æ‹¬å·å¯è¯»æ€§ä¼šæ›´å¥½. ä¹Ÿæœ‰ä¸€äº›é¡¹ç›®è¦æ±‚ <code>if</code> å¿…é¡»æ€»æ˜¯ä½¿ç”¨å¤§æ‹¬å·:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span>  <span class="token function">DoSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2 ç©ºæ ¼ç¼©è¿›.</span><span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">DoSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2 ç©ºæ ¼ç¼©è¿›.</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½†å¦‚æœè¯­å¥ä¸­æŸä¸ª <code>if-else</code> åˆ†æ”¯ä½¿ç”¨äº†å¤§æ‹¬å·çš„è¯, å…¶å®ƒåˆ†æ”¯ä¹Ÿå¿…é¡»ä½¿ç”¨:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// ä¸å¯ä»¥è¿™æ ·å­ - IF æœ‰å¤§æ‹¬å· ELSE å´æ²¡æœ‰.</span><span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>  foo<span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">else</span>  bar<span class="token punctuation">;</span><span class="token comment">// ä¸å¯ä»¥è¿™æ ·å­ - ELSE æœ‰å¤§æ‹¬å· IF å´æ²¡æœ‰.</span><span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span>  foo<span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token punctuation">{</span>  bar<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// åªè¦å…¶ä¸­ä¸€ä¸ªåˆ†æ”¯ç”¨äº†å¤§æ‹¬å·, ä¸¤ä¸ªåˆ†æ”¯éƒ½è¦ç”¨ä¸Šå¤§æ‹¬å·.</span><span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>  foo<span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>  bar<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¾ªç¯å’Œå¼€å…³é€‰æ‹©è¯­å¥"><a href="#å¾ªç¯å’Œå¼€å…³é€‰æ‹©è¯­å¥" class="headerlink" title="å¾ªç¯å’Œå¼€å…³é€‰æ‹©è¯­å¥"></a>å¾ªç¯å’Œå¼€å…³é€‰æ‹©è¯­å¥</h3><p><strong>æ€»è¿°</strong></p><p><code>switch</code> è¯­å¥å¯ä»¥ä½¿ç”¨å¤§æ‹¬å·åˆ†æ®µ, ä»¥è¡¨æ˜ cases ä¹‹é—´ä¸æ˜¯è¿åœ¨ä¸€èµ·çš„. åœ¨å•è¯­å¥å¾ªç¯é‡Œ, æ‹¬å·å¯ç”¨å¯ä¸ç”¨. ç©ºå¾ªç¯ä½“åº”ä½¿ç”¨ <code>{}</code> æˆ– <code>continue</code>.</p><p><strong>è¯´æ˜</strong></p><p><code>switch</code> è¯­å¥ä¸­çš„ <code>case</code> å—å¯ä»¥ä½¿ç”¨å¤§æ‹¬å·ä¹Ÿå¯ä»¥ä¸ç”¨, å–å†³äºä½ çš„ä¸ªäººå–œå¥½. å¦‚æœç”¨çš„è¯, è¦æŒ‰ç…§ä¸‹æ–‡æ‰€è¿°çš„æ–¹æ³•.</p><p>å¦‚æœæœ‰ä¸æ»¡è¶³ <code>case</code> æ¡ä»¶çš„æšä¸¾å€¼, <code>switch</code> åº”è¯¥æ€»æ˜¯åŒ…å«ä¸€ä¸ª <code>default</code> åŒ¹é… (å¦‚æœæœ‰è¾“å…¥å€¼æ²¡æœ‰ case å»å¤„ç†, ç¼–è¯‘å™¨å°†ç»™å‡º warning). å¦‚æœ <code>default</code> åº”è¯¥æ°¸è¿œæ‰§è¡Œä¸åˆ°, ç®€å•çš„åŠ æ¡ <code>assert</code>:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">switch</span> <span class="token punctuation">(</span>var<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 2 ç©ºæ ¼ç¼©è¿›</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>      <span class="token comment">// 4 ç©ºæ ¼ç¼©è¿›</span>    <span class="token keyword">break</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">break</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token function">assert</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨å•è¯­å¥å¾ªç¯é‡Œ, æ‹¬å·å¯ç”¨å¯ä¸ç”¨ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> kSomeNumber<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I love you\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> kSomeNumber<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"I take it back\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç©ºå¾ªç¯ä½“åº”ä½¿ç”¨ <code>{}</code> æˆ– <code>continue</code>, è€Œä¸æ˜¯ä¸€ä¸ªç®€å•çš„åˆ†å·.</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">while</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// åå¤å¾ªç¯ç›´åˆ°æ¡ä»¶å¤±æ•ˆ.</span><span class="token punctuation">}</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> kSomeNumber<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// å¯ - ç©ºå¾ªç¯ä½“.</span><span class="token keyword">while</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>  <span class="token comment">// å¯ - contunue è¡¨æ˜æ²¡æœ‰é€»è¾‘.</span><span class="token keyword">while</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å·® - çœ‹èµ·æ¥ä»…ä»…åªæ˜¯ while/loop çš„éƒ¨åˆ†ä¹‹ä¸€.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æŒ‡é’ˆå’Œå¼•ç”¨è¡¨è¾¾å¼"><a href="#æŒ‡é’ˆå’Œå¼•ç”¨è¡¨è¾¾å¼" class="headerlink" title="æŒ‡é’ˆå’Œå¼•ç”¨è¡¨è¾¾å¼"></a>æŒ‡é’ˆå’Œå¼•ç”¨è¡¨è¾¾å¼</h3><p><strong>æ€»è¿°</strong></p><p>å¥ç‚¹æˆ–ç®­å¤´å‰åä¸è¦æœ‰ç©ºæ ¼. æŒ‡é’ˆ/åœ°å€æ“ä½œç¬¦ (<code>*, &amp;</code>) ä¹‹åä¸èƒ½æœ‰ç©ºæ ¼.</p><p><strong>è¯´æ˜</strong></p><p>ä¸‹é¢æ˜¯æŒ‡é’ˆå’Œå¼•ç”¨è¡¨è¾¾å¼çš„æ­£ç¡®ä½¿ç”¨èŒƒä¾‹:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">x <span class="token operator">=</span> <span class="token operator">*</span>p<span class="token punctuation">;</span>p <span class="token operator">=</span> <span class="token operator">&amp;</span>x<span class="token punctuation">;</span>x <span class="token operator">=</span> r<span class="token punctuation">.</span>y<span class="token punctuation">;</span>x <span class="token operator">=</span> r<span class="token operator">-&gt;</span>y<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„:</p><ul><li>åœ¨è®¿é—®æˆå‘˜æ—¶, å¥ç‚¹æˆ–ç®­å¤´å‰åæ²¡æœ‰ç©ºæ ¼.</li><li>æŒ‡é’ˆæ“ä½œç¬¦ <code>*</code> æˆ– <code>&amp;</code> åæ²¡æœ‰ç©ºæ ¼.</li></ul><p>åœ¨å£°æ˜æŒ‡é’ˆå˜é‡æˆ–å‚æ•°æ—¶, æ˜Ÿå·ä¸ç±»å‹æˆ–å˜é‡åç´§æŒ¨éƒ½å¯ä»¥:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// å¥½, ç©ºæ ¼å‰ç½®.</span><span class="token keyword">char</span> <span class="token operator">*</span>c<span class="token punctuation">;</span><span class="token keyword">const</span> string <span class="token operator">&amp;</span>str<span class="token punctuation">;</span><span class="token comment">// å¥½, ç©ºæ ¼åç½®.</span><span class="token keyword">char</span><span class="token operator">*</span> c<span class="token punctuation">;</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">;</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token operator">*</span>y<span class="token punctuation">;</span>  <span class="token comment">// ä¸å…è®¸ - åœ¨å¤šé‡å£°æ˜ä¸­ä¸èƒ½ä½¿ç”¨ &amp; æˆ– *</span><span class="token keyword">char</span> <span class="token operator">*</span> c<span class="token punctuation">;</span>  <span class="token comment">// å·® - * ä¸¤è¾¹éƒ½æœ‰ç©ºæ ¼</span><span class="token keyword">const</span> string <span class="token operator">&amp;</span> str<span class="token punctuation">;</span>  <span class="token comment">// å·® - &amp; ä¸¤è¾¹éƒ½æœ‰ç©ºæ ¼.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨å•ä¸ªæ–‡ä»¶å†…è¦ä¿æŒé£æ ¼ä¸€è‡´, æ‰€ä»¥, å¦‚æœæ˜¯ä¿®æ”¹ç°æœ‰æ–‡ä»¶, è¦éµç…§è¯¥æ–‡ä»¶çš„é£æ ¼.</p><h3 id="å¸ƒå°”è¡¨è¾¾å¼"><a href="#å¸ƒå°”è¡¨è¾¾å¼" class="headerlink" title="å¸ƒå°”è¡¨è¾¾å¼"></a>å¸ƒå°”è¡¨è¾¾å¼</h3><p><strong>æ€»è¿°</strong></p><p>å¦‚æœä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼è¶…è¿‡ <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/formatting/#line-length">æ ‡å‡†è¡Œå®½</a>, æ–­è¡Œæ–¹å¼è¦ç»Ÿä¸€ä¸€ä¸‹.</p><p><strong>è¯´æ˜</strong></p><p>ä¸‹ä¾‹ä¸­, é€»è¾‘ä¸ (<code>&amp;&amp;</code>) æ“ä½œç¬¦æ€»ä½äºè¡Œå°¾:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">if</span> <span class="token punctuation">(</span>this_one_thing <span class="token operator">&gt;</span> this_other_thing <span class="token operator">&amp;&amp;</span>    a_third_thing <span class="token operator">==</span> a_fourth_thing <span class="token operator">&amp;&amp;</span>    yet_another <span class="token operator">&amp;&amp;</span> last_one<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„, ä¸Šä¾‹çš„é€»è¾‘ä¸ (<code>&amp;&amp;</code>) æ“ä½œç¬¦å‡ä½äºè¡Œå°¾. è¿™ä¸ªæ ¼å¼åœ¨ Google é‡Œå¾ˆå¸¸è§, è™½ç„¶æŠŠæ‰€æœ‰æ“ä½œç¬¦æ”¾åœ¨å¼€å¤´ä¹Ÿå¯ä»¥. å¯ä»¥è€ƒè™‘é¢å¤–æ’å…¥åœ†æ‹¬å·, åˆç†ä½¿ç”¨çš„è¯å¯¹å¢å¼ºå¯è¯»æ€§æ˜¯å¾ˆæœ‰å¸®åŠ©çš„. æ­¤å¤–, ç›´æ¥ç”¨ç¬¦å·å½¢å¼çš„æ“ä½œç¬¦, æ¯”å¦‚ <code>&amp;&amp;</code> å’Œ <code>~</code>, ä¸è¦ç”¨è¯è¯­å½¢å¼çš„ <code>and</code> å’Œ <code>compl</code>.</p><h3 id="å‡½æ•°è¿”å›å€¼"><a href="#å‡½æ•°è¿”å›å€¼" class="headerlink" title="å‡½æ•°è¿”å›å€¼"></a>å‡½æ•°è¿”å›å€¼</h3><p><strong>æ€»è¿°</strong></p><p>ä¸è¦åœ¨ <code>return</code> è¡¨è¾¾å¼é‡ŒåŠ ä¸Šéå¿…é¡»çš„åœ†æ‹¬å·.</p><p><strong>è¯´æ˜</strong></p><p>åªæœ‰åœ¨å†™ <code>x = expr</code> è¦åŠ ä¸Šæ‹¬å·çš„æ—¶å€™æ‰åœ¨ <code>return expr;</code> é‡Œä½¿ç”¨æ‹¬å·.</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">return</span> result<span class="token punctuation">;</span>                  <span class="token comment">// è¿”å›å€¼å¾ˆç®€å•, æ²¡æœ‰åœ†æ‹¬å·.</span><span class="token comment">// å¯ä»¥ç”¨åœ†æ‹¬å·æŠŠå¤æ‚è¡¨è¾¾å¼åœˆèµ·æ¥, æ”¹å–„å¯è¯»æ€§.</span><span class="token keyword">return</span> <span class="token punctuation">(</span>some_long_condition <span class="token operator">&amp;&amp;</span>        another_condition<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// æ¯•ç«Ÿæ‚¨ä»æ¥ä¸ä¼šå†™ var = (value);</span><span class="token keyword">return</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// return å¯ä¸æ˜¯å‡½æ•°ï¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å˜é‡åŠæ•°ç»„åˆå§‹åŒ–"><a href="#å˜é‡åŠæ•°ç»„åˆå§‹åŒ–" class="headerlink" title="å˜é‡åŠæ•°ç»„åˆå§‹åŒ–"></a>å˜é‡åŠæ•°ç»„åˆå§‹åŒ–</h3><p><strong>æ€»è¿°</strong></p><p>ç”¨ <code>=</code>, <code>()</code> å’Œ <code>{}</code> å‡å¯.</p><p><strong>è¯´æ˜</strong></p><p>æ‚¨å¯ä»¥ç”¨ <code>=</code>, <code>()</code> å’Œ <code>{}</code>, ä»¥ä¸‹çš„ä¾‹å­éƒ½æ˜¯æ­£ç¡®çš„ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> x<span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>string <span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"Some Name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>string name <span class="token operator">=</span> <span class="token string">"Some Name"</span><span class="token punctuation">;</span>string name<span class="token punctuation">{</span><span class="token string">"Some Name"</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¯·åŠ¡å¿…å°å¿ƒåˆ—è¡¨åˆå§‹åŒ– <code>{...}</code> ç”¨ <code>std::initializer_list</code> æ„é€ å‡½æ•°åˆå§‹åŒ–å‡ºçš„ç±»å‹. éç©ºåˆ—è¡¨åˆå§‹åŒ–å°±ä¼šä¼˜å…ˆè°ƒç”¨ <code>std::initializer_list</code>, ä¸è¿‡ç©ºåˆ—è¡¨åˆå§‹åŒ–é™¤å¤–, åè€…åŸåˆ™ä¸Šä¼šè°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°. ä¸ºäº†å¼ºåˆ¶ç¦ç”¨ <code>std::initializer_list</code> æ„é€ å‡½æ•°, è¯·æ”¹ç”¨æ‹¬å·.</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å†…å®¹ä¸º 100 ä¸ª 1 çš„å‘é‡.</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> v<span class="token punctuation">{</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// å†…å®¹ä¸º 100 å’Œ 1 çš„å‘é‡.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ­¤å¤–, åˆ—è¡¨åˆå§‹åŒ–ä¸å…è®¸æ•´å‹ç±»å‹çš„å››èˆäº”å…¥, è¿™å¯ä»¥ç”¨æ¥é¿å…ä¸€äº›ç±»å‹ä¸Šçš„ç¼–ç¨‹å¤±è¯¯.</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">pi</span><span class="token punctuation">(</span><span class="token number">3.14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å¥½ - pi == 3.</span><span class="token keyword">int</span> pi<span class="token punctuation">{</span><span class="token number">3.14</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// ç¼–è¯‘é”™è¯¯: ç¼©çª„è½¬æ¢.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="é¢„å¤„ç†æŒ‡ä»¤"><a href="#é¢„å¤„ç†æŒ‡ä»¤" class="headerlink" title="é¢„å¤„ç†æŒ‡ä»¤"></a>é¢„å¤„ç†æŒ‡ä»¤</h3><p><strong>æ€»è¿°</strong></p><p>é¢„å¤„ç†æŒ‡ä»¤ä¸è¦ç¼©è¿›, ä»è¡Œé¦–å¼€å§‹.</p><p><strong>è¯´æ˜</strong></p><p>å³ä½¿é¢„å¤„ç†æŒ‡ä»¤ä½äºç¼©è¿›ä»£ç å—ä¸­, æŒ‡ä»¤ä¹Ÿåº”ä»è¡Œé¦–å¼€å§‹.</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// å¥½ - æŒ‡ä»¤ä»è¡Œé¦–å¼€å§‹</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>lopsided_score<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">DISASTER_PENDING      </span><span class="token comment">// æ­£ç¡® - ä»è¡Œé¦–å¼€å§‹</span></span>    <span class="token function">DropEverything</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">if</span> <span class="token expression">NOTIFY               </span><span class="token comment">// éå¿…è¦ - # åè·Ÿç©ºæ ¼</span></span>    <span class="token function">NotifyClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">endif</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>    <span class="token function">BackToNormal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token comment">// å·® - æŒ‡ä»¤ç¼©è¿›</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>lopsided_score<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">DISASTER_PENDING  </span><span class="token comment">// å·® - "#if" åº”è¯¥æ”¾åœ¨è¡Œå¼€å¤´</span></span>    <span class="token function">DropEverything</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span>                <span class="token comment">// å·® - "#endif" ä¸è¦ç¼©è¿›</span></span>    <span class="token function">BackToNormal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç±»æ ¼å¼"><a href="#ç±»æ ¼å¼" class="headerlink" title="ç±»æ ¼å¼"></a>ç±»æ ¼å¼</h3><p><strong>æ€»è¿°</strong></p><p>è®¿é—®æ§åˆ¶å—çš„å£°æ˜ä¾æ¬¡åºæ˜¯ <code>public:</code>, <code>protected:</code>, <code>private:</code>, æ¯ä¸ªéƒ½ç¼©è¿› 1 ä¸ªç©ºæ ¼.</p><p><strong>è¯´æ˜</strong></p><p>ç±»å£°æ˜ (ä¸‹é¢çš„ä»£ç ä¸­ç¼ºå°‘æ³¨é‡Š, å‚è€ƒ <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/comments/#class-comments">ç±»æ³¨é‡Š</a>) çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">OtherClass</span></span> <span class="token punctuation">{</span> <span class="token keyword">public</span><span class="token operator">:</span>      <span class="token comment">// æ³¨æ„æœ‰ä¸€ä¸ªç©ºæ ¼çš„ç¼©è¿›</span>  <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// æ ‡å‡†çš„ä¸¤ç©ºæ ¼ç¼©è¿›</span>  <span class="token keyword">explicit</span> <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token keyword">int</span> var<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">~</span><span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token keyword">void</span> <span class="token function">SomeFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">void</span> <span class="token function">SomeFunctionThatDoesNothing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span>  <span class="token keyword">void</span> <span class="token function">set_some_var</span><span class="token punctuation">(</span><span class="token keyword">int</span> var<span class="token punctuation">)</span> <span class="token punctuation">{</span> some_var_ <span class="token operator">=</span> var<span class="token punctuation">;</span> <span class="token punctuation">}</span>  <span class="token keyword">int</span> <span class="token function">some_var</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> some_var_<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">private</span><span class="token operator">:</span>  <span class="token keyword">bool</span> <span class="token function">SomeInternalFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">int</span> some_var_<span class="token punctuation">;</span>  <span class="token keyword">int</span> some_other_var_<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„äº‹é¡¹:</p><ul><li>æ‰€æœ‰åŸºç±»ååº”åœ¨ 80 åˆ—é™åˆ¶ä¸‹å°½é‡ä¸å­ç±»åæ”¾åœ¨åŒä¸€è¡Œ.</li><li>å…³é”®è¯ <code>public:</code>, <code>protected:</code>, <code>private:</code> è¦ç¼©è¿› 1 ä¸ªç©ºæ ¼.</li><li>é™¤ç¬¬ä¸€ä¸ªå…³é”®è¯ (ä¸€èˆ¬æ˜¯ <code>public</code>) å¤–, å…¶ä»–å…³é”®è¯å‰è¦ç©ºä¸€è¡Œ. å¦‚æœç±»æ¯”è¾ƒå°çš„è¯ä¹Ÿå¯ä»¥ä¸ç©º.</li><li>è¿™äº›å…³é”®è¯åä¸è¦ä¿ç•™ç©ºè¡Œ.</li><li><code>public</code> æ”¾åœ¨æœ€å‰é¢, ç„¶åæ˜¯ <code>protected</code>, æœ€åæ˜¯ <code>private</code>.</li><li>å…³äºå£°æ˜é¡ºåºçš„è§„åˆ™è¯·å‚è€ƒ <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/classes/#declaration-order">å£°æ˜é¡ºåº</a> ä¸€èŠ‚.</li></ul><h3 id="æ„é€ å‡½æ•°åˆå§‹å€¼åˆ—è¡¨"><a href="#æ„é€ å‡½æ•°åˆå§‹å€¼åˆ—è¡¨" class="headerlink" title="æ„é€ å‡½æ•°åˆå§‹å€¼åˆ—è¡¨"></a>æ„é€ å‡½æ•°åˆå§‹å€¼åˆ—è¡¨</h3><p><strong>æ€»è¿°</strong></p><p>æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨æ”¾åœ¨åŒä¸€è¡Œæˆ–æŒ‰å››æ ¼ç¼©è¿›å¹¶æ’å¤šè¡Œ.</p><p><strong>è¯´æ˜</strong></p><p>ä¸‹é¢ä¸¤ç§åˆå§‹å€¼åˆ—è¡¨æ–¹å¼éƒ½å¯ä»¥æ¥å—:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// å¦‚æœæ‰€æœ‰å˜é‡èƒ½æ”¾åœ¨åŒä¸€è¡Œ:</span><span class="token class-name">MyClass</span><span class="token double-colon punctuation">::</span><span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token keyword">int</span> var<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">some_var_</span><span class="token punctuation">(</span>var<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">DoSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// å¦‚æœä¸èƒ½æ”¾åœ¨åŒä¸€è¡Œ,</span><span class="token comment">// å¿…é¡»ç½®äºå†’å·å, å¹¶ç¼©è¿› 4 ä¸ªç©ºæ ¼</span><span class="token class-name">MyClass</span><span class="token double-colon punctuation">::</span><span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token keyword">int</span> var<span class="token punctuation">)</span>    <span class="token operator">:</span> <span class="token function">some_var_</span><span class="token punctuation">(</span>var<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">some_other_var_</span><span class="token punctuation">(</span>var <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">DoSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// å¦‚æœåˆå§‹åŒ–åˆ—è¡¨éœ€è¦ç½®äºå¤šè¡Œ, å°†æ¯ä¸€ä¸ªæˆå‘˜æ”¾åœ¨å•ç‹¬çš„ä¸€è¡Œ</span><span class="token comment">// å¹¶é€è¡Œå¯¹é½</span><span class="token class-name">MyClass</span><span class="token double-colon punctuation">::</span><span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token keyword">int</span> var<span class="token punctuation">)</span>    <span class="token operator">:</span> <span class="token function">some_var_</span><span class="token punctuation">(</span>var<span class="token punctuation">)</span><span class="token punctuation">,</span>             <span class="token comment">// 4 space indent</span>      <span class="token function">some_other_var_</span><span class="token punctuation">(</span>var <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// lined up</span>  <span class="token function">DoSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// å³å¤§æ‹¬å· } å¯ä»¥å’Œå·¦å¤§æ‹¬å· { æ”¾åœ¨åŒä¸€è¡Œ</span><span class="token comment">// å¦‚æœè¿™æ ·åšåˆé€‚çš„è¯</span><span class="token class-name">MyClass</span><span class="token double-colon punctuation">::</span><span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token keyword">int</span> var<span class="token punctuation">)</span>    <span class="token operator">:</span> <span class="token function">some_var_</span><span class="token punctuation">(</span>var<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å‘½åç©ºé—´æ ¼å¼åŒ–"><a href="#å‘½åç©ºé—´æ ¼å¼åŒ–" class="headerlink" title="å‘½åç©ºé—´æ ¼å¼åŒ–"></a>å‘½åç©ºé—´æ ¼å¼åŒ–</h3><p><strong>æ€»è¿°</strong></p><p>å‘½åç©ºé—´å†…å®¹ä¸ç¼©è¿›.</p><p><strong>è¯´æ˜</strong></p><p><a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/scoping/#namespaces">å‘½åç©ºé—´</a> ä¸è¦å¢åŠ é¢å¤–çš„ç¼©è¿›å±‚æ¬¡, ä¾‹å¦‚:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">namespace</span> <span class="token punctuation">{</span><span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// æ­£ç¡®. å‘½åç©ºé—´å†…æ²¡æœ‰é¢å¤–çš„ç¼©è¿›.</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">}</span>  <span class="token comment">// namespace</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸è¦åœ¨å‘½åç©ºé—´å†…ç¼©è¿›:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">namespace</span> <span class="token punctuation">{</span>  <span class="token comment">// é”™, ç¼©è¿›å¤šä½™äº†.</span>  <span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>  <span class="token comment">// namespace</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å£°æ˜åµŒå¥—å‘½åç©ºé—´æ—¶, æ¯ä¸ªå‘½åç©ºé—´éƒ½ç‹¬ç«‹æˆè¡Œ.</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">namespace</span> foo <span class="token punctuation">{</span><span class="token keyword">namespace</span> bar <span class="token punctuation">{</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="æ°´å¹³ç•™ç™½"><a href="#æ°´å¹³ç•™ç™½" class="headerlink" title="æ°´å¹³ç•™ç™½"></a>æ°´å¹³ç•™ç™½</h3><p><strong>æ€»è¿°</strong></p><p>æ°´å¹³ç•™ç™½çš„ä½¿ç”¨æ ¹æ®åœ¨ä»£ç ä¸­çš„ä½ç½®å†³å®š. æ°¸è¿œä¸è¦åœ¨è¡Œå°¾æ·»åŠ æ²¡æ„ä¹‰çš„ç•™ç™½.</p><p><strong>è¯´æ˜</strong></p><h4 id="é€šç”¨"><a href="#é€šç”¨" class="headerlink" title="é€šç”¨"></a>é€šç”¨</h4><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">bool</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// å·¦å¤§æ‹¬å·å‰æ€»æ˜¯æœ‰ç©ºæ ¼.</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">// åˆ†å·å‰ä¸åŠ ç©ºæ ¼.</span><span class="token comment">// åˆ—è¡¨åˆå§‹åŒ–ä¸­å¤§æ‹¬å·å†…çš„ç©ºæ ¼æ˜¯å¯é€‰çš„.</span><span class="token comment">// å¦‚æœåŠ äº†ç©ºæ ¼, é‚£ä¹ˆä¸¤è¾¹éƒ½è¦åŠ ä¸Š.</span><span class="token keyword">int</span> x<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> x<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">// ç»§æ‰¿ä¸åˆå§‹åŒ–åˆ—è¡¨ä¸­çš„å†’å·å‰åæ’æœ‰ç©ºæ ¼.</span><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Bar</span></span> <span class="token punctuation">{</span> <span class="token keyword">public</span><span class="token operator">:</span>  <span class="token comment">// å¯¹äºå•è¡Œå‡½æ•°çš„å®ç°, åœ¨å¤§æ‹¬å·å†…åŠ ä¸Šç©ºæ ¼</span>  <span class="token comment">// ç„¶åæ˜¯å‡½æ•°å®ç°</span>  <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">baz_</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// å¤§æ‹¬å·é‡Œé¢æ˜¯ç©ºçš„è¯, ä¸åŠ ç©ºæ ¼.</span>  <span class="token keyword">void</span> <span class="token function">Reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> baz_ <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>  <span class="token comment">// ç”¨ç©ºæ ¼æŠŠå¤§æ‹¬å·ä¸å®ç°åˆ†å¼€.</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ·»åŠ å†—ä½™çš„ç•™ç™½ä¼šç»™å…¶ä»–äººç¼–è¾‘æ—¶é€ æˆé¢å¤–è´Ÿæ‹…. å› æ­¤, è¡Œå°¾ä¸è¦ç•™ç©ºæ ¼. å¦‚æœç¡®å®šä¸€è¡Œä»£ç å·²ç»ä¿®æ”¹å®Œæ¯•, å°†å¤šä½™çš„ç©ºæ ¼å»æ‰; æˆ–è€…åœ¨ä¸“é—¨æ¸…ç†ç©ºæ ¼æ—¶å»æ‰ï¼ˆå°¤å…¶æ˜¯åœ¨æ²¡æœ‰å…¶ä»–äººåœ¨å¤„ç†è¿™ä»¶äº‹çš„æ—¶å€™). (Yang.Y æ³¨: ç°åœ¨å¤§éƒ¨åˆ†ä»£ç ç¼–è¾‘å™¨ç¨åŠ è®¾ç½®å, éƒ½æ”¯æŒè‡ªåŠ¨åˆ é™¤è¡Œé¦–/è¡Œå°¾ç©ºæ ¼, å¦‚æœä¸æ”¯æŒ, è€ƒè™‘æ¢ä¸€æ¬¾ç¼–è¾‘å™¨æˆ– IDE)</p><h4 id="å¾ªç¯å’Œæ¡ä»¶è¯­å¥"><a href="#å¾ªç¯å’Œæ¡ä»¶è¯­å¥" class="headerlink" title="å¾ªç¯å’Œæ¡ä»¶è¯­å¥"></a>å¾ªç¯å’Œæ¡ä»¶è¯­å¥</h4><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">if</span> <span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment">// if æ¡ä»¶è¯­å¥å’Œå¾ªç¯è¯­å¥å…³é”®å­—åå‡æœ‰ç©ºæ ¼.</span><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>          <span class="token comment">// else å‰åæœ‰ç©ºæ ¼.</span><span class="token punctuation">}</span><span class="token keyword">while</span> <span class="token punctuation">(</span>test<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>   <span class="token comment">// åœ†æ‹¬å·å†…éƒ¨ä¸ç´§é‚»ç©ºæ ¼.</span><span class="token keyword">switch</span> <span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">switch</span> <span class="token punctuation">(</span> i <span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// å¾ªç¯å’Œæ¡ä»¶è¯­å¥çš„åœ†æ‹¬å·é‡Œå¯ä»¥ä¸ç©ºæ ¼ç´§é‚».</span><span class="token keyword">if</span> <span class="token punctuation">(</span> test <span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token comment">// åœ†æ‹¬å·, ä½†è¿™å¾ˆå°‘è§. æ€»ä¹‹è¦ä¸€è‡´.</span><span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token operator">++</span>i <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// å¾ªç¯é‡Œå†… ; åæ’æœ‰ç©ºæ ¼, ;  å‰å¯ä»¥åŠ ä¸ªç©ºæ ¼.</span><span class="token keyword">switch</span> <span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>         <span class="token comment">// switch case çš„å†’å·å‰æ— ç©ºæ ¼.</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>  <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token keyword">break</span><span class="token punctuation">;</span>  <span class="token comment">// å¦‚æœå†’å·æœ‰ä»£ç , åŠ ä¸ªç©ºæ ¼.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æ“ä½œç¬¦"><a href="#æ“ä½œç¬¦" class="headerlink" title="æ“ä½œç¬¦"></a>æ“ä½œç¬¦</h4><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// èµ‹å€¼è¿ç®—ç¬¦å‰åæ€»æ˜¯æœ‰ç©ºæ ¼.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">// å…¶å®ƒäºŒå…ƒæ“ä½œç¬¦ä¹Ÿå‰åæ’æœ‰ç©ºæ ¼, ä¸è¿‡å¯¹äºè¡¨è¾¾å¼çš„å­å¼å¯ä»¥ä¸åŠ ç©ºæ ¼.</span><span class="token comment">// åœ†æ‹¬å·å†…éƒ¨æ²¡æœ‰ç´§é‚»ç©ºæ ¼.</span>v <span class="token operator">=</span> w <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">/</span> z<span class="token punctuation">;</span>v <span class="token operator">=</span> w<span class="token operator">*</span>x <span class="token operator">+</span> y<span class="token operator">/</span>z<span class="token punctuation">;</span>v <span class="token operator">=</span> w <span class="token operator">*</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> z<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åœ¨å‚æ•°å’Œä¸€å…ƒæ“ä½œç¬¦ä¹‹é—´ä¸åŠ ç©ºæ ¼.</span>x <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">;</span><span class="token operator">++</span>x<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>y<span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æ¨¡æ¿å’Œè½¬æ¢"><a href="#æ¨¡æ¿å’Œè½¬æ¢" class="headerlink" title="æ¨¡æ¿å’Œè½¬æ¢"></a>æ¨¡æ¿å’Œè½¬æ¢</h4><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// å°–æ‹¬å·(&lt; and &gt;) ä¸ä¸ç©ºæ ¼ç´§é‚», &lt; å‰æ²¡æœ‰ç©ºæ ¼, &gt; å’Œ ( ä¹‹é—´ä¹Ÿæ²¡æœ‰.</span>vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> x<span class="token punctuation">;</span>y <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åœ¨ç±»å‹ä¸æŒ‡é’ˆæ“ä½œç¬¦ä¹‹é—´ç•™ç©ºæ ¼ä¹Ÿå¯ä»¥, ä½†è¦ä¿æŒä¸€è‡´.</span>vector<span class="token operator">&lt;</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">&gt;</span> x<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å‚ç›´ç•™ç™½"><a href="#å‚ç›´ç•™ç™½" class="headerlink" title="å‚ç›´ç•™ç™½"></a>å‚ç›´ç•™ç™½</h3><p><strong>æ€»è¿°</strong></p><p>å‚ç›´ç•™ç™½è¶Šå°‘è¶Šå¥½.</p><p><strong>è¯´æ˜</strong></p><p>è¿™ä¸ä»…ä»…æ˜¯è§„åˆ™è€Œæ˜¯åŸåˆ™é—®é¢˜äº†: ä¸åœ¨ä¸‡ä¸å¾—å·², ä¸è¦ä½¿ç”¨ç©ºè¡Œ. å°¤å…¶æ˜¯: ä¸¤ä¸ªå‡½æ•°å®šä¹‰ä¹‹é—´çš„ç©ºè¡Œä¸è¦è¶…è¿‡ 2 è¡Œ, å‡½æ•°ä½“é¦–å°¾ä¸è¦ç•™ç©ºè¡Œ, å‡½æ•°ä½“ä¸­ä¹Ÿä¸è¦éšæ„æ·»åŠ ç©ºè¡Œ.</p><p>åŸºæœ¬åŸåˆ™æ˜¯: åŒä¸€å±å¯ä»¥æ˜¾ç¤ºçš„ä»£ç è¶Šå¤š, è¶Šå®¹æ˜“ç†è§£ç¨‹åºçš„æ§åˆ¶æµ. å½“ç„¶, è¿‡äºå¯†é›†çš„ä»£ç å—å’Œè¿‡äºç–æ¾çš„ä»£ç å—åŒæ ·éš¾çœ‹, è¿™å–å†³äºä½ çš„åˆ¤æ–­. ä½†é€šå¸¸æ˜¯å‚ç›´ç•™ç™½è¶Šå°‘è¶Šå¥½.</p><p>ä¸‹é¢çš„è§„åˆ™å¯ä»¥è®©åŠ å…¥çš„ç©ºè¡Œæ›´æœ‰æ•ˆ:</p><ul><li>å‡½æ•°ä½“å†…å¼€å¤´æˆ–ç»“å°¾çš„ç©ºè¡Œå¯è¯»æ€§å¾®ä¹å…¶å¾®.</li><li>åœ¨å¤šé‡ if-else å—é‡ŒåŠ ç©ºè¡Œæˆ–è®¸æœ‰ç‚¹å¯è¯»æ€§.</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¸€å›¾ä»¥è”½ä¹‹</p><p><img src="/images/cpp-notes/google-cpp-style.png" alt="google-cpp-style"></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ ç¼–ç¨‹è§„èŒƒï¼ˆä¸€ï¼‰</title>
      <link href="2022/04/05/cpp-notes-7/"/>
      <url>2022/04/05/cpp-notes-7/</url>
      
        <content type="html"><![CDATA[<h1 id="C-ç¼–ç¨‹è§„èŒƒï¼ˆä¸€ï¼‰"><a href="#C-ç¼–ç¨‹è§„èŒƒï¼ˆä¸€ï¼‰" class="headerlink" title="C++ ç¼–ç¨‹è§„èŒƒï¼ˆä¸€ï¼‰"></a>C++ ç¼–ç¨‹è§„èŒƒï¼ˆä¸€ï¼‰</h1><p>æœ¬æ–‡æ˜¯æˆ‘å¯¹äº<a href="https://zh-google-styleguide.readthedocs.io/en/latest/">Google å¼€æºé¡¹ç›®é£æ ¼æŒ‡å—â€”â€”ä¸­æ–‡ç‰ˆ</a>çš„å­¦ä¹ ç¬”è®°ï¼Œåœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­æ¬è¿å’Œæ•´ç†å‡ºäº†è¿™ç¯‡æ–‡ç« ã€‚</p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç¼–ç¨‹è§„èŒƒæ˜¯ä¸€ä¸ªç‰¹åˆ«é‡è¦çš„é—®é¢˜ã€‚</p><p>å…³äºç¼–ç¨‹è§„èŒƒã€ä»£ç é£æ ¼ç›¸å…³çš„æ•™ç¨‹ï¼Œç½‘ä¸Šå·²ç»ç‰¹åˆ«ä¸°å¯Œï¼Œæœ¬æ–‡ä»…åšä¸€ä¸ªç®€å•çš„ä»‹ç»ï¼ŒæœŸæœ›è¯»è€…é˜…è¯»æœ¬æ–‡åèƒ½å¤Ÿå¯¹å¦‚ä½•è§„èŒƒçš„ç”¨C++è¯­è¨€è¿›è¡Œç¼–ç¨‹æœ‰ä¸€ä¸ªåŸºæœ¬çš„è®¤çŸ¥ã€‚</p><p>å¦‚æœæƒ³è¦æ›´è¯¦ç»†çš„ä»‹ç»ï¼Œå¯ä»¥å‚è€ƒï¼š<a href="https://zh-google-styleguide.readthedocs.io/en/latest/">Google å¼€æºé¡¹ç›®é£æ ¼æŒ‡å—â€”â€”ä¸­æ–‡ç‰ˆ</a>ã€‚</p><h2 id="å¤´æ–‡ä»¶"><a href="#å¤´æ–‡ä»¶" class="headerlink" title="å¤´æ–‡ä»¶"></a>å¤´æ–‡ä»¶</h2><p>é€šå¸¸æ¯ä¸€ä¸ª <code>.cc</code> æ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ <code>.h</code> æ–‡ä»¶ã€‚ä¹Ÿæœ‰ä¸€äº›å¸¸è§ä¾‹å¤–ï¼Œå¦‚å•å…ƒæµ‹è¯•ä»£ç å’ŒåªåŒ…å« <code>main()</code> å‡½æ•°çš„ <code>.cc</code> æ–‡ä»¶ã€‚æ­£ç¡®ä½¿ç”¨å¤´æ–‡ä»¶å¯ä»¤ä»£ç åœ¨å¯è¯»æ€§ã€æ–‡ä»¶å¤§å°å’Œæ€§èƒ½ä¸Šå¤§ä¸ºæ”¹è§‚ã€‚</p><h3 id="define-ä¿æŠ¤"><a href="#define-ä¿æŠ¤" class="headerlink" title="#define ä¿æŠ¤"></a>#define ä¿æŠ¤</h3><blockquote><p>è¿™å…¶å®æ˜¯éå¸¸å®¹æ˜“è¢«å¿½è§†çš„ä¸€ç‚¹ï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™æˆ‘ä»¬éƒ½ä¹ æƒ¯äºç”¨ç¼–è¯‘å™¨åˆ›å»ºå¤´æ–‡ä»¶ï¼Œè€Œåˆ›å»ºçš„å¤´æ–‡ä»¶é‡Œé¢é€šå¸¸ç›´æ¥å°±åŒ…å«äº†â€#defineä¿æŠ¤â€ã€‚</p><p>æˆ‘ä»¬å¯èƒ½ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¼šæœ‰å®ƒï¼Œä¹Ÿå¯èƒ½å¾ˆå°‘å»è€ƒè™‘å®ƒçš„ä½œç”¨ï¼Œä¸€æ—¦æˆ‘ä»¬å“ªå¤©é‡åˆ°äº†â€œç‰¹æ®Šæƒ…å†µâ€â€”â€”æ¯”å¦‚åœ¨ç»ˆç«¯ç”¨vimåˆ›å»ºå¤´æ–‡ä»¶ï¼Œå¤§æ¦‚ç‡å°±å¿˜è®°æœ‰<code>#ifndef......#define......#endif......</code>è¿™ä¹ˆä¸€å›äº‹äº†ã€‚</p></blockquote><p>æ‰€æœ‰å¤´æ–‡ä»¶éƒ½åº”è¯¥æœ‰ <code>#define</code> ä¿æŠ¤æ¥é˜²æ­¢å¤´æ–‡ä»¶è¢«å¤šé‡åŒ…å«ï¼Œå‘½åæ ¼å¼å½“æ˜¯ï¼š<code>&lt;PROJECT&gt;_&lt;PATH&gt;_&lt;FILE&gt;_H_</code>ã€‚</p><p>ä¸ºä¿è¯å”¯ä¸€æ€§ï¼Œå¤´æ–‡ä»¶çš„å‘½ååº”è¯¥åŸºäºæ‰€åœ¨é¡¹ç›®æºä»£ç æ ‘çš„å…¨è·¯å¾„ã€‚ä¾‹å¦‚ï¼Œé¡¹ç›® <code>foo</code> ä¸­çš„å¤´æ–‡ä»¶ <code>foo/src/bar/baz.h</code> å¯æŒ‰å¦‚ä¸‹æ–¹å¼ä¿æŠ¤ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">FOO_BAR_BAZ_H_</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FOO_BAR_BAZ_H_</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// FOO_BAR_BAZ_H_</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="include-çš„è·¯å¾„åŠé¡ºåº"><a href="#include-çš„è·¯å¾„åŠé¡ºåº" class="headerlink" title="#include çš„è·¯å¾„åŠé¡ºåº"></a>#include çš„è·¯å¾„åŠé¡ºåº</h3><p>ä½¿ç”¨æ ‡å‡†çš„å¤´æ–‡ä»¶åŒ…å«é¡ºåºå¯å¢å¼ºå¯è¯»æ€§ï¼Œé¿å…éšè—ä¾èµ–ã€‚</p><p>æ¨èçš„ #include é¡ºåºä¸ºï¼šç›¸å…³å¤´æ–‡ä»¶ï¼ŒC åº“ï¼ŒC++ åº“ï¼Œå…¶ä»–åº“çš„ .hï¼Œæœ¬é¡¹ç›®å†…çš„ .hã€‚</p><p>é¡¹ç›®å†…å¤´æ–‡ä»¶åº”æŒ‰ç…§é¡¹ç›®æºä»£ç ç›®å½•æ ‘ç»“æ„æ’åˆ—ï¼Œé¿å…ä½¿ç”¨ UNIX ç‰¹æ®Šçš„å¿«æ·ç›®å½• <code>.</code>ï¼ˆå½“å‰ç›®å½•ï¼‰æˆ– <code>..</code>ï¼ˆä¸Šçº§ç›®å½•ï¼‰ã€‚ä¾‹å¦‚ï¼Œ<code>google-awesome-project/src/base/logging.h</code> åº”è¯¥æŒ‰å¦‚ä¸‹æ–¹å¼åŒ…å«ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"base/logging.h"</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åˆå¦‚ï¼Œ<code>dir/foo.cc</code> æˆ– <code>dir/foo_test.cc</code> çš„ä¸»è¦ä½œç”¨æ˜¯å®ç°æˆ–æµ‹è¯• <code>dir2/foo2.h</code> çš„åŠŸèƒ½ï¼Œ<code>foo.cc</code> ä¸­åŒ…å«å¤´æ–‡ä»¶çš„æ¬¡åºå¦‚ä¸‹ï¼š</p><ol><li><code>dir2/foo2.h</code>ï¼ˆä¼˜å…ˆä½ç½®ï¼Œè¯¦æƒ…å¦‚ä¸‹ï¼‰</li><li>C ç³»ç»Ÿæ–‡ä»¶</li><li>C++ ç³»ç»Ÿæ–‡ä»¶</li><li>å…¶ä»–åº“çš„ <code>.h</code> æ–‡ä»¶</li><li>æœ¬é¡¹ç›®å†… <code>.h</code> æ–‡ä»¶</li></ol><p>è¿™ç§ä¼˜å…ˆçš„é¡ºåºæ’åºä¿è¯å½“ <code>dir2/foo2.h</code> é—æ¼æŸäº›å¿…è¦çš„åº“æ—¶ï¼Œ <code>dir/foo.cc</code> æˆ– <code>dir/foo_test.cc</code> çš„æ„å»ºä¼šç«‹åˆ»ä¸­æ­¢ã€‚å› æ­¤è¿™ä¸€æ¡è§„åˆ™ä¿è¯ç»´æŠ¤è¿™äº›æ–‡ä»¶çš„äººä»¬é¦–å…ˆçœ‹åˆ°æ„å»ºä¸­æ­¢çš„æ¶ˆæ¯è€Œä¸æ˜¯ç»´æŠ¤å…¶ä»–åŒ…çš„äººä»¬ã€‚</p><p><code>dir/foo.cc</code> å’Œ <code>dir2/foo2.h</code> é€šå¸¸ä½äºåŒä¸€ç›®å½•ä¸‹ï¼ˆå¦‚ <code>base/basictypes_unittest.cc</code> å’Œ <code>base/basictypes.h</code>ï¼‰ï¼Œä½†ä¹Ÿå¯ä»¥æ”¾åœ¨ä¸åŒç›®å½•ä¸‹ã€‚</p><p>æŒ‰å­—æ¯é¡ºåºåˆ†åˆ«å¯¹æ¯ç§ç±»å‹çš„å¤´æ–‡ä»¶è¿›è¡ŒäºŒæ¬¡æ’åºæ˜¯ä¸é”™çš„ä¸»æ„ã€‚æ³¨æ„è¾ƒè€çš„ä»£ç å¯ä¸ç¬¦åˆè¿™æ¡è§„åˆ™ï¼Œè¦åœ¨æ–¹ä¾¿çš„æ—¶å€™æ”¹æ­£å®ƒä»¬ã€‚</p><p>æ‚¨æ‰€ä¾èµ–çš„ç¬¦å·ï¼ˆsymbolsï¼‰è¢«å“ªäº›å¤´æ–‡ä»¶æ‰€å®šä¹‰ï¼Œæ‚¨å°±åº”è¯¥åŒ…å«ï¼ˆincludeï¼‰å“ªäº›å¤´æ–‡ä»¶ï¼Œ<a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/headers/#forward-declarations">å‰ç½®å£°æ˜</a>ï¼ˆforward declarationsï¼‰æƒ…å†µé™¤å¤–ã€‚æ¯”å¦‚æ‚¨è¦ç”¨åˆ° <code>bar.h</code> ä¸­çš„æŸä¸ªç¬¦å·ï¼Œå“ªæ€•æ‚¨æ‰€åŒ…å«çš„ <code>foo.h</code> å·²ç»åŒ…å«äº† <code>bar.h</code>ï¼Œä¹Ÿç…§æ ·å¾—åŒ…å« <code>bar.h</code>ï¼Œé™¤é <code>foo.h</code> æœ‰æ˜ç¡®è¯´æ˜å®ƒä¼šè‡ªåŠ¨å‘æ‚¨æä¾› <code>bar.h</code> ä¸­çš„ symbolã€‚ä¸è¿‡ï¼Œå‡¡æ˜¯ cc æ–‡ä»¶æ‰€å¯¹åº”çš„ã€Œç›¸å…³å¤´æ–‡ä»¶ã€å·²ç»åŒ…å«çš„ï¼Œå°±ä¸ç”¨å†é‡å¤åŒ…å«è¿›å…¶ cc æ–‡ä»¶é‡Œé¢äº†ï¼Œå°±åƒ <code>foo.cc</code> åªåŒ…å« <code>foo.h</code> å°±å¤Ÿäº†ï¼Œä¸ç”¨å†ç®¡åè€…æ‰€åŒ…å«çš„å…¶å®ƒå†…å®¹ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œ<code>google-awesome-project/src/foo/internal/fooserver.cc</code> çš„åŒ…å«æ¬¡åºå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"foo/public/fooserver.h"</span> <span class="token comment">// ä¼˜å…ˆä½ç½®</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sys/types.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;hash_map&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"base/basictypes.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"base/commandlineflags.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"foo/public/bar.h"</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ä¾‹å¤–ï¼š</strong></p><p>æœ‰æ—¶ï¼Œå¹³å°ç‰¹å®šï¼ˆsystem-specificï¼‰ä»£ç éœ€è¦æ¡ä»¶ç¼–è¯‘ï¼ˆconditional includesï¼‰ï¼Œè¿™äº›ä»£ç å¯ä»¥æ”¾åˆ°å…¶å®ƒ includes ä¹‹åã€‚å½“ç„¶ï¼Œæ‚¨çš„å¹³å°ç‰¹å®šä»£ç ä¹Ÿè¦å¤Ÿç®€ç»ƒä¸”ç‹¬ç«‹ï¼Œæ¯”å¦‚ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"foo/public/fooserver.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"base/port.h"</span>  <span class="token comment">// For LANG_CXX11.</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">LANG_CXX11</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;initializer_list&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span>  <span class="token comment">// LANG_CXX11</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¤´æ–‡ä»¶ä¸­åº”è¯¥å†™ä»€ä¹ˆå†…å®¹ï¼Ÿ"><a href="#å¤´æ–‡ä»¶ä¸­åº”è¯¥å†™ä»€ä¹ˆå†…å®¹ï¼Ÿ" class="headerlink" title="å¤´æ–‡ä»¶ä¸­åº”è¯¥å†™ä»€ä¹ˆå†…å®¹ï¼Ÿ"></a>å¤´æ–‡ä»¶ä¸­åº”è¯¥å†™ä»€ä¹ˆå†…å®¹ï¼Ÿ</h3><p>å‚è€ƒå¦å¤–ä¸€ç¯‡æ–‡ç« ï¼š<a href="https://immortalqx.github.io/2021/11/21/cpp-notes-0/">C++ä¸­çš„å¤´æ–‡ä»¶</a></p><h2 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h2><h3 id="å‘½åç©ºé—´"><a href="#å‘½åç©ºé—´" class="headerlink" title="å‘½åç©ºé—´"></a>å‘½åç©ºé—´</h3><p>ä½¿ç”¨å…·åçš„å‘½åç©ºé—´æ—¶ï¼Œå…¶åç§°å¯åŸºäºé¡¹ç›®åæˆ–ç›¸å¯¹è·¯å¾„ã€‚æ¯”å¦‚ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// .h æ–‡ä»¶</span><span class="token keyword">namespace</span> mynamespace <span class="token punctuation">{</span><span class="token comment">// æ‰€æœ‰å£°æ˜éƒ½ç½®äºå‘½åç©ºé—´ä¸­</span><span class="token comment">// æ³¨æ„ä¸è¦ä½¿ç”¨ç¼©è¿›</span><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span><span class="token operator">:</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">void</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token comment">// namespace mynamespace</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// .cc æ–‡ä»¶</span><span class="token keyword">namespace</span> mynamespace <span class="token punctuation">{</span><span class="token comment">// å‡½æ•°å®šä¹‰éƒ½ç½®äºå‘½åç©ºé—´ä¸­</span><span class="token keyword">void</span> <span class="token class-name">MyClass</span><span class="token double-colon punctuation">::</span><span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token comment">// namespace mynamespace</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¦æ­¢ä½¿ç”¨ using æŒ‡ç¤ºï¼ˆusing-directiveï¼‰ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// ç¦æ­¢ â€”â€” æ±¡æŸ“å‘½åç©ºé—´</span><span class="token keyword">using</span> <span class="token keyword">namespace</span> foo<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç¦æ­¢ä½¿ç”¨å†…è”å‘½åç©ºé—´ï¼ˆinline namespaceï¼‰ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// å†…è”å‘½åç©ºé—´å¾ˆå®¹æ˜“ä»¤äººè¿·æƒ‘ï¼Œæ¯•ç«Ÿå…¶å†…éƒ¨çš„æˆå‘˜ä¸å†å—å…¶å£°æ˜æ‰€åœ¨å‘½åç©ºé—´çš„é™åˆ¶ã€‚</span><span class="token comment">// å†…è”å‘½åç©ºé—´åªåœ¨å¤§å‹ç‰ˆæœ¬æ§åˆ¶é‡Œæœ‰ç”¨ã€‚</span><span class="token keyword">namespace</span> X <span class="token punctuation">{</span><span class="token keyword">inline</span> <span class="token keyword">namespace</span> Y <span class="token punctuation">{</span><span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>  <span class="token comment">// namespace Y</span><span class="token punctuation">}</span>  <span class="token comment">// namespace X</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="éæˆå‘˜å‡½æ•°ã€é™æ€æˆå‘˜å‡½æ•°å’Œå…¨å±€å‡½æ•°"><a href="#éæˆå‘˜å‡½æ•°ã€é™æ€æˆå‘˜å‡½æ•°å’Œå…¨å±€å‡½æ•°" class="headerlink" title="éæˆå‘˜å‡½æ•°ã€é™æ€æˆå‘˜å‡½æ•°å’Œå…¨å±€å‡½æ•°"></a>éæˆå‘˜å‡½æ•°ã€é™æ€æˆå‘˜å‡½æ•°å’Œå…¨å±€å‡½æ•°</h3><p>ä½¿ç”¨é™æ€æˆå‘˜å‡½æ•°æˆ–å‘½åç©ºé—´å†…çš„éæˆå‘˜å‡½æ•°ï¼Œå°½é‡ä¸è¦ç”¨è£¸çš„å…¨å±€å‡½æ•°ã€‚</p><p>å°†ä¸€ç³»åˆ—å‡½æ•°ç›´æ¥ç½®äºå‘½åç©ºé—´ä¸­ï¼Œä¸è¦ç”¨ç±»çš„é™æ€æ–¹æ³•æ¨¡æ‹Ÿå‡ºå‘½åç©ºé—´çš„æ•ˆæœï¼Œç±»çš„é™æ€æ–¹æ³•åº”å½“å’Œç±»çš„å®ä¾‹æˆ–é™æ€æ•°æ®ç´§å¯†ç›¸å…³ã€‚</p><p>æ¨èï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">namespace</span> myproject <span class="token punctuation">{</span><span class="token keyword">namespace</span> foo_bar <span class="token punctuation">{</span><span class="token keyword">void</span> <span class="token function">Function1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">Function2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>  <span class="token comment">// namespace foo_bar</span><span class="token punctuation">}</span>  <span class="token comment">// namespace myproject</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸æ¨èï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">namespace</span> myproject <span class="token punctuation">{</span><span class="token keyword">class</span> <span class="token class-name">FooBar</span> <span class="token punctuation">{</span> <span class="token keyword">public</span><span class="token operator">:</span>  <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Function1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Function2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span>  <span class="token comment">// namespace myproject</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®šä¹‰åœ¨åŒä¸€ç¼–è¯‘å•å…ƒçš„å‡½æ•°ï¼Œè¢«å…¶ä»–ç¼–è¯‘å•å…ƒç›´æ¥è°ƒç”¨å¯èƒ½ä¼šå¼•å…¥ä¸å¿…è¦çš„è€¦åˆå’Œé“¾æ¥æ—¶ä¾èµ–ï¼›é™æ€æˆå‘˜å‡½æ•°å¯¹æ­¤å°¤å…¶æ•æ„Ÿã€‚å¯ä»¥è€ƒè™‘æå–åˆ°æ–°ç±»ä¸­ï¼Œæˆ–è€…å°†å‡½æ•°ç½®äºç‹¬ç«‹åº“çš„å‘½åç©ºé—´å†…ã€‚</p><p>å¦‚æœä½ å¿…é¡»å®šä¹‰éæˆå‘˜å‡½æ•°ï¼Œåˆåªæ˜¯åœ¨ <code>.cc</code> æ–‡ä»¶ä¸­ä½¿ç”¨å®ƒï¼Œå¯ä½¿ç”¨åŒ¿å <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/scoping/#namespaces">2.1. å‘½åç©ºé—´</a> æˆ– <code>static</code> é“¾æ¥å…³é”®å­—ï¼ˆå¦‚ <code>static int Foo() {...}</code>ï¼‰é™å®šå…¶ä½œç”¨åŸŸã€‚</p><h3 id="å±€éƒ¨å˜é‡"><a href="#å±€éƒ¨å˜é‡" class="headerlink" title="å±€éƒ¨å˜é‡"></a>å±€éƒ¨å˜é‡</h3><blockquote><p>å°†å‡½æ•°å˜é‡å°½å¯èƒ½ç½®äºæœ€å°ä½œç”¨åŸŸå†…ï¼Œå¹¶åœ¨å˜é‡å£°æ˜æ—¶è¿›è¡Œåˆå§‹åŒ–ã€‚</p></blockquote><p>C++ å…è®¸åœ¨å‡½æ•°çš„ä»»ä½•ä½ç½®å£°æ˜å˜é‡ã€‚æˆ‘ä»¬æå€¡åœ¨å°½å¯èƒ½å°çš„ä½œç”¨åŸŸä¸­å£°æ˜å˜é‡ï¼Œç¦»ç¬¬ä¸€æ¬¡ä½¿ç”¨è¶Šè¿‘è¶Šå¥½ã€‚è¿™ä½¿å¾—ä»£ç æµè§ˆè€…æ›´å®¹æ˜“å®šä½å˜é‡å£°æ˜çš„ä½ç½®ï¼Œäº†è§£å˜é‡çš„ç±»å‹å’Œåˆå§‹å€¼ã€‚ç‰¹åˆ«æ˜¯ï¼Œåº”ä½¿ç”¨åˆå§‹åŒ–çš„æ–¹å¼æ›¿ä»£å£°æ˜å†èµ‹å€¼ï¼Œæ¯”å¦‚ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> i<span class="token punctuation">;</span>i <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åâ€”â€”åˆå§‹åŒ–å’Œå£°æ˜åˆ†ç¦»</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¥½â€”â€”åˆå§‹åŒ–æ—¶å£°æ˜</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> v<span class="token punctuation">;</span>v<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç”¨èŠ±æ‹¬å·åˆå§‹åŒ–æ›´å¥½</span>v<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre> <pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> v <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// å¥½â€”â€”v ä¸€å¼€å§‹å°±åˆå§‹åŒ–</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å±äº <code>if</code>ï¼Œ<code>while</code> å’Œ <code>for</code> è¯­å¥çš„å˜é‡åº”å½“åœ¨è¿™äº›è¯­å¥ä¸­æ­£å¸¸åœ°å£°æ˜ï¼Œè¿™æ ·å­è¿™äº›å˜é‡çš„ä½œç”¨åŸŸå°±è¢«é™åˆ¶åœ¨è¿™äº›è¯­å¥ä¸­äº†ï¼Œä¸¾ä¾‹è€Œè¨€ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token function">strchr</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token char">'/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> str <span class="token operator">=</span> p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>ä¾‹å¤–ï¼š</strong></p><p>æœ‰ä¸€ä¸ªä¾‹å¤–ï¼Œå¦‚æœå˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ¯æ¬¡è¿›å…¥ä½œç”¨åŸŸéƒ½è¦è°ƒç”¨å…¶æ„é€ å‡½æ•°ï¼Œæ¯æ¬¡é€€å‡ºä½œç”¨åŸŸéƒ½è¦è°ƒç”¨å…¶ææ„å‡½æ•°ï¼Œè¿™ä¼šå¯¼è‡´æ•ˆç‡é™ä½ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// ä½æ•ˆçš„å®ç°</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000000</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>    Foo f<span class="token punctuation">;</span>                  <span class="token comment">// æ„é€ å‡½æ•°å’Œææ„å‡½æ•°åˆ†åˆ«è°ƒç”¨ 1000000 æ¬¡!</span>    f<span class="token punctuation">.</span><span class="token function">DoSomething</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨å¾ªç¯ä½œç”¨åŸŸå¤–é¢å£°æ˜è¿™ç±»å˜é‡è¦é«˜æ•ˆçš„å¤š:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">Foo f<span class="token punctuation">;</span>                      <span class="token comment">// æ„é€ å‡½æ•°å’Œææ„å‡½æ•°åªè°ƒç”¨ 1 æ¬¡</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000000</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>    f<span class="token punctuation">.</span><span class="token function">DoSomething</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="é™æ€å’Œå…¨å±€å˜é‡"><a href="#é™æ€å’Œå…¨å±€å˜é‡" class="headerlink" title="é™æ€å’Œå…¨å±€å˜é‡"></a>é™æ€å’Œå…¨å±€å˜é‡</h3><blockquote><p>ç¦æ­¢å®šä¹‰é™æ€å‚¨å­˜å‘¨æœŸéPODå˜é‡ï¼Œç¦æ­¢ä½¿ç”¨å«æœ‰å‰¯ä½œç”¨çš„å‡½æ•°åˆå§‹åŒ–PODå…¨å±€å˜é‡ï¼Œå› ä¸ºå¤šç¼–è¯‘å•å…ƒä¸­çš„é™æ€å˜é‡æ‰§è¡Œæ—¶çš„æ„é€ å’Œææ„é¡ºåºæ˜¯æœªæ˜ç¡®çš„ï¼Œè¿™å°†å¯¼è‡´ä»£ç çš„ä¸å¯ç§»æ¤ã€‚</p></blockquote><p>ç¦æ­¢ä½¿ç”¨ç±»çš„ <a href="http://zh.cppreference.com/w/cpp/language/storage_duration#.E5.AD.98.E5.82.A8.E6.9C.9F">é™æ€å‚¨å­˜å‘¨æœŸ</a> å˜é‡ï¼šç”±äºæ„é€ å’Œææ„å‡½æ•°è°ƒç”¨é¡ºåºçš„ä¸ç¡®å®šæ€§ï¼Œå®ƒä»¬ä¼šå¯¼è‡´éš¾ä»¥å‘ç°çš„ bug ã€‚ä¸è¿‡ <code>constexpr</code> å˜é‡é™¤å¤–ï¼Œæ¯•ç«Ÿå®ƒä»¬åˆä¸æ¶‰åŠåŠ¨æ€åˆå§‹åŒ–æˆ–ææ„ã€‚</p><p>é™æ€ç”Ÿå­˜å‘¨æœŸçš„å¯¹è±¡ï¼Œå³åŒ…æ‹¬äº†å…¨å±€å˜é‡ï¼Œé™æ€å˜é‡ï¼Œé™æ€ç±»æˆå‘˜å˜é‡å’Œå‡½æ•°é™æ€å˜é‡ï¼Œéƒ½å¿…é¡»æ˜¯åŸç”Ÿæ•°æ®ç±»å‹ ï¼ˆPOD : Plain Old Dataï¼‰ï¼šå³ intï¼Œchar å’Œ floatï¼Œä»¥åŠ POD ç±»å‹çš„æŒ‡é’ˆã€æ•°ç»„å’Œç»“æ„ä½“ã€‚</p><p>é™æ€å˜é‡çš„æ„é€ å‡½æ•°ã€ææ„å‡½æ•°å’Œåˆå§‹åŒ–çš„é¡ºåºåœ¨ C++ ä¸­æ˜¯åªæœ‰éƒ¨åˆ†æ˜ç¡®çš„ï¼Œç”šè‡³éšç€æ„å»ºå˜åŒ–è€Œå˜åŒ–ï¼Œå¯¼è‡´éš¾ä»¥å‘ç°çš„ bugã€‚æ‰€ä»¥é™¤äº†ç¦ç”¨ç±»ç±»å‹çš„å…¨å±€å˜é‡ï¼Œæˆ‘ä»¬ä¹Ÿä¸å…è®¸ç”¨å‡½æ•°è¿”å›å€¼æ¥åˆå§‹åŒ– POD å˜é‡ï¼Œé™¤éè¯¥å‡½æ•°ï¼ˆæ¯”å¦‚ <code>getenv()</code> æˆ– <code>getpid()</code> ï¼‰ä¸æ¶‰åŠä»»ä½•å…¨å±€å˜é‡ã€‚å‡½æ•°ä½œç”¨åŸŸé‡Œçš„é™æ€å˜é‡é™¤å¤–ï¼Œæ¯•ç«Ÿå®ƒçš„åˆå§‹åŒ–é¡ºåºæ˜¯æœ‰æ˜ç¡®å®šä¹‰çš„ï¼Œè€Œä¸”åªä¼šåœ¨æŒ‡ä»¤æ‰§è¡Œåˆ°å®ƒçš„å£°æ˜é‚£é‡Œæ‰ä¼šå‘ç”Ÿã€‚</p><blockquote><p>åŒä¸€ä¸ªç¼–è¯‘å•å…ƒå†…æ˜¯æ˜ç¡®çš„ï¼Œé™æ€åˆå§‹åŒ–ä¼˜å…ˆäºåŠ¨æ€åˆå§‹åŒ–ï¼Œåˆå§‹åŒ–é¡ºåºæŒ‰ç…§å£°æ˜é¡ºåºè¿›è¡Œï¼Œé”€æ¯åˆ™é€†åºã€‚ä¸åŒçš„ç¼–è¯‘å•å…ƒä¹‹é—´åˆå§‹åŒ–å’Œé”€æ¯é¡ºåºå±äºæœªæ˜ç¡®è¡Œä¸ºï¼ˆunspecified behaviourï¼‰ã€‚</p></blockquote><p>åŒç†ï¼Œå…¨å±€å’Œé™æ€å˜é‡åœ¨ç¨‹åºä¸­æ–­æ—¶ä¼šè¢«ææ„ï¼Œæ— è®ºæ‰€è°“ä¸­æ–­æ˜¯ä» <code>main()</code> è¿”å›è¿˜æ˜¯å¯¹ <code>exit()</code> çš„è°ƒç”¨ã€‚ææ„é¡ºåºæ­£å¥½ä¸æ„é€ å‡½æ•°è°ƒç”¨çš„é¡ºåºç›¸åã€‚ä½†æ—¢ç„¶æ„é€ é¡ºåºæœªå®šä¹‰ï¼Œé‚£ä¹ˆææ„é¡ºåºå½“ç„¶ä¹Ÿå°±ä¸å®šäº†ã€‚æ¯”å¦‚ï¼Œåœ¨ç¨‹åºç»“æŸæ—¶æŸé™æ€å˜é‡å·²ç»è¢«ææ„äº†ï¼Œä½†ä»£ç è¿˜åœ¨è·‘â€”â€”æ¯”å¦‚å…¶å®ƒçº¿ç¨‹â€”â€”å¹¶è¯•å›¾è®¿é—®å®ƒä¸”å¤±è´¥ï¼›å†æ¯”å¦‚ï¼Œä¸€ä¸ªé™æ€ string å˜é‡ä¹Ÿè®¸ä¼šåœ¨ä¸€ä¸ªå¼•ç”¨äº†å‰è€…çš„å…¶å®ƒå˜é‡ææ„ä¹‹å‰è¢«ææ„æ‰ã€‚</p><p>æ”¹å–„ä»¥ä¸Šææ„é—®é¢˜çš„åŠæ³•ä¹‹ä¸€æ˜¯ç”¨ <code>quick_exit()</code> æ¥ä»£æ›¿ <code>exit()</code> å¹¶ä¸­æ–­ç¨‹åºã€‚å®ƒä»¬çš„ä¸åŒä¹‹å¤„æ˜¯å‰è€…ä¸ä¼šæ‰§è¡Œä»»ä½•ææ„ï¼Œä¹Ÿä¸ä¼šæ‰§è¡Œ <code>atexit()</code> æ‰€ç»‘å®šçš„ä»»ä½• handlersã€‚å¦‚æœæ‚¨æƒ³åœ¨æ‰§è¡Œ <code>quick_exit()</code> æ¥ä¸­æ–­æ—¶æ‰§è¡ŒæŸ handlerï¼ˆæ¯”å¦‚åˆ·æ–° logï¼‰ï¼Œæ‚¨å¯ä»¥æŠŠå®ƒç»‘å®šåˆ° <code>_at_quick_exit()</code>ã€‚å¦‚æœæ‚¨æƒ³åœ¨ <code>exit()</code> å’Œ <code>quick_exit()</code> éƒ½ç”¨ä¸Šè¯¥ handlerï¼Œéƒ½ç»‘å®šä¸Šå»ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬åªå…è®¸ POD ç±»å‹çš„é™æ€å˜é‡ï¼Œå³å®Œå…¨ç¦ç”¨ <code>vector</code> (ä½¿ç”¨ C æ•°ç»„æ›¿ä»£) å’Œ <code>string</code> (ä½¿ç”¨ <code>const char []</code>)ã€‚</p><p>å¦‚æœæ‚¨ç¡®å®éœ€è¦ä¸€ä¸ª <code>class</code> ç±»å‹çš„é™æ€æˆ–å…¨å±€å˜é‡ï¼Œå¯ä»¥è€ƒè™‘åœ¨ <code>main()</code> å‡½æ•°æˆ– <code>pthread_once()</code> å†…åˆå§‹åŒ–ä¸€ä¸ªæŒ‡é’ˆä¸”æ°¸ä¸å›æ”¶ã€‚æ³¨æ„åªèƒ½ç”¨ raw æŒ‡é’ˆï¼Œåˆ«ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œæ¯•ç«Ÿåè€…çš„ææ„å‡½æ•°æ¶‰åŠåˆ°ä¸Šæ–‡æŒ‡å‡ºçš„ä¸å®šé¡ºåºé—®é¢˜ã€‚</p><blockquote><p>ä¸Šæ–‡æåŠçš„é™æ€å˜é‡æ³›æŒ‡é™æ€ç”Ÿå­˜å‘¨æœŸçš„å¯¹è±¡ï¼ŒåŒ…æ‹¬: å…¨å±€å˜é‡ï¼Œé™æ€å˜é‡ï¼Œé™æ€ç±»æˆå‘˜å˜é‡ï¼Œä»¥åŠå‡½æ•°é™æ€å˜é‡.</p></blockquote><h2 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h2><p>ç±»æ˜¯ C++ ä¸­ä»£ç çš„åŸºæœ¬å•å…ƒã€‚æ˜¾ç„¶ï¼Œå®ƒä»¬è¢«å¹¿æ³›ä½¿ç”¨ã€‚æœ¬èŠ‚åˆ—ä¸¾äº†åœ¨å†™ä¸€ä¸ªç±»æ—¶çš„ä¸»è¦æ³¨æ„äº‹é¡¹ã€‚</p><h3 id="æ„é€ å‡½æ•°çš„èŒè´£"><a href="#æ„é€ å‡½æ•°çš„èŒè´£" class="headerlink" title="æ„é€ å‡½æ•°çš„èŒè´£"></a>æ„é€ å‡½æ•°çš„èŒè´£</h3><p>æ„é€ å‡½æ•°ä¸å…è®¸è°ƒç”¨è™šå‡½æ•°ã€‚å¦‚æœä»£ç å…è®¸ï¼Œç›´æ¥ç»ˆæ­¢ç¨‹åºæ˜¯ä¸€ä¸ªåˆé€‚çš„å¤„ç†é”™è¯¯çš„æ–¹å¼ã€‚å¦åˆ™ï¼Œè€ƒè™‘ç”¨ <code>Init()</code> æ–¹æ³•æˆ–å·¥å‚å‡½æ•°ã€‚</p><p>æ„é€ å‡½æ•°ä¸å¾—è°ƒç”¨è™šå‡½æ•°ï¼Œæˆ–å°è¯•æŠ¥å‘Šä¸€ä¸ªéè‡´å‘½é”™è¯¯ã€‚å¦‚æœå¯¹è±¡éœ€è¦è¿›è¡Œæœ‰æ„ä¹‰çš„ (non-trivial) åˆå§‹åŒ–ï¼Œè€ƒè™‘ä½¿ç”¨æ˜ç¡®çš„ Init() æ–¹æ³•æˆ–ä½¿ç”¨å·¥å‚æ¨¡å¼ã€‚</p><p>Avoid <code>Init()</code> methods on objects with no other states that affect which public methods may be called (æ­¤ç±»å½¢å¼çš„åŠæ„é€ å¯¹è±¡æœ‰æ—¶æ— æ³•æ­£ç¡®å·¥ä½œ)ã€‚</p><h3 id="éšå¼ç±»å‹è½¬æ¢"><a href="#éšå¼ç±»å‹è½¬æ¢" class="headerlink" title="éšå¼ç±»å‹è½¬æ¢"></a>éšå¼ç±»å‹è½¬æ¢</h3><p>åœ¨ç±»å‹å®šä¹‰ä¸­ï¼Œç±»å‹è½¬æ¢è¿ç®—ç¬¦å’Œå•å‚æ•°æ„é€ å‡½æ•°éƒ½åº”å½“ç”¨ <code>explicit</code> è¿›è¡Œæ ‡è®°ã€‚ä¸€ä¸ªä¾‹å¤–æ˜¯ï¼Œæ‹·è´å’Œç§»åŠ¨æ„é€ å‡½æ•°ä¸åº”å½“è¢«æ ‡è®°ä¸º <code>explicit</code>ï¼Œå› ä¸ºå®ƒä»¬å¹¶ä¸æ‰§è¡Œç±»å‹è½¬æ¢ã€‚</p><p>å¯¹äºè®¾è®¡ç›®çš„å°±æ˜¯ç”¨äºå¯¹å…¶ä»–ç±»å‹è¿›è¡Œé€æ˜åŒ…è£…çš„ç±»æ¥è¯´ï¼Œéšå¼ç±»å‹è½¬æ¢æœ‰æ—¶æ˜¯å¿…è¦ä¸”åˆé€‚çš„ã€‚è¿™æ—¶åº”å½“è”ç³»é¡¹ç›®ç»„é•¿å¹¶è¯´æ˜ç‰¹æ®Šæƒ…å†µã€‚</p><p>ä¸èƒ½ä»¥ä¸€ä¸ªå‚æ•°è¿›è¡Œè°ƒç”¨çš„æ„é€ å‡½æ•°ä¸åº”å½“åŠ ä¸Š <code>explicit</code>ã€‚æ¥å—ä¸€ä¸ª <code>std::initializer_list</code> ä½œä¸ºå‚æ•°çš„æ„é€ å‡½æ•°ä¹Ÿåº”å½“çœç•¥ <code>explicit</code>ï¼Œä»¥ä¾¿æ”¯æŒæ‹·è´åˆå§‹åŒ–ï¼ˆï¼‰ä¾‹å¦‚ <code>MyType m = {1, 2};</code>ï¼‰ã€‚</p><h3 id="å¯æ‹·è´ç±»å‹å’Œå¯ç§»åŠ¨ç±»å‹"><a href="#å¯æ‹·è´ç±»å‹å’Œå¯ç§»åŠ¨ç±»å‹" class="headerlink" title="å¯æ‹·è´ç±»å‹å’Œå¯ç§»åŠ¨ç±»å‹"></a>å¯æ‹·è´ç±»å‹å’Œå¯ç§»åŠ¨ç±»å‹</h3><p>å¦‚æœéœ€è¦å°±è®©ä½ çš„ç±»å‹å¯æ‹·è´ / å¯ç§»åŠ¨ã€‚ä½œä¸ºä¸€ä¸ªç»éªŒæ³•åˆ™ï¼Œå¦‚æœå¯¹äºä½ çš„ç”¨æˆ·æ¥è¯´è¿™ä¸ªæ‹·è´æ“ä½œä¸æ˜¯ä¸€çœ¼å°±èƒ½çœ‹å‡ºæ¥çš„ï¼Œé‚£å°±ä¸è¦æŠŠç±»å‹è®¾ç½®ä¸ºå¯æ‹·è´ã€‚å¦‚æœè®©ç±»å‹å¯æ‹·è´ï¼Œä¸€å®šè¦åŒæ—¶ç»™å‡ºæ‹·è´æ„é€ å‡½æ•°å’Œèµ‹å€¼æ“ä½œçš„å®šä¹‰ï¼Œåä¹‹äº¦ç„¶ã€‚å¦‚æœè®©ç±»å‹å¯ç§»åŠ¨ï¼ŒåŒæ—¶ç§»åŠ¨æ“ä½œçš„æ•ˆç‡é«˜äºæ‹·è´æ“ä½œï¼Œé‚£ä¹ˆå°±æŠŠç§»åŠ¨çš„ä¸¤ä¸ªæ“ä½œï¼ˆç§»åŠ¨æ„é€ å‡½æ•°å’Œèµ‹å€¼æ“ä½œï¼‰ä¹Ÿç»™å‡ºå®šä¹‰ã€‚å¦‚æœç±»å‹ä¸å¯æ‹·è´ï¼Œä½†æ˜¯ç§»åŠ¨æ“ä½œçš„æ­£ç¡®æ€§å¯¹ç”¨æˆ·æ˜¾ç„¶å¯è§ï¼Œé‚£ä¹ˆæŠŠè¿™ä¸ªç±»å‹è®¾ç½®ä¸ºåªå¯ç§»åŠ¨å¹¶å®šä¹‰ç§»åŠ¨çš„ä¸¤ä¸ªæ“ä½œã€‚</p><p>å¦‚æœå®šä¹‰äº†æ‹·è´/ç§»åŠ¨æ“ä½œï¼Œåˆ™è¦ä¿è¯è¿™äº›æ“ä½œçš„é»˜è®¤å®ç°æ˜¯æ­£ç¡®çš„ã€‚è®°å¾—æ—¶åˆ»æ£€æŸ¥é»˜è®¤æ“ä½œçš„æ­£ç¡®æ€§ï¼Œå¹¶ä¸”åœ¨æ–‡æ¡£ä¸­è¯´æ˜ç±»æ˜¯å¯æ‹·è´çš„ä¸”/æˆ–å¯ç§»åŠ¨çš„ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span> <span class="token keyword">public</span><span class="token operator">:</span>  <span class="token function">Foo</span><span class="token punctuation">(</span>Foo<span class="token operator">&amp;&amp;</span> other<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">field_</span><span class="token punctuation">(</span>other<span class="token punctuation">.</span>field<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// å·®ï¼Œåªå®šä¹‰äº†ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œè€Œæ²¡æœ‰å®šä¹‰å¯¹åº”çš„èµ‹å€¼è¿ç®—ç¬¦.</span> <span class="token keyword">private</span><span class="token operator">:</span>  Field field_<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”±äºå­˜åœ¨å¯¹è±¡åˆ‡å‰²çš„é£é™©ï¼Œä¸è¦ä¸ºä»»ä½•æœ‰å¯èƒ½æœ‰æ´¾ç”Ÿç±»çš„å¯¹è±¡æä¾›èµ‹å€¼æ“ä½œæˆ–è€…æ‹·è´ / ç§»åŠ¨æ„é€ å‡½æ•°ï¼ˆå½“ç„¶ä¹Ÿä¸è¦ç»§æ‰¿æœ‰è¿™æ ·çš„æˆå‘˜å‡½æ•°çš„ç±»ï¼‰ã€‚å¦‚æœä½ çš„åŸºç±»éœ€è¦å¯å¤åˆ¶å±æ€§ï¼Œè¯·æä¾›ä¸€ä¸ª <code>public virtual Clone()</code> å’Œä¸€ä¸ª <code>protected</code> çš„æ‹·è´æ„é€ å‡½æ•°ä»¥ä¾›æ´¾ç”Ÿç±»å®ç°ã€‚</p><p>å¦‚æœä½ çš„ç±»ä¸éœ€è¦æ‹·è´ / ç§»åŠ¨æ“ä½œï¼Œè¯·æ˜¾å¼åœ°é€šè¿‡åœ¨ <code>public</code> åŸŸä¸­ä½¿ç”¨ <code>= delete</code> æˆ–å…¶ä»–æ‰‹æ®µç¦ç”¨ä¹‹ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// MyClass is neither copyable nor movable.</span><span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token keyword">const</span> MyClass<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>MyClass<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> MyClass<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="ç»“æ„ä½“-VS-ç±»"><a href="#ç»“æ„ä½“-VS-ç±»" class="headerlink" title="ç»“æ„ä½“ VS. ç±»"></a>ç»“æ„ä½“ VS. ç±»</h3><p>ä»…å½“åªæœ‰æ•°æ®æˆå‘˜æ—¶ä½¿ç”¨ <code>struct</code>ï¼Œ å…¶å®ƒä¸€æ¦‚ä½¿ç”¨ <code>class</code>ã€‚</p><p>åœ¨ C++ ä¸­ <code>struct</code> å’Œ <code>class</code> å…³é”®å­—å‡ ä¹å«ä¹‰ä¸€æ ·ã€‚æˆ‘ä»¬ä¸ºè¿™ä¸¤ä¸ªå…³é”®å­—æ·»åŠ æˆ‘ä»¬è‡ªå·±çš„è¯­ä¹‰ç†è§£ï¼Œä»¥ä¾¿ä¸ºå®šä¹‰çš„æ•°æ®ç±»å‹é€‰æ‹©åˆé€‚çš„å…³é”®å­—ã€‚</p><p><code>struct</code> ç”¨æ¥å®šä¹‰åŒ…å«æ•°æ®çš„è¢«åŠ¨å¼å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥åŒ…å«ç›¸å…³çš„å¸¸é‡ï¼Œä½†é™¤äº†å­˜å–æ•°æ®æˆå‘˜ä¹‹å¤–ï¼Œæ²¡æœ‰åˆ«çš„å‡½æ•°åŠŸèƒ½ã€‚å¹¶ä¸”å­˜å–åŠŸèƒ½æ˜¯é€šè¿‡ç›´æ¥è®¿é—®ä½åŸŸï¼Œè€Œéå‡½æ•°è°ƒç”¨ã€‚é™¤äº†æ„é€ å‡½æ•°ï¼Œææ„å‡½æ•°ï¼Œ<code>Initialize()</code>ï¼Œ<code>Reset()</code>ï¼Œ<code>Validate()</code> ç­‰ç±»ä¼¼çš„ç”¨äºè®¾å®šæ•°æ®æˆå‘˜çš„å‡½æ•°å¤–ï¼Œä¸èƒ½æä¾›å…¶å®ƒåŠŸèƒ½çš„å‡½æ•°ã€‚</p><p>å¦‚æœéœ€è¦æ›´å¤šçš„å‡½æ•°åŠŸèƒ½ï¼Œ<code>class</code> æ›´é€‚åˆã€‚å¦‚æœæ‹¿ä¸å‡†ï¼Œå°±ç”¨ <code>class</code>ã€‚</p><p>ä¸ºäº†å’Œ STL ä¿æŒä¸€è‡´ï¼Œå¯¹äºä»¿å‡½æ•°ç­‰ç‰¹æ€§å¯ä»¥ä¸ç”¨ <code>class</code> è€Œæ˜¯ä½¿ç”¨ <code>struct</code>ã€‚</p><p>æ³¨æ„ï¼šç±»å’Œç»“æ„ä½“çš„æˆå‘˜å˜é‡ä½¿ç”¨ä¸åŒçš„ <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/naming/#variable-names">å‘½åè§„åˆ™</a>ã€‚</p><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><h3 id="è¾“å…¥å’Œè¾“å‡º"><a href="#è¾“å…¥å’Œè¾“å‡º" class="headerlink" title="è¾“å…¥å’Œè¾“å‡º"></a>è¾“å…¥å’Œè¾“å‡º</h3><p>æˆ‘ä»¬å€¾å‘äºæŒ‰å€¼è¿”å›ï¼Œ å¦åˆ™æŒ‰å¼•ç”¨è¿”å›ã€‚ é¿å…è¿”å›æŒ‡é’ˆï¼Œ é™¤éå®ƒå¯ä»¥ä¸ºç©ºã€‚</p><h3 id="ç¼–å†™ç®€çŸ­å‡½æ•°"><a href="#ç¼–å†™ç®€çŸ­å‡½æ•°" class="headerlink" title="ç¼–å†™ç®€çŸ­å‡½æ•°"></a>ç¼–å†™ç®€çŸ­å‡½æ•°</h3><p>æˆ‘ä»¬å€¾å‘äºç¼–å†™ç®€çŸ­ï¼Œå‡ç»ƒçš„å‡½æ•°ã€‚</p><p>æˆ‘ä»¬æ‰¿è®¤é•¿å‡½æ•°æœ‰æ—¶æ˜¯åˆç†çš„ï¼Œå› æ­¤å¹¶ä¸ç¡¬æ€§é™åˆ¶å‡½æ•°çš„é•¿åº¦ã€‚å¦‚æœå‡½æ•°è¶…è¿‡ 40 è¡Œï¼Œå¯ä»¥æ€ç´¢ä¸€ä¸‹èƒ½ä¸èƒ½åœ¨ä¸å½±å“ç¨‹åºç»“æ„çš„å‰æä¸‹å¯¹å…¶è¿›è¡Œåˆ†å‰²ã€‚</p><p>å³ä½¿ä¸€ä¸ªé•¿å‡½æ•°ç°åœ¨å·¥ä½œçš„éå¸¸å¥½ï¼Œä¸€æ—¦æœ‰äººå¯¹å…¶ä¿®æ”¹ï¼Œæœ‰å¯èƒ½å‡ºç°æ–°çš„é—®é¢˜ï¼Œç”šè‡³å¯¼è‡´éš¾ä»¥å‘ç°çš„ bugã€‚ä½¿å‡½æ•°å°½é‡ç®€çŸ­ï¼Œä»¥ä¾¿äºä»–äººé˜…è¯»å’Œä¿®æ”¹ä»£ç ã€‚</p><p>åœ¨å¤„ç†ä»£ç æ—¶ï¼Œä½ å¯èƒ½ä¼šå‘ç°å¤æ‚çš„é•¿å‡½æ•°ã€‚ä¸è¦å®³æ€•ä¿®æ”¹ç°æœ‰ä»£ç ï¼šå¦‚æœè¯å®è¿™äº›ä»£ç ä½¿ç”¨ / è°ƒè¯•èµ·æ¥å¾ˆå›°éš¾ï¼Œæˆ–è€…ä½ åªéœ€è¦ä½¿ç”¨å…¶ä¸­çš„ä¸€å°æ®µä»£ç ï¼Œè€ƒè™‘å°†å…¶åˆ†å‰²ä¸ºæ›´åŠ ç®€çŸ­å¹¶æ˜“äºç®¡ç†çš„è‹¥å¹²å‡½æ•°ã€‚</p><h3 id="å¼•ç”¨å‚æ•°"><a href="#å¼•ç”¨å‚æ•°" class="headerlink" title="å¼•ç”¨å‚æ•°"></a>å¼•ç”¨å‚æ•°</h3><p>æ‰€æœ‰æŒ‰å¼•ç”¨ä¼ é€’çš„å‚æ•°å¿…é¡»åŠ ä¸Š <code>const</code>ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token keyword">const</span> string <span class="token operator">&amp;</span>in<span class="token punctuation">,</span> string <span class="token operator">*</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>äº‹å®ä¸Šè¿™åœ¨ Google Code æ˜¯ä¸€ä¸ªç¡¬æ€§çº¦å®šï¼šè¾“å…¥å‚æ•°æ˜¯å€¼å‚æˆ– <code>const</code> å¼•ç”¨ï¼Œè¾“å‡ºå‚æ•°ä¸ºæŒ‡é’ˆã€‚è¾“å…¥å‚æ•°å¯ä»¥æ˜¯ <code>const</code> æŒ‡é’ˆï¼Œä½†å†³ä¸èƒ½æ˜¯é <code>const</code> çš„å¼•ç”¨å‚æ•°ï¼Œé™¤éç‰¹æ®Šè¦æ±‚ï¼Œæ¯”å¦‚ <code>swap()</code>ã€‚</p><p>æœ‰æ—¶å€™ï¼Œåœ¨è¾“å…¥å½¢å‚ä¸­ç”¨ <code>const T*</code> æŒ‡é’ˆæ¯” <code>const T&amp;</code> æ›´æ˜æ™ºã€‚æ¯”å¦‚ï¼š</p><ul><li>å¯èƒ½ä¼šä¼ é€’ç©ºæŒ‡é’ˆã€‚</li><li>å‡½æ•°è¦æŠŠæŒ‡é’ˆæˆ–å¯¹åœ°å€çš„å¼•ç”¨èµ‹å€¼ç»™è¾“å…¥å½¢å‚ã€‚</li></ul><p>æ€»è€Œè¨€ä¹‹ï¼Œå¤§å¤šæ—¶å€™è¾“å…¥å½¢å‚å¾€å¾€æ˜¯ <code>const T&amp;</code>ã€‚è‹¥ç”¨ <code>const T*</code> åˆ™è¯´æ˜è¾“å…¥å¦æœ‰å¤„ç†ã€‚æ‰€ä»¥è‹¥è¦ä½¿ç”¨ <code>const T*</code>ï¼Œåˆ™åº”ç»™å‡ºç›¸åº”çš„ç†ç”±ï¼Œå¦åˆ™ä¼šä½¿å¾—è¯»è€…æ„Ÿåˆ°è¿·æƒ‘ã€‚</p><h2 id="å‘½åçº¦å®š"><a href="#å‘½åçº¦å®š" class="headerlink" title="å‘½åçº¦å®š"></a>å‘½åçº¦å®š</h2><p>æœ€é‡è¦çš„ä¸€è‡´æ€§è§„åˆ™æ˜¯å‘½åç®¡ç†ã€‚å‘½åçš„é£æ ¼èƒ½è®©æˆ‘ä»¬åœ¨ä¸éœ€è¦å»æŸ¥æ‰¾ç±»å‹å£°æ˜çš„æ¡ä»¶ä¸‹å¿«é€Ÿåœ°äº†è§£æŸä¸ªåå­—ä»£è¡¨çš„å«ä¹‰ï¼šç±»å‹ï¼Œå˜é‡ï¼Œå‡½æ•°ï¼Œå¸¸é‡ï¼Œå®ï¼Œç­‰ç­‰ï¼Œç”šè‡³ã€‚æˆ‘ä»¬å¤§è„‘ä¸­çš„æ¨¡å¼åŒ¹é…å¼•æ“éå¸¸ä¾èµ–è¿™äº›å‘½åè§„åˆ™ã€‚</p><p>å‘½åè§„åˆ™å…·æœ‰ä¸€å®šéšæ„æ€§ï¼Œä½†ç›¸æ¯”æŒ‰ä¸ªäººå–œå¥½å‘½åï¼Œä¸€è‡´æ€§æ›´é‡è¦ï¼Œæ‰€ä»¥æ— è®ºä½ è®¤ä¸ºå®ƒä»¬æ˜¯å¦é‡è¦ï¼Œè§„åˆ™æ€»å½’æ˜¯è§„åˆ™ã€‚</p><h3 id="é€šç”¨å‘½åè§„åˆ™"><a href="#é€šç”¨å‘½åè§„åˆ™" class="headerlink" title="é€šç”¨å‘½åè§„åˆ™"></a>é€šç”¨å‘½åè§„åˆ™</h3><p>å‡½æ•°å‘½åï¼Œå˜é‡å‘½åï¼Œæ–‡ä»¶å‘½åè¦æœ‰æè¿°æ€§ï¼›å°‘ç”¨ç¼©å†™ã€‚</p><p>å°½å¯èƒ½ä½¿ç”¨æè¿°æ€§çš„å‘½åï¼Œåˆ«å¿ƒç–¼ç©ºé—´ï¼Œæ¯•ç«Ÿç›¸æ¯”ä¹‹ä¸‹è®©ä»£ç æ˜“äºæ–°è¯»è€…ç†è§£æ›´é‡è¦ã€‚ä¸è¦ç”¨åªæœ‰é¡¹ç›®å¼€å‘è€…èƒ½ç†è§£çš„ç¼©å†™ï¼Œä¹Ÿä¸è¦é€šè¿‡ç æ‰å‡ ä¸ªå­—æ¯æ¥ç¼©å†™å•è¯ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> price_count_reader<span class="token punctuation">;</span>    <span class="token comment">// æ— ç¼©å†™</span><span class="token keyword">int</span> num_errors<span class="token punctuation">;</span>            <span class="token comment">// "num" æ˜¯ä¸€ä¸ªå¸¸è§çš„å†™æ³•</span><span class="token keyword">int</span> num_dns_connections<span class="token punctuation">;</span>   <span class="token comment">// äººäººéƒ½çŸ¥é“ "DNS" æ˜¯ä»€ä¹ˆ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">int</span> n<span class="token punctuation">;</span>                     <span class="token comment">// æ¯«æ— æ„ä¹‰.</span><span class="token keyword">int</span> nerr<span class="token punctuation">;</span>                  <span class="token comment">// å«ç³Šä¸æ¸…çš„ç¼©å†™.</span><span class="token keyword">int</span> n_comp_conns<span class="token punctuation">;</span>          <span class="token comment">// å«ç³Šä¸æ¸…çš„ç¼©å†™.</span><span class="token keyword">int</span> wgc_connections<span class="token punctuation">;</span>       <span class="token comment">// åªæœ‰è´µå›¢é˜ŸçŸ¥é“æ˜¯ä»€ä¹ˆæ„æ€.</span><span class="token keyword">int</span> pc_reader<span class="token punctuation">;</span>             <span class="token comment">// "pc" æœ‰å¤ªå¤šå¯èƒ½çš„è§£é‡Šäº†.</span><span class="token keyword">int</span> cstmr_id<span class="token punctuation">;</span>              <span class="token comment">// åˆ å‡äº†è‹¥å¹²å­—æ¯.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„ï¼Œä¸€äº›ç‰¹å®šçš„å¹¿ä¸ºäººçŸ¥çš„ç¼©å†™æ˜¯å…è®¸çš„ï¼Œä¾‹å¦‚ç”¨ <code>i</code> è¡¨ç¤ºè¿­ä»£å˜é‡å’Œç”¨ <code>T</code> è¡¨ç¤ºæ¨¡æ¿å‚æ•°ã€‚</p><p>æ¨¡æ¿å‚æ•°çš„å‘½ååº”å½“éµå¾ªå¯¹åº”çš„åˆ†ç±»ï¼šç±»å‹æ¨¡æ¿å‚æ•°åº”å½“éµå¾ª <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/naming/#type-names">ç±»å‹å‘½å</a> çš„è§„åˆ™ï¼Œè€Œéç±»å‹æ¨¡æ¿åº”å½“éµå¾ª <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/naming/#variable-names">å˜é‡å‘½å</a> çš„è§„åˆ™ã€‚</p><h3 id="æ–‡ä»¶å‘½å"><a href="#æ–‡ä»¶å‘½å" class="headerlink" title="æ–‡ä»¶å‘½å"></a>æ–‡ä»¶å‘½å</h3><p>æ–‡ä»¶åè¦å…¨éƒ¨å°å†™ï¼Œå¯ä»¥åŒ…å«ä¸‹åˆ’çº¿ (<code>_</code>) æˆ–è¿å­—ç¬¦ (<code>-</code>)ï¼Œä¾ç…§é¡¹ç›®çš„çº¦å®šã€‚å¦‚æœæ²¡æœ‰çº¦å®šï¼Œé‚£ä¹ˆ â€œ<code>_</code>â€ æ›´å¥½ã€‚</p><p>å¯æ¥å—çš„æ–‡ä»¶å‘½åç¤ºä¾‹ï¼š</p><ul><li><p><code>my_useful_class.cc</code></p></li><li><p><code>my-useful-class.cc</code></p></li><li><p><code>myusefulclass.cc</code></p></li><li><p><code>myusefulclass_test.cc</code> // <code>_unittest</code> å’Œ <code>_regtest</code> å·²å¼ƒç”¨ã€‚</p><p>C++ æ–‡ä»¶è¦ä»¥ <code>.cc</code> ç»“å°¾ï¼Œå¤´æ–‡ä»¶ä»¥ <code>.h</code> ç»“å°¾ã€‚ä¸“é—¨æ’å…¥æ–‡æœ¬çš„æ–‡ä»¶åˆ™ä»¥ <code>.inc</code> ç»“å°¾ï¼Œå‚è§ <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/headers/#self-contained-headers">å¤´æ–‡ä»¶è‡ªè¶³</a>ã€‚</p></li></ul><p>ä¸è¦ä½¿ç”¨å·²ç»å­˜åœ¨äº <code>/usr/include</code> ä¸‹çš„æ–‡ä»¶åï¼ˆå³ç¼–è¯‘å™¨æœç´¢ç³»ç»Ÿå¤´æ–‡ä»¶çš„è·¯å¾„ï¼‰ï¼Œå¦‚ <code>db.h</code>ã€‚</p><p>é€šå¸¸åº”å°½é‡è®©æ–‡ä»¶åæ›´åŠ æ˜ç¡®ã€‚<code>http_server_logs.h</code> å°±æ¯” <code>logs.h</code> è¦å¥½ã€‚å®šä¹‰ç±»æ—¶æ–‡ä»¶åä¸€èˆ¬æˆå¯¹å‡ºç°ï¼Œå¦‚ <code>foo_bar.h</code> å’Œ <code>foo_bar.cc</code>ï¼Œå¯¹åº”äºç±» <code>FooBar</code>ã€‚</p><p>å†…è”å‡½æ•°å¿…é¡»æ”¾åœ¨ <code>.h</code> æ–‡ä»¶ä¸­ã€‚å¦‚æœå†…è”å‡½æ•°æ¯”è¾ƒçŸ­ï¼Œå°±ç›´æ¥æ”¾åœ¨ <code>.h</code> ä¸­ã€‚</p><h3 id="ç±»å‹å‘½å"><a href="#ç±»å‹å‘½å" class="headerlink" title="ç±»å‹å‘½å"></a>ç±»å‹å‘½å</h3><p>ç±»å‹åç§°çš„æ¯ä¸ªå•è¯é¦–å­—æ¯å‡å¤§å†™ï¼Œä¸åŒ…å«ä¸‹åˆ’çº¿ï¼š<code>MyExcitingClass</code>ï¼Œ<code>MyExcitingEnum</code>ã€‚</p><p>æ‰€æœ‰ç±»å‹å‘½å â€”â€” ç±»ï¼Œç»“æ„ä½“ï¼Œç±»å‹å®šä¹‰ (<code>typedef</code>)ï¼Œæšä¸¾ï¼Œç±»å‹æ¨¡æ¿å‚æ•° â€”â€” å‡ä½¿ç”¨ç›¸åŒçº¦å®šï¼Œå³ä»¥å¤§å†™å­—æ¯å¼€å§‹ï¼Œæ¯ä¸ªå•è¯é¦–å­—æ¯å‡å¤§å†™ï¼Œä¸åŒ…å«ä¸‹åˆ’çº¿ã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// ç±»å’Œç»“æ„ä½“</span><span class="token keyword">class</span> <span class="token class-name">UrlTable</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token class-name">UrlTableTester</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">struct</span> <span class="token class-name">UrlTableProperties</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment">// ç±»å‹å®šä¹‰</span><span class="token keyword">typedef</span> hash_map<span class="token operator">&lt;</span>UrlTableProperties <span class="token operator">*</span><span class="token punctuation">,</span> string<span class="token operator">&gt;</span> PropertiesMap<span class="token punctuation">;</span><span class="token comment">// using åˆ«å</span><span class="token keyword">using</span> PropertiesMap <span class="token operator">=</span> hash_map<span class="token operator">&lt;</span>UrlTableProperties <span class="token operator">*</span><span class="token punctuation">,</span> string<span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token comment">// æšä¸¾</span><span class="token keyword">enum</span> <span class="token class-name">UrlTableErrors</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å˜é‡å‘½å"><a href="#å˜é‡å‘½å" class="headerlink" title="å˜é‡å‘½å"></a>å˜é‡å‘½å</h3><p>å˜é‡ï¼ˆåŒ…æ‹¬å‡½æ•°å‚æ•°ï¼‰å’Œæ•°æ®æˆå‘˜åä¸€å¾‹å°å†™ï¼Œå•è¯ä¹‹é—´ç”¨ä¸‹åˆ’çº¿è¿æ¥ã€‚ç±»çš„æˆå‘˜å˜é‡ä»¥ä¸‹åˆ’çº¿ç»“å°¾ï¼Œä½†ç»“æ„ä½“çš„å°±ä¸ç”¨ï¼Œå¦‚ï¼š<code>a_local_variable</code>ï¼Œ<code>a_struct_data_member</code>ï¼Œ<code>a_class_data_member_</code>ã€‚</p><h4 id="æ™®é€šå˜é‡å‘½å"><a href="#æ™®é€šå˜é‡å‘½å" class="headerlink" title="æ™®é€šå˜é‡å‘½å"></a>æ™®é€šå˜é‡å‘½å</h4><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">string table_name<span class="token punctuation">;</span>  <span class="token comment">// å¥½ - ç”¨ä¸‹åˆ’çº¿.</span>string tablename<span class="token punctuation">;</span>   <span class="token comment">// å¥½ - å…¨å°å†™.</span>string tableName<span class="token punctuation">;</span>  <span class="token comment">// å·® - æ··åˆå¤§å°å†™</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="ç±»æ•°æ®æˆå‘˜"><a href="#ç±»æ•°æ®æˆå‘˜" class="headerlink" title="ç±»æ•°æ®æˆå‘˜"></a>ç±»æ•°æ®æˆå‘˜</h4><p>ä¸ç®¡æ˜¯é™æ€çš„è¿˜æ˜¯éé™æ€çš„ï¼Œç±»æ•°æ®æˆå‘˜éƒ½å¯ä»¥å’Œæ™®é€šå˜é‡ä¸€æ ·ï¼Œä½†è¦æ¥ä¸‹åˆ’çº¿ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">TableInfo</span> <span class="token punctuation">{</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">private</span><span class="token operator">:</span>  string table_name_<span class="token punctuation">;</span>  <span class="token comment">// å¥½ - ååŠ ä¸‹åˆ’çº¿.</span>  string tablename_<span class="token punctuation">;</span>   <span class="token comment">// å¥½.</span>  <span class="token keyword">static</span> Pool<span class="token operator">&lt;</span>TableInfo<span class="token operator">&gt;</span><span class="token operator">*</span> pool_<span class="token punctuation">;</span>  <span class="token comment">// å¥½.</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="ç»“æ„ä½“å˜é‡"><a href="#ç»“æ„ä½“å˜é‡" class="headerlink" title="ç»“æ„ä½“å˜é‡"></a>ç»“æ„ä½“å˜é‡</h4><p>ä¸ç®¡æ˜¯é™æ€çš„è¿˜æ˜¯éé™æ€çš„ï¼Œç»“æ„ä½“æ•°æ®æˆå‘˜éƒ½å¯ä»¥å’Œæ™®é€šå˜é‡ä¸€æ ·ï¼Œä¸ç”¨åƒç±»é‚£æ ·æ¥ä¸‹åˆ’çº¿ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">struct</span> <span class="token class-name">UrlTableProperties</span> <span class="token punctuation">{</span>  string name<span class="token punctuation">;</span>  <span class="token keyword">int</span> num_entries<span class="token punctuation">;</span>  <span class="token keyword">static</span> Pool<span class="token operator">&lt;</span>UrlTableProperties<span class="token operator">&gt;</span><span class="token operator">*</span> pool<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç»“æ„ä½“ä¸ç±»çš„ä½¿ç”¨è®¨è®ºï¼Œå‚è€ƒ <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/classes/#structs-vs-classes">ç»“æ„ä½“ vs. ç±»</a>ã€‚</p><h3 id="å¸¸é‡å‘½å"><a href="#å¸¸é‡å‘½å" class="headerlink" title="å¸¸é‡å‘½å"></a>å¸¸é‡å‘½å</h3><p>å£°æ˜ä¸º <code>constexpr</code> æˆ– <code>const</code> çš„å˜é‡ï¼Œæˆ–åœ¨ç¨‹åºè¿è¡ŒæœŸé—´å…¶å€¼å§‹ç»ˆä¿æŒä¸å˜çš„ï¼Œå‘½åæ—¶ä»¥ â€œkâ€ å¼€å¤´ï¼Œå¤§å°å†™æ··åˆã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">const</span> <span class="token keyword">int</span> kDaysInAWeek <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ‰€æœ‰å…·æœ‰é™æ€å­˜å‚¨ç±»å‹çš„å˜é‡ï¼ˆä¾‹å¦‚é™æ€å˜é‡æˆ–å…¨å±€å˜é‡ï¼Œ å‚è§ <a href="http://en.cppreference.com/w/cpp/language/storage_duration#Storage_duration">å­˜å‚¨ç±»å‹</a>ï¼‰éƒ½åº”å½“ä»¥æ­¤æ–¹å¼å‘½åã€‚å¯¹äºå…¶ä»–å­˜å‚¨ç±»å‹çš„å˜é‡ï¼Œå¦‚è‡ªåŠ¨å˜é‡ç­‰ï¼Œè¿™æ¡è§„åˆ™æ˜¯å¯é€‰çš„ã€‚å¦‚æœä¸é‡‡ç”¨è¿™æ¡è§„åˆ™ï¼Œå°±æŒ‰ç…§ä¸€èˆ¬çš„å˜é‡å‘½åè§„åˆ™ã€‚</p><h3 id="å‡½æ•°å‘½å"><a href="#å‡½æ•°å‘½å" class="headerlink" title="å‡½æ•°å‘½å"></a>å‡½æ•°å‘½å</h3><p>å¸¸è§„å‡½æ•°ä½¿ç”¨å¤§å°å†™æ··åˆï¼Œå–å€¼å’Œè®¾å€¼å‡½æ•°åˆ™è¦æ±‚ä¸å˜é‡ååŒ¹é…ï¼š<code>MyExcitingFunction()</code>ï¼Œ<code>MyExcitingMethod()</code>ï¼Œ<code>my_exciting_member_variable()</code>ï¼Œ<code>set_my_exciting_member_variable()</code>ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œå‡½æ•°åçš„æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼ˆå³ â€œé©¼å³°å˜é‡åâ€ æˆ– â€œå¸•æ–¯å¡å˜é‡åâ€ï¼‰ï¼Œæ²¡æœ‰ä¸‹åˆ’çº¿ã€‚å¯¹äºé¦–å­—æ¯ç¼©å†™çš„å•è¯ï¼Œæ›´å€¾å‘äºå°†å®ƒä»¬è§†ä½œä¸€ä¸ªå•è¯è¿›è¡Œé¦–å­—æ¯å¤§å†™ï¼ˆä¾‹å¦‚ï¼Œå†™ä½œ <code>StartRpc()</code> è€Œé <code>StartRPC()</code>ï¼‰ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token function">AddTableEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">DeleteUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">OpenFileOrDie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ï¼ˆåŒæ ·çš„å‘½åè§„åˆ™åŒæ—¶é€‚ç”¨äºç±»ä½œç”¨åŸŸä¸å‘½åç©ºé—´ä½œç”¨åŸŸçš„å¸¸é‡ï¼Œ å› ä¸ºå®ƒä»¬æ˜¯ä½œä¸º API çš„ä¸€éƒ¨åˆ†æš´éœ²å¯¹å¤–çš„ï¼Œ å› æ­¤åº”å½“è®©å®ƒä»¬çœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œ å› ä¸ºåœ¨è¿™æ—¶ï¼Œ å®ƒä»¬å®é™…ä¸Šæ˜¯ä¸€ä¸ªå¯¹è±¡è€Œéå‡½æ•°çš„è¿™ä¸€äº‹å®å¯¹å¤–ä¸è¿‡æ˜¯ä¸€ä¸ªæ— å…³ç´§è¦çš„å®ç°ç»†èŠ‚ã€‚ï¼‰</p><p>å–å€¼å’Œè®¾å€¼å‡½æ•°çš„å‘½åä¸å˜é‡ä¸€è‡´ã€‚ä¸€èˆ¬æ¥è¯´å®ƒä»¬çš„åç§°ä¸å®é™…çš„æˆå‘˜å˜é‡å¯¹åº”ï¼Œ ä½†å¹¶ä¸å¼ºåˆ¶è¦æ±‚ã€‚ä¾‹å¦‚ <code>int count()</code> ä¸ <code>void set_count(int count)</code>ã€‚</p><h3 id="å‘½åç©ºé—´å‘½å"><a href="#å‘½åç©ºé—´å‘½å" class="headerlink" title="å‘½åç©ºé—´å‘½å"></a>å‘½åç©ºé—´å‘½å</h3><p>å‘½åç©ºé—´ä»¥å°å†™å­—æ¯å‘½åã€‚æœ€é«˜çº§å‘½åç©ºé—´çš„åå­—å–å†³äºé¡¹ç›®åç§°ã€‚è¦æ³¨æ„é¿å…åµŒå¥—å‘½åç©ºé—´çš„åå­—ä¹‹é—´å’Œå¸¸è§çš„é¡¶çº§å‘½åç©ºé—´çš„åå­—ä¹‹é—´å‘ç”Ÿå†²çªã€‚</p><p>é¡¶çº§å‘½åç©ºé—´çš„åç§°åº”å½“æ˜¯é¡¹ç›®åæˆ–è€…æ˜¯è¯¥å‘½åç©ºé—´ä¸­çš„ä»£ç æ‰€å±çš„å›¢é˜Ÿçš„åå­—ã€‚å‘½åç©ºé—´ä¸­çš„ä»£ç ï¼Œ åº”å½“å­˜æ”¾äºå’Œå‘½åç©ºé—´çš„åå­—åŒ¹é…çš„æ–‡ä»¶å¤¹æˆ–å…¶å­æ–‡ä»¶å¤¹ä¸­ã€‚</p><p>æ³¨æ„ <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/naming/#general-naming-rules">ä¸ä½¿ç”¨ç¼©å†™ä½œä¸ºåç§°</a> çš„è§„åˆ™åŒæ ·é€‚ç”¨äºå‘½åç©ºé—´ã€‚å‘½åç©ºé—´ä¸­çš„ä»£ç æå°‘éœ€è¦æ¶‰åŠå‘½åç©ºé—´çš„åç§°ï¼Œ å› æ­¤æ²¡æœ‰å¿…è¦åœ¨å‘½åç©ºé—´ä¸­ä½¿ç”¨ç¼©å†™ã€‚</p><p>è¦é¿å…åµŒå¥—çš„å‘½åç©ºé—´ä¸å¸¸è§çš„é¡¶çº§å‘½åç©ºé—´å‘ç”Ÿåç§°å†²çªã€‚ç”±äºåç§°æŸ¥æ‰¾è§„åˆ™çš„å­˜åœ¨ï¼Œ å‘½åç©ºé—´ä¹‹é—´çš„å†²çªå®Œå…¨æœ‰å¯èƒ½å¯¼è‡´ç¼–è¯‘å¤±è´¥ã€‚å°¤å…¶æ˜¯ï¼Œ ä¸è¦åˆ›å»ºåµŒå¥—çš„ <code>std</code> å‘½åç©ºé—´ã€‚å»ºè®®ä½¿ç”¨æ›´ç‹¬ç‰¹çš„é¡¹ç›®æ ‡è¯†ç¬¦ ï¼ˆ<code>websearch::index</code>ï¼Œ <code>websearch::index_util</code>ï¼‰ è€Œéå¸¸è§çš„ææ˜“å‘ç”Ÿå†²çªçš„åç§° ï¼ˆæ¯”å¦‚ <code>websearch::util</code>ï¼‰ã€‚</p><p>å¯¹äº <code>internal</code> å‘½åç©ºé—´ï¼Œ è¦å½“å¿ƒåŠ å…¥åˆ°åŒä¸€ <code>internal</code> å‘½åç©ºé—´çš„ä»£ç ä¹‹é—´å‘ç”Ÿå†²çª ï¼ˆç”±äºå†…éƒ¨ç»´æŠ¤äººå‘˜é€šå¸¸æ¥è‡ªåŒä¸€å›¢é˜Ÿï¼Œ å› æ­¤å¸¸æœ‰å¯èƒ½å¯¼è‡´å†²çªï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ è¯·ä½¿ç”¨æ–‡ä»¶åä»¥ä½¿å¾—å†…éƒ¨åç§°ç‹¬ä¸€æ— äºŒ ï¼ˆä¾‹å¦‚å¯¹äº <code>frobber.h</code>ï¼Œ ä½¿ç”¨ <code>websearch::index::frobber_internal</code>ï¼‰ã€‚</p><h3 id="æšä¸¾å‘½å"><a href="#æšä¸¾å‘½å" class="headerlink" title="æšä¸¾å‘½å"></a>æšä¸¾å‘½å</h3><p>æšä¸¾çš„å‘½ååº”å½“å’Œ <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/naming/#constant-names">å¸¸é‡</a> æˆ– <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/naming/#macro-names">å®</a> ä¸€è‡´: <code>kEnumName</code> æˆ–æ˜¯ <code>ENUM_NAME</code>ã€‚</p><p>å•ç‹¬çš„æšä¸¾å€¼åº”è¯¥ä¼˜å…ˆé‡‡ç”¨ <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/naming/#constant-names">å¸¸é‡</a> çš„å‘½åæ–¹å¼ã€‚ä½† <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/naming/#macro-names">å®</a> æ–¹å¼çš„å‘½åä¹Ÿå¯ä»¥æ¥å—ã€‚æšä¸¾å <code>UrlTableErrors</code> ï¼ˆä»¥åŠ <code>AlternateUrlTableErrors</code>ï¼‰ æ˜¯ç±»å‹ï¼Œ æ‰€ä»¥è¦ç”¨å¤§å°å†™æ··åˆçš„æ–¹å¼ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">enum</span> <span class="token class-name">UrlTableErrors</span> <span class="token punctuation">{</span>    kOK <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>    kErrorOutOfMemory<span class="token punctuation">,</span>    kErrorMalformedInput<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">enum</span> <span class="token class-name">AlternateUrlTableErrors</span> <span class="token punctuation">{</span>    OK <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>    OUT_OF_MEMORY <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>    MALFORMED_INPUT <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2009 å¹´ 1 æœˆä¹‹å‰ï¼Œ æˆ‘ä»¬ä¸€ç›´å»ºè®®é‡‡ç”¨ <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/naming/#macro-names">å®</a> çš„æ–¹å¼å‘½åæšä¸¾å€¼ã€‚ç”±äºæšä¸¾å€¼å’Œå®ä¹‹é—´çš„å‘½åå†²çªï¼Œ ç›´æ¥å¯¼è‡´äº†å¾ˆå¤šé—®é¢˜ã€‚ç”±æ­¤ï¼Œ è¿™é‡Œæ”¹ä¸ºä¼˜å…ˆé€‰æ‹©å¸¸é‡é£æ ¼çš„å‘½åæ–¹å¼ã€‚æ–°ä»£ç åº”è¯¥å°½å¯èƒ½ä¼˜å…ˆä½¿ç”¨å¸¸é‡é£æ ¼ã€‚ä½†æ˜¯è€ä»£ç æ²¡å¿…è¦åˆ‡æ¢åˆ°å¸¸é‡é£æ ¼ï¼Œ é™¤éå®é£æ ¼ç¡®å®ä¼šäº§ç”Ÿç¼–è¯‘æœŸé—®é¢˜ã€‚</p><h3 id="å®å‘½å"><a href="#å®å‘½å" class="headerlink" title="å®å‘½å"></a>å®å‘½å</h3><p>ä½ å¹¶ä¸æ‰“ç®— <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/others/#preprocessor-macros">ä½¿ç”¨å®</a>ï¼Œ å¯¹å§? å¦‚æœä½ ä¸€å®šè¦ç”¨ï¼Œ åƒè¿™æ ·å‘½å: <code>MY_MACRO_THAT_SCARES_SMALL_CHILDREN</code>ã€‚</p><p>å‚è€ƒ <a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-cpp-styleguide/others/#preprocessor-macros">é¢„å¤„ç†å®</a>ï¼› é€šå¸¸ <em>ä¸åº”è¯¥</em> ä½¿ç”¨å®ã€‚å¦‚æœä¸å¾—ä¸ç”¨ï¼Œ å…¶å‘½ååƒæšä¸¾å‘½åä¸€æ ·å…¨éƒ¨å¤§å†™ï¼Œ ä½¿ç”¨ä¸‹åˆ’çº¿:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">ROUND</span><span class="token expression"><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>#define PI_ROUNDED <span class="token number">3.0</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="å‘½åè§„åˆ™çš„ç‰¹ä¾‹"><a href="#å‘½åè§„åˆ™çš„ç‰¹ä¾‹" class="headerlink" title="å‘½åè§„åˆ™çš„ç‰¹ä¾‹"></a>å‘½åè§„åˆ™çš„ç‰¹ä¾‹</h3><p>å¦‚æœä½ å‘½åçš„å®ä½“ä¸å·²æœ‰ C/C++ å®ä½“ç›¸ä¼¼ï¼Œ å¯å‚è€ƒç°æœ‰å‘½åç­–ç•¥.</p><p><code>bigopen()</code>: å‡½æ•°åï¼Œ å‚ç…§ <code>open()</code> çš„å½¢å¼</p><p><code>uint</code>: <code>typedef</code></p><p><code>bigpos</code>: <code>struct</code> æˆ– <code>class</code>ï¼Œ å‚ç…§ <code>pos</code> çš„å½¢å¼</p><p><code>sparse_hash_map</code>: STL å‹å®ä½“ï¼› å‚ç…§ STL å‘½åçº¦å®š</p><p><code>LONGLONG_MAX</code>: å¸¸é‡ï¼Œ å¦‚åŒ <code>INT_MAX</code></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆå››ï¼‰ï¼šç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹</title>
      <link href="2022/02/08/cpp-notes-6/"/>
      <url>2022/02/08/cpp-notes-6/</url>
      
        <content type="html"><![CDATA[<h1 id="C-å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆå››ï¼‰ï¼šç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹"><a href="#C-å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆå››ï¼‰ï¼šç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹" class="headerlink" title="C++ å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆå››ï¼‰ï¼šç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹"></a>C++ å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆå››ï¼‰ï¼šç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹</h1><h2 id="1-ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ç®€ä»‹"><a href="#1-ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ç®€ä»‹" class="headerlink" title="1. ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ç®€ä»‹"></a>1. ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ç®€ä»‹</h2><p><strong>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…é—®é¢˜æ˜¯çº¿ç¨‹æ¨¡å‹ä¸­çš„ç»å…¸é—®é¢˜ï¼š</strong>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åœ¨åŒä¸€æ—¶é—´æ®µå†…å…±ç”¨åŒä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼Œç”Ÿäº§è€…å¾€å­˜å‚¨ç©ºé—´ä¸­æ·»åŠ äº§å“ï¼Œæ¶ˆè´¹è€…ä»å­˜å‚¨ç©ºé—´ä¸­å–èµ°äº§å“ï¼›å½“å­˜å‚¨ç©ºé—´ä¸ºç©ºæ—¶ï¼Œæ¶ˆè´¹è€…é˜»å¡ï¼Œå½“å­˜å‚¨ç©ºé—´æ»¡æ—¶ï¼Œç”Ÿäº§è€…é˜»å¡ã€‚</p><p><strong>ç®€å•æ¥è¯´ï¼Œè¿™ä¸ªæ¨¡å‹æ˜¯ç”±ä¸¤ç±»çº¿ç¨‹æ„æˆï¼š</strong></p><ul><li>ç”Ÿäº§è€…çº¿ç¨‹ï¼šâ€œç”Ÿäº§â€äº§å“ï¼Œå¹¶æŠŠäº§å“æ”¾åˆ°ä¸€ä¸ªé˜Ÿåˆ—é‡Œï¼›</li><li>æ¶ˆè´¹è€…çº¿ç¨‹ï¼šâ€œæ¶ˆè´¹â€äº§å“ï¼Œå…·ä½“æ˜¯ä»é˜Ÿåˆ—ä¸­å–å‡ºäº§å“ã€‚</li></ul><p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ï¼Ÿ</strong></p><p>åœ¨å¤šçº¿ç¨‹å¼€å‘å½“ä¸­ï¼Œå¦‚æœç”Ÿäº§è€…å¤„ç†é€Ÿåº¦å¾ˆå¿«ï¼Œè€Œæ¶ˆè´¹è€…å¤„ç†é€Ÿåº¦å¾ˆæ…¢ï¼Œé‚£ä¹ˆç”Ÿäº§è€…å°±å¿…é¡»ç­‰å¾…æ¶ˆè´¹è€…å¤„ç†å®Œï¼Œæ‰èƒ½ç»§ç»­ç”Ÿäº§æ•°æ®ï¼Œå¦åˆ™æ–°ç”Ÿäº§çš„æ•°æ®ä¹Ÿæ²¡æœ‰åœ°æ–¹å­˜æ”¾ï¼›åŒæ ·çš„é“ç†ï¼Œå¦‚æœæ¶ˆè´¹è€…çš„å¤„ç†èƒ½åŠ›å¤§äºç”Ÿäº§è€…ï¼Œé‚£ä¹ˆæ¶ˆè´¹è€…å°±å¿…é¡»ç­‰å¾…ç”Ÿäº§è€…ï¼Œä¸ç„¶æ²¡æœ‰æ•°æ®æ¶ˆè´¹è€…ä¹Ÿæ²¡åŠæ³•æ¶ˆè´¹ã€‚</p><p>ä¸ºäº†è¾¾åˆ°ç”Ÿäº§è€…ç”Ÿäº§æ•°æ®å’Œæ¶ˆè´¹è€…æ¶ˆè´¹æ•°æ®ä¹‹é—´çš„<strong>å¹³è¡¡</strong>ï¼Œå°±éœ€è¦ä¸€ä¸ªç¼“å†²åŒºç”¨æ¥å­˜å‚¨ç”Ÿäº§è€…ç”Ÿäº§çš„æ•°æ®ï¼Œæ‰€ä»¥å°±å¼•å…¥äº†ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ã€‚</p><h2 id="2-å®ç°ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹"><a href="#2-å®ç°ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹" class="headerlink" title="2. å®ç°ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹"></a>2. å®ç°ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹</h2><p>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹å¯ä»¥åˆ†ä¸ºï¼šå•ç”Ÿäº§è€…-å•æ¶ˆè´¹è€…æ¨¡å‹ï¼Œå•ç”Ÿäº§è€…-å¤šæ¶ˆè´¹è€…æ¨¡å‹ï¼Œå¤šç”Ÿäº§è€…-å•æ¶ˆè´¹è€…æ¨¡å‹ï¼Œå¤šç”Ÿäº§è€…-å¤šæ¶ˆè´¹è€…æ¨¡å‹ã€‚æˆ‘è¿™é‡Œä¸»è¦ä»‹ç»å•ç”Ÿäº§è€…-å•æ¶ˆè´¹è€…æ¨¡å‹ï¼Œå…¶ä»–æ¨¡å‹å¯ä»¥å‚è€ƒä¸‹é¢å‡ ä¸ªç½‘å€ï¼š</p><ul><li><a href="https://blog.csdn.net/chenxun_2010/article/details/49848865">c++ 11 å¤šçº¿çº¿ç¨‹ç³»åˆ—â€”â€”â€”â€“ç”Ÿäº§è€…æ¶ˆè´¹è€…</a></li><li><a href="https://blog.51cto.com/u_15357586/3790039">C++å¤šçº¿ç¨‹â€”â€”ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¨¡å¼/æ¡ä»¶å˜é‡(Condition Variable)</a></li></ul><p>é¡¾åæ€ä¹‰ï¼Œå•ç”Ÿäº§è€…-å•æ¶ˆè´¹è€…æ¨¡å‹å°±æ˜¯åªæœ‰ä¸€ä¸ªç”Ÿäº§è€…ã€ä¸€ä¸ªæ¶ˆè´¹è€…çš„æƒ…å†µï¼Œè¿™æ˜¯æœ€ç®€å•çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ã€‚å®ç°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;deque&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;thread&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mutex&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;condition_variable&gt;</span></span>std<span class="token double-colon punctuation">::</span>deque<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> q<span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>mutex mu<span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>condition_variable cond<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">function_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>unique_lock<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>mutex<span class="token operator">&gt;</span> <span class="token function">locker</span><span class="token punctuation">(</span>mu<span class="token punctuation">)</span><span class="token punctuation">;</span>        q<span class="token punctuation">.</span><span class="token function">push_front</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>        locker<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        cond<span class="token punctuation">.</span><span class="token function">notify_one</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Notify one waiting thread, if there is one.</span>        count<span class="token operator">--</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">function_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> data <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>data <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>unique_lock<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>mutex<span class="token operator">&gt;</span> <span class="token function">locker</span><span class="token punctuation">(</span>mu<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            cond<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span>locker<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Unlock mu and wait to be notified</span>        data <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        q<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        locker<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"t2 got a value from t1: "</span> <span class="token operator">&lt;&lt;</span> data <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    std<span class="token double-colon punctuation">::</span>thread <span class="token function">t1</span><span class="token punctuation">(</span>function_1<span class="token punctuation">)</span><span class="token punctuation">;</span>    std<span class="token double-colon punctuation">::</span>thread <span class="token function">t2</span><span class="token punctuation">(</span>function_2<span class="token punctuation">)</span><span class="token punctuation">;</span>    t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    t2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢çš„ä»£ç æœ‰ä¸‰ä¸ªæ³¨æ„äº‹é¡¹ï¼š</p><ol><li><p>åœ¨function_2ä¸­ï¼Œåœ¨åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºçš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯<code>while(q.empty())</code>ï¼Œè€Œä¸æ˜¯<code>if(q.empty())</code>.</p><p>è¿™æ˜¯å› ä¸ºwait()ä»é˜»å¡åˆ°è¿”å›ï¼Œä¸ä¸€å®šå°±æ˜¯ç”±äºnotify_one()å‡½æ•°é€ æˆçš„ï¼Œè¿˜æœ‰å¯èƒ½ç”±äºç³»ç»Ÿçš„ä¸ç¡®å®šåŸå› å”¤é†’ï¼ˆå¯èƒ½å’Œæ¡ä»¶å˜é‡çš„å®ç°æœºåˆ¶æœ‰å…³ï¼‰ï¼Œè¿™ä¸ªçš„æ—¶æœºå’Œé¢‘ç‡éƒ½æ˜¯ä¸ç¡®å®šçš„ï¼Œè¢«ç§°ä½œä¼ªå”¤é†’ï¼Œå¦‚æœåœ¨é”™è¯¯çš„æ—¶å€™è¢«å”¤é†’äº†ï¼Œæ‰§è¡Œåé¢çš„è¯­å¥å°±ä¼šé”™è¯¯ï¼Œæ‰€ä»¥éœ€è¦å†æ¬¡åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœè¿˜æ˜¯ä¸ºç©ºï¼Œå°±ç»§ç»­wait()é˜»å¡ã€‚</p></li><li><p>åœ¨ç®¡ç†äº’æ–¥é”çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯<code>std::unique_lock</code>è€Œä¸æ˜¯<code>std::lock_guard</code>ï¼Œè€Œä¸”äº‹å®ä¸Šä¹Ÿä¸èƒ½ä½¿ç”¨<code>std::lock_guard</code>ã€‚</p><p>è¿™éœ€è¦å…ˆè§£é‡Šä¸‹wait()å‡½æ•°æ‰€åšçš„äº‹æƒ…ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨wait()å‡½æ•°ä¹‹å‰ï¼Œä½¿ç”¨äº’æ–¥é”ä¿æŠ¤äº†ï¼Œå¦‚æœwaitçš„æ—¶å€™ä»€ä¹ˆéƒ½æ²¡åšï¼Œå²‚ä¸æ˜¯ä¸€ç›´æŒæœ‰äº’æ–¥é”ï¼Ÿé‚£ç”Ÿäº§è€…ä¹Ÿä¼šä¸€ç›´å¡ä½ï¼Œä¸èƒ½å¤Ÿå°†æ•°æ®æ”¾å…¥é˜Ÿåˆ—ä¸­äº†ã€‚æ‰€ä»¥ï¼Œwait()å‡½æ•°ä¼šå…ˆè°ƒç”¨äº’æ–¥é”çš„unlock()å‡½æ•°ï¼Œç„¶åå†å°†è‡ªå·±ç¡çœ ï¼Œåœ¨è¢«å”¤é†’åï¼Œåˆä¼šç»§ç»­æŒæœ‰é”ï¼Œä¿æŠ¤åé¢çš„é˜Ÿåˆ—æ“ä½œã€‚è€Œlock_guardæ²¡æœ‰lockå’Œunlockæ¥å£ï¼Œè€Œunique_lockæä¾›äº†ã€‚è¿™å°±æ˜¯å¿…é¡»ä½¿ç”¨unique_lockçš„åŸå› ã€‚</p></li><li><p>ä½¿ç”¨ç»†ç²’åº¦é”ï¼Œå°½é‡å‡å°é”çš„èŒƒå›´ã€‚</p><p>åœ¨notify_one()çš„æ—¶å€™ï¼Œä¸éœ€è¦å¤„äºäº’æ–¥é”çš„ä¿æŠ¤èŒƒå›´å†…ï¼Œæ‰€ä»¥åœ¨å”¤é†’æ¡ä»¶å˜é‡ä¹‹å‰å¯ä»¥å°†é”unlock()ã€‚è¿˜å¯ä»¥å°†<code>cond.wait(locker);</code>æ¢ä¸€ç§å†™æ³•ï¼Œwait()çš„ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°è¡¨ç¤ºæ£€æŸ¥æ¡ä»¶ï¼Œè¿™é‡Œä½¿ç”¨lambdaå‡½æ•°æœ€ä¸ºç®€å•ï¼Œå¦‚æœè¿™ä¸ªå‡½æ•°è¿”å›çš„æ˜¯trueï¼Œwait()å‡½æ•°ä¸ä¼šé˜»å¡ä¼šç›´æ¥è¿”å›ï¼Œå¦‚æœè¿™ä¸ªå‡½æ•°è¿”å›çš„æ˜¯falseï¼Œwait()å‡½æ•°å°±ä¼šé˜»å¡ç€ç­‰å¾…å”¤é†’ï¼Œå¦‚æœè¢«ä¼ªå”¤é†’ï¼Œä¼šç»§ç»­åˆ¤æ–­å‡½æ•°è¿”å›å€¼ã€‚</p></li></ol><h2 id="3-å®é™…åº”ç”¨ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹"><a href="#3-å®é™…åº”ç”¨ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹" class="headerlink" title="3. å®é™…åº”ç”¨ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹"></a>3. å®é™…åº”ç”¨ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹</h2><blockquote><p>è¿™é‡Œä»‹ç»ä¸€ä¸ªä¸ªäººè®¤ä¸ºæ¯”è¾ƒå¥½ç”¨çš„ç¼–ç¨‹æ–¹æ³•ã€‚</p></blockquote><p>åœ¨æˆ‘ä»¬çš„å®é™…å¼€å‘ä¸­ï¼Œæ¯”å¦‚åœ¨SLAMä¸­ï¼Œå¯èƒ½æ˜¯å®šä½ä¸€ä¸ªçº¿ç¨‹ï¼Œå»ºå›¾ä¸€ä¸ªçº¿ç¨‹ï¼Œå®šä½çº¿ç¨‹ä¼šè®¡ç®—å‡ºç›®å‰çš„ä½ç½®ï¼Œè€Œå»ºå›¾çº¿ç¨‹éœ€è¦æ ¹æ®è¿™ä¸ªä½ç½®æ¥å»ºç«‹åœ°å›¾ã€‚</p><p>å¦‚æœé‡‡ç”¨ä¸Šé¢è¿™æ ·çš„æ–¹å¼ï¼Œä»£ç å°±ä¸æ˜¯å¾ˆç®€æ´ï¼Œå¹¶ä¸”ä½ éœ€è¦ä¿è¯ä¸€äº›å˜é‡æ˜¯å…¨å±€çš„ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½èƒ½å¤Ÿæ¥è§¦åˆ°ï¼Œè¿™æ ·é›¶é›¶ç¢ç¢çš„å˜é‡æ¯”è¾ƒå¤šï¼Œç®¡ç†èµ·æ¥å¾ˆéº»çƒ¦ã€‚</p><p>è¿™é‡Œæˆ‘æ¨èæ„å»ºä¸€ä¸ªç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹çš„ç±»ï¼Œå¹¶ä¸”æœ€å¥½æ˜¯ä½¿ç”¨å•ä¾‹æ¨¡å¼çš„æ¨¡æ¿ç±»ã€‚è¿™æ ·çš„è¯å°±å¯ä»¥éå¸¸ç®€å•çš„åœ¨ä¸¤ä¸ªçº¿ç¨‹ä¸­é€šä¿¡ï¼Œå¹¶ä¸”åç»­å¦‚æœè¦å¯¹é€šä¿¡æ–¹å¼è¿›è¡Œä¿®æ”¹ï¼Œä¹Ÿä¸éœ€è¦ä¿®æ”¹åˆ°å®šä½å’Œå»ºå›¾çš„ä»£ç ï¼Œå°è£…æ€§æ›´å¥½ï¼</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">THREAD_TEST_DATATRANS_H</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">THREAD_TEST_DATATRANS_H</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;list&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mutex&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;condition_variable&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">Trans</span> <span class="token expression"><span class="token class-name">DataTrans</span><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">Instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span></span><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token keyword">class</span> <span class="token class-name">DataTrans</span><span class="token punctuation">{</span><span class="token keyword">private</span><span class="token operator">:</span>    std<span class="token double-colon punctuation">::</span>list<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> m_queue<span class="token punctuation">;</span><span class="token comment">//é˜Ÿåˆ—</span>    std<span class="token double-colon punctuation">::</span>mutex m_mutex<span class="token punctuation">;</span><span class="token comment">//å…¨å±€äº’æ–¥é”</span>    std<span class="token double-colon punctuation">::</span>condition_variable_any m_notEmpty<span class="token punctuation">;</span><span class="token comment">//å…¨å±€æ¡ä»¶å˜é‡ï¼ˆä¸ä¸ºç©ºï¼‰</span>    std<span class="token double-colon punctuation">::</span>condition_variable_any m_notFull<span class="token punctuation">;</span><span class="token comment">//å…¨å±€æ¡ä»¶å˜é‡ï¼ˆä¸ä¸ºæ»¡ï¼‰</span>    <span class="token keyword">int</span> m_maxSize<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//é˜Ÿåˆ—æœ€å¤§å®¹é‡</span><span class="token keyword">private</span><span class="token operator">:</span>    <span class="token comment">//é˜Ÿåˆ—ä¸ºç©º</span>    <span class="token keyword">bool</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> m_queue<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//é˜Ÿåˆ—å·²æ»¡</span>    <span class="token keyword">bool</span> <span class="token function">isFull</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> m_queue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> m_maxSize<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//æ„é€ å‡½æ•°</span>    <span class="token function">DataTrans</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token operator">-&gt;</span>m_maxSize <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token comment">// è·å–å•å®ä¾‹å¯¹è±¡</span>    <span class="token keyword">static</span> DataTrans <span class="token operator">&amp;</span><span class="token function">Instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token comment">/**         * å±€éƒ¨é™æ€ç‰¹æ€§çš„æ–¹å¼å®ç°å•å®ä¾‹ã€‚         * é™æ€å±€éƒ¨å˜é‡åªåœ¨å½“å‰å‡½æ•°å†…æœ‰æ•ˆï¼Œå…¶ä»–å‡½æ•°æ— æ³•è®¿é—®ã€‚         * é™æ€å±€éƒ¨å˜é‡åªåœ¨ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨çš„æ—¶å€™åˆå§‹åŒ–ï¼Œä¹Ÿå­˜å‚¨åœ¨é™æ€å­˜å‚¨åŒºï¼Œç”Ÿå‘½å‘¨æœŸä»ç¬¬ä¸€æ¬¡è¢«åˆå§‹åŒ–èµ·è‡³ç¨‹åºç»“æŸæ­¢ã€‚         */</span>        <span class="token keyword">static</span> DataTrans instance<span class="token punctuation">;</span>        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">product</span><span class="token punctuation">(</span><span class="token keyword">const</span> T <span class="token operator">&amp;</span>v<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>unique_lock<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>mutex<span class="token operator">&gt;</span> <span class="token function">locker</span><span class="token punctuation">(</span>m_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">isFull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment">//ç”Ÿäº§è€…ç­‰å¾…"äº§å“é˜Ÿåˆ—ç¼“å†²åŒºä¸ä¸ºæ»¡"è¿™ä¸€æ¡ä»¶å‘ç”Ÿ.</span>            m_notFull<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span>m_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        m_queue<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>        locker<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        m_notEmpty<span class="token punctuation">.</span><span class="token function">notify_one</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">consumption</span><span class="token punctuation">(</span>T <span class="token operator">&amp;</span>v<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>unique_lock<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>mutex<span class="token operator">&gt;</span> <span class="token function">locker</span><span class="token punctuation">(</span>m_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token comment">// æ¶ˆè´¹è€…ç­‰å¾…"äº§å“é˜Ÿåˆ—ç¼“å†²åŒºä¸ä¸ºç©º"è¿™ä¸€æ¡ä»¶å‘ç”Ÿ.</span>            m_notEmpty<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span>m_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">//åœ¨é˜Ÿåˆ—é‡Œé¢æ¶ˆè´¹ä¸€ä¸ªå…ƒç´ ,åŒæ—¶é€šçŸ¥é˜Ÿåˆ—ä¸æ»¡è¿™ä¸ªä¿¡å·é‡</span>        v <span class="token operator">=</span> m_queue<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        m_queue<span class="token punctuation">.</span><span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        locker<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        m_notFull<span class="token punctuation">.</span><span class="token function">notify_one</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">//THREAD_TEST_DATATRANS_H</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨ä¸Šé¢è¿™ä¸ªç±»çš„ç®€å•ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;thread&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"DataTrans.h"</span></span><span class="token keyword">void</span> <span class="token function">function_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>this_thread<span class="token double-colon punctuation">::</span><span class="token function">sleep_for</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>chrono<span class="token double-colon punctuation">::</span><span class="token function">milliseconds</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Trans<span class="token punctuation">.</span><span class="token function">product</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"product:\t"</span> <span class="token operator">&lt;&lt;</span> count <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>        count<span class="token operator">--</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">function_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> data <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>data <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>this_thread<span class="token double-colon punctuation">::</span><span class="token function">sleep_for</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>chrono<span class="token double-colon punctuation">::</span><span class="token function">milliseconds</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Trans<span class="token punctuation">.</span><span class="token function">consumption</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> data <span class="token operator">&lt;&lt;</span> <span class="token string">"\tis consumed!"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    std<span class="token double-colon punctuation">::</span>thread <span class="token function">t1</span><span class="token punctuation">(</span>function_1<span class="token punctuation">)</span><span class="token punctuation">;</span>    std<span class="token double-colon punctuation">::</span>thread <span class="token function">t2</span><span class="token punctuation">(</span>function_2<span class="token punctuation">)</span><span class="token punctuation">;</span>    t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    t2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆä¸‰ï¼‰ï¼šå•ä¾‹æ¨¡å¼</title>
      <link href="2022/02/04/cpp-notes-5/"/>
      <url>2022/02/04/cpp-notes-5/</url>
      
        <content type="html"><![CDATA[<h1 id="C-å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆä¸‰ï¼‰ï¼šå•ä¾‹æ¨¡å¼"><a href="#C-å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆä¸‰ï¼‰ï¼šå•ä¾‹æ¨¡å¼" class="headerlink" title="C++ å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆä¸‰ï¼‰ï¼šå•ä¾‹æ¨¡å¼"></a>C++ å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆä¸‰ï¼‰ï¼šå•ä¾‹æ¨¡å¼</h1><h2 id="1-å•ä¾‹æ¨¡å¼ä»‹ç»"><a href="#1-å•ä¾‹æ¨¡å¼ä»‹ç»" class="headerlink" title="1. å•ä¾‹æ¨¡å¼ä»‹ç»"></a>1. å•ä¾‹æ¨¡å¼ä»‹ç»</h2><p>å•ä¾‹æ¨¡å¼(Singleton Pattern)æ˜¯è®¾è®¡æ¨¡å¼çš„ä¸€ç§ï¼Œå…¶ç‰¹ç‚¹æ˜¯åªæä¾›<strong>å”¯ä¸€</strong>ä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ï¼Œè¯¥å®ä¾‹è¢«æ‰€æœ‰ç¨‹åºæ¨¡å—å…±äº«ã€‚</p><p>å®šä¹‰ä¸€ä¸ªå•ä¾‹ç±»ï¼š</p><ol><li>ç§æœ‰åŒ–å®ƒçš„æ„é€ å‡½æ•°ï¼Œä»¥é˜²æ­¢å¤–ç•Œåˆ›å»ºå•ä¾‹ç±»çš„å¯¹è±¡ï¼›</li><li>ä½¿ç”¨ç±»çš„ç§æœ‰é™æ€æŒ‡é’ˆå˜é‡æŒ‡å‘ç±»çš„å”¯ä¸€å®ä¾‹ï¼›</li><li>ä½¿ç”¨ä¸€ä¸ªå…¬æœ‰çš„é™æ€æ–¹æ³•è·å–è¯¥å®ä¾‹ã€‚</li></ol><p>å…·ä½“è¿ç”¨åœºæ™¯ï¼š</p><ol><li>è®¾å¤‡ç®¡ç†å™¨ï¼Œç³»ç»Ÿä¸­å¯èƒ½æœ‰å¤šä¸ªè®¾å¤‡ï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªè®¾å¤‡ç®¡ç†å™¨ï¼Œç”¨äºç®¡ç†è®¾å¤‡é©±åŠ¨;</li><li>æ•°æ®æ± ï¼Œç”¨æ¥ç¼“å­˜æ•°æ®çš„æ•°æ®ç»“æ„ï¼Œéœ€è¦åœ¨ä¸€å¤„å†™ï¼Œå¤šå¤„è¯»å–æˆ–è€…å¤šå¤„å†™ï¼Œå¤šå¤„è¯»å–;</li></ol><h2 id="2-å•ä¾‹æ¨¡å¼çš„å®ç°"><a href="#2-å•ä¾‹æ¨¡å¼çš„å®ç°" class="headerlink" title="2. å•ä¾‹æ¨¡å¼çš„å®ç°"></a>2. å•ä¾‹æ¨¡å¼çš„å®ç°</h2><h3 id="2-1-æ‡’æ±‰å¼"><a href="#2-1-æ‡’æ±‰å¼" class="headerlink" title="2.1 æ‡’æ±‰å¼"></a>2.1 æ‡’æ±‰å¼</h3><p>æ‡’æ±‰å¼(Lazy-Initialization)çš„æ–¹æ³•æ˜¯ç›´åˆ°ä½¿ç”¨æ—¶æ‰å®ä¾‹åŒ–å¯¹è±¡ï¼Œä¹Ÿå°±è¯´ç›´åˆ°è°ƒç”¨get_instance() æ–¹æ³•çš„æ—¶å€™æ‰ new ä¸€ä¸ªå•ä¾‹çš„å¯¹è±¡ï¼Œ å¦‚æœä¸è¢«è°ƒç”¨å°±ä¸ä¼šå ç”¨å†…å­˜ã€‚</p><h4 id="2-1-1-æœ€åŸºç¡€çš„æ‡’æ±‰å¼"><a href="#2-1-1-æœ€åŸºç¡€çš„æ‡’æ±‰å¼" class="headerlink" title="2.1.1 æœ€åŸºç¡€çš„æ‡’æ±‰å¼"></a>2.1.1 æœ€åŸºç¡€çš„æ‡’æ±‰å¼</h4><p>è¿™æ˜¯æœ€åŸºç¡€æœ€ç®€å•çš„æ‡’æ±‰å¼ï¼Œå¤§å¤šæ•°äººå†™æ‡’æ±‰å¼çš„è¯å¯èƒ½å°±æ˜¯è¿™ç§å½¢å¼çš„ï¼Œæ¯•ç«Ÿå¦‚æœä¸åœ¨å¤šçº¿ç¨‹ä¸­ä½¿ç”¨çš„è¯è¿™é‡Œæ˜¯æ²¡æœ‰ä»»ä½•é—®é¢˜çš„ã€‚</p><p>ä¸è¿‡åœ¨å¤šçº¿ç¨‹å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œè¿™æ ·æ— æ³•ä¿è¯å®ä¾‹å”¯ä¸€ï¼Œç”šè‡³è¿™æ ·çš„åšæ³•æ˜¯å¤±æ•ˆçš„ã€‚</p><p>ä¸‹é¢æ˜¯æ‡’æ±‰å¼å®ç°å’Œå¤šçº¿ç¨‹ä¸­çš„æµ‹è¯•ä»£ç ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;thread&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;armadillo&gt;</span></span><span class="token keyword">class</span> <span class="token class-name">Single</span><span class="token punctuation">{</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token comment">// è·å–å•å®ä¾‹å¯¹è±¡</span>    <span class="token keyword">static</span> Single <span class="token operator">*</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>m_instance_ptr <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            m_instance_ptr <span class="token operator">=</span> <span class="token keyword">new</span> Single<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> m_instance_ptr<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// æ‰“å°å®ä¾‹åœ°å€</span>    <span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æˆ‘çš„å†…å­˜åœ°å€æ˜¯:"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token operator">~</span><span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ææ„å‡½æ•°"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// ç¦æ­¢å¤–éƒ¨æ‹·è´æ„é€ </span>    <span class="token function">Single</span><span class="token punctuation">(</span><span class="token keyword">const</span> Single <span class="token operator">&amp;</span>signal<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>    <span class="token comment">// ç¦æ­¢å¤–éƒ¨èµ‹å€¼æ“ä½œ</span>    <span class="token keyword">const</span> Single <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Single <span class="token operator">&amp;</span>signal<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span><span class="token keyword">private</span><span class="token operator">:</span>    <span class="token keyword">static</span> Single <span class="token operator">*</span>m_instance_ptr<span class="token punctuation">;</span>    <span class="token comment">// ç¦æ­¢å¤–éƒ¨æ„é€ </span>    <span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æ„é€ å‡½æ•°"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>Single <span class="token operator">*</span>Single<span class="token double-colon punctuation">::</span>m_instance_ptr <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//å‡è®¾åˆ›å»ºçº¿ç¨‹ä¹‹å‰æœ‰ä¸€äº›å…¶ä»–å·¥ä½œè¦åš</span>    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Single <span class="token operator">*</span>single <span class="token operator">=</span> <span class="token class-name">Single</span><span class="token double-colon punctuation">::</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    single<span class="token operator">-&gt;</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    std<span class="token double-colon punctuation">::</span>thread T<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>i<span class="token operator">:</span> T<span class="token punctuation">)</span>        i <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">thread</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//ä¸‹é¢ä¸¤ä¸ªå¾ªç¯äºŒé€‰ä¸€å³å¯ï¼</span>    <span class="token comment">//for (auto &amp;i: T)</span>    <span class="token comment">//    i.detach();</span>    <span class="token comment">//getchar();</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>i<span class="token operator">:</span> T<span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span><span class="token function">joinable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            i<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸€ä¸ªè¿è¡Œç»“æœæ˜¯ï¼š</p><pre class="line-numbers language-none"><code class="language-none">æ„é€ å‡½æ•°æ„é€ å‡½æ•°æˆ‘çš„å†…å­˜åœ°å€æ˜¯:æ„é€ å‡½æ•°0x7f6c14000b20æ„é€ å‡½æ•°æ„é€ å‡½æ•°æˆ‘çš„å†…å­˜åœ°å€æ˜¯:0x7f6c04000b20æ„é€ å‡½æ•°æˆ‘çš„å†…å­˜åœ°å€æ˜¯:0x7f6bfc000b20æ„é€ å‡½æ•°æ„é€ å‡½æ•°æˆ‘çš„å†…å­˜åœ°å€æ˜¯:æˆ‘çš„å†…å­˜åœ°å€æ˜¯:0x7f6c1c000b200x7f6c0c000b20æ„é€ å‡½æ•°æˆ‘çš„å†…å­˜åœ°å€æ˜¯:0x7f6bf8000b20æ„é€ å‡½æ•°æˆ‘çš„å†…å­˜åœ°å€æ˜¯:æˆ‘çš„å†…å­˜åœ°å€æ˜¯:0x7f6bec000b20æˆ‘çš„å†…å­˜åœ°å€æ˜¯:æˆ‘çš„å†…å­˜åœ°å€æ˜¯:0x7f6bf4000b200x7f6be4000b200x7f6be8000b20<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°è¿™é‡Œçš„å®ä¾‹å¹¶ä¸æ˜¯å”¯ä¸€çš„ï¼è¿™ç§æ–¹å¼ä¼šå¯¼è‡´ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li><p><strong>çº¿ç¨‹å®‰å…¨çš„é—®é¢˜</strong></p><p>å½“å¤šçº¿ç¨‹è·å–å•ä¾‹æ—¶æœ‰å¯èƒ½å¼•å‘ç«æ€æ¡ä»¶ï¼šç¬¬ä¸€ä¸ªçº¿ç¨‹åœ¨ifä¸­åˆ¤æ–­ <code>m_instance_ptr</code>æ˜¯ç©ºçš„ï¼Œäºæ˜¯å¼€å§‹å®ä¾‹åŒ–å•ä¾‹ï¼›åŒæ—¶ç¬¬2ä¸ªçº¿ç¨‹ä¹Ÿå°è¯•è·å–å•ä¾‹ï¼Œè¿™ä¸ªæ—¶å€™åˆ¤æ–­<code>m_instance_ptr</code>è¿˜æ˜¯ç©ºçš„ï¼Œäºæ˜¯ä¹Ÿå¼€å§‹å®ä¾‹åŒ–å•ä¾‹ï¼›è¿™æ ·å°±ä¼šå®ä¾‹åŒ–å‡ºä¸¤ä¸ªå¯¹è±¡ï¼Œè¿™å°±æ˜¯çº¿ç¨‹å®‰å…¨é—®é¢˜çš„ç”±æ¥ï¼›</p><p><strong>è§£å†³åŠæ³•</strong>ï¼šåŠ é”</p></li><li><p><strong>å†…å­˜æ³„æ¼</strong></p><p>æ³¨æ„åˆ°ç±»ä¸­åªè´Ÿè´£newå‡ºå¯¹è±¡ï¼Œå´æ²¡æœ‰è´Ÿè´£deleteå¯¹è±¡ï¼Œå› æ­¤åªæœ‰æ„é€ å‡½æ•°è¢«è°ƒç”¨ï¼Œææ„å‡½æ•°å´æ²¡æœ‰è¢«è°ƒç”¨ï¼Œå› æ­¤ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p><p><strong>è§£å†³åŠæ³•</strong>ï¼šä½¿ç”¨å…±äº«æŒ‡é’ˆ</p></li></ol><h4 id="2-1-2-çº¿ç¨‹å®‰å…¨ã€å†…å­˜å®‰å…¨çš„æ‡’æ±‰å¼"><a href="#2-1-2-çº¿ç¨‹å®‰å…¨ã€å†…å­˜å®‰å…¨çš„æ‡’æ±‰å¼" class="headerlink" title="2.1.2 çº¿ç¨‹å®‰å…¨ã€å†…å­˜å®‰å…¨çš„æ‡’æ±‰å¼"></a>2.1.2 çº¿ç¨‹å®‰å…¨ã€å†…å­˜å®‰å…¨çš„æ‡’æ±‰å¼</h4><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆã€é”æ¥ä¿è¯è¿™ä¸ªæ‡’æ±‰å¼æ˜¯çº¿ç¨‹å®‰å…¨ä¸”å†…å­˜å®‰å…¨çš„ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;thread&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;armadillo&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;memory&gt;</span> <span class="token comment">// shared_ptr</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mutex&gt;</span>  <span class="token comment">// mutex</span></span><span class="token keyword">class</span> <span class="token class-name">Single</span><span class="token punctuation">{</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">typedef</span> std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span>Single<span class="token operator">&gt;</span> Ptr<span class="token punctuation">;</span>    <span class="token comment">// è·å–å•å®ä¾‹å¯¹è±¡</span>    <span class="token keyword">static</span> Ptr <span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token comment">// "double checked lock"</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>m_instance_ptr <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            std<span class="token double-colon punctuation">::</span>lock_guard<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>mutex<span class="token operator">&gt;</span> <span class="token function">lk</span><span class="token punctuation">(</span>m_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>m_instance_ptr <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                m_instance_ptr <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">shared_ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>Single<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> Single<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> m_instance_ptr<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// æ‰“å°å®ä¾‹åœ°å€</span>    <span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æˆ‘çš„å†…å­˜åœ°å€æ˜¯:"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆçš„æ—¶å€™ä¸èƒ½å¤Ÿç¦æ­¢å¤–éƒ¨ææ„ï¼</span>    <span class="token operator">~</span><span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ææ„å‡½æ•°"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// ç¦æ­¢å¤–éƒ¨æ‹·è´æ„é€ </span>    <span class="token function">Single</span><span class="token punctuation">(</span><span class="token keyword">const</span> Single <span class="token operator">&amp;</span>signal<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>    <span class="token comment">// ç¦æ­¢å¤–éƒ¨èµ‹å€¼æ“ä½œ</span>    <span class="token keyword">const</span> Single <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Single <span class="token operator">&amp;</span>signal<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span><span class="token keyword">private</span><span class="token operator">:</span>    <span class="token keyword">static</span> Ptr m_instance_ptr<span class="token punctuation">;</span>    <span class="token keyword">static</span> std<span class="token double-colon punctuation">::</span>mutex m_mutex<span class="token punctuation">;</span>    <span class="token comment">// ç¦æ­¢å¤–éƒ¨æ„é€ </span>    <span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æ„é€ å‡½æ•°"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">// initialization static variables out of class</span>Single<span class="token operator">:</span><span class="token base-clause"><span class="token operator">:</span><span class="token class-name">Ptr</span> Single<span class="token double-colon punctuation">::</span><span class="token class-name">m_instance_ptr</span> <span class="token operator">=</span> <span class="token keyword">nullptr</span></span><span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span>mutex Single<span class="token double-colon punctuation">::</span>m_mutex<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//å‡è®¾å¼€å§‹å‰æœ‰å‡†å¤‡å·¥ä½œè¦è¿›è¡Œ</span>    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Single<span class="token double-colon punctuation">::</span>Ptr single <span class="token operator">=</span> <span class="token class-name">Single</span><span class="token double-colon punctuation">::</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    single<span class="token operator">-&gt;</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    std<span class="token double-colon punctuation">::</span>thread T<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>i<span class="token operator">:</span> T<span class="token punctuation">)</span>        i <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">thread</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//ä¸‹é¢ä¸¤ä¸ªå¾ªç¯äºŒé€‰ä¸€å³å¯ï¼</span>    <span class="token comment">//for (auto &amp;i: T)</span>    <span class="token comment">//    i.detach();</span>    <span class="token comment">//getchar();</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>i<span class="token operator">:</span> T<span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span><span class="token function">joinable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            i<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸€ä¸ªè¿è¡Œç»“æœæ˜¯ï¼š</p><pre class="line-numbers language-none"><code class="language-none">æ„é€ å‡½æ•°æˆ‘çš„å†…å­˜åœ°å€æ˜¯:0x7f08b4000b20æˆ‘çš„å†…å­˜åœ°å€æ˜¯:0x7f08b4000b20æˆ‘çš„å†…å­˜åœ°å€æ˜¯:0x7f08b4000b20æˆ‘çš„å†…å­˜åœ°å€æ˜¯:0x7f08b4000b20æˆ‘çš„å†…å­˜åœ°å€æ˜¯:0x7f08b4000b20æˆ‘çš„å†…å­˜åœ°å€æ˜¯:0x7f08b4000b20æˆ‘çš„å†…å­˜åœ°å€æ˜¯:0x7f08b4000b20æˆ‘çš„å†…å­˜åœ°å€æ˜¯:0x7f08b4000b20æˆ‘çš„å†…å­˜åœ°å€æ˜¯:0x7f08b4000b20æˆ‘çš„å†…å­˜åœ°å€æ˜¯:0x7f08b4000b20ææ„å‡½æ•°<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>shared_ptrå’Œmutexéƒ½æ˜¯C++11çš„æ ‡å‡†ï¼Œä»¥ä¸Šè¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ï¼š</p><ul><li><p>åŸºäºshared_ptrï¼Œç”¨äº†C++æ¯”è¾ƒå€¡å¯¼çš„ RAIIæ€æƒ³ï¼Œç”¨å¯¹è±¡ç®¡ç†èµ„æºã€‚</p><p>å½“shared_ptrææ„çš„æ—¶å€™ï¼Œnewå‡ºæ¥çš„å¯¹è±¡ä¹Ÿä¼šè¢«deleteæ‰ï¼Œä»¥æ­¤é¿å…å†…å­˜æ³„æ¼ã€‚</p></li><li><p>åŠ äº†é”ï¼Œä½¿ç”¨äº’æ–¥é‡æ¥è¾¾åˆ°çº¿ç¨‹å®‰å…¨ã€‚</p><p>è¿™é‡Œä½¿ç”¨äº†ä¸¤ä¸ªifåˆ¤æ–­è¯­å¥çš„æŠ€æœ¯ç§°ä¸º<strong>åŒæ£€é”</strong>ã€‚å¥½å¤„æ˜¯ï¼Œåªæœ‰åˆ¤æ–­æŒ‡é’ˆä¸ºç©ºçš„æ—¶å€™æ‰åŠ é”ï¼Œé¿å…æ¯æ¬¡è°ƒç”¨get_instanceçš„æ–¹æ³•éƒ½åŠ é”ï¼Œé”çš„å¼€é”€æ¯•ç«Ÿè¿˜æ˜¯æœ‰ç‚¹å¤§çš„ã€‚</p></li></ul><p>ä¸è¶³ä¹‹å¤„åœ¨äºï¼š</p><ul><li>ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆä¼šè¦æ±‚ç”¨æˆ·ä¹Ÿå¾—ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼Œéå¿…è¦ä¸åº”è¯¥æå‡ºè¿™ç§çº¦æŸ; </li><li>ä½¿ç”¨é”ä¹Ÿæœ‰å¼€é”€; </li><li>ä»£ç é‡ä¹Ÿå¢å¤šäº†ï¼Œå®ç°ä¸Šæˆ‘ä»¬å¸Œæœ›è¶Šç®€å•è¶Šå¥½ã€‚</li></ul><p>è¿˜æœ‰æ›´åŠ ä¸¥é‡çš„é—®é¢˜ï¼Œåœ¨æŸäº›å¹³å°ï¼ˆä¸ç¼–è¯‘å™¨å’ŒæŒ‡ä»¤é›†æ¶æ„æœ‰å…³ï¼‰ï¼ŒåŒæ£€é”ä¼šå¤±æ•ˆï¼å…·ä½“å¯ä»¥çœ‹<a href="http://www.drdobbs.com/cpp/c-and-the-perils-of-double-checked-locki/184405726">è¿™ç¯‡æ–‡ç« </a>ï¼Œè§£é‡Šäº†ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿè¿™æ ·çš„äº‹æƒ…ã€‚</p><p>å› æ­¤è¿™é‡Œè¿˜æœ‰ç¬¬ä¸‰ç§çš„åŸºäº Magic Staicçš„æ–¹æ³•è¾¾åˆ°çº¿ç¨‹å®‰å…¨</p><h4 id="2-1-3-magic-staticï¼ˆå±€éƒ¨é™æ€å˜é‡ï¼‰"><a href="#2-1-3-magic-staticï¼ˆå±€éƒ¨é™æ€å˜é‡ï¼‰" class="headerlink" title="2.1.3 magic staticï¼ˆå±€éƒ¨é™æ€å˜é‡ï¼‰"></a>2.1.3 magic staticï¼ˆå±€éƒ¨é™æ€å˜é‡ï¼‰</h4><p>è¿™ç§æ–¹æ³•åˆå«åš<a href="https://stackoverflow.com/questions/449436/singleton-instance-declared-as-static-variable-of-getinstance-method-is-it-thre/449823#449823">Meyersâ€™ Singleton</a>ï¼Œ æ˜¯ã€ŠEffective C++ã€‹ç³»åˆ—ä¹¦ç±çš„ä½œè€…Meyersæå‡ºçš„ã€‚æ‰€ç”¨åˆ°çš„ç‰¹æ€§æ˜¯åœ¨C++11æ ‡å‡†ä¸­çš„<a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2660.htm">Magic Static</a>ç‰¹æ€§ï¼š</p><blockquote><p>If control enters the declaration concurrently while the variable is being initialized, the concurrent execution shall wait for completion of the initialization.<br>å¦‚æœå½“å˜é‡åœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå¹¶å‘åŒæ—¶è¿›å…¥å£°æ˜è¯­å¥ï¼Œå¹¶å‘çº¿ç¨‹å°†ä¼šé˜»å¡ç­‰å¾…åˆå§‹åŒ–ç»“æŸã€‚</p></blockquote><p>è¿™æ ·ä¿è¯äº†å¹¶å‘çº¿ç¨‹åœ¨è·å–é™æ€å±€éƒ¨å˜é‡çš„æ—¶å€™ä¸€å®šæ˜¯åˆå§‹åŒ–è¿‡çš„ï¼Œæ‰€ä»¥å…·æœ‰çº¿ç¨‹å®‰å…¨æ€§ã€‚</p><p><a href="https://stackoverflow.com/questions/246564/what-is-the-lifetime-of-a-static-variable-in-a-c-function">C++é™æ€å˜é‡çš„ç”Ÿå­˜æœŸ</a> æ˜¯ä»å£°æ˜åˆ°ç¨‹åºç»“æŸï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§æ‡’æ±‰å¼ã€‚</p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;thread&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;armadillo&gt;</span></span><span class="token comment">//é™æ€å±€éƒ¨å˜é‡çš„æ‡’æ±‰å•ä¾‹ï¼ˆC++11çº¿ç¨‹å®‰å…¨ï¼‰</span><span class="token comment">///  å†…éƒ¨é™æ€å˜é‡çš„æ‡’æ±‰å®ç°</span><span class="token keyword">class</span> <span class="token class-name">Single</span><span class="token punctuation">{</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token comment">// è·å–å•å®ä¾‹å¯¹è±¡</span>    <span class="token keyword">static</span> Single <span class="token operator">&amp;</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token comment">/**         * å±€éƒ¨é™æ€ç‰¹æ€§çš„æ–¹å¼å®ç°å•å®ä¾‹ã€‚         * é™æ€å±€éƒ¨å˜é‡åªåœ¨å½“å‰å‡½æ•°å†…æœ‰æ•ˆï¼Œå…¶ä»–å‡½æ•°æ— æ³•è®¿é—®ã€‚         * é™æ€å±€éƒ¨å˜é‡åªåœ¨ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨çš„æ—¶å€™åˆå§‹åŒ–ï¼Œä¹Ÿå­˜å‚¨åœ¨é™æ€å­˜å‚¨åŒºï¼Œç”Ÿå‘½å‘¨æœŸä»ç¬¬ä¸€æ¬¡è¢«åˆå§‹åŒ–èµ·è‡³ç¨‹åºç»“æŸæ­¢ã€‚         */</span>        <span class="token keyword">static</span> Single signal<span class="token punctuation">;</span>        <span class="token keyword">return</span> signal<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// æ‰“å°å®ä¾‹åœ°å€</span>    <span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token operator">~</span><span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ææ„å‡½æ•°"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// ç¦æ­¢å¤–éƒ¨æ‹·è´æ„é€ </span>    <span class="token function">Single</span><span class="token punctuation">(</span><span class="token keyword">const</span> Single <span class="token operator">&amp;</span>signal<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>    <span class="token comment">// ç¦æ­¢å¤–éƒ¨èµ‹å€¼æ“ä½œ</span>    <span class="token keyword">const</span> Single <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Single <span class="token operator">&amp;</span>signal<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span><span class="token keyword">private</span><span class="token operator">:</span>    <span class="token comment">// ç¦æ­¢å¤–éƒ¨æ„é€ </span>    <span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æ„é€ å‡½æ•°"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//å‡è®¾å¼€å§‹å‰æœ‰å‡†å¤‡å·¥ä½œè¦è¿›è¡Œ</span>    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Single <span class="token operator">&amp;</span>single <span class="token operator">=</span> <span class="token class-name">Single</span><span class="token double-colon punctuation">::</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    single<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    std<span class="token double-colon punctuation">::</span>thread T<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>i<span class="token operator">:</span> T<span class="token punctuation">)</span>        i <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">thread</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//ä¸‹é¢ä¸¤ä¸ªå¾ªç¯äºŒé€‰ä¸€å³å¯ï¼</span>    <span class="token comment">//for (auto &amp;i: T)</span>    <span class="token comment">//    i.detach();</span>    <span class="token comment">//getchar();</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>i<span class="token operator">:</span> T<span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span><span class="token function">joinable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            i<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸€ä¸ªè¿è¡Œç»“æœæ˜¯ï¼š</p><pre class="line-numbers language-none"><code class="language-none">æ„é€ å‡½æ•°æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:0x55c6ee5541d00x55c6ee5541d0æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:0x55c6ee5541d0æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:0x55c6ee5541d094312890450384æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:0x55c6ee5541d0æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:0x55c6ee5541d00x55c6ee5541d0æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:0x55c6ee5541d0æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:0x55c6ee5541d0ææ„å‡½æ•°<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>è¿™æ˜¯æœ€æ¨èçš„ä¸€ç§å•ä¾‹å®ç°æ–¹å¼ï¼š</strong></p><ol><li>é€šè¿‡å±€éƒ¨é™æ€å˜é‡çš„ç‰¹æ€§ä¿è¯äº†çº¿ç¨‹å®‰å…¨ (C++11, GCC &gt; 4.3, VS2015æ”¯æŒè¯¥ç‰¹æ€§)ï¼›</li><li>ä¸éœ€è¦ä½¿ç”¨å…±äº«æŒ‡é’ˆï¼Œä»£ç ç®€æ´ï¼›</li><li>æ³¨æ„åœ¨ä½¿ç”¨çš„æ—¶å€™éœ€è¦å£°æ˜å•ä¾‹çš„å¼•ç”¨ <code>Single&amp;</code> æ‰èƒ½è·å–å¯¹è±¡ã€‚</li></ol><p>å¦å¤–ç½‘ä¸Šæœ‰äººçš„å®ç°è¿”å›æŒ‡é’ˆè€Œä¸æ˜¯è¿”å›å¼•ç”¨ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">static</span> Singleton<span class="token operator">*</span> <span class="token function">get_instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">static</span> Singleton instance<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token operator">&amp;</span>instance<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·åšå¹¶ä¸å¥½ï¼Œç†ç”±ä¸»è¦æ˜¯æ— æ³•é¿å…ç”¨æˆ·ä½¿ç”¨<code>delete instance</code>å¯¼è‡´å¯¹è±¡è¢«æå‰é”€æ¯ã€‚è¿˜æ˜¯å»ºè®®å¤§å®¶ä½¿ç”¨è¿”å›å¼•ç”¨çš„æ–¹å¼ã€‚</p><h3 id="2-2-é¥¿æ±‰å¼"><a href="#2-2-é¥¿æ±‰å¼" class="headerlink" title="2.2 é¥¿æ±‰å¼"></a>2.2 é¥¿æ±‰å¼</h3><p>é¥¿æ±‰å¼ï¼ˆEager Singletonï¼‰ï¼šæŒ‡å•ä¾‹å®ä¾‹åœ¨ç¨‹åºè¿è¡Œæ—¶è¢«ç«‹å³æ‰§è¡Œåˆå§‹åŒ–ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;thread&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;armadillo&gt;</span></span><span class="token keyword">class</span> <span class="token class-name">Single</span><span class="token punctuation">{</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token comment">// è·å–å•å®ä¾‹å¯¹è±¡</span>    <span class="token keyword">static</span> Single <span class="token operator">&amp;</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// æ‰“å°å®ä¾‹åœ°å€</span>    <span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:"</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token operator">~</span><span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ææ„å‡½æ•°"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// ç¦æ­¢å¤–éƒ¨æ‹·è´æ„é€ </span>    <span class="token function">Single</span><span class="token punctuation">(</span><span class="token keyword">const</span> Single <span class="token operator">&amp;</span>signal<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>    <span class="token comment">// ç¦æ­¢å¤–éƒ¨èµ‹å€¼æ“ä½œ</span>    <span class="token keyword">const</span> Single <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Single <span class="token operator">&amp;</span>signal<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span><span class="token keyword">private</span><span class="token operator">:</span>    <span class="token keyword">static</span> Single instance<span class="token punctuation">;</span>    <span class="token comment">// ç¦æ­¢å¤–éƒ¨æ„é€ </span>    <span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æ„é€ å‡½æ•°"</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">// initialize defaultly</span>Single Single<span class="token double-colon punctuation">::</span>instance<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//å‡è®¾å¼€å§‹å‰æœ‰å‡†å¤‡å·¥ä½œè¦è¿›è¡Œ</span>    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Single <span class="token operator">&amp;</span>single <span class="token operator">=</span> <span class="token class-name">Single</span><span class="token double-colon punctuation">::</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    single<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    std<span class="token double-colon punctuation">::</span>thread T<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>i<span class="token operator">:</span> T<span class="token punctuation">)</span>        i <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token function">thread</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//ä¸‹é¢ä¸¤ä¸ªå¾ªç¯äºŒé€‰ä¸€å³å¯ï¼</span>    <span class="token comment">//for (auto &amp;i: T)</span>    <span class="token comment">//    i.detach();</span>    <span class="token comment">//getchar();</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>i<span class="token operator">:</span> T<span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span><span class="token function">joinable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            i<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸€ä¸ªè¿è¡Œç»“æœæ˜¯ï¼š</p><pre class="line-numbers language-none"><code class="language-none">æ„é€ å‡½æ•°æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:0x55ee2cf391380x55ee2cf39138æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:0x55ee2cf39138æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:0x55ee2cf39138æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:0x55ee2cf39138æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:0x55ee2cf391380x55ee2cf39138æˆ‘çš„å®ä¾‹å†…å­˜åœ°å€æ˜¯:0x55ee2cf391380x55ee2cf391380x55ee2cf39138ææ„å‡½æ•°<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”±äºåœ¨mainå‡½æ•°ä¹‹å‰åˆå§‹åŒ–ï¼Œæ‰€ä»¥æ²¡æœ‰çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚ä½†æ˜¯æ½œåœ¨é—®é¢˜åœ¨äºno-local staticå¯¹è±¡ï¼ˆå‡½æ•°å¤–çš„staticå¯¹è±¡ï¼‰åœ¨ä¸åŒç¼–è¯‘å•å…ƒä¸­çš„åˆå§‹åŒ–é¡ºåºæ˜¯æœªå®šä¹‰çš„ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>static Singleton instance</code>å’Œ<code>static Singleton&amp; getInstance()</code>äºŒè€…çš„åˆå§‹åŒ–é¡ºåºä¸ç¡®å®šï¼Œå¦‚æœåœ¨åˆå§‹åŒ–å®Œæˆä¹‹å‰è°ƒç”¨<code>getInstance() </code>æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæœªå®šä¹‰çš„å®ä¾‹ã€‚</p><h2 id="3-ä½•æ—¶ä½¿ç”¨å•ä¾‹æ¨¡å¼"><a href="#3-ä½•æ—¶ä½¿ç”¨å•ä¾‹æ¨¡å¼" class="headerlink" title="3. ä½•æ—¶ä½¿ç”¨å•ä¾‹æ¨¡å¼"></a>3. ä½•æ—¶ä½¿ç”¨å•ä¾‹æ¨¡å¼</h2><blockquote><p>é€‰è‡ªstackoverflowä¸Šçš„é«˜åˆ†å›ç­”ï¼š<a href="https://stackoverflow.com/questions/86582/singleton-how-should-it-be-used">singleton-how-should-it-be-used</a></p></blockquote><p><strong>Use a Singleton if:</strong></p><ul><li>You need to have one and only one object of a type in system</li></ul><p><strong>Do not use a Singleton if:</strong></p><ul><li>You want to save memory</li><li>You want to try something new</li><li>You want to show off how much you know</li><li>Because everyone else is doing it (See <a href="http://en.wikipedia.org/wiki/Cargo_cult_programming">cargo cult programmer</a> in wikipedia)</li><li>In user interface widgets</li><li>It is supposed to be a cache</li><li>In strings</li><li>In Sessions</li><li>I can go all day long</li></ul><p><strong>How to create the best singleton:</strong></p><ul><li>The smaller, the better. I am a minimalist</li><li>Make sure it is thread safe</li><li>Make sure it is never null</li><li>Make sure it is created only once</li><li>Lazy or system initialization? Up to your requirements</li><li>Sometimes the OS or the JVM creates singletons for you (e.g. in Java every class definition is a singleton)</li><li>Provide a destructor or somehow figure out how to dispose resources</li><li>Use little memory</li></ul><h2 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h2><ul><li>Eager Singleton è™½ç„¶æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†å­˜åœ¨æ½œåœ¨é—®é¢˜ï¼›</li><li>Lazy Singletoné€šå¸¸éœ€è¦åŠ é”æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä½†å±€éƒ¨é™æ€å˜é‡ç‰ˆæœ¬åœ¨C++11åæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼›</li><li>å±€éƒ¨é™æ€å˜é‡ç‰ˆæœ¬ï¼ˆMeyers Singletonï¼‰æœ€ä¼˜é›…ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
            <tag> å•ä¾‹æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆå…«ï¼‰ï¼šåº”ç”¨CNNå’ŒRNNè§£å†³æ•°ç‹¬é—®é¢˜</title>
      <link href="2022/01/25/machine-learning-8/"/>
      <url>2022/01/25/machine-learning-8/</url>
      
        <content type="html"><![CDATA[<h1 id="æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆå…«ï¼‰ï¼šåº”ç”¨CNNå’ŒRNNè§£å†³æ•°ç‹¬é—®é¢˜"><a href="#æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆå…«ï¼‰ï¼šåº”ç”¨CNNå’ŒRNNè§£å†³æ•°ç‹¬é—®é¢˜" class="headerlink" title="æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆå…«ï¼‰ï¼šåº”ç”¨CNNå’ŒRNNè§£å†³æ•°ç‹¬é—®é¢˜"></a>æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆå…«ï¼‰ï¼šåº”ç”¨CNNå’ŒRNNè§£å†³æ•°ç‹¬é—®é¢˜</h1><blockquote><p>è¿™ç¯‡åšå®¢æ•´ç†äºæˆ‘é€‰ä¿®çš„ã€Šæœºå™¨å­¦ä¹ ã€‹è¯¾ç¨‹çš„å¤§ä½œä¸šã€‚</p></blockquote><h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>æ•°ç‹¬ï¼ˆshÃ¹ dÃº, Sudokuï¼‰æ˜¯æºè‡ª18ä¸–çºª<a href="https://baike.baidu.com/item/%E7%91%9E%E5%A3%AB/131482">ç‘å£«</a>çš„ä¸€ç§æ•°å­¦æ¸¸æˆã€‚æ˜¯ä¸€ç§è¿ç”¨çº¸ã€ç¬”è¿›è¡Œæ¼”ç®—çš„<a href="https://baike.baidu.com/item/%E9%80%BB%E8%BE%91%E6%B8%B8%E6%88%8F/12814189">é€»è¾‘æ¸¸æˆ</a>ã€‚ç©å®¶éœ€è¦æ ¹æ®9Ã—9ç›˜é¢ä¸Šçš„å·²çŸ¥æ•°å­—ï¼Œæ¨ç†å‡ºæ‰€æœ‰å‰©ä½™ç©ºæ ¼çš„æ•°å­—ï¼Œå¹¶æ»¡è¶³æ¯ä¸€è¡Œã€æ¯ä¸€åˆ—ã€æ¯ä¸€ä¸ªç²—çº¿å®«ï¼ˆ3*3ï¼‰å†…çš„æ•°å­—å‡å«1-9ï¼Œä¸é‡å¤ã€‚</p><p>æ•°ç‹¬ç›˜é¢æ˜¯ä¸ªä¹å®«ï¼Œæ¯ä¸€å®«åˆåˆ†ä¸ºä¹ä¸ªå°æ ¼ã€‚åœ¨è¿™å…«åä¸€æ ¼ä¸­ç»™å‡ºä¸€å®šçš„å·²çŸ¥æ•°å­—å’Œè§£é¢˜æ¡ä»¶ï¼Œåˆ©ç”¨é€»è¾‘å’Œæ¨ç†ï¼Œåœ¨å…¶ä»–çš„ç©ºæ ¼ä¸Šå¡«å…¥1-9çš„æ•°å­—ã€‚ä½¿1-9æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸€è¡Œã€æ¯ä¸€åˆ—å’Œæ¯ä¸€å®«ä¸­éƒ½åªå‡ºç°ä¸€æ¬¡ï¼Œæ‰€ä»¥åˆç§°â€œä¹å®«æ ¼â€ã€‚</p><h3 id="æ•°æ®"><a href="#æ•°æ®" class="headerlink" title="æ•°æ®"></a>æ•°æ®</h3><p>è¿™ä¸ªæ•°æ®é›†åŒ…å«äº†1ç™¾ä¸‡æ•°ç‹¬çš„æ•°æ®ï¼Œä½ å¯ä»¥åœ¨<a href="https://www.kaggle.com/bryanpark/sudoku">è¿™é‡Œ</a>æ‰¾åˆ°å®ƒã€‚</p><p>æ•°æ®é›†åŒ…å«2åˆ—ã€‚<code>quizzes</code>æ ç›®æ˜¯æœªè§£çš„æ¸¸æˆï¼Œ<code>solutions</code>æ ç›®å„è‡ªçš„å·²è§£æ¸¸æˆã€‚æ¯åœºæ¯”èµ›éƒ½ç”±81ä¸ªæ•°å­—ç»„æˆçš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚ä»¥ä¸‹æ˜¯ä»å­—ç¬¦ä¸²è½¬æ¢è€Œæ¥çš„9x9æ•°ç‹¬ã€‚æ•°å­—0ä»£è¡¨æœªè§£æ¸¸æˆä¸­çš„ç©ºç™½ä½ç½®ã€‚</p><p>ç¤ºä¾‹çš„æ•°æ®å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/images/machine-learning-8/sudoku_data.png"></p><p>æ•°æ®é›†åŒ…å«2åˆ—ã€‚<code>quizzes</code>æ ç›®æ˜¯æœªè§£çš„æ¸¸æˆï¼Œ<code>solutions</code>æ ç›®å„è‡ªçš„å·²è§£æ¸¸æˆã€‚æ¯åœºæ¯”èµ›éƒ½ç”±81ä¸ªæ•°å­—ç»„æˆçš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚ä»¥ä¸‹æ˜¯ä»å­—ç¬¦ä¸²è½¬æ¢è€Œæ¥çš„9x9æ•°ç‹¬ã€‚æ•°å­—0ä»£è¡¨æœªè§£æ¸¸æˆä¸­çš„ç©ºç™½ä½ç½®ã€‚</p><pre class="line-numbers language-none"><code class="language-none">[[0 0 4 3 0 0 2 0 9] [0 0 5 0 0 9 0 0 1] [0 7 0 0 6 0 0 4 3] [0 0 6 0 0 2 0 8 7] [1 9 0 0 0 7 4 0 0] [0 5 0 0 8 3 0 0 0] [6 0 0 0 0 0 1 0 5] [0 0 3 5 0 8 6 9 0] [0 4 2 9 1 0 3 0 0]]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ•´ä½“æ€è·¯"><a href="#æ•´ä½“æ€è·¯" class="headerlink" title="æ•´ä½“æ€è·¯"></a>æ•´ä½“æ€è·¯</h2><h3 id="åˆ†ææ•°ç‹¬é—®é¢˜å¹¶ç¡®å®šè§£å†³æ–¹æ¡ˆ"><a href="#åˆ†ææ•°ç‹¬é—®é¢˜å¹¶ç¡®å®šè§£å†³æ–¹æ¡ˆ" class="headerlink" title="åˆ†ææ•°ç‹¬é—®é¢˜å¹¶ç¡®å®šè§£å†³æ–¹æ¡ˆ"></a>åˆ†ææ•°ç‹¬é—®é¢˜å¹¶ç¡®å®šè§£å†³æ–¹æ¡ˆ</h3><p>æ•°ç‹¬ï¼ˆshÃ¹ dÃº, Sudokuï¼‰éœ€è¦æˆ‘ä»¬æ ¹æ®9Ã—9ç›˜é¢ä¸Šçš„å·²çŸ¥æ•°å­—ï¼Œæ¨ç†å‡ºæ‰€æœ‰å‰©ä½™ç©ºæ ¼çš„æ•°å­—ï¼Œå¹¶æ»¡è¶³æ¯ä¸€è¡Œã€æ¯ä¸€åˆ—ã€æ¯ä¸€ä¸ªç²—çº¿å®«ï¼ˆ3*3ï¼‰å†…çš„æ•°å­—å‡å«1-9ï¼Œä¸é‡å¤ã€‚</p><p>å› æ­¤ï¼Œæ•°ç‹¬æ˜¯å…·æœ‰ç©ºé—´ç‰¹å¾çš„ï¼Œå®ƒæœ‰ç‰¹æ®Šçš„æ•°å­—æ’åˆ—ï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°è¯•ä½¿ç”¨CNNæ¥æå–ç©ºé—´ç‰¹å¾ï¼Œè¿›è€Œé€šè¿‡CNNæ±‚è§£æ•°ç‹¬é—®é¢˜ã€‚</p><h3 id="æ€è€ƒè§£å†³æ•°ç‹¬é—®é¢˜çš„å…¶ä»–æ–¹æ¡ˆ"><a href="#æ€è€ƒè§£å†³æ•°ç‹¬é—®é¢˜çš„å…¶ä»–æ–¹æ¡ˆ" class="headerlink" title="æ€è€ƒè§£å†³æ•°ç‹¬é—®é¢˜çš„å…¶ä»–æ–¹æ¡ˆ"></a>æ€è€ƒè§£å†³æ•°ç‹¬é—®é¢˜çš„å…¶ä»–æ–¹æ¡ˆ</h3><p>ä½†æ˜¯ï¼Œåœ¨ç½‘ä¸ŠæŸ¥æ‰¾èµ„æ–™çš„æ—¶å€™ï¼Œæˆ‘äº†è§£åˆ°CNNè§£å†³æ•°ç‹¬é—®é¢˜çš„æ—¶å€™ï¼Œæ˜¯å°†æ•´ä¸ªæ•°ç‹¬ç›˜ä½œä¸ºè¾“å…¥ï¼Œä¸€æ¬¡æ­£å‘ä¼ æ’­å°±ç›´æ¥å¾—åˆ°å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œè¿™æ ·çš„è¯å°±å¿½è§†äº†ç›®æ ‡ä¹‹é—´å­˜åœ¨çš„å½’çº³åç½®ï¼Œä»¥åŠå®ƒä»¬æ˜¯ä»¥ä¸€è‡´çš„æ–¹å¼äº’ç›¸ä½œç”¨çš„ï¼Œæ‰€ä»¥åœ¨ä¸€äº›æƒ…å†µä¸‹CNNæ¨¡å‹å°±ä¼šå‡ºç°é—®é¢˜ã€‚</p><p>åŒæ—¶ï¼Œæœ‰ä¸€éƒ¨åˆ†æ–‡ç« å’Œè¯„è®ºè®¤ä¸ºä½¿ç”¨CNNæˆ–è€…NNè§£å†³æ•°ç‹¬æ˜¯å•çº¯çš„ç”¨éå¸¸å¤šçš„å‚æ•°å»è®°ä½æ•°ç‹¬çš„æ¯ä¸€ä¸ªç­”æ¡ˆï¼Œè™½ç„¶ä¸çŸ¥é“è¿™ä¸ªè§‚ç‚¹æ˜¯å¦æ­£ç¡®ï¼Œä½†æˆ‘è§‰å¾—å°±ç®—ç½‘ç»œçš„å‚æ•°ä¸å¤šï¼Œç”¨CNNè¿˜æ˜¯å¯ä»¥è§£å†³æ•°ç‹¬é—®é¢˜çš„ã€‚</p><p>CNNåšæ•°ç‹¬çš„æ—¶å€™æ˜¯ä¸€æ¬¡æ€§å¾—åˆ°å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œä½†æˆ‘ä»¬åšæ•°ç‹¬çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯ä¸€æ­¥ä¸€æ­¥è¿›è¡Œçš„ï¼šæˆ‘ä»¬æ¯æ¬¡å¡«å…¥ä¸€ä¸ªæ•°å­—ï¼Œç„¶åè§‚å¯Ÿè¿™ä¸ªæ•°å­—å¸¦æ¥çš„å½±å“ã€‚æ‰€ä»¥æ•°ç‹¬çš„è§£å†³å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç³»åˆ—äº’ç›¸ä¾èµ–çš„å…³ç³»æ¨ç†ä»»åŠ¡ã€‚</p><p>å› æ­¤å¯¹äºæ•°ç‹¬é—®é¢˜ï¼Œå¾ªç¯ç½‘ç»œçš„æ•ˆæœå¯èƒ½æ¯”å·ç§¯ç½‘ç»œè¦å¥½ã€‚æŒ‰ç…§ä¸Šé¢çš„åˆ†æï¼Œå¾ªç¯å…³ç³»ç½‘ç»œï¼ˆRRNï¼‰ä¼šæ¯”è¾ƒé€‚åˆæ•°ç‹¬é—®é¢˜ã€‚</p><h3 id="è§£å†³æ€è·¯"><a href="#è§£å†³æ€è·¯" class="headerlink" title="è§£å†³æ€è·¯"></a>è§£å†³æ€è·¯</h3><p>æ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œæˆ‘æ‰“ç®—è‡ªå·±å®ç°CNNç½‘ç»œè§£å†³æ•°ç‹¬é—®é¢˜ï¼ŒåŒæ—¶å‚è€ƒç½‘ä¸Šçš„èµ„æ–™å°è¯•ä¸€ä¸‹å…¶ä»–çš„æ–¹æ³•ï¼Œå†æŠŠè¿™äº›æ–¹æ³•è¿›è¡Œå¯¹æ¯”ã€‚</p><p>ç”±äºæ²¡æœ‰æ‰¾åˆ°RRNå¤„ç†æ•°ç‹¬é—®é¢˜çš„ç›¸å…³èµ„æ–™ï¼Œæ‰€ä»¥æˆ‘æ‰“ç®—å°è¯•ä¸€ä¸‹ç”¨RNNè§£å†³æ•°ç‹¬é—®é¢˜ï¼Œè¿™ä¸ªéƒ¨åˆ†ä¸»è¦æ˜¯å‚ç…§<a href="https://www.toutiao.com/i6640028992575373828/?tt_from=mobile_qq&amp;utm_campaign=client_share&amp;timestamp=1552006941&amp;app=news_article&amp;utm_source=mobile_qq&amp;iid=65267103732&amp;utm_medium=toutiao_ios&amp;group_id=6640028992575373828&amp;wid=1638801556273">PyTorchä¸­çš„æ•°ç‹¬RNN</a>ã€‚</p><h2 id="æ•°æ®å¤„ç†"><a href="#æ•°æ®å¤„ç†" class="headerlink" title="æ•°æ®å¤„ç†"></a>æ•°æ®å¤„ç†</h2><p>ä¸‹é¢æ˜¯æ•°æ®å¤„ç†çš„ç›¸å…³ä»£ç ã€‚</p><p>è¿™é‡Œæˆ‘åˆ©ç”¨pandasæ¥è¯»å–å’Œå¤„ç†æ•°æ®ï¼Œåˆ©ç”¨torch.utils.dataæ¥æ‰“åŒ…æ•°æ®ï¼Œè¿™æ ·å¤„ç†åé¢å°±å¯ä»¥ç”¨DataLoaderæ¥åŠ è½½æ•°æ®ï¼Œæ¯”è¾ƒæ–¹ä¾¿ã€‚</p><p>ç”±äºè¿™é‡Œæˆ‘éœ€è¦åŒæ—¶æ»¡è¶³CNNä¸RNNç½‘ç»œè¾“å…¥è¾“å‡ºçš„è¦æ±‚ï¼ˆå…¶å®å¯ä»¥æ”¹æˆåŒæ ·çš„ï¼Œä½†æ˜¯RNNéƒ¨åˆ†åªæ˜¯çœ‹çš„å·®ä¸å¤šæ‡‚äº†ï¼Œè¿˜ä¸å¤ªä¼šæ”¹ï¼Œæ”¹äº†å°±å‡ºé—®é¢˜ï¼‰ï¼Œæ‰€ä»¥æˆ‘è®¾ç½®äº†ä¸€ä¸ªone_hotå‚æ•°ï¼Œå¦‚æœæ˜¯RNNå°±ä½¿ç”¨one hotç¼–ç ï¼Œå¦‚æœæ˜¯CNNå°±ç›´æ¥ç¼–ç æˆä¸€ä¸ª9*9çš„çŸ©é˜µã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">as</span> data<span class="token keyword">import</span> torch<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">def</span> <span class="token function">create_sudoku_tensors</span><span class="token punctuation">(</span>input_data<span class="token punctuation">,</span> one_hot<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> train_split<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    åˆ†å‰²è®­ç»ƒé›†å’Œæµ‹è¯•é›†    :param input_data: å¾…åˆ†å‰²çš„æ•°æ®    :param one_hot: æ˜¯å¦ä½¿ç”¨one hotç¼–ç     :param train_split: åˆ†å‰²çš„æ¯”ä¾‹    :return: è®­ç»ƒé›†ï¼Œæµ‹è¯•é›†    """</span>    <span class="token comment"># æ•°æ®çš„é•¿åº¦</span>    data_size <span class="token operator">=</span> input_data<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token comment"># ç»™æ¯ä¸€ä¸ªæ•°ç‹¬é¢˜ä¿¡æ¯è¿›è¡Œç¼–ç </span>    <span class="token keyword">def</span> <span class="token function">one_hot_encode</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>        zeros <span class="token operator">=</span> torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>torch<span class="token punctuation">.</span><span class="token builtin">float</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> a <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">81</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            zeros<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">if</span> <span class="token builtin">int</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token number">0</span>        <span class="token keyword">return</span> zeros    <span class="token comment"># ç»™æ¯ä¸€ä¸ªæ•°ç‹¬é¢˜ä¿¡æ¯è¿›è¡Œç¼–ç </span>    <span class="token keyword">def</span> <span class="token function">encode</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span>        zeros <span class="token operator">=</span> torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>torch<span class="token punctuation">.</span><span class="token builtin">float</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> a <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> b <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                zeros<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>a <span class="token operator">*</span> <span class="token number">9</span> <span class="token operator">+</span> b<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>        <span class="token keyword">return</span> zeros    <span class="token comment"># å¾—åˆ°ç¼–ç å†…å®¹</span>    <span class="token keyword">if</span> one_hot<span class="token punctuation">:</span>        quizzes_t <span class="token operator">=</span> input_data<span class="token punctuation">.</span>quizzes<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>one_hot_encode<span class="token punctuation">)</span>        solutions_t <span class="token operator">=</span> input_data<span class="token punctuation">.</span>solutions<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>one_hot_encode<span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        quizzes_t <span class="token operator">=</span> input_data<span class="token punctuation">.</span>quizzes<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>encode<span class="token punctuation">)</span>        solutions_t <span class="token operator">=</span> input_data<span class="token punctuation">.</span>solutions<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>encode<span class="token punctuation">)</span>    <span class="token comment"># å°†ç¼–ç å¥½çš„å†…å®¹æ‹¼æ¥èµ·æ¥</span>    quizzes_t <span class="token operator">=</span> torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span>quizzes_t<span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    solutions_t <span class="token operator">=</span> torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span>solutions_t<span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># æŒ‰æ¯”ä¾‹è¿›è¡Œéšæœºåˆ†å‰²</span>    randperm <span class="token operator">=</span> torch<span class="token punctuation">.</span>randperm<span class="token punctuation">(</span>data_size<span class="token punctuation">)</span>    train <span class="token operator">=</span> randperm<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token builtin">int</span><span class="token punctuation">(</span>train_split <span class="token operator">*</span> data_size<span class="token punctuation">)</span><span class="token punctuation">]</span>    test <span class="token operator">=</span> randperm<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span>train_split <span class="token operator">*</span> data_size<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token comment"># æ‰“åŒ…è®­ç»ƒé›†å’Œæ ‡ç­¾</span>    <span class="token keyword">return</span> data<span class="token punctuation">.</span>TensorDataset<span class="token punctuation">(</span>quizzes_t<span class="token punctuation">[</span>train<span class="token punctuation">]</span><span class="token punctuation">,</span> solutions_t<span class="token punctuation">[</span>train<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> \           data<span class="token punctuation">.</span>TensorDataset<span class="token punctuation">(</span>quizzes_t<span class="token punctuation">[</span>test<span class="token punctuation">]</span><span class="token punctuation">,</span> solutions_t<span class="token punctuation">[</span>test<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">create_constraint_mask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    åˆ›å»ºä¸€ä¸ªmask    :return: mask    """</span>    constraint_mask <span class="token operator">=</span> torch<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>torch<span class="token punctuation">.</span><span class="token builtin">float</span><span class="token punctuation">)</span>    <span class="token comment"># row constraints</span>    <span class="token keyword">for</span> a <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">81</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        r <span class="token operator">=</span> <span class="token number">9</span> <span class="token operator">*</span> <span class="token punctuation">(</span>a <span class="token operator">//</span> <span class="token number">9</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> b <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            constraint_mask<span class="token punctuation">[</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> r <span class="token operator">+</span> b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>    <span class="token comment"># column constraints</span>    <span class="token keyword">for</span> a <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">81</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        c <span class="token operator">=</span> a <span class="token operator">%</span> <span class="token number">9</span>        <span class="token keyword">for</span> b <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            constraint_mask<span class="token punctuation">[</span>a<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> c <span class="token operator">+</span> <span class="token number">9</span> <span class="token operator">*</span> b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>    <span class="token comment"># box constraints</span>    <span class="token keyword">for</span> a <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">81</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        r <span class="token operator">=</span> a <span class="token operator">//</span> <span class="token number">9</span>        c <span class="token operator">=</span> a <span class="token operator">%</span> <span class="token number">9</span>        br <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token number">9</span> <span class="token operator">*</span> <span class="token punctuation">(</span>r <span class="token operator">//</span> <span class="token number">3</span><span class="token punctuation">)</span>        bc <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token punctuation">(</span>c <span class="token operator">//</span> <span class="token number">3</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> b <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            r <span class="token operator">=</span> b <span class="token operator">%</span> <span class="token number">3</span>            c <span class="token operator">=</span> <span class="token number">9</span> <span class="token operator">*</span> <span class="token punctuation">(</span>b <span class="token operator">//</span> <span class="token number">3</span><span class="token punctuation">)</span>            constraint_mask<span class="token punctuation">[</span>a<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> br <span class="token operator">+</span> bc <span class="token operator">+</span> r <span class="token operator">+</span> c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">return</span> constraint_mask<span class="token keyword">def</span> <span class="token function">load_dataset</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> one_hot<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> subsample<span class="token operator">=</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    åŠ è½½æ•°æ®é›†    :param filepath: æ•°æ®é›†æ–‡ä»¶    :param one_hot: æ˜¯å¦ä½¿ç”¨one hotç¼–ç     :param subsample: æ•°æ®é›†æ€»å…±çš„è¡Œæ•°    :return: è®­ç»ƒé›†ã€æµ‹è¯•é›†    """</span>    dataset <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token string">','</span><span class="token punctuation">)</span>    <span class="token comment"># è¿”å›éšæœº subsample è¡Œæ•°æ®</span>    my_sample <span class="token operator">=</span> dataset<span class="token punctuation">.</span>sample<span class="token punctuation">(</span>subsample<span class="token punctuation">)</span>    <span class="token comment"># åˆ†å‰²å‡ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†</span>    train_set<span class="token punctuation">,</span> test_set <span class="token operator">=</span> create_sudoku_tensors<span class="token punctuation">(</span>my_sample<span class="token punctuation">,</span> one_hot<span class="token punctuation">)</span>    <span class="token keyword">return</span> train_set<span class="token punctuation">,</span> test_set<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡ä¸‹é¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥æµ‹è¯•è¯»å–çš„æ•°æ®æ ¼å¼ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># TEST</span>train_set<span class="token punctuation">,</span> test_set <span class="token operator">=</span> load_dataset<span class="token punctuation">(</span><span class="token string">"./src/data/sudoku_test.csv"</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token keyword">for</span> train_quiz<span class="token punctuation">,</span> train_label <span class="token keyword">in</span> train_set<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>train_quiz<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>train_label<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>    <span class="token keyword">break</span>train_set<span class="token punctuation">,</span> test_set <span class="token operator">=</span> load_dataset<span class="token punctuation">(</span><span class="token string">"./src/data/sudoku_test.csv"</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token keyword">for</span> train_quiz<span class="token punctuation">,</span> train_label <span class="token keyword">in</span> train_set<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>train_quiz<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>train_label<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>    <span class="token keyword">break</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ­å»ºCNNæ¨¡å‹"><a href="#æ­å»ºCNNæ¨¡å‹" class="headerlink" title="æ­å»ºCNNæ¨¡å‹"></a>æ­å»ºCNNæ¨¡å‹</h2><p>è¿™é‡Œä¸»è¦æ˜¯æ ¹æ®report3ä½¿ç”¨çš„FashionCNNæ¥æ­å»ºçš„ï¼Œå¤§ä½“æ¡†æ¶åŸºæœ¬ä¸€æ ·ï¼Œä¸è¿‡å¢åŠ äº†paddingï¼Œå»é™¤äº†æ± åŒ–å±‚ï¼ŒåŒæ—¶ä¹Ÿæ”¾å¼ƒäº†dropoutå±‚ã€‚</p><p>è¿™ä¸ªç½‘ç»œæ¥æ”¶N*1*9*9çš„è¾“å…¥ï¼Œæœ€åä¼šè¾“å‡ºN*81*9çš„é¢„æµ‹ç»“æœã€‚</p><p>Næ˜¯æ•°æ®æ‰¹æ•°ï¼Œ81æ˜¯9*9çš„æ•°ç‹¬ç›˜é¢æ•°å­—åˆ—è¡¨ï¼Œ9æ˜¯å¯¹äºæŸä¸€ä¸ªç›˜é¢æ•°å­—ï¼Œå®ƒæ˜¯æ¯ä¸€ç§æ•°å­—çš„æ¦‚ç‡ã€‚ï¼ˆè¿™é‡Œæ•°å­—çš„å–å€¼èŒƒå›´æ˜¯0-8ï¼Œä½†æ˜¯ä»£è¡¨çš„æ˜¯æ•°å­—1-9ï¼Œè¿™æ˜¯å› ä¸ºå¦‚æœå–å€¼ä¸º1-9ï¼Œè€Œæ•°ç‹¬ä¸éœ€è¦å¡«0ï¼Œæ ‡ç­¾ä¸­ä¹Ÿæ²¡æœ‰0ï¼Œæ‰€ä»¥æ ‡ç­¾çš„å–å€¼èŒƒå›´è¿˜æ˜¯0-8ï¼Œè¿™æ ·å°±ç­‰äºæ˜¯æ ‡ç­¾å¯¹åº”ä¸ä¸Šï¼Œäº¤å‰ç†µæŸå¤±å‡½æ•°è¿˜æ˜¯ä¼šè¿è¡Œå¤±è´¥ï¼‰</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">as</span> nn<span class="token keyword">class</span> <span class="token class-name">SudokuCNN</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span>SudokuCNN<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># ç¬¬ä¸€å±‚å·ç§¯</span>        <span class="token comment"># è¾“å…¥[1,9,9]</span>        self<span class="token punctuation">.</span>layer1 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span>in_channels<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> out_channels<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> kernel_size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> padding<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>BatchNorm2d<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">)</span>        <span class="token comment"># 9-3+2*1+1</span>        <span class="token comment"># ç¬¬äºŒå±‚å·ç§¯</span>        <span class="token comment"># è¾“å…¥[64,9,9]</span>        self<span class="token punctuation">.</span>layer2 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span>in_channels<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> out_channels<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">,</span> kernel_size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> padding<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>BatchNorm2d<span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">)</span>        <span class="token comment"># ç¬¬ä¸‰å±‚å·ç§¯</span>        <span class="token comment"># è¾“å…¥[64ï¼Œ9ï¼Œ9]</span>        self<span class="token punctuation">.</span>layer3 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span>in_channels<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">,</span> out_channels<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">,</span> kernel_size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> padding<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>BatchNorm2d<span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token punctuation">)</span>        <span class="token comment"># å…¨è¿æ¥å±‚</span>        <span class="token comment"># è¾“å…¥[128, 9, 9]</span>        self<span class="token punctuation">.</span>fc1 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">128</span> <span class="token operator">*</span> <span class="token number">9</span> <span class="token operator">*</span> <span class="token number">9</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>fc2 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">81</span> <span class="token operator">*</span> <span class="token number">9</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>fc3 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Softmax<span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        out <span class="token operator">=</span> self<span class="token punctuation">.</span>layer1<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        out <span class="token operator">=</span> self<span class="token punctuation">.</span>layer2<span class="token punctuation">(</span>out<span class="token punctuation">)</span>        out <span class="token operator">=</span> self<span class="token punctuation">.</span>layer3<span class="token punctuation">(</span>out<span class="token punctuation">)</span>        <span class="token comment"># çŸ©é˜µå±•å¼€ä¸ºå‘é‡</span>        out <span class="token operator">=</span> out<span class="token punctuation">.</span>view<span class="token punctuation">(</span>out<span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        out <span class="token operator">=</span> self<span class="token punctuation">.</span>fc1<span class="token punctuation">(</span>out<span class="token punctuation">)</span>        out <span class="token operator">=</span> self<span class="token punctuation">.</span>fc2<span class="token punctuation">(</span>out<span class="token punctuation">)</span>        <span class="token comment"># å‘é‡å˜åŒ–ä¸ºçŸ©é˜µï¼ˆ81*9ï¼‰</span>        out <span class="token operator">=</span> out<span class="token punctuation">.</span>view<span class="token punctuation">(</span>out<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>        out <span class="token operator">=</span> self<span class="token punctuation">.</span>fc3<span class="token punctuation">(</span>out<span class="token punctuation">)</span>        <span class="token keyword">return</span> out<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è®­ç»ƒCNNæ¨¡å‹"><a href="#è®­ç»ƒCNNæ¨¡å‹" class="headerlink" title="è®­ç»ƒCNNæ¨¡å‹"></a>è®­ç»ƒCNNæ¨¡å‹</h2><p>ä¸‹é¢æ˜¯è®­ç»ƒCNNçš„ä»£ç ï¼Œé‡‡ç”¨çš„æ˜¯Adamä¼˜åŒ–å™¨å’ŒCrossEntropyLossæŸå¤±å‡½æ•°ã€‚</p><p>æµ‹è¯•çš„æ—¶å€™å‘ç°è¿™é‡Œçš„å­¦ä¹ ç‡è¦å–æ¯”è¾ƒå°ï¼Œå–å¤§äº†losså¯èƒ½å°±ä¸ä¸‹é™ï¼Œæˆ–è€…ä»…ä»…æ˜¯ä¸‹é™äº†ä¸€ç‚¹ç‚¹ï¼Œç„¶åå‘ç”Ÿéœ‡è¡ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> copy<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> torch<span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">as</span> nn<span class="token keyword">from</span> torch<span class="token punctuation">.</span>autograd <span class="token keyword">import</span> Variable<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> Dataset<span class="token comment"># å°è¯•ä½¿ç”¨GPU</span>device <span class="token operator">=</span> torch<span class="token punctuation">.</span>device<span class="token punctuation">(</span><span class="token string">"cuda:0"</span> <span class="token keyword">if</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token string">"cpu"</span><span class="token punctuation">)</span><span class="token comment"># åŠ è½½æ•°æ®é›†</span>batch_size <span class="token operator">=</span> <span class="token number">100</span>train_set<span class="token punctuation">,</span> test_set <span class="token operator">=</span> load_dataset<span class="token punctuation">(</span><span class="token string">"./src/data/sudoku.csv"</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token number">50000</span><span class="token punctuation">)</span>train_loader <span class="token operator">=</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data<span class="token punctuation">.</span>DataLoader<span class="token punctuation">(</span>train_set<span class="token punctuation">,</span> batch_size<span class="token operator">=</span>batch_size<span class="token punctuation">)</span>test_loader <span class="token operator">=</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data<span class="token punctuation">.</span>DataLoader<span class="token punctuation">(</span>test_set<span class="token punctuation">,</span> batch_size<span class="token operator">=</span>batch_size<span class="token punctuation">)</span><span class="token comment"># åŠ è½½æ¨¡å‹</span>model <span class="token operator">=</span> SudokuCNN<span class="token punctuation">(</span><span class="token punctuation">)</span>model<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token comment"># æŸå¤±å‡½æ•°</span>error <span class="token operator">=</span> nn<span class="token punctuation">.</span>CrossEntropyLoss<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># å®šä¹‰å­¦ä¹ ç‡</span>learning_rate <span class="token operator">=</span> <span class="token number">0.0005</span><span class="token comment"># å®šä¹‰ä¼˜åŒ–å™¨</span>optimizer <span class="token operator">=</span> torch<span class="token punctuation">.</span>optim<span class="token punctuation">.</span>Adam<span class="token punctuation">(</span>model<span class="token punctuation">.</span>parameters<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> lr<span class="token operator">=</span>learning_rate<span class="token punctuation">)</span><span class="token comment"># å¾ªç¯æ¬¡æ•°</span>num_epochs <span class="token operator">=</span> <span class="token number">50</span><span class="token comment"># è¿­ä»£æ¬¡æ•°</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token comment"># æ˜¯å¦ç”»å›¾</span>display <span class="token operator">=</span> <span class="token boolean">True</span><span class="token comment"># æœ€å°è¿­ä»£æ¬¡æ•°</span>min_epochs <span class="token operator">=</span> <span class="token number">5</span><span class="token comment"># æœ€å°çš„æŸå¤±</span>min_loss <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span><span class="token comment"># æœ€ä¼˜æ¨¡å‹</span>best_model <span class="token operator">=</span> <span class="token boolean">None</span><span class="token comment"># Lists for visualization of loss_function and accuracy</span>loss_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>iteration_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>accuracy_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">for</span> epoch <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>num_epochs<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># ã€€åˆ†æ‰¹æ¬¡åŠ è½½æ•°æ®é›†</span>    <span class="token keyword">for</span> train_quiz<span class="token punctuation">,</span> train_label <span class="token keyword">in</span> train_loader<span class="token punctuation">:</span>        train_quiz<span class="token punctuation">,</span> train_label <span class="token operator">=</span> train_quiz<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token punctuation">,</span> train_label<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>        train_quiz <span class="token operator">=</span> Variable<span class="token punctuation">(</span>train_quiz<span class="token punctuation">.</span>view<span class="token punctuation">(</span>train_quiz<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        train_label <span class="token operator">=</span> Variable<span class="token punctuation">(</span>train_label<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment"># Forward pass</span>        outputs <span class="token operator">=</span> model<span class="token punctuation">(</span>train_quiz<span class="token punctuation">)</span>        outputs <span class="token operator">=</span> outputs<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>        loss <span class="token operator">=</span> error<span class="token punctuation">(</span>outputs<span class="token punctuation">,</span> train_label<span class="token punctuation">.</span><span class="token builtin">long</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment"># Initializing a gradient as 0 so there is no mixing of gradient among the batches</span>        optimizer<span class="token punctuation">.</span>zero_grad<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># Propagating the error backward</span>        loss<span class="token punctuation">.</span>backward<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># Optimizing the parameters</span>        optimizer<span class="token punctuation">.</span>step<span class="token punctuation">(</span><span class="token punctuation">)</span>        count <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token comment"># print('Epoch: {}, Batch: {}, Avg. Loss: {}'.format(epoch, count, loss_function.item()))</span>        <span class="token comment"># Testing the model</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token punctuation">(</span>count <span class="token operator">%</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># It's same as "if count % 50 == 0"</span>            total <span class="token operator">=</span> <span class="token number">0</span>            correct <span class="token operator">=</span> <span class="token number">0</span>            <span class="token keyword">for</span> test_quiz<span class="token punctuation">,</span> test_label <span class="token keyword">in</span> test_loader<span class="token punctuation">:</span>                test_quiz<span class="token punctuation">,</span> test_label <span class="token operator">=</span> test_quiz<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token punctuation">,</span> test_label<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>                test_quiz <span class="token operator">=</span> Variable<span class="token punctuation">(</span>test_quiz<span class="token punctuation">.</span>view<span class="token punctuation">(</span>test_quiz<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                test_label <span class="token operator">=</span> Variable<span class="token punctuation">(</span>test_label<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                outputs <span class="token operator">=</span> model<span class="token punctuation">(</span>test_quiz<span class="token punctuation">)</span>                outputs <span class="token operator">=</span> outputs<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>                predictions <span class="token operator">=</span> torch<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>outputs<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>                correct <span class="token operator">+=</span> <span class="token punctuation">(</span>predictions <span class="token operator">==</span> test_label<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                total <span class="token operator">+=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>test_label<span class="token punctuation">)</span>            accuracy <span class="token operator">=</span> correct <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">/</span> total            loss_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>loss<span class="token punctuation">.</span>data<span class="token punctuation">)</span>            iteration_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>count<span class="token punctuation">)</span>            accuracy_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>accuracy<span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token punctuation">(</span>count <span class="token operator">%</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Iteration: {}, Loss: {}, Accuracy: {}%"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> loss<span class="token punctuation">.</span>data<span class="token punctuation">,</span> accuracy<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œè¾“å‡ºï¼š</p><pre class="line-numbers language-none"><code class="language-none">Iteration: 100, Loss: 2.154716968536377, Accuracy: 17.909875869750977%Iteration: 200, Loss: 2.1245620250701904, Accuracy: 22.032262802124023%Iteration: 300, Loss: 2.091231107711792, Accuracy: 26.08452606201172%Iteration: 400, Loss: 2.0490970611572266, Accuracy: 30.193002700805664%Iteration: 500, Loss: 2.010570764541626, Accuracy: 34.447654724121094%Iteration: 600, Loss: 1.973477840423584, Accuracy: 38.08658218383789%Iteration: 700, Loss: 1.9365869760513306, Accuracy: 41.5409049987793%Iteration: 800, Loss: 1.8946945667266846, Accuracy: 45.34855651855469%Iteration: 900, Loss: 1.8635038137435913, Accuracy: 48.742549896240234%.........................................Iteration: 17100, Loss: 1.4262917041778564, Accuracy: 71.87982940673828%Iteration: 17200, Loss: 1.4250632524490356, Accuracy: 71.79407501220703%Iteration: 17300, Loss: 1.423291802406311, Accuracy: 71.8446044921875%Iteration: 17400, Loss: 1.419376254081726, Accuracy: 71.94452667236328%Iteration: 17500, Loss: 1.4205855131149292, Accuracy: 71.94963073730469%<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å®ç°è¿‡ç¨‹ä¸­å‡ºç°çš„é—®é¢˜"><a href="#å®ç°è¿‡ç¨‹ä¸­å‡ºç°çš„é—®é¢˜" class="headerlink" title="å®ç°è¿‡ç¨‹ä¸­å‡ºç°çš„é—®é¢˜"></a>å®ç°è¿‡ç¨‹ä¸­å‡ºç°çš„é—®é¢˜</h3><p>å‰é¢å¤„ç†æ•°æ®å’Œå®šä¹‰æ¨¡å‹éƒ½æŒºé¡ºåˆ©çš„ï¼Œä½†æ˜¯è®­ç»ƒCNNæ¨¡å‹è¿™é‡Œå‡ºç°çš„é—®é¢˜ç‰¹åˆ«ç‰¹åˆ«å¤šï¼Œæ•´ä¸ªå®ç°è¿‡ç¨‹å¥½åƒä¹Ÿå°±è¿™éƒ¨åˆ†å‡ºäº†é—®é¢˜ï¼Œè€½è¯¯äº†æ¯”è¾ƒé•¿çš„æ—¶é—´ã€‚</p><p><strong>è¿™é‡Œä¸»è¦æ˜¯å› ä¸ºè‡ªå·±å¯¹äº¤å‰ç†µæŸå¤±å‡½æ•°çš„å…·ä½“å®ç°è¿‡ç¨‹ä¸å¤ªäº†è§£ï¼ŒåŒæ—¶å¯¹pytorchå¤„ç†tensorçš„ä¸€äº›å¸¸ç”¨æ‰‹æ³•ä¸å¤ªç†Ÿç»ƒã€‚</strong></p><p>ä¸€å¼€å§‹æˆ‘æ˜¯ç”¨one hotç¼–ç åœ¨è¿™é‡Œè®­ç»ƒå’Œæµ‹è¯•ï¼Œä½†æ˜¯äº¤å‰ç†µæŸå¤±å‡½æ•°å¹¶ä¸æ”¯æŒone hotç¼–ç ï¼Œå¹¶ä¸”å®ƒè¿˜ä¼šæŠ¥é”™ï¼ŒæŠ¥é”™å†…å®¹å¤§æ¦‚æ˜¯â€œmulti targetâ€ç›¸å…³çš„ï¼Œè¿™å¯¼è‡´æˆ‘ä¸€å¼€å§‹æ²¡æœ‰ç²¾å‡†çš„å®šä½é—®é¢˜æ‰€åœ¨ï¼Œç„¶åæˆ‘å°è¯•äº†å…¶ä»–çš„æŸå¤±å‡½æ•°ï¼Œæœ‰çš„å¯ä»¥ç”¨ä½†å¯èƒ½å› ä¸ºæˆ‘<strong>å½“æ—¶çš„æ•°æ®æ ¼å¼å¤„ç†æœ¬èº«æœ‰é—®é¢˜</strong>ï¼Œæœ€åçš„ç»“æœä¸æ”¶æ•›ã€‚æ‰€ä»¥åé¢æˆ‘ä¸“é—¨å»å­¦ä¹ äº†pytorchä¸­çš„æŸå¤±å‡½æ•°ï¼Œå¹¶ä¸”ä¹ŸçŸ¥é“äº†<strong>äº¤å‰ç†µæŸå¤±å‡½æ•°æ˜¯ä¸æ”¯æŒone hotç¼–ç çš„ã€‚</strong></p><p>ä¹‹åæˆ‘å°±ä¿®æ”¹äº†å¤„ç†æ•°æ®çš„ä»£ç ï¼Œè®©CNNå¾—åˆ°9*9çš„æ•°æ®ï¼Œè€ŒRNNç»§ç»­ä½¿ç”¨one hotç¼–ç ã€‚ä½†æ˜¯å› ä¸ºæˆ‘çš„ç½‘ç»œè®¡ç®—å‡ºæ¥çš„æ˜¯batch*81*9çš„ï¼Œå¹¶ä¸”æ ‡ç­¾ä¹Ÿæ˜¯batch*81çš„ï¼Œè¿™æ ·åœ¨CrossEntropyLosså‡½æ•°é‡Œé¢è¿˜æ˜¯ä¼šæŠ¥é”™ï¼ŒæŠ¥é”™å†…å®¹å¤§æ¦‚æ˜¯â€œæœŸæœ› batch*9 ä½†æ˜¯å¾—åˆ°äº† batch*81â€ã€‚ï¼ˆbatchæ˜¯æ•°æ®æ‰¹æ•°ï¼‰</p><p>è¿™é‡Œçš„æŠ¥é”™å…¶å®ä¹Ÿå¾ˆå¥‡æ€ªï¼Œä¸Šç½‘æŸ¥äº†æ¯”è¾ƒä¹…ä¹Ÿæ²¡è§£å†³è¿™ä¸ªé—®é¢˜ã€‚åé¢æˆ‘å¥½å¥½æƒ³äº†ä¸€ä¸‹ï¼Œ*<em><font color="red">è¿™ä¸ªæ•°ç‹¬é—®é¢˜å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç‰¹æ®Šçš„åˆ†ç±»é—®é¢˜ï¼Œæˆ‘ä»¬å¯¹æ¯ä¸€ä¸ªæ ¼å­è¿›è¡Œåˆ†ç±»ï¼Œåˆ¤æ–­å®ƒæ˜¯ä»€ä¹ˆæ•°å­—ç±»å‹ã€‚</font>**è¿™æ ·çš„è¯ï¼Œå°±å¾ˆè‡ªç„¶çš„æƒ³åˆ°è¦æŠŠé¢„æµ‹ç»“æœå’Œæ ‡ç­¾éƒ½å±•å¼€ï¼Œé¢„æµ‹ç»“æœå±•å¼€ä¸º[(batch\</em>81), 9]çš„äºŒç»´çŸ©é˜µï¼Œè€Œæ ‡ç­¾å°±å±•å¼€ä¸º[batch*81]çš„å‘é‡ã€‚</p><p>é€šè¿‡è¿™æ ·çš„å¤„ç†æ–¹å¼ï¼Œæˆ‘ç»ˆäºèƒ½å¤Ÿå¼€å§‹è®­ç»ƒè¿™ä¸ªCNNç½‘ç»œäº†ã€‚ï¼ˆä¸Šé¢æ‰¾é—®é¢˜æ‰¾äº†å››äº”å¤©ï¼Œä¸è¿‡è§£å†³å…¶å®å°±èŠ±äº†ä¸€ä¸ªä¸‹åˆï¼Œæ„Ÿè§‰å®šä½é—®é¢˜çš„ä½ç½®å¾ˆå…³é”®ï¼ï¼‰</p><h4 id="ä¸€ä¸ªæ ·ä¾‹"><a href="#ä¸€ä¸ªæ ·ä¾‹" class="headerlink" title="ä¸€ä¸ªæ ·ä¾‹"></a>ä¸€ä¸ªæ ·ä¾‹</h4><p>è¿™é‡Œæ˜¯ä¸€ä¸ªæ ·ä¾‹ä»£ç ï¼Œæˆ‘åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­çŠ¯çš„é”™è¯¯ç”¨æ¯”è¾ƒç®€å•çš„å½¢å¼ç»™å†ç°äº†å‡ºæ¥ã€‚</p><p>é¦–å…ˆå®šä¹‰å¥½å„ç§å˜é‡ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> torch<span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>functional <span class="token keyword">as</span> F<span class="token comment"># å‡è®¾è¿™æ˜¯ä¸€ä¸ª3åˆ†ç±»é—®é¢˜ï¼Œä¸€å…±æœ‰4ç»„æ ·æœ¬</span><span class="token comment"># ä¸‹é¢æ˜¯è¿™ä¸ªæ¨¡å‹çš„è¾“å‡º</span>pred_y <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.30722019</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.8358033</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1.24752918</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                   <span class="token punctuation">[</span><span class="token number">0.72186664</span><span class="token punctuation">,</span> <span class="token number">0.58657704</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.25026393</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                   <span class="token punctuation">[</span><span class="token number">0.16449865</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.44255082</span><span class="token punctuation">,</span> <span class="token number">0.68046693</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                   <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">0.52082402</span><span class="token punctuation">,</span> <span class="token number">1.71407838</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1.36618063</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>pred_y <span class="token operator">=</span> torch<span class="token punctuation">.</span>from_numpy<span class="token punctuation">(</span>pred_y<span class="token punctuation">)</span><span class="token comment"># çœŸå®çš„æ ‡ç­¾å¦‚ä¸‹æ‰€ç¤ºï¼Œå¾ˆæ˜æ˜¾è¿™é‡Œå°±æ˜¯one hotç¼–ç </span>true_y_one_hot <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                   <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                   <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                   <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>true_y_one_hot <span class="token operator">=</span> torch<span class="token punctuation">.</span>from_numpy<span class="token punctuation">(</span>true_y_one_hot<span class="token punctuation">)</span><span class="token comment"># è¿™æ˜¯é‡‡ç”¨æ™®é€šç¼–ç çš„æ ‡ç­¾</span><span class="token comment"># true_y_1æ˜¯æ­£ç¡®ç¼–ç çš„ï¼Œå¯¹äºæ•°ç‹¬é—®é¢˜ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™é‡Œçš„æ ‡ç­¾å®é™…ä¸Šä»£è¡¨1ï¼Œ2ï¼Œ2ï¼Œ3</span>true_y_1 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>true_y_1 <span class="token operator">=</span> torch<span class="token punctuation">.</span>from_numpy<span class="token punctuation">(</span>true_y_1<span class="token punctuation">)</span><span class="token comment"># true_y_2æ˜¯é”™è¯¯ç¼–ç çš„ï¼Œè¿™æœ€åä¼šå¯¼è‡´è¾“å‡ºç±»å‹å’Œæ ‡ç­¾å¯¹åº”ä¸ä¸Š</span>true_y_2 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>true_y_2 <span class="token operator">=</span> torch<span class="token punctuation">.</span>from_numpy<span class="token punctuation">(</span>true_y_2<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœä½¿ç”¨one hotç¼–ç ï¼Œè¿™æ ·çš„è¿è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">loss <span class="token operator">=</span> F<span class="token punctuation">.</span>cross_entropy<span class="token punctuation">(</span>pred_y<span class="token punctuation">,</span> true_y_one_hot<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>loss<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿è¡Œè¾“å‡ºï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">---------------------------------------------------------------------------RuntimeError                              Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token operator">&lt;</span>ipython-input-32-64c355d4eafe<span class="token operator">&gt;</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>----<span class="token operator">&gt;</span> <span class="token number">1</span> loss <span class="token operator">=</span> F.cross_entropy<span class="token punctuation">(</span>pred_y, true_y_one_hot<span class="token punctuation">)</span>      <span class="token number">2</span> print<span class="token punctuation">(</span>loss<span class="token punctuation">)</span>~/.local/lib/python3.6/site-packages/torch/nn/functional.py <span class="token keyword">in</span> cross_entropy<span class="token punctuation">(</span>input, target, weight, size_average, ignore_index, reduce, reduction<span class="token punctuation">)</span>   <span class="token number">2822</span>     <span class="token keyword">if</span> size_average is not None or reduce is not None:   <span class="token number">2823</span>         reduction <span class="token operator">=</span> _Reduction.legacy_get_string<span class="token punctuation">(</span>size_average, reduce<span class="token punctuation">)</span>-<span class="token operator">&gt;</span> <span class="token number">2824</span>     <span class="token builtin class-name">return</span> torch._C._nn.cross_entropy_loss<span class="token punctuation">(</span>input, target, weight, _Reduction.get_enum<span class="token punctuation">(</span>reduction<span class="token punctuation">)</span>, ignore_index<span class="token punctuation">)</span>   <span class="token number">2825</span>    <span class="token number">2826</span>    RuntimeError: 1D target tensor expected, multi-target not supported<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœç¼–ç ä¸æ­£ç¡®ï¼Œè¾“å‡ºç±»å‹å’Œæ ‡ç­¾ä¸å¯¹åº”ï¼Œå°±ä¼šå‘ç”Ÿä¸‹é¢è¿™æ ·çš„æƒ…å†µï¼ˆåœ¨æ•°ç‹¬é—®é¢˜é‡Œé¢å…¶å®è¿˜è¦å¤æ‚ä¸€ç‚¹ï¼‰ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">loss <span class="token operator">=</span> F<span class="token punctuation">.</span>cross_entropy<span class="token punctuation">(</span>pred_y<span class="token punctuation">,</span> true_y_2<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>loss<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿è¡Œè¾“å‡ºï¼š    </p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">---------------------------------------------------------------------------IndexError                                Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token operator">&lt;</span>ipython-input-33-a6c07789433b<span class="token operator">&gt;</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>----<span class="token operator">&gt;</span> <span class="token number">1</span> loss <span class="token operator">=</span> F.cross_entropy<span class="token punctuation">(</span>pred_y, true_y_2<span class="token punctuation">)</span>      <span class="token number">2</span> print<span class="token punctuation">(</span>loss<span class="token punctuation">)</span>~/.local/lib/python3.6/site-packages/torch/nn/functional.py <span class="token keyword">in</span> cross_entropy<span class="token punctuation">(</span>input, target, weight, size_average, ignore_index, reduce, reduction<span class="token punctuation">)</span>   <span class="token number">2822</span>     <span class="token keyword">if</span> size_average is not None or reduce is not None:   <span class="token number">2823</span>         reduction <span class="token operator">=</span> _Reduction.legacy_get_string<span class="token punctuation">(</span>size_average, reduce<span class="token punctuation">)</span>-<span class="token operator">&gt;</span> <span class="token number">2824</span>     <span class="token builtin class-name">return</span> torch._C._nn.cross_entropy_loss<span class="token punctuation">(</span>input, target, weight, _Reduction.get_enum<span class="token punctuation">(</span>reduction<span class="token punctuation">)</span>, ignore_index<span class="token punctuation">)</span>   <span class="token number">2825</span>    <span class="token number">2826</span> IndexError: Target <span class="token number">3</span> is out of bounds.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­£å¸¸è¿è¡Œçš„è¯ï¼Œæ˜¯ä¸‹é¢è¿™æ ·çš„æƒ…å†µï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">loss <span class="token operator">=</span> F<span class="token punctuation">.</span>cross_entropy<span class="token punctuation">(</span>pred_y<span class="token punctuation">,</span> true_y_1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>loss<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿è¡Œè¾“å‡ºï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">tensor<span class="token punctuation">(</span><span class="token number">1.5929</span>, <span class="token assign-left variable">dtype</span><span class="token operator">=</span>torch.float64<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="æµ‹è¯•CNNæ¨¡å‹"><a href="#æµ‹è¯•CNNæ¨¡å‹" class="headerlink" title="æµ‹è¯•CNNæ¨¡å‹"></a>æµ‹è¯•CNNæ¨¡å‹</h2><p>é€šè¿‡ä¸‹é¢çš„ä»£ç å¯ä»¥ç®€å•æµ‹è¯•è®­ç»ƒå¥½çš„CNNæ¨¡å‹ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">for</span> test_quiz<span class="token punctuation">,</span> test_label <span class="token keyword">in</span> test_loader<span class="token punctuation">:</span>    test_quiz<span class="token punctuation">,</span> test_label <span class="token operator">=</span> test_quiz<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token punctuation">,</span> test_label<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>    test_quiz <span class="token operator">=</span> Variable<span class="token punctuation">(</span>test_quiz<span class="token punctuation">.</span>view<span class="token punctuation">(</span>test_quiz<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    test_label <span class="token operator">=</span> Variable<span class="token punctuation">(</span>test_label<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    outputs <span class="token operator">=</span> model<span class="token punctuation">(</span>test_quiz<span class="token punctuation">)</span>    outputs <span class="token operator">=</span> outputs<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>    predictions <span class="token operator">=</span> torch<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>outputs<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>    correct <span class="token operator">+=</span> <span class="token punctuation">(</span>predictions <span class="token operator">==</span> test_label<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    total <span class="token operator">+=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>test_label<span class="token punctuation">)</span>accuracy <span class="token operator">=</span> correct <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">/</span> total<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Test Accuracy: {}%"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>accuracy<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œè¾“å‡ºï¼š</p><pre class="line-numbers language-none"><code class="language-none">Test Accuracy: 71.94963073730469%<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="ç»“æœå¯è§†åŒ–"><a href="#ç»“æœå¯è§†åŒ–" class="headerlink" title="ç»“æœå¯è§†åŒ–"></a>ç»“æœå¯è§†åŒ–</h2><p>æˆ‘ä»¬å¯ä»¥æŠŠè®­ç»ƒå’Œæµ‹è¯•è¿‡ç¨‹ä¸­çš„æŸå¤±ä¸å‡†ç¡®ç‡ç”»å‡ºæ¥ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ç”»å‡ºè¿­ä»£ä¸­çš„æŸå¤±</span>plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>iteration_list<span class="token punctuation">,</span> loss_list<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"No. of Iteration"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"Loss"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Iterations vs Loss"</span><span class="token punctuation">)</span><span class="token comment"># ç”»å‡ºè¿­ä»£ä¸­çš„å‡†ç¡®åº¦</span>plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>iteration_list<span class="token punctuation">,</span> accuracy_list<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"No. of Iteration"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"Accuracy"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Iterations vs Accuracy"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œè¾“å‡ºï¼š</p><p><img src="/images/machine-learning-8/output_28_0.png"></p><p><img src="/images/machine-learning-8/output_28_1.png"></p><h2 id="å°è¯•ä½¿ç”¨RNNæ¨¡å‹"><a href="#å°è¯•ä½¿ç”¨RNNæ¨¡å‹" class="headerlink" title="å°è¯•ä½¿ç”¨RNNæ¨¡å‹"></a>å°è¯•ä½¿ç”¨RNNæ¨¡å‹</h2><p>åœ¨ä¸€å¼€å§‹åšè¿™ä¸ªé¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘æŸ¥äº†å¾ˆå¤šå…³äºCNNè§£å†³æ•°ç‹¬é—®é¢˜çš„èµ„æ–™ï¼ŒæœŸé—´å¶ç„¶äº†è§£åˆ°æ•°ç‹¬ç”¨å¾ªç¯ç½‘ç»œåšçš„æ•ˆæœä¼šæ¯”è¾ƒå¥½ï¼ŒåŒæ—¶åˆæ‰¾åˆ°ä¸€ç¯‡<a href="https://www.toutiao.com/i6640028992575373828/?tt_from=mobile_qq&amp;utm_campaign=client_share&amp;timestamp=1552006941&amp;app=news_article&amp;utm_source=mobile_qq&amp;iid=65267103732&amp;utm_medium=toutiao_ios&amp;group_id=6640028992575373828&amp;wid=1638801556273">PyTorchä¸­çš„æ•°ç‹¬RNN</a>çš„æ–‡ç« ï¼Œæ‰€ä»¥æˆ‘æ‰“ç®—å°è¯•ä¸€ä¸‹RNNæ¨¡å‹åšæ•°ç‹¬é—®é¢˜ã€‚</p><p>åœ¨è¿™ä¸ªç¯èŠ‚ä¸­ï¼ŒRNNæ¨¡å‹æ˜¯ä»è¿™ç¯‡æ–‡ç« é‡Œé¢æ¬è¿è¿‡æ¥çš„ï¼Œè€Œè®­ç»ƒè¿‡ç¨‹æœ‰å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼Œä½†ä¸ºäº†å’ŒCNNè¿›è¡Œå¯¹æ¯”ä¹Ÿåšäº†ä¸å°‘ä¿®æ”¹ã€‚</p><h3 id="æ­å»ºRNNæ¨¡å‹"><a href="#æ­å»ºRNNæ¨¡å‹" class="headerlink" title="æ­å»ºRNNæ¨¡å‹"></a>æ­å»ºRNNæ¨¡å‹</h3><p>ä¸‹é¢æ˜¯æ­å»ºçš„RNNæ¨¡å‹ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">as</span> nn<span class="token keyword">class</span> <span class="token class-name">SudokuRNN</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> constraint_mask<span class="token punctuation">,</span> n<span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">,</span> hidden1<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span>SudokuRNN<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>constraint_mask <span class="token operator">=</span> constraint_mask<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n <span class="token operator">*</span> n<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> n <span class="token operator">*</span> n<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>n <span class="token operator">=</span> n        self<span class="token punctuation">.</span>hidden1 <span class="token operator">=</span> hidden1        <span class="token comment"># Feature vector is the 3 constraints</span>        self<span class="token punctuation">.</span>input_size <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">*</span> n        self<span class="token punctuation">.</span>l1 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>self<span class="token punctuation">.</span>input_size<span class="token punctuation">,</span>                            self<span class="token punctuation">.</span>hidden1<span class="token punctuation">,</span> bias<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>a1 <span class="token operator">=</span> nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>l2 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>self<span class="token punctuation">.</span>hidden1<span class="token punctuation">,</span>                            n<span class="token punctuation">,</span> bias<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>softmax <span class="token operator">=</span> nn<span class="token punctuation">.</span>Softmax<span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token comment"># x is a (batch, n^2, n) tensor</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        n <span class="token operator">=</span> self<span class="token punctuation">.</span>n        bts <span class="token operator">=</span> x<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>        c <span class="token operator">=</span> self<span class="token punctuation">.</span>constraint_mask        min_empty <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        x_pred <span class="token operator">=</span> x<span class="token punctuation">.</span>clone<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> a <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>min_empty<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># score empty numbers</span>            constraints <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>view<span class="token punctuation">(</span>bts<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> n <span class="token operator">*</span> n<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token operator">*</span> c<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>            <span class="token comment"># empty cells</span>            empty_mask <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>            f <span class="token operator">=</span> constraints<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span>bts<span class="token punctuation">,</span> n <span class="token operator">*</span> n<span class="token punctuation">,</span> <span class="token number">3</span> <span class="token operator">*</span> n<span class="token punctuation">)</span>            y_ <span class="token operator">=</span> self<span class="token punctuation">.</span>l2<span class="token punctuation">(</span>self<span class="token punctuation">.</span>a1<span class="token punctuation">(</span>self<span class="token punctuation">.</span>l1<span class="token punctuation">(</span>f<span class="token punctuation">[</span>empty_mask<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            s_ <span class="token operator">=</span> self<span class="token punctuation">.</span>softmax<span class="token punctuation">(</span>y_<span class="token punctuation">)</span>            <span class="token comment"># Score the rows</span>            x_pred<span class="token punctuation">[</span>empty_mask<span class="token punctuation">]</span> <span class="token operator">=</span> s_            s <span class="token operator">=</span> torch<span class="token punctuation">.</span>zeros_like<span class="token punctuation">(</span>x_pred<span class="token punctuation">)</span>            s<span class="token punctuation">[</span>empty_mask<span class="token punctuation">]</span> <span class="token operator">=</span> s_            <span class="token comment"># find most probable guess</span>            score<span class="token punctuation">,</span> score_pos <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>            mmax <span class="token operator">=</span> score<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>            <span class="token comment"># fill it in</span>            nz <span class="token operator">=</span> empty_mask<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>nonzero<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>            mmax_ <span class="token operator">=</span> mmax<span class="token punctuation">[</span>nz<span class="token punctuation">]</span>            ones <span class="token operator">=</span> torch<span class="token punctuation">.</span>ones<span class="token punctuation">(</span>nz<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            x<span class="token punctuation">.</span>index_put_<span class="token punctuation">(</span><span class="token punctuation">(</span>nz<span class="token punctuation">,</span> mmax_<span class="token punctuation">,</span> score_pos<span class="token punctuation">[</span>nz<span class="token punctuation">,</span> mmax_<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ones<span class="token punctuation">)</span>        <span class="token keyword">return</span> x_pred<span class="token punctuation">,</span> x<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è®­ç»ƒå¹¶æµ‹è¯•"><a href="#è®­ç»ƒå¹¶æµ‹è¯•" class="headerlink" title="è®­ç»ƒå¹¶æµ‹è¯•"></a>è®­ç»ƒå¹¶æµ‹è¯•</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> copy<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> torch<span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">as</span> nn<span class="token keyword">from</span> torch<span class="token punctuation">.</span>autograd <span class="token keyword">import</span> Variable<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> Dataset<span class="token comment"># FIXME è¿™é‡ŒRNNä¸èƒ½ä½¿ç”¨GPUï¼Œå°è¯•ç€ç”¨å°±ä¼šæŠ¥é”™ã€‚æ„Ÿè§‰æ˜¯å®šä¹‰æ¨¡å‹çš„æ—¶å€™å‡ºçš„é—®é¢˜ã€‚ã€‚ã€‚</span><span class="token comment"># device = torch.device("cuda:0" if torch.cuda.is_available() else "cpu")</span>device <span class="token operator">=</span> torch<span class="token punctuation">.</span>device<span class="token punctuation">(</span><span class="token string">"cpu"</span><span class="token punctuation">)</span><span class="token comment"># åŠ è½½æ•°æ®é›†</span>batch_size <span class="token operator">=</span> <span class="token number">100</span>train_set<span class="token punctuation">,</span> test_set <span class="token operator">=</span>load_dataset<span class="token punctuation">(</span><span class="token string">"./src/data/sudoku.csv"</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token comment"># train_set, test_set = load_dataset("./data/sudoku_test.csv", True, 1000)</span>train_loader <span class="token operator">=</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data<span class="token punctuation">.</span>DataLoader<span class="token punctuation">(</span>train_set<span class="token punctuation">,</span> batch_size<span class="token operator">=</span>batch_size<span class="token punctuation">)</span>test_loader <span class="token operator">=</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data<span class="token punctuation">.</span>DataLoader<span class="token punctuation">(</span>test_set<span class="token punctuation">,</span> batch_size<span class="token operator">=</span>batch_size<span class="token punctuation">)</span><span class="token comment"># åŠ è½½æ¨¡å‹</span>model <span class="token operator">=</span> SudokuRNN<span class="token punctuation">(</span>create_constraint_mask<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>model<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token comment"># æŸå¤±å‡½æ•°</span>loss_fun <span class="token operator">=</span> nn<span class="token punctuation">.</span>MSELoss<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># å®šä¹‰å­¦ä¹ ç‡</span>learning_rate <span class="token operator">=</span> <span class="token number">0.01</span><span class="token comment"># å®šä¹‰ä¼˜åŒ–å™¨</span>optimizer <span class="token operator">=</span> torch<span class="token punctuation">.</span>optim<span class="token punctuation">.</span>Adam<span class="token punctuation">(</span>model<span class="token punctuation">.</span>parameters<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> lr<span class="token operator">=</span>learning_rate<span class="token punctuation">,</span> weight_decay<span class="token operator">=</span><span class="token number">0.000</span><span class="token punctuation">)</span><span class="token comment"># å¾ªç¯æ¬¡æ•°ï¼ˆç”¨cpuè®­ç»ƒï¼Œä¸æ•¢å¼„å¤ªå¤§äº†ï¼Œè®­ç»ƒæ—¶é—´å¤ªé•¿ï¼‰</span>num_epochs <span class="token operator">=</span> <span class="token number">1</span><span class="token comment"># è¿­ä»£æ¬¡æ•°</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token comment"># æ˜¯å¦ç”»å›¾</span>display <span class="token operator">=</span> <span class="token boolean">True</span><span class="token comment"># æœ€å°è¿­ä»£æ¬¡æ•°</span>min_epochs <span class="token operator">=</span> <span class="token number">0</span><span class="token comment"># æœ€å°çš„æŸå¤±</span>min_loss <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span><span class="token string">'inf'</span><span class="token punctuation">)</span><span class="token comment"># æœ€ä¼˜æ¨¡å‹</span>best_model <span class="token operator">=</span> <span class="token boolean">None</span><span class="token comment"># Lists for visualization of loss_function and accuracy</span>loss_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>iteration_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>accuracy_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>accuracy <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">for</span> epoch <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>num_epochs<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># ã€€åˆ†æ‰¹æ¬¡åŠ è½½æ•°æ®é›†</span>    <span class="token keyword">for</span> train_quiz<span class="token punctuation">,</span> train_label <span class="token keyword">in</span> train_loader<span class="token punctuation">:</span>        train_quiz<span class="token punctuation">,</span> train_label <span class="token operator">=</span> train_quiz<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token punctuation">,</span> train_label<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>        train_quiz <span class="token operator">=</span> Variable<span class="token punctuation">(</span>train_quiz<span class="token punctuation">)</span>        train_label <span class="token operator">=</span> Variable<span class="token punctuation">(</span>train_label<span class="token punctuation">)</span>        model<span class="token punctuation">.</span>train<span class="token punctuation">(</span><span class="token punctuation">)</span>        optimizer<span class="token punctuation">.</span>zero_grad<span class="token punctuation">(</span><span class="token punctuation">)</span>        pred<span class="token punctuation">,</span> mat <span class="token operator">=</span> model<span class="token punctuation">(</span>train_quiz<span class="token punctuation">)</span>        loss <span class="token operator">=</span> loss_fun<span class="token punctuation">(</span>pred<span class="token punctuation">,</span> train_label<span class="token punctuation">)</span>        loss<span class="token punctuation">.</span>backward<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># Optimizing the parameters</span>        optimizer<span class="token punctuation">.</span>step<span class="token punctuation">(</span><span class="token punctuation">)</span>        count <span class="token operator">+=</span> <span class="token number">1</span>        model<span class="token punctuation">.</span><span class="token builtin">eval</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># Testing the model</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token punctuation">(</span>count <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># It's same as "if count % 50 == 0"</span>            total <span class="token operator">=</span> <span class="token number">0</span>            correct <span class="token operator">=</span> <span class="token number">0</span>            <span class="token keyword">for</span> test_quiz<span class="token punctuation">,</span> test_label <span class="token keyword">in</span> test_loader<span class="token punctuation">:</span>                test_quiz<span class="token punctuation">,</span> test_label <span class="token operator">=</span> test_quiz<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token punctuation">,</span> test_label<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>                test_quiz <span class="token operator">=</span> Variable<span class="token punctuation">(</span>test_quiz<span class="token punctuation">)</span>                test_label <span class="token operator">=</span> Variable<span class="token punctuation">(</span>test_label<span class="token punctuation">)</span>                test_pred<span class="token punctuation">,</span> test_fill <span class="token operator">=</span> model<span class="token punctuation">(</span>test_quiz<span class="token punctuation">)</span>                correct <span class="token operator">+=</span> <span class="token punctuation">(</span>test_fill<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> test_label<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span>                total <span class="token operator">+=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>test_label<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">81</span>            accuracy <span class="token operator">=</span> correct <span class="token operator">/</span> total            loss_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>loss<span class="token punctuation">.</span>data<span class="token punctuation">)</span>            iteration_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>count<span class="token punctuation">)</span>            accuracy_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>accuracy<span class="token punctuation">)</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"ACC: "</span><span class="token punctuation">,</span> accuracy<span class="token punctuation">)</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"error in cells: "</span><span class="token punctuation">,</span> total <span class="token operator">-</span> correct<span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token punctuation">(</span>count <span class="token operator">%</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Iteration: {}, Loss: {}, Accuracy: {}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> loss<span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> accuracy<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œè¾“å‡ºï¼š</p><pre class="line-numbers language-none"><code class="language-none">ACC:  0.6399711934156379error in cells:  87487ACC:  0.7732098765432098error in cells:  55110Iteration: 5, Loss: 0.05192449316382408, Accuracy: 0.7732098765432098ACC:  0.820440329218107error in cells:  43633ACC:  0.837559670781893error in cells:  39473....................................................................ACC:  0.9995720164609053error in cells:  104Iteration: 65, Loss: 0.0002745767415035516, Accuracy: 0.9995720164609053ACC:  0.9996378600823045error in cells:  88ACC:  0.9998024691358025error in cells:  48ACC:  0.9998106995884773error in cells:  46Iteration: 70, Loss: 0.00030164315830916166, Accuracy: 0.9998106995884773<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç»“æœå¯è§†åŒ–-1"><a href="#ç»“æœå¯è§†åŒ–-1" class="headerlink" title="ç»“æœå¯è§†åŒ–"></a>ç»“æœå¯è§†åŒ–</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ç”»å‡ºè¿­ä»£ä¸­çš„æŸå¤±</span>plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>iteration_list<span class="token punctuation">,</span> loss_list<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"No. of Iteration"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"Loss"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Iterations vs Loss"</span><span class="token punctuation">)</span><span class="token comment"># ç”»å‡ºè¿­ä»£ä¸­çš„å‡†ç¡®åº¦</span>plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>iteration_list<span class="token punctuation">,</span> accuracy_list<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"No. of Iteration"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"Accuracy"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Iterations vs Accuracy"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/images/machine-learning-8/output_37_0.png"></p><p><img src="/images/machine-learning-8/output_37_1.png"></p><h2 id="å¯¹æ¯”CNNä¸RNN"><a href="#å¯¹æ¯”CNNä¸RNN" class="headerlink" title="å¯¹æ¯”CNNä¸RNN"></a>å¯¹æ¯”CNNä¸RNN</h2><h3 id="å¯¹CNNæ¨¡å‹è¿›è¡Œæµ‹è¯•"><a href="#å¯¹CNNæ¨¡å‹è¿›è¡Œæµ‹è¯•" class="headerlink" title="å¯¹CNNæ¨¡å‹è¿›è¡Œæµ‹è¯•"></a>å¯¹CNNæ¨¡å‹è¿›è¡Œæµ‹è¯•</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">import</span> time<span class="token keyword">from</span> torch<span class="token punctuation">.</span>autograd <span class="token keyword">import</span> Variable<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> Dataset<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"===================å¯¹CNNæ¨¡å‹è¿›è¡Œæµ‹è¯•==================="</span><span class="token punctuation">)</span>model_path<span class="token operator">=</span><span class="token string">"./src/SudokuCNN_model_1.40394.pth"</span>test_size<span class="token operator">=</span><span class="token number">10000</span><span class="token comment"># ä¸ºå…¬å¹³èµ·è§ï¼ŒCNNä¹Ÿæ˜¯ç”¨cpu</span>device <span class="token operator">=</span> torch<span class="token punctuation">.</span>device<span class="token punctuation">(</span><span class="token string">"cpu"</span><span class="token punctuation">)</span><span class="token comment"># åŠ è½½æ•°æ®é›†</span>batch_size <span class="token operator">=</span> <span class="token number">100</span><span class="token comment"># è¿™é‡Œå› ä¸ºæ˜¯æµ‹è¯•ï¼Œæ‰€ä»¥å°±å–åˆ†å‰²æ•°æ®ä¸­çš„è®­ç»ƒé›†éƒ¨åˆ†åšæµ‹è¯•äº†(ä¸æ˜¯è®­ç»ƒæ¨¡å‹çš„è®­ç»ƒé›†ï¼)</span>test_set<span class="token punctuation">,</span> _ <span class="token operator">=</span> load_dataset<span class="token punctuation">(</span><span class="token string">"./src/data/sudoku.csv"</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">,</span> test_size<span class="token punctuation">)</span>test_loader <span class="token operator">=</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data<span class="token punctuation">.</span>DataLoader<span class="token punctuation">(</span>test_set<span class="token punctuation">,</span> batch_size<span class="token operator">=</span>batch_size<span class="token punctuation">)</span><span class="token comment"># åŠ è½½æ¨¡å‹</span>model <span class="token operator">=</span> SudokuCNN<span class="token punctuation">(</span><span class="token punctuation">)</span>model<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>model<span class="token punctuation">.</span>load_state_dict<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>load<span class="token punctuation">(</span>model_path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Testing the model</span>total <span class="token operator">=</span> <span class="token number">0</span>correct <span class="token operator">=</span> <span class="token number">0</span><span class="token comment"># å¼€å§‹è®¡æ—¶</span>start <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> test_quiz<span class="token punctuation">,</span> test_label <span class="token keyword">in</span> test_loader<span class="token punctuation">:</span>    test_quiz<span class="token punctuation">,</span> test_label <span class="token operator">=</span> test_quiz<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token punctuation">,</span> test_label<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>    test_quiz <span class="token operator">=</span> Variable<span class="token punctuation">(</span>test_quiz<span class="token punctuation">.</span>view<span class="token punctuation">(</span>test_quiz<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    test_label <span class="token operator">=</span> Variable<span class="token punctuation">(</span>test_label<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    outputs <span class="token operator">=</span> model<span class="token punctuation">(</span>test_quiz<span class="token punctuation">)</span>    outputs <span class="token operator">=</span> outputs<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>    predictions <span class="token operator">=</span> torch<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>outputs<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>    correct <span class="token operator">+=</span> <span class="token punctuation">(</span>predictions <span class="token operator">==</span> test_label<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    total <span class="token operator">+=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>test_label<span class="token punctuation">)</span><span class="token comment"># ç»“æŸè®¡æ—¶</span>end <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    accuracy <span class="token operator">=</span> correct <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">/</span> total<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"SudokuCNN accuracy: {}%"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>accuracy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"SudokuCNN cells in error: {}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>total <span class="token operator">-</span> correct<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"SudokuCNN time = %s"</span> <span class="token operator">%</span> <span class="token builtin">str</span><span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"===================================================="</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œè¾“å‡ºï¼š</p><pre class="line-numbers language-none"><code class="language-none">===================å¯¹CNNæ¨¡å‹è¿›è¡Œæµ‹è¯•===================SudokuCNN accuracy: 75.1141128540039%SudokuCNN cells in error: 141103SudokuCNN time = 8.729239000000003====================================================<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¯¹RNNæ¨¡å‹è¿›è¡Œæµ‹è¯•"><a href="#å¯¹RNNæ¨¡å‹è¿›è¡Œæµ‹è¯•" class="headerlink" title="å¯¹RNNæ¨¡å‹è¿›è¡Œæµ‹è¯•"></a>å¯¹RNNæ¨¡å‹è¿›è¡Œæµ‹è¯•</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"===================å¯¹RNNæ¨¡å‹è¿›è¡Œæµ‹è¯•==================="</span><span class="token punctuation">)</span>model_path<span class="token operator">=</span><span class="token string">"./src/SudokuRNN_model_0.00001.pth"</span>test_size<span class="token operator">=</span><span class="token number">10000</span><span class="token comment"># å°è¯•ä½¿ç”¨GPU</span><span class="token comment"># device = torch.device("cuda:0" if torch.cuda.is_available() else "cpu")</span>device <span class="token operator">=</span> torch<span class="token punctuation">.</span>device<span class="token punctuation">(</span><span class="token string">"cpu"</span><span class="token punctuation">)</span><span class="token comment"># åŠ è½½æ•°æ®é›†</span>batch_size <span class="token operator">=</span> <span class="token number">100</span><span class="token comment"># è¿™é‡Œå› ä¸ºæ˜¯æµ‹è¯•ï¼Œæ‰€ä»¥å°±å–åˆ†å‰²æ•°æ®ä¸­çš„è®­ç»ƒé›†éƒ¨åˆ†åšæµ‹è¯•äº†(ä¸æ˜¯è®­ç»ƒæ¨¡å‹çš„è®­ç»ƒé›†ï¼)</span>test_set<span class="token punctuation">,</span> _ <span class="token operator">=</span> load_dataset<span class="token punctuation">(</span><span class="token string">"./src/data/sudoku.csv"</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> test_size<span class="token punctuation">)</span>test_loader <span class="token operator">=</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data<span class="token punctuation">.</span>DataLoader<span class="token punctuation">(</span>test_set<span class="token punctuation">,</span> batch_size<span class="token operator">=</span>batch_size<span class="token punctuation">)</span><span class="token comment"># åŠ è½½æ¨¡å‹</span>model <span class="token operator">=</span> SudokuRNN<span class="token punctuation">(</span>create_constraint_mask<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>model<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>model<span class="token punctuation">.</span>load_state_dict<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>load<span class="token punctuation">(</span>model_path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Testing the model</span>total <span class="token operator">=</span> <span class="token number">0</span>correct <span class="token operator">=</span> <span class="token number">0</span><span class="token comment"># å¼€å§‹è®¡æ—¶</span>start <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">for</span> test_quiz<span class="token punctuation">,</span> test_label <span class="token keyword">in</span> test_loader<span class="token punctuation">:</span>    test_quiz<span class="token punctuation">,</span> test_label <span class="token operator">=</span> test_quiz<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token punctuation">,</span> test_label<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>    test_quiz <span class="token operator">=</span> Variable<span class="token punctuation">(</span>test_quiz<span class="token punctuation">)</span>    test_label <span class="token operator">=</span> Variable<span class="token punctuation">(</span>test_label<span class="token punctuation">)</span>    test_pred<span class="token punctuation">,</span> test_fill <span class="token operator">=</span> model<span class="token punctuation">(</span>test_quiz<span class="token punctuation">)</span>    correct <span class="token operator">+=</span> <span class="token punctuation">(</span>test_fill<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> test_label<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>dim<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span>    total <span class="token operator">+=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>test_label<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">81</span><span class="token comment"># ç»“æŸè®¡æ—¶</span>end <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>accuracy <span class="token operator">=</span> correct <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">/</span> total<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"SudokuRNN accuracy: {}%"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>accuracy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"SudokuRNN cells in error: {}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>total <span class="token operator">-</span> correct<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"SudokuRNN time = %s"</span> <span class="token operator">%</span> <span class="token builtin">str</span><span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"===================================================="</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œè¾“å‡ºï¼š</p><pre class="line-numbers language-none"><code class="language-none">===================å¯¹RNNæ¨¡å‹è¿›è¡Œæµ‹è¯•===================SudokuRNN accuracy: 99.96490299823633%SudokuRNN cells in error: 199SudokuRNN time = 337.7354459999997====================================================<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ¯”è¾ƒåˆ†æ"><a href="#æ¯”è¾ƒåˆ†æ" class="headerlink" title="æ¯”è¾ƒåˆ†æ"></a>æ¯”è¾ƒåˆ†æ</h3><p>ä»ä¸Šé¢çš„ç»“æœæˆ‘ä»¬å‘ç°:</p><ul><li><p>RNNçš„å‡†ç¡®ç‡è¿œè¿œè¶…è¿‡CNNï¼ŒRNNè¾¾åˆ°äº†99.6%çš„å‡†ç¡®ç‡ï¼Œè€ŒCNNåªæœ‰75%çš„å‡†ç¡®ç‡ã€‚</p></li><li><p>RNNçš„é”™è¯¯å•å…ƒæ ¼æ•°ç›®ä¹Ÿè¿œæ¯”CNNå°‘ï¼Œåè€…çš„é”™è¯¯æ•°æ˜¯å‰è€…çš„100å€ã€‚</p></li><li><p>ä½†æ˜¯RNNè§£å†³æ•°ç‹¬é—®é¢˜èŠ±è´¹çš„æ—¶é—´æ¯”CNNå¤šå¾—å¤šã€‚</p></li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æˆ‘è§‰å¾—æ•°ç‹¬é—®é¢˜å’Œä¹‹å‰çš„æœè£…åˆ†ç±»é—®é¢˜æ˜¯ç›¸é€šçš„ï¼š</p><ul><li><p>æœè£…åˆ†ç±»é—®é¢˜æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„å¤šåˆ†ç±»é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å¯¹10ç§æœè£…è¿›è¡Œåˆ†ç±»ï¼›</p></li><li><p>è€Œæ•°ç‹¬é—®é¢˜å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¤šåˆ†ç±»é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è¯´æ˜¯å¯¹æ¯ä¸€ä¸ªå•å…ƒæ ¼è¿›è¡Œåˆ†ç±»ï¼Œæœ€åé€šè¿‡è¿™äº›å•å…ƒæ ¼çš„åˆ†ç±»ç»“æœï¼Œå¾—åˆ°æ•°ç‹¬çš„è§£å†³æ–¹æ¡ˆã€‚</p></li></ul><p><strong>å…³äºå·ç§¯ç¥ç»ç½‘ç»œè§£å†³æ•°ç‹¬é—®é¢˜æ˜¯ä¸æ˜¯é€šè¿‡å¤§é‡çš„å‚æ•°è®°å¿†ç­”æ¡ˆï¼š</strong></p><p>æˆ‘åœ¨ç½‘ä¸ŠæŸ¥é˜…èµ„æ–™çš„æ—¶å€™ï¼Œæœ‰ä¸€éƒ¨åˆ†æ–‡ç« å’Œè¯„è®ºè®¤ä¸ºä½¿ç”¨CNNæˆ–è€…NNè§£å†³æ•°ç‹¬æ˜¯å•çº¯çš„ç”¨éå¸¸å¤šçš„å‚æ•°å»è®°ä½æ•°ç‹¬çš„æ¯ä¸€ä¸ªç­”æ¡ˆï¼Œè¿™ä¸ªè§‚ç‚¹æˆ‘ä¸çŸ¥é“æ˜¯å¦æ­£ç¡®ï¼Œä½†æ˜¯æˆ‘å¯¹è¿™ä¸ªçœ‹æ³•äº§ç”Ÿäº†æ¯”è¾ƒå¤§çš„å…´è¶£ï¼Œæ‰€ä»¥æˆ‘åé¢æœ‰å°è¯•ä¿®æ”¹æˆ‘è®¾è®¡çš„å·ç§¯ç½‘ç»œçš„å‚æ•°ï¼Œæ¯”å¦‚æŠŠå·ç§¯å±‚èŠ‚ç‚¹è°ƒæ•´ä¸º256æˆ–è€…512ï¼Œå†æŠŠå…¨è¿æ¥å±‚çš„èŠ‚ç‚¹å¢åŠ 1000åˆ°2000ä¸ªï¼Œå†å¯¹ç½‘ç»œè¿›è¡Œè®­ç»ƒå’Œæµ‹è¯•ã€‚</p><p>ä¸è¿‡åœ¨æˆ‘çš„æµ‹è¯•ä¸­ï¼Œæˆ‘å‘ç°æ— è®ºæˆ‘æ€ä¹ˆæ”¹å‚æ•°ï¼ˆæ”¹å¤ªå¤§ä¼šæç¤ºæˆ‘GPUæ˜¾å­˜ä¸å¤Ÿï¼‰ï¼Œè¿™ä¸ªç½‘ç»œçš„å‡†ç¡®ç‡æœ€åéƒ½æ˜¯75%å·¦å³ï¼Œå¹¶ä¸”åé¢æ¢¯åº¦ä¸‹é™çš„ç‰¹åˆ«æ…¢ã€‚æ‰€ä»¥æˆ‘è§‰å¾—å¯èƒ½å·ç§¯ç¥ç»ç½‘ç»œæ˜¯é€šè¿‡ç©ºé—´ç‰¹å¾æå–ï¼Œå­¦ä¹ åˆ°äº†è§£å†³æ•°ç‹¬é—®é¢˜çš„å‡½æ•°ï¼Œè€Œä¸æ˜¯ä»…ä»…é€šè¿‡å¤§é‡çš„å‚æ•°æ¥è®°å¿†æ•°ç‹¬çš„ç­”æ¡ˆã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> CNN </tag>
            
            <tag> RNN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆä¸ƒï¼‰ï¼šä½¿ç”¨CNNè§£å†³æœè£…åˆ†ç±»é—®é¢˜</title>
      <link href="2022/01/21/machine-learning-7/"/>
      <url>2022/01/21/machine-learning-7/</url>
      
        <content type="html"><![CDATA[<h1 id="æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆä¸ƒï¼‰ï¼šä½¿ç”¨CNNè§£å†³æœè£…åˆ†ç±»é—®é¢˜"><a href="#æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆä¸ƒï¼‰ï¼šä½¿ç”¨CNNè§£å†³æœè£…åˆ†ç±»é—®é¢˜" class="headerlink" title="æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆä¸ƒï¼‰ï¼šä½¿ç”¨CNNè§£å†³æœè£…åˆ†ç±»é—®é¢˜"></a>æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆä¸ƒï¼‰ï¼šä½¿ç”¨CNNè§£å†³æœè£…åˆ†ç±»é—®é¢˜</h1><blockquote><p>è¿™ç¯‡åšå®¢æ•´ç†äºæˆ‘é€‰ä¿®çš„ã€Šæœºå™¨å­¦ä¹ ã€‹è¯¾ç¨‹çš„å¤§ä½œä¸šã€‚</p></blockquote><h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><ul><li><p>ä»»åŠ¡ç±»å‹ï¼šå¤šåˆ†ç±»</p></li><li><p>èƒŒæ™¯ä»‹ç»ï¼šFashionMNIST æ˜¯ä¸€ä¸ªæ›¿ä»£ <a href="http://yann.lecun.com/exdb/mnist/">MNIST æ‰‹å†™æ•°å­—é›†</a>çš„å›¾åƒæ•°æ®é›†ã€‚ å®ƒæ˜¯ç”± Zalandoï¼ˆä¸€å®¶å¾·å›½çš„æ—¶å°šç§‘æŠ€å…¬å¸ï¼‰æ——ä¸‹çš„ç ”ç©¶éƒ¨é—¨æä¾›ã€‚å…¶æ¶µç›–äº†æ¥è‡ª 10 ç§ç±»åˆ«çš„å…± 7 ä¸‡ä¸ªä¸åŒå•†å“çš„æ­£é¢å›¾ç‰‡ã€‚</p><p>FashionMNIST çš„å¤§å°ã€æ ¼å¼å’Œè®­ç»ƒé›†/æµ‹è¯•é›†åˆ’åˆ†ä¸åŸå§‹çš„ MNIST å®Œå…¨ä¸€è‡´ã€‚60000/10000 çš„è®­ç»ƒæµ‹è¯•æ•°æ®åˆ’åˆ†ï¼Œ28x28 çš„ç°åº¦å›¾ç‰‡ã€‚ä½ å¯ä»¥ç›´æ¥ç”¨å®ƒæ¥æµ‹è¯•ä½ çš„æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ ç®—æ³•æ€§èƒ½ï¼Œä¸”ä¸éœ€è¦æ”¹åŠ¨ä»»ä½•çš„ä»£ç ã€‚</p></li><li><p>è¿™ä¸ªæ•°æ®é›†çš„æ ·å­å¤§è‡´å¦‚ä¸‹ï¼ˆæ¯ä¸ªç±»åˆ«å ä¸‰è¡Œï¼‰ï¼š</p><img src="/images/machine-learning-7/fashion-mnist.jpg" style="zoom: 67%;"></li></ul><h2 id="æ•´ä½“æ€è·¯"><a href="#æ•´ä½“æ€è·¯" class="headerlink" title="æ•´ä½“æ€è·¯"></a>æ•´ä½“æ€è·¯</h2><h3 id="é€‰æ‹©ç½‘ç»œæ¨¡å‹"><a href="#é€‰æ‹©ç½‘ç»œæ¨¡å‹" class="headerlink" title="é€‰æ‹©ç½‘ç»œæ¨¡å‹"></a>é€‰æ‹©ç½‘ç»œæ¨¡å‹</h3><p>è¿™ä¸ªä»»åŠ¡çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ª<strong>å›¾åƒå¤šåˆ†ç±»é—®é¢˜</strong>ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç»™å‡ºçš„å›¾åƒè¿›è¡Œå¤šåˆ†ç±»ï¼Œå¹¶ä¸”å¯¹ä¸æ”¯æŒç±»åˆ«è¿›è¡Œåˆ¤æ–­ã€‚</p><p>è€ƒè™‘åˆ°åœ¨å›¾åƒé¢†åŸŸï¼Œç”¨ä¼ ç»Ÿçš„ç¥ç»ç½‘ç»œå¹¶ä¸åˆé€‚ï¼Œå› ä¸ºå›¾åƒæ˜¯ç”±ä¸€ä¸ªä¸ªåƒç´ ç‚¹æ„æˆï¼Œå¯¹äºç°åº¦å›¾ï¼Œæ¯ä¸ªåƒç´ ç‚¹æœ‰ä¸€ä¸ªé€šé“ï¼Œè€Œå¯¹äºå½©è‰²å›¾ï¼Œæ¯ä¸ªåƒç´ ç‚¹æœ‰ä¸‰ä¸ªé€šé“ï¼Œåˆ†åˆ«ä»£è¡¨RGBé¢œè‰²ï¼Œè¿™æ ·çš„è¯ä¸€å¼ å›¾ç‰‡ä¸­åŒ…å«çš„ä¿¡æ¯ä¼šéå¸¸å¤šã€‚</p><p>ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾ä¸€ä¸ªå›¾åƒçš„å°ºå¯¸æ˜¯ï¼ˆ1ï¼Œ28ï¼Œ28ï¼‰ï¼Œå³ä»£è¡¨è¿™ä¸ªå›¾åƒçš„æ˜¯ä¸€ä¸ªé€šé“ä¸º1ï¼Œé•¿å®½å‡ä¸º28çš„å›¾åƒï¼ˆæ­¤å¤„1ä»£è¡¨ç°è‰²å›¾åƒï¼‰ã€‚å¦‚æœä½¿ç”¨å…¨è¿æ¥çš„ç½‘ç»œç»“æ„ï¼Œå³ç½‘ç»œä¸­çš„ç¥ç»ä¸ä¸ç›¸é‚»å±‚ä¸Šçš„æ¯ä¸ªç¥ç»å…ƒå‡è¿æ¥ï¼Œé‚£å°±æ„å‘³ç€æˆ‘ä»¬çš„ç½‘ç»œè¾“å…¥å±‚æœ‰28 * 28 =784ä¸ªç¥ç»å…ƒï¼Œå†å‡è®¾hiddenå±‚é‡‡ç”¨äº†15ä¸ªç¥ç»å…ƒï¼Œè€Œæœ€åçš„è¾“å‡ºå±‚ä½¿ç”¨10ä¸ªç¥ç»å…ƒã€‚é‚£ä¹ˆç®€å•è®¡ç®—ä¸€ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦çš„å‚æ•°ä¸ªæ•°(wå’Œb)å°±æœ‰ï¼š784<em>15</em>10+15+10=117625ä¸ªï¼ˆ15å’Œ10æ˜¯ä¸€å±‚ä¸­çš„åç½®é¡¹ï¼‰ï¼Œè¿™ä¸ªå‚æ•°å¤ªå¤šäº†ï¼Œéšä¾¿è¿›è¡Œä¸€æ¬¡åå‘ä¼ æ’­è®¡ç®—é‡éƒ½æ˜¯å·¨å¤§çš„ï¼Œä»è®¡ç®—èµ„æºå’Œè°ƒå‚çš„è§’åº¦éƒ½ä¸å»ºè®®ç”¨ä¼ ç»Ÿçš„ç¥ç»ç½‘ç»œã€‚</p><p>è€Œå¯¹äºå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ï¼Œå·ç§¯å±‚å¯ä»¥å¾ˆå¥½çš„åˆ©ç”¨å›¾åƒæœ¬èº«å…·æœ‰çš„äºŒç»´ç©ºé—´ç‰¹å¾ï¼Œæ¯”å…¨è¿æ¥ç½‘ç»œä»…ä»…è€ƒè™‘å•ä¸ªåƒç´ ç‚¹çš„æ•ˆæœä¼šæ›´å¥½ï¼ŒåŒæ—¶ä½¿ç”¨å·ç§¯æ ¸åå›¾ç‰‡çš„å°ºå¯¸å˜å°ï¼Œæ–¹ä¾¿åç»­è®¡ç®—ï¼›è€Œæ± åŒ–å±‚é€šè¿‡é™é‡‡æ ·çš„æ–¹å¼ï¼Œåœ¨ä¸å½±å“å›¾åƒè´¨é‡çš„æƒ…å†µä¸‹ï¼Œå‹ç¼©å›¾ç‰‡ï¼Œå‡å°‘å‚æ•°ï¼Œè¿™æ ·è®¡ç®—é‡ä¹Ÿä¼šæ¯”å…¨è¿æ¥ç½‘ç»œå°å¾ˆå¤šã€‚</p><p>å› æ­¤ï¼Œè¿™ä¸ªä»»åŠ¡ä¸­æˆ‘æ‰“ç®—ä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ã€‚</p><h3 id="å›¾ç‰‡æŠ“å–ä¸é¢„å¤„ç†"><a href="#å›¾ç‰‡æŠ“å–ä¸é¢„å¤„ç†" class="headerlink" title="å›¾ç‰‡æŠ“å–ä¸é¢„å¤„ç†"></a>å›¾ç‰‡æŠ“å–ä¸é¢„å¤„ç†</h3><p>æ ¹æ®ä»»åŠ¡è¦æ±‚ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™çˆ¬è™«ç¨‹åºï¼Œåˆ°æ·˜å®ç­‰ç½‘ç«™æŠ“å–ä¸€äº›è¡£æœã€é‹å­çš„å›¾ç‰‡ï¼Œå¹¶åˆ©ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹è¿›è¡Œåˆ†ç±»ã€‚ä½†è€ƒè™‘åˆ°æ·˜å®ç­‰è´­ç‰©ç½‘ç«™çš„å›¾ç‰‡å¹¶ä¸æ˜¯é‚£ä¹ˆçš„ç†æƒ³ï¼Œå›¾ç‰‡ä¸Šå¾€å¾€ä¼šæœ‰ä¸€äº›æŠ˜æ‰£æˆ–è€…å…¶ä»–ä¿¡æ¯ï¼Œå¹²æ‰°è¾ƒå¤§ï¼Œæ‰€ä»¥æˆ‘æ‰“ç®—ä¸»è¦ä»ç™¾åº¦å›¾ç‰‡ç­‰ç½‘ç«™æ¥æŠ“å–å›¾ç‰‡ã€‚è€ƒè™‘åˆ°æˆ‘å¯¹çˆ¬è™«ä¸æ˜¯å¾ˆäº†è§£ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘æ‰“ç®—ä»ç½‘ä¸Šæœé›†ç›¸å…³çš„æ¨¡æ¿è¿›è¡Œä¿®æ”¹ã€‚</p><p>æ•°æ®é›†é‡Œçš„å›¾ç‰‡èƒŒæ™¯å¾ˆç®€å•ï¼Œçœ‹èµ·æ¥éƒ½æ˜¯é»‘åº•çš„ï¼Œè€Œä¸”æ¯ä¸€ç±»éƒ½æ˜¯åªæœ‰è¡£æœï¼Œæ²¡æœ‰åˆ«çš„å¹²æ‰°å› ç´ ã€‚è€Œæˆ‘ä»¬æŠ“å–åˆ°çš„å›¾ç‰‡å¾€å¾€ä¼šå¤æ‚å¾ˆå¤šï¼Œæ¯”å¦‚æ˜¯ç™½åº•çš„ï¼Œæœ‰æ¨¡ç‰¹ç©¿ç€è¿™ä»¶è¡£æœï¼Œæˆ–è€…è¯´ä¸€å¼ å›¾ç‰‡é‡Œé¢æœ‰å¥½å‡ ä»¶è¡£æœï¼Œç”šè‡³æ˜¯æŠ“å–çš„å›¾ç‰‡å’Œè¡£æœå¹¶æ²¡æœ‰å…³ç³»ç­‰ï¼Œæ‰€ä»¥é¢„å¤„ç†æ˜¯éå¸¸æœ‰å¿…è¦çš„ï¼Œä¸è¿›è¡Œé¢„å¤„ç†ç›´æ¥ç»™ç½‘ç»œè¿›è¡Œåˆ†ç±»çš„è¯ï¼Œæ•ˆæœè‚¯å®šä¸å¥½ã€‚æˆ‘å¯¹OpenCVæ¯”è¾ƒç†Ÿæ‚‰ï¼Œæ‰€ä»¥åé¢æˆ‘æ‰“ç®—åˆ©ç”¨python-opencvå¯¹å›¾ç‰‡åšä¸€ä¸ªç®€å•çš„é¢„å¤„ç†ã€‚</p><h3 id="å¯¹ä¸æ”¯æŒç±»åˆ«è¿›è¡Œåˆ¤æ–­"><a href="#å¯¹ä¸æ”¯æŒç±»åˆ«è¿›è¡Œåˆ¤æ–­" class="headerlink" title="å¯¹ä¸æ”¯æŒç±»åˆ«è¿›è¡Œåˆ¤æ–­"></a>å¯¹ä¸æ”¯æŒç±»åˆ«è¿›è¡Œåˆ¤æ–­</h3><p>è¿™ä¸ªä¸€å¼€å§‹æˆ‘æƒ³çš„æ˜¯ç›´æ¥å¤šå¼„ä¸€ä¸ªç±»åˆ«ï¼Œå«åšâ€œä¸æ”¯æŒç±»åˆ«â€ï¼Œä½†æ˜¯è¿™æ ·çš„è¯å¹¶æ½œåœ¨çš„å›¾åƒå‡ ä¹æ˜¯æ— é™çš„ï¼Œå¹¶ä¸å¥½ç¡®å®šæ•°æ®é›†ï¼Œå¹¶ä¸”ä»ç½‘ä¸Šäº†è§£åˆ°è¿™æ ·çš„åšæ³•åé¢å¯èƒ½ä¼šé‡åˆ°å¾ˆå¤šæœªçŸ¥çš„é—®é¢˜ã€‚</p><p>åé¢åˆäº†è§£åˆ°ï¼Œåœ¨äººè„¸è¯†åˆ«é¢†åŸŸï¼Œå¾€å¾€ä¼šå…ˆè®­ç»ƒä¸€ä¸ªäºŒåˆ†ç±»å™¨æ¥åŒºåˆ†æ˜¯å¦æ˜¯äººè„¸ï¼Œä¹‹åå†è¿›è¡Œäººè„¸çš„åˆ†ç±»ï¼Œè¿™æ ·çš„åšæ³•èƒ½å¤Ÿä½¿äººè„¸çš„åˆ†ç±»ç¨³å®šã€‚å› æ­¤ï¼Œæˆ‘ä¹Ÿæ‰“ç®—è®­ç»ƒä¸€ä¸ªäºŒåˆ†ç±»å™¨ï¼Œåˆ¤æ–­å›¾ç‰‡æ˜¯ä¸æ˜¯æœè£…ï¼Œæ˜¯æœè£…å°±å†è¿›è¡Œæœè£…çš„åˆ†ç±»ï¼Œå¦åˆ™å°±åˆ¤å®šä¸ºâ€œä¸æ”¯æŒç±»åˆ«â€ã€‚</p><h2 id="æ­å»ºCNN"><a href="#æ­å»ºCNN" class="headerlink" title="æ­å»ºCNN"></a>æ­å»ºCNN</h2><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p>torch.nnæ˜¯ä¸“é—¨ä¸ºç¥ç»ç½‘ç»œè®¾è®¡çš„æ¨¡å—åŒ–æ¥å£ã€‚nnæ„å»ºäºautogradä¹‹ä¸Šï¼Œå¯ä»¥ç”¨æ¥å®šä¹‰å’Œè¿è¡Œç¥ç»ç½‘ç»œã€‚<br>nn.Moduleæ˜¯nnä¸­ååˆ†é‡è¦çš„ç±»,åŒ…å«ç½‘ç»œå„å±‚çš„å®šä¹‰åŠforwardæ–¹æ³•ã€‚<br>å®šä¹‰è‡ªå·²çš„ç½‘ç»œï¼š</p><ul><li>éœ€è¦ç»§æ‰¿nn.Moduleç±»ï¼Œå¹¶å®ç°forwardæ–¹æ³•ã€‚</li><li>ä¸€èˆ¬æŠŠç½‘ç»œä¸­å…·æœ‰å¯å­¦ä¹ å‚æ•°çš„å±‚æ”¾åœ¨æ„é€ å‡½æ•°<strong>init</strong>()ä¸­ï¼Œ</li><li>ä¸å…·æœ‰å¯å­¦ä¹ å‚æ•°çš„å±‚(å¦‚ReLU)å¯æ”¾åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œä¹Ÿå¯ä¸æ”¾åœ¨æ„é€ å‡½æ•°ä¸­(è€Œåœ¨forwardä¸­ä½¿ç”¨nn.functionalæ¥ä»£æ›¿)</li></ul><p>åªè¦åœ¨nn.Moduleçš„å­ç±»ä¸­å®šä¹‰äº†forwardå‡½æ•°ï¼Œbackwardå‡½æ•°å°±ä¼šè¢«è‡ªåŠ¨å®ç°(åˆ©ç”¨Autograd)ã€‚<br>åœ¨forwardå‡½æ•°ä¸­å¯ä»¥ä½¿ç”¨ä»»ä½•Variableæ”¯æŒçš„å‡½æ•°ï¼Œæ¯•ç«Ÿåœ¨æ•´ä¸ªpytorchæ„å»ºçš„å›¾ä¸­ï¼Œæ˜¯Variableåœ¨æµåŠ¨ã€‚è¿˜å¯ä»¥ä½¿ç”¨if,for,print,logç­‰pythonè¯­æ³•.</p><p>æ³¨ï¼šPytorchåŸºäºnn.Moduleæ„å»ºçš„æ¨¡å‹ä¸­ï¼Œåªæ”¯æŒmini-batchçš„Variableè¾“å…¥æ–¹å¼ã€‚</p><p>æ¯”å¦‚ï¼Œåªæœ‰ä¸€å¼ è¾“å…¥å›¾ç‰‡ï¼Œä¹Ÿéœ€è¦å˜æˆ N x C x H x W çš„å½¢å¼ï¼š(batch channel H W) </p><p>ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">input_image <span class="token operator">=</span> torch<span class="token punctuation">.</span>FloatTensor<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span>input_image <span class="token operator">=</span> Variable<span class="token punctuation">(</span>input_image<span class="token punctuation">)</span>input_image <span class="token operator">=</span> input_image<span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>   <span class="token comment"># 1 x 1 x 28 x 28</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è®¾è®¡FashionCNNç±»"><a href="#è®¾è®¡FashionCNNç±»" class="headerlink" title="è®¾è®¡FashionCNNç±»"></a>è®¾è®¡FashionCNNç±»</h3><p>å¦‚ä½•ä½¿ç”¨Sequentialã€å¦‚ä½•è®¾è®¡å·ç§¯å±‚ã€å„ä¸ªéƒ¨åˆ†çš„ä½œç”¨ç­‰ä¸Šè¯¾éƒ½è®²è¿‡ï¼Œè¿™é‡Œæ ¹æ®è¯¾ä¸Šè®²çš„æ¥æ­å»ºå³å¯ã€‚</p><p>ä½†æ˜¯æ­å»ºçš„æ—¶å€™éœ€è¦ç‰¹åˆ«æ³¨æ„CNNä¸­çš„è¾“å…¥è¾“å‡ºå…¬å¼ï¼Œè¯¾ä¸Šåªè®²äº†è¿›è¿‡å·ç§¯æˆ–è€…æ± åŒ–ä¹‹åçŸ©é˜µå‘ç”Ÿçš„å˜åŒ–ï¼Œè¿™ä¸ªå˜åŒ–å…·ä½“æ€ä¹ˆå‘ç”Ÿçš„ã€å“ªäº›å› ç´ åœ¨å½±å“å¥½åƒæ²¡è®²å¤ªå¤šï¼Œæˆ‘åœ¨å®ç°è¿™ä¸ªCNNæ—¶ï¼Œå› ä¸ºæ²¡æœ‰ææ¸…æ¥šCNNçš„è¾“å…¥è¾“å‡ºå…¬å¼ï¼Œåœ¨æ­å»ºç½‘ç»œçš„æ—¶å€™å‡ºäº†å¾ˆå¤šçš„é—®é¢˜ã€‚</p><p>åœ¨å¼„æ¸…æ¥šè¿™äº›å‡½æ•°çš„è®¡ç®—å…¬å¼ï¼ŒçŸ¥é“è¾“å…¥è¾“å‡ºçš„å˜åŒ–è§„å¾‹ä¹‹åï¼Œæ­å»ºæ¨¡å‹æˆ–è€…ä¿®æ”¹æ¨¡å‹ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚</p><h4 id="éƒ¨åˆ†å‡½æ•°çš„è®¡ç®—å…¬å¼"><a href="#éƒ¨åˆ†å‡½æ•°çš„è®¡ç®—å…¬å¼" class="headerlink" title="éƒ¨åˆ†å‡½æ•°çš„è®¡ç®—å…¬å¼"></a>éƒ¨åˆ†å‡½æ•°çš„è®¡ç®—å…¬å¼</h4><p><strong>nn.Conv2d</strong></p><p>class torch.nn.Conv2d(in_channels, out_channels, kernel_size, stride=1, padding=0, dilation=1, groups=1, bias=True)</p><p>äºŒç»´å·ç§¯å±‚, è¾“å…¥çš„å°ºåº¦æ˜¯(N, C_in, H, W)ï¼Œè¾“å‡ºå°ºåº¦ï¼ˆN, C_out, H_out, W_outï¼‰ã€‚</p><p>è®¡ç®—å…¬å¼ï¼š<code>out=ï¼ˆinput+2âˆ—paddingâˆ’kernel_size)/stride+1</code></p><p><strong>nn.MaxPool2d</strong></p><p>class torch.nn.MaxPool2d(kernel_size, stride=None, padding=0, dilation=1, return_indices=False, ceil_mode=False)</p><p>è®¡ç®—å…¬å¼ï¼š<code>out=(input+2âˆ—paddingâˆ’kernel_size)/stride+1</code></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">as</span> nn<span class="token keyword">class</span> <span class="token class-name">FashionCNN</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># åœ¨è®¾è®¡çš„æ—¶å€™ï¼Œæ³¨æ„CNNé‡Œé¢çš„è¾“å…¥è¾“å‡ºå…¬å¼ï¼ï¼ï¼</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span>FashionCNN<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># ç¬¬ä¸€å±‚å·ç§¯</span>        <span class="token comment"># è¾“å…¥[1,28,28]</span>        self<span class="token punctuation">.</span>layer1 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            <span class="token comment"># å·ç§¯å±‚</span>            <span class="token comment">#   paddingæ˜¯è¾¹ç¼˜å¡«å……ï¼Œå¯ä»¥åˆ†ä¸ºå››ç±»ï¼šé›¶å¡«å……ï¼Œå¸¸æ•°å¡«å……ï¼Œé•œåƒå¡«å……ï¼Œé‡å¤å¡«å……ã€‚</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span>in_channels<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> out_channels<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> kernel_size<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> padding<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment"># å½’ä¸€åŒ–å¤„ç†https://zhuanlan.zhihu.com/p/205453986</span>            <span class="token comment">#   åœ¨å·ç§¯ç¥ç»ç½‘ç»œçš„å·ç§¯å±‚ä¹‹åæ€»ä¼šæ·»åŠ BatchNorm2dè¿›è¡Œæ•°æ®çš„å½’ä¸€åŒ–å¤„ç†</span>            <span class="token comment">#   è¿™ä½¿å¾—æ•°æ®åœ¨è¿›è¡ŒReluä¹‹å‰ä¸ä¼šå› ä¸ºæ•°æ®è¿‡å¤§è€Œå¯¼è‡´ç½‘ç»œæ€§èƒ½çš„ä¸ç¨³å®š</span>            nn<span class="token punctuation">.</span>BatchNorm2d<span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment"># æ± åŒ–å±‚</span>            <span class="token comment"># ã€€æ± åŒ–å±‚æ˜¯å¤¹åœ¨è¿ç»­çš„å·ç§¯å±‚çš„ä¸­é—´å±‚ï¼Œæ± åŒ–å±‚å¯ä»¥éå¸¸æœ‰æ•ˆåœ°ç¼©å°çŸ©é˜µçš„å°ºå¯¸ã€‚ä»è€Œå‡å°‘æœ€åå…¨è¿æ¥å±‚ä¸­çš„å‚æ•°ã€‚</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span>kernel_size<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> stride<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>        <span class="token comment"># ç¬¬äºŒå±‚å·ç§¯</span>        <span class="token comment"># è¾“å…¥[32,14,14]https://img-blog.csdnimg.cn/20200604155746947.bmp</span>        self<span class="token punctuation">.</span>layer2 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span>in_channels<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> out_channels<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">,</span> kernel_size<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>BatchNorm2d<span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span>kernel_size<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> stride<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>        <span class="token comment"># ç¬¬ä¸‰å±‚å·ç§¯</span>        <span class="token comment"># è¾“å…¥[128ï¼Œ6ï¼Œ6]</span>        self<span class="token punctuation">.</span>layer3 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span>in_channels<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">,</span> out_channels<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> kernel_size<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>BatchNorm2d<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>        <span class="token comment"># é˜²æ­¢è¿‡æ‹Ÿåˆ</span>        self<span class="token punctuation">.</span>drop <span class="token operator">=</span> nn<span class="token punctuation">.</span>Dropout2d<span class="token punctuation">(</span><span class="token number">0.25</span><span class="token punctuation">)</span>        <span class="token comment"># å…¨è¿æ¥å±‚</span>        <span class="token comment"># è¾“å…¥[64,2ï¼Œ2]</span>        self<span class="token punctuation">.</span>fc1 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">64</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">600</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>fc2 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">600</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>fc3 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>fc4 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Softmax<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        out <span class="token operator">=</span> self<span class="token punctuation">.</span>layer1<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        out <span class="token operator">=</span> self<span class="token punctuation">.</span>layer2<span class="token punctuation">(</span>out<span class="token punctuation">)</span>        out <span class="token operator">=</span> self<span class="token punctuation">.</span>layer3<span class="token punctuation">(</span>out<span class="token punctuation">)</span>        out <span class="token operator">=</span> out<span class="token punctuation">.</span>view<span class="token punctuation">(</span>out<span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        out <span class="token operator">=</span> self<span class="token punctuation">.</span>fc1<span class="token punctuation">(</span>out<span class="token punctuation">)</span>        out <span class="token operator">=</span> self<span class="token punctuation">.</span>drop<span class="token punctuation">(</span>out<span class="token punctuation">)</span>        out <span class="token operator">=</span> self<span class="token punctuation">.</span>fc2<span class="token punctuation">(</span>out<span class="token punctuation">)</span>        out <span class="token operator">=</span> self<span class="token punctuation">.</span>fc3<span class="token punctuation">(</span>out<span class="token punctuation">)</span>        out <span class="token operator">=</span> self<span class="token punctuation">.</span>fc4<span class="token punctuation">(</span>out<span class="token punctuation">)</span>        <span class="token keyword">return</span> out<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è®­ç»ƒCNN"><a href="#è®­ç»ƒCNN" class="headerlink" title="è®­ç»ƒCNN"></a>è®­ç»ƒCNN</h2><h3 id="å¼•å…¥åº“"><a href="#å¼•å…¥åº“" class="headerlink" title="å¼•å…¥åº“"></a>å¼•å…¥åº“</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> copy<span class="token keyword">from</span> itertools <span class="token keyword">import</span> chain<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token comment"># import numpy as np</span><span class="token keyword">import</span> torch<span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">as</span> nn<span class="token keyword">import</span> torchvision<span class="token keyword">import</span> torchvision<span class="token punctuation">.</span>transforms <span class="token keyword">as</span> transforms<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>metrics <span class="token keyword">import</span> confusion_matrix<span class="token keyword">from</span> torch<span class="token punctuation">.</span>autograd <span class="token keyword">import</span> Variable<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> Dataset<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœGPUå¯ç”¨ï¼Œåˆ™ä½¿ç”¨</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å°è¯•ä½¿ç”¨GPU</span>device <span class="token operator">=</span> torch<span class="token punctuation">.</span>device<span class="token punctuation">(</span><span class="token string">"cuda:0"</span> <span class="token keyword">if</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token string">"cpu"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="åŠ è½½æ•°æ®é›†"><a href="#åŠ è½½æ•°æ®é›†" class="headerlink" title="åŠ è½½æ•°æ®é›†"></a>åŠ è½½æ•°æ®é›†</h3><p>è™½ç„¶æä¾›äº†.npyæ ¼å¼çš„æ•°æ®é›†ï¼Œä½†æ˜¯é‡Œé¢çš„å›¾ç‰‡æ˜¯æ•´å‹çš„ï¼Œä¸æ˜¯æµ®ç‚¹æ•°å‹çš„ï¼Œç”¨æ¥è®­ç»ƒçš„è¯è¿˜éœ€è¦å½’ä¸€åŒ–ã€‚</p><p>è¿™é‡Œæˆ‘è§‰å¾—ä½¿ç”¨torch.utils.dataé‡Œé¢çš„Datasetä¼šæ–¹ä¾¿ä¸€äº›ï¼Œå› æ­¤é‡‡ç”¨äº†è¿™ç§æ–¹æ³•åŠ è½½æ•°æ®é›†ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># åŠ è½½æ•°æ®é›†</span>train_set <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>FashionMNIST<span class="token punctuation">(</span><span class="token string">"./src/data"</span><span class="token punctuation">,</span> download<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>                                              transform<span class="token operator">=</span>transforms<span class="token punctuation">.</span>Compose<span class="token punctuation">(</span><span class="token punctuation">[</span>transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>test_set <span class="token operator">=</span> torchvision<span class="token punctuation">.</span>datasets<span class="token punctuation">.</span>FashionMNIST<span class="token punctuation">(</span><span class="token string">"./src/data"</span><span class="token punctuation">,</span> download<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> train<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>                                             transform<span class="token operator">=</span>transforms<span class="token punctuation">.</span>Compose<span class="token punctuation">(</span><span class="token punctuation">[</span>transforms<span class="token punctuation">.</span>ToTensor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>train_loader <span class="token operator">=</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data<span class="token punctuation">.</span>DataLoader<span class="token punctuation">(</span>train_set<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>test_loader <span class="token operator">=</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data<span class="token punctuation">.</span>DataLoader<span class="token punctuation">(</span>test_set<span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åŠ è½½æ¨¡å‹ã€å®šä¹‰è®­ç»ƒå˜é‡"><a href="#åŠ è½½æ¨¡å‹ã€å®šä¹‰è®­ç»ƒå˜é‡" class="headerlink" title="åŠ è½½æ¨¡å‹ã€å®šä¹‰è®­ç»ƒå˜é‡"></a>åŠ è½½æ¨¡å‹ã€å®šä¹‰è®­ç»ƒå˜é‡</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># åŠ è½½æ¨¡å‹</span>model <span class="token operator">=</span> FashionCNN<span class="token punctuation">(</span><span class="token punctuation">)</span>model<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token comment"># ä½¿ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°</span>error <span class="token operator">=</span> nn<span class="token punctuation">.</span>CrossEntropyLoss<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># å®šä¹‰å­¦ä¹ ç‡</span>learning_rate <span class="token operator">=</span> <span class="token number">0.0005</span><span class="token comment"># å®šä¹‰ä¼˜åŒ–å™¨</span>optimizer <span class="token operator">=</span> torch<span class="token punctuation">.</span>optim<span class="token punctuation">.</span>Adam<span class="token punctuation">(</span>model<span class="token punctuation">.</span>parameters<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> lr<span class="token operator">=</span>learning_rate<span class="token punctuation">)</span><span class="token comment"># å¾ªç¯æ¬¡æ•°</span>num_epochs <span class="token operator">=</span> <span class="token number">5</span><span class="token comment"># è¿­ä»£æ¬¡æ•°</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token comment"># æ˜¯å¦ç”»å›¾</span>display <span class="token operator">=</span> <span class="token boolean">True</span><span class="token comment"># æœ€å°è¿­ä»£æ¬¡æ•°</span>min_epochs <span class="token operator">=</span> <span class="token number">1</span><span class="token comment"># æœ€å°çš„æŸå¤±</span>min_loss <span class="token operator">=</span> <span class="token number">0.2</span><span class="token comment"># æœ€ä¼˜æ¨¡å‹</span>best_model <span class="token operator">=</span> <span class="token boolean">None</span><span class="token comment"># Lists for visualization of loss and accuracy</span>loss_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>iteration_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>accuracy_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment"># Lists for knowing classwise accuracy</span>predictions_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>labels_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è¿›è¡Œè®­ç»ƒ"><a href="#è¿›è¡Œè®­ç»ƒ" class="headerlink" title="è¿›è¡Œè®­ç»ƒ"></a>è¿›è¡Œè®­ç»ƒ</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">for</span> epoch <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>num_epochs<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># ã€€åˆ†æ‰¹æ¬¡åŠ è½½æ•°æ®é›†</span>    <span class="token keyword">for</span> train_images<span class="token punctuation">,</span> train_labels <span class="token keyword">in</span> train_loader<span class="token punctuation">:</span>        <span class="token comment"># for i in range(len(train_images_list) // 100):</span>        <span class="token comment"># Transferring images and labels to GPU if available</span>        <span class="token comment"># train_images = torch.tensor(train_images_list[i * 100:(i + 1) * 100])</span>        <span class="token comment"># train_labels = torch.tensor(train_labels_list[i * 100:(i + 1) * 100])</span>        train_images<span class="token punctuation">,</span> train_labels <span class="token operator">=</span> train_images<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token punctuation">,</span> train_labels<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>        train <span class="token operator">=</span> Variable<span class="token punctuation">(</span>train_images<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        train_labels <span class="token operator">=</span> Variable<span class="token punctuation">(</span>train_labels<span class="token punctuation">)</span>        <span class="token comment"># Forward pass</span>        outputs <span class="token operator">=</span> model<span class="token punctuation">(</span>train<span class="token punctuation">)</span>        loss <span class="token operator">=</span> error<span class="token punctuation">(</span>outputs<span class="token punctuation">,</span> train_labels<span class="token punctuation">)</span>        <span class="token comment"># Initializing a gradient as 0 so there is no mixing of gradient among the batches</span>        optimizer<span class="token punctuation">.</span>zero_grad<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># Propagating the error backward</span>        loss<span class="token punctuation">.</span>backward<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># Optimizing the parameters</span>        optimizer<span class="token punctuation">.</span>step<span class="token punctuation">(</span><span class="token punctuation">)</span>        count <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token comment"># Testing the model</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token punctuation">(</span>count <span class="token operator">%</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># It's same as "if count % 50 == 0"</span>            total <span class="token operator">=</span> <span class="token number">0</span>            correct <span class="token operator">=</span> <span class="token number">0</span>            <span class="token keyword">for</span> test_images<span class="token punctuation">,</span> test_labels <span class="token keyword">in</span> test_loader<span class="token punctuation">:</span>                <span class="token comment"># for j in range(len(test_images_list) // 100):</span>                <span class="token comment">#     test_images = torch.tensor(test_images_list[i * 100:(i + 1) * 100])</span>                <span class="token comment">#     test_labels = torch.tensor(test_labels_list[i * 100:(i + 1) * 100])</span>                test_images<span class="token punctuation">,</span> test_labels <span class="token operator">=</span> test_images<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token punctuation">,</span> test_labels<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>                labels_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>test_labels<span class="token punctuation">)</span>                test_real <span class="token operator">=</span> Variable<span class="token punctuation">(</span>test_images<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                outputs <span class="token operator">=</span> model<span class="token punctuation">(</span>test_real<span class="token punctuation">)</span>                predictions <span class="token operator">=</span> torch<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>outputs<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>                predictions_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>predictions<span class="token punctuation">)</span>                correct <span class="token operator">+=</span> <span class="token punctuation">(</span>predictions <span class="token operator">==</span> test_labels<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                total <span class="token operator">+=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>test_labels<span class="token punctuation">)</span>            accuracy <span class="token operator">=</span> correct <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">/</span> total            loss_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>loss<span class="token punctuation">.</span>data<span class="token punctuation">)</span>            iteration_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>count<span class="token punctuation">)</span>            accuracy_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>accuracy<span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token punctuation">(</span>count <span class="token operator">%</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Iteration: {}, Loss: {}, Accuracy: {}%"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> loss<span class="token punctuation">.</span>data<span class="token punctuation">,</span> accuracy<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment"># ä¸€èˆ¬å¯ä»¥é»˜è®¤éªŒè¯é›†çš„æŸå¤±å‡½æ•°å€¼ç”±ä¸‹é™è½¬å‘ä¸Šå‡ï¼ˆå³æœ€å°å€¼ï¼‰å¤„ï¼Œæ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›æœ€å¥½ã€‚</span>        <span class="token keyword">if</span> epoch <span class="token operator">&gt;=</span> min_epochs <span class="token keyword">and</span> loss<span class="token punctuation">.</span>data <span class="token operator">&lt;=</span> min_loss<span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"update best model"</span><span class="token punctuation">)</span>            min_loss <span class="token operator">=</span> loss<span class="token punctuation">.</span>data            best_model <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>model<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è®­ç»ƒè¿‡ç¨‹ä¸­çš„è¾“å‡ºï¼š</p><pre class="line-numbers language-none"><code class="language-none">Iteration: 500, Loss: 0.4136478304862976, Accuracy: 88.0999984741211%update best modelupdate best modelupdate best modelupdate best modelupdate best modelupdate best modelupdate best modelIteration: 1000, Loss: 0.3463529646396637, Accuracy: 89.75%update best modelIteration: 1500, Loss: 0.18912623822689056, Accuracy: 88.80999755859375%update best modelupdate best modelupdate best modelIteration: 2000, Loss: 0.15128815174102783, Accuracy: 90.06999969482422%update best modelupdate best modelIteration: 2500, Loss: 0.15940940380096436, Accuracy: 89.0%update best modelupdate best modelIteration: 3000, Loss: 0.1301259845495224, Accuracy: 90.20999908447266%<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä¿å­˜æœ€ä¼˜æ¨¡å‹"><a href="#ä¿å­˜æœ€ä¼˜æ¨¡å‹" class="headerlink" title="ä¿å­˜æœ€ä¼˜æ¨¡å‹"></a>ä¿å­˜æœ€ä¼˜æ¨¡å‹</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">torch<span class="token punctuation">.</span>save<span class="token punctuation">(</span>best_model<span class="token punctuation">.</span>state_dict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"best_model.pth"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ç”»å‡ºè¿­ä»£ä¸­çš„æŸå¤±å˜åŒ–"><a href="#ç”»å‡ºè¿­ä»£ä¸­çš„æŸå¤±å˜åŒ–" class="headerlink" title="ç”»å‡ºè¿­ä»£ä¸­çš„æŸå¤±å˜åŒ–"></a>ç”»å‡ºè¿­ä»£ä¸­çš„æŸå¤±å˜åŒ–</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># ç”»å‡ºè¿­ä»£ä¸­çš„æŸå¤±</span>plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>iteration_list<span class="token punctuation">,</span> loss_list<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"No. of Iteration"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"Loss"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Iterations vs Loss"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/images/machine-learning-7/output_20_0.png"></p><h3 id="ç”»å‡ºè¿­ä»£ä¸­çš„å‡†ç¡®åº¦å˜åŒ–"><a href="#ç”»å‡ºè¿­ä»£ä¸­çš„å‡†ç¡®åº¦å˜åŒ–" class="headerlink" title="ç”»å‡ºè¿­ä»£ä¸­çš„å‡†ç¡®åº¦å˜åŒ–"></a>ç”»å‡ºè¿­ä»£ä¸­çš„å‡†ç¡®åº¦å˜åŒ–</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>iteration_list<span class="token punctuation">,</span> accuracy_list<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"No. of Iteration"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"Accuracy"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Iterations vs Accuracy"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/images/machine-learning-7/output_22_0.png"></p><h3 id="ç”»å‡ºæ··æ·†çŸ©é˜µ"><a href="#ç”»å‡ºæ··æ·†çŸ©é˜µ" class="headerlink" title="ç”»å‡ºæ··æ·†çŸ©é˜µ"></a>ç”»å‡ºæ··æ·†çŸ©é˜µ</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">predictions_l <span class="token operator">=</span> <span class="token punctuation">[</span>predictions_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>predictions_list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>labels_l <span class="token operator">=</span> <span class="token punctuation">[</span>labels_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>labels_list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>predictions_l <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>chain<span class="token punctuation">.</span>from_iterable<span class="token punctuation">(</span>predictions_l<span class="token punctuation">)</span><span class="token punctuation">)</span>labels_l <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>chain<span class="token punctuation">.</span>from_iterable<span class="token punctuation">(</span>labels_l<span class="token punctuation">)</span><span class="token punctuation">)</span>cm <span class="token operator">=</span> confusion_matrix<span class="token punctuation">(</span>labels_l<span class="token punctuation">,</span> predictions_l<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>matshow<span class="token punctuation">(</span>cm<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>colorbar<span class="token punctuation">(</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Confusion Matrix'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Groundtruth'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Predict'</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/images/machine-learning-7/output_24_0.png"></p><h2 id="ä»ç™¾åº¦å›¾ç‰‡çˆ¬å–å›¾ç‰‡"><a href="#ä»ç™¾åº¦å›¾ç‰‡çˆ¬å–å›¾ç‰‡" class="headerlink" title="ä»ç™¾åº¦å›¾ç‰‡çˆ¬å–å›¾ç‰‡"></a>ä»ç™¾åº¦å›¾ç‰‡çˆ¬å–å›¾ç‰‡</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> os<span class="token keyword">import</span> re<span class="token keyword">import</span> requests<span class="token triple-quoted-string string">"""é€šè¿‡çˆ¬è™«è·å–å›¾ç‰‡ä»ç½‘ä¸Šæ‰¾çš„ä¸€ä¸ªçˆ¬è™«ä¾‹å­ï¼Œç„¶åæ”¹äº†æ”¹å°±ç›´æ¥ç”¨äº†è€ƒè™‘åˆ°æ·˜å®ç­‰è´­ç‰©ç½‘ç«™æœåˆ°çš„å›¾ç‰‡æ¯”è¾ƒå¤æ‚ï¼Œå¹²æ‰°ä¿¡æ¯è¿‡å¤šï¼Œæ‰€ä»¥çˆ¬å–äº†ç™¾åº¦å›¾ç‰‡"""</span><span class="token keyword">def</span> <span class="token function">get_label</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">:</span>    output_mapping <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token number">0</span><span class="token punctuation">:</span> <span class="token string">"T-shirt"</span><span class="token punctuation">,</span>        <span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">"Trouser"</span><span class="token punctuation">,</span>        <span class="token number">2</span><span class="token punctuation">:</span> <span class="token string">"Pullover"</span><span class="token punctuation">,</span>        <span class="token number">3</span><span class="token punctuation">:</span> <span class="token string">"Dress"</span><span class="token punctuation">,</span>        <span class="token number">4</span><span class="token punctuation">:</span> <span class="token string">"Coat"</span><span class="token punctuation">,</span>        <span class="token number">5</span><span class="token punctuation">:</span> <span class="token string">"Sandal"</span><span class="token punctuation">,</span>        <span class="token number">6</span><span class="token punctuation">:</span> <span class="token string">"Shirt"</span><span class="token punctuation">,</span>        <span class="token number">7</span><span class="token punctuation">:</span> <span class="token string">"Sneaker"</span><span class="token punctuation">,</span>        <span class="token number">8</span><span class="token punctuation">:</span> <span class="token string">"Bag"</span><span class="token punctuation">,</span>        <span class="token number">9</span><span class="token punctuation">:</span> <span class="token string">"Ankle Boot"</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> output_mapping<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token keyword">def</span> <span class="token function">get_images_from_baidu</span><span class="token punctuation">(</span>keyword<span class="token punctuation">,</span> page_num<span class="token punctuation">,</span> save_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># UA ä¼ªè£…ï¼šå½“å‰çˆ¬å–ä¿¡æ¯ä¼ªè£…æˆæµè§ˆå™¨</span>    <span class="token comment"># å°† User-Agent å°è£…åˆ°ä¸€ä¸ªå­—å…¸ä¸­</span>    <span class="token comment"># ã€ï¼ˆç½‘é¡µå³é”® â†’ å®¡æŸ¥å…ƒç´ ï¼‰æˆ–è€… F12ã€‘ â†’ ã€Networkã€‘ â†’ ã€Ctrl+Rã€‘ â†’ å·¦è¾¹é€‰ä¸€é¡¹ï¼Œå³è¾¹åœ¨ ã€Response Heardersã€‘ é‡ŒæŸ¥æ‰¾</span>    header <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) '</span>                      <span class="token string">'Chrome/78.0.3904.108 Safari/537.36'</span><span class="token punctuation">}</span>    <span class="token comment"># è¯·æ±‚çš„ url</span>    url <span class="token operator">=</span> <span class="token string">'https://image.baidu.com/search/acjson?'</span>    n <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">for</span> pn <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span> <span class="token operator">*</span> page_num<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># è¯·æ±‚å‚æ•°</span>        param <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'tn'</span><span class="token punctuation">:</span> <span class="token string">'resultjson_com'</span><span class="token punctuation">,</span>                 <span class="token comment"># 'logid': '7603311155072595725',</span>                 <span class="token string">'ipn'</span><span class="token punctuation">:</span> <span class="token string">'rj'</span><span class="token punctuation">,</span>                 <span class="token string">'ct'</span><span class="token punctuation">:</span> <span class="token number">201326592</span><span class="token punctuation">,</span>                 <span class="token string">'is'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                 <span class="token string">'fp'</span><span class="token punctuation">:</span> <span class="token string">'result'</span><span class="token punctuation">,</span>                 <span class="token string">'queryWord'</span><span class="token punctuation">:</span> keyword<span class="token punctuation">,</span>                 <span class="token string">'cl'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>                 <span class="token string">'lm'</span><span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>                 <span class="token string">'ie'</span><span class="token punctuation">:</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span>                 <span class="token string">'oe'</span><span class="token punctuation">:</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span>                 <span class="token string">'adpicid'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                 <span class="token string">'st'</span><span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>                 <span class="token string">'z'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                 <span class="token string">'ic'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                 <span class="token string">'hd'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                 <span class="token string">'latest'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                 <span class="token string">'copyright'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                 <span class="token string">'word'</span><span class="token punctuation">:</span> keyword<span class="token punctuation">,</span>                 <span class="token string">'s'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                 <span class="token string">'se'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                 <span class="token string">'tab'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                 <span class="token string">'width'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                 <span class="token string">'height'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                 <span class="token string">'face'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>                 <span class="token string">'istype'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>                 <span class="token string">'qc'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                 <span class="token string">'nc'</span><span class="token punctuation">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>                 <span class="token string">'fr'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                 <span class="token string">'expermode'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                 <span class="token string">'force'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>                 <span class="token string">'cg'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>  <span class="token comment"># è¿™ä¸ªå‚æ•°æ²¡å…¬å¼€ï¼Œä½†æ˜¯ä¸å¯å°‘</span>                 <span class="token string">'pn'</span><span class="token punctuation">:</span> pn<span class="token punctuation">,</span>  <span class="token comment"># æ˜¾ç¤ºï¼š30-60-90</span>                 <span class="token string">'rn'</span><span class="token punctuation">:</span> <span class="token string">'30'</span><span class="token punctuation">,</span>  <span class="token comment"># æ¯é¡µæ˜¾ç¤º 30 æ¡</span>                 <span class="token string">'gsm'</span><span class="token punctuation">:</span> <span class="token string">'1e'</span><span class="token punctuation">,</span>                 <span class="token string">'1618827096642'</span><span class="token punctuation">:</span> <span class="token string">''</span>                 <span class="token punctuation">}</span>        request <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>header<span class="token punctuation">,</span> params<span class="token operator">=</span>param<span class="token punctuation">)</span>        <span class="token keyword">if</span> request<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Request success.'</span><span class="token punctuation">)</span>        request<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">'utf-8'</span>        <span class="token comment"># æ­£åˆ™æ–¹å¼æå–å›¾ç‰‡é“¾æ¥</span>        html <span class="token operator">=</span> request<span class="token punctuation">.</span>text        image_url_list <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'"thumbURL":"(.*?)",'</span><span class="token punctuation">,</span> html<span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>image_url_list<span class="token punctuation">)</span>        <span class="token comment"># # æ¢ä¸€ç§æ–¹å¼</span>        <span class="token comment"># request_dict = request.json()</span>        <span class="token comment"># info_list = request_dict['data']</span>        <span class="token comment"># # çœ‹å®ƒçš„å€¼æœ€åå¤šäº†ä¸€ä¸ªï¼Œåˆ é™¤æ‰</span>        <span class="token comment"># info_list.pop()</span>        <span class="token comment"># image_url_list = []</span>        <span class="token comment"># for info in info_list:</span>        <span class="token comment">#     image_url_list.append(info['thumbURL'])</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>save_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>            os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>save_dir<span class="token punctuation">)</span>        <span class="token keyword">for</span> image_url <span class="token keyword">in</span> image_url_list<span class="token punctuation">:</span>            image_data <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token operator">=</span>image_url<span class="token punctuation">,</span> headers<span class="token operator">=</span>header<span class="token punctuation">)</span><span class="token punctuation">.</span>content            <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>save_dir<span class="token punctuation">,</span> <span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>n<span class="token punctuation">:</span><span class="token format-spec">06d</span><span class="token punctuation">}</span></span><span class="token string">.jpg'</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fp<span class="token punctuation">:</span>                fp<span class="token punctuation">.</span>write<span class="token punctuation">(</span>image_data<span class="token punctuation">)</span>            n <span class="token operator">=</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    fashion <span class="token operator">=</span> get_label<span class="token punctuation">(</span>i<span class="token punctuation">)</span>    save_dir <span class="token operator">=</span> <span class="token string">"./ImageSet/"</span> <span class="token operator">+</span> fashion    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Start get images of %s'</span> <span class="token operator">%</span> fashion<span class="token punctuation">)</span>    <span class="token comment"># ä½¿ç”¨tryå’Œfinallyä¸»è¦æ˜¯æ€•æœåˆ°çš„å›¾ç‰‡é¡µæ•°æ²¡æœ‰è¿™ä¹ˆå¤šï¼Œç„¶åæå‰ç»ˆæ­¢äº†</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        get_images_from_baidu<span class="token punctuation">(</span>keyword<span class="token operator">=</span>fashion<span class="token punctuation">,</span> page_num<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> save_dir<span class="token operator">=</span>save_dir<span class="token punctuation">)</span>    <span class="token keyword">finally</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"error!"</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Get images of %s finished.'</span> <span class="token operator">%</span> fashion<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å›¾ç‰‡é¢„å¤„ç†"><a href="#å›¾ç‰‡é¢„å¤„ç†" class="headerlink" title="å›¾ç‰‡é¢„å¤„ç†"></a>å›¾ç‰‡é¢„å¤„ç†</h2><p>FashionMNISTæ•°æ®é›†é‡Œé¢çš„å›¾ç‰‡æ˜¯28*28çš„ç°åº¦å›¾ï¼Œå› æ­¤æˆ‘ä»¬è®¾è®¡çš„å·ç§¯ç¥ç»ç½‘ç»œFashionCNNç¬¬ä¸€å±‚çš„è¾“å…¥å°±æ˜¯1*28*28ã€‚</p><p>è€Œæˆ‘ä»¬ä»ç½‘ä¸Šçˆ¬å–åˆ°çš„å›¾ç‰‡å¾ˆéš¾æ»¡è¶³è¿™æ ·çš„è¦æ±‚ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è¿›è¡Œå›¾ç‰‡é¢„å¤„ç†ä¹‹åæ‰å¯ä»¥è®©FashionCNNæ¥è¿›è¡Œåˆ†ç±»ã€‚</p><p><strong>é¢„å¤„ç†æ­¥éª¤:</strong></p><ol><li><p><strong>æ•´ç†çˆ¬å–çš„å›¾ç‰‡ï¼Œä»…ä¿ç•™æœ‰å•ä»¶æœè£…çš„å›¾ç‰‡</strong></p><p>ä»æˆ‘ä»¬åšçš„é—®é¢˜å¼€å§‹è€ƒè™‘ï¼Œå› ä¸ºæˆ‘ä»¬åšçš„æ˜¯æœè£…åˆ†ç±»é—®é¢˜ï¼Œä¸æ˜¯æœè£…æ£€æµ‹é—®é¢˜ï¼Œè€Œæˆ‘ä»¬çš„æ•°æ®é›†é‡Œé¢åŸºæœ¬éƒ½æ˜¯åªæœ‰ä¸€ä»¶æœè£…çš„ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸ºæˆ‘ä»¬åšçš„æ˜¯å¯¹å•ä»¶æœè£…è¿›è¡Œåˆ†ç±»çš„é—®é¢˜ã€‚</p><p>ä½†çˆ¬å–åˆ°çš„å›¾ç‰‡é‡Œé¢æœ‰çš„æœ‰å¥½å¤šä»¶æœè£…ï¼Œæœ‰çš„åŒ…æ‹¬äº†å…¶ä»–ç§ç±»çš„æœè£…ï¼ˆæ¯”å¦‚æœç´¢çš„Tshirtï¼Œä½†çˆ¬å–åˆ°çš„æ˜¯ç©¿Tshirtçš„æ¨¡ç‰¹çš„å…¨èº«ç…§ï¼‰ï¼Œè¿˜æœ‰çš„æœè£…å¹¶ä¸æ˜¯æˆ‘ä»¬æœç´¢çš„æœè£…ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å…ˆæ•´ç†çˆ¬å–çš„å›¾ç‰‡ï¼Œä¿è¯çˆ¬å–çš„å›¾ç‰‡æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p><p>è¿™ä¸€æ­¥çš„è¯ï¼Œå°±åªèƒ½äººä¸ºçš„æ•´ç†äº†ï¼Œæ¯”è¾ƒè´¹æ—¶è´¹åŠ›ã€‚</p></li><li><p><strong>è¯»å–æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„å›¾ç‰‡ï¼Œè¿›è¡Œâ€œå‰æ™¯æå–â€ï¼ˆæœè£…éƒ¨åˆ†å¤„ç†æˆç™½è‰²ï¼Œå…¶ä½™éƒ¨åˆ†å¤„ç†ä¸ºé»‘è‰²ï¼‰</strong></p><p><strong>è¿™é‡Œå¯èƒ½æ˜¯æ•´ä¸ªè¿‡ç¨‹ä¸­èŠ±çš„æ—¶é—´æœ€å¤šçš„åœ°æ–¹ï¼Œå°è¯•çš„æœ€å¤šçš„åœ°æ–¹ã€‚</strong></p><p>æœ€å¼€å§‹ä¸è¿›è¡Œä»»ä½•å¤„ç†ï¼Œåªæ˜¯ç®€ç®€å•å•çš„è½¬åŒ–ä¸ºç°åº¦å›¾å¹¶ä¸”è°ƒæ•´åˆ†è¾¨ç‡ï¼Œç”¨è®­ç»ƒçš„ç½‘ç»œè¿›è¡Œåˆ†ç±»æ—¶æ­£ç¡®ç‡åªæœ‰8%å¤šä¸€ç‚¹ï¼Œå¥½åƒæ•ˆæœè¿˜æ²¡æœ‰éšæœºçš„å¥½ï¼Œéšæœºèƒ½åˆ°10%å·¦å³ã€‚</p><p>ä¹‹åå°±å°è¯•äº†é˜ˆå€¼åŒ–å¤„ç†ï¼Œè¿™é‡Œä¸»è¦ä¹Ÿæ˜¯æŠŠç™½è‰²çš„èƒŒæ™¯å¤„ç†æˆé»‘è‰²ï¼Œå…¶ä½™åœ°æ–¹ä¿ç•™åƒç´ å€¼æˆ–è€…å¤„ç†æˆç™½è‰²ï¼Œè¿™æ ·çš„æ•ˆæœèƒ½å¥½ä¸€äº›ï¼Œåˆ°äº†30%å·¦å³ã€‚</p><p>ç„¶åä¸Šç½‘æŸ¥åˆ°äº†OpenCVçš„grabCutå‡½æ•°ï¼Œå¬è¯´è¿™ä¸ªåšå‰æ™¯æå–æ•ˆæœå¾ˆå¥½ï¼Œä½†æ˜¯åœ¨æˆ‘å°è¯•çš„æ—¶å€™ï¼Œå¤„ç†é€Ÿåº¦å¤ªæ…¢äº†ï¼Œè€Œä¸”æ•ˆæœä¹Ÿæ²¡æœ‰æˆ‘æƒ³çš„é‚£ä¹ˆç†æƒ³ï¼Œè¿™ä¸ªå°±ç›´æ¥æ”¾å¼ƒäº†ã€‚</p><p>æœ€åæˆ‘æ˜¯æ‰“ç®—ç”¨è½®å»“æ£€æµ‹çš„æ–¹æ³•æ¥åšï¼Œå…·ä½“çš„æ­¥éª¤æ˜¯ï¼š</p><ol><li><p><strong>é˜ˆå€¼åŒ–å¤„ç†</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> cv2<span class="token punctuation">.</span>cv2 <span class="token keyword">as</span> cv<span class="token keyword">import</span> os                  <span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt      image<span class="token operator">=</span>cv<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"src/test/T-shirt/005.jpg"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>cv<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>image<span class="token punctuation">,</span>cv<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/images/machine-learning-7/output_29_1.png"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">_<span class="token punctuation">,</span> img_binary <span class="token operator">=</span> cv<span class="token punctuation">.</span>threshold<span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> cv<span class="token punctuation">.</span>THRESH_BINARY_INV<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>cv<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>img_binary<span class="token punctuation">,</span>cv<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="/images/machine-learning-7/output_30_1.png"></p></li><li><p><strong>è¿›è¡Œè½®å»“æ£€æµ‹å¹¶ä¸”å¡«å……è½®å»“ï¼Œå¤„ç†æ‰è½®å»“é¢ç§¯è¿‡å¤§çš„å›¾ç‰‡ï¼Œåˆ©ç”¨å¡«å……çš„è½®å»“ä½œä¸ºmaskæ¥æå–æœè£…</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å°è¯•é€šè¿‡è½®å»“æ£€æµ‹çš„æ–¹å¼æ¥ä¼˜åŒ–å¤„ç†ç»“æœ</span>mask <span class="token operator">=</span> np<span class="token punctuation">.</span>ones_like<span class="token punctuation">(</span>img_binary<span class="token punctuation">)</span><span class="token comment"># æ‰¾åˆ°æ‰€æœ‰çš„è½®å»“</span>contours<span class="token punctuation">,</span> _ <span class="token operator">=</span> cv<span class="token punctuation">.</span>findContours<span class="token punctuation">(</span>img_binary<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>RETR_EXTERNAL<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>CHAIN_APPROX_NONE<span class="token punctuation">)</span>area <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment"># æ‰¾åˆ°æœ€å¤§çš„è½®å»“</span><span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>contours<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    area<span class="token punctuation">.</span>append<span class="token punctuation">(</span>cv<span class="token punctuation">.</span>contourArea<span class="token punctuation">(</span>contours<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>max_idx <span class="token operator">=</span> np<span class="token punctuation">.</span>argmax<span class="token punctuation">(</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>area<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å¦‚æœè½®å»“å‡ ä¹å’Œå›¾ç‰‡ä¸€æ ·å¤§ï¼Œè¯´æ˜å¾ˆå¯èƒ½æ˜¯è¢«é˜ˆå€¼åŒ–æˆå…¨ç™½æˆ–è€…å…¨é»‘çš„å›¾ï¼Œåº”è¯¥èˆå»</span>w<span class="token punctuation">,</span> h <span class="token operator">=</span> img_binary<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">if</span> area<span class="token punctuation">[</span>max_idx<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">0.9</span> <span class="token operator">*</span> w <span class="token operator">*</span> h<span class="token punctuation">:</span>    <span class="token comment"># å¡«å……æœ€å¤§çš„è½®å»“</span>    cv<span class="token punctuation">.</span>drawContours<span class="token punctuation">(</span>mask<span class="token punctuation">,</span> contours<span class="token punctuation">,</span> max_idx<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> cv<span class="token punctuation">.</span>FILLED<span class="token punctuation">)</span>    <span class="token keyword">del</span> area    <span class="token comment"># åˆ©ç”¨è½®å»“å¡«å……çš„maskæ¥æå–æœè£…</span>    img_end<span class="token operator">=</span>mask <span class="token operator">&amp;</span> image    plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>cv<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>img_end<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"è½®å»“æ£€æµ‹å¡«å……æ–¹æ³•å¤±è´¥ï¼"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/images/machine-learning-7/output_32_0.png"></p></li><li><p><strong>è°ƒæ•´åˆ†è¾¨ç‡å¹¶è¿›è¡Œå½’ä¸€åŒ–å¤„ç†</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">img_end <span class="token operator">=</span> cv<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>img_end<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">)</span>new_image <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span>img_end<span class="token punctuation">.</span>shape<span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>float32<span class="token punctuation">)</span>cv<span class="token punctuation">.</span>normalize<span class="token punctuation">(</span>img_end<span class="token punctuation">,</span> new_image<span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> beta<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> norm_type<span class="token operator">=</span>cv<span class="token punctuation">.</span>NORM_MINMAX<span class="token punctuation">,</span> dtype<span class="token operator">=</span>cv<span class="token punctuation">.</span>CV_32F<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>cv<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>new_image<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/images/machine-learning-7/output_35_1.png"></p></li><li><p><strong>æ•´åˆå›¾ç‰‡å¤„ç†çš„è¿‡ç¨‹ï¼Œå¹¶ä¸”æ‰“ä¸Šæ ‡ç­¾</strong></p><p>å‰é¢çš„å¤„ç†éƒ½æ˜¯é’ˆå¯¹å›¾ç‰‡çš„ï¼Œæ²¡æœ‰æåˆ°å›¾ç‰‡æ ‡ç­¾çš„é—®é¢˜ã€‚å› ä¸ºæˆ‘è¿™é‡Œçš„çˆ¬è™«çˆ¬å–åˆ°å›¾ç‰‡ä¹‹åï¼Œæ¯ä¸€ç§å›¾ç‰‡ä¼šæ”¾åˆ°ä¸åŒçš„æ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥æ ¹æ®æ–‡ä»¶å¤¹åç§°æ¥çŸ¥é“å›¾ç‰‡çš„ç§ç±»ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨è¯»å–å›¾ç‰‡çš„åŒæ—¶æ ¹æ®è¯»å–çš„æ–‡ä»¶å¤¹æ¥æ‰“ä¸Šæ ‡ç­¾å³å¯ã€‚ï¼ˆè¿™éƒ¨åˆ†ä»£ç ç•¥ï¼‰</p><p>é¢„å¤„ç†çš„æ‰€æœ‰ä»£ç æ•´ç†æˆäº†å‡½æ•°åœ¨processImage.pyä¸­ã€‚</p></li></ol></li></ol><h2 id="å¯¹ä¸æ”¯æŒç±»åˆ«è¿›è¡Œåˆ¤æ–­-1"><a href="#å¯¹ä¸æ”¯æŒç±»åˆ«è¿›è¡Œåˆ¤æ–­-1" class="headerlink" title="å¯¹ä¸æ”¯æŒç±»åˆ«è¿›è¡Œåˆ¤æ–­"></a>å¯¹ä¸æ”¯æŒç±»åˆ«è¿›è¡Œåˆ¤æ–­</h2><blockquote><p>è¿™éƒ¨åˆ†åšçš„ä¸å¥½ï¼Œä»…ä»…æ˜¯ç®€å•çš„åˆ¤æ–­äº†ä¸€ä¸‹ï¼Œåšæ³•è‡ªæˆ‘æ„Ÿè§‰ä¹Ÿä¸æ˜¯å¾ˆç§‘å­¦ã€‚ã€‚ã€‚</p></blockquote><p>è¿™ä¸ªéƒ¨åˆ†æˆ‘ç½‘ä¸Šæ‰¾äº†å¾ˆå¤šçš„èµ„æ–™ï¼Œäº†è§£äº†æ¯”è¾ƒå¤šçš„å†…å®¹ã€‚å¦‚æœæˆ‘ä»¬è¦åœ¨è¿™ä¸ªæœè£…åˆ†ç±»ä¸Šå†åŠ ä¸€ä¸ªä¸æ”¯æŒç±»åˆ«çš„åˆ¤æ–­çš„è¯ï¼Œè¿™ä¸ªåˆ†ç±»é—®é¢˜å°±ä»é—­é›†åˆ†ç±»é—®é¢˜å˜æˆäº†å¼€é›†åˆ†ç±»é—®é¢˜ã€‚å…¶ä¸­ï¼š</p><ul><li>é—­é›†åˆ†ç±»é—®é¢˜ï¼šé›†åˆSåŒ…å«Nä¸ªæœ‰é™ç±»åˆ«ï¼Œä¸”è¯¥Nä¸ªç±»åˆ«æœ‰å…·ä½“æ ‡ç­¾ï¼Œé—­é›†åˆ†ç±»é—®é¢˜å³åˆ’åˆ†è¿™Nä¸ªç±»åˆ«</li><li>å¼€é›†åˆ†ç±»é—®é¢˜ï¼šé›†åˆSåŒ…å«Nä¸ªæœ‰å…·ä½“æ ‡ç­¾çš„æœ‰é™ç±»åˆ«ï¼Œä¸”SåŒ…å«Kä¸ªæœ‰é™æˆ–æ— é™æœªçŸ¥ç±»åˆ«ï¼Œå¼€é›†åˆ†ç±»é—®é¢˜å³åˆ’åˆ†è¿™Nä¸ªç±»åˆ«ä¸”æ‹’ç»è¿™Kä¸ªæœªçŸ¥ç±»åˆ«</li></ul><p>ç”±äºæˆ‘ä»¬æ‰‹å¤´ä¸Šåªæœ‰æœè£…çš„æ•°æ®é›†ï¼Œä¸æ”¯æŒç±»åˆ«çš„æ•°æ®å‡ ä¹æ²¡æœ‰ï¼Œè€Œä¸”å°±ç®—åˆ¶ä½œï¼Œä¸æ”¯æŒç±»åˆ«çš„æ•°æ®å¯èƒ½æ˜¯æ— ç©·æ— å°½çš„ï¼Œå¹¶ä¸å¥½åˆ¶ä½œã€‚æ‰€ä»¥æˆ‘ä¸€å¼€å§‹çš„æƒ³æ³•å°±æ˜¯åˆ©ç”¨OCSVMï¼ˆone class support vector machine,å³å•ç±»æ”¯æŒå‘é‡æœºï¼‰æ¥åšä¸€ä¸ªåˆ†ç±»åˆ¤æ–­ï¼Œå¦‚æœä¸æ˜¯æœè£…å°±æ‹’ç»åé¢çš„åˆ†ç±»ï¼Œå¦‚æœæ˜¯æœè£…å°±å†è¿›è¡Œæœè£…åˆ†ç±»ã€‚</p><p>OCSVMè¯¥æ¨¡å‹å°†æ•°æ®æ ·æœ¬é€šè¿‡æ ¸å‡½æ•°æ˜ å°„åˆ°é«˜ç»´ç‰¹å¾ç©ºé—´ï¼Œä½¿å…¶å…·æœ‰æ›´è‰¯å¥½çš„èšé›†æ€§ï¼Œåœ¨ç‰¹å¾ç©ºé—´ä¸­æ±‚è§£ä¸€ä¸ªæœ€ä¼˜è¶…å¹³é¢å®ç°ç›®æ ‡æ•°æ®ä¸åæ ‡åŸç‚¹çš„æœ€å¤§åˆ†ç¦»ã€‚è¿™ä¸ªæ¨¡å‹é€‚åˆæ ·æœ¬ä¸å‡è¡¡çš„æƒ…å†µï¼Œæ ·æœ¬è¢«æ˜ å°„åˆ°æ–°çš„ç©ºé—´åï¼Œå¤§ç±»æ ·æœ¬èƒ½å¤Ÿèšæˆç°‡(cluster)ï¼Œå°ç±»æ ·æœ¬ä½œä¸ºå¼‚å¸¸ç‚¹åœ¨ç°‡ä¹‹å¤–ï¼Œè¿™ä¸ªç°‡å¯ä»¥ç”¨è¶…å¹³é¢åˆ»ç”»ã€‚</p><p>ä¸è¿‡ï¼Œå› ä¸ºç›®å‰å·²ç»åœ¨è¿™ä¸ªé¡¹ç›®ä¸Šé¢èŠ±äº†æ¯”è¾ƒå¤šçš„æ—¶é—´ï¼Œå®ç°OCSVMçš„è¿‡ç¨‹ä¸­è¿˜éœ€è¦å¯¹å›¾åƒè¿›è¡Œç‰¹å¾æå–ç­‰ï¼Œè¿™äº›ç›®å‰è¿˜æ²¡åšã€‚æ‰€ä»¥æˆ‘å…ˆå°è¯•äº†ä¸€ä¸‹ç›´æ¥é€šè¿‡CNNæœ€åä¸€å±‚è¾“å‡ºçš„æ¯ä¸ªç±»çš„æ¦‚ç‡æ¥åˆ¤æ–­æ˜¯å¦æ˜¯ä¸æ”¯æŒç±»åˆ«ã€‚</p><p>è¿™ç§æ–¹æ³•çš„æ€æƒ³å¾ˆç®€å•ï¼šåˆ¤æ–­è¾“å‡ºå‘é‡é‡Œé¢æœ€å¤§å€¼ä¸å¹³å‡å€¼çš„å·®æ˜¯ä¸æ˜¯è¿‡å°ã€æœ€å¤§å€¼æ˜¯ä¸æ˜¯è¿‡å°æ¥çœ‹CNNæ˜¯ä¸æ˜¯æ˜æ˜¾çš„åšå‡ºåˆ†ç±»ã€‚è¿™ä¸ªéƒ¨åˆ†çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">judgeOutLiner</span><span class="token punctuation">(</span>outputs<span class="token punctuation">,</span> sigma<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> threshold1<span class="token operator">=</span><span class="token number">0.9</span><span class="token punctuation">,</span> threshold2<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>outputs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        label <span class="token operator">=</span> outputs<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>np<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span> <span class="token operator">-</span> np<span class="token punctuation">.</span>mean<span class="token punctuation">(</span>label<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> sigma <span class="token keyword">and</span> np<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span> <span class="token operator">&lt;</span> threshold1 <span class="token keyword">or</span> np<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span> <span class="token operator">&lt;</span> threshold2<span class="token punctuation">:</span>            <span class="token comment"># print("out liners!")</span>            labels<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>            <span class="token builtin">sum</span> <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token comment"># print("type is:", np.argmax(label))</span>            labels<span class="token punctuation">.</span>append<span class="token punctuation">(</span>np<span class="token punctuation">.</span>argmax<span class="token punctuation">(</span>label<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># print(labels)</span>    <span class="token keyword">return</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>labels<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">sum</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æµ‹è¯•CNN"><a href="#æµ‹è¯•CNN" class="headerlink" title="æµ‹è¯•CNN"></a>æµ‹è¯•CNN</h2><p>é¦–å…ˆè¦å¼•ç”¨å›¾åƒé¢„å¤„ç†çš„ä»£ç å’Œå¯è§†åŒ–éƒ¨åˆ†çš„ä»£ç ï¼Œä»¥åŠå…¶ä»–åº“</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> src<span class="token punctuation">.</span>processImage <span class="token keyword">import</span> get_dataset<span class="token keyword">from</span> src<span class="token punctuation">.</span>fashion_tools <span class="token keyword">import</span> display_result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="å¯¹FashionMNISTæµ‹è¯•é›†è¿›è¡Œæµ‹è¯•"><a href="#å¯¹FashionMNISTæµ‹è¯•é›†è¿›è¡Œæµ‹è¯•" class="headerlink" title="å¯¹FashionMNISTæµ‹è¯•é›†è¿›è¡Œæµ‹è¯•"></a>å¯¹FashionMNISTæµ‹è¯•é›†è¿›è¡Œæµ‹è¯•</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">display<span class="token operator">=</span><span class="token boolean">True</span><span class="token comment"># åŠ è½½æ¨¡å‹</span>model <span class="token operator">=</span> FashionCNN<span class="token punctuation">(</span><span class="token punctuation">)</span>model<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>model<span class="token punctuation">.</span>load_state_dict<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'./src/new_best_model.pth'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>total <span class="token operator">=</span> <span class="token number">0</span>correct <span class="token operator">=</span> <span class="token number">0</span>out_liner <span class="token operator">=</span> <span class="token number">0</span><span class="token comment"># Lists for knowing classwise accuracy</span>predictions_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>labels_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>test_images <span class="token operator">=</span> <span class="token boolean">None</span>test_labels <span class="token operator">=</span> <span class="token boolean">None</span>predictions <span class="token operator">=</span> <span class="token boolean">None</span><span class="token keyword">for</span> test_images<span class="token punctuation">,</span> test_labels <span class="token keyword">in</span> test_loader<span class="token punctuation">:</span>    test_images<span class="token punctuation">,</span> test_labels <span class="token operator">=</span> test_images<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token punctuation">,</span> test_labels<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>    labels_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>test_labels<span class="token punctuation">)</span>    test_real <span class="token operator">=</span> Variable<span class="token punctuation">(</span>test_images<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    outputs <span class="token operator">=</span> model<span class="token punctuation">(</span>test_real<span class="token punctuation">)</span>    <span class="token comment"># predictions = torch.max(outputs, 1)[1].to(device)</span>    predictions<span class="token punctuation">,</span> out <span class="token operator">=</span> judgeOutLiner<span class="token punctuation">(</span>outputs<span class="token punctuation">.</span>cpu<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>detach<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    predictions <span class="token operator">=</span> torch<span class="token punctuation">.</span>from_numpy<span class="token punctuation">(</span>predictions<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>    out_liner <span class="token operator">+=</span> out    predictions_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>predictions<span class="token punctuation">)</span>    correct <span class="token operator">+=</span> <span class="token punctuation">(</span>predictions <span class="token operator">==</span> test_labels<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    total <span class="token operator">+=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>test_labels<span class="token punctuation">)</span>accuracy <span class="token operator">=</span> correct <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">/</span> total<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Accuracy: {}%"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>accuracy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"ä¸æ”¯æŒç±»åˆ«ä¸ªæ•°: {}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>out_liner<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> display<span class="token punctuation">:</span>    display_result<span class="token punctuation">(</span>test_images<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cpu<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>detach<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> test_labels<span class="token punctuation">.</span>cpu<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>detach<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                       predictions<span class="token punctuation">.</span>cpu<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>detach<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"test_demo"</span><span class="token punctuation">)</span>    <span class="token comment"># ç”»å‡ºæ··æ·†çŸ©é˜µ</span>    predictions_l <span class="token operator">=</span> <span class="token punctuation">[</span>predictions_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>predictions_list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    labels_l <span class="token operator">=</span> <span class="token punctuation">[</span>labels_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>labels_list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    predictions_l <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>chain<span class="token punctuation">.</span>from_iterable<span class="token punctuation">(</span>predictions_l<span class="token punctuation">)</span><span class="token punctuation">)</span>    labels_l <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>chain<span class="token punctuation">.</span>from_iterable<span class="token punctuation">(</span>labels_l<span class="token punctuation">)</span><span class="token punctuation">)</span>    cm <span class="token operator">=</span> confusion_matrix<span class="token punctuation">(</span>labels_l<span class="token punctuation">,</span> predictions_l<span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>matshow<span class="token punctuation">(</span>cm<span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>colorbar<span class="token punctuation">(</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Confusion Matrix'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Groundtruth'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Predict'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class="line-numbers language-none"><code class="language-none">Accuracy: 83.73999786376953%ä¸æ”¯æŒç±»åˆ«ä¸ªæ•°: 176<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/images/machine-learning-7/output_42_2.png"></p><p><img src="/images/machine-learning-7/output_42_3.png"></p><h3 id="å¯¹çˆ¬è™«å¾—åˆ°çš„æ•°æ®é›†è¿›è¡Œæµ‹è¯•"><a href="#å¯¹çˆ¬è™«å¾—åˆ°çš„æ•°æ®é›†è¿›è¡Œæµ‹è¯•" class="headerlink" title="å¯¹çˆ¬è™«å¾—åˆ°çš„æ•°æ®é›†è¿›è¡Œæµ‹è¯•"></a>å¯¹çˆ¬è™«å¾—åˆ°çš„æ•°æ®é›†è¿›è¡Œæµ‹è¯•</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python">display<span class="token operator">=</span><span class="token boolean">True</span>images<span class="token punctuation">,</span> labels <span class="token operator">=</span> get_dataset<span class="token punctuation">(</span><span class="token string">"./src/test/"</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span><span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token comment"># åŠ è½½æ¨¡å‹</span>model <span class="token operator">=</span> FashionCNN<span class="token punctuation">(</span><span class="token punctuation">)</span>model<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>model<span class="token punctuation">.</span>load_state_dict<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'./src/new_best_model.pth'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>total <span class="token operator">=</span> <span class="token number">0</span>correct <span class="token operator">=</span> <span class="token number">0</span>out_liner <span class="token operator">=</span> <span class="token number">0</span><span class="token comment"># Lists for knowing classwise accuracy</span>predictions_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>labels_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>test_images <span class="token operator">=</span> <span class="token boolean">None</span>test_labels <span class="token operator">=</span> <span class="token boolean">None</span>predictions <span class="token operator">=</span> <span class="token boolean">None</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>images<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    test_images <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span>images<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">:</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    test_labels <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span>labels<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">:</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    labels_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>test_labels<span class="token punctuation">)</span>    test_images<span class="token punctuation">,</span> test_labels <span class="token operator">=</span> test_images<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token punctuation">,</span> test_labels<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>    test_real <span class="token operator">=</span> Variable<span class="token punctuation">(</span>test_images<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    outputs <span class="token operator">=</span> model<span class="token punctuation">(</span>test_real<span class="token punctuation">)</span>    <span class="token comment"># predictions = torch.max(outputs, 1)[1].to(device)</span>    predictions<span class="token punctuation">,</span> out <span class="token operator">=</span> judgeOutLiner<span class="token punctuation">(</span>outputs<span class="token punctuation">.</span>cpu<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>detach<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    predictions <span class="token operator">=</span> torch<span class="token punctuation">.</span>from_numpy<span class="token punctuation">(</span>predictions<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>    out_liner <span class="token operator">+=</span> out    predictions_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>predictions<span class="token punctuation">)</span>    correct <span class="token operator">+=</span> <span class="token punctuation">(</span>predictions <span class="token operator">==</span> test_labels<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    total <span class="token operator">+=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>test_labels<span class="token punctuation">)</span>accuracy <span class="token operator">=</span> correct <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">/</span> total<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Accuracy: {}%"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>accuracy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"ä¸æ”¯æŒç±»åˆ«ä¸ªæ•°: {}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>out_liner<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> display<span class="token punctuation">:</span>    display_result<span class="token punctuation">(</span>test_images<span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cpu<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>detach<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> test_labels<span class="token punctuation">.</span>cpu<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>detach<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                       predictions<span class="token punctuation">.</span>cpu<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>detach<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"test_real"</span><span class="token punctuation">)</span>    <span class="token comment"># ç”»å‡ºæ··æ·†çŸ©é˜µ</span>    predictions_l <span class="token operator">=</span> <span class="token punctuation">[</span>predictions_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>predictions_list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    labels_l <span class="token operator">=</span> <span class="token punctuation">[</span>labels_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>labels_list<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    predictions_l <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>chain<span class="token punctuation">.</span>from_iterable<span class="token punctuation">(</span>predictions_l<span class="token punctuation">)</span><span class="token punctuation">)</span>    labels_l <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>chain<span class="token punctuation">.</span>from_iterable<span class="token punctuation">(</span>labels_l<span class="token punctuation">)</span><span class="token punctuation">)</span>    cm <span class="token operator">=</span> confusion_matrix<span class="token punctuation">(</span>labels_l<span class="token punctuation">,</span> predictions_l<span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>matshow<span class="token punctuation">(</span>cm<span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>colorbar<span class="token punctuation">(</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Confusion Matrix'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Groundtruth'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Predict'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class="line-numbers language-none"><code class="language-none">Accuracy: 61.000003814697266%ä¸æ”¯æŒç±»åˆ«ä¸ªæ•°: 22    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/images/machine-learning-7/output_44_3.png"></p><p><img src="/images/machine-learning-7/output_44_4.png"></p>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> CNN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆå…­ï¼‰ï¼šæ·±å…¥ç†è§£å·ç§¯ç¥ç»ç½‘ç»œ</title>
      <link href="2022/01/15/machine-learning-6/"/>
      <url>2022/01/15/machine-learning-6/</url>
      
        <content type="html"><![CDATA[<h1 id="æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆå…­ï¼‰ï¼šæ·±å…¥ç†è§£å·ç§¯ç¥ç»ç½‘ç»œ"><a href="#æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆå…­ï¼‰ï¼šæ·±å…¥ç†è§£å·ç§¯ç¥ç»ç½‘ç»œ" class="headerlink" title="æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆå…­ï¼‰ï¼šæ·±å…¥ç†è§£å·ç§¯ç¥ç»ç½‘ç»œ"></a>æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆå…­ï¼‰ï¼šæ·±å…¥ç†è§£å·ç§¯ç¥ç»ç½‘ç»œ</h1><h2 id="ä¸€ã€å·ç§¯è®¡ç®—å±‚CONV"><a href="#ä¸€ã€å·ç§¯è®¡ç®—å±‚CONV" class="headerlink" title="ä¸€ã€å·ç§¯è®¡ç®—å±‚CONV"></a>ä¸€ã€å·ç§¯è®¡ç®—å±‚CONV</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯â€œå·ç§¯â€ï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯â€œå·ç§¯â€ï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯â€œå·ç§¯â€ï¼Ÿ"></a>1.1 ä»€ä¹ˆæ˜¯â€œå·ç§¯â€ï¼Ÿ</h3><p>ä»€ä¹ˆæ˜¯å·ç§¯ï¼š</p><ul><li><p>å›¾åƒä¸­<strong>ä¸åŒæ•°æ®çª—å£çš„æ•°æ®</strong>å’Œ<strong>å·ç§¯æ ¸ï¼ˆä¸€ä¸ªæ»¤æ³¢çŸ©é˜µï¼‰</strong>ä½œ<strong>å†…ç§¯</strong>çš„æ“ä½œå«åšå·ç§¯ã€‚</p></li><li><p>ç®€å•æ¥è¯´ï¼Œå·ç§¯(æˆ–ç§°å†…ç§¯)å°±æ˜¯â€œå¯¹åº”ç›¸ä¹˜ï¼Œå†ç»“æœç´¯åŠ â€ã€‚</p></li></ul><p>å·ç§¯çš„è®¡ç®—è¿‡ç¨‹åˆç§°ä¸ºæ»¤æ³¢ï¼ˆfilter)ï¼Œæœ¬è´¨æ˜¯æå–å›¾åƒä¸åŒé¢‘æ®µçš„ç‰¹å¾ã€‚</p><h3 id="1-2-ä»€ä¹ˆæ˜¯â€œå·ç§¯æ ¸â€ï¼Ÿ"><a href="#1-2-ä»€ä¹ˆæ˜¯â€œå·ç§¯æ ¸â€ï¼Ÿ" class="headerlink" title="1.2 ä»€ä¹ˆæ˜¯â€œå·ç§¯æ ¸â€ï¼Ÿ"></a>1.2 ä»€ä¹ˆæ˜¯â€œå·ç§¯æ ¸â€ï¼Ÿ</h3><p>ä»€ä¹ˆæ˜¯å·ç§¯æ ¸ï¼š</p><p>å·ç§¯æ ¸ä¹Ÿç§°ä¸ºæ»¤æ³¢å™¨filterï¼Œå¸¦ç€ä¸€ç»„å›ºå®šæƒé‡çš„ç¥ç»å…ƒï¼Œé€šå¸¸æ˜¯n*mäºŒç»´çš„çŸ©é˜µï¼Œnå’Œmä¹Ÿæ˜¯ç¥ç»å…ƒçš„æ„Ÿå—é‡ã€‚n*m çŸ©é˜µä¸­å­˜æ”¾çš„æ˜¯å¯¹æ„Ÿå—é‡ä¸­æ•°æ®å¤„ç†çš„ç³»æ•°ã€‚</p><p>ä¸€ä¸ªå·ç§¯æ ¸çš„æ»¤æ³¢å¯ä»¥ç”¨æ¥æå–ç‰¹å®šçš„ç‰¹å¾ï¼ˆä¾‹å¦‚å¯ä»¥æå–ç‰©ä½“è½®å»“ã€é¢œè‰²æ·±æµ…ç­‰ï¼‰ã€‚</p><p>é€šè¿‡å·ç§¯å±‚ä»åŸå§‹æ•°æ®ä¸­æå–å‡ºæ–°çš„ç‰¹å¾çš„è¿‡ç¨‹ï¼Œåˆæˆä¸ºfeature map(ç‰¹å¾æ˜ å°„)ã€‚</p><h4 id="ä¸¾ä¾‹è¯´æ˜ï¼š"><a href="#ä¸¾ä¾‹è¯´æ˜ï¼š" class="headerlink" title="ä¸¾ä¾‹è¯´æ˜ï¼š"></a>ä¸¾ä¾‹è¯´æ˜ï¼š</h4><p>ã€1ã€‘æ¯”å¦‚ï¼Œæˆ‘ç°åœ¨è¦è®­ç»ƒä¸€ä¸ªæœ€ç®€å•çš„CNNï¼Œç”¨æ¥è¯†åˆ«ä¸€å¼ å›¾ç‰‡é‡Œçš„å­—æ¯æ˜¯Xè¿˜æ˜¯O</p><p><img src="/images/machine-learning-6/v2-ce4e2ad2cb9919d7e49a66fcd9f7a267_720w.jpg"></p><p>äººçœ¼ä¸€çœ‹ï¼Œå¾ˆç®€å•ï¼Œæ˜æ˜¾å°±æ˜¯Xï¼Œä½†æ˜¯è®¡ç®—æœºä¸çŸ¥é“ï¼Œå®ƒä¸æ˜ç™½ä»€ä¹ˆæ˜¯Xã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ç»™è¿™å¼ å›¾ç‰‡åŠ ä¸€ä¸ªæ ‡ç­¾ï¼Œä¹Ÿå°±æ˜¯ä¿—ç§°çš„Labelï¼ŒLabel=Xï¼Œå°±å‘Šè¯‰äº†è®¡ç®—æœºè¿™å¼ å›¾ä»£è¡¨çš„æ˜¯Xã€‚è®¡ç®—æœºå°±è®°ä½äº†Xçš„é•¿ç›¸ã€‚</p><p>ã€2ã€‘ä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„Xéƒ½é•¿è¿™æ ·ã€‚</p><p>æ¯”å¦‚è¯´â€¦</p><p><img src="/images/machine-learning-6/v2-547828bbcc202a030dfc98fcb3cfe5af_720w.jpg"></p><p>è¿™å››ä¸ªéƒ½æ˜¯Xï¼Œä½†å®ƒä»¬å’Œä¹‹å‰é‚£å¼ Xæ˜æ˜¾ä¸ä¸€æ ·ï¼Œè®¡ç®—æœºæ²¡è§è¿‡å®ƒä»¬ï¼Œåˆéƒ½ä¸è®¤è¯†äº†ã€‚</p><p>ã€3ã€‘ä¸è®¤è¯†äº†æ€ä¹ˆåŠï¼Ÿ</p><p>å½“ç„¶æ˜¯è®¡ç®—æœºâ€˜å›å¿†â€™æ˜¯ä¸æ˜¯è§è¿‡å·®ä¸å¤šçš„ã€‚â€”â€”è¿™æ—¶å€™CNNè¦åšçš„ï¼Œå°±æ˜¯å¦‚ä½•æå–å†…å®¹ä¸ºXçš„å›¾ç‰‡çš„ç‰¹å¾ã€‚</p><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå›¾ç‰‡åœ¨è®¡ç®—æœºå†…éƒ¨ä»¥åƒç´ å€¼çš„æ–¹å¼è¢«å­˜å‚¨ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸¤å¼ Xåœ¨è®¡ç®—æœºçœ‹æ¥ï¼Œå…¶å®æ˜¯è¿™æ ·å­çš„ã€‚å…¶ä¸­1ä»£è¡¨ç™½è‰²ï¼Œ-1ä»£è¡¨é»‘è‰²</p><p><img src="/images/machine-learning-6/v2-8bc4063deeaf11853fe1f9531b71e50a_720w.jpg"></p><p><img src="/images/machine-learning-6/v2-e216abf6d8042827b1e6de85732f0060_720w.jpg"></p><p>å¦‚æœæŒ‰ç…§æ¯åƒç´ é€ä¸ªæ¯”è¾ƒï¼Œè‚¯å®šæ˜¯ä¸ç§‘å­¦ï¼Œç»“æœä¸å¯¹è€Œä¸”æ•ˆç‡ä½ä¸‹ï¼Œå› æ­¤æå‡ºå…¶ä»–åŒ¹é…æ–¹æ³•ã€‚</p><p>è§‚å¯Ÿè¿™ä¸¤å¼ Xå›¾ï¼Œå¯ä»¥å‘ç°å°½ç®¡åƒç´ å€¼æ— æ³•ä¸€ä¸€å¯¹åº”ï¼Œä½†ä¹Ÿå­˜åœ¨ç€æŸäº›å…±åŒç‚¹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸¤å¼ å›¾ä¸­ä¸‰ä¸ªåŒè‰²åŒºåŸŸçš„ç»“æ„å®Œå…¨ä¸€è‡´ï¼</p><p><img src="/images/machine-learning-6/v2-df0a51f10a46347704274ee6ddbb614a_720w.jpg"></p><p>Q: è¦å°†è¿™ä¸¤å¼ å›¾è”ç³»èµ·æ¥ï¼Œæ— æ³•è¿›è¡Œ<strong>å…¨ä½“åƒç´ å¯¹åº”</strong>ï¼Œä½†æ˜¯å¦èƒ½è¿›è¡Œ<strong>å±€éƒ¨åŒ¹é…</strong>ï¼Ÿ</p><p>Aï¼šè‚¯å®šå¯ä»¥ï¼ï¼ï¼</p><p>ã€4ã€‘ä»æ ‡å‡†çš„Xå›¾ä¸­æˆ‘ä»¬æå–å‡ºä¸‰ä¸ªç‰¹å¾ï¼ˆfeatureï¼‰</p><p>1å·ç‰¹å¾ï¼š</p><p><img src="/images/machine-learning-6/v2-2230b625dcbac671af2646ff9d39a7d7_720w.jpg"></p><p>2å·ç‰¹å¾ï¼š</p><p><img src="/images/machine-learning-6/v2-292a36d6fedd82498d406846e6a8fba2_720w.jpg"></p><p>3å·ç‰¹å¾ï¼š</p><p><img src="/images/machine-learning-6/v2-2674d52504845d3fc062fa36a607fff2_720w.jpg"></p><p>å‘ç°ï¼Œåªè¦ç”¨è¿™ä¸‰ä¸ªfeatureï¼Œä¾¿å¯å®šä½åˆ°Xå›¾ç‰‡çš„æŸä¸ªå±€éƒ¨</p><p><img src="/images/machine-learning-6/v2-eaa1665a93ae616abad84971ac09f60d_720w.jpg"></p><p>ã€5ã€‘è¿™æ ·çš„featureï¼Œåœ¨CNNä¸­ä¹Ÿè¢«æˆä¸ºå·ç§¯æ ¸æˆ–è€…å·ç§¯å•å…ƒï¼ˆfilterï¼‰ï¼Œä¸€èˆ¬æ˜¯3X3ï¼Œæˆ–è€…5X5çš„å¤§å°ã€‚è€Œfeatureé‡Œçš„å€¼ï¼Œæ˜¯é€šè¿‡æ¨¡å‹å­¦ä¹ å¾—åˆ°çš„ã€‚</p><h3 id="1-3-CNNä¸­çš„äºŒç»´å·ç§¯ï¼ˆConvolution2Dï¼‰"><a href="#1-3-CNNä¸­çš„äºŒç»´å·ç§¯ï¼ˆConvolution2Dï¼‰" class="headerlink" title="1.3 CNNä¸­çš„äºŒç»´å·ç§¯ï¼ˆConvolution2Dï¼‰"></a>1.3 CNNä¸­çš„äºŒç»´å·ç§¯ï¼ˆConvolution2Dï¼‰</h3><p>å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰åŒ…æ‹¬ä¸€ç»´å·ç§¯ç¥ç»ç½‘ç»œï¼ŒäºŒç»´å·ç§¯ç¥ç»ç½‘ç»œä»¥åŠä¸‰ç»´å·ç§¯ç¥ç»ç½‘ç»œã€‚</p><p>ä¸€ç»´å·ç§¯ç¥ç»ç½‘ç»œä¸»è¦ç”¨äºåºåˆ—ç±»çš„æ•°æ®å¤„ç†ï¼Œ äºŒç»´å·ç§¯ç¥ç»ç½‘ç»œå¸¸åº”ç”¨äºå›¾åƒç±»æ–‡æœ¬çš„è¯†åˆ«ï¼Œ ä¸‰ç»´å·ç§¯ç¥ç»ç½‘ç»œä¸»è¦åº”ç”¨äºåŒ»å­¦å›¾åƒä»¥åŠè§†é¢‘ç±»æ•°æ®è¯†åˆ«ã€‚</p><p>2Då·ç§¯æ˜¯ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„æ“ä½œï¼š</p><p>ï¼ˆ1ï¼‰å…ˆä»ä¸€ä¸ª 3*3 çš„æƒé‡çŸ©é˜µï¼Œä¹Ÿå°±æ˜¯å·ç§¯æ ¸ï¼ˆfilterï¼‰å¼€å§‹ï¼Œè®©å®ƒé€æ­¥åœ¨äºŒç»´è¾“å…¥æ•°æ®ä¸Šâ€œæ‰«æâ€ã€‚<br>ï¼ˆ2ï¼‰å·ç§¯æ ¸â€œæ»‘åŠ¨â€çš„åŒæ—¶ï¼Œè®¡ç®—æƒé‡çŸ©é˜µå’Œæ‰«ææ‰€å¾—çš„æ•°æ®çŸ©é˜µçš„ä¹˜ç§¯ï¼Œç„¶åæŠŠç»“æœæ±‡æ€»æˆä¸€ä¸ªè¾“å‡ºåƒç´ ã€‚<br>ï¼ˆ3ï¼‰å·ç§¯æ ¸ä¼šåœ¨å®ƒç»è¿‡çš„æ‰€æœ‰ä½ç½®ä¸Šï¼Œéƒ½é‡å¤ä»¥ä¸Šæ“ä½œï¼Œç›´åˆ°æŠŠè¾“å…¥ç‰¹å¾çŸ©é˜µè½¬æ¢ä¸ºå¦ä¸€ä¸ªäºŒç»´çš„ç‰¹å¾çŸ©é˜µã€‚</p><p>åŠ¨å›¾çš„æ¼”ç¤ºï¼š</p><p>è¿™æ˜¯2Dè§†è§’çš„åŠ¨å›¾ï¼š</p><p><img src="/images/machine-learning-6/v2-f35f041aec9cbbf26b98af649536cc90_b.webp"></p><p>è¿™æ˜¯3Dè§†è§’çš„åŠ¨å›¾ï¼š</p><p><img src="/images/machine-learning-6/v2-42f6d50e57aae703f72e290be267d575_b.webp"></p><h3 id="1-4-æ€»ç»“ï¼š"><a href="#1-4-æ€»ç»“ï¼š" class="headerlink" title="1.4 æ€»ç»“ï¼š"></a>1.4 æ€»ç»“ï¼š</h3><p>ç®€è€Œè¨€ä¹‹ï¼Œè¾“å‡ºçš„ç‰¹å¾ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯åŸè¾“å…¥ç‰¹å¾çš„åŠ æƒå’Œï¼ˆæƒé‡æ˜¯å·ç§¯æ ¸è‡ªå¸¦çš„å€¼ï¼‰ï¼Œè€Œä»åƒç´ ä½ç½®ä¸Šçœ‹ï¼Œå®ƒä»¬æ‰€å¤„çš„åœ°æ–¹å¤§è‡´ç›¸åŒã€‚</p><p>é‚£ä¹ˆä¸ºä»€ä¹ˆè¾“å‡ºç‰¹å¾ï¼Œä¼šè½å…¥è¿™ä¸ªâ€œå¤§è‡´åŒºåŸŸâ€å‘¢ï¼Ÿ</p><p>è¿™å–å†³äºå·ç§¯æ ¸çš„å¤§å°ã€‚ å·ç§¯æ ¸çš„å¤§å°ç›´æ¥å†³å®šäº†åœ¨ç”Ÿæˆè¾“å‡ºç‰¹å¾æ—¶ï¼Œå®ƒåˆå¹¶äº†å¤šå°‘è¾“å…¥ç‰¹å¾ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šå·ç§¯æ ¸è¶Šå°ï¼Œè¾“å…¥è¾“å‡ºçš„ä½ç½®è¶Šæ¥è¿‘ï¼›å·ç§¯æ ¸è¶Šå¤§ï¼Œè·ç¦»å°±è¶Šè¿œã€‚</p><p>è¿™å’Œå…¨è¿æ¥å±‚å¾ˆä¸ä¸€æ ·ã€‚</p><p>åœ¨ä¸Šå›¾çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çš„è¾“å…¥æœ‰5Ã—5=25ä¸ªç‰¹å¾ï¼Œè€Œæˆ‘ä»¬çš„è¾“å‡ºåˆ™æ˜¯3Ã—3=9ä¸ªç‰¹å¾ã€‚<br>å¦‚æœè¿™æ˜¯ä¸€ä¸ªå…¨è¿æ¥å±‚ï¼Œè¾“å…¥25ä¸ªç‰¹å¾åï¼Œæˆ‘ä»¬ä¼šè¾“å‡ºåŒ…å«25Ã—9=225ä¸ªå‚æ•°çš„æƒé‡çŸ©é˜µï¼Œæ¯ä¸ªè¾“å‡ºç‰¹å¾éƒ½æ˜¯æ¯ä¸ªè¾“å…¥ç‰¹å¾çš„åŠ æƒå’Œã€‚</p><p>è¿™æ„å‘³ç€å¯¹äºæ¯ä¸ªè¾“å…¥ç‰¹å¾ï¼Œå·ç§¯æ‰§è¡Œçš„æ“ä½œæ˜¯ä½¿ç”¨9ä¸ªå‚æ•°è¿›è¡Œè½¬æ¢ã€‚</p><h2 id="äºŒã€éçº¿æ€§æ¿€æ´»å±‚"><a href="#äºŒã€éçº¿æ€§æ¿€æ´»å±‚" class="headerlink" title="äºŒã€éçº¿æ€§æ¿€æ´»å±‚"></a>äºŒã€éçº¿æ€§æ¿€æ´»å±‚</h2><blockquote><p>CNNä¸­éçº¿æ€§æ¿€æ´»å±‚é€šå¸¸ä½¿ç”¨reluå‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå…ˆä»‹ç»reluï¼Œå†ä»‹ç»å…¶ä»–çš„æ¿€æ´»å‡½æ•°</p></blockquote><h3 id="2-1-ä»€ä¹ˆæ˜¯relu"><a href="#2-1-ä»€ä¹ˆæ˜¯relu" class="headerlink" title="2.1 ä»€ä¹ˆæ˜¯relu"></a>2.1 ä»€ä¹ˆæ˜¯relu</h3><p>å®˜æ–¹è§£é‡Šï¼šå·ç§¯å±‚å¯¹åŸå›¾è¿ç®—å¤šä¸ªå·ç§¯ï¼Œäº§ç”Ÿä¸€ç»„çº¿æ€§æ¿€æ´»å“åº”ï¼Œè€Œ<strong>éçº¿æ€§æ¿€æ´»å±‚</strong>æ˜¯å¯¹ä¹‹å‰çš„ç»“æœè¿›è¡Œä¸€ä¸ªéçº¿æ€§çš„æ¿€æ´»å“åº”ã€‚</p><p><strong>æ¿€æ´»å‡½æ•°çš„ä½œç”¨</strong>æ˜¯ç”¨æ¥åŠ å…¥éçº¿æ€§å› ç´ ï¼ŒæŠŠå·ç§¯å±‚è¾“å‡ºç»“æœåšéçº¿æ€§æ˜ å°„ã€‚</p><p><img src="/images/machine-learning-6/v2-3436533f80cbb1cc52275ef34a6dd658_720w.jpg"></p><p>åœ¨å·ç§¯ç¥ç»ç½‘ç»œä¸­ç”¨åˆ°æœ€å¤šçš„éçº¿æ€§æ¿€æ´»å‡½æ•°æ˜¯reluå‡½æ•°ï¼Œ</p><p>å®ƒçš„å…¬å¼å®šä¹‰ï¼šf(x)=max(0,x)</p><p>å³ï¼Œä¿ç•™å¤§äºç­‰äº0çš„å€¼ï¼Œå…¶ä½™æ‰€æœ‰å°äº0çš„æ•°å€¼ç›´æ¥æ”¹å†™ä¸º0</p><p>&gt;=0çš„å€¼å…¨éƒ¨ä¿æŒä¸å˜ï¼š</p><p><img src="/images/machine-learning-6/v2-27938069bbdff1ec7d3e31d35dc0e44f_720w.jpg"></p><p>è€Œ&lt;0çš„å€¼å…¨éƒ¨æ”¹å†™ä¸º0ï¼š</p><p><img src="/images/machine-learning-6/v2-c9ab4a0dc54874a747773dd2550eb061_720w.jpg"></p><p>ä½œç”¨åçš„ç»“æœï¼š</p><p><img src="/images/machine-learning-6/v2-1ae057962612ca7a840003152fbfd78e_720w.jpg"></p><h3 id="2-2-å…¶ä»–å¸¸è§çš„éçº¿æ€§æ¿€æ´»å‡½æ•°"><a href="#2-2-å…¶ä»–å¸¸è§çš„éçº¿æ€§æ¿€æ´»å‡½æ•°" class="headerlink" title="2.2 å…¶ä»–å¸¸è§çš„éçº¿æ€§æ¿€æ´»å‡½æ•°"></a>2.2 å…¶ä»–å¸¸è§çš„éçº¿æ€§æ¿€æ´»å‡½æ•°</h3><p>sigmoidå‡½æ•°ï¼š$sigmoid(x)=\frac{1}{1+e^{-x}} $</p><p>tanhå‡½æ•°ï¼š $tanh(x)=\frac{e^x-e^{-x}}{e^x+e^{-x}}$</p><p>è¿™ä¸¤ä¸ªå‡½æ•°çš„å›¾åƒå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/images/machine-learning-6/tanh-sigmoid.png"></p><h3 id="2-3-ä¸ºä½•ä½¿ç”¨relu"><a href="#2-3-ä¸ºä½•ä½¿ç”¨relu" class="headerlink" title="2.3 ä¸ºä½•ä½¿ç”¨relu"></a>2.3 ä¸ºä½•ä½¿ç”¨relu</h3><p>å®é™…åº”ç”¨ä¸­ï¼Œç‰¹åˆ«æ˜¯æ·±å±‚ç½‘ç»œåœ¨è®­ç»ƒæ—¶ï¼Œtanhå’Œsigmoidä¼šåœ¨ç«¯å€¼è¶‹äºé¥±å’Œï¼Œé€ æˆè®­ç»ƒé€Ÿåº¦å‡æ…¢ï¼Œæ•…æ·±å±‚ç½‘ç»œçš„æ¿€æ´»å‡½æ•°é»˜è®¤å¤§å¤šé‡‡ç”¨reluå‡½æ•°ï¼Œæµ…å±‚ç½‘ç»œå¯ä»¥é‡‡ç”¨sigmoidå’Œtanhå‡½æ•°ã€‚</p><p>é‚£ä¹ˆä¸ºä»€ä¹ˆç°åœ¨è¿™ä¹ˆå¤šç½‘ç»œï¼Œéƒ½æ›´å¤šåœ°ä½¿ç”¨reluå‡½æ•°å‘¢ï¼Ÿä¸€ä¸ªé‡è¦åŸå› å°±æ˜¯ä¸Šé¢æåˆ°çš„ï¼Œå…¶ç¨€ç–æ¿€æ´»æ€§ã€‚</p><ol><li>æ ‡å‡†çš„sigmoidå‡½æ•°è¾“å‡ºä¸å…·å¤‡ç¨€ç–æ€§ï¼Œéœ€è¦ç”¨ä¸€äº›æƒ©ç½šå› å­æ¥è®­ç»ƒå‡ºä¸€å¤§å †æ¥è¿‘0çš„å†—ä½™æ•°æ®æ¥ï¼Œä»è€Œäº§ç”Ÿç¨€ç–æ•°æ®</li><li>è€Œreluæ˜¯çº¿æ€§ä¿®æ­£ã€‚å®ƒçš„ä½œç”¨æ˜¯å¦‚æœè®¡ç®—å‡ºçš„å€¼å°äº0ï¼Œå°±è®©å®ƒç­‰äº0ï¼Œå¦åˆ™ä¿æŒåŸæ¥çš„å€¼ä¸å˜ã€‚<br><strong>è¿™æ˜¯ä¸€ç§ç®€å•ç²—æš´åœ°å¼ºåˆ¶æŸäº›æ•°æ®ä¸º0çš„æ–¹æ³•</strong>ï¼Œç„¶è€Œç»å®è·µè¯æ˜ï¼Œè®­ç»ƒåçš„ç½‘ç»œå®Œå…¨å…·å¤‡é€‚åº¦çš„ç¨€ç–æ€§ã€‚è€Œä¸”è®­ç»ƒåçš„å¯è§†åŒ–æ•ˆæœå’Œä¼ ç»Ÿæ–¹å¼é¢„è®­ç»ƒå‡ºçš„æ•ˆæœå¾ˆç›¸ä¼¼ï¼Œè¿™ä¹Ÿè¯´æ˜äº†reluå…·å¤‡å¼•å¯¼é€‚åº¦ç¨€ç–çš„èƒ½åŠ›ã€‚<br>å› æ­¤ï¼Œreluçš„ä½¿ç”¨ï¼Œä½¿å¾—ç½‘ç»œå¯ä»¥è‡ªè¡Œå¼•å…¥ç¨€ç–æ€§ï¼ŒåŒæ—¶å¤§å¤§åœ°æé«˜äº†è®­ç»ƒé€Ÿåº¦ã€‚</li></ol><h2 id="ä¸‰ã€æ± åŒ–å±‚pooling"><a href="#ä¸‰ã€æ± åŒ–å±‚pooling" class="headerlink" title="ä¸‰ã€æ± åŒ–å±‚pooling"></a>ä¸‰ã€æ± åŒ–å±‚pooling</h2><h3 id="3-1-æ± åŒ–çš„ä½œç”¨"><a href="#3-1-æ± åŒ–çš„ä½œç”¨" class="headerlink" title="3.1 æ± åŒ–çš„ä½œç”¨"></a>3.1 æ± åŒ–çš„ä½œç”¨</h3><p><strong>æ± åŒ–æ“ä½œï¼Œæœ€å¤§çš„ä½œç”¨å°±æ˜¯å‡å°‘æ•°æ®é‡ã€‚</strong>æ± åŒ–å±‚çš„å¼•å…¥ï¼Œæ˜¯ä»¿ç…§äººçš„è§†è§‰ç³»ç»Ÿå¯¹è§†è§‰è¾“å…¥å¯¹è±¡è¿›è¡Œé™ç»´å’ŒæŠ½è±¡ã€‚</p><p>åœ¨å·ç§¯ç¥ç»ç½‘ç»œè¿‡å»çš„å·¥ä½œä¸­ï¼Œç ”ç©¶è€…æ™®éè®¤ä¸ºæ± åŒ–å±‚æœ‰å¦‚ä¸‹ä¸‰ä¸ªåŠŸæ•ˆï¼š</p><ol><li><p><strong>ç‰¹å¾ä¸å˜å½¢ï¼š</strong>æ± åŒ–æ“ä½œä½¿å¾—æ¨¡å‹æ›´åŠ å…³æ³¨æ˜¯å¦å­˜åœ¨æŸäº›ç‰¹å¾ï¼Œè€Œä¸æ˜¯ç‰¹å¾å…·ä½“çš„ä½ç½®ã€‚</p></li><li><p><strong>ç‰¹å¾é™ç»´ï¼š</strong>æ± åŒ–ç›¸å½“äºåœ¨ç©ºé—´èŒƒå›´å†…åšäº†ç»´åº¦çº¦å‡ï¼Œä»è€Œä½¿æ¨¡å‹å¯ä»¥æŠ½å–æ›´åŠ å¹¿èŒƒå›´çš„ç‰¹å¾ã€‚åŒæ—¶å‡å°äº†ä¸‹ä¸€å±‚çš„è¾“å…¥å¤§å°ï¼Œè¿›è€Œå‡å°‘è®¡ç®—é‡å’Œå‚æ•°ä¸ªæ•°ã€‚</p></li><li><p>åœ¨ä¸€å®šç¨‹åº¦ä¸Š<strong>é˜²æ­¢è¿‡æ‹Ÿåˆ</strong>ï¼Œæ›´æ–¹ä¾¿ä¼˜åŒ–ã€‚ç”±1ã€2å¯çŸ¥ï¼Œè¿™ç§æ± åŒ–æœºåˆ¶èƒ½å¤Ÿæœ‰æ•ˆåœ°åŸå› åœ¨äºï¼Œåœ¨å‘ç°ä¸€ä¸ªç‰¹å¾ä¹‹åï¼Œå®ƒçš„ç²¾ç¡®ä½ç½®è¿œä¸åŠå®ƒå’Œå…¶ä»–ç‰¹å¾çš„ç›¸å¯¹ä½ç½®çš„å…³ç³»é‡è¦ã€‚æ± åŒ–å±‚ä¼šä¸æ–­åœ°å‡å°æ•°æ®çš„ç©ºé—´å¤§å°ï¼Œå› æ­¤å‚æ•°çš„æ•°é‡å’Œè®¡ç®—é‡ä¹Ÿä¼šä¸‹é™ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¹Ÿæ§åˆ¶äº†è¿‡æ‹Ÿåˆã€‚</p></li></ol><h3 id="3-2-æ± åŒ–çš„åˆ†ç±»"><a href="#3-2-æ± åŒ–çš„åˆ†ç±»" class="headerlink" title="3.2 æ± åŒ–çš„åˆ†ç±»"></a>3.2 æ± åŒ–çš„åˆ†ç±»</h3><p>æ± åŒ–åˆ†ä¸ºä¸¤ç§ï¼ŒMax Pooling æœ€å¤§æ± åŒ–ã€Average Poolingå¹³å‡æ± åŒ–ã€‚</p><p>é¡¾åæ€ä¹‰ï¼Œæœ€å¤§æ± åŒ–å°±æ˜¯å–æœ€å¤§å€¼ï¼Œå¹³å‡æ± åŒ–å°±æ˜¯å–å¹³å‡å€¼ã€‚å…¶ä¸­<strong>â€œæœ€å¤§æ± åŒ–ï¼ˆMax poolingï¼‰â€æœ€ä¸ºå¸¸è§</strong>ã€‚</p><p>å½“å‰æœ€å¸¸ç”¨å½¢å¼çš„æ± åŒ–å±‚ï¼Œæ˜¯æ¯éš”2ä¸ªå…ƒç´ ä»å›¾åƒåˆ’åˆ†å‡º2*2çš„åŒºå—ï¼Œç„¶åå¯¹æ¯ä¸ªåŒºå—ä¸­çš„4ä¸ªæ•°å–æœ€å¤§å€¼ï¼Œè¿™å°†ä¼šå‡å°‘75%çš„æ•°æ®é‡ã€‚</p><p><img src="/images/machine-learning-6/v2-bf209e09a438648ea1482ecb90b88e21_720w.jpg"></p><h3 id="3-3-æ± åŒ–æ“ä½œ"><a href="#3-3-æ± åŒ–æ“ä½œ" class="headerlink" title="3.3 æ± åŒ–æ“ä½œ"></a>3.3 æ± åŒ–æ“ä½œ</h3><p>é€šå¸¸ï¼ŒCNNçš„å·ç§¯å±‚ä¹‹é—´éƒ½ä¼š<strong>å‘¨æœŸæ€§åœ°æ’å…¥æ± åŒ–å±‚</strong></p><p>ä¸¾ä¾‹è¯´æ˜ï¼š</p><p><img src="/images/machine-learning-6/v2-e20252d79fb8589c881f53adb82bb1fe_720w.jpg"></p><p>ä¾æ®æ­¥é•¿ï¼Œæ»‘åŠ¨çª—å£</p><p><img src="/images/machine-learning-6/v2-510ec9e7b789992b242c0ec97be77601_720w.jpg"></p><p>å¾—åˆ°æ± åŒ–åçš„feature mapï¼Œæ˜æ˜¾å‘ç°æ•°æ®é‡å‡å°‘äº†å¾ˆå¤š</p><p><img src="/images/machine-learning-6/v2-761a58554ff71b20f7b78f9bf326ee3b_720w.jpg"></p><h3 id="3-4-æ± åŒ–æ“ä½œæ€»ç»“"><a href="#3-4-æ± åŒ–æ“ä½œæ€»ç»“" class="headerlink" title="3.4 æ± åŒ–æ“ä½œæ€»ç»“"></a>3.4 æ± åŒ–æ“ä½œæ€»ç»“</h3><p>å› ä¸ºæœ€å¤§æ± åŒ–ä¿ç•™äº†æ¯ä¸€ä¸ªå°å—å†…çš„æœ€å¤§å€¼ï¼Œæ‰€ä»¥å®ƒç›¸å½“äºä¿ç•™äº†è¿™ä¸€å—æœ€ä½³åŒ¹é…ç»“æœã€‚</p><p>è¿™ä¹Ÿå°±æ„å‘³ç€ï¼šæ± åŒ–æ“ä½œ<strong>ä¸ä¼šå…·ä½“å…³æ³¨</strong>çª—å£å†…åˆ°åº•æ˜¯å“ªä¸€ä¸ªåœ°æ–¹åŒ¹é…äº†ï¼Œè€Œ<strong>åªå…³æ³¨</strong>æ˜¯ä¸æ˜¯æœ‰æŸä¸ªåœ°æ–¹åŒ¹é…ä¸Šäº†ã€‚</p><p><strong>ä¾§é¢è¯´æ˜â€”â€”CNNèƒ½å¤Ÿå‘ç°å›¾åƒä¸­æ˜¯å¦å…·æœ‰æŸç§ç‰¹å¾ï¼Œè€Œä¸ç”¨åœ¨æ„åˆ°åº•åœ¨å“ªé‡Œå…·æœ‰è¿™ç§ç‰¹å¾</strong>ã€‚</p><p>è¿™ä¹Ÿå°±å¸®åŠ©è§£å†³ï¼Œä¹‹å‰æåˆ°çš„<strong>è®¡ç®—æœºé€ä¸€åƒç´ åŒ¹é…</strong>çš„æ­»æ¿åšæ³•ã€‚</p><h2 id="å››ã€å…¨è¿æ¥å±‚"><a href="#å››ã€å…¨è¿æ¥å±‚" class="headerlink" title="å››ã€å…¨è¿æ¥å±‚"></a>å››ã€å…¨è¿æ¥å±‚</h2><h3 id="4-1-å…¨è¿æ¥å±‚çš„ä½œç”¨"><a href="#4-1-å…¨è¿æ¥å±‚çš„ä½œç”¨" class="headerlink" title="4.1 å…¨è¿æ¥å±‚çš„ä½œç”¨"></a>4.1 å…¨è¿æ¥å±‚çš„ä½œç”¨</h3><ol><li><p>ä»ä¾§é¢æ¥ç†è§£</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œ<strong>å±€éƒ¨è¿æ¥</strong>ä¸<strong>å‚æ•°å…±äº«</strong>æ˜¯å·ç§¯ç¥ç»ç½‘ç»œæœ€é‡è¦çš„ä¸¤ä¸ªæ€§è´¨</p><p><strong>å±€éƒ¨è¿æ¥ï¼Ÿ</strong>â€”â€”å›å¿†ä¸€ä¸‹å·ç§¯å±‚çš„æ“ä½œï¼Œæ˜¯ç”¨ä¸€ä¸ª3X3çš„fliterä¸åŸå›¾è¿›è¡Œè¿æ¥æ“ä½œï¼Œå¾ˆæ˜æ˜¾åŸå›¾ä¸­åªæœ‰ä¸€ä¸ª3X3çš„çª—å£èƒ½å¤Ÿä¸fliterè¿æ¥èµ·æ¥ã€‚<br><strong>å‚æ•°å…±äº«ï¼Ÿ</strong>â€”â€”é‚£çª—å£ä¹‹å¤–çš„ã€æœªè¿æ¥çš„éƒ¨åˆ†æ€ä¹ˆåŠå‘¢ï¼Ÿ æˆ‘ä»¬çŸ¥é“ï¼Œé‡‡ç”¨çš„æ˜¯å°†çª—å£æ»‘åŠ¨èµ·æ¥çš„æ–¹æ³•åç»­è¿›è¡Œè¿æ¥ã€‚è¿™ä¸ªæ–¹æ³•çš„æ€æƒ³å°±æ˜¯â€œå‚æ•°å…±äº«â€ ï¼Œå‚æ•°æŒ‡çš„å°±æ˜¯filterï¼Œç”¨æ»‘åŠ¨çª—å£çš„æ–¹å¼ï¼Œå°†è¿™ä¸ªfilterå€¼å…±äº«ç»™åŸå›¾ä¸­çš„æ¯ä¸€å—åŒºåŸŸï¼Œè¿æ¥è¿›è¡Œå·ç§¯è¿ç®—ã€‚</p><p><img src="/images/machine-learning-6/v2-2ced3a81d5977a3bf70f9721a2fd725e_720w.jpg"></p></li><li><p>ä¸ºä»€ä¹ˆæ˜¯å…¨è¿æ¥ï¼Ÿ</p><p>å·ç§¯å–çš„æ˜¯å±€éƒ¨ç‰¹å¾ï¼Œå…¨è¿æ¥å°±æ˜¯æŠŠä»¥å‰çš„å±€éƒ¨ç‰¹å¾é‡æ–°é€šè¿‡æƒå€¼çŸ©é˜µï¼Œç»„è£…æˆå®Œæ•´çš„å›¾ï¼Œå› ä¸ºç”¨åˆ°äº†æ‰€æœ‰çš„å±€éƒ¨ç‰¹å¾ï¼Œæ‰€ä»¥å«å…¨è¿æ¥ã€‚</p></li><li><p>å…¨è¿æ¥å±‚è¦åšçš„ï¼Œæ˜¯ä»€ä¹ˆï¼Ÿ</p><p>èµ·åˆ°<strong>â€œåˆ†ç±»â€çš„ä½œç”¨</strong>ã€‚</p><p>å…¨è¿æ¥å±‚è¦åšçš„ï¼Œå°±æ˜¯å¯¹ä¹‹å‰çš„æ‰€æœ‰æ“ä½œè¿›è¡Œä¸€ä¸ªæ€»ç»“ã€‚å¯¹ç‰¹å¾å›¾è¿›è¡Œ<strong>ç»´åº¦ä¸Šçš„æ”¹å˜</strong>ï¼Œæ¥<strong>å¾—åˆ°æ¯ä¸ªåˆ†ç±»ç±»åˆ«å¯¹åº”çš„æ¦‚ç‡å€¼</strong>ã€‚</p></li></ol><h3 id="4-2-å…¨è¿æ¥æ“ä½œ"><a href="#4-2-å…¨è¿æ¥æ“ä½œ" class="headerlink" title="4.2 å…¨è¿æ¥æ“ä½œ"></a>4.2 å…¨è¿æ¥æ“ä½œ</h3><p>æ¥ç€ä¸Šé¢çš„ä¾‹å­ï¼ŒåŸå›¾ç‰‡å°ºå¯¸ä¸º9X9ï¼Œåœ¨ä¸€ç³»åˆ—çš„å·ç§¯ã€reluã€æ± åŒ–æ“ä½œåï¼Œå¾—åˆ°å°ºå¯¸è¢«å‹ç¼©ä¸º2X2çš„ä¸‰å¼ ç‰¹å¾å›¾ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/images/machine-learning-6/v2-5054d37bc25a3a838d8533570a969811_720w.jpg"></p><p>å°†ä¸‰ä¸ªç‰¹å¾å›¾æ”¹å˜ç»´åº¦ç›´æ¥å˜æˆä¸€ç»´çš„æ•°æ®ï¼Œå±•å¼€çš„æ•°æ®å³ä¸ºå±äºç±»åˆ«Xçš„æ¦‚ç‡å€¼ï¼Œå€¼å¤§å°ä¹Ÿåœ¨å¯¹åº”Xçš„çº¿æ¡ç²—ç»†ä¸­è¡¨ç°å‡ºæ¥äº†ã€‚ä»¥ä¸Šæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯å¯¹æ ‡å‡†çš„åŸå›¾Xæ¥è¿›è¡Œçš„ï¼Œå› æ­¤æœ€ç»ˆåˆ†ç±»æ˜¾ç¤ºå³ä¸ºXã€‚</p><p><img src="/images/machine-learning-6/v2-ed75d8e64864d8b57a63d9a57859c819_720w.jpg"></p><p>å¦‚æœï¼Œå¯¹å¹¶ä¸æ ‡å‡†çš„å›¾è¿›è¡Œåˆ†ç±»</p><p><img src="/images/machine-learning-6/v2-61d1f8a642a5f5b225bafd4e77cdc069_720w.jpg"></p><p>è¿›è¡Œä¸€ç³»åˆ—æ“ä½œåï¼Œ0.92è¡¨ç¤ºæå…¶å¤§å¯èƒ½æ˜¯Xï¼Œå› æ­¤å¯¹åº”åˆ°Xçš„é»„è‰²çº¿æ¡æ¯”å¯¹åº”åˆ°Oçš„ç»¿è‰²çº¿æ¡è¦ç²—å¾ˆå¤šå¾ˆå¤š</p><p><img src="/images/machine-learning-6/v2-001a35b937e3eec733e1e4a89507a367_720w.jpg"></p><p>æˆ‘ä»¬å¯¹ç»“æœè¿›è¡Œç»Ÿè®¡åˆ†æåï¼Œå¯åˆ¤æ–­è¿™å¼ å›¾ç‰‡é‡Œçš„å­—æ¯ä¸ºXã€‚</p><h2 id="äº”ã€CNNæ€»ç»“"><a href="#äº”ã€CNNæ€»ç»“" class="headerlink" title="äº”ã€CNNæ€»ç»“"></a>äº”ã€CNNæ€»ç»“</h2><p>å·ç§¯ç¥ç»ç½‘ç»œä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸€éƒ¨åˆ†æ˜¯ç‰¹å¾æå–ï¼ˆå·ç§¯ã€æ¿€æ´»å‡½æ•°ã€æ± åŒ–ï¼‰ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯åˆ†ç±»è¯†åˆ«ï¼ˆå…¨è¿æ¥ï¼‰</p><p><img src="/images/machine-learning-6/v2-6293c0f53e211e032323c959a7d0e5ad_720w.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> CNN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰ï¼šåˆæ¢å·ç§¯ç¥ç»ç½‘ç»œ</title>
      <link href="2022/01/12/machine-learning-5/"/>
      <url>2022/01/12/machine-learning-5/</url>
      
        <content type="html"><![CDATA[<h1 id="æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰ï¼šåˆæ¢å·ç§¯ç¥ç»ç½‘ç»œ"><a href="#æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰ï¼šåˆæ¢å·ç§¯ç¥ç»ç½‘ç»œ" class="headerlink" title="æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰ï¼šåˆæ¢å·ç§¯ç¥ç»ç½‘ç»œ"></a>æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰ï¼šåˆæ¢å·ç§¯ç¥ç»ç½‘ç»œ</h1><h2 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h2><p>å·ç§¯ç¥ç»ç½‘ç»œä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p><ul><li>ä¸€éƒ¨åˆ†æ˜¯<strong>ç‰¹å¾æå–</strong>ï¼ˆå·ç§¯ã€æ¿€æ´»å‡½æ•°ã€æ± åŒ–ï¼‰</li><li>å¦ä¸€éƒ¨åˆ†æ˜¯<strong>åˆ†ç±»è¯†åˆ«</strong>ï¼ˆå…¨è¿æ¥ï¼‰</li></ul><p>å·ç§¯ç¥ç»ç½‘ç»œåº”ç”¨éå¸¸å¹¿æ³›ï¼š</p><ul><li><p>å›¾åƒåˆ†ç±»ï¼šåœºæ™¯åˆ†ç±»ï¼Œç›®æ ‡åˆ†ç±»</p></li><li><p>å›¾åƒæ£€æµ‹ï¼šæ˜¾è‘—æ€§æ£€æµ‹ï¼Œç‰©ä½“æ£€æµ‹ï¼Œè¯­ä¹‰æ£€æµ‹ç­‰ç­‰</p></li><li><p>å›¾åƒè¯†åˆ«ï¼šäººè„¸è¯†åˆ«ï¼Œå­—ç¬¦è¯†åˆ«ï¼Œè½¦ç‰Œè¯†åˆ«ï¼Œè¡Œä¸ºè¯†åˆ«ï¼Œæ­¥æ€è¯†åˆ«ç­‰ç­‰</p></li><li><p>å›¾åƒåˆ†å‰²ï¼šå‰æ™¯åˆ†å‰²ï¼Œè¯­ä¹‰åˆ†å‰²</p></li></ul><p>ä½†æ˜¯ï¼ŒCNNçœŸæ­£èƒ½åšçš„ï¼Œåªæ˜¯èµ·åˆ°ä¸€ä¸ª<strong>å›¾åƒç‰¹å¾æå–å™¨</strong>çš„ä½œç”¨ï¼</p><h2 id="äºŒã€CNNæ˜¯ä»€ä¹ˆ"><a href="#äºŒã€CNNæ˜¯ä»€ä¹ˆ" class="headerlink" title="äºŒã€CNNæ˜¯ä»€ä¹ˆ"></a>äºŒã€CNNæ˜¯ä»€ä¹ˆ</h2><h3 id="2-1-å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰æ˜¯ä¸€ç§å¸¦æœ‰å·ç§¯ç»“æ„çš„æ·±åº¦ç¥ç»ç½‘ç»œ"><a href="#2-1-å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰æ˜¯ä¸€ç§å¸¦æœ‰å·ç§¯ç»“æ„çš„æ·±åº¦ç¥ç»ç½‘ç»œ" class="headerlink" title="2.1 å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰æ˜¯ä¸€ç§å¸¦æœ‰å·ç§¯ç»“æ„çš„æ·±åº¦ç¥ç»ç½‘ç»œ"></a>2.1 å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰æ˜¯ä¸€ç§å¸¦æœ‰å·ç§¯ç»“æ„çš„æ·±åº¦ç¥ç»ç½‘ç»œ</h3><p><strong>å·ç§¯ç»“æ„</strong>å¯ä»¥å‡å°‘æ·±å±‚ç½‘ç»œå ç”¨çš„å†…å­˜é‡ã€‚</p><p><strong>å·ç§¯ç»“æ„æœ‰ä¸‰ä¸ªå…³é”®çš„æ“ä½œ</strong></p><ul><li>å…¶ä¸€æ˜¯å±€éƒ¨æ„Ÿå—é‡ï¼Œ</li><li>å…¶äºŒæ˜¯æƒå€¼å…±äº«ï¼Œ</li><li>å…¶ä¸‰æ˜¯æ± åŒ–å±‚poolingã€‚</li></ul><p><strong>ä½œç”¨ï¼š</strong>å¯ä»¥æœ‰æ•ˆçš„å‡å°‘ç½‘ç»œçš„å‚æ•°ä¸ªæ•°ï¼Œç¼“è§£æ¨¡å‹çš„è¿‡æ‹Ÿåˆé—®é¢˜ã€‚</p><h3 id="2-2-å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ä¸æ™®é€šç¥ç»ç½‘ç»œéå¸¸ç›¸ä¼¼"><a href="#2-2-å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ä¸æ™®é€šç¥ç»ç½‘ç»œéå¸¸ç›¸ä¼¼" class="headerlink" title="2.2 å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ä¸æ™®é€šç¥ç»ç½‘ç»œéå¸¸ç›¸ä¼¼"></a>2.2 å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ä¸æ™®é€šç¥ç»ç½‘ç»œéå¸¸ç›¸ä¼¼</h3><p><strong>ç›¸åŒç‚¹</strong>ï¼š</p><p>å®ƒä»¬éƒ½ç”±å…·æœ‰â€œå¯å­¦ä¹ çš„æƒé‡Wâ€å’Œâ€œåç½®å¸¸é‡bâ€çš„ç¥ç»å…ƒç»„æˆã€‚<br>æ¯ä¸ªç¥ç»å…ƒéƒ½æ¥æ”¶ä¸€äº›è¾“å…¥ï¼Œå¹¶åšä¸€äº›ç‚¹ç§¯è®¡ç®—ï¼Œè¾“å‡ºæ˜¯æ¯ä¸ªåˆ†ç±»çš„åˆ†æ•°ï¼Œæ™®é€šç¥ç»ç½‘ç»œé‡Œçš„ä¸€äº›è®¡ç®—æŠ€å·§åˆ°è¿™é‡Œä¾æ—§é€‚ç”¨ã€‚</p><p><strong>ä¸åŒä¹‹å¤„åœ¨å“ªï¼Ÿ</strong></p><p><strong>CNNå…·æœ‰ä¸‰ç»´ä½“ç§¯çš„ç¥ç»å…ƒ(3D volumes of neurons)</strong></p><p>å·ç§¯ç¥ç»ç½‘ç»œï¼Œåˆ©ç”¨è¾“å…¥æ˜¯å›¾ç‰‡çš„ç‰¹ç‚¹ï¼ŒæŠŠç¥ç»å…ƒè®¾è®¡æˆä¸‰ä¸ªç»´åº¦ï¼š<strong>depthã€heightã€width</strong></p><p>(æ³¨æ„è¿™ä¸ªdepthä¸æ˜¯ç¥ç»ç½‘ç»œçš„æ·±åº¦ï¼Œè€Œæ˜¯ç”¨æ¥æè¿°ç¥ç»å…ƒçš„) ã€‚</p><p>æ¯”å¦‚ï¼Œè¾“å…¥çš„å›¾ç‰‡å¤§å°æ˜¯ 3Ã— 32 Ã— 32 (rgb)ï¼Œé‚£ä¹ˆè¾“å…¥ç¥ç»å…ƒå°±ä¹Ÿå…·æœ‰ 3Ã— 32 Ã— 32 çš„ç»´åº¦ã€‚</p><p>ä¼ ç»Ÿç¥ç»ç½‘ç»œï¼š</p><p><img src="/images/machine-learning/5-1.jpg"></p><p>å·ç§¯ç¥ç»ç½‘ç»œï¼šä¸€ä¸ªCNNç”±å¾ˆå¤šå±‚ç»„æˆï¼Œå®ƒä»¬çš„è¾“å…¥æ˜¯ä¸‰ç»´çš„ï¼Œè¾“å‡ºä¹Ÿæ˜¯ä¸‰ç»´çš„</p><p><img src="/images/machine-learning/5-2.jpg"></p><h3 id="2-3-å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰çš„ç»“æ„"><a href="#2-3-å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰çš„ç»“æ„" class="headerlink" title="2.3 å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰çš„ç»“æ„"></a>2.3 å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰çš„ç»“æ„</h3><h5 id="1ï¼‰å·ç§¯å±‚ï¼ˆConvolutional-layerï¼‰"><a href="#1ï¼‰å·ç§¯å±‚ï¼ˆConvolutional-layerï¼‰" class="headerlink" title="1ï¼‰å·ç§¯å±‚ï¼ˆConvolutional layerï¼‰"></a>1ï¼‰å·ç§¯å±‚ï¼ˆConvolutional layerï¼‰</h5><p>å·ç§¯ç¥ç»ç½‘è·¯ä¸­ï¼Œæ¯å±‚å·ç§¯å±‚ç”±è‹¥å¹²å·ç§¯æ ¸ç»„æˆï¼Œæ¯ä¸ªå·ç§¯æ ¸çš„å‚æ•°éƒ½æ˜¯é€šè¿‡åå‘ä¼ æ’­ç®—æ³•ä¼˜åŒ–å¾—åˆ°çš„ã€‚</p><p>å·ç§¯è¿ç®—çš„ç›®çš„æ˜¯æå–è¾“å…¥çš„ä¸åŒç‰¹å¾ï¼Œç¬¬ä¸€å±‚å·ç§¯å±‚å¯èƒ½åªèƒ½æå–ä¸€äº›ä½çº§çš„ç‰¹å¾å¦‚è¾¹ç¼˜ã€çº¿æ¡å’Œè§’ç­‰å±‚çº§ï¼Œæ›´å¤šå±‚çš„ç½‘ç»œèƒ½ä»ä½çº§ç‰¹å¾ä¸­è¿­ä»£æå–æ›´å¤æ‚çš„ç‰¹å¾ã€‚</p><h5 id="2ï¼‰çº¿æ€§æ•´æµå±‚ï¼ˆRectified-Linear-Units-layer-ReLU-layerï¼‰"><a href="#2ï¼‰çº¿æ€§æ•´æµå±‚ï¼ˆRectified-Linear-Units-layer-ReLU-layerï¼‰" class="headerlink" title="2ï¼‰çº¿æ€§æ•´æµå±‚ï¼ˆRectified Linear Units layer, ReLU layerï¼‰"></a>2ï¼‰çº¿æ€§æ•´æµå±‚ï¼ˆRectified Linear Units layer, ReLU layerï¼‰</h5><p>è¿™ä¸€å±‚ç¥ç»çš„æ¿€æ´»å‡½æ•°ï¼ˆActivation functionï¼‰ä½¿ç”¨çº¿æ€§æ•´æµï¼ˆRectified Linear Units, ReLUï¼‰ã€‚</p><h5 id="3ï¼‰æ± åŒ–å±‚ï¼ˆPooling-layerï¼‰"><a href="#3ï¼‰æ± åŒ–å±‚ï¼ˆPooling-layerï¼‰" class="headerlink" title="3ï¼‰æ± åŒ–å±‚ï¼ˆPooling layerï¼‰"></a>3ï¼‰æ± åŒ–å±‚ï¼ˆPooling layerï¼‰</h5><p>é€šå¸¸åœ¨å·ç§¯å±‚ä¹‹åï¼Œä¼šå¾—åˆ°ç»´åº¦å¾ˆå¤§çš„ç‰¹å¾ï¼Œå°†ç‰¹å¾åˆ‡æˆå‡ ä¸ªåŒºåŸŸï¼Œå–å…¶æœ€å¤§å€¼æˆ–å¹³å‡å€¼ï¼Œå¾—åˆ°æ–°çš„ã€ç»´åº¦è¾ƒå°çš„ç‰¹å¾ã€‚</p><h5 id="4ï¼‰å…¨è¿æ¥å±‚ï¼ˆ-Fully-Connected-layerï¼‰"><a href="#4ï¼‰å…¨è¿æ¥å±‚ï¼ˆ-Fully-Connected-layerï¼‰" class="headerlink" title="4ï¼‰å…¨è¿æ¥å±‚ï¼ˆ Fully-Connected layerï¼‰"></a>4ï¼‰å…¨è¿æ¥å±‚ï¼ˆ Fully-Connected layerï¼‰</h5><p>æŠŠæ‰€æœ‰å±€éƒ¨ç‰¹å¾ï¼Œç»“åˆå˜æˆå…¨å±€ç‰¹å¾ï¼Œç”¨æ¥è®¡ç®—æœ€åæ¯ä¸€ç±»çš„å¾—åˆ†ã€‚</p><h3 id="2-4-ä¸€ä¸ªå·ç§¯ç¥ç»ç½‘ç»œå„å±‚åº”ç”¨å®ä¾‹"><a href="#2-4-ä¸€ä¸ªå·ç§¯ç¥ç»ç½‘ç»œå„å±‚åº”ç”¨å®ä¾‹" class="headerlink" title="2.4 ä¸€ä¸ªå·ç§¯ç¥ç»ç½‘ç»œå„å±‚åº”ç”¨å®ä¾‹"></a>2.4 ä¸€ä¸ªå·ç§¯ç¥ç»ç½‘ç»œå„å±‚åº”ç”¨å®ä¾‹</h3><p><img src="/images/machine-learning/5-3.jpg"></p><p>ä¸Šå›¾ä¸­ï¼ŒCNNè¦åšçš„äº‹æƒ…æ˜¯ï¼šç»™å®šä¸€å¼ å›¾ç‰‡ï¼Œç°åœ¨éœ€è¦æ¨¡å‹åˆ¤æ–­è¿™å¼ å›¾ç‰‡é‡Œå…·ä½“æ˜¯ä¸€ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œæ€»ä¹‹è¾“å‡ºä¸€ä¸ªç»“æœï¼šè¿™æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>å·¦è¾¹æ˜¯ï¼š</p><ul><li><strong>æ•°æ®è¾“å…¥å±‚</strong>ï¼Œå¯¹æ•°æ®åšä¸€äº›å¤„ç†ã€‚</li></ul><p>ä¸­é—´æ˜¯ï¼š</p><ul><li>CONVï¼š<strong>å·ç§¯è®¡ç®—å±‚ï¼Œ</strong>çº¿æ€§ä¹˜ç§¯ã€æ±‚å’Œã€‚</li><li>RELUï¼š<strong>æ¿€åŠ±å±‚</strong>ï¼ŒReLUæ˜¯æ¿€æ´»å‡½æ•°çš„ä¸€ç§ã€‚</li><li>POOLï¼š<strong>æ± åŒ–å±‚</strong>ï¼Œç®€è¨€ä¹‹ï¼Œå³å–åŒºåŸŸå¹³å‡æˆ–æœ€å¤§ã€‚</li></ul><p>å³è¾¹æ˜¯ï¼š</p><ul><li>FCï¼š<strong>å…¨è¿æ¥å±‚ï¼Œ</strong>æ‰€æœ‰å±€éƒ¨ç‰¹å¾ï¼Œç»“åˆå˜æˆå…¨å±€ç‰¹å¾ï¼Œåˆ†ç±»è¯„åˆ†</li></ul><p>å…¶ä¸­ï¼Œå·ç§¯è®¡ç®—å±‚æ˜¯CNNçš„æ ¸å¿ƒï¼</p><h2 id="ä¸‰ã€ä¸ºä»€ä¹ˆä½¿ç”¨CNN"><a href="#ä¸‰ã€ä¸ºä»€ä¹ˆä½¿ç”¨CNN" class="headerlink" title="ä¸‰ã€ä¸ºä»€ä¹ˆä½¿ç”¨CNN"></a>ä¸‰ã€ä¸ºä»€ä¹ˆä½¿ç”¨CNN</h2><p>åœ¨å›¾åƒé¢†åŸŸï¼Œç”¨ä¼ ç»Ÿçš„ç¥ç»ç½‘ç»œå¹¶ä¸åˆé€‚ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œå›¾åƒæ˜¯ç”±ä¸€ä¸ªä¸ªåƒç´ ç‚¹æ„æˆï¼Œæ¯ä¸ªåƒç´ ç‚¹æœ‰ä¸‰ä¸ªé€šé“ï¼Œåˆ†åˆ«ä»£è¡¨RGBé¢œè‰²ã€‚å¦‚æœä¸€ä¸ªå›¾åƒçš„å°ºå¯¸æ˜¯ï¼ˆ28ï¼Œ28ï¼Œ1ï¼‰ï¼Œå³ä»£è¡¨è¿™ä¸ªå›¾åƒçš„æ˜¯ä¸€ä¸ªé•¿å®½å‡ä¸º28ï¼Œchannelä¸º1çš„å›¾åƒï¼ˆchannelä¹Ÿå«depth,æ­¤å¤„1ä»£è¡¨ç°è‰²å›¾åƒï¼‰ã€‚</p><p>ä½¿ç”¨å…¨è¿æ¥çš„ç½‘ç»œç»“æ„ï¼Œå³ï¼Œç½‘ç»œä¸­çš„ç¥ç»ä¸ä¸ç›¸é‚»å±‚ä¸Šçš„æ¯ä¸ªç¥ç»å…ƒå‡è¿æ¥ï¼Œé‚£å°±æ„å‘³ç€æˆ‘ä»¬çš„ç½‘ç»œè¾“å…¥å±‚æœ‰28 * 28 =784ä¸ªç¥ç»å…ƒï¼Œå†å‡è®¾éšè—å±‚é‡‡ç”¨äº†15ä¸ªç¥ç»å…ƒï¼Œè¾“å‡ºå±‚é‡‡ç”¨äº†10ä¸ªç¥ç»å…ƒã€‚é‚£ä¹ˆç®€å•è®¡ç®—ä¸€ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦çš„å‚æ•°ä¸ªæ•°(wå’Œb)å°±æœ‰ï¼š784*15*10+15+10=117625ä¸ªã€‚è¿™ä¸ªå‚æ•°å¤ªå¤šäº†ï¼Œéšä¾¿è¿›è¡Œä¸€æ¬¡åå‘ä¼ æ’­è®¡ç®—é‡éƒ½æ˜¯å·¨å¤§çš„ï¼Œä»è®¡ç®—èµ„æºå’Œè°ƒå‚çš„è§’åº¦éƒ½ä¸å»ºè®®ç”¨ä¼ ç»Ÿçš„ç¥ç»ç½‘ç»œã€‚</p><p>ä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œï¼Œå°±å¯ä»¥æ¯”è¾ƒå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å·ç§¯å±‚å¯ä»¥å¾ˆå¥½çš„åˆ©ç”¨å›¾åƒæœ¬èº«å…·æœ‰çš„äºŒç»´ç©ºé—´ç‰¹å¾ï¼Œæ¯”å…¨è¿æ¥ç½‘ç»œä»…ä»…è€ƒè™‘å•ä¸ªåƒç´ ç‚¹çš„æ•ˆæœä¼šæ›´å¥½ï¼ŒåŒæ—¶ä½¿ç”¨å·ç§¯æ ¸åå›¾ç‰‡çš„å°ºå¯¸å˜å°ï¼Œæ–¹ä¾¿åç»­è®¡ç®—ï¼›è€Œæ± åŒ–å±‚é€šè¿‡é™é‡‡æ ·çš„æ–¹å¼ï¼Œåœ¨ä¸å½±å“å›¾åƒè´¨é‡çš„æƒ…å†µä¸‹ï¼Œå‹ç¼©å›¾ç‰‡ï¼Œå‡å°‘å‚æ•°ï¼Œè¿™æ ·è®¡ç®—é‡ä¹Ÿä¼šæ¯”å…¨è¿æ¥ç½‘ç»œå°å¾ˆå¤šã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> CNN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰ï¼šæ‰‹å†™å¤šå±‚ç¥ç»ç½‘ç»œå¹¶åº”ç”¨</title>
      <link href="2022/01/10/machine-learning-4/"/>
      <url>2022/01/10/machine-learning-4/</url>
      
        <content type="html"><![CDATA[<h1 id="æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰ï¼šæ‰‹å†™å¤šå±‚ç¥ç»ç½‘ç»œå¹¶åº”ç”¨"><a href="#æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰ï¼šæ‰‹å†™å¤šå±‚ç¥ç»ç½‘ç»œå¹¶åº”ç”¨" class="headerlink" title="æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰ï¼šæ‰‹å†™å¤šå±‚ç¥ç»ç½‘ç»œå¹¶åº”ç”¨"></a>æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰ï¼šæ‰‹å†™å¤šå±‚ç¥ç»ç½‘ç»œå¹¶åº”ç”¨</h1><p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¹ äº†å¤šå±‚ç¥ç»ç½‘ç»œçš„åŸºæœ¬åŸç†ï¼Œå¹¶ä¸”å¯¹æ­£å‘ä¼ æ’­ã€åå‘ä¼ æ’­å’Œæ¿€æ´»å‡½æ•°éƒ½æœ‰äº†ä¸€å®šçš„äº†è§£ã€‚</p><p>åœ¨è¿™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†ä»…é€šè¿‡numpyå’Œsklearnçš„accuracy_scoreï¼ˆå·äº†ä¸ªæ‡’ï¼Œæ²¡æ‰‹å†™ï¼‰æ¥å®ç°ä¸€ä¸ªå¤šå±‚ç¥ç»ç½‘ç»œï¼Œå¹¶ä¸”å°†å…¶åº”ç”¨åˆ°ä¸åŒçš„æƒ…æ™¯ä¸­ã€‚</p><h2 id="å¤šå±‚ç¥ç»ç½‘ç»œçš„æ„å»º"><a href="#å¤šå±‚ç¥ç»ç½‘ç»œçš„æ„å»º" class="headerlink" title="å¤šå±‚ç¥ç»ç½‘ç»œçš„æ„å»º"></a>å¤šå±‚ç¥ç»ç½‘ç»œçš„æ„å»º</h2><p>åœ¨ç†è§£äº†å¤šå±‚ç¥ç»ç½‘ç»œçš„åŸç†ä¹‹åï¼Œæ‰‹å†™ä¸€ä¸ªä¸‹é¢è¿™æ ·çš„ä»£ç å¹¶ä¸æ˜¯å¾ˆéš¾ï¼Œæ‰€ä»¥è¿™é‡Œå°±è®²ä¸€è®²ä¸»è¦çš„æ€è·¯ï¼š</p><ul><li>è¿™é‡Œä½¿ç”¨sigmoidå‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼›</li><li>æ ¹æ®ä¸Šä¸€ç¯‡æ–‡ç« ä»‹ç»çš„ç¥ç»ç½‘ç»œçš„çŸ©é˜µè¡¨ç¤ºï¼Œæˆ‘ä»¬è¿™é‡Œç›´æ¥ç”¨çŸ©é˜µè¡¨ç¤ºæ¯ä¸€å±‚çš„å‚æ•°ï¼Œå¹¶ä¸”å°†æ¯ä¸€å±‚çš„å‚æ•°ä¿å­˜åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼›</li><li>æ ¹æ®ä¹‹å‰è®²çš„æ­£å‘ä¼ æ’­ã€åå‘ä¼ æ’­å…¬å¼æ¥æ„é€ æ­£å‘ä¼ æ’­ã€åå‘ä¼ æ’­å‡½æ•°ã€‚</li><li>æ—¢ç„¶æ˜¯ä½¿ç”¨çŸ©é˜µè¡¨ç¤ºç¥ç»ç½‘ç»œï¼Œæˆ‘ä»¬å¢åŠ ã€å‡å°‘å±‚æ•°éƒ½éå¸¸å®¹æ˜“ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆå§‹åŒ–çš„æ—¶å€™ä¼ å…¥å‚æ•°æ¥æŒ‡å®šè¿™ä¸ªå¤šå±‚ç¥ç»ç½‘ç»œçš„ç»“æ„ï¼Œè¿™æ ·ä½¿ç”¨çš„æ—¶å€™å°±æ›´çµæ´»äº†ã€‚</li></ul><p>éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š</p><ul><li><p>åœ¨æ‰‹å†™å®ç°çš„è¿‡ç¨‹ä¸­æˆ‘å‘ç°åŸå§‹çš„sigmoidå‡½æ•°å¯èƒ½ä¼šæº¢å‡ºï¼Œæ‰€ä»¥å°±åšäº†ä¸€ç‚¹å¤„ç†ï¼›</p></li><li><p>åå‘ä¼ æ’­è¿™é‡Œéœ€è¦åˆ¤æ–­æ˜¯è¾“å‡ºå±‚è¿˜æ˜¯éšè—å±‚ï¼Œè®¡ç®—å…¬å¼ä¸ä¸€æ ·ï¼›</p></li><li><p>softmaxå‡½æ•°ä»…ä»…ç”¨åœ¨predictå‡½æ•°ä¸­ï¼Œç›®çš„æ˜¯è¾“å‡ºæ¯ä¸€ä¸ªç§ç±»çš„æ¦‚ç‡ï¼›</p><p>è¿™é‡Œçš„predictå‡½æ•°å…¶å®æœ¬è´¨ä¸Šå°±æ˜¯æ­£å‘ä¼ æ’­ï¼Œæˆ‘ä¸ºäº†æ–¹ä¾¿å¤„ç†æ•°æ®æ‰è¿™ä¹ˆå†™çš„ï¼Œå®é™…ä¸Šå¹¶ä¸éœ€è¦è¿™ä¹ˆåšã€‚</p></li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>metrics <span class="token keyword">import</span> accuracy_score<span class="token comment"># def sigmoid(x):</span><span class="token comment">#     """</span><span class="token comment">#     sigmoidå‡½æ•°</span><span class="token comment">#     """</span><span class="token comment">#     return 1.0 / (1 + np.exp(-x))</span><span class="token keyword">def</span> <span class="token function">sigmoid</span><span class="token punctuation">(</span>Z<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    sigmoidå‡½æ•°ï¼Œè§£å†³äº†æº¢å‡ºçš„é—®é¢˜    æŠŠå¤§äº0å’Œå°äº0çš„å…ƒç´ åˆ†åˆ«å¤„ç†    åŸæ¥çš„sigmoidå‡½æ•°æ˜¯ 1/(1+np.exp(-Z))    å½“Zæ˜¯æ¯”è¾ƒå°çš„è´Ÿæ•°æ—¶ä¼šå‡ºç°ä¸Šæº¢ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡è®¡ç®—exp(Z) / (1+exp(Z)) æ¥è§£å†³    """</span>    mask <span class="token operator">=</span> <span class="token punctuation">(</span>Z <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>    positive_out <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros_like<span class="token punctuation">(</span>Z<span class="token punctuation">,</span> dtype<span class="token operator">=</span><span class="token string">'float64'</span><span class="token punctuation">)</span>    negative_out <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros_like<span class="token punctuation">(</span>Z<span class="token punctuation">,</span> dtype<span class="token operator">=</span><span class="token string">'float64'</span><span class="token punctuation">)</span>    <span class="token comment"># å¤§äº0çš„æƒ…å†µ</span>    positive_out <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span><span class="token operator">-</span>Z<span class="token punctuation">,</span> positive_out<span class="token punctuation">,</span> where<span class="token operator">=</span>mask<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># æ¸…é™¤å¯¹å°äºç­‰äº0å…ƒç´ çš„å½±å“</span>    positive_out<span class="token punctuation">[</span><span class="token operator">~</span>mask<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment"># å°äºç­‰äº0çš„æƒ…å†µ</span>    expZ <span class="token operator">=</span> np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span>Z<span class="token punctuation">,</span> negative_out<span class="token punctuation">,</span> where<span class="token operator">=</span><span class="token operator">~</span>mask<span class="token punctuation">)</span>    negative_out <span class="token operator">=</span> expZ <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> expZ<span class="token punctuation">)</span>    <span class="token comment"># æ¸…é™¤å¯¹å¤§äº0å…ƒç´ çš„å½±å“</span>    negative_out<span class="token punctuation">[</span>mask<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">return</span> positive_out <span class="token operator">+</span> negative_out<span class="token comment"># FIXME softmaxå‡½æ•°è¾“å‡ºçš„æ¦‚ç‡æ¯”è¾ƒä½ï¼Œæ¯”å¦‚é”™è¯¯åˆ†ç±»æ¦‚ç‡ä¸º0.18ï¼Œè€Œæ­£ç¡®æ¦‚ç‡ä¸º0.22ï¼Œç›¸å·®ä¸å¤ªå¤§</span><span class="token keyword">def</span> <span class="token function">softmax</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    å¯¹è¾“å…¥xçš„æ¯ä¸€è¡Œè®¡ç®—softmaxã€‚    è¯¥å‡½æ•°å¯¹äºè¾“å…¥æ˜¯å‘é‡ï¼ˆå°†å‘é‡è§†ä¸ºå•ç‹¬çš„è¡Œï¼‰æˆ–è€…çŸ©é˜µï¼ˆM x Nï¼‰å‡é€‚ç”¨ã€‚    ä»£ç åˆ©ç”¨softmaxå‡½æ•°çš„æ€§è´¨: softmax(x) = softmax(x + c)    :param x: ä¸€ä¸ªNç»´å‘é‡ï¼Œæˆ–è€…M x Nç»´numpyçŸ©é˜µ.    """</span>    <span class="token comment"># æ ¹æ®è¾“å…¥ç±»å‹æ˜¯çŸ©é˜µè¿˜æ˜¯å‘é‡åˆ†åˆ«è®¡ç®—softmax</span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>shape<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">:</span>        <span class="token comment"># çŸ©é˜µ</span>        tmp <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># å¾—åˆ°æ¯è¡Œçš„æœ€å¤§å€¼ï¼Œç”¨äºç¼©æ”¾æ¯è¡Œçš„å…ƒç´ ï¼Œé¿å…æº¢å‡ºã€‚ shapeä¸º(x.shape[0],)</span>        x <span class="token operator">-=</span> tmp<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># åˆ©ç”¨æ€§è´¨ç¼©æ”¾å…ƒç´ </span>        x <span class="token operator">=</span> np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span>x<span class="token punctuation">)</span>  <span class="token comment"># è®¡ç®—æ‰€æœ‰å€¼çš„æŒ‡æ•°</span>        tmp <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># æ¯è¡Œæ±‚å’Œ</span>        x <span class="token operator">/=</span> tmp<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># æ±‚softmax</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token comment"># å‘é‡</span>        tmp <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>  <span class="token comment"># å¾—åˆ°æœ€å¤§å€¼</span>        x <span class="token operator">-=</span> tmp  <span class="token comment"># åˆ©ç”¨æœ€å¤§å€¼ç¼©æ”¾æ•°æ®</span>        x <span class="token operator">=</span> np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span>x<span class="token punctuation">)</span>  <span class="token comment"># å¯¹æ‰€æœ‰å…ƒç´ æ±‚æŒ‡æ•°</span>        tmp <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>  <span class="token comment"># æ±‚å…ƒç´ å’Œ</span>        x <span class="token operator">/=</span> tmp  <span class="token comment"># æ±‚somftmax</span>    <span class="token keyword">return</span> x<span class="token keyword">class</span> <span class="token class-name">Neural_Network</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    å¤šå±‚å…¨è¿æ¥ç¥ç»ç½‘ç»œ    """</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nodes<span class="token punctuation">,</span> rate<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">,</span> epoch<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        åˆå§‹åŒ–ä¸€ä¸ªç¥ç»ç½‘ç»œå®ä¾‹        :param nodes: ç½‘ç»œå±‚æ¬¡ç»“æ„        :param rate: å­¦ä¹ é€Ÿç‡        :param epoch: æœ€å¤§è¿­ä»£æ¬¡æ•°        """</span>        <span class="token comment"># ç½‘ç»œå±‚æ¬¡ç»“æ„</span>        self<span class="token punctuation">.</span>nodes <span class="token operator">=</span> nodes        <span class="token comment"># å­¦ä¹ é€Ÿç‡</span>        self<span class="token punctuation">.</span>rate <span class="token operator">=</span> rate        <span class="token comment"># æœ€å¤§è¿­ä»£æ¬¡æ•°</span>        self<span class="token punctuation">.</span>epoch <span class="token operator">=</span> epoch        <span class="token comment"># åç½®çŸ©é˜µ</span>        self<span class="token punctuation">.</span>B <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token comment"># æƒé‡çŸ©é˜µ</span>        self<span class="token punctuation">.</span>W <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token comment"># æ¯ä¸€å±‚çš„è¾“å‡º</span>        self<span class="token punctuation">.</span>Z <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token comment"># åˆå§‹åŒ–æƒé‡ä¸åé‡</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>nodes<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># å¯¹äºæ¯ä¸€å±‚ç½‘ç»œï¼Œæ ¹æ®è¯¥å±‚èŠ‚ç‚¹æ•°ç›®è¿›è¡Œåˆå§‹åŒ–</span>            <span class="token comment"># æƒé‡çŸ©é˜µï¼Œä¸èƒ½åˆå§‹åŒ–ä¸º0æˆ–1ï¼Œä¸ç„¶è¿­ä»£ä¼šå¤±å»æ¢¯åº¦ï¼</span>            w <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randn<span class="token punctuation">(</span>self<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> np<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>self<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            b <span class="token operator">=</span> np<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>W<span class="token punctuation">.</span>append<span class="token punctuation">(</span>w<span class="token punctuation">)</span>            self<span class="token punctuation">.</span>B<span class="token punctuation">.</span>append<span class="token punctuation">(</span>b<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        æ­£å‘ä¼ æ’­å‡½æ•°        """</span>        <span class="token comment"># å­˜æ”¾æ¯å±‚è¾“å‡º</span>        Z <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        x <span class="token operator">=</span> data        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>nodes<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            x <span class="token operator">=</span> sigmoid<span class="token punctuation">(</span>x<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>self<span class="token punctuation">.</span>W<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>B<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token comment"># æ‰€æœ‰å±‚è¾“å‡ºå­˜å…¥listä¸­</span>            Z<span class="token punctuation">.</span>append<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>Z <span class="token operator">=</span> Z    <span class="token keyword">def</span> <span class="token function">backpropagation</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        åå‘ä¼ æ’­å‡½æ•°        """</span>        D <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        d <span class="token operator">=</span> t        <span class="token comment"># è®¡ç®—delta</span>        n_layer <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>nodes<span class="token punctuation">)</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n_layer <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> j <span class="token operator">==</span> n_layer <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">:</span>  <span class="token comment"># å¦‚æœæ˜¯è¾“å‡ºå±‚</span>                <span class="token comment"># delta = y * (1 - y) * (t - y)</span>                d <span class="token operator">=</span> self<span class="token punctuation">.</span>Z<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>Z<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>t <span class="token operator">-</span> self<span class="token punctuation">.</span>Z<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># å¦‚æœæ˜¯éšè—å±‚</span>                <span class="token comment"># delta = y * (1-y) * sum( delta_k * w_k)</span>                d <span class="token operator">=</span> self<span class="token punctuation">.</span>Z<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>Z<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>d<span class="token punctuation">,</span> self<span class="token punctuation">.</span>W<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>T<span class="token punctuation">)</span>            <span class="token comment"># å­˜å…¥listä¸­ï¼Œåå‘è®¡ç®—ï¼Œåè®¡ç®—çš„å­˜å‰é¢</span>            D<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span>        <span class="token comment"># æ›´æ–°æƒé‡å’Œåç½®</span>        <span class="token comment"># w += n * delta</span>        self<span class="token punctuation">.</span>W<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+=</span> self<span class="token punctuation">.</span>rate <span class="token operator">*</span> np<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>data<span class="token punctuation">.</span>T<span class="token punctuation">,</span> D<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>B<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+=</span> self<span class="token punctuation">.</span>rate <span class="token operator">*</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>D<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>nodes<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>W<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+=</span> self<span class="token punctuation">.</span>rate <span class="token operator">*</span> np<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>self<span class="token punctuation">.</span>Z<span class="token punctuation">[</span>k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>T<span class="token punctuation">,</span> D<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>B<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+=</span> self<span class="token punctuation">.</span>rate <span class="token operator">*</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>D<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">train</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data<span class="token punctuation">,</span> label<span class="token punctuation">,</span> show_process<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        è¿›è¡Œè®­ç»ƒ        :param data: è®­ç»ƒé›†æ•°æ®        :param label: è®­ç»ƒé›†æ ‡ç­¾        :param show_process: æ˜¯å¦å±•ç¤ºè¿­ä»£è¿‡ç¨‹        """</span>        <span class="token comment"># æ ¹æ®æ ·æœ¬ä¸ªæ•°åˆ›å»ºæ­£ç¡®ç»“æœçŸ©é˜µï¼Œæ¯ä¸ªæ ·æœ¬å¯¹åº”ç»“æœçŸ©é˜µä¸­æ­£ç¡®çš„ç»“æœä½ç½®å€¼1ï¼Œå…¶ä»–ç½®0</span>        t <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            t<span class="token punctuation">[</span>np<span class="token punctuation">.</span>where<span class="token punctuation">(</span>label <span class="token operator">==</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>epoch<span class="token punctuation">)</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>forward<span class="token punctuation">(</span>data<span class="token punctuation">)</span>            <span class="token keyword">if</span> show_process<span class="token punctuation">:</span>                loss <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t <span class="token operator">-</span> self<span class="token punctuation">.</span>Z<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span>                predict <span class="token operator">=</span> np<span class="token punctuation">.</span>argmax<span class="token punctuation">(</span>self<span class="token punctuation">.</span>Z<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>                accuracy <span class="token operator">=</span> accuracy_score<span class="token punctuation">(</span>label<span class="token punctuation">,</span> predict<span class="token punctuation">)</span>                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Loss:%f"</span> <span class="token operator">%</span> loss<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">)</span>                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"accuracy%f"</span> <span class="token operator">%</span> accuracy<span class="token punctuation">)</span>            self<span class="token punctuation">.</span>backpropagation<span class="token punctuation">(</span>data<span class="token punctuation">,</span> t<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">predict</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data<span class="token punctuation">,</span> display<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        è¿›è¡Œé¢„æµ‹ï¼Œé€šè¿‡softmaxç»™å‡ºæœ€åçš„é¢„æµ‹ç»“æœå’Œç±»åˆ«æ‰€å±çš„æ¦‚ç‡        :param data: é¢„æµ‹æ•°æ®        :param display: æ˜¯å¦å±•ç¤ºsoftmaxçš„ç»“æœ        :return: é¢„æµ‹ç»“æœå’Œé¢„æµ‹æ¦‚ç‡        """</span>        <span class="token comment"># å­˜æ”¾æ¯å±‚è¾“å‡º</span>        Z <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        x <span class="token operator">=</span> data        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>nodes<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            x <span class="token operator">=</span> sigmoid<span class="token punctuation">(</span>x<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>self<span class="token punctuation">.</span>W<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>B<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token comment"># æ‰€æœ‰å±‚è¾“å‡ºå­˜å…¥listä¸­</span>            Z<span class="token punctuation">.</span>append<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        softmax_result <span class="token operator">=</span> softmax<span class="token punctuation">(</span>Z<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        result <span class="token operator">=</span> np<span class="token punctuation">.</span>argmax<span class="token punctuation">(</span>softmax_result<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>        rate <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            rate<span class="token punctuation">.</span>append<span class="token punctuation">(</span>softmax_result<span class="token punctuation">[</span>i<span class="token punctuation">,</span> result<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> display<span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span>softmax_result<span class="token punctuation">)</span>        <span class="token keyword">return</span> result<span class="token punctuation">,</span> rate<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è§£å†³circlesé—®é¢˜"><a href="#è§£å†³circlesé—®é¢˜" class="headerlink" title="è§£å†³circlesé—®é¢˜"></a>è§£å†³circlesé—®é¢˜</h2><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯å’Œ<a href="https://immortalqx.github.io/2022/01/07/machine-learning-1/">æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ï¼šK-Meansèšç±»ç®—æ³•</a>ä¸€æ ·çš„æ•°æ®é›†ï¼Œè·å–æ–¹å¼å‚è€ƒè¿™ç¯‡æ–‡ç« å³å¯ã€‚</p><p><img src="/images/machine-learning/1-1.png"></p><p>å®šä¹‰Neural Networkå®ä¾‹æ—¶æˆ‘ä»¬ä¼ å…¥äº†å‚æ•°<code>nodes=[2, 8, 8, 2]</code>ï¼Œå› ä¸º</p><ul><li>æ•°æ®é›†æ˜¯ä¸¤ä¸ªå¹³é¢ä¸Šçš„åœ†ç¯ï¼Œæ‰€ä»¥æ¯ä¸ªç‚¹çš„åæ ‡éƒ½å¯ä»¥ç”¨ä¸¤ä¸ªæ•°è¡¨ç¤ºï¼Œä»è€Œè¾“å…¥å±‚èŠ‚ç‚¹ä¸º2ï¼›</li><li>æˆ‘ä»¬å®šä¹‰ä¸­é—´æœ‰ä¸¤ä¸ªéšè—å±‚ï¼Œæ¯ä¸ªéšè—å±‚æœ‰8ä¸ªèŠ‚ç‚¹ï¼›</li><li>æˆ‘ä»¬éœ€è¦é¢„æµ‹æŸä¸ªç‚¹æ˜¯å±äºå“ªä¸ªåœ†ç¯ä¸Šçš„ï¼Œåªæœ‰ä¸¤ç§åœ†ç¯ï¼Œæ‰€ä»¥æ˜¯ä¸€ä¸ªäºŒåˆ†ç±»é—®é¢˜ï¼Œå› æ­¤è¾“å‡ºå±‚èŠ‚ç‚¹ä¸º2ã€‚</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>metrics <span class="token keyword">import</span> accuracy_score<span class="token keyword">import</span> sklearn<span class="token punctuation">.</span>neural_network <span class="token keyword">as</span> NN<span class="token keyword">import</span> Neural_Network <span class="token keyword">as</span> MyNNfig_num <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">def</span> <span class="token function">plotFeature</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> labels_<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    äºŒç»´ç©ºé—´æ˜¾ç¤ºèšç±»ç»“æœ    """</span>    <span class="token comment"># è·å–ç°‡é›†çš„ä¸ªæ•°</span>    clusterNum <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">(</span>labels_<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># å†…å®šçš„é¢œè‰²ç§ç±»</span>    scatterColors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"orange"</span><span class="token punctuation">,</span> <span class="token string">"purple"</span><span class="token punctuation">,</span> <span class="token string">"cyan"</span><span class="token punctuation">,</span> <span class="token string">"red"</span><span class="token punctuation">,</span> <span class="token string">"green"</span><span class="token punctuation">]</span>    <span class="token comment"># åˆ¤æ–­æ•°æ®çš„ç»´åº¦æ˜¯ä¸æ˜¯ï¼’</span>    <span class="token keyword">if</span> np<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">2</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sorry,the dimension of your dataset is not 2!"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token number">1</span>    <span class="token comment"># åˆ¤æ–­ç°‡é›†ç±»åˆ«æ˜¯å¦å¤§äºï¼•ç±»</span>    <span class="token keyword">if</span> clusterNum <span class="token operator">&gt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>scatterColors<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sorry,your k is too large,please add length of the scatterColors!"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token number">1</span>    <span class="token comment"># æ•£ç‚¹å›¾çš„ç»˜åˆ¶</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>clusterNum<span class="token punctuation">)</span><span class="token punctuation">:</span>        colorSytle <span class="token operator">=</span> scatterColors<span class="token punctuation">[</span>i <span class="token operator">%</span> <span class="token builtin">len</span><span class="token punctuation">(</span>scatterColors<span class="token punctuation">)</span><span class="token punctuation">]</span>        subCluster <span class="token operator">=</span> data<span class="token punctuation">[</span>np<span class="token punctuation">.</span>where<span class="token punctuation">(</span>labels_ <span class="token operator">==</span> i<span class="token punctuation">)</span><span class="token punctuation">]</span>        plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>subCluster<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> subCluster<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token operator">=</span>colorSytle<span class="token punctuation">,</span> s<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>    <span class="token comment"># è®¾ç½®xã€yè½´å’Œæ ‡é¢˜</span>    plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"x-label"</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"y-label"</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">load_circles</span><span class="token punctuation">(</span>rate<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># ä»æ–‡æœ¬ä¸­åŠ è½½æ•°æ®</span>    dataset_circles <span class="token operator">=</span> np<span class="token punctuation">.</span>loadtxt<span class="token punctuation">(</span><span class="token string">"../dataset_circles.csv"</span><span class="token punctuation">,</span> delimiter<span class="token operator">=</span><span class="token string">","</span><span class="token punctuation">)</span>    <span class="token comment"># éšæœºæ‰“ä¹±æ•°æ®</span>    data_size <span class="token operator">=</span> np<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>dataset_circles<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    shuffled_index <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>permutation<span class="token punctuation">(</span>data_size<span class="token punctuation">)</span>    dataset_circles <span class="token operator">=</span> dataset_circles<span class="token punctuation">[</span>shuffled_index<span class="token punctuation">]</span>    <span class="token comment"># åˆ†å‰²å‰ä¸¤åˆ—ä¸ºdata</span>    data <span class="token operator">=</span> dataset_circles<span class="token punctuation">.</span>T<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>    <span class="token comment"># åˆ†å‰²ç¬¬ä¸‰åˆ—ä¸ºlabel</span>    label <span class="token operator">=</span> dataset_circles<span class="token punctuation">.</span>T<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>    <span class="token comment"># åˆ†å‰²æ•°æ®é›†</span>    split_index <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>data_size <span class="token operator">*</span> rate<span class="token punctuation">)</span>    train_data <span class="token operator">=</span> data<span class="token punctuation">.</span>T<span class="token punctuation">[</span><span class="token punctuation">:</span>split_index<span class="token punctuation">]</span>    train_label <span class="token operator">=</span> label<span class="token punctuation">.</span>T<span class="token punctuation">[</span><span class="token punctuation">:</span>split_index<span class="token punctuation">]</span>    test_data <span class="token operator">=</span> data<span class="token punctuation">.</span>T<span class="token punctuation">[</span>split_index<span class="token punctuation">:</span><span class="token punctuation">]</span>    test_label <span class="token operator">=</span> label<span class="token punctuation">.</span>T<span class="token punctuation">[</span>split_index<span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> train_data<span class="token punctuation">,</span> train_label<span class="token punctuation">,</span> test_data<span class="token punctuation">,</span> test_label<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    train_data<span class="token punctuation">,</span> train_label<span class="token punctuation">,</span> test_data<span class="token punctuation">,</span> test_label <span class="token operator">=</span> load_circles<span class="token punctuation">(</span>rate<span class="token operator">=</span><span class="token number">0.75</span><span class="token punctuation">)</span>    <span class="token comment"># =====================ä½¿ç”¨è‡ªå·±çš„æ–¹æ³•åšé¢„æµ‹========================</span>    <span class="token comment"># æ„å»ºä¸€ä¸ªå¤šå±‚ç¥ç»ç½‘ç»œ</span>    nn <span class="token operator">=</span> MyNN<span class="token punctuation">.</span>Neural_Network<span class="token punctuation">(</span>nodes<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rate<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">,</span> epoch<span class="token operator">=</span><span class="token number">2000</span><span class="token punctuation">)</span>    <span class="token comment"># å¼€å§‹è®­ç»ƒå¹¶ä¸”è®¡æ—¶</span>    start <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    nn<span class="token punctuation">.</span>train<span class="token punctuation">(</span>train_data<span class="token punctuation">,</span> train_label<span class="token punctuation">,</span> show_process<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>    end <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"MyNN è®­ç»ƒç”¨æ—¶:\t%f s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># å¯¹è®­ç»ƒé›†åšé¢„æµ‹å¹¶ä¸”è¾“å‡ºå‡†ç¡®åº¦ä¸ç»“æœ</span>    train_result<span class="token punctuation">,</span> _ <span class="token operator">=</span> nn<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>train_data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"MyNN å¯¹è®­ç»ƒé›†åšé¢„æµ‹:\t"</span><span class="token punctuation">,</span> accuracy_score<span class="token punctuation">(</span>train_label<span class="token punctuation">,</span> train_result<span class="token punctuation">)</span><span class="token punctuation">)</span>    plotFeature<span class="token punctuation">(</span>train_data<span class="token punctuation">,</span> train_result<span class="token punctuation">)</span>    <span class="token comment"># å¯¹æµ‹è¯•é›†åšé¢„æµ‹å¹¶ä¸”è¾“å‡ºå‡†ç¡®åº¦ä¸ç»“æœ</span>    test_result<span class="token punctuation">,</span> _ <span class="token operator">=</span> nn<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>test_data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"MyNN å¯¹æµ‹è¯•é›†åšé¢„æµ‹:\t"</span><span class="token punctuation">,</span> accuracy_score<span class="token punctuation">(</span>test_label<span class="token punctuation">,</span> test_result<span class="token punctuation">)</span><span class="token punctuation">)</span>    plotFeature<span class="token punctuation">(</span>test_data<span class="token punctuation">,</span> test_result<span class="token punctuation">)</span>    <span class="token comment"># =====================ä½¿ç”¨sklearnåšé¢„æµ‹========================</span>    <span class="token comment"># æ„å»ºä¸€ä¸ªå¤šå±‚ç¥ç»ç½‘ç»œ</span>    <span class="token comment"># å› ä¸ºè¿™é‡Œä½¿ç”¨çš„æ•°æ®é‡å¾ˆå°‘ï¼Œæ ¹æ®ç½‘ä¸Šçš„ä»‹ç»ï¼Œä½¿ç”¨lbfgsæ–¹æ³•æ¥ä¼˜åŒ–æƒé‡ï¼Œæ”¶æ•›æ›´å¿«æ•ˆæœä¹Ÿæ›´å¥½</span>    clf <span class="token operator">=</span> NN<span class="token punctuation">.</span>MLPClassifier<span class="token punctuation">(</span>solver<span class="token operator">=</span><span class="token string">'lbfgs'</span><span class="token punctuation">,</span> activation<span class="token operator">=</span><span class="token string">'logistic'</span><span class="token punctuation">,</span> max_iter<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">1e-5</span><span class="token punctuation">,</span> hidden_layer_sizes<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># å¼€å§‹è®­ç»ƒå¹¶ä¸”è®¡æ—¶</span>    start <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    clf<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>train_data<span class="token punctuation">,</span> train_label<span class="token punctuation">)</span>    end <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sklearn è®­ç»ƒç”¨æ—¶:\t%f s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># å¯¹è®­ç»ƒé›†åšé¢„æµ‹å¹¶ä¸”è¾“å‡ºå‡†ç¡®åº¦ä¸ç»“æœ</span>    train_result <span class="token operator">=</span> clf<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>train_data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sklearn å¯¹è®­ç»ƒé›†åšé¢„æµ‹:\t"</span><span class="token punctuation">,</span> accuracy_score<span class="token punctuation">(</span>train_label<span class="token punctuation">,</span> train_result<span class="token punctuation">)</span><span class="token punctuation">)</span>    plotFeature<span class="token punctuation">(</span>train_data<span class="token punctuation">,</span> train_result<span class="token punctuation">)</span>    <span class="token comment"># å¯¹æµ‹è¯•é›†åšé¢„æµ‹å¹¶ä¸”è¾“å‡ºå‡†ç¡®åº¦ä¸ç»“æœ</span>    test_result <span class="token operator">=</span> clf<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>test_data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sklearn å¯¹æµ‹è¯•é›†åšé¢„æµ‹:\t"</span><span class="token punctuation">,</span> accuracy_score<span class="token punctuation">(</span>test_label<span class="token punctuation">,</span> test_result<span class="token punctuation">)</span><span class="token punctuation">)</span>    plotFeature<span class="token punctuation">(</span>test_data<span class="token punctuation">,</span> test_result<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è§£å†³moonsé—®é¢˜"><a href="#è§£å†³moonsé—®é¢˜" class="headerlink" title="è§£å†³moonsé—®é¢˜"></a>è§£å†³moonsé—®é¢˜</h2><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯sklearnçš„moonsæ•°æ®é›†ï¼Œé€šè¿‡sklearn.datasets.make_moonså‡½æ•°å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªæŒ‡å®šè§„æ¨¡å’Œå™ªå£°çš„æ•°æ®é›†ã€‚</p><img src="/images/machine-learning/4-1.png" style="zoom:67%;"><p>è¿™ä¸ªæ•°æ®é›†æœ¬è´¨ä¸Šå’Œcirclesæ²¡æœ‰åŒºåˆ«ï¼Œéƒ½æ˜¯äºŒåˆ†ç±»é—®é¢˜ï¼Œæ‰€ä»¥ä»£ç åŸºæœ¬ä¸Šå’Œä¸Šé¢ä¸€æ ·ã€‚</p><p>ä¸è¿‡å› ä¸ºä¹‹å‰çš„circleså¯ä»¥é€šè¿‡ç‰¹å¾å˜æ¢ï¼Œå˜æˆç‚¹åˆ°åŸç‚¹çš„è·ç¦»ï¼Œç„¶åé‡‡ç”¨KMeanså¯ä»¥å¾—åˆ°ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ•ˆæœï¼›è€Œè¿™é‡Œçš„moonså¹¶ä¸æ˜¯å¾ˆå¥½å¤„ç†ï¼Œç›´æ¥é‡‡ç”¨KMeansç®—æ³•å¯èƒ½æ•ˆæœå¹¶ä¸æ˜¯å¾ˆå¥½ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">from</span> sklearn <span class="token keyword">import</span> datasets<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>metrics <span class="token keyword">import</span> accuracy_score<span class="token keyword">import</span> sklearn<span class="token punctuation">.</span>neural_network <span class="token keyword">as</span> NN<span class="token keyword">import</span> Neural_Network <span class="token keyword">as</span> MyNN<span class="token keyword">def</span> <span class="token function">load_moons</span><span class="token punctuation">(</span>size<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">,</span> rate<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">,</span> noise<span class="token operator">=</span><span class="token number">0.20</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># generate sample data</span>    np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>seed<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    data<span class="token punctuation">,</span> label <span class="token operator">=</span> datasets<span class="token punctuation">.</span>make_moons<span class="token punctuation">(</span>size<span class="token punctuation">,</span> noise<span class="token operator">=</span>noise<span class="token punctuation">)</span>    <span class="token comment"># éšæœºæ‰“ä¹±æ•°æ®</span>    shuffled_index <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>permutation<span class="token punctuation">(</span>size<span class="token punctuation">)</span>    data <span class="token operator">=</span> data<span class="token punctuation">[</span>shuffled_index<span class="token punctuation">]</span>    label <span class="token operator">=</span> label<span class="token punctuation">[</span>shuffled_index<span class="token punctuation">]</span>    <span class="token comment"># åˆ†å‰²æ•°æ®é›†</span>    split_index <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>size <span class="token operator">*</span> rate<span class="token punctuation">)</span>    train_data <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token punctuation">:</span>split_index<span class="token punctuation">]</span>    train_label <span class="token operator">=</span> label<span class="token punctuation">[</span><span class="token punctuation">:</span>split_index<span class="token punctuation">]</span>    test_data <span class="token operator">=</span> data<span class="token punctuation">[</span>split_index<span class="token punctuation">:</span><span class="token punctuation">]</span>    test_label <span class="token operator">=</span> label<span class="token punctuation">[</span>split_index<span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> train_data<span class="token punctuation">,</span> train_label<span class="token punctuation">,</span> test_data<span class="token punctuation">,</span> test_label<span class="token keyword">def</span> <span class="token function">plotFeature</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> label<span class="token punctuation">)</span><span class="token punctuation">:</span>    plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token operator">=</span>label<span class="token punctuation">,</span> cmap<span class="token operator">=</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>Spectral<span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    train_data<span class="token punctuation">,</span> train_label<span class="token punctuation">,</span> test_data<span class="token punctuation">,</span> test_label <span class="token operator">=</span> load_moons<span class="token punctuation">(</span>size<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">,</span> rate<span class="token operator">=</span><span class="token number">0.75</span><span class="token punctuation">,</span> noise<span class="token operator">=</span><span class="token number">0.20</span><span class="token punctuation">)</span>    <span class="token comment"># =====================ä½¿ç”¨è‡ªå·±çš„æ–¹æ³•åšé¢„æµ‹========================</span>    <span class="token comment"># æ„å»ºä¸€ä¸ªå¤šå±‚ç¥ç»ç½‘ç»œ</span>    nn <span class="token operator">=</span> MyNN<span class="token punctuation">.</span>Neural_Network<span class="token punctuation">(</span>nodes<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rate<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">,</span> epoch<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">)</span>    <span class="token comment"># å¼€å§‹è®­ç»ƒå¹¶ä¸”è®¡æ—¶</span>    start <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    nn<span class="token punctuation">.</span>train<span class="token punctuation">(</span>train_data<span class="token punctuation">,</span> train_label<span class="token punctuation">,</span> show_process<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>    end <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"MyNN è®­ç»ƒç”¨æ—¶:\t%f s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># å¯¹è®­ç»ƒé›†åšé¢„æµ‹å¹¶ä¸”è¾“å‡ºå‡†ç¡®åº¦ä¸ç»“æœ</span>    train_result<span class="token punctuation">,</span> _ <span class="token operator">=</span> nn<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>train_data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"MyNN å¯¹è®­ç»ƒé›†åšé¢„æµ‹:\t"</span><span class="token punctuation">,</span> accuracy_score<span class="token punctuation">(</span>train_label<span class="token punctuation">,</span> train_result<span class="token punctuation">)</span><span class="token punctuation">)</span>    plotFeature<span class="token punctuation">(</span>train_data<span class="token punctuation">,</span> train_result<span class="token punctuation">)</span>    <span class="token comment"># å¯¹æµ‹è¯•é›†åšé¢„æµ‹å¹¶ä¸”è¾“å‡ºå‡†ç¡®åº¦ä¸ç»“æœ</span>    test_result<span class="token punctuation">,</span> _ <span class="token operator">=</span> nn<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>test_data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"MyNN å¯¹æµ‹è¯•é›†åšé¢„æµ‹:\t"</span><span class="token punctuation">,</span> accuracy_score<span class="token punctuation">(</span>test_label<span class="token punctuation">,</span> test_result<span class="token punctuation">)</span><span class="token punctuation">)</span>    plotFeature<span class="token punctuation">(</span>test_data<span class="token punctuation">,</span> test_result<span class="token punctuation">)</span>    <span class="token comment"># =====================ä½¿ç”¨sklearnåšé¢„æµ‹========================</span>    <span class="token comment"># æ„å»ºä¸€ä¸ªå¤šå±‚ç¥ç»ç½‘ç»œ</span>    <span class="token comment"># å› ä¸ºè¿™é‡Œä½¿ç”¨çš„æ•°æ®é‡å¾ˆå°‘ï¼Œæ ¹æ®ç½‘ä¸Šçš„ä»‹ç»ï¼Œä½¿ç”¨lbfgsæ–¹æ³•æ¥ä¼˜åŒ–æƒé‡ï¼Œæ”¶æ•›æ›´å¿«æ•ˆæœä¹Ÿæ›´å¥½</span>    clf <span class="token operator">=</span> NN<span class="token punctuation">.</span>MLPClassifier<span class="token punctuation">(</span>solver<span class="token operator">=</span><span class="token string">'lbfgs'</span><span class="token punctuation">,</span> activation<span class="token operator">=</span><span class="token string">'logistic'</span><span class="token punctuation">,</span> max_iter<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">1e-5</span><span class="token punctuation">,</span> hidden_layer_sizes<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># å¼€å§‹è®­ç»ƒå¹¶ä¸”è®¡æ—¶</span>    start <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    clf<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>train_data<span class="token punctuation">,</span> train_label<span class="token punctuation">)</span>    end <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sklearn è®­ç»ƒç”¨æ—¶:\t%f s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># å¯¹è®­ç»ƒé›†åšé¢„æµ‹å¹¶ä¸”è¾“å‡ºå‡†ç¡®åº¦ä¸ç»“æœ</span>    train_result <span class="token operator">=</span> clf<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>train_data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sklearn å¯¹è®­ç»ƒé›†åšé¢„æµ‹:\t"</span><span class="token punctuation">,</span> accuracy_score<span class="token punctuation">(</span>train_label<span class="token punctuation">,</span> train_result<span class="token punctuation">)</span><span class="token punctuation">)</span>    plotFeature<span class="token punctuation">(</span>train_data<span class="token punctuation">,</span> train_result<span class="token punctuation">)</span>    <span class="token comment"># å¯¹æµ‹è¯•é›†åšé¢„æµ‹å¹¶ä¸”è¾“å‡ºå‡†ç¡®åº¦ä¸ç»“æœ</span>    test_result <span class="token operator">=</span> clf<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>test_data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sklearn å¯¹æµ‹è¯•é›†åšé¢„æµ‹:\t"</span><span class="token punctuation">,</span> accuracy_score<span class="token punctuation">(</span>test_label<span class="token punctuation">,</span> test_result<span class="token punctuation">)</span><span class="token punctuation">)</span>    plotFeature<span class="token punctuation">(</span>test_data<span class="token punctuation">,</span> test_result<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è§£å†³æ‰‹å†™æ•°å­—è¯†åˆ«é—®é¢˜"><a href="#è§£å†³æ‰‹å†™æ•°å­—è¯†åˆ«é—®é¢˜" class="headerlink" title="è§£å†³æ‰‹å†™æ•°å­—è¯†åˆ«é—®é¢˜"></a>è§£å†³æ‰‹å†™æ•°å­—è¯†åˆ«é—®é¢˜</h2><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯å’Œ<a href="https://immortalqx.github.io/2022/01/08/machine-learning-2/">æœºå™¨å­¦ä¹ ï¼ˆäºŒï¼‰ï¼šé€»è¾‘å›å½’ç®—æ³•</a>ä¸€æ ·çš„æ•°æ®é›†ã€‚</p><img src="/images/machine-learning/2-7.png" style="zoom:67%;"><p>æ‰‹å†™æ•°å­—è¯†åˆ«æ¯”ä¸Šé¢ä¸¤ä¸ªè¦ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œæˆ‘ä»¬å…ˆåˆ†ææ‰‹å†™æ•°å­—è¯†åˆ«çš„ç‰¹å¾ï¼š</p><ul><li>æ¯ä¸€å¼ å›¾ç‰‡æ˜¯8*8å¤§å°çš„ï¼Œä½†è¿™é‡Œæˆ‘ä»¬å®šä¹‰çš„å…¨è¿æ¥ç¥ç»ç½‘ç»œä¸æ”¯æŒè¾“å…¥çŸ©é˜µï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠæ¯ä¸€å¼ å›¾ç‰‡å˜æˆå‘é‡ï¼Œè¿™æ ·è¾“å…¥å±‚èŠ‚ç‚¹æ•°ç›®å°±åº”è¯¥æ˜¯64ï¼›</li><li>æˆ‘ä»¬éœ€è¦åŒºåˆ†0~9è¿™10ä¸ªæ‰‹å†™æ•°å­—ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªå¤šåˆ†ç±»é—®é¢˜ï¼Œè¾“å‡ºå±‚çš„èŠ‚ç‚¹æ•°ç›®åº”è¯¥æ˜¯10ã€‚</li></ul><p>ç¡®å®šäº†è¾“å…¥è¾“å‡ºï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆå®¹æ˜“çš„å®šä¹‰ä¸€ä¸ªå¤šå±‚ç¥ç»ç½‘ç»œæ¥å¤„ç†è¿™ä¸ªé—®é¢˜äº†ã€‚</p><p>è¿™éƒ¨åˆ†å®šä¹‰Neural Networkå®ä¾‹æ—¶æˆ‘ä»¬ä¼ å…¥çš„å‚æ•°<code>nodes=[64, 64, 32, 10]</code>ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>datasets <span class="token keyword">import</span> load_digits<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>metrics <span class="token keyword">import</span> confusion_matrix<span class="token punctuation">,</span> accuracy_score<span class="token keyword">import</span> sklearn<span class="token punctuation">.</span>neural_network <span class="token keyword">as</span> NN<span class="token keyword">import</span> Neural_Network <span class="token keyword">as</span> MyNNfig_num <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">def</span> <span class="token function">display</span><span class="token punctuation">(</span>images<span class="token punctuation">,</span> ground_truth<span class="token punctuation">,</span> predict<span class="token punctuation">,</span> rate<span class="token punctuation">,</span> fig_name<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    ç”»å‡ºé¢„æµ‹ç»“æœ    :param images: æ•°å­—çš„å›¾ç‰‡    :param ground_truth: çœŸå€¼    :param predict: é¢„æµ‹å€¼    :param fig_name: å›¾ç‰‡åå­—    """</span>    <span class="token comment"># plot the digits</span>    <span class="token keyword">global</span> fig_num    fig_num <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token keyword">if</span> fig_name <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>fig_num<span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># figure size in inches</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>fig_name<span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># figure size in inches</span>    fig<span class="token punctuation">.</span>subplots_adjust<span class="token punctuation">(</span>left<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> right<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> bottom<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> top<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> hspace<span class="token operator">=</span><span class="token number">0.05</span><span class="token punctuation">,</span> wspace<span class="token operator">=</span><span class="token number">0.05</span><span class="token punctuation">)</span>    size <span class="token operator">=</span> np<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>predict<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">if</span> size <span class="token operator">&gt;</span> <span class="token number">56</span><span class="token punctuation">:</span>        size <span class="token operator">=</span> <span class="token number">56</span>    <span class="token comment"># plot the digits: each image is 8x8 pixels</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">:</span>        ax <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> xticks<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> yticks<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        ax<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>images<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>binary<span class="token punctuation">)</span>        <span class="token comment"># label the image with the target value</span>        ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>ground_truth<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token builtin">int</span><span class="token punctuation">(</span>ground_truth<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">int</span><span class="token punctuation">(</span>predict<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>predict<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'green'</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> rate <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>                ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>rate<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'green'</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>predict<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'red'</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> rate <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>                ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>rate<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'red'</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>    <span class="token comment"># plot confusion matrix</span>    cm <span class="token operator">=</span> confusion_matrix<span class="token punctuation">(</span>ground_truth<span class="token punctuation">,</span> predict<span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>matshow<span class="token punctuation">(</span>cm<span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>colorbar<span class="token punctuation">(</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span>fig_name <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> <span class="token string">'Confusion Matrix'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Groundtruth'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Predict'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">load_data</span><span class="token punctuation">(</span>train_size<span class="token operator">=</span><span class="token number">0.75</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    åŠ è½½æ•°æ®åŒæ—¶åˆ†å‰²å‡ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†    :param train_size: è®­ç»ƒé›†çš„æ¯”ä¾‹    :return åˆ†å‰²å¥½çš„æ•°æ®é›†    """</span>    <span class="token comment"># åŠ è½½æ•°æ®</span>    <span class="token comment"># è¿™ä¸ªå‡½æ•°è¿”å›çš„åº”è¯¥æ˜¯ä¸€ä¸ªç±»å®ä¾‹ï¼Œé‡Œé¢æœ‰å¾ˆå¤šçš„å˜é‡ï¼Œéœ€è¦â€œå•ç‹¬çš„æ‹¿å‡ºæ¥ç”¨â€</span>    digits <span class="token operator">=</span> load_digits<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># è¾“å‡ºæŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªç±»çš„å±æ€§å’Œæ–¹æ³•</span>    <span class="token comment"># print(dir(digits))</span>    <span class="token comment"># è·å¾—æ•°æ®çš„å¤§å°</span>    data_size <span class="token operator">=</span> np<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>digits<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token comment"># å°†æ•°æ®æ‰“ä¹±ï¼Œè¿™é‡Œéœ€è¦æŠŠè¿™ä¸ªç±»çš„è¦ç”¨ä¸Šçš„å˜é‡éƒ½å¯¹åº”ä¸Šï¼Œæœ‰ç‚¹éº»çƒ¦ï¼ˆæ˜¯å¦æœ‰æ›´ç®€ä¾¿çš„æ–¹æ³•ï¼Ÿï¼‰</span>    shuffled_index <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>permutation<span class="token punctuation">(</span>data_size<span class="token punctuation">)</span>    digits<span class="token punctuation">.</span>data <span class="token operator">=</span> digits<span class="token punctuation">.</span>data<span class="token punctuation">[</span>shuffled_index<span class="token punctuation">]</span>    digits<span class="token punctuation">.</span>images <span class="token operator">=</span> digits<span class="token punctuation">.</span>images<span class="token punctuation">[</span>shuffled_index<span class="token punctuation">]</span>    digits<span class="token punctuation">.</span>target <span class="token operator">=</span> digits<span class="token punctuation">.</span>target<span class="token punctuation">[</span>shuffled_index<span class="token punctuation">]</span>    <span class="token comment"># åˆ†å‰²æ•°æ®é›†</span>    split_index <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>data_size <span class="token operator">*</span> train_size<span class="token punctuation">)</span>    train_data <span class="token operator">=</span> digits<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span>split_index<span class="token punctuation">]</span>    train_target <span class="token operator">=</span> digits<span class="token punctuation">.</span>target<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span>split_index<span class="token punctuation">]</span>    train_images <span class="token operator">=</span> digits<span class="token punctuation">.</span>images<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span>split_index<span class="token punctuation">]</span>    test_data <span class="token operator">=</span> digits<span class="token punctuation">.</span>data<span class="token punctuation">[</span>split_index<span class="token punctuation">:</span><span class="token punctuation">]</span>    test_target <span class="token operator">=</span> digits<span class="token punctuation">.</span>target<span class="token punctuation">[</span>split_index<span class="token punctuation">:</span><span class="token punctuation">]</span>    test_images <span class="token operator">=</span> digits<span class="token punctuation">.</span>images<span class="token punctuation">[</span>split_index<span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> train_data<span class="token punctuation">,</span> train_target<span class="token punctuation">,</span> train_images<span class="token punctuation">,</span> test_data<span class="token punctuation">,</span> test_target<span class="token punctuation">,</span> test_images<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    <span class="token comment"># FIXME:</span>    <span class="token comment">#  1. æ•°æ®çš„åŠ è½½åº”è¯¥æ²¡é—®é¢˜ï¼Œåœ¨é€»è¾‘å›å½’é‡Œé¢å¾—åˆ°çš„ç»“æœæ˜¯æ­£ç¡®çš„</span>    <span class="token comment">#  ä½†æ”¾åˆ°ç¥ç»ç½‘ç»œé‡Œé¢ï¼Œå¦‚æœç»™çš„è®­ç»ƒé›†è¿‡å¤šï¼ˆ1000ä»¥ä¸Šï¼‰ï¼Œå°±æ²¡æœ‰æ”¶æ•›ï¼Œä½†ç»™çš„æ•°æ®é›†å°‘ä¸€äº›æ•ˆæœå¥½ä¸€äº›</span>    <span class="token comment">#  2. æ„Ÿè§‰æ˜¯æœ‰åœ°æ–¹æº¢å‡ºäº†ï¼Œå¯¼è‡´ç›´æ¥å°±æ²¡æœ‰æ”¶æ•›ï¼ŒçŒœæµ‹æ˜¯sigmoidå‡½æ•°æº¢å‡º</span>    <span class="token comment">#  3. æµ‹è¯•å‘ç°sigmoidå‡½æ•°æ²¡æœ‰æº¢å‡ºï¼Œå¯èƒ½æ˜¯å­¦ä¹ ç‡è¿‡ä½ï¼Œé™·å…¥äº†å±€éƒ¨æœ€ä¼˜è§£ï¼Œä½†è°ƒå¤§å­¦ä¹ ç‡å°±ä¼šæŠ¥è­¦ï¼Œè¯´sigmoidå‡½æ•°æº¢å‡º</span>    <span class="token comment">#  4. è°ƒæ•´sigmoidå‡½æ•°åï¼Œè°ƒå¤§å­¦ä¹ ç‡æ²¡æœ‰å½±å“ï¼Œä½†æŠŠå­¦ä¹ ç‡è°ƒå°ä¼šå¾—åˆ°ä¸€ä¸ªå¾ˆå¥½çš„ç»“æœã€‚</span>    <span class="token comment">#  é—®é¢˜ï¼šå¦‚ä½•è·å¾—æœ€ä¼˜çš„å­¦ä¹ ç‡ï¼Ÿå¦‚ä½•çŸ¥é“å­¦ä¹ ç‡æ˜¯è¿‡å¤§è¿˜æ˜¯è¿‡å°ï¼Ÿ</span>    <span class="token comment"># åŠ è½½å¹¶ä¸”åˆ†å‰²å„ç§æ•°æ®</span>    train_data<span class="token punctuation">,</span> train_target<span class="token punctuation">,</span> train_images<span class="token punctuation">,</span> test_data<span class="token punctuation">,</span> test_target<span class="token punctuation">,</span> test_images <span class="token operator">=</span> load_data<span class="token punctuation">(</span>train_size<span class="token operator">=</span><span class="token number">0.75</span><span class="token punctuation">)</span>    <span class="token comment"># =====================ä½¿ç”¨è‡ªå·±çš„æ–¹æ³•åšé¢„æµ‹========================</span>    nn <span class="token operator">=</span> MyNN<span class="token punctuation">.</span>Neural_Network<span class="token punctuation">(</span>nodes<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rate<span class="token operator">=</span><span class="token number">0.001</span><span class="token punctuation">,</span> epoch<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">)</span>    <span class="token comment"># å¼€å§‹è®­ç»ƒå¹¶ä¸”è®¡æ—¶</span>    <span class="token comment"># FIXME è¿™é‡Œæ—¶é—´æµ‹é‡çš„ä¸å¯¹ï¼Œä½†å…¶ä»–åœ°æ–¹æ²¡æœ‰é—®é¢˜</span>    start <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    nn<span class="token punctuation">.</span>train<span class="token punctuation">(</span>train_data<span class="token punctuation">,</span> train_target<span class="token punctuation">,</span> show_process<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    end <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"MyNN è®­ç»ƒç”¨æ—¶:\t%f s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># å¯¹è®­ç»ƒé›†åšé¢„æµ‹å¹¶ä¸”è¾“å‡ºå‡†ç¡®åº¦ä¸ç»“æœ</span>    train_result<span class="token punctuation">,</span> train_rate <span class="token operator">=</span> nn<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>train_data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"MyNN å¯¹è®­ç»ƒé›†åšé¢„æµ‹:\t"</span><span class="token punctuation">,</span> accuracy_score<span class="token punctuation">(</span>train_target<span class="token punctuation">,</span> train_result<span class="token punctuation">)</span><span class="token punctuation">)</span>    display<span class="token punctuation">(</span>train_images<span class="token punctuation">,</span> train_target<span class="token punctuation">,</span> train_result<span class="token punctuation">,</span> train_rate<span class="token punctuation">,</span> <span class="token string">"My Train"</span><span class="token punctuation">)</span>    <span class="token comment"># å¯¹æµ‹è¯•é›†åšé¢„æµ‹å¹¶ä¸”è¾“å‡ºå‡†ç¡®åº¦ä¸ç»“æœ</span>    test_result<span class="token punctuation">,</span> test_rate <span class="token operator">=</span> nn<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>test_data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"MyNN å¯¹æµ‹è¯•é›†åšé¢„æµ‹:\t"</span><span class="token punctuation">,</span> accuracy_score<span class="token punctuation">(</span>test_target<span class="token punctuation">,</span> test_result<span class="token punctuation">)</span><span class="token punctuation">)</span>    display<span class="token punctuation">(</span>test_images<span class="token punctuation">,</span> test_target<span class="token punctuation">,</span> test_result<span class="token punctuation">,</span> test_rate<span class="token punctuation">,</span> <span class="token string">"My Test"</span><span class="token punctuation">)</span>    <span class="token comment"># =====================ä½¿ç”¨sklearnåšé¢„æµ‹========================</span>    <span class="token comment"># æ„å»ºä¸€ä¸ªå¤šå±‚ç¥ç»ç½‘ç»œ</span>    <span class="token comment"># å› ä¸ºè¿™é‡Œä½¿ç”¨çš„æ•°æ®é‡å¾ˆå°‘ï¼Œæ ¹æ®ç½‘ä¸Šçš„ä»‹ç»ï¼Œä½¿ç”¨lbfgsæ–¹æ³•æ¥ä¼˜åŒ–æƒé‡ï¼Œæ”¶æ•›æ›´å¿«æ•ˆæœä¹Ÿæ›´å¥½</span>    clf <span class="token operator">=</span> NN<span class="token punctuation">.</span>MLPClassifier<span class="token punctuation">(</span>solver<span class="token operator">=</span><span class="token string">'lbfgs'</span><span class="token punctuation">,</span> activation<span class="token operator">=</span><span class="token string">'logistic'</span><span class="token punctuation">,</span> max_iter<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">1e-5</span><span class="token punctuation">,</span> hidden_layer_sizes<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># å¼€å§‹è®­ç»ƒå¹¶ä¸”è®¡æ—¶</span>    start <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    clf<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>train_data<span class="token punctuation">,</span> train_target<span class="token punctuation">)</span>    end <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sklearn è®­ç»ƒç”¨æ—¶:\t%f s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># å¯¹è®­ç»ƒé›†åšé¢„æµ‹å¹¶ä¸”è¾“å‡ºå‡†ç¡®åº¦ä¸ç»“æœ</span>    train_result <span class="token operator">=</span> clf<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>train_data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sklearn å¯¹è®­ç»ƒé›†åšé¢„æµ‹:\t"</span><span class="token punctuation">,</span> accuracy_score<span class="token punctuation">(</span>train_target<span class="token punctuation">,</span> train_result<span class="token punctuation">)</span><span class="token punctuation">)</span>    display<span class="token punctuation">(</span>train_images<span class="token punctuation">,</span> train_target<span class="token punctuation">,</span> train_result<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token string">"sklearn Train"</span><span class="token punctuation">)</span>    <span class="token comment"># å¯¹æµ‹è¯•é›†åšé¢„æµ‹å¹¶ä¸”è¾“å‡ºå‡†ç¡®åº¦ä¸ç»“æœ</span>    test_result <span class="token operator">=</span> clf<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>test_data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sklearn å¯¹æµ‹è¯•é›†åšé¢„æµ‹:\t"</span><span class="token punctuation">,</span> accuracy_score<span class="token punctuation">(</span>test_target<span class="token punctuation">,</span> test_result<span class="token punctuation">)</span><span class="token punctuation">)</span>    display<span class="token punctuation">(</span>test_images<span class="token punctuation">,</span> test_target<span class="token punctuation">,</span> test_result<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token string">"sklearn Test"</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> å¤šå±‚ç¥ç»ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰ï¼šå¤šå±‚ç¥ç»ç½‘ç»œ</title>
      <link href="2022/01/09/machine-learning-3/"/>
      <url>2022/01/09/machine-learning-3/</url>
      
        <content type="html"><![CDATA[<h1 id="æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰ï¼šå¤šå±‚ç¥ç»ç½‘ç»œ"><a href="#æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰ï¼šå¤šå±‚ç¥ç»ç½‘ç»œ" class="headerlink" title="æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰ï¼šå¤šå±‚ç¥ç»ç½‘ç»œ"></a>æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰ï¼šå¤šå±‚ç¥ç»ç½‘ç»œ</h1><p>åŸºäºç”Ÿç‰©ç¥ç»å…ƒæ¨¡å‹å¯å¾—åˆ°å¤šå±‚æ„ŸçŸ¥å™¨ï¼ˆMulti-layer Perceptron, MLP)çš„åŸºæœ¬ç»“æ„ï¼Œæœ€å…¸å‹çš„MLPåŒ…æ‹¬åŒ…æ‹¬ä¸‰å±‚ï¼šè¾“å…¥å±‚(Input Layer)ã€éšå±‚(Hidden Layer)å’Œè¾“å‡ºå±‚(Output Layer)ï¼ŒMLPç¥ç»ç½‘ç»œä¸åŒå±‚ä¹‹é—´æ˜¯å…¨è¿æ¥çš„ï¼ˆå…¨è¿æ¥çš„æ„æ€å°±æ˜¯ï¼šä¸Šä¸€å±‚çš„ä»»ä½•ä¸€ä¸ªç¥ç»å…ƒä¸ä¸‹ä¸€å±‚çš„æ‰€æœ‰ç¥ç»å…ƒéƒ½æœ‰è¿æ¥ï¼‰ã€‚</p><p><img src="/images/neural-network/mlp_theory.gif"></p><h2 id="1-ç¥ç»å…ƒ"><a href="#1-ç¥ç»å…ƒ" class="headerlink" title="1. ç¥ç»å…ƒ"></a>1. ç¥ç»å…ƒ</h2><p>ç¥ç»å…ƒå’Œæ„ŸçŸ¥å™¨æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œæ„ŸçŸ¥å™¨çš„æ¿€æ´»å‡½æ•°æ˜¯é˜¶è·ƒå‡½æ•°ï¼›è€Œç¥ç»å…ƒçš„æ¿€æ´»å‡½æ•°å¾€å¾€é€‰æ‹©ä¸ºsigmoidå‡½æ•°æˆ–tanhå‡½æ•°ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/images/neural-network/neuron.gif"></p><p>è®¡ç®—ä¸€ä¸ªç¥ç»å…ƒçš„è¾“å‡ºçš„æ–¹æ³•å’Œè®¡ç®—ä¸€ä¸ªæ„ŸçŸ¥å™¨çš„è¾“å‡ºæ˜¯ä¸€æ ·çš„ã€‚å‡è®¾ç¥ç»å…ƒçš„è¾“å…¥æ˜¯å‘é‡$\vec{x}$ï¼Œæƒé‡å‘é‡æ˜¯$\vec{w}$(åç½®é¡¹æ˜¯$w_0$)ï¼Œæ¿€æ´»å‡½æ•°æ˜¯sigmoidå‡½æ•°ï¼Œåˆ™å…¶è¾“å‡º$y$ï¼š<br>$$<br>y = sigmoid(\vec{w}^T \cdot \vec{x})<br>$$</p><p>sigmoidå‡½æ•°çš„å®šä¹‰å¦‚ä¸‹ï¼š<br>$$<br>sigmoid(x) = \frac{1}{1+e^{-x}}<br>$$<br>å°†å…¶å¸¦å…¥å‰é¢çš„å¼å­ï¼Œå¾—åˆ°<br>$$<br>y = \frac{1}{1+e^{-\vec{w}^T \cdot \vec{x}}}<br>$$</p><p>sigmoidå‡½æ•°æ˜¯ä¸€ä¸ªéçº¿æ€§å‡½æ•°ï¼Œå€¼åŸŸæ˜¯(0,1)ã€‚å‡½æ•°å›¾åƒå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="/images/neural-network/sigmod.jpg"></p><p>sigmoidå‡½æ•°çš„å¯¼æ•°æ˜¯ï¼š<br>$$<br>\begin{eqnarray}<br>y &amp; = &amp; sigmod(x) \tag{1} \<br>yâ€™ &amp; = &amp; y(1-y)<br>\end{eqnarray}<br>$$<br>å¯ä»¥çœ‹åˆ°ï¼Œsigmoidå‡½æ•°çš„å¯¼æ•°å¯ä»¥ç”¨sigmoidå‡½æ•°è‡ªèº«æ¥è¡¨ç¤ºã€‚è¿™æ ·ï¼Œä¸€æ—¦è®¡ç®—å‡ºsigmoidå‡½æ•°çš„å€¼ï¼Œè®¡ç®—å®ƒçš„å¯¼æ•°çš„å€¼å°±éå¸¸æ–¹ä¾¿ã€‚</p><h2 id="2-ç¥ç»ç½‘ç»œçš„ç»“æ„"><a href="#2-ç¥ç»ç½‘ç»œçš„ç»“æ„" class="headerlink" title="2. ç¥ç»ç½‘ç»œçš„ç»“æ„"></a>2. ç¥ç»ç½‘ç»œçš„ç»“æ„</h2><p><img src="/images/neural-network/nn1.jpeg"></p><p>ç¥ç»ç½‘ç»œå°±æ˜¯æŒ‰ç…§ä¸€å®šè§„åˆ™è¿æ¥èµ·æ¥çš„å¤šä¸ªç¥ç»å…ƒã€‚ä¸Šå›¾å±•ç¤ºäº†ä¸€ä¸ªå…¨è¿æ¥(Full Connected, FC)ç¥ç»ç½‘ç»œï¼Œé€šè¿‡è§‚å¯Ÿä¸Šé¢çš„å›¾ï¼Œå¯ä»¥å‘ç°å®ƒçš„è§„åˆ™åŒ…æ‹¬ï¼š</p><ul><li>ç¥ç»å…ƒæŒ‰ç…§å±‚æ¥å¸ƒå±€<ul><li>æœ€å·¦è¾¹çš„å±‚å«åšè¾“å…¥å±‚ï¼Œè´Ÿè´£æ¥æ”¶è¾“å…¥æ•°æ®ï¼›</li><li>æœ€å³è¾¹çš„å±‚å«è¾“å‡ºå±‚ï¼Œå¯ä»¥ä»è¿™å±‚è·å–ç¥ç»ç½‘ç»œè¾“å‡ºæ•°æ®;</li><li>è¾“å…¥å±‚å’Œè¾“å‡ºå±‚ä¹‹é—´çš„å±‚å«åšéšè—å±‚ï¼Œå› ä¸ºå®ƒä»¬å¯¹äºå¤–éƒ¨æ¥è¯´æ˜¯ä¸å¯è§çš„ã€‚</li></ul></li><li>åŒä¸€å±‚çš„ç¥ç»å…ƒä¹‹é—´æ²¡æœ‰è¿æ¥</li><li>ç¬¬Nå±‚çš„æ¯ä¸ªç¥ç»å…ƒå’Œç¬¬N-1å±‚çš„æ‰€æœ‰ç¥ç»å…ƒç›¸è¿(è¿™å°±æ˜¯full connectedçš„å«ä¹‰)ï¼Œç¬¬N-1å±‚ç¥ç»å…ƒçš„è¾“å‡ºå°±æ˜¯ç¬¬Nå±‚ç¥ç»å…ƒçš„è¾“å…¥</li><li>æ¯ä¸ªè¿æ¥éƒ½æœ‰ä¸€ä¸ªæƒå€¼</li></ul><p>ç”±æ­¤å¯çŸ¥ï¼Œç¥ç»ç½‘ç»œä¸»è¦æœ‰ä¸‰ä¸ªåŸºæœ¬è¦ç´ ï¼šæƒé‡ã€åç½®å’Œæ¿€æ´»å‡½æ•°</p><ul><li>æƒé‡ï¼šç¥ç»å…ƒä¹‹é—´çš„è¿æ¥å¼ºåº¦ç”±æƒé‡æ§åˆ¶ï¼Œæƒé‡çš„å¤§å°è¡¨ç¤ºå¯èƒ½æ€§çš„å¤§å°</li><li>åç½®ï¼šåç½®çš„è®¾ç½®æ˜¯ä¸ºäº†æ­£ç¡®åˆ†ç±»æ ·æœ¬ï¼Œæ˜¯æ¨¡å‹ä¸­ä¸€ä¸ªé‡è¦çš„å‚æ•°ï¼Œå³ä¿è¯é€šè¿‡è¾“å…¥ç®—å‡ºçš„è¾“å‡ºå€¼ä¸èƒ½éšä¾¿æ¿€æ´»ã€‚</li><li>æ¿€æ´»å‡½æ•°ï¼šèµ·éçº¿æ€§æ˜ å°„çš„ä½œç”¨ï¼Œå…¶å¯å°†ç¥ç»å…ƒçš„è¾“å‡ºå¹…åº¦é™åˆ¶åœ¨ä¸€å®šèŒƒå›´å†…ï¼Œä¸€èˆ¬é™åˆ¶åœ¨ï¼ˆ-1~1ï¼‰æˆ–ï¼ˆ0~1ï¼‰ä¹‹é—´ã€‚æœ€å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°æ˜¯Sigmoidå‡½æ•°ï¼Œå¯å°†ï¼ˆ-âˆï¼Œ+âˆï¼‰çš„æ•°æ˜ å°„åˆ°ï¼ˆ0~1ï¼‰çš„èŒƒå›´å†…ã€‚</li></ul><p>ä¸Šé¢è¿™äº›è§„åˆ™å®šä¹‰äº†å…¨è¿æ¥ç¥ç»ç½‘ç»œçš„ç»“æ„ã€‚äº‹å®ä¸Šè¿˜å­˜åœ¨å¾ˆå¤šå…¶å®ƒç»“æ„çš„ç¥ç»ç½‘ç»œï¼Œæ¯”å¦‚å·ç§¯ç¥ç»ç½‘ç»œ(CNN)ã€å¾ªç¯ç¥ç»ç½‘ç»œ(RNN)ï¼Œä»–ä»¬éƒ½å…·æœ‰ä¸åŒçš„è¿æ¥è§„åˆ™ã€‚</p><h2 id="3-è®¡ç®—ç¥ç»ç½‘ç»œçš„è¾“å‡º"><a href="#3-è®¡ç®—ç¥ç»ç½‘ç»œçš„è¾“å‡º" class="headerlink" title="3. è®¡ç®—ç¥ç»ç½‘ç»œçš„è¾“å‡º"></a>3. è®¡ç®—ç¥ç»ç½‘ç»œçš„è¾“å‡º</h2><p>ç¥ç»ç½‘ç»œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªè¾“å…¥å‘é‡$\vec{x}$åˆ°è¾“å‡ºå‘é‡$\vec{y}$çš„å‡½æ•°ï¼Œå³ï¼š</p><p>$$<br>\vec{y} = f_{network}(\vec{x})<br>$$<br>æ ¹æ®è¾“å…¥è®¡ç®—ç¥ç»ç½‘ç»œçš„è¾“å‡º</p><ul><li>é¦–å…ˆå°†è¾“å…¥å‘é‡$\vec{x}$çš„æ¯ä¸ªå…ƒç´ çš„å€¼$x_i$èµ‹ç»™ç¥ç»ç½‘ç»œçš„è¾“å…¥å±‚çš„å¯¹åº”ç¥ç»å…ƒ</li><li>ç„¶åæ ¹æ®å¼ï¼ˆ1ï¼‰ä¾æ¬¡å‘å‰è®¡ç®—æ¯ä¸€å±‚çš„æ¯ä¸ªç¥ç»å…ƒçš„å€¼ï¼Œç›´åˆ°æœ€åä¸€å±‚è¾“å‡ºå±‚çš„æ‰€æœ‰ç¥ç»å…ƒçš„å€¼è®¡ç®—å®Œæ¯•</li><li>æœ€åï¼Œå°†è¾“å‡ºå±‚æ¯ä¸ªç¥ç»å…ƒçš„å€¼ä¸²åœ¨ä¸€èµ·å°±å¾—åˆ°äº†è¾“å‡ºå‘é‡$\vec{y}$ã€‚</li></ul><p>æ¥ä¸‹æ¥ä¸¾ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬å…ˆç»™ç¥ç»ç½‘ç»œçš„æ¯ä¸ªå•å…ƒå†™ä¸Šç¼–å·ã€‚</p><p><img src="/images/neural-network/nn2.png"></p><ul><li>è¾“å…¥å±‚æœ‰ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°†å…¶ä¾æ¬¡ç¼–å·ä¸º1ã€2ã€3ï¼›</li><li>éšè—å±‚çš„4ä¸ªèŠ‚ç‚¹ï¼Œç¼–å·ä¾æ¬¡ä¸º4ã€5ã€6ã€7ï¼›</li><li>æœ€åè¾“å‡ºå±‚çš„ä¸¤ä¸ªèŠ‚ç‚¹ç¼–å·ä¸º8ã€9ã€‚</li></ul><p>å› ä¸ºè¿™ä¸ªç¥ç»ç½‘ç»œæ˜¯å…¨è¿æ¥ç½‘ç»œï¼Œæ‰€ä»¥å¯ä»¥çœ‹åˆ°æ¯ä¸ªèŠ‚ç‚¹éƒ½å’Œä¸Šä¸€å±‚çš„æ‰€æœ‰èŠ‚ç‚¹æœ‰è¿æ¥ã€‚æ¯”å¦‚ï¼Œéšè—å±‚çš„èŠ‚ç‚¹4ï¼Œå®ƒå’Œè¾“å…¥å±‚çš„ä¸‰ä¸ªèŠ‚ç‚¹1ã€2ã€3ä¹‹é—´éƒ½æœ‰è¿æ¥ï¼Œå…¶è¿æ¥ä¸Šçš„æƒé‡åˆ†åˆ«ä¸º$w_{41}$,$w_{42}$,$w_{43}$ã€‚é‚£ä¹ˆï¼Œæ€æ ·è®¡ç®—èŠ‚ç‚¹4çš„è¾“å‡ºå€¼$a_4$å‘¢ï¼Ÿ</p><p>ä¸ºäº†è®¡ç®—èŠ‚ç‚¹4çš„è¾“å‡ºå€¼ï¼Œå¿…é¡»å…ˆå¾—åˆ°å…¶æ‰€æœ‰ä¸Šæ¸¸èŠ‚ç‚¹ï¼ˆä¹Ÿå°±æ˜¯èŠ‚ç‚¹1ã€2ã€3ï¼‰çš„è¾“å‡ºå€¼ã€‚èŠ‚ç‚¹1ã€2ã€3æ˜¯è¾“å…¥å±‚çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥ï¼Œä»–ä»¬çš„è¾“å‡ºå€¼å°±æ˜¯è¾“å…¥å‘é‡$\vec{x}$æœ¬èº«ã€‚æŒ‰ç…§ä¸Šå›¾ç”»å‡ºçš„å¯¹åº”å…³ç³»ï¼Œå¯ä»¥çœ‹åˆ°èŠ‚ç‚¹1ã€2ã€3çš„è¾“å‡ºå€¼åˆ†åˆ«æ˜¯$x_1$,$x_2$,$x_3$ã€‚è¦æ±‚è¾“å…¥å‘é‡çš„ç»´åº¦å’Œè¾“å…¥å±‚ç¥ç»å…ƒä¸ªæ•°ç›¸åŒï¼Œè€Œè¾“å…¥å‘é‡çš„æŸä¸ªå…ƒç´ å¯¹åº”åˆ°å“ªä¸ªè¾“å…¥èŠ‚ç‚¹æ˜¯å¯ä»¥è‡ªç”±å†³å®šçš„ã€‚</p><p>ä¸€æ—¦æœ‰äº†èŠ‚ç‚¹1ã€2ã€3çš„è¾“å‡ºå€¼ï¼Œå°±å¯ä»¥æ ¹æ®å¼1è®¡ç®—èŠ‚ç‚¹4çš„è¾“å‡ºå€¼$a_4$ï¼š</p><p><img src="/images/neural-network/eqn_3_4.png"></p><p>ä¸Šå¼çš„$w_{4b}$æ˜¯èŠ‚ç‚¹4çš„åç½®é¡¹ï¼Œå›¾ä¸­æ²¡æœ‰ç”»å‡ºæ¥ã€‚è€Œ$w_{41}$,$w_{42}$,$w_{43}$åˆ†åˆ«ä¸ºèŠ‚ç‚¹1ã€2ã€3åˆ°èŠ‚ç‚¹4è¿æ¥çš„æƒé‡ï¼Œåœ¨ç»™æƒé‡$w_{ji}$ç¼–å·æ—¶ï¼Œç›®æ ‡èŠ‚ç‚¹çš„ç¼–å·$j$æ”¾åœ¨å‰é¢ï¼ŒæŠŠæºèŠ‚ç‚¹çš„ç¼–å·$i$æ”¾åœ¨åé¢ã€‚</p><p>åŒæ ·ï¼Œå¯ä»¥ç»§ç»­è®¡ç®—å‡ºèŠ‚ç‚¹5ã€6ã€7çš„è¾“å‡ºå€¼$a_5$,$a_6$,$a_7$ã€‚è¿™æ ·ï¼Œéšè—å±‚çš„4ä¸ªèŠ‚ç‚¹çš„è¾“å‡ºå€¼å°±è®¡ç®—å®Œæˆäº†ï¼Œå°±å¯ä»¥æ¥ç€è®¡ç®—è¾“å‡ºå±‚çš„èŠ‚ç‚¹8çš„è¾“å‡ºå€¼$y_1$ï¼š</p><p><img src="/images/neural-network/eqn_5_6.png"></p><p>åŒç†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¡ç®—å‡º$y_2$çš„å€¼ã€‚è¿™æ ·è¾“å‡ºå±‚æ‰€æœ‰èŠ‚ç‚¹çš„è¾“å‡ºå€¼è®¡ç®—å®Œæ¯•ï¼Œå°±å¾—åˆ°äº†åœ¨è¾“å…¥å‘é‡$\vec{x} = (x_1, x_2, x_3)^T$æ—¶ï¼Œç¥ç»ç½‘ç»œçš„è¾“å‡ºå‘é‡$\vec{y} = (y_1, y_2)^T$ã€‚å¯ä»¥çœ‹å‡ºï¼šè¾“å‡ºå‘é‡çš„ç»´åº¦å’Œè¾“å‡ºå±‚ç¥ç»å…ƒä¸ªæ•°ç›¸åŒã€‚</p><h2 id="4-ç¥ç»ç½‘ç»œçš„çŸ©é˜µè¡¨ç¤º"><a href="#4-ç¥ç»ç½‘ç»œçš„çŸ©é˜µè¡¨ç¤º" class="headerlink" title="4. ç¥ç»ç½‘ç»œçš„çŸ©é˜µè¡¨ç¤º"></a>4. ç¥ç»ç½‘ç»œçš„çŸ©é˜µè¡¨ç¤º</h2><p>ç¥ç»ç½‘ç»œçš„è®¡ç®—å¦‚æœç”¨çŸ©é˜µæ¥è¡¨ç¤ºä¼šå¾ˆæ–¹ä¾¿ï¼Œæ­¤å¤–å¯ä»¥ç”¨ä¼˜åŒ–åŠ é€Ÿç®—æ³•æé«˜è®¡ç®—é€Ÿåº¦ã€‚</p><p>éšè—å±‚4ä¸ªèŠ‚ç‚¹çš„è®¡ç®—ä¾æ¬¡æ’åˆ—å‡ºæ¥ï¼š</p><p><img src="/images/neural-network/eqn_hidden_units.png"></p><p>æ¥ç€ï¼Œå®šä¹‰ç½‘ç»œçš„è¾“å…¥å‘é‡$\vec{x}$å’Œéšè—å±‚æ¯ä¸ªèŠ‚ç‚¹çš„æƒé‡å‘é‡$\vec{w}$ã€‚ä»¤</p><p><img src="/images/neural-network/eqn_7_12.png"></p><p>ä»£å…¥åˆ°å‰é¢çš„ä¸€ç»„å¼å­ï¼Œå¾—åˆ°ï¼š</p><p><img src="/images/neural-network/eqn_13_16.png"></p><p>ç°åœ¨ï¼ŒæŠŠä¸Šè¿°è®¡ç®—$a_4$, $a_5$,$a_6$,$a_7$çš„å››ä¸ªå¼å­å†™åˆ°ä¸€ä¸ªçŸ©é˜µé‡Œé¢ï¼Œæ¯ä¸ªå¼å­ä½œä¸ºçŸ©é˜µçš„ä¸€è¡Œï¼Œå°±å¯ä»¥åˆ©ç”¨çŸ©é˜µæ¥è¡¨ç¤ºå®ƒä»¬çš„è®¡ç®—äº†ã€‚ä»¤</p><p><img src="/images/neural-network/eqn_matrix1.png"></p><p>å¸¦å…¥å‰é¢çš„ä¸€ç»„å¼å­ï¼Œå¾—åˆ°</p><p><img src="/images/neural-network/formular_2.png"></p><p>åœ¨ï¼ˆå¼2ï¼‰ä¸­ï¼Œ</p><ul><li>$f$æ˜¯æ¿€æ´»å‡½æ•°ï¼Œåœ¨æœ¬ä¾‹ä¸­æ˜¯$sigmod$å‡½æ•°ï¼›</li><li>$W$æ˜¯æŸä¸€å±‚çš„æƒé‡çŸ©é˜µï¼›</li><li>$\vec{x}$æ˜¯æŸå±‚çš„è¾“å…¥å‘é‡ï¼›</li><li>$\vec{a}$æ˜¯æŸå±‚çš„è¾“å‡ºå‘é‡ã€‚</li></ul><p>ï¼ˆå¼2ï¼‰è¯´æ˜ç¥ç»ç½‘ç»œçš„æ¯ä¸€å±‚çš„ä½œç”¨å®é™…ä¸Šå°±æ˜¯å…ˆå°†è¾“å…¥å‘é‡å·¦ä¹˜ä¸€ä¸ªæ•°ç»„è¿›è¡Œçº¿æ€§å˜æ¢ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„å‘é‡ï¼Œç„¶åå†å¯¹è¿™ä¸ªå‘é‡é€å…ƒç´ åº”ç”¨ä¸€ä¸ªæ¿€æ´»å‡½æ•°ã€‚</p><p>æ¯ä¸€å±‚çš„ç®—æ³•éƒ½æ˜¯ä¸€æ ·çš„ã€‚æ¯”å¦‚ï¼Œå¯¹äºåŒ…å«ä¸€ä¸ªè¾“å…¥å±‚ï¼Œä¸€ä¸ªè¾“å‡ºå±‚å’Œä¸‰ä¸ªéšè—å±‚çš„ç¥ç»ç½‘ç»œï¼Œæˆ‘ä»¬å‡è®¾å…¶æƒé‡çŸ©é˜µåˆ†åˆ«ä¸º$W_1$,$W_2$,$W_3$,$W_4$ï¼Œæ¯ä¸ªéšè—å±‚çš„è¾“å‡ºåˆ†åˆ«æ˜¯$\vec{a}_1$,$\vec{a}_2$,$\vec{a}_3$ï¼Œç¥ç»ç½‘ç»œçš„è¾“å…¥ä¸º$\vec{x}$ï¼Œç¥ç»ç½‘ç»œçš„è¾“å‡ºä¸º$\vec{y}$ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/images/neural-network/nn_parameters_demo.png"></p><p>åˆ™æ¯ä¸€å±‚çš„è¾“å‡ºå‘é‡çš„è®¡ç®—å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><p><img src="/images/neural-network/eqn_17_20.png"></p><p>è¿™å°±æ˜¯ç¥ç»ç½‘ç»œè¾“å‡ºå€¼çš„çŸ©é˜µè®¡ç®—æ–¹æ³•ã€‚</p><p>å¦‚æœå†™æˆä¸€ä¸ªå…¬å¼ï¼š<br>$$<br>\vec{y} = f(W4 \cdot f(W3 \cdot f(W2 \cdot f(W1 \cdot \vec{x}))))<br>$$<br>ç¥ç»ç½‘ç»œæ­£å‘è®¡ç®—çš„è¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯ä¸€å±‚ä¸€å±‚ä¸æ–­åšè¿ç®—ï¼ŒåŠ¨æ€çš„æ¼”ç¤ºå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="/images/neural-network/neural_network_demo.gif"></p><h2 id="5-ç¥ç»ç½‘ç»œçš„è®­ç»ƒ-åå‘ä¼ æ’­ç®—æ³•"><a href="#5-ç¥ç»ç½‘ç»œçš„è®­ç»ƒ-åå‘ä¼ æ’­ç®—æ³•" class="headerlink" title="5. ç¥ç»ç½‘ç»œçš„è®­ç»ƒ - åå‘ä¼ æ’­ç®—æ³•"></a>5. ç¥ç»ç½‘ç»œçš„è®­ç»ƒ - åå‘ä¼ æ’­ç®—æ³•</h2><p>ç¥ç»ç½‘ç»œçš„æ¯ä¸ªè¿æ¥ä¸Šçš„æƒå€¼å¦‚æœçŸ¥é“ï¼Œé‚£ä¹ˆå°±å¯ä»¥å°†è¾“å…¥æ•°æ®ä»£å…¥å¾—åˆ°å¸Œæœ›çš„ç»“æœã€‚ç¥ç»ç½‘ç»œæ˜¯ä¸€ä¸ªæ¨¡å‹ï¼Œé‚£ä¹ˆè¿™äº›æƒå€¼å°±æ˜¯<strong>æ¨¡å‹çš„å‚æ•°</strong>ï¼Œä¹Ÿå°±æ˜¯æ¨¡å‹è¦å­¦ä¹ çš„ä¸œè¥¿ã€‚ç„¶è€Œï¼Œä¸€ä¸ªç¥ç»ç½‘ç»œçš„è¿æ¥æ–¹å¼ã€ç½‘ç»œçš„å±‚æ•°ã€æ¯å±‚çš„èŠ‚ç‚¹æ•°è¿™äº›å‚æ•°ï¼Œåˆ™ä¸æ˜¯å­¦ä¹ å‡ºæ¥çš„ï¼Œè€Œæ˜¯äººä¸ºäº‹å…ˆè®¾ç½®çš„ã€‚å¯¹äºè¿™äº›äººä¸ºè®¾ç½®çš„å‚æ•°ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º**è¶…å‚æ•°(Hyper-Parameters)**ã€‚</p><p>å‰é¢è¯¾ç¨‹ä¸­æ‰€å­¦çš„æœ€å°äºŒä¹˜ã€é€»è¾‘å›å½’ç­‰å¯ä»¥ç›´æ¥ä¼˜åŒ–æŸå¤±å‡½æ•°æ¥æ±‚è§£æ¨¡å‹å‚æ•°çš„æ›´æ–°å€¼ã€‚åœ¨å¤šå±‚ç¥ç»ç½‘ç»œä¸­ï¼š</p><ul><li>æœ€åä¸€å±‚çš„å‚æ•°å¯ä»¥ç”¨è¿™æ ·çš„æ–¹å¼æ±‚è§£å¾—åˆ°ï¼›</li><li>éšå±‚èŠ‚ç‚¹æ²¡æœ‰è¾“å‡ºçš„çœŸå€¼ï¼Œå› æ­¤æ— æ³•ç›´æ¥æ„å»ºæŸå¤±å‡½æ•°æ¥æ±‚è§£</li></ul><p>å¦‚ä½•åŒ–è§£è¿™ä¸ªéš¾é¢˜ï¼Ÿ</p><p>åå‘ä¼ æ’­ç®—æ³•å…¶å®å°±æ˜¯é“¾å¼æ±‚å¯¼æ³•åˆ™çš„åº”ç”¨ã€‚ç„¶è€Œï¼Œè¿™ä¸ªå¦‚æ­¤ç®€å•ä¸”æ˜¾è€Œæ˜“è§çš„æ–¹æ³•ï¼Œå´æ˜¯åœ¨Roseblattæå‡ºæ„ŸçŸ¥å™¨ç®—æ³•å°†è¿‘30å¹´ä¹‹åæ‰è¢«å‘æ˜å’Œæ™®åŠçš„ã€‚å¯¹æ­¤ï¼ŒBengioè¿™æ ·å›åº”é“ï¼š</p><blockquote><p>å¾ˆå¤šçœ‹ä¼¼æ˜¾è€Œæ˜“è§çš„æƒ³æ³•åªæœ‰åœ¨äº‹åæ‰å˜å¾—æ˜¾è€Œæ˜“è§ã€‚</p></blockquote><p>æŒ‰ç…§æœºå™¨å­¦ä¹ çš„é€šç”¨å¥—è·¯ï¼Œæˆ‘ä»¬å…ˆç¡®å®šç¥ç»ç½‘ç»œçš„ç›®æ ‡å‡½æ•°ï¼Œç„¶åç”¨éšæœºæ¢¯åº¦ä¸‹é™ä¼˜åŒ–ç®—æ³•å»æ±‚ç›®æ ‡å‡½æ•°æœ€å°å€¼æ—¶çš„å‚æ•°å€¼ã€‚</p><p>æˆ‘ä»¬å–ç½‘ç»œæ‰€æœ‰è¾“å‡ºå±‚èŠ‚ç‚¹çš„è¯¯å·®å¹³æ–¹å’Œä½œä¸ºç›®æ ‡å‡½æ•°ï¼š</p><p><img src="/images/neural-network/bp_loss.png"></p><p>å…¶ä¸­ï¼Œ$E_d$è¡¨ç¤ºæ˜¯æ ·æœ¬$d$çš„è¯¯å·®, <strong>tæ˜¯æ ·æœ¬çš„æ ‡ç­¾å€¼</strong>ï¼Œ<strong>yæ˜¯ç¥ç»ç½‘ç»œçš„è¾“å‡ºå€¼</strong>ã€‚</p><p>ç„¶åï¼Œä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•å¯¹ç›®æ ‡å‡½æ•°è¿›è¡Œä¼˜åŒ–ï¼š</p><p><img src="/images/neural-network/bp_weight_update.png"></p><p>éšæœºæ¢¯åº¦ä¸‹é™ç®—æ³•ä¹Ÿå°±æ˜¯éœ€è¦æ±‚å‡ºè¯¯å·®$E_d$å¯¹äºæ¯ä¸ªæƒé‡$w_{ji}$çš„åå¯¼æ•°ï¼ˆä¹Ÿå°±æ˜¯æ¢¯åº¦ï¼‰ï¼Œå¦‚ä½•æ±‚è§£ï¼Ÿ</p><p><img src="/images/neural-network/nn3.png"></p><p>è§‚å¯Ÿä¸Šå›¾ï¼Œæˆ‘ä»¬å‘ç°æƒé‡$w_{ji}$ä»…èƒ½é€šè¿‡å½±å“èŠ‚ç‚¹$j$çš„è¾“å…¥å€¼å½±å“ç½‘ç»œçš„å…¶å®ƒéƒ¨åˆ†ï¼Œè®¾$net_j$æ˜¯èŠ‚ç‚¹$j$çš„åŠ æƒè¾“å…¥ï¼Œå³</p><p><img src="/images/neural-network/eqn_21_22.png"></p><p>$E_d$æ˜¯$net_j$çš„å‡½æ•°ï¼Œè€Œ$net_j$æ˜¯$w_{ji}$çš„å‡½æ•°ã€‚æ ¹æ®é“¾å¼æ±‚å¯¼æ³•åˆ™ï¼Œå¯ä»¥å¾—åˆ°ï¼š</p><p><img src="/images/neural-network/eqn_23_25.png"></p><p>ä¸Šå¼ä¸­ï¼Œ$x_{ji}$æ˜¯èŠ‚ç‚¹ä¼ é€’ç»™èŠ‚ç‚¹$j$çš„è¾“å…¥å€¼ï¼Œä¹Ÿå°±æ˜¯èŠ‚ç‚¹$i$çš„è¾“å‡ºå€¼ã€‚</p><p>å¯¹äºçš„$\frac{\partial E_d}{\partial net_j}$æ¨å¯¼ï¼Œéœ€è¦åŒºåˆ†è¾“å‡ºå±‚å’Œéšè—å±‚ä¸¤ç§æƒ…å†µã€‚</p><h3 id="5-1-è¾“å‡ºå±‚æƒå€¼è®­ç»ƒ"><a href="#5-1-è¾“å‡ºå±‚æƒå€¼è®­ç»ƒ" class="headerlink" title="5.1 è¾“å‡ºå±‚æƒå€¼è®­ç»ƒ"></a>5.1 è¾“å‡ºå±‚æƒå€¼è®­ç»ƒ</h3><p><img src="/images/neural-network/nn3.png"></p><p>å¯¹äºè¾“å‡ºå±‚æ¥è¯´ï¼Œ$net_j$ä»…èƒ½é€šè¿‡èŠ‚ç‚¹$j$çš„è¾“å‡ºå€¼$y_j$æ¥å½±å“ç½‘ç»œå…¶å®ƒéƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯è¯´$E_d$æ˜¯$y_j$çš„å‡½æ•°ï¼Œè€Œ$y_j$æ˜¯$net_j$çš„å‡½æ•°ï¼Œå…¶ä¸­$y_j = sigmod(net_j)$ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å†æ¬¡ä½¿ç”¨é“¾å¼æ±‚å¯¼æ³•åˆ™ï¼š</p><p><img src="/images/neural-network/eqn_26.png"></p><p>è€ƒè™‘ä¸Šå¼ç¬¬ä¸€é¡¹:</p><p><img src="/images/neural-network/eqn_27_29.png"></p><p>è€ƒè™‘ä¸Šå¼ç¬¬äºŒé¡¹ï¼š</p><p><img src="/images/neural-network/eqn_30_31.png"></p><p>å°†ç¬¬ä¸€é¡¹å’Œç¬¬äºŒé¡¹å¸¦å…¥ï¼Œå¾—åˆ°ï¼š</p><p><img src="/images/neural-network/eqn_ed_net_j.png"></p><p>å¦‚æœä»¤$\delta_j = - \frac{\partial E_d}{\partial net_j}$ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªèŠ‚ç‚¹çš„è¯¯å·®é¡¹$\delta$æ˜¯ç½‘ç»œè¯¯å·®å¯¹è¿™ä¸ªèŠ‚ç‚¹è¾“å…¥çš„åå¯¼æ•°çš„ç›¸åæ•°ã€‚å¸¦å…¥ä¸Šå¼ï¼Œå¾—åˆ°ï¼š</p><p><img src="/images/neural-network/eqn_delta_j.png"></p><p>å°†ä¸Šè¿°æ¨å¯¼å¸¦å…¥éšæœºæ¢¯åº¦ä¸‹é™å…¬å¼ï¼Œå¾—åˆ°ï¼š</p><p><img src="/images/neural-network/eqn_32_34.png"></p><h3 id="5-2-éšè—å±‚æƒå€¼è®­ç»ƒ"><a href="#5-2-éšè—å±‚æƒå€¼è®­ç»ƒ" class="headerlink" title="5.2 éšè—å±‚æƒå€¼è®­ç»ƒ"></a>5.2 éšè—å±‚æƒå€¼è®­ç»ƒ</h3><p>ç°åœ¨æˆ‘ä»¬è¦æ¨å¯¼å‡ºéšè—å±‚çš„$\frac{\partial E_d}{\partial net_j}$ã€‚</p><p><img src="/images/neural-network/nn3.png"></p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰èŠ‚ç‚¹$j$çš„æ‰€æœ‰ç›´æ¥ä¸‹æ¸¸èŠ‚ç‚¹çš„é›†åˆ$Downstream(j)$ã€‚ä¾‹å¦‚ï¼Œå¯¹äºèŠ‚ç‚¹4æ¥è¯´ï¼Œå®ƒçš„ç›´æ¥ä¸‹æ¸¸èŠ‚ç‚¹æ˜¯èŠ‚ç‚¹8ã€èŠ‚ç‚¹9ã€‚å¯ä»¥çœ‹åˆ°$net_j$åªèƒ½é€šè¿‡å½±å“$Downstream(j)$å†å½±å“$E_d$ã€‚è®¾$net_k$æ˜¯èŠ‚ç‚¹$j$çš„ä¸‹æ¸¸èŠ‚ç‚¹çš„è¾“å…¥ï¼Œåˆ™$E_d$æ˜¯$net_k$çš„å‡½æ•°ï¼Œè€Œ$net_k$æ˜¯$net_j$çš„å‡½æ•°ã€‚å› ä¸º$net_k$æœ‰å¤šä¸ªï¼Œæˆ‘ä»¬åº”ç”¨å…¨å¯¼æ•°å…¬å¼ï¼Œå¯ä»¥åšå‡ºå¦‚ä¸‹æ¨å¯¼ï¼š</p><p><img src="/images/neural-network/eqn_35_40.png"></p><p>å› ä¸º$\delta_j = - \frac{\partial E_d}{\partial net_j}$ï¼Œå¸¦å…¥ä¸Šå¼å¾—åˆ°ï¼š</p><p><img src="/images/neural-network/eqn_delta_hidden.png"></p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»æ¨å¯¼å‡ºäº†åå‘ä¼ æ’­ç®—æ³•ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åˆšåˆšæ¨å¯¼å‡ºçš„è®­ç»ƒè§„åˆ™æ˜¯æ ¹æ®æ¿€æ´»å‡½æ•°æ˜¯sigmoidå‡½æ•°ã€å¹³æ–¹å’Œè¯¯å·®ã€å…¨è¿æ¥ç½‘ç»œã€éšæœºæ¢¯åº¦ä¸‹é™ä¼˜åŒ–ç®—æ³•ã€‚å¦‚æœæ¿€æ´»å‡½æ•°ä¸åŒã€è¯¯å·®è®¡ç®—æ–¹å¼ä¸åŒã€ç½‘ç»œè¿æ¥ç»“æ„ä¸åŒã€ä¼˜åŒ–ç®—æ³•ä¸åŒï¼Œåˆ™å…·ä½“çš„è®­ç»ƒè§„åˆ™ä¹Ÿä¼šä¸ä¸€æ ·ã€‚ä½†æ˜¯æ— è®ºæ€æ ·ï¼Œè®­ç»ƒè§„åˆ™çš„æ¨å¯¼æ–¹å¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåº”ç”¨é“¾å¼æ±‚å¯¼æ³•åˆ™è¿›è¡Œæ¨å¯¼å³å¯ã€‚</p><h3 id="5-3-å…·ä½“è§£é‡Š"><a href="#5-3-å…·ä½“è§£é‡Š" class="headerlink" title="5.3 å…·ä½“è§£é‡Š"></a>5.3 å…·ä½“è§£é‡Š</h3><p>å‡è®¾æ¯ä¸ªè®­ç»ƒæ ·æœ¬ä¸º$(\vec{x}, \vec{t})$ï¼Œå…¶ä¸­å‘é‡$\vec{x}$æ˜¯è®­ç»ƒæ ·æœ¬çš„ç‰¹å¾ï¼Œè€Œ$\vec{t}$æ˜¯æ ·æœ¬çš„ç›®æ ‡å€¼ã€‚</p><p><img src="/images/neural-network/nn3.png"></p><p>é¦–å…ˆï¼Œæ ¹æ®ä¸Šä¸€èŠ‚ä»‹ç»çš„ç®—æ³•ï¼Œç”¨æ ·æœ¬çš„ç‰¹å¾$\vec{x}$ï¼Œè®¡ç®—å‡ºç¥ç»ç½‘ç»œä¸­æ¯ä¸ªéšè—å±‚èŠ‚ç‚¹çš„è¾“å‡º$a_i$ï¼Œä»¥åŠè¾“å‡ºå±‚æ¯ä¸ªèŠ‚ç‚¹çš„è¾“å‡º$y_i$ã€‚</p><p>ç„¶åï¼ŒæŒ‰ç…§ä¸‹é¢çš„æ–¹æ³•è®¡ç®—å‡ºæ¯ä¸ªèŠ‚ç‚¹çš„è¯¯å·®é¡¹$\delta_i$ï¼š</p><ul><li><strong>å¯¹äºè¾“å‡ºå±‚èŠ‚ç‚¹$i$</strong></li></ul><p><img src="/images/neural-network/formular_3.png"></p><p>å…¶ä¸­ï¼Œ$\delta_i$æ˜¯èŠ‚ç‚¹$i$çš„è¯¯å·®é¡¹ï¼Œ$y_i$æ˜¯èŠ‚ç‚¹$i$çš„è¾“å‡ºå€¼ï¼Œ$t_i$æ˜¯æ ·æœ¬å¯¹åº”äºèŠ‚ç‚¹$i$çš„ç›®æ ‡å€¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ ¹æ®ä¸Šå›¾ï¼Œå¯¹äºè¾“å‡ºå±‚èŠ‚ç‚¹8æ¥è¯´ï¼Œå®ƒçš„è¾“å‡ºå€¼æ˜¯$y_1$ï¼Œè€Œæ ·æœ¬çš„ç›®æ ‡å€¼æ˜¯$t_1$ï¼Œå¸¦å…¥ä¸Šé¢çš„å…¬å¼å¾—åˆ°èŠ‚ç‚¹8çš„è¯¯å·®é¡¹åº”è¯¥æ˜¯ï¼š</p><p><img src="/images/neural-network/forumlar_delta8.png"></p><ul><li><strong>å¯¹äºéšè—å±‚èŠ‚ç‚¹</strong></li></ul><p><img src="/images/neural-network/formular_4.png"></p><p>å…¶ä¸­ï¼Œ$a_i$æ˜¯èŠ‚ç‚¹$i$çš„è¾“å‡ºå€¼ï¼Œ$w_{ki}$æ˜¯èŠ‚ç‚¹$i$åˆ°å®ƒçš„ä¸‹ä¸€å±‚èŠ‚ç‚¹$k$çš„è¿æ¥çš„æƒé‡ï¼Œ$\delta_k$æ˜¯èŠ‚ç‚¹$i$çš„ä¸‹ä¸€å±‚èŠ‚ç‚¹$k$çš„è¯¯å·®é¡¹ã€‚ä¾‹å¦‚ï¼Œå¯¹äºéšè—å±‚èŠ‚ç‚¹4æ¥è¯´ï¼Œè®¡ç®—æ–¹æ³•å¦‚ä¸‹ï¼š</p><p><img src="/images/neural-network/forumlar_delta4.png"></p><p>æœ€åï¼Œæ›´æ–°æ¯ä¸ªè¿æ¥ä¸Šçš„æƒå€¼ï¼š</p><p><img src="/images/neural-network/formular_5.png"></p><p>å…¶ä¸­ï¼Œ$w_{ji}$æ˜¯èŠ‚ç‚¹$i$åˆ°èŠ‚ç‚¹$j$çš„æƒé‡ï¼Œ$\eta$æ˜¯ä¸€ä¸ªæˆä¸ºå­¦ä¹ é€Ÿç‡çš„å¸¸æ•°ï¼Œ$\delta_j$æ˜¯èŠ‚ç‚¹$j$çš„è¯¯å·®é¡¹ï¼Œ$x_{ji}$æ˜¯èŠ‚ç‚¹$i$ä¼ é€’ç»™èŠ‚ç‚¹$j$çš„è¾“å…¥ã€‚ä¾‹å¦‚ï¼Œæƒé‡$w_{84}$çš„æ›´æ–°æ–¹æ³•å¦‚ä¸‹ï¼š</p><p><img src="/images/neural-network/eqn_w84_update.png"></p><p>ç±»ä¼¼çš„ï¼Œæƒé‡$w_{41}$çš„æ›´æ–°æ–¹æ³•å¦‚ä¸‹ï¼š</p><p><img src="/images/neural-network/eqn_w41_update.png"></p><p>åç½®é¡¹çš„è¾“å…¥å€¼æ°¸è¿œä¸º1ã€‚ä¾‹å¦‚ï¼ŒèŠ‚ç‚¹4çš„åç½®é¡¹$w_{4b}$åº”è¯¥æŒ‰ç…§ä¸‹é¢çš„æ–¹æ³•è®¡ç®—ï¼š</p><p><img src="/images/neural-network/eqn_w4b_update.png"></p><p>è®¡ç®—ä¸€ä¸ªèŠ‚ç‚¹çš„è¯¯å·®é¡¹ï¼Œéœ€è¦å…ˆè®¡ç®—æ¯ä¸ªä¸å…¶ç›¸è¿çš„ä¸‹ä¸€å±‚èŠ‚ç‚¹çš„è¯¯å·®é¡¹ï¼Œè¿™å°±è¦æ±‚è¯¯å·®é¡¹çš„è®¡ç®—é¡ºåºå¿…é¡»æ˜¯ä»è¾“å‡ºå±‚å¼€å§‹ï¼Œç„¶ååå‘ä¾æ¬¡è®¡ç®—æ¯ä¸ªéšè—å±‚çš„è¯¯å·®é¡¹ï¼Œç›´åˆ°ä¸è¾“å…¥å±‚ç›¸è¿çš„é‚£ä¸ªéšè—å±‚ï¼Œè¿™å°±æ˜¯åå‘ä¼ æ’­ç®—æ³•çš„åå­—çš„å«ä¹‰ã€‚å½“æ‰€æœ‰èŠ‚ç‚¹çš„è¯¯å·®é¡¹è®¡ç®—å®Œæ¯•åï¼Œå°±å¯ä»¥æ ¹æ®å¼5æ¥æ›´æ–°æ‰€æœ‰çš„æƒé‡ã€‚</p><h2 id="6-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¿€æ´»å‡½æ•°"><a href="#6-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¿€æ´»å‡½æ•°" class="headerlink" title="6. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¿€æ´»å‡½æ•°"></a>6. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¿€æ´»å‡½æ•°</h2><p>æ¿€æ´»å‡½æ•°åœ¨ç¥ç»ç½‘ç»œä¸­éå¸¸é‡è¦ï¼Œä½¿ç”¨æ¿€æ´»å‡½æ•°ä¹Ÿæ˜¯éå¸¸å¿…è¦çš„ï¼Œå‰é¢æˆ‘ä»¬ä»äººè„‘ç¥ç»å…ƒçš„è§’åº¦ç†è§£äº†æ¿€æ´»å‡½æ•°ï¼Œå› ä¸ºç¥ç»å…ƒéœ€è¦é€šè¿‡æ¿€æ´»æ‰èƒ½å¾€åä¼ æ’­ï¼Œæ‰€ä»¥ç¥ç»ç½‘ç»œä¸­éœ€è¦æ¿€æ´»å‡½æ•°ï¼Œä¸‹é¢æˆ‘ä»¬ä»æ•°å­¦çš„è§’åº¦ç†è§£ä¸€ä¸‹æ¿€æ´»å‡½æ•°çš„å¿…è¦æ€§ã€‚</p><p>æ¯”å¦‚ä¸€ä¸ªä¸¤å±‚çš„ç¥ç»ç½‘ç»œï¼Œä½¿ç”¨ f è¡¨ç¤ºæ¿€æ´»å‡½æ•°ï¼Œé‚£ä¹ˆ</p><p>$$<br>y = f( w_2  f(w_1 x) )<br>$$</p><p>å¦‚æœä¸ä½¿ç”¨æ¿€æ´»å‡½æ•°ï¼Œé‚£ä¹ˆç¥ç»ç½‘ç»œçš„ç»“æœå°±æ˜¯</p><p>$$<br>y = w_2 (w_1 x) = (w_2 w_1) x = \bar{w} x<br>$$</p><p>å¯ä»¥çœ‹åˆ°ï¼Œå°†ä¸¤å±‚ç¥ç»ç½‘ç»œçš„å‚æ•°åˆåœ¨ä¸€èµ·ï¼Œç”¨ $\bar{w}$ æ¥è¡¨ç¤ºï¼Œä¸¤å±‚çš„ç¥ç»ç½‘ç»œå…¶å®å°±å˜æˆäº†ä¸€å±‚ç¥ç»ç½‘ç»œï¼Œåªä¸è¿‡å‚æ•°å˜æˆäº†æ–°çš„ $\bar{w}$ï¼Œæ‰€ä»¥å¦‚æœä¸ä½¿ç”¨æ¿€æ´»å‡½æ•°ï¼Œé‚£ä¹ˆä¸ç®¡å¤šå°‘å±‚çš„ç¥ç»ç½‘ç»œï¼Œ$y = w_n \cdots w_2 w_1 x = \bar{w} x$ï¼Œå°±éƒ½å˜æˆäº†å•å±‚ç¥ç»ç½‘ç»œï¼Œæ‰€ä»¥åœ¨æ¯ä¸€å±‚éƒ½å¿…é¡»ä½¿ç”¨æ¿€æ´»å‡½æ•°ã€‚</p><p>æœ€åçœ‹çœ‹æ¿€æ´»å‡½æ•°å¯¹ç¥ç»ç½‘ç»œçš„å½±å“</p><p><img src="/images/neural-network/nn-activation-function.gif"></p><p>å¯ä»¥çœ‹åˆ°ä½¿ç”¨äº†æ¿€æ´»å‡½æ•°ä¹‹åï¼Œç¥ç»ç½‘ç»œå¯ä»¥é€šè¿‡æ”¹å˜æƒé‡å®ç°ä»»æ„å½¢çŠ¶ï¼Œè¶Šæ˜¯å¤æ‚çš„ç¥ç»ç½‘ç»œèƒ½æ‹Ÿåˆçš„å½¢çŠ¶è¶Šå¤æ‚ï¼Œè¿™å°±æ˜¯è‘—åçš„ç¥ç»ç½‘ç»œä¸‡æœ‰é€¼è¿‘å®šç†ã€‚ç¥ç»ç½‘ç»œä½¿ç”¨çš„æ¿€æ´»å‡½æ•°éƒ½æ˜¯éçº¿æ€§çš„ï¼Œæ¯ä¸ªæ¿€æ´»å‡½æ•°éƒ½è¾“å…¥ä¸€ä¸ªå€¼ï¼Œç„¶ååšä¸€ç§ç‰¹å®šçš„æ•°å­¦è¿ç®—å¾—åˆ°ä¸€ä¸ªç»“æœã€‚</p><h3 id="6-1-sigmoid-æ¿€æ´»å‡½æ•°"><a href="#6-1-sigmoid-æ¿€æ´»å‡½æ•°" class="headerlink" title="6.1 sigmoid æ¿€æ´»å‡½æ•°"></a>6.1 sigmoid æ¿€æ´»å‡½æ•°</h3><p>$$\sigma(x) = \frac{1}{1 + e^{-x}}$$</p><p><img src="/images/neural-network/act-sigmoid.jpg"></p><h3 id="6-2-tanh-æ¿€æ´»å‡½æ•°"><a href="#6-2-tanh-æ¿€æ´»å‡½æ•°" class="headerlink" title="6.2 tanh æ¿€æ´»å‡½æ•°"></a>6.2 tanh æ¿€æ´»å‡½æ•°</h3><p>$$tanh(x) = 2 \sigma(2x) - 1$$</p><p><img src="/images/neural-network/act-tanh.jpg"></p><h3 id="6-3-ReLU-æ¿€æ´»å‡½æ•°"><a href="#6-3-ReLU-æ¿€æ´»å‡½æ•°" class="headerlink" title="6.3 ReLU æ¿€æ´»å‡½æ•°"></a>6.3 ReLU æ¿€æ´»å‡½æ•°</h3><p>$$ReLU(x) = max(0, x)$$</p><p><img src="/images/neural-network/act-relu.jpg"></p><p>å½“è¾“å…¥ $x&lt;0$ æ—¶ï¼Œè¾“å‡ºä¸º $0$ï¼Œå½“ $x&gt; 0$ æ—¶ï¼Œè¾“å‡ºä¸º $x$ã€‚è¯¥æ¿€æ´»å‡½æ•°ä½¿ç½‘ç»œæ›´å¿«é€Ÿåœ°æ”¶æ•›ã€‚å®ƒä¸ä¼šé¥±å’Œï¼Œå³å®ƒå¯ä»¥å¯¹æŠ—æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œè‡³å°‘åœ¨æ­£åŒºåŸŸï¼ˆ$x&gt; 0$ æ—¶ï¼‰å¯ä»¥è¿™æ ·ï¼Œå› æ­¤ç¥ç»å…ƒè‡³å°‘åœ¨ä¸€åŠåŒºåŸŸä¸­ä¸ä¼šæŠŠæ‰€æœ‰é›¶è¿›è¡Œåå‘ä¼ æ’­ã€‚ç”±äºä½¿ç”¨äº†ç®€å•çš„é˜ˆå€¼åŒ–ï¼ˆthresholdingï¼‰ï¼ŒReLU è®¡ç®—æ•ˆç‡å¾ˆé«˜ã€‚</p><p>åœ¨ç½‘ç»œä¸­ï¼Œä¸åŒçš„è¾“å…¥å¯èƒ½åŒ…å«ç€å¤§å°ä¸åŒå…³é”®ç‰¹å¾ï¼Œä½¿ç”¨å¤§å°å¯å˜çš„æ•°æ®ç»“æ„å»åšå®¹å™¨ï¼Œåˆ™æ›´åŠ çµæ´»ã€‚å‡å¦‚ç¥ç»å…ƒæ¿€æ´»å…·æœ‰ç¨€ç–æ€§ï¼Œé‚£ä¹ˆä¸åŒæ¿€æ´»è·¯å¾„ä¸Šï¼šä¸åŒæ•°é‡ï¼ˆé€‰æ‹©æ€§ä¸æ¿€æ´»ï¼‰ã€ä¸åŒåŠŸèƒ½ï¼ˆåˆ†å¸ƒå¼æ¿€æ´»ï¼‰ã€‚ä¸¤ç§å¯ä¼˜åŒ–çš„ç»“æ„ç”Ÿæˆçš„æ¿€æ´»è·¯å¾„ï¼Œå¯ä»¥æ›´å¥½åœ°ä»æœ‰æ•ˆçš„æ•°æ®çš„ç»´åº¦ä¸Šï¼Œå­¦ä¹ åˆ°ç›¸å¯¹ç¨€ç–çš„ç‰¹å¾ï¼Œèµ·åˆ°è‡ªåŠ¨åŒ–è§£ç¦»æ•ˆæœã€‚</p><p><img src="/images/neural-network/nn-sparse.png"></p><p>ç¨€ç–ç‰¹å¾å¹¶ä¸éœ€è¦ç½‘ç»œå…·æœ‰å¾ˆå¼ºçš„å¤„ç†çº¿æ€§ä¸å¯åˆ†æœºåˆ¶ï¼Œå› æ­¤åœ¨æ·±åº¦å­¦ä¹ æ¨¡å‹ä¸­ï¼Œä½¿ç”¨ç®€å•ã€é€Ÿåº¦å¿«çš„çº¿æ€§æ¿€æ´»å‡½æ•°å¯èƒ½æ›´ä¸ºåˆé€‚ã€‚å¦‚å›¾ï¼Œä¸€æ—¦ç¥ç»å…ƒä¸ç¥ç»å…ƒä¹‹é—´æ”¹ä¸ºçº¿æ€§æ¿€æ´»ï¼Œç½‘ç»œçš„éçº¿æ€§éƒ¨åˆ†ä»…ä»…æ¥è‡ªäºç¥ç»å…ƒéƒ¨åˆ†é€‰æ‹©æ€§æ¿€æ´»ã€‚</p><p>æ›´å€¾å‘äºä½¿ç”¨çº¿æ€§ç¥ç»æ¿€æ´»å‡½æ•°çš„å¦å¤–ä¸€ä¸ªåŸå› æ˜¯ï¼Œå‡è½»æ¢¯åº¦æ³•è®­ç»ƒæ·±åº¦ç½‘ç»œæ—¶çš„Vanishing Gradient Problemã€‚</p><p>çœ‹è¿‡BPæ¨å¯¼çš„äººéƒ½çŸ¥é“ï¼Œè¯¯å·®ä»è¾“å‡ºå±‚åå‘ä¼ æ’­ç®—æ¢¯åº¦æ—¶ï¼Œåœ¨å„å±‚éƒ½è¦ä¹˜å½“å‰å±‚çš„è¾“å…¥ç¥ç»å…ƒå€¼ï¼Œæ¿€æ´»å‡½æ•°çš„ä¸€é˜¶å¯¼æ•°ã€‚<br>$$<br>grad = error â‹… sigmoidâ€™(x) â‹… x<br>$$</p><p>ä½¿ç”¨åŒç«¯é¥±å’Œ(å³å€¼åŸŸè¢«é™åˆ¶)Sigmoidç³»å‡½æ•°ä¼šæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>sigmoidâ€™(x) âˆˆ (0,1)  å¯¼æ•°ç¼©æ”¾</li><li>xâˆˆ(0,1)æˆ–xâˆˆ(-1,1)  é¥±å’Œå€¼ç¼©æ”¾</li></ol><p>è¿™æ ·ï¼Œç»è¿‡æ¯ä¸€å±‚æ—¶ï¼Œè¯¯å·®éƒ½æ˜¯æˆå€çš„è¡°å‡ï¼Œä¸€æ—¦è¿›è¡Œé€’æ¨å¼çš„å¤šå±‚çš„åå‘ä¼ æ’­ï¼Œæ¢¯åº¦å°±ä¼šä¸åœçš„è¡°å‡ï¼Œæ¶ˆå¤±ï¼Œä½¿å¾—ç½‘ç»œå­¦ä¹ å˜æ…¢ã€‚è€Œæ ¡æ­£æ¿€æ´»å‡½æ•°çš„æ¢¯åº¦æ˜¯1ï¼Œä¸”åªæœ‰ä¸€ç«¯é¥±å’Œï¼Œæ¢¯åº¦å¾ˆå¥½çš„åœ¨åå‘ä¼ æ’­ä¸­æµåŠ¨ï¼Œè®­ç»ƒé€Ÿåº¦å¾—åˆ°äº†å¾ˆå¤§çš„æé«˜ã€‚</p><h2 id="7-ç®—æ³•ä¸å¤„ç†æ­¥éª¤"><a href="#7-ç®—æ³•ä¸å¤„ç†æ­¥éª¤" class="headerlink" title="7. ç®—æ³•ä¸å¤„ç†æ­¥éª¤"></a>7. ç®—æ³•ä¸å¤„ç†æ­¥éª¤</h2><pre class="line-numbers language-none"><code class="language-none">W = random# æ¯æ¬¡è®­ç»ƒfor k in range(epoch)    # æ­£å‘è®¡ç®—    for j in range(NN_depth):        # å¼2 ( a = xxx)        X_j = f( W_{j, j-1} X_{j-1})    ï¼ƒ åå‘è¯¯å·®è®¡ç®—    for j in range(NN_depth, 0, -1):        # å¼3ï¼Œ å¼4        delta = y_i(1-y_i)(t_i-y_i)        or         delta = a_i(1-a_i) \sum w_ki delta_k        # å¼5        w_ji = w_j + epsilon delta_j x_ji<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-1-æ­£å‘è®¡ç®—ï¼š"><a href="#7-1-æ­£å‘è®¡ç®—ï¼š" class="headerlink" title="7.1 æ­£å‘è®¡ç®—ï¼š"></a>7.1 æ­£å‘è®¡ç®—ï¼š</h3><p><img src="/images/neural-network/formular_2.png"></p><h3 id="7-2-åå‘ä¼ æ’­ï¼š"><a href="#7-2-åå‘ä¼ æ’­ï¼š" class="headerlink" title="7.2 åå‘ä¼ æ’­ï¼š"></a>7.2 åå‘ä¼ æ’­ï¼š</h3><p>è¾“å‡ºå±‚çš„è¯¯å·®è®¡ç®—ï¼š</p><p><img src="/images/neural-network/formular_3.png"></p><p>éšå±‚çš„è¯¯å·®è®¡ç®—ï¼š</p><p><img src="/images/neural-network/formular_4.png"></p><p>æƒå€¼æ›´æ–°ï¼š</p><p><img src="/images/neural-network/formular_5.png"></p>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> å¤šå±‚ç¥ç»ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰ï¼šé€»è¾‘å›å½’ç®—æ³•</title>
      <link href="2022/01/08/machine-learning-2/"/>
      <url>2022/01/08/machine-learning-2/</url>
      
        <content type="html"><![CDATA[<h1 id="æœºå™¨å­¦ä¹ ï¼ˆäºŒï¼‰ï¼šé€»è¾‘å›å½’ç®—æ³•"><a href="#æœºå™¨å­¦ä¹ ï¼ˆäºŒï¼‰ï¼šé€»è¾‘å›å½’ç®—æ³•" class="headerlink" title="æœºå™¨å­¦ä¹ ï¼ˆäºŒï¼‰ï¼šé€»è¾‘å›å½’ç®—æ³•"></a>æœºå™¨å­¦ä¹ ï¼ˆäºŒï¼‰ï¼šé€»è¾‘å›å½’ç®—æ³•</h1><p>é€»è¾‘å›å½’(Logistic Regression, LR)æ¨¡å‹å…¶å®ä»…åœ¨çº¿æ€§å›å½’çš„åŸºç¡€ä¸Šï¼Œå¥—ç”¨äº†ä¸€ä¸ªé€»è¾‘å‡½æ•°ï¼Œä½†ä¹Ÿå°±ç”±äºè¿™ä¸ªé€»è¾‘å‡½æ•°ï¼Œä½¿å¾—é€»è¾‘å›å½’æ¨¡å‹èƒ½å¤Ÿè¾“å‡ºç±»åˆ«çš„æ¦‚ç‡ã€‚</p><p>é€»è¾‘å›å½’çš„æœ¬è´¨æ˜¯ï¼šå‡è®¾æ•°æ®æœä»è¿™ä¸ªåˆ†å¸ƒï¼Œç„¶åä½¿ç”¨æå¤§ä¼¼ç„¶ä¼°è®¡åšå‚æ•°çš„ä¼°è®¡ã€‚</p><p><img src="/images/machine-learning/2-1.png"></p><h2 id="1-ä»€ä¹ˆæ˜¯å›å½’"><a href="#1-ä»€ä¹ˆæ˜¯å›å½’" class="headerlink" title="1. ä»€ä¹ˆæ˜¯å›å½’"></a>1. ä»€ä¹ˆæ˜¯å›å½’</h2><p>ä¸€è¯´å›å½’æœ€å…ˆæƒ³åˆ°çš„æ˜¯ç»ˆç»“è€…é‚£å¥ï¼šIâ€™ll be back</p><p>regressï¼Œreè¡¨ç¤ºbackï¼Œgressç­‰äºgoï¼Œæ•°å€¼go back to mean valueï¼Œä¹Ÿå°±æ˜¯Iâ€™ll be back çš„æ„æ€</p><p>åœ¨æ•°ç†ç»Ÿè®¡ä¸­ï¼Œå›å½’æ˜¯ç¡®å®šå¤šç§å˜é‡ç›¸äº’ä¾èµ–çš„å®šé‡å…³ç³»çš„æ–¹æ³•</p><blockquote><p>é€šä¿—ç†è§£ï¼šè¶Šæ¥è¶Šæ¥è¿‘æœŸæœ›å€¼çš„è¿‡ç¨‹ï¼Œ<strong>å›å½’</strong> äºäº‹ç‰©çš„æœ¬è´¨</p></blockquote><p>æœ€ç®€å•çš„å›å½’æ˜¯çº¿æ€§å›å½’(Linear Regression)ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡æœ€å°äºŒä¹˜ç­‰æ–¹æ³•å¾—åˆ°æ¨¡å‹çš„å‚æ•°ã€‚çº¿æ€§å›å½’å‡è®¾è¾“å‡ºå˜é‡æ˜¯è‹¥å¹²è¾“å‡ºå˜é‡çš„çº¿æ€§ç»„åˆï¼Œå¹¶æ ¹æ®è¿™ä¸€å…³ç³»æ±‚è§£çº¿æ€§ç»„åˆä¸­çš„æœ€ä¼˜ç³»æ•°ã€‚</p><p>é€šä¿—ç†è§£ï¼šè¾“å‡ºä¸€ä¸ªçº¿æ€§å‡½æ•°ï¼Œä¾‹å¦‚$y=f(x; \theta)$ï¼Œé€šè¿‡å¯»æ‰¾æœ€ä¼˜çš„å‚æ•°$\theta$ä½¿å¾—è§‚æµ‹æ•°æ®ä¸æ¨¡å‹æ•°æ®ç›¸å»åˆã€‚</p><p><img src="/images/machine-learning/2-2.png"></p><h2 id="2-é€»è¾‘å›å½’æ¨¡å‹"><a href="#2-é€»è¾‘å›å½’æ¨¡å‹" class="headerlink" title="2. é€»è¾‘å›å½’æ¨¡å‹"></a>2. é€»è¾‘å›å½’æ¨¡å‹</h2><p>å›å½’æ˜¯ä¸€ç§æ¯”è¾ƒå®¹æ˜“ç†è§£çš„æ¨¡å‹ï¼Œå°±ç›¸å½“äº$y=f(x)$ï¼Œè¡¨æ˜è‡ªå˜é‡$x$ä¸å› å˜é‡$y$çš„å…³ç³»ã€‚</p><p>ä»¥å¸¸è§çš„çœ‹åŒ»ä¸¾ä¾‹ï¼ŒåŒ»ç”Ÿæ²»ç—…æ—¶çš„æœ›ã€é—»ã€é—®ã€åˆ‡ï¼Œä¹‹ååˆ¤å®šç—…äººæ˜¯å¦ç”Ÿç—…æˆ–ç”Ÿäº†ä»€ä¹ˆç—…ï¼Œå…¶ä¸­çš„æœ›é—»é—®åˆ‡å°±æ˜¯è·å–è‡ªå˜é‡$x$ï¼Œå³ç‰¹å¾æ•°æ®ï¼Œåˆ¤æ–­æ˜¯å¦ç”Ÿç—…å°±ç›¸å½“äºè·å–å› å˜é‡$y$ï¼Œå³é¢„æµ‹åˆ†ç±»ã€‚</p><p>$X$ä¸ºæ•°æ®ç‚¹â€”â€”è‚¿ç˜¤çš„å¤§å°ï¼Œ$Y$ä¸ºè§‚æµ‹å€¼â€”â€”æ˜¯å¦æ˜¯æ¶æ€§è‚¿ç˜¤ã€‚</p><p>é€šè¿‡æ„å»ºçº¿æ€§å›å½’æ¨¡å‹ï¼Œå¦‚$h_\theta(x)$æ‰€ç¤ºï¼Œæ„å»ºçº¿æ€§å›å½’æ¨¡å‹åï¼Œå³å¯ä»¥æ ¹æ®è‚¿ç˜¤å¤§å°ï¼Œé¢„æµ‹æ˜¯å¦ä¸ºæ¶æ€§è‚¿ç˜¤$h_\theta(x)) \ge 0.5$ä¸ºæ¶æ€§ï¼Œ$h_\theta(x) \lt 0.5$ä¸ºè‰¯æ€§ã€‚</p><p><img src="/images/machine-learning/2-3.gif"></p><p>ç„¶è€Œçº¿æ€§å›å½’çš„é²æ£’æ€§å¾ˆå·®ï¼Œä¾‹å¦‚åœ¨ä¸Šå›¾çš„æ•°æ®é›†ä¸Šå»ºç«‹å›å½’ï¼Œå› æœ€å³è¾¹å™ªç‚¹çš„å­˜åœ¨ï¼Œä½¿å›å½’æ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°éƒ½å¾ˆå·®ã€‚è¿™ä¸»è¦æ˜¯ç”±äºçº¿æ€§å›å½’åœ¨æ•´ä¸ªå®æ•°åŸŸå†…æ•æ„Ÿåº¦ä¸€è‡´ï¼Œè€Œåˆ†ç±»èŒƒå›´ï¼Œéœ€è¦åœ¨$[0,1]$ã€‚</p><p>é€»è¾‘å›å½’å°±æ˜¯ä¸€ç§å‡å°é¢„æµ‹èŒƒå›´ï¼Œå°†é¢„æµ‹å€¼é™å®šä¸º$[0,1]$é—´çš„ä¸€ç§å›å½’æ¨¡å‹ï¼Œå…¶å›å½’æ–¹ç¨‹ä¸å›å½’æ›²çº¿å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚é€»è¾‘æ›²çº¿åœ¨$z=0$æ—¶ï¼Œååˆ†æ•æ„Ÿï¼Œåœ¨$z&gt;&gt;0$æˆ–$z&lt;&lt;0$å¤„ï¼Œéƒ½ä¸æ•æ„Ÿï¼Œå°†é¢„æµ‹å€¼é™å®šä¸º$(0,1)$ã€‚</p><h3 id="2-1-é€»è¾‘å›å½’è¡¨è¾¾å¼"><a href="#2-1-é€»è¾‘å›å½’è¡¨è¾¾å¼" class="headerlink" title="2.1 é€»è¾‘å›å½’è¡¨è¾¾å¼"></a>2.1 é€»è¾‘å›å½’è¡¨è¾¾å¼</h3><p>è¿™ä¸ªå‡½æ•°ç§°ä¸ºLogisticå‡½æ•°(Logistic Function)ï¼Œä¹Ÿç§°ä¸ºSigmoidå‡½æ•°(Sigmoid Function)ã€‚å‡½æ•°å…¬å¼å¦‚ä¸‹ï¼š</p><p>$$<br>g(z) = \frac{1}{1+e^{-z}}<br>$$</p><p>Logisticå‡½æ•°:</p><ul><li>å½“$z$è¶‹è¿‘äºæ— ç©·å¤§æ—¶ï¼Œ$g(z)$è¶‹è¿‘äº1ï¼›</li><li>å½“$z$è¶‹è¿‘äºæ— ç©·å°æ—¶ï¼Œ$g(z)$è¶‹è¿‘äº0ã€‚</li></ul><p>Logisticå‡½æ•°çš„å›¾å½¢å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚Logisticå‡½æ•°æ±‚å¯¼æ—¶æœ‰ä¸€ä¸ªç‰¹æ€§ï¼Œè¿™ä¸ªç‰¹æ€§å°†åœ¨ä¸‹é¢çš„æ¨å¯¼ä¸­ç”¨åˆ°ï¼Œè¿™ä¸ªç‰¹æ€§ä¸ºï¼š<br>$$<br>gâ€™(z) =  \frac{d}{dz} \frac{1}{1+e^{-z}} \<br>      =  \frac{1}{(1+e^{-z})^2}(e^{-z}) \<br>      =  \frac{1}{(1+e^{-z})} (1 - \frac{1}{(1+e^{-z})}) \<br>      =  g(z)(1-g(z))<br>$$<br>é€»è¾‘å›å½’æœ¬è´¨ä¸Šæ˜¯çº¿æ€§å›å½’ï¼Œåªæ˜¯åœ¨ç‰¹å¾åˆ°ç»“æœçš„æ˜ å°„ä¸­åŠ å…¥äº†ä¸€å±‚å‡½æ•°æ˜ å°„ï¼Œå³å…ˆæŠŠç‰¹å¾çº¿æ€§æ±‚å’Œï¼Œç„¶åä½¿ç”¨å‡½æ•°$g(z)$å°†åšä¸ºå‡è®¾å‡½æ•°æ¥é¢„æµ‹ã€‚</p><p>$g(z)$å¯ä»¥å°†è¿ç»­å€¼æ˜ å°„åˆ°0åˆ°1ä¹‹é—´ã€‚çº¿æ€§å›å½’æ¨¡å‹çš„è¡¨è¾¾å¼å¸¦å…¥$g(z)$ï¼Œå°±å¾—åˆ°é€»è¾‘å›å½’çš„è¡¨è¾¾å¼:<br>$$<br>h_\theta(x) = g(\theta^T x) = \frac{1}{1+e^{-\theta^T x}}<br>$$</p><h3 id="2-2-é€»è¾‘å›å½’çš„è½¯åˆ†ç±»"><a href="#2-2-é€»è¾‘å›å½’çš„è½¯åˆ†ç±»" class="headerlink" title="2.2 é€»è¾‘å›å½’çš„è½¯åˆ†ç±»"></a>2.2 é€»è¾‘å›å½’çš„è½¯åˆ†ç±»</h3><p>ç°åœ¨æˆ‘ä»¬å°†yçš„å–å€¼$h_\theta(x)$é€šè¿‡Logisticå‡½æ•°å½’ä¸€åŒ–åˆ°(0,1)é—´ï¼Œ$y$çš„å–å€¼æœ‰ç‰¹æ®Šçš„å«ä¹‰ï¼Œå®ƒè¡¨ç¤ºç»“æœå–1çš„æ¦‚ç‡ï¼Œå› æ­¤å¯¹äºè¾“å…¥$x$åˆ†ç±»ç»“æœä¸ºç±»åˆ«1å’Œç±»åˆ«0çš„æ¦‚ç‡åˆ†åˆ«ä¸ºï¼š</p><p>$$<br>P(y=1|x,\theta) = h_\theta(x) \<br>P(y=0|x,\theta) = 1 - h_\theta(x)<br>$$</p><p>å¯¹ä¸Šé¢çš„è¡¨è¾¾å¼åˆå¹¶ä¸€ä¸‹å°±æ˜¯ï¼š</p><p>$$<br>p(y|x,\theta) = (h_\theta(x))^y (1 - h_\theta(x))^{1-y}<br>$$</p><h3 id="2-3-æ¢¯åº¦ä¸Šå‡"><a href="#2-3-æ¢¯åº¦ä¸Šå‡" class="headerlink" title="2.3 æ¢¯åº¦ä¸Šå‡"></a>2.3 æ¢¯åº¦ä¸Šå‡</h3><p>å¾—åˆ°äº†é€»è¾‘å›å½’çš„è¡¨è¾¾å¼ï¼Œä¸‹ä¸€æ­¥è·Ÿçº¿æ€§å›å½’ç±»ä¼¼ï¼Œæ„å»ºä¼¼ç„¶å‡½æ•°ï¼Œç„¶åæœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼Œæœ€ç»ˆæ¨å¯¼å‡º$\theta$çš„è¿­ä»£æ›´æ–°è¡¨è¾¾å¼ã€‚åªä¸è¿‡è¿™é‡Œç”¨çš„ä¸æ˜¯æ¢¯åº¦ä¸‹é™ï¼Œè€Œæ˜¯æ¢¯åº¦ä¸Šå‡ï¼Œå› ä¸ºè¿™é‡Œæ˜¯æœ€å¤§åŒ–ä¼¼ç„¶å‡½æ•°ã€‚</p><p>å‡è®¾è®­ç»ƒæ ·æœ¬ç›¸äº’ç‹¬ç«‹ï¼Œé‚£ä¹ˆä¼¼ç„¶å‡½æ•°è¡¨è¾¾å¼ä¸ºï¼š</p><p><img src="/images/machine-learning/2-4.png"></p><p>åŒæ ·å¯¹ä¼¼ç„¶å‡½æ•°å–logï¼Œè½¬æ¢ä¸ºï¼š</p><p><img src="/images/machine-learning/2-5.png"></p><p>è½¬æ¢åçš„ä¼¼ç„¶å‡½æ•°å¯¹$\theta$æ±‚åå¯¼ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä»¥åªæœ‰ä¸€ä¸ªè®­ç»ƒæ ·æœ¬çš„æƒ…å†µä¸ºä¾‹ï¼š</p><p><img src="/images/machine-learning/2-6.png"></p><p>è¿™ä¸ªæ±‚åå¯¼è¿‡ç¨‹ä¸­ï¼š</p><ul><li>ç¬¬ä¸€æ­¥æ˜¯å¯¹$\theta$åå¯¼çš„è½¬åŒ–ï¼Œä¾æ®åå¯¼å…¬å¼ï¼š$y=lnx$, $yâ€™=1/x$ã€‚</li><li>ç¬¬äºŒæ­¥æ˜¯æ ¹æ®$g(z)$æ±‚å¯¼çš„ç‰¹æ€§$gâ€™(z) = g(z)(1 - g(z))$ ã€‚</li><li>ç¬¬ä¸‰æ­¥å°±æ˜¯æ™®é€šçš„å˜æ¢ã€‚</li></ul><p>è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†æ¢¯åº¦ä¸Šå‡æ¯æ¬¡è¿­ä»£çš„æ›´æ–°æ–¹å‘ï¼Œé‚£ä¹ˆ$\theta$çš„è¿­ä»£è¡¨è¾¾å¼ä¸ºï¼š<br>$$<br>\theta = \theta + \eta (y^i - h_\theta(x^i)) x_j^i<br>$$</p><p>å…¶ä¸­$\eta$æ˜¯å­¦ä¹ é€Ÿç‡ã€‚</p><h2 id="3-æ‰‹å†™é€»è¾‘å›å½’"><a href="#3-æ‰‹å†™é€»è¾‘å›å½’" class="headerlink" title="3. æ‰‹å†™é€»è¾‘å›å½’"></a>3. æ‰‹å†™é€»è¾‘å›å½’</h2><p>è¿™é‡Œä»¥æ‰‹å†™æ•°å­—è¯†åˆ«ä¸ºä¾‹ã€‚æˆ‘ä»¬æ‰‹å†™ä¸€ä¸ªé€»è¾‘å›å½’ç±»å¤„ç†è¿™ä¸ªå¤šåˆ†ç±»é—®é¢˜ï¼ŒåŒæ—¶ä½¿ç”¨sklearnçš„é€»è¾‘å›å½’æ¨¡å‹ä½œå¯¹æ¯”ã€‚</p><p><img src="/images/machine-learning/2-7.png"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> random<span class="token keyword">import</span> time<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">from</span> math <span class="token keyword">import</span> inf<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>datasets <span class="token keyword">import</span> load_digits<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>linear_model <span class="token keyword">import</span> LogisticRegression<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>metrics <span class="token keyword">import</span> confusion_matrix<span class="token keyword">def</span> <span class="token function">sigmoid</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    sigmoidå‡½æ•°    """</span>    <span class="token keyword">return</span> <span class="token number">1.0</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> np<span class="token punctuation">.</span>exp<span class="token punctuation">(</span><span class="token operator">-</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">acc_score</span><span class="token punctuation">(</span>predict_data<span class="token punctuation">,</span> raw_data<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    è®¡ç®—ç»“æœçš„å‡†ç¡®ç‡    :param predict_data: é¢„æµ‹å€¼    :param raw_data: çœŸå€¼    """</span>    cnt <span class="token operator">=</span> <span class="token number">0</span>    size <span class="token operator">=</span> np<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>predict_data<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token builtin">int</span><span class="token punctuation">(</span>raw_data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">int</span><span class="token punctuation">(</span>predict_data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            cnt <span class="token operator">+=</span> <span class="token number">1</span>    score <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span>cnt <span class="token operator">/</span> size<span class="token punctuation">)</span>    <span class="token keyword">return</span> scorefig_num <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">def</span> <span class="token function">display</span><span class="token punctuation">(</span>images<span class="token punctuation">,</span> ground_truth<span class="token punctuation">,</span> predict<span class="token punctuation">,</span> fig_name<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    ç”»å‡ºé¢„æµ‹ç»“æœ    :param images: æ•°å­—çš„å›¾ç‰‡    :param ground_truth: çœŸå€¼    :param predict: é¢„æµ‹å€¼    :param fig_name: å›¾ç‰‡åå­—    """</span>    <span class="token comment"># plot the digits</span>    <span class="token keyword">global</span> fig_num    fig_num <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token keyword">if</span> fig_name <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>fig_num<span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># figure size in inches</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>fig_name<span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># figure size in inches</span>    fig<span class="token punctuation">.</span>subplots_adjust<span class="token punctuation">(</span>left<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> right<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> bottom<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> top<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> hspace<span class="token operator">=</span><span class="token number">0.05</span><span class="token punctuation">,</span> wspace<span class="token operator">=</span><span class="token number">0.05</span><span class="token punctuation">)</span>    size <span class="token operator">=</span> np<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>predict<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">if</span> size <span class="token operator">&gt;</span> <span class="token number">56</span><span class="token punctuation">:</span>        size <span class="token operator">=</span> <span class="token number">56</span>    <span class="token comment"># plot the digits: each image is 8x8 pixels</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">:</span>        ax <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> xticks<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> yticks<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        ax<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>images<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span>plt<span class="token punctuation">.</span>cm<span class="token punctuation">.</span>binary<span class="token punctuation">)</span>        <span class="token comment"># label the image with the target value</span>        ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>ground_truth<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token builtin">int</span><span class="token punctuation">(</span>ground_truth<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">int</span><span class="token punctuation">(</span>predict<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>predict<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'green'</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>predict<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'red'</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>    <span class="token comment"># plot confusion matrix</span>    cm <span class="token operator">=</span> confusion_matrix<span class="token punctuation">(</span>ground_truth<span class="token punctuation">,</span> predict<span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>matshow<span class="token punctuation">(</span>cm<span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>colorbar<span class="token punctuation">(</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span>fig_name <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> <span class="token string">'Confusion Matrix'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Groundtruth'</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Predict'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">load_data</span><span class="token punctuation">(</span>train_size<span class="token operator">=</span><span class="token number">0.75</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    åŠ è½½æ•°æ®åŒæ—¶åˆ†å‰²å‡ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†    :param train_size: è®­ç»ƒé›†çš„æ¯”ä¾‹    :return åˆ†å‰²å¥½çš„æ•°æ®é›†    """</span>    <span class="token comment"># åŠ è½½æ•°æ®</span>    <span class="token comment"># è¿™ä¸ªå‡½æ•°è¿”å›çš„åº”è¯¥æ˜¯ä¸€ä¸ªç±»å®ä¾‹ï¼Œé‡Œé¢æœ‰å¾ˆå¤šçš„å˜é‡ï¼Œéœ€è¦â€œå•ç‹¬çš„æ‹¿å‡ºæ¥ç”¨â€</span>    digits <span class="token operator">=</span> load_digits<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># è¾“å‡ºæŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªç±»çš„å±æ€§å’Œæ–¹æ³•</span>    <span class="token comment"># print(dir(digits))</span>    <span class="token comment"># è·å¾—æ•°æ®çš„å¤§å°</span>    data_size <span class="token operator">=</span> np<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>digits<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token comment"># å°†æ•°æ®æ‰“ä¹±ï¼Œè¿™é‡Œéœ€è¦æŠŠè¿™ä¸ªç±»çš„è¦ç”¨ä¸Šçš„å˜é‡éƒ½å¯¹åº”ä¸Šï¼Œæœ‰ç‚¹éº»çƒ¦ï¼ˆæ˜¯å¦æœ‰æ›´ç®€ä¾¿çš„æ–¹æ³•ï¼Ÿï¼‰</span>    shuffled_index <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>permutation<span class="token punctuation">(</span>data_size<span class="token punctuation">)</span>    digits<span class="token punctuation">.</span>data <span class="token operator">=</span> digits<span class="token punctuation">.</span>data<span class="token punctuation">[</span>shuffled_index<span class="token punctuation">]</span>    digits<span class="token punctuation">.</span>images <span class="token operator">=</span> digits<span class="token punctuation">.</span>images<span class="token punctuation">[</span>shuffled_index<span class="token punctuation">]</span>    digits<span class="token punctuation">.</span>target <span class="token operator">=</span> digits<span class="token punctuation">.</span>target<span class="token punctuation">[</span>shuffled_index<span class="token punctuation">]</span>    <span class="token comment"># åˆ†å‰²æ•°æ®é›†</span>    split_index <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>data_size <span class="token operator">*</span> train_size<span class="token punctuation">)</span>    train_data <span class="token operator">=</span> digits<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span>split_index<span class="token punctuation">]</span>    train_target <span class="token operator">=</span> digits<span class="token punctuation">.</span>target<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span>split_index<span class="token punctuation">]</span>    train_images <span class="token operator">=</span> digits<span class="token punctuation">.</span>images<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span>split_index<span class="token punctuation">]</span>    test_data <span class="token operator">=</span> digits<span class="token punctuation">.</span>data<span class="token punctuation">[</span>split_index<span class="token punctuation">:</span><span class="token punctuation">]</span>    test_target <span class="token operator">=</span> digits<span class="token punctuation">.</span>target<span class="token punctuation">[</span>split_index<span class="token punctuation">:</span><span class="token punctuation">]</span>    test_images <span class="token operator">=</span> digits<span class="token punctuation">.</span>images<span class="token punctuation">[</span>split_index<span class="token punctuation">:</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> train_data<span class="token punctuation">,</span> train_target<span class="token punctuation">,</span> train_images<span class="token punctuation">,</span> test_data<span class="token punctuation">,</span> test_target<span class="token punctuation">,</span> test_images<span class="token keyword">class</span> <span class="token class-name">Logistic_Regression</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    é€»è¾‘å›å½’æ¨¡å‹ï¼Œé€šè¿‡OVR(One-Vs-All)è§£å†³å¤šåˆ†ç±»é—®é¢˜    """</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data<span class="token punctuation">,</span> label<span class="token punctuation">,</span> max_iter<span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">,</span> tol<span class="token operator">=</span><span class="token number">0.000005</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        åˆå§‹åŒ–é€»è¾‘å›å½’ç±»        :param data: åŠ è½½è®­ç»ƒé›†        :param label: åŠ è½½è®­ç»ƒé›†çš„æ ‡ç­¾        :param max_iter: æœ€å¤§è¿­ä»£æ¬¡æ•°        :param alpha: å­¦ä¹ ç‡ï¼ˆæ­¥é•¿ï¼‰        :param tol: åœæ­¢æ±‚è§£çš„æ ‡å‡†ï¼Œå½“æ”¶æ•›é€Ÿåº¦è¿‡æ…¢æ—¶åœæ­¢æ±‚è§£        """</span>        <span class="token comment"># ä¿å­˜ä¼ å…¥æ•°æ®</span>        self<span class="token punctuation">.</span>data <span class="token operator">=</span> data        self<span class="token punctuation">.</span>label <span class="token operator">=</span> label        self<span class="token punctuation">.</span>max_iter <span class="token operator">=</span> max_iter        self<span class="token punctuation">.</span>alpha <span class="token operator">=</span> alpha        self<span class="token punctuation">.</span>tol <span class="token operator">=</span> tol        <span class="token comment"># è¿›ä¸€æ­¥å¤„ç†</span>        <span class="token comment"># æ•°æ®é•¿åº¦mä¸å•ä¸ªæ•°æ®çš„é•¿åº¦n</span>        self<span class="token punctuation">.</span>m<span class="token punctuation">,</span> self<span class="token punctuation">.</span>n <span class="token operator">=</span> np<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>data<span class="token punctuation">)</span>        <span class="token comment"># æ•°æ®æƒé‡</span>        self<span class="token punctuation">.</span>weights <span class="token operator">=</span> np<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment"># å¸¸æ•°é¡¹</span>        self<span class="token punctuation">.</span>b <span class="token operator">=</span> np<span class="token punctuation">.</span>ones<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">train</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">"SGD"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        è¿›è¡Œè®­ç»ƒï¼Œè¿™é‡Œé‡‡ç”¨çš„æ˜¯OVRæ–¹æ³•è§£å†³å¤šåˆ†ç±»é—®é¢˜        :param method: ä½¿ç”¨çš„æ±‚è§£æ–¹æ³•        """</span>        <span class="token comment"># å¯¹äºæ¯ä¸€ä¸ªæ•°å­—</span>        <span class="token keyword">for</span> number <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># é‡æ–°æ‰“æ ‡ç­¾</span>            label <span class="token operator">=</span> np<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>self<span class="token punctuation">.</span>label<span class="token punctuation">)</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>m<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> label<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> number<span class="token punctuation">:</span>                    label<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>                <span class="token keyword">else</span><span class="token punctuation">:</span>                    label<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>            <span class="token keyword">if</span> method <span class="token operator">==</span> <span class="token string">"SGD"</span><span class="token punctuation">:</span>                <span class="token comment"># é‡‡ç”¨éšæœºæ¢¯åº¦ä¸Šå‡æ³•è¿›è¡Œè¿­ä»£æ±‚è§£</span>                self<span class="token punctuation">.</span>SGD<span class="token punctuation">(</span>number<span class="token punctuation">,</span> label<span class="token punctuation">)</span>            <span class="token keyword">elif</span> method <span class="token operator">==</span> <span class="token string">"MBGD"</span><span class="token punctuation">:</span>                <span class="token comment"># é‡‡ç”¨å°æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•</span>                self<span class="token punctuation">.</span>MBGD<span class="token punctuation">(</span>number<span class="token punctuation">,</span> label<span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"error method:"</span><span class="token punctuation">,</span> method<span class="token punctuation">)</span>                exit<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">predict</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> predict_data<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        è¿›è¡Œé¢„æµ‹        :param predict_data: æµ‹è¯•é›†        """</span>        <span class="token comment"># ä¿å­˜å¯¹æµ‹è¯•é›†çš„é¢„æµ‹ç»“æœ</span>        result <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span>np<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>predict_data<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token comment"># ä¿å­˜å¯¹å•ä¸ªæ•°æ®ï¼Œæ¯ä¸ªåˆ†ç±»å™¨ç»™å‡ºçš„ç»“æœ</span>        ans <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>        <span class="token comment"># å¼€å§‹å¯¹æ•´ä¸ªæµ‹è¯•é›†è¿›è¡Œé¢„æµ‹</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># åˆ†åˆ«ç”¨æ¯ä¸ªæ•°å­—çš„åˆ†ç±»å™¨è¿›è¡Œé¢„æµ‹</span>            <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                ans<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> sigmoid<span class="token punctuation">(</span><span class="token builtin">sum</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>weights<span class="token punctuation">[</span>k<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">*</span> predict_data<span class="token punctuation">[</span>i<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>b<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            ans <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span>            result<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> ans<span class="token punctuation">.</span>index<span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> result    <span class="token keyword">def</span> <span class="token function">SGD</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> number<span class="token punctuation">,</span> label<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        ä½¿ç”¨è€å¸ˆä¸Šè¯¾è®²çš„éšæœºæ¢¯åº¦ä¸Šå‡æ³•æ±‚è§£        :param number: ç›®å‰éœ€è¦è¢«åˆ†ç±»çš„æ•°å­—        :param label: æ ¹æ®è¿™ä¸ªæ•°ç»„åˆ¶ä½œçš„æ ‡ç­¾        """</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>max_iter<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># ä¸Šæ¬¡çš„è¯¯å·®</span>            last_error <span class="token operator">=</span> inf            num_index <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>m<span class="token punctuation">)</span><span class="token punctuation">:</span>                <span class="token comment"># FIXME</span>                <span class="token comment">#  ä¹‹å‰å…¶å®æ˜¯éšæœºæ‰“ä¹±äº†çš„ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ä¸æ˜¯æ²¡æœ‰å¿…è¦è¿›è¡Œè¿™æ ·çš„æ“ä½œï¼Ÿ</span>                <span class="token comment">#  è¿™é‡Œå®é™…ä¸Šè¿˜æ˜¯ç”¨ä¸Šäº†æ‰€æœ‰çš„æ ·æœ¬ï¼Œæ‰€ä»¥å®é™…ä¸Šè¿™é‡Œéšæœºå–å€¼å¯¹ç»“æœå¹¶æ²¡æœ‰å½±å“</span>                rand_index <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>num_index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                error <span class="token operator">=</span> label<span class="token punctuation">[</span>rand_index<span class="token punctuation">]</span> <span class="token operator">-</span> sigmoid<span class="token punctuation">(</span>                    <span class="token builtin">sum</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>weights<span class="token punctuation">[</span>number<span class="token punctuation">]</span> <span class="token operator">*</span> train_data<span class="token punctuation">[</span>rand_index<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>b<span class="token punctuation">[</span>number<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token comment"># å®é™…ä¸Šä¸‹é¢è¿™æ ·åšçš„æ•ˆæœä¸å¥½ï¼Œerrorå¯èƒ½ä¸ºæ­£ä¹Ÿå¯èƒ½ä¸ºè´Ÿã€‚ã€‚ã€‚</span>                <span class="token comment"># if abs(error) &gt; abs(last_error):</span>                <span class="token comment"># if error &gt; last_error:</span>                <span class="token comment">#     continue</span>                <span class="token comment"># ä¸‹é¢å³è¾¹åº”è¯¥æ˜¯ å­¦ä¹ ç‡*(1-g(z))*zï¼Œæ˜¯æ±‚åå¯¼çš„è¿‡ç¨‹</span>                self<span class="token punctuation">.</span>weights<span class="token punctuation">[</span>number<span class="token punctuation">]</span> <span class="token operator">+=</span> self<span class="token punctuation">.</span>alpha <span class="token operator">*</span> error <span class="token operator">*</span> train_data<span class="token punctuation">[</span>rand_index<span class="token punctuation">]</span>                self<span class="token punctuation">.</span>b<span class="token punctuation">[</span>number<span class="token punctuation">]</span> <span class="token operator">+=</span> self<span class="token punctuation">.</span>alpha <span class="token operator">*</span> error                <span class="token keyword">del</span> <span class="token punctuation">(</span>num_index<span class="token punctuation">[</span>rand_index<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>last_error <span class="token operator">-</span> error<span class="token punctuation">)</span> <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>tol<span class="token punctuation">:</span>                    <span class="token keyword">break</span>                last_error <span class="token operator">=</span> error    <span class="token keyword">def</span> <span class="token function">MBGD</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> number<span class="token punctuation">,</span> label<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        å°è¯•ä½¿ç”¨å°æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•æ±‚è§£        :param number: ç›®å‰éœ€è¦è¢«åˆ†ç±»çš„æ•°å­—        :param label: æ ¹æ®è¿™ä¸ªæ•°ç»„åˆ¶ä½œçš„æ ‡ç­¾        """</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>max_iter<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># ä¸Šæ¬¡çš„è¯¯å·®</span>            last_error <span class="token operator">=</span> inf            <span class="token comment"># å°æ‰¹é‡çš„æ•°ç›®</span>            <span class="token keyword">if</span> self<span class="token punctuation">.</span>m <span class="token operator">&lt;</span> <span class="token number">200</span><span class="token punctuation">:</span>                m <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>m<span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                m <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>            num_index <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">:</span>                rand_index <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>num_index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                error <span class="token operator">=</span> label<span class="token punctuation">[</span>rand_index<span class="token punctuation">]</span> <span class="token operator">-</span> sigmoid<span class="token punctuation">(</span>                    <span class="token builtin">sum</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>weights<span class="token punctuation">[</span>number<span class="token punctuation">]</span> <span class="token operator">*</span> train_data<span class="token punctuation">[</span>rand_index<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>b<span class="token punctuation">[</span>number<span class="token punctuation">]</span><span class="token punctuation">)</span>                self<span class="token punctuation">.</span>weights<span class="token punctuation">[</span>number<span class="token punctuation">]</span> <span class="token operator">+=</span> self<span class="token punctuation">.</span>alpha <span class="token operator">*</span> error <span class="token operator">*</span> train_data<span class="token punctuation">[</span>rand_index<span class="token punctuation">]</span>                self<span class="token punctuation">.</span>b<span class="token punctuation">[</span>number<span class="token punctuation">]</span> <span class="token operator">+=</span> self<span class="token punctuation">.</span>alpha <span class="token operator">*</span> error                <span class="token keyword">del</span> <span class="token punctuation">(</span>num_index<span class="token punctuation">[</span>rand_index<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>last_error <span class="token operator">-</span> error<span class="token punctuation">)</span> <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>tol<span class="token punctuation">:</span>                    <span class="token keyword">break</span>                last_error <span class="token operator">=</span> error<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    <span class="token comment"># åŠ è½½å¹¶ä¸”åˆ†å‰²å„ç§æ•°æ®</span>    train_data<span class="token punctuation">,</span> train_target<span class="token punctuation">,</span> train_images<span class="token punctuation">,</span> test_data<span class="token punctuation">,</span> test_target<span class="token punctuation">,</span> test_images <span class="token operator">=</span> load_data<span class="token punctuation">(</span>train_size<span class="token operator">=</span><span class="token number">0.75</span><span class="token punctuation">)</span>    <span class="token comment"># =====================ä½¿ç”¨è‡ªå·±çš„æ–¹æ³•åšé¢„æµ‹========================</span>    <span class="token comment"># ç”Ÿæˆä¸€ä¸ªé€»è¾‘å›å½’ç±»å®ä¾‹ï¼Œå¹¶ä¸”æŠŠè®­ç»ƒé›†å¯¼å…¥</span>    lr <span class="token operator">=</span> Logistic_Regression<span class="token punctuation">(</span>train_data<span class="token punctuation">,</span> train_target<span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">0.0000005</span><span class="token punctuation">)</span>    <span class="token comment"># å¼€å§‹è®­ç»ƒå¹¶ä¸”è®¡æ—¶</span>    start <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    lr<span class="token punctuation">.</span>train<span class="token punctuation">(</span>method<span class="token operator">=</span><span class="token string">"SGD"</span><span class="token punctuation">)</span>    end <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"è®­ç»ƒç”¨æ—¶:\t%f s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># å¯¹è®­ç»ƒé›†åšé¢„æµ‹å¹¶ä¸”è¾“å‡ºå‡†ç¡®åº¦ä¸ç»“æœ</span>    train_result <span class="token operator">=</span> lr<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>train_data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å¯¹è®­ç»ƒé›†åšé¢„æµ‹:\t"</span><span class="token punctuation">,</span> acc_score<span class="token punctuation">(</span>train_result<span class="token punctuation">,</span> train_target<span class="token punctuation">)</span><span class="token punctuation">)</span>    display<span class="token punctuation">(</span>train_images<span class="token punctuation">,</span> train_target<span class="token punctuation">,</span> train_result<span class="token punctuation">,</span> <span class="token string">"My Train"</span><span class="token punctuation">)</span>    <span class="token comment"># å¯¹æµ‹è¯•é›†åšé¢„æµ‹å¹¶ä¸”è¾“å‡ºå‡†ç¡®åº¦ä¸ç»“æœ</span>    test_result <span class="token operator">=</span> lr<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>test_data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å¯¹æµ‹è¯•é›†åšé¢„æµ‹:\t"</span><span class="token punctuation">,</span> acc_score<span class="token punctuation">(</span>test_result<span class="token punctuation">,</span> test_target<span class="token punctuation">)</span><span class="token punctuation">)</span>    display<span class="token punctuation">(</span>test_images<span class="token punctuation">,</span> test_target<span class="token punctuation">,</span> test_result<span class="token punctuation">,</span> <span class="token string">"My Test"</span><span class="token punctuation">)</span>    <span class="token comment"># =====================ä½¿ç”¨sklearnåšé¢„æµ‹========================</span>    skl <span class="token operator">=</span> LogisticRegression<span class="token punctuation">(</span><span class="token punctuation">)</span>    start <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    skl<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>train_data<span class="token punctuation">,</span> train_target<span class="token punctuation">)</span>    end <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"è®­ç»ƒç”¨æ—¶:\t%f s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span>    pred_train <span class="token operator">=</span> skl<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>train_data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å¯¹è®­ç»ƒé›†åšé¢„æµ‹:\t"</span><span class="token punctuation">,</span> acc_score<span class="token punctuation">(</span>pred_train<span class="token punctuation">,</span> train_target<span class="token punctuation">)</span><span class="token punctuation">)</span>    display<span class="token punctuation">(</span>train_images<span class="token punctuation">,</span> train_target<span class="token punctuation">,</span> pred_train<span class="token punctuation">,</span> <span class="token string">"Sklearn Train"</span><span class="token punctuation">)</span>    pred_test <span class="token operator">=</span> skl<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>test_data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å¯¹æµ‹è¯•é›†åšé¢„æµ‹:\t"</span><span class="token punctuation">,</span> acc_score<span class="token punctuation">(</span>pred_test<span class="token punctuation">,</span> test_target<span class="token punctuation">)</span><span class="token punctuation">)</span>    display<span class="token punctuation">(</span>test_images<span class="token punctuation">,</span> test_target<span class="token punctuation">,</span> pred_test<span class="token punctuation">,</span> <span class="token string">"Sklearn Test"</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰‹å†™é€»è¾‘å›å½’é¢„æµ‹ç»“æœå±•ç¤ºï¼š</p><p><img src="/images/machine-learning/2-8.png"></p>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é€»è¾‘å›å½’ </tag>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ï¼šK-Meansèšç±»ç®—æ³•</title>
      <link href="2022/01/07/machine-learning-1/"/>
      <url>2022/01/07/machine-learning-1/</url>
      
        <content type="html"><![CDATA[<h1 id="æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ï¼šK-Meansèšç±»ç®—æ³•"><a href="#æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ï¼šK-Meansèšç±»ç®—æ³•" class="headerlink" title="æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ï¼šK-Meansèšç±»ç®—æ³•"></a>æœºå™¨å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ï¼šK-Meansèšç±»ç®—æ³•</h1><blockquote><p>2021å¹´ä¸‹åŠå¹´é€‰ä¿®äº†ä¸¤é—¨æœºå™¨å­¦ä¹ ç›¸å…³çš„è¯¾ç¨‹ï¼Œæ„Ÿè§‰å­¦åˆ°äº†éå¸¸å¤šçš„çŸ¥è¯†ï¼Œæ‰“ç®—å¥½å¥½æ•´ç†ä¸€ä¸‹ã€‚</p><p>å¤§éƒ¨åˆ†å†…å®¹æ˜¯ä»è¯¾ä»¶é‡Œé¢æ¬è¿æ¥çš„ï¼Œä½†å¤§éƒ¨åˆ†ä»£ç æ˜¯è‡ªå·±ç†è§£çš„åŸºç¡€ä¸Šå†™å‡ºæ¥çš„ã€‚</p></blockquote><p>æ ¹æ®è®­ç»ƒæ ·æœ¬ä¸­æ˜¯å¦åŒ…å«æ ‡ç­¾ä¿¡æ¯ï¼Œæœºå™¨å­¦ä¹ å¯ä»¥åˆ†ä¸º <strong>ç›‘ç£å­¦ä¹ </strong> å’Œ <strong>æ— ç›‘ç£å­¦ä¹ </strong>ã€‚</p><p>èšç±»ç®—æ³•æ˜¯å…¸å‹çš„æ— ç›‘ç£å­¦ä¹ ï¼Œå…¶è®­ç»ƒçš„æ ·æœ¬ä¸­å€¼åŒ…å«æ ·æœ¬çš„ç‰¹å¾ï¼Œ<strong>ä¸åŒ…å«æ ·æœ¬çš„æ ‡ç­¾ä¿¡æ¯</strong>ã€‚åœ¨èšç±»ç®—æ³•ä¸­ï¼Œåˆ©ç”¨æ ·æœ¬çš„ç‰¹å¾ï¼Œå°†å…·æœ‰ç›¸ä¼¼ç‰¹å¾ç©ºé—´åˆ†å¸ƒçš„æ ·æœ¬åˆ’åˆ†åˆ°åŒä¸€ç±»åˆ«ä¸­ã€‚</p><h2 id="1-ç®—æ³•åŸç†"><a href="#1-ç®—æ³•åŸç†" class="headerlink" title="1. ç®—æ³•åŸç†"></a>1. ç®—æ³•åŸç†</h2><p>ç”±äºå…·æœ‰å‡ºè‰²çš„é€Ÿåº¦å’Œè‰¯å¥½çš„å¯æ‰©å±•æ€§ï¼ŒK-Meansèšç±»ç®—æ³•æ˜¯æœ€ç»å…¸çš„èšç±»æ–¹æ³•ã€‚</p><p><strong>k-Meansç®—æ³•æ˜¯ä¸€ä¸ªé‡å¤ç§»åŠ¨ç±»ä¸­å¿ƒç‚¹ï¼ˆé‡å¿ƒï¼Œcentroidsï¼‰çš„è¿‡ç¨‹</strong>:</p><ul><li>ç§»åŠ¨ä¸­å¿ƒç‚¹åˆ°å…¶åŒ…å«æˆå‘˜çš„å¹³å‡ä½ç½®;</li><li>ç„¶åé‡æ–°åˆ’åˆ†å…¶å†…éƒ¨æˆå‘˜ã€‚</li></ul><p><code>k</code>æ˜¯ç®—æ³•ä¸­çš„è¶…å‚æ•°ï¼Œè¡¨ç¤ºç±»çš„æ•°é‡ï¼›k-Meanså¯ä»¥è‡ªåŠ¨åˆ†é…æ ·æœ¬åˆ°ä¸åŒçš„ç±»ï¼Œä½†æ˜¯ä¸èƒ½å†³å®šç©¶ç«Ÿè¦åˆ†å‡ ä¸ªç±»ã€‚</p><p><code>k</code>å¿…é¡»æ˜¯ä¸€ä¸ªæ¯”è®­ç»ƒé›†æ ·æœ¬æ•°å°çš„æ­£æ•´æ•°ã€‚æœ‰æ—¶ï¼Œç±»çš„æ•°é‡æ˜¯ç”±é—®é¢˜å†…å®¹æŒ‡å®šçš„ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªé‹å‚æœ‰ä¸‰ç§æ–°æ¬¾å¼ï¼Œå®ƒæƒ³çŸ¥é“æ¯ç§æ–°æ¬¾å¼éƒ½æœ‰å“ªäº›æ½œåœ¨å®¢æˆ·ï¼Œäºæ˜¯å®ƒè°ƒç ”å®¢æˆ·ï¼Œç„¶åä»æ•°æ®é‡Œæ‰¾å‡ºä¸‰ç±»ã€‚ä¹Ÿæœ‰ä¸€äº›é—®é¢˜æ²¡æœ‰æŒ‡å®šèšç±»çš„æ•°é‡ï¼Œæœ€ä¼˜çš„èšç±»æ•°é‡æ˜¯ä¸ç¡®å®šçš„ã€‚</p><p>k-Meansçš„å‚æ•°æ˜¯ç±»çš„é‡å¿ƒä½ç½®å’Œå…¶å†…éƒ¨è§‚æµ‹å€¼çš„ä½ç½®ã€‚ä¸å¹¿ä¹‰çº¿æ€§æ¨¡å‹å’Œå†³ç­–æ ‘ç±»ä¼¼ï¼Œk-Meanså‚æ•°çš„æœ€ä¼˜è§£ä¹Ÿæ˜¯ä»¥ä»£ä»·å‡½æ•°æœ€å°åŒ–ä¸ºç›®æ ‡ã€‚k-Meansä»£ä»·å‡½æ•°å…¬å¼å¦‚ä¸‹ï¼š<br>$$<br>J = \sum_{k=1}^{K} \sum_{i \in C_k} | x_i - u_k|^2<br>$$</p><p>$u_k$æ˜¯ç¬¬$k$ä¸ªç±»çš„é‡å¿ƒä½ç½®ï¼Œå®šä¹‰ä¸ºï¼š<br>$$<br>u_k = \frac{1}{|C_k|} \sum_{i \in C_k} x_i<br>$$</p><p>æˆæœ¬å‡½æ•°æ˜¯å„ä¸ªç±»ç•¸å˜ç¨‹åº¦ï¼ˆdistortionsï¼‰ä¹‹å’Œã€‚æ¯ä¸ªç±»çš„ç•¸å˜ç¨‹åº¦ç­‰äºè¯¥ç±»é‡å¿ƒä¸å…¶å†…éƒ¨æˆå‘˜ä½ç½®è·ç¦»çš„å¹³æ–¹å’Œã€‚è‹¥ç±»å†…éƒ¨çš„æˆå‘˜å½¼æ­¤é—´è¶Šç´§å‡‘åˆ™ç±»çš„ç•¸å˜ç¨‹åº¦è¶Šå°ï¼Œåä¹‹ï¼Œè‹¥ç±»å†…éƒ¨çš„æˆå‘˜å½¼æ­¤é—´è¶Šåˆ†æ•£åˆ™ç±»çš„ç•¸å˜ç¨‹åº¦è¶Šå¤§ã€‚</p><h2 id="2-ç®—æ³•æµç¨‹"><a href="#2-ç®—æ³•æµç¨‹" class="headerlink" title="2. ç®—æ³•æµç¨‹"></a>2. ç®—æ³•æµç¨‹</h2><p>æ±‚è§£æˆæœ¬å‡½æ•°æœ€å°åŒ–çš„å‚æ•°å°±æ˜¯ä¸€ä¸ªé‡å¤é…ç½®æ¯ä¸ªç±»åŒ…å«çš„è§‚æµ‹å€¼ï¼Œå¹¶ä¸æ–­ç§»åŠ¨ç±»é‡å¿ƒçš„è¿‡ç¨‹ã€‚</p><p>è¾“å…¥ï¼š$T={ x_1, x_2, â€¦, x_N}$ï¼Œå…¶ä¸­$x_i \in R_n$ï¼Œi=1,2â€¦N</p><p>è¾“å‡ºï¼šèšç±»é›†åˆ$C_k$, èšç±»ä¸­å¿ƒ$u_k$, å…¶ä¸­k=1,2,â€¦K</p><ol><li>åˆå§‹åŒ–ç±»çš„é‡å¿ƒ$u_k$ï¼Œå¯ä»¥éšæœºé€‰æ‹©æ ·æœ¬ä½œä¸ºèšç±»ä¸­å¿ƒ</li><li>æ¯æ¬¡è¿­ä»£çš„æ—¶å€™ï¼ŒæŠŠæ‰€æœ‰æ ·æœ¬åˆ†é…åˆ°ç¦»å®ƒä»¬æœ€è¿‘çš„ç±»ï¼Œå³æ›´æ–°èšç±»é›†åˆ$C_k$</li><li>ç„¶åæŠŠé‡å¿ƒç§»åŠ¨åˆ°è¯¥ç±»å…¨éƒ¨æˆå‘˜ä½ç½®çš„å¹³å‡å€¼é‚£é‡Œï¼Œå³æ›´æ–°$u_k$</li><li>è‹¥è¾¾åˆ°æœ€å¤§è¿­ä»£æ­¥æ•°ï¼Œæˆ–ä¸¤æ¬¡è¿­ä»£å·®å°äºè®¾å®šçš„é˜ˆå€¼åˆ™ç®—æ³•ç»“æŸï¼Œå¦åˆ™é‡å¤æ­¥éª¤2</li></ol><h2 id="3-ç®—æ³•å®ç°"><a href="#3-ç®—æ³•å®ç°" class="headerlink" title="3. ç®—æ³•å®ç°"></a>3. ç®—æ³•å®ç°</h2><p>K-Meansçš„ç®€å•å®ç°å¦‚ä¸‹æ‰€ç¤ºï¼Œæ ¹æ®ä¸åŒæƒ…æ™¯çš„éœ€è¦è®¾è®¡ä¸åŒçš„è·ç¦»å‡½æ•°å³å¯ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">compute_distances</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># TODO æ ¹æ®å®é™…åº”ç”¨åœºæ™¯è¿›è¡Œå®šä¹‰</span>    <span class="token keyword">pass</span><span class="token keyword">def</span> <span class="token function">K_means</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> K<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    KMeansèšç±»ç®—æ³•çš„å…·ä½“å®ç°    :param data:    :param K: èšç±»çš„ä¸ªæ•°    :param N: ç®—æ³•çš„è¿­ä»£æ¬¡æ•°    :return: ç±»åˆ«æ ‡å¿—labelsä¸ä¸­å¿ƒåæ ‡centerPoints    """</span>    <span class="token comment"># è·å–æ•°æ®è¡Œæ•°</span>    n <span class="token operator">=</span> np<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token comment"># ä»næ¡æ•°æ®ä¸­éšæœºé€‰æ‹©Kæ¡ï¼Œä½œä¸ºåˆå§‹ä¸­å¿ƒå‘é‡</span>    <span class="token comment"># centerIdæ˜¯åˆå§‹ä¸­å¿ƒå‘é‡çš„ç´¢å¼•åæ ‡</span>    centerId <span class="token operator">=</span> random<span class="token punctuation">.</span>sample<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">,</span> K<span class="token punctuation">)</span>    <span class="token comment"># è·å¾—åˆå§‹ä¸­å¿ƒå‘é‡ï¼Œå…±kä¸ª</span>    centerPoints <span class="token operator">=</span> data<span class="token punctuation">[</span>centerId<span class="token punctuation">]</span>    <span class="token comment"># è®¡ç®—dataåˆ°centerPointsçš„è·ç¦»çŸ©é˜µ</span>    <span class="token comment"># dist[i][:],æ˜¯iä¸ªç‚¹åˆ°å„ä¸ªä¸­å¿ƒç‚¹çš„è·ç¦»</span>    dist <span class="token operator">=</span> compute_distances<span class="token punctuation">(</span>data<span class="token punctuation">,</span> centerPoints<span class="token punctuation">)</span>    <span class="token comment"># è¿™é‡Œè¿›è¡Œç¬¬ä¸€æ¬¡åˆ¤æ–­ï¼Œè·ç¦»å“ªä¸ªä¸­å¿ƒç‚¹è¿›å°±åˆ¤æ–­ä¸ºå“ªä¸€ç±»</span>    <span class="token comment"># axis=1å¯»æ‰¾æ¯ä¸€è¡Œä¸­æœ€å°å€¼çš„ç´¢å¼•</span>    labels <span class="token operator">=</span> np<span class="token punctuation">.</span>argmin<span class="token punctuation">(</span>dist<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># è¿­ä»£æ¬¡æ•°</span>    count <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment"># å¾ªç¯æ¬¡æ•°å°äºè¿­ä»£æ¬¡æ•°ï¼Œä¸€ç›´è¿­ä»£</span>    <span class="token keyword">while</span> count <span class="token operator">&lt;</span> N<span class="token punctuation">:</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>K<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># é‡æ–°è®¡ç®—æ¯ä¸€ä¸ªç±»åˆ«çš„ä¸­å¿ƒç‚¹</span>            centerPoints<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> np<span class="token punctuation">.</span>mean<span class="token punctuation">(</span>data<span class="token punctuation">[</span>np<span class="token punctuation">.</span>where<span class="token punctuation">(</span>labels <span class="token operator">==</span> i<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token comment"># é‡æ–°è®¡ç®—è·ç¦»çŸ©é˜µ</span>        dist <span class="token operator">=</span> compute_distances<span class="token punctuation">(</span>data<span class="token punctuation">,</span> centerPoints<span class="token punctuation">)</span>        <span class="token comment"># é‡æ–°åˆ†ç±»</span>        labels <span class="token operator">=</span> np<span class="token punctuation">.</span>argmin<span class="token punctuation">(</span>dist<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># è¿­ä»£æ¬¡æ•°åŠ 1</span>        count <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token comment"># è¿”å›ç±»åˆ«æ ‡è¯†ï¼Œä¸­å¿ƒåæ ‡</span>    <span class="token keyword">return</span> labels<span class="token punctuation">,</span> centerPoints<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-ç®—æ³•åº”ç”¨"><a href="#4-ç®—æ³•åº”ç”¨" class="headerlink" title="4. ç®—æ³•åº”ç”¨"></a>4. ç®—æ³•åº”ç”¨</h2><p>æ¯”å¦‚æˆ‘ä»¬è¦å¯¹ä¸‹é¢çš„æ•°æ®åº”ç”¨K-Meansç®—æ³•ï¼Œä»¥æ­¤æ¥åŒºåˆ†ä¸¤ä¸ªåœ†ç¯ï¼š</p><p><img src="/images/machine-learning/1-1.png"></p><p>æˆ‘ä»¬å¯ä»¥å…ˆè¿›è¡Œç‰¹å¾å˜æ¢ï¼Œå°†æ•°æ®ä»æ¯ä¸€ä¸ªç‚¹çš„åæ ‡(x, y)å˜æ¢ä¸ºç‚¹åˆ°åŸç‚¹çš„è·ç¦»discï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ›´æ–¹ä¾¿çš„åŒºåˆ†è¿™ä¸¤ä¸ªåœ†ç¯ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># è¿›è¡Œç‰¹å¾å˜åŒ–ï¼Œè¿™é‡Œå¾ˆå®¹æ˜“æƒ³åˆ°å°†ç‰¹å¾å˜åŒ–ä¸ºç‚¹åˆ°åŸç‚¹çš„è·ç¦»ï¼ˆè¿™é‡Œç”¨çš„å¹³æ–¹ï¼‰</span>trans_data <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span>train_data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> train_data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¹‹åæˆ‘ä»¬æ„é€ ä¸‹é¢è¿™æ ·çš„è·ç¦»å‡½æ•°ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">compute_distances</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    è®¡ç®—ä¸¤ç»„å‘é‡ä¹‹é—´çš„è·ç¦»ï¼Œä¸¤ä¸ªå‘é‡è¦æœ‰ä¸€æ ·çš„ç»´åº¦å’Œé•¿åº¦    """</span>    <span class="token comment"># ä¸sqrt(sum(power(vecA - vecB, 2)))ç›¸æ¯”ï¼Œè¿™ä¸ªå¯ä»¥ç›´æ¥è®¡ç®—ä¸€æ•´ç»„çš„è·ç¦»ï¼Œæ›´æ–¹ä¾¿</span>    <span class="token keyword">return</span> cdist<span class="token punctuation">(</span>A<span class="token punctuation">,</span> B<span class="token punctuation">,</span> metric<span class="token operator">=</span><span class="token string">"euclidean"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·å°±å¯ä»¥åº”ç”¨ä¸Šé¢å®ç°çš„K-Meansç®—æ³•äº†ã€‚</p><p>æ³¨ï¼š</p><p>è¯¥éƒ¨åˆ†çš„æ•°æ®è‡ªå·±éšæœºç”Ÿæˆå³å¯ï¼Œå¦‚æœä¸ä¼šç”Ÿæˆï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªç½‘å€ä¸Šçš„æ•°æ®ï¼š<a href="https://github.com/Immortalqx/ML_Homework/blob/master/homework_03_kmeans/dataset_circles.csv">https://github.com/Immortalqx/ML_Homework/blob/master/homework_03_kmeans/dataset_circles.csv</a></p><h3 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> random<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">from</span> scipy<span class="token punctuation">.</span>spatial<span class="token punctuation">.</span>distance <span class="token keyword">import</span> cdist<span class="token keyword">def</span> <span class="token function">compute_distances</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    è®¡ç®—ä¸¤ç»„å‘é‡ä¹‹é—´çš„è·ç¦»ï¼Œä¸¤ä¸ªå‘é‡è¦æœ‰ä¸€æ ·çš„ç»´åº¦å’Œé•¿åº¦    """</span>    <span class="token comment"># ä¸sqrt(sum(power(vecA - vecB, 2)))ç›¸æ¯”ï¼Œè¿™ä¸ªå¯ä»¥ç›´æ¥è®¡ç®—ä¸€æ•´ç»„çš„è·ç¦»ï¼Œæ›´æ–¹ä¾¿</span>    <span class="token keyword">return</span> cdist<span class="token punctuation">(</span>A<span class="token punctuation">,</span> B<span class="token punctuation">,</span> metric<span class="token operator">=</span><span class="token string">"euclidean"</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">K_means</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> K<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    KMeansèšç±»ç®—æ³•çš„å…·ä½“å®ç°    :param data:    :param K: èšç±»çš„ä¸ªæ•°    :param N: ç®—æ³•çš„è¿­ä»£æ¬¡æ•°    :return: ç±»åˆ«æ ‡å¿—labelsä¸ä¸­å¿ƒåæ ‡centerPoints    """</span>    <span class="token comment"># è·å–æ•°æ®è¡Œæ•°</span>    n <span class="token operator">=</span> np<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token comment"># ä»næ¡æ•°æ®ä¸­éšæœºé€‰æ‹©Kæ¡ï¼Œä½œä¸ºåˆå§‹ä¸­å¿ƒå‘é‡</span>    <span class="token comment"># centerIdæ˜¯åˆå§‹ä¸­å¿ƒå‘é‡çš„ç´¢å¼•åæ ‡</span>    centerId <span class="token operator">=</span> random<span class="token punctuation">.</span>sample<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">,</span> K<span class="token punctuation">)</span>    <span class="token comment"># è·å¾—åˆå§‹ä¸­å¿ƒå‘é‡ï¼Œå…±kä¸ª</span>    centerPoints <span class="token operator">=</span> data<span class="token punctuation">[</span>centerId<span class="token punctuation">]</span>    <span class="token comment"># è®¡ç®—dataåˆ°centerPointsçš„è·ç¦»çŸ©é˜µ</span>    <span class="token comment"># dist[i][:],æ˜¯iä¸ªç‚¹åˆ°å„ä¸ªä¸­å¿ƒç‚¹çš„è·ç¦»</span>    dist <span class="token operator">=</span> compute_distances<span class="token punctuation">(</span>data<span class="token punctuation">,</span> centerPoints<span class="token punctuation">)</span>    <span class="token comment"># è¿™é‡Œè¿›è¡Œç¬¬ä¸€æ¬¡åˆ¤æ–­ï¼Œè·ç¦»å“ªä¸ªä¸­å¿ƒç‚¹è¿›å°±åˆ¤æ–­ä¸ºå“ªä¸€ç±»</span>    <span class="token comment"># axis=1å¯»æ‰¾æ¯ä¸€è¡Œä¸­æœ€å°å€¼çš„ç´¢å¼•</span>    labels <span class="token operator">=</span> np<span class="token punctuation">.</span>argmin<span class="token punctuation">(</span>dist<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># è¿­ä»£æ¬¡æ•°</span>    count <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment"># å¾ªç¯æ¬¡æ•°å°äºè¿­ä»£æ¬¡æ•°ï¼Œä¸€ç›´è¿­ä»£</span>    <span class="token keyword">while</span> count <span class="token operator">&lt;</span> N<span class="token punctuation">:</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>K<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># é‡æ–°è®¡ç®—æ¯ä¸€ä¸ªç±»åˆ«çš„ä¸­å¿ƒç‚¹</span>            centerPoints<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> np<span class="token punctuation">.</span>mean<span class="token punctuation">(</span>data<span class="token punctuation">[</span>np<span class="token punctuation">.</span>where<span class="token punctuation">(</span>labels <span class="token operator">==</span> i<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token comment"># é‡æ–°è®¡ç®—è·ç¦»çŸ©é˜µ</span>        dist <span class="token operator">=</span> compute_distances<span class="token punctuation">(</span>data<span class="token punctuation">,</span> centerPoints<span class="token punctuation">)</span>        <span class="token comment"># é‡æ–°åˆ†ç±»</span>        labels <span class="token operator">=</span> np<span class="token punctuation">.</span>argmin<span class="token punctuation">(</span>dist<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># è¿­ä»£æ¬¡æ•°åŠ 1</span>        count <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token comment"># è¿”å›ç±»åˆ«æ ‡è¯†ï¼Œä¸­å¿ƒåæ ‡</span>    <span class="token keyword">return</span> labels<span class="token punctuation">,</span> centerPoints<span class="token keyword">def</span> <span class="token function">evaluate</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> labels<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    è¯„ä¼°èšç±»çš„ç»“æœ    """</span>    num<span class="token punctuation">,</span> div <span class="token operator">=</span> np<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>data<span class="token punctuation">)</span>    <span class="token comment"># åˆ¤æ–­æ•°æ®çš„ç»´åº¦æ˜¯ä¸æ˜¯1</span>    <span class="token keyword">if</span> div <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sorry,the dimension of your dataset is not 1!"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token number">1</span>    count <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> labels<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>            count <span class="token operator">+=</span> <span class="token number">1</span>        i <span class="token operator">+=</span> <span class="token number">1</span>    score <span class="token operator">=</span> count <span class="token operator">*</span> <span class="token number">1.0</span> <span class="token operator">/</span> num    <span class="token comment"># å› ä¸ºåˆ†ç±»æ˜¯éšæœºçš„ï¼Œä¸ä¸€å®šå¯¹åº”çš„ä¸Šï¼ˆæ¯”å¦‚0å’Œ1å¯¹åº”ï¼Œ1å’Œ0å¯¹åº”ï¼Œå¯¼è‡´æ­£ç¡®ç‡ä¸º0ï¼‰ï¼Œæ‰€ä»¥è¦è°ƒæ•´ä¸€ä¸‹</span>    <span class="token keyword">if</span> <span class="token number">1</span> <span class="token operator">-</span> score <span class="token operator">&gt;</span> score<span class="token punctuation">:</span>        score <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">-</span> score    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"score = %f"</span> <span class="token operator">%</span> <span class="token punctuation">(</span><span class="token number">100.0</span> <span class="token operator">*</span> score<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">getCenterPoint</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> K<span class="token punctuation">,</span> labels<span class="token punctuation">)</span><span class="token punctuation">:</span>    centerPoints <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token punctuation">:</span>K<span class="token punctuation">]</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>K<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># é‡æ–°è®¡ç®—æ¯ä¸€ä¸ªç±»åˆ«çš„ä¸­å¿ƒç‚¹</span>        centerPoints<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> np<span class="token punctuation">.</span>mean<span class="token punctuation">(</span>data<span class="token punctuation">[</span>np<span class="token punctuation">.</span>where<span class="token punctuation">(</span>labels <span class="token operator">==</span> i<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> centerPoints<span class="token keyword">def</span> <span class="token function">plotFeature</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> labels_<span class="token punctuation">,</span> centerPoints<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    äºŒç»´ç©ºé—´æ˜¾ç¤ºèšç±»ç»“æœ    """</span>    <span class="token comment"># è·å–ç°‡é›†çš„ä¸ªæ•°</span>    clusterNum <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">(</span>labels_<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># å†…å®šçš„é¢œè‰²ç§ç±»</span>    scatterColors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"orange"</span><span class="token punctuation">,</span> <span class="token string">"purple"</span><span class="token punctuation">,</span> <span class="token string">"cyan"</span><span class="token punctuation">,</span> <span class="token string">"red"</span><span class="token punctuation">,</span> <span class="token string">"green"</span><span class="token punctuation">]</span>    <span class="token comment"># åˆ¤æ–­æ•°æ®çš„ç»´åº¦æ˜¯ä¸æ˜¯ï¼’</span>    <span class="token keyword">if</span> np<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">2</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sorry,the dimension of your dataset is not 2!"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token number">1</span>    <span class="token comment"># åˆ¤æ–­ç°‡é›†ç±»åˆ«æ˜¯å¦å¤§äºï¼•ç±»</span>    <span class="token keyword">if</span> clusterNum <span class="token operator">&gt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>scatterColors<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sorry,your k is too large,please add length of the scatterColors!"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token number">1</span>    <span class="token comment"># æ•£ç‚¹å›¾çš„ç»˜åˆ¶</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>clusterNum<span class="token punctuation">)</span><span class="token punctuation">:</span>        colorSytle <span class="token operator">=</span> scatterColors<span class="token punctuation">[</span>i <span class="token operator">%</span> <span class="token builtin">len</span><span class="token punctuation">(</span>scatterColors<span class="token punctuation">)</span><span class="token punctuation">]</span>        subCluster <span class="token operator">=</span> data<span class="token punctuation">[</span>np<span class="token punctuation">.</span>where<span class="token punctuation">(</span>labels_ <span class="token operator">==</span> i<span class="token punctuation">)</span><span class="token punctuation">]</span>        plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>subCluster<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> subCluster<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token operator">=</span>colorSytle<span class="token punctuation">,</span> s<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>    <span class="token comment"># ä¸­å¿ƒç‚¹çš„ç»˜åˆ¶</span>    mark <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"*"</span><span class="token punctuation">,</span> <span class="token string">"^"</span><span class="token punctuation">,</span> <span class="token string">"o"</span><span class="token punctuation">,</span> <span class="token string">"X"</span><span class="token punctuation">,</span> <span class="token string">"D"</span><span class="token punctuation">]</span>  <span class="token comment"># è¿™ä¸ªæ˜¯è®¾ç½®ç»˜åˆ¶çš„å½¢çŠ¶</span>    label <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"0"</span><span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"2"</span><span class="token punctuation">,</span> <span class="token string">"3"</span><span class="token punctuation">,</span> <span class="token string">"4"</span><span class="token punctuation">]</span>  <span class="token comment"># labelçš„ä½œç”¨æ˜¯è®¾ç½®å›¾ä¾‹</span>    c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"blue"</span><span class="token punctuation">,</span> <span class="token string">"red"</span><span class="token punctuation">,</span> <span class="token string">"peru"</span><span class="token punctuation">,</span> <span class="token string">"violet"</span><span class="token punctuation">,</span> <span class="token string">"black"</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>clusterNum<span class="token punctuation">)</span><span class="token punctuation">:</span>        plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>centerPoints<span class="token punctuation">[</span>i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> centerPoints<span class="token punctuation">[</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                 mark<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> markersize<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">,</span> label<span class="token operator">=</span>label<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> c<span class="token operator">=</span>c<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>        plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token string">"upper left"</span><span class="token punctuation">)</span>  <span class="token comment"># å›¾ä¾‹</span>    <span class="token comment"># è®¾ç½®xã€yè½´å’Œæ ‡é¢˜</span>    plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"x-label"</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"y-label"</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"k-means cluster result"</span><span class="token punctuation">)</span>    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    <span class="token comment"># ç”¨æˆ·å®šä¹‰èšç±»æ•°</span>    K <span class="token operator">=</span> <span class="token number">2</span>    <span class="token comment"># ä»æ–‡æœ¬ä¸­åŠ è½½æ•°æ®</span>    data <span class="token operator">=</span> np<span class="token punctuation">.</span>loadtxt<span class="token punctuation">(</span><span class="token string">"../dataset_circles.csv"</span><span class="token punctuation">,</span> delimiter<span class="token operator">=</span><span class="token string">","</span><span class="token punctuation">)</span>    <span class="token comment"># åˆ†å‰²å‰ä¸¤åˆ—ä½œä¸ºè®­ç»ƒé›†</span>    train_data <span class="token operator">=</span> data<span class="token punctuation">.</span>T<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>    <span class="token comment"># è¿›è¡Œç‰¹å¾å˜åŒ–ï¼Œè¿™é‡Œå¾ˆå®¹æ˜“æƒ³åˆ°å°†ç‰¹å¾å˜åŒ–ä¸ºç‚¹åˆ°åŸç‚¹çš„è·ç¦»ï¼ˆè¿™é‡Œç”¨çš„å¹³æ–¹ï¼‰</span>    trans_data <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span>train_data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> train_data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment"># åˆ†å‰²ç¬¬ä¸‰åˆ—ä½œä¸ºæµ‹è¯•é›†</span>    test_data <span class="token operator">=</span> data<span class="token punctuation">.</span>T<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>    <span class="token comment"># å¼€å§‹è®¡æ—¶</span>    start <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># æ‰§è¡ŒKMeansç®—æ³•</span>    labels<span class="token punctuation">,</span> _ <span class="token operator">=</span> K_means<span class="token punctuation">(</span>trans_data<span class="token punctuation">.</span>T<span class="token punctuation">,</span> K<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>    <span class="token comment"># ç»“æŸè®¡æ—¶</span>    end <span class="token operator">=</span> time<span class="token punctuation">.</span>clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># ç”±äºè¿™é‡Œè¿›è¡Œç‰¹å¾å˜åŒ–äº†ï¼Œè¿”å›çš„ä¸­å¿ƒç‚¹æ˜¯ä¸€ç»´çš„ï¼Œå› æ­¤è¦æ ¹æ®èšç±»ç»“æœé‡æ–°è®¡ç®—ä¸­å¿ƒç‚¹</span>    centerPoints <span class="token operator">=</span> getCenterPoint<span class="token punctuation">(</span>train_data<span class="token punctuation">.</span>T<span class="token punctuation">,</span> K<span class="token punctuation">,</span> labels<span class="token punctuation">)</span>    <span class="token comment"># è¯„ä¼°èšç±»ç®—æ³•çš„ç»“æœ</span>    evaluate<span class="token punctuation">(</span>test_data<span class="token punctuation">.</span>T<span class="token punctuation">,</span> labels<span class="token punctuation">)</span>    <span class="token comment"># è¾“å‡ºèšç±»ç®—æ³•æ‰€ç”¨æ—¶é—´</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"time = %s"</span> <span class="token operator">%</span> <span class="token builtin">str</span><span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># ç»˜å›¾æ˜¾ç¤º</span>    plotFeature<span class="token punctuation">(</span>train_data<span class="token punctuation">.</span>T<span class="token punctuation">,</span> labels<span class="token punctuation">,</span> centerPoints<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœºå™¨å­¦ä¹  </tag>
            
            <tag> K-Means </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>APSIPA ASC 2021æ°å‡ºè®²å¸ˆæŠ¥å‘Šä¼šå‚ä¼šæ€»ç»“</title>
      <link href="2022/01/05/meeting-1/"/>
      <url>2022/01/05/meeting-1/</url>
      
        <content type="html"><![CDATA[<h1 id="APSIPA-ASC-2021æ°å‡ºè®²å¸ˆæŠ¥å‘Šä¼šå‚ä¼šæ€»ç»“"><a href="#APSIPA-ASC-2021æ°å‡ºè®²å¸ˆæŠ¥å‘Šä¼šå‚ä¼šæ€»ç»“" class="headerlink" title="APSIPA ASC 2021æ°å‡ºè®²å¸ˆæŠ¥å‘Šä¼šå‚ä¼šæ€»ç»“"></a>APSIPA ASC 2021æ°å‡ºè®²å¸ˆæŠ¥å‘Šä¼šå‚ä¼šæ€»ç»“</h1><blockquote><p>è¿™æ˜¯ä»æˆ‘é€‰ä¿®çš„ç ”ç©¶ç”Ÿè¯¾ç¨‹çš„è¯¾ç¨‹æŠ¥å‘Šæ•´ç†è¿‡æ¥çš„ã€‚</p><blockquote><p>æ ¹æ®â€œäººå·¥æ™ºèƒ½ï¼šç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹ â€è¯¾ç¨‹æ•™å­¦è¦æ±‚ï¼Œå®‰æ’å­¦ç”Ÿå‚åŠ ç›¸å…³å‰æ²¿å­¦æœ¯æŠ¥å‘Šï¼Œæœ¬å­¦æœŸå®‰æ’å‚åŠ äºšå¤ªä¿¡å·ä¸ä¿¡æ¯å¤„ç†åä¼šç»„ç»‡çš„æ°å‡ºè®²è€…æŠ¥å‘Šä¼šï¼ˆå¯’å‡å­¦æ ¡ï¼‰ã€‚</p></blockquote><p>è¿™é‡Œæˆ‘åšçš„ä»…ä»…æ˜¯è®°å½•è€å¸ˆä»¬ä»‹ç»çš„å·¥ä½œå†…å®¹ï¼Œä¸æ•¢è¯´æœ‰å¤šæ·±å…¥çš„ç†è§£ï¼Œæœ€ååšçš„æ€»ç»“ä¹Ÿä»…ä»…æ˜¯ä»æˆ‘ç›®å‰çš„çŠ¶å†µï¼ˆæ²¡æ¥è§¦è¿‡ç§‘ç ”ï¼Œæ²¡å‘è¡¨è¿‡æ–‡ç« çš„èœé¸¡æœ¬ç§‘ç”Ÿï¼‰å‡ºå‘çš„ã€‚</p></blockquote><h3 id="Lecture-3-Exploration-of-depth-super-resolution-based-on-deep-learning"><a href="#Lecture-3-Exploration-of-depth-super-resolution-based-on-deep-learning" class="headerlink" title="Lecture 3: Exploration of depth super-resolution based on deep learning"></a>Lecture 3: Exploration of depth super-resolution based on deep learning</h3><p>ç™½æ…§æ…§é¦–å…ˆä»‹ç»äº†è¶…åˆ†è¾¨ç‡æŠ€æœ¯çš„ç ”ç©¶èƒŒæ™¯ä¸ç ”ç©¶ç°çŠ¶ï¼Œåé¢å†ä»‹ç»äº†å¥¹æœ€è¿‘çš„ä¸‰é¡¹å·¥ä½œä»¥åŠæœªæ¥çš„ç ”ç©¶æ–¹å‘ã€‚å†…å®¹è¦ç‚¹å¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><strong>è¶…åˆ†è¾¨ç‡æŠ€æœ¯çš„åˆ†ç±»ï¼š</strong></p><ol><li><p>Interpolated-based approachï¼ˆåŸºäºæ’å€¼çš„æ–¹æ³•ï¼‰</p></li><li><p>Reconstructed-based approachï¼ˆåŸºäºé‡æ„çš„æ–¹æ³•ï¼‰</p></li><li><p>Learning-based approachï¼ˆåŸºäºå­¦ä¹ çš„æ–¹æ³•ï¼‰</p><p>a)    Bicubic pre-interpolated images as input</p><p>b)   LR images as inputâ€”â€“post-upsampling</p><p>c)    GAN based image SR</p></li></ol><h4 id="recent-work-1-Image-SR-based-on-deep-learning"><a href="#recent-work-1-Image-SR-based-on-deep-learning" class="headerlink" title="recent work 1: Image SR based on deep learning"></a>recent work 1: Image SR based on deep learning</h4><p><strong><em>The main issue of image SR</em></strong> ï¼šæœ‰æ•ˆçš„æ¢å¤ä½åˆ†è¾¨ç‡ï¼ˆLRï¼‰è¾“å…¥çš„é«˜é¢‘ç»†èŠ‚ã€‚</p><p><strong><em>ç°æœ‰æ–¹æ³•çš„é—®é¢˜ï¼š</em></strong>ç°æœ‰CNNæ–¹æ³•å†…å­˜æ¶ˆè€—å’Œè®¡ç®—æˆæœ¬éƒ½å¾ˆå¤§ï¼›å¤§å¤šæ•°SRç½‘ç»œä¸­ï¼ŒLRç‰¹å¾çš„ä½é¢‘å’Œé«˜é¢‘åˆ†é‡åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è¢«åŒç­‰å¯¹å¾…ï¼Œå¿½ç•¥äº†å±€éƒ¨è¯¦ç»†ä¿¡æ¯ï¼Œé˜»ç¢äº†ç½‘ç»œçš„è¡¨ç¤ºèƒ½åŠ›ã€‚</p><p><strong><em>ä½œè€…æå‡ºçš„ç½‘ç»œç»“æ„ï¼š</em></strong></p><p><img src="/images/meeting/1-1.png"></p><h4 id="recent-work-2-Video-SR-based-on-deep-learning"><a href="#recent-work-2-Video-SR-based-on-deep-learning" class="headerlink" title="recent work 2: Video SR based on deep learning"></a>recent work 2: Video SR based on deep learning</h4><p><strong><em>Video super-resolution (SR) aims to</em></strong> reconstruct the corresponding high- resolution (HR) frames from consecutive lower-solution (LR) frames, which focuses on modeling the inter-frame temporal correlations and intra-frame spatial correlations among frames.</p><p><strong><em>Overall Architecture:</em></strong> </p><p><img src="/images/meeting/1-2.png"></p><h4 id="recent-work-3-Depth-SR-based-on-deep-learning"><a href="#recent-work-3-Depth-SR-based-on-deep-learning" class="headerlink" title="recent work 3: Depth SR based on deep learning"></a>recent work 3: Depth SR based on deep learning</h4><p><strong><em>Motivation:</em></strong> é€šè¿‡æ·±åº¦å›¾è¶…åˆ†è¾¨ç‡ï¼ˆDepth SRï¼‰è§£å†³æ·±åº¦å›¾åˆ†è¾¨ç‡ä¸RGBå›¾åƒåˆ†è¾¨ç‡æ— æ³•åŒ¹é…çš„é—®é¢˜ã€‚</p><p><strong><em>Limitations:</em></strong> ç¼ºä¹ç°å®ä¸–ç•Œé…å¯¹çš„ LR å’Œ HR æ·±åº¦å›¾ã€‚ å¤§å¤šæ•°ç°æœ‰çš„æ·±åº¦å›¾ SR æ–¹æ³•ä½¿ç”¨ä¸‹é‡‡æ ·æ¥è·å¾—æˆå¯¹çš„è®­ç»ƒæ ·æœ¬ã€‚æ·±åº¦å›¾ SR ä¸­çš„é”åˆ©è¾¹ç•Œå’Œç²¾ç»†ç»†èŠ‚å¾ˆéš¾æ¢å¤ï¼Œå°¤å…¶æ˜¯å½“ç¼©æ”¾å› å­å¾ˆå¤§æ—¶ã€‚</p><p><strong><em>Proposed Method:</em></strong></p><p><img src="/images/meeting/1-3.png"></p><h4 id="Future-research-directions"><a href="#Future-research-directions" class="headerlink" title="Future research directions"></a>Future research directions</h4><ol><li><p>Unsupervised Image/Depth SR</p></li><li><p>Real Degradation</p></li><li><p>Higher SR rates</p></li><li><p>Arbitrary SR rates</p></li></ol><h3 id="Lecture-5ï¼šGlass-Reflection-Removal-for-Images-and-3D-Point-Clouds"><a href="#Lecture-5ï¼šGlass-Reflection-Removal-for-Images-and-3D-Point-Clouds" class="headerlink" title="Lecture 5ï¼šGlass Reflection Removal for Images and 3D Point Clouds"></a>Lecture 5ï¼šGlass Reflection Removal for Images and 3D Point Clouds</h3><p>Jae-Young Simä¸»è¦ä»‹ç»çš„æ˜¯å»é™¤å›¾åƒå’Œç‚¹äº‘ä¸­ç»ç’ƒåå…‰çš„æ–¹æ³•ã€‚</p><h4 id="Reflection-removal-for-2D-glass-images"><a href="#Reflection-removal-for-2D-glass-images" class="headerlink" title="Reflection removal for 2D glass images"></a>Reflection removal for 2D glass images</h4><p>Jae-Young Simå»é™¤å›¾åƒç»ç’ƒåå…‰çš„æ–¹æ³•ä¸»è¦æ˜¯Multiple Image Warpingï¼Œå…·ä½“çš„æ­¥éª¤å¦‚ä¸‹æ‰€ç¤ºï¼š</p><ol><li><p>Formulated a weighted low-rank matrix completion problem in image gradient domain for the purpose of reflection removal.</p></li><li><p>Employ co-saliency detection for glass image alignment.</p></li><li><p>Iteratively obtained low-rank gradient matrix to restore the transmission gradients while suppressing the reflection gradients.</p></li><li><p>Reconstruction of transmission image</p></li></ol><h4 id="Reflection-removal-for-3D-point-clouds"><a href="#Reflection-removal-for-3D-point-clouds" class="headerlink" title="Reflection removal for 3D point clouds"></a>Reflection removal for 3D point clouds</h4><p>å¯¹äºåªæœ‰å•ä¸ªç»ç’ƒå¹³é¢çš„æƒ…å†µï¼š</p><ul><li>First work of reflection removal</li><li>Analyzing characteristic of LiDAR scanner</li><li>Removing virtual points using symmetry relation</li></ul><p>å¯¹äºæœ‰å¤šä¸ªç»ç’ƒå¹³é¢çš„æƒ…å†µï¼š</p><ul><li>Detecting multiple glass planes</li><li>Estimating trajectories of laser pulsesÂ·</li><li>Quantitative evaluation</li></ul><h3 id="å¿ƒå¾—ä½“ä¼š"><a href="#å¿ƒå¾—ä½“ä¼š" class="headerlink" title="å¿ƒå¾—ä½“ä¼š"></a>å¿ƒå¾—ä½“ä¼š</h3><p>æˆ‘è§‰å¾—å‚ä¸è¿™æ ·è§„æ ¼çš„ä¼šè®®å¯¹æˆ‘çš„å¸®åŠ©è¿˜æ˜¯æŒºå¤§çš„ï¼Œæˆ‘ç›®å‰æ‰å¤§ä¸‰ï¼Œå¯¹è‡ªå·±æœªæ¥çš„ç ”ç©¶æ–¹å‘è¿˜ä¸æ˜¯å¾ˆæ˜ç¡®ï¼Œä»…ä»…æ˜¯å¯¹æ·±åº¦å­¦ä¹ ã€è®¡ç®—æœºè§†è§‰æ–¹é¢æ¯”è¾ƒæ„Ÿå…´è¶£ã€‚é€šè¿‡è¿™æ¬¡ä¼šè®®ï¼Œæˆ‘ä»Wan-Chi Siuæ•™æˆè¿™é‡Œäº†è§£äº†æ·±åº¦å­¦ä¹ çš„å‘å±•å†ç¨‹ï¼Œå¯¹æ·±åº¦å­¦ä¹ é¢†åŸŸç°åœ¨ç ”ç©¶çš„æ–¹å‘æœ‰äº†å¤§æ¦‚çš„äº†è§£ï¼ŒåŒæ—¶ä¹Ÿä»ç™½æ…§æ…§æ•™æˆå’ŒJae-Young Simæ•™æˆè¿™é‡Œäº†è§£åˆ°è®¡ç®—æœºè§†è§‰ä¸åŒåˆ†æ”¯çš„å‘å±•æƒ…å†µã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œæˆ‘çš„æ”¶è·å¯ä»¥æ€»ç»“ä¸ºä»¥ä¸‹å‡ ç‚¹ï¼š</p><h4 id="ä¸€äº›æŠ€æœ¯çš„åŸç†å’Œæ€æƒ³å¹¶ä¸å¤æ‚"><a href="#ä¸€äº›æŠ€æœ¯çš„åŸç†å’Œæ€æƒ³å¹¶ä¸å¤æ‚" class="headerlink" title="ä¸€äº›æŠ€æœ¯çš„åŸç†å’Œæ€æƒ³å¹¶ä¸å¤æ‚"></a>ä¸€äº›æŠ€æœ¯çš„åŸç†å’Œæ€æƒ³å¹¶ä¸å¤æ‚</h4><p>æˆ‘æœ¬æ¥è§‰å¾—ï¼Œéšç€æŠ€æœ¯çš„è¿›æ­¥ï¼Œæ–°çš„æŠ€æœ¯ä¼šå˜å¾—è¶Šæ¥è¶Šå¤æ‚ã€‚ä¸è¿‡ä»Jae-Young Simæ•™æˆçš„æŠ¥å‘Šä¸­æˆ‘å‘ç°å…¶å®æœ‰çš„æŠ€æœ¯çš„åŸç†å’Œæ€æƒ³æ˜¯æŒºå¥½ç†è§£çš„ï¼Œä¸è¿‡å…·ä½“çš„å®ç°å¯èƒ½ä¼šå¤æ‚ä¸€äº›ã€‚</p><p>Jae-Young Simä»‹ç»3Dç‚¹äº‘å»é™¤åå…‰ç‚¹çš„æ—¶å€™ï¼Œé¦–å…ˆä»‹ç»äº†æ¿€å…‰é›·è¾¾æ‰«æçš„ç‰¹æ€§ï¼Œä»¥åŠå¯¹äºå•ä¸ªç»ç’ƒå¹³é¢åå…‰çš„æƒ…å†µã€‚å•ä¸ªç»ç’ƒå¹³é¢åå…‰ä¼šå¯¼è‡´æ¿€å…‰é›·è¾¾æ¥æ”¶åˆ°ä¸¤ä¸ªä»¥ä¸Šçš„ç‚¹ï¼šä¸€ä¸ªæ¥è‡ªç‰©ä½“ï¼Œä¸€ä¸ªæ¥è‡ªç»ç’ƒä¸Šçš„åå°„è„‰å†²ï¼Œæ‰€ä»¥å»é™¤å•ä¸ªç»ç’ƒå¹³é¢é€ æˆçš„åå…‰ç‚¹å°±å¯ä»¥é€šè¿‡æ£€æµ‹è¿™ä¸ªåå°„è„‰å†²æ¥å®ç°ï¼Œè€Œåå°„ç‚¹åˆ°æ¿€å…‰é›·è¾¾çš„è·ç¦»æ¯”çœŸå®ç‚¹çš„è·ç¦»å¤§ï¼ˆæˆ‘ç†è§£çš„æ˜¯å¦‚æœåå°„ç‚¹è·ç¦»æ›´å°å°±æ„å‘³ç€æœ‰å…¶ä»–ç‰©ä½“åœ¨æ¿€å…‰é›·è¾¾å’ŒçœŸå®ç‰©ä½“ä¹‹é—´ï¼Œè¿™æ ·å°±ä¼šé˜»æŒ¡çœŸå®ç‰©ä½“çš„å…‰çº¿ï¼Œè¿™æ ·å°±ä¸å¯èƒ½ä¼šæ£€æµ‹åˆ°è¢«é®æŒ¡åœ¨åé¢çš„ç‰©ä½“ï¼‰ï¼Œæ‰€ä»¥å°±å¯ä»¥é€šè¿‡è·ç¦»æ¥è¿›è¡Œæ‰“åˆ†ï¼Œåˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯ä¸æ˜¯åå°„ç‚¹ã€‚</p><p><img src="/images/meeting/1-4.png"></p><p>è€Œå¯¹äºå¤šä¸ªç»ç’ƒå¹³é¢çš„æƒ…å†µï¼Œç”±äºç»ç’ƒä¹‹é—´çš„äº’ç›¸æŠ˜å°„ï¼Œé€šè¿‡è·ç¦»çš„æ–¹æ³•ä¸èƒ½æœ‰æ•ˆæ£€æµ‹å‡ºåå°„ç‚¹ï¼Œä½†æ˜¯è¢«å¤šæ¬¡æŠ˜å°„çš„ç‰©ç†ä½å§¿å¾€å¾€æ˜¯ä¸æ­£ç¡®çš„ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚è¿™æ ·å°±å¯ä»¥é€šè¿‡æ£€æµ‹ç‰©ä½“ä½å§¿çš„åˆç†æ€§æ¥åˆ¤æ–­è¯¥ç‰©ä½“æ˜¯å¦æ˜¯åå°„ç‚¹æ„æˆçš„ã€‚</p><p><img src="/images/meeting/1-5.png"></p><h4 id="æ¯”èµ·æ–°æ–¹æ³•çš„å®ç°ï¼Œæ•°æ®é›†çš„è®¾è®¡ä¸è·å–ä¹Ÿéå¸¸å…³é”®"><a href="#æ¯”èµ·æ–°æ–¹æ³•çš„å®ç°ï¼Œæ•°æ®é›†çš„è®¾è®¡ä¸è·å–ä¹Ÿéå¸¸å…³é”®" class="headerlink" title="æ¯”èµ·æ–°æ–¹æ³•çš„å®ç°ï¼Œæ•°æ®é›†çš„è®¾è®¡ä¸è·å–ä¹Ÿéå¸¸å…³é”®"></a>æ¯”èµ·æ–°æ–¹æ³•çš„å®ç°ï¼Œæ•°æ®é›†çš„è®¾è®¡ä¸è·å–ä¹Ÿéå¸¸å…³é”®</h4><p>æˆ‘åœ¨å‚åŠ è¿™ä¸ªä¼šè®®çš„æ—¶å€™å‘ç°ï¼ŒJae-Young Simä»‹ç»å®Œä»–ä»¬çš„å·¥ä½œåï¼ŒNakamasa Inoueå°±æäº†ä¸€ä¸ªå…³äºGround Truthè·å–çš„é—®é¢˜ã€‚åé¢æˆ‘å›é¡¾è¿™ä¸ªç»†èŠ‚ï¼Œæ„Ÿè§‰æ•°æ®é›†æˆ–è€…Ground Truthçš„è·å–ç¡®å®æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜ï¼Œæ•°æ®æ˜¯ç ”ç©¶çš„åŸºç¡€ï¼Œä»»ä½•ç ”ç©¶éƒ½ç¦»ä¸å¼€æ•°æ®ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬åšä¸€äº›åˆ›æ–°æ€§çš„å·¥ä½œæ—¶ï¼Œå¯èƒ½ç°æˆçš„æ•°æ®é›†å°±ä¸æ˜¯å¾ˆé€‚åˆï¼Œè¿™æ—¶å€™å°±éœ€è¦æ–°çš„æ•°æ®é›†æ¥æµ‹è¯•æˆ‘ä»¬çš„å·¥ä½œï¼Œå¹¶éªŒè¯æˆ‘ä»¬å·¥ä½œçš„æ­£ç¡®æ€§ï¼Œè€Œä¸”ä¸€ä¸ªé«˜è´¨é‡çš„æ•°æ®é›†å¾€å¾€èƒ½å¤Ÿæé«˜æ¨¡å‹è®­ç»ƒçš„è´¨é‡å’Œé¢„æµ‹çš„å‡†ç¡®ç‡ã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªæ•°æ®é›†å¦‚ä½•å¾—åˆ°ï¼ŒçœŸå®å€¼åˆ°åº•çœŸä¸çœŸå®ï¼Œéƒ½æ˜¯æ¯”è¾ƒé‡è¦çš„ã€‚</p><p>è¿™æ¬¡ä¼šè®®ä¸­ï¼Œç™½æ…§æ…§å°±ä»‹ç»äº†ä»–ä»¬åˆ¶ä½œçš„RGB-D-Dæ•°æ®é›†ï¼Œç”¨äºæ·±åº¦å›¾è¶…åˆ†è¾¨ç‡æŠ€æœ¯ã€‚</p><h4 id="éœ€è¦åŠ å¼ºå¯¹è‹±è¯­çš„å­¦ä¹ "><a href="#éœ€è¦åŠ å¼ºå¯¹è‹±è¯­çš„å­¦ä¹ " class="headerlink" title="éœ€è¦åŠ å¼ºå¯¹è‹±è¯­çš„å­¦ä¹ "></a>éœ€è¦åŠ å¼ºå¯¹è‹±è¯­çš„å­¦ä¹ </h4><p>å›½å¤–çš„å­¦æœ¯ä¼šè®®ä¸€èˆ¬éƒ½æ˜¯æŠŠè‹±è¯­ä½œä¸ºä¼šè®®çš„ä¸»è¦ç”¨è¯­ï¼Œè€å¸ˆä»¬åšæŠ¥å‘Šçš„æ—¶å€™ä¹Ÿæ˜¯ç”¨è‹±è¯­æ¥è¿›è¡Œè¡¨è¾¾çš„ã€‚</p><p>æˆ‘è‹±è¯­ä¸å¤ªè¡Œï¼Œå‚åŠ ä¼šè®®çš„æ—¶å€™è·Ÿä¸ä¸Šè€å¸ˆè®²çš„å†…å®¹,,Ô¾ã…‚Ô¾,,</p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦æœ¯ä¼šè®® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºSIFTçš„å›¾åƒæ‹¼æ¥ï¼ˆèåˆï¼‰å®ç°</title>
      <link href="2021/12/31/opencv-notes-6/"/>
      <url>2021/12/31/opencv-notes-6/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºäºSIFTçš„å›¾åƒæ‹¼æ¥ï¼ˆèåˆï¼‰å®ç°"><a href="#åŸºäºSIFTçš„å›¾åƒæ‹¼æ¥ï¼ˆèåˆï¼‰å®ç°" class="headerlink" title="åŸºäºSIFTçš„å›¾åƒæ‹¼æ¥ï¼ˆèåˆï¼‰å®ç°"></a>åŸºäºSIFTçš„å›¾åƒæ‹¼æ¥ï¼ˆèåˆï¼‰å®ç°</h1><p><strong>è¦æ±‚ï¼š</strong></p><ol><li>ç»™å‡ºä½ ç”¨æ‰‹æœºæ‹æ‘„ä¸¤å¼ æœ‰é‡å è§†é‡çš„ç…§ç‰‡ï¼ˆå»ºè®®ä¸¤å¹…å›¾åƒæ‰“å…‰ä¸åŒï¼Œä»¥ä½“ç°èåˆçš„æ•ˆæœï¼‰ã€‚</li><li>ç”¨siftç‰¹å¾æˆ–è€…ä»»æ„ä½ ç†Ÿæ‚‰çš„ç‰¹å¾è¿›è¡ŒåŒ¹é…ã€‚</li><li>ç»™å‡ºå˜æ¢çŸ©é˜µï¼Œå¹¶å®Œæˆæ‹¼æ¥ï¼Œç»™å‡ºæ‹¼æ¥åçš„å›¾åƒã€‚</li><li>å¯¹æ‹¼æ¥åçš„å›¾åƒè¿›è¡Œèåˆï¼Œé™„èåˆåçš„å›¾åƒã€‚</li></ol><h3 id="åŠ è½½å›¾ç‰‡å¹¶è¿›è¡Œé¢„å¤„ç†"><a href="#åŠ è½½å›¾ç‰‡å¹¶è¿›è¡Œé¢„å¤„ç†" class="headerlink" title="åŠ è½½å›¾ç‰‡å¹¶è¿›è¡Œé¢„å¤„ç†"></a>åŠ è½½å›¾ç‰‡å¹¶è¿›è¡Œé¢„å¤„ç†</h3><p>ç¬¬ä¸€æ­¥è‚¯å®šæ˜¯å›¾ç‰‡çš„åŠ è½½å’Œé¢„å¤„ç†ã€‚è¿™é‡Œæˆ‘çš„æƒ³æ³•æ˜¯ï¼š</p><ul><li>å…ˆåŠ è½½å›¾ç‰‡ï¼Œç„¶åè°ƒæ•´ç¬¬ä¸€å¼ å›¾ç‰‡çš„åˆ†è¾¨ç‡ï¼Œå¼ºåˆ¶å®½åº¦ä¸º600ï¼›</li><li>ä¹‹åå†è°ƒæ•´ç¬¬äºŒå¼ å›¾ç‰‡çš„åˆ†è¾¨ç‡ï¼Œè®©è¿™ä¸¤å¼ å›¾ç‰‡çš„åˆ†è¾¨ç‡ä¸€æ ·ã€‚</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">load_image</span><span class="token punctuation">(</span>img1_path<span class="token punctuation">,</span> img2_path<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    åŠ è½½ä¸¤å¼ å›¾ç‰‡ï¼Œå¹¶è¿›è¡Œé¢„å¤„ç†    :param img1_path: å›¾ç‰‡1çš„è·¯å¾„    :param img2_path: å›¾ç‰‡2çš„è·¯å¾„    :return: å¤„ç†åçš„å›¾ç‰‡1ä¸å›¾ç‰‡2    """</span>    <span class="token comment"># ================ å›¾ç‰‡åŠ è½½ ================</span>    img1 <span class="token operator">=</span> cv<span class="token punctuation">.</span>imread<span class="token punctuation">(</span>img1_path<span class="token punctuation">)</span>    img2 <span class="token operator">=</span> cv<span class="token punctuation">.</span>imread<span class="token punctuation">(</span>img2_path<span class="token punctuation">)</span>    <span class="token comment"># ================ åˆ†è¾¨ç‡è°ƒæ•´ ================</span>    rate <span class="token operator">=</span> <span class="token number">600</span> <span class="token operator">/</span> img1<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>    img1 <span class="token operator">=</span> cv<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>rate <span class="token operator">*</span> img1<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>rate <span class="token operator">*</span> img1<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    img2 <span class="token operator">=</span> cv<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>img2<span class="token punctuation">,</span> <span class="token punctuation">(</span>img1<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> img1<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># FIXME:</span>    <span class="token comment">#  - ä½¿ç”¨è¾¹ç•Œå¡«å……ï¼šç‰¹å¾ç‚¹åŒ¹é…çš„ç»“æœå›¾å¸¦æœ‰å¾ˆå¤§çš„é»‘åŸŸ</span>    <span class="token comment">#  - ä¸ä½¿ç”¨è¾¹ç•Œå¡«å……ï¼šæœ€åå›¾åƒæ‹¼æ¥å’Œèåˆä¸æ–¹ä¾¿ï¼Œè¿˜æ˜¯éœ€è¦æ–°å»ºä¸€å¼ æ›´å¤§çš„å›¾æˆ–è€…æå‰ç®—å¥½å›¾çš„å¤§å°</span>    <span class="token comment"># ================ è¾¹ç•Œå¡«å…… ================</span>    top<span class="token punctuation">,</span> bot<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">250</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">,</span> <span class="token number">250</span>    img1 <span class="token operator">=</span> cv<span class="token punctuation">.</span>copyMakeBorder<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> top<span class="token punctuation">,</span> bot<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>BORDER_CONSTANT<span class="token punctuation">,</span> value<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    img2 <span class="token operator">=</span> cv<span class="token punctuation">.</span>copyMakeBorder<span class="token punctuation">(</span>img2<span class="token punctuation">,</span> top<span class="token punctuation">,</span> bot<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>BORDER_CONSTANT<span class="token punctuation">,</span> value<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> img1<span class="token punctuation">,</span> img2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸‹é¢æ˜¯é¢„å¤„ç†ä¹‹åçš„ä¸¤å¼ å›¾ç‰‡ï¼ˆç¬¬äºŒå¼ å›¾ç‰‡äº®åº¦æ˜æ˜¾æ¯”ç¬¬ä¸€å¼ ä½ï¼‰</p><p><img src="/images/OpenCV-Notes/6-01.png"></p><h3 id="ç‰¹å¾ç‚¹è®¡ç®—ä¸åŒ¹é…"><a href="#ç‰¹å¾ç‚¹è®¡ç®—ä¸åŒ¹é…" class="headerlink" title="ç‰¹å¾ç‚¹è®¡ç®—ä¸åŒ¹é…"></a>ç‰¹å¾ç‚¹è®¡ç®—ä¸åŒ¹é…</h3><p>å¾—åˆ°å¤„ç†å¥½çš„ä¸¤å¼ å›¾ç‰‡ä¹‹åï¼Œæˆ‘ä½¿ç”¨OpenCVçš„SIFTç‰¹å¾ç‚¹è¿›è¡ŒåŒ¹é…ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">match_feather_point</span><span class="token punctuation">(</span>img1<span class="token punctuation">,</span> img2<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    è®¡ç®—ç‰¹å¾ç‚¹å¹¶è¿›è¡ŒåŒ¹é…    :param img1: ç¬¬ä¸€å¼ å›¾ç‰‡    :param img2: ç¬¬äºŒå¼ å›¾ç‰‡    :return: åŒ¹é…çš„ç‰¹å¾ç‚¹    """</span>    <span class="token comment"># ================ è®¡ç®—SIFTç‰¹å¾ ================</span>    sift <span class="token operator">=</span> cv<span class="token punctuation">.</span>SIFT_create<span class="token punctuation">(</span><span class="token punctuation">)</span>    kp1<span class="token punctuation">,</span> des1 <span class="token operator">=</span> sift<span class="token punctuation">.</span>detectAndCompute<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>    kp2<span class="token punctuation">,</span> des2 <span class="token operator">=</span> sift<span class="token punctuation">.</span>detectAndCompute<span class="token punctuation">(</span>img2<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>    <span class="token comment"># ================ FLANNç‰¹å¾åŒ¹é… ================</span>    FLANN_INDEX_KDTREE <span class="token operator">=</span> <span class="token number">1</span>    index_params <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>algorithm<span class="token operator">=</span>FLANN_INDEX_KDTREE<span class="token punctuation">,</span> trees<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>    search_params <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>checks<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span>    flann <span class="token operator">=</span> cv<span class="token punctuation">.</span>FlannBasedMatcher<span class="token punctuation">(</span>index_params<span class="token punctuation">,</span> search_params<span class="token punctuation">)</span>    matches <span class="token operator">=</span> flann<span class="token punctuation">.</span>knnMatch<span class="token punctuation">(</span>des1<span class="token punctuation">,</span> des2<span class="token punctuation">,</span> k<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> kp1<span class="token punctuation">,</span> kp2<span class="token punctuation">,</span> matches<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è®¡ç®—å˜æ¢çŸ©é˜µå¹¶å®Œæˆæ‹¼æ¥"><a href="#è®¡ç®—å˜æ¢çŸ©é˜µå¹¶å®Œæˆæ‹¼æ¥" class="headerlink" title="è®¡ç®—å˜æ¢çŸ©é˜µå¹¶å®Œæˆæ‹¼æ¥"></a>è®¡ç®—å˜æ¢çŸ©é˜µå¹¶å®Œæˆæ‹¼æ¥</h3><p>è¿™éƒ¨åˆ†çš„æ€è·¯ï¼š</p><ul><li><p>æ ¹æ®åŒ¹é…ç‚¹é—´çš„è·ç¦»é€‰æ‹©äº†ä¸€äº›å¥½çš„åŒ¹é…ç‚¹å¯¹ï¼›</p></li><li><p>åˆ©ç”¨OpenCVçš„findHomographyå‡½æ•°è®¡ç®—å¾—åˆ°äº†å˜æ¢çŸ©é˜µï¼ˆæ‰€ä»¥è¿™é‡Œä½¿ç”¨çš„æ˜¯æŠ•å°„æ¨¡å‹ï¼‰ï¼›</p></li><li><p>æ ¹æ®å˜æ¢çŸ©é˜µå’ŒOpenCVçš„warpPerspectiveå‡½æ•°å¯¹ç¬¬äºŒå¼ å›¾ç‰‡è¿›è¡Œäº†é…å‡†ï¼ˆè¿™é‡Œæ˜¯å‰å‘æ˜ å°„ï¼‰ï¼›</p><blockquote><p>å‰å‘æ˜ å°„å°±æ˜¯æ ¹æ®åŸå›¾ç”¨å˜æ¢å…¬å¼ç›´æ¥ç®—å‡ºè¾“å‡ºå›¾åƒç›¸åº”åƒç´ çš„ç©ºé—´ä½ç½®</p><p>åå‘æ˜ å°„ï¼ˆInverse Mappingï¼‰ï¼šæ‰«æè¾“å‡ºå›¾åƒçš„ä½ç½®(x,y)ï¼Œé€šè¿‡ Image ï¼ˆä¸ºTçš„é€†çŸ©é˜µï¼‰è®¡ç®—è¾“å…¥å›¾åƒå¯¹åº”çš„ä½ç½® (v,w)ï¼Œé€šè¿‡æ’å€¼æ–¹æ³•å†³å®šè¾“å‡ºå›¾åƒè¯¥ä½ç½®çš„ç°åº¦å€¼ã€‚</p></blockquote></li><li><p>ä¹‹åä½¿ç”¨æ‹·è´çš„æ–¹æ³•å®Œæˆäº†ä¸€ä¸ªéå¸¸ç®€å•çš„æ‹¼æ¥ã€‚</p></li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">get_good_match</span><span class="token punctuation">(</span>img1<span class="token punctuation">,</span> img2<span class="token punctuation">,</span> kp1<span class="token punctuation">,</span> kp2<span class="token punctuation">,</span> matches<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    æå–å¥½çš„åŒ¹é…ç‚¹å¯¹ã€è®¡ç®—å˜æ¢çŸ©é˜µå¹¶æ‹¼æ¥å›¾åƒ    :param img1: ç¬¬ä¸€å¼ å›¾ç‰‡    :param img2: ç¬¬äºŒå¼ å›¾ç‰‡    :param kp1: ç¬¬ä¸€å¼ å›¾ç‰‡ç‰¹å¾ç‚¹    :param kp2: ç¬¬äºŒå¼ å›¾ç‰‡ç‰¹å¾ç‚¹    :param matches: åŒ¹é…ç»“æœ    :return: ç¬¬ä¸€å¼ å›¾ç‰‡ï¼Œé…å‡†çš„ç¬¬äºŒå¼ å›¾ç‰‡ï¼ŒåŒ¹é…ç»“æœï¼Œæ‹¼æ¥å›¾ç‰‡ï¼Œå˜æ¢çŸ©é˜µ    """</span>    <span class="token comment"># TODO ä½¿ç”¨RANSACæ–¹æ³•å»é™¤é”™è¯¯åŒ¹é…ç‚¹å¯¹</span>    matches_mask <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>matches<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    good_match <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> i<span class="token punctuation">,</span> <span class="token punctuation">(</span>m<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>matches<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> m<span class="token punctuation">.</span>distance <span class="token operator">&lt;</span> <span class="token number">0.5</span> <span class="token operator">*</span> n<span class="token punctuation">.</span>distance<span class="token punctuation">:</span>            good_match<span class="token punctuation">.</span>append<span class="token punctuation">(</span>m<span class="token punctuation">)</span>            matches_mask<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>    <span class="token comment"># ================ ç”»å‡ºåŒ¹é…ç»“æœå›¾ ================</span>    draw_params <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>matchColor<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                       singlePointColor<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                       matchesMask<span class="token operator">=</span>matches_mask<span class="token punctuation">,</span>                       flags<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>    img3 <span class="token operator">=</span> cv<span class="token punctuation">.</span>drawMatchesKnn<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> kp1<span class="token punctuation">,</span> img2<span class="token punctuation">,</span> kp2<span class="token punctuation">,</span> matches<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>draw_params<span class="token punctuation">)</span>    <span class="token comment"># ================ å›¾åƒé…å‡†ï¼Œå¯¹ç¬¬äºŒå¹…å›¾åƒè¿›è¡Œå˜æ¢ ================</span>    MIN_MATCH_COUNT <span class="token operator">=</span> <span class="token number">10</span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>good_match<span class="token punctuation">)</span> <span class="token operator">&lt;</span> MIN_MATCH_COUNT<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Not enough matches are found - {}/{}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>good_match<span class="token punctuation">)</span><span class="token punctuation">,</span> MIN_MATCH_COUNT<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token boolean">None</span>    src_pts <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span><span class="token punctuation">[</span>kp1<span class="token punctuation">[</span>m<span class="token punctuation">.</span>queryIdx<span class="token punctuation">]</span><span class="token punctuation">.</span>pt <span class="token keyword">for</span> m <span class="token keyword">in</span> good_match<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>    dst_pts <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span><span class="token punctuation">[</span>kp2<span class="token punctuation">[</span>m<span class="token punctuation">.</span>trainIdx<span class="token punctuation">]</span><span class="token punctuation">.</span>pt <span class="token keyword">for</span> m <span class="token keyword">in</span> good_match<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>    M<span class="token punctuation">,</span> mask <span class="token operator">=</span> cv<span class="token punctuation">.</span>findHomography<span class="token punctuation">(</span>src_pts<span class="token punctuation">,</span> dst_pts<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>RANSAC<span class="token punctuation">,</span> <span class="token number">5.0</span><span class="token punctuation">)</span>    img2 <span class="token operator">=</span> cv<span class="token punctuation">.</span>warpPerspective<span class="token punctuation">(</span>img2<span class="token punctuation">,</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>M<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>img2<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> img2<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                              flags<span class="token operator">=</span>cv<span class="token punctuation">.</span>WARP_INVERSE_MAP<span class="token punctuation">)</span>    <span class="token comment"># ================ å›¾åƒæ‹¼æ¥ï¼ˆæ‹·è´æ‹¼æ¥ï¼Œæ•ˆæœä¸å¥½ï¼‰ ================</span>    dst <span class="token operator">=</span> img1<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>img2<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>img2<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            pix <span class="token operator">=</span> img2<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span>            <span class="token keyword">if</span> pix<span class="token punctuation">.</span><span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                dst<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> pix    <span class="token keyword">return</span> img1<span class="token punctuation">,</span> img2<span class="token punctuation">,</span> img3<span class="token punctuation">,</span> dst<span class="token punctuation">,</span> M<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆå§‹åŒ¹é…çš„ç»“æœï¼š</p><p><img src="/images/OpenCV-Notes/6-02.png"></p><p>å»é™¤é”™è¯¯åŒ¹é…ä¹‹åçš„ç»“æœï¼š</p><p><img src="/images/OpenCV-Notes/6-03.png"></p><p>è®¡ç®—å¾—åˆ°çš„å˜æ¢çŸ©é˜µï¼š</p><pre class="line-numbers language-none"><code class="language-none">å˜æ¢çŸ©é˜µï¼š[[ 2.73415935e-01  4.12585718e-01  2.88797035e+02] [-2.82455289e-01  1.26241598e+00 -2.13730468e+02] [-1.02250262e-03  7.60354200e-04  1.00000000e+00]]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å›¾ç‰‡æ‹¼æ¥çš„ç»“æœï¼šï¼ˆæ‹¼æ¥ç—•è¿¹æ˜æ˜¾ï¼‰</p><p><img src="/images/OpenCV-Notes/6-04.png"></p><h3 id="è¿›è¡Œå›¾åƒèåˆ"><a href="#è¿›è¡Œå›¾åƒèåˆ" class="headerlink" title="è¿›è¡Œå›¾åƒèåˆ"></a>è¿›è¡Œå›¾åƒèåˆ</h3><p>è¿™éƒ¨åˆ†çš„æ€è·¯ï¼š</p><ul><li><p>ä¸»è¦æ˜¯æ ¹æ®æŸç§æƒé‡æ¥è¿›è¡Œèåˆï¼›</p></li><li><p>è¿™é‡Œå¾ˆè‡ªç„¶çš„æƒ³åˆ°è®¡ç®—å·¦å³é‡å çš„éƒ¨åˆ†ï¼Œç„¶åæ ¹æ®é‡å éƒ¨åˆ†æŸä¸ªç‚¹åˆ°å·¦å³è¾¹ç•Œçš„è·ç¦»æ¥è®¡ç®—æƒé‡ï¼›</p><blockquote><p>ç”±äºä¸Šé¢ä»…ä»…æ˜¯è®¡ç®—å·¦å³é‡å çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥æœ€åå¾—åˆ°çš„ç»“æœå¯èƒ½ä¼šæœ‰æ¨ªå‘æ‹¼æ¥ç—•è¿¹ï¼›</p><p>æˆ‘åé¢å°è¯•äº†ä¸Šä¸‹å·¦å³éƒ½è€ƒè™‘è¿›å»ï¼Œä½†æ˜¯è€ƒè™‘çš„æ–¹æ³•ä¸æ˜¯å¾ˆå¥½ï¼Œæ²¡æœ‰å–å¾—æ¯”è¾ƒå¥½çš„æ•ˆæœã€‚</p></blockquote></li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">blend_image</span><span class="token punctuation">(</span>src_img<span class="token punctuation">,</span> warp_img<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    å›¾åƒèåˆ    :param src_img: ç¬¬ä¸€å¼ å›¾ç‰‡    :param warp_img:  ç¬¬äºŒå¼ å›¾ç‰‡    :return:  èåˆåçš„å›¾ç‰‡    """</span>    <span class="token comment"># ================ åŸºæœ¬å˜é‡å®šä¹‰ ================</span>    rows<span class="token punctuation">,</span> cols <span class="token operator">=</span> src_img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>    result <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span>rows<span class="token punctuation">,</span> cols<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>    left <span class="token operator">=</span> <span class="token number">0</span>    right <span class="token operator">=</span> <span class="token number">0</span>    up <span class="token operator">=</span> <span class="token number">0</span>    down <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment"># ================ æ‰¾åˆ°å·¦å³é‡å åŒºåŸŸ ================</span>    <span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> cols<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> src_img<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> col<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">and</span> warp_img<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> col<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            left <span class="token operator">=</span> col            <span class="token keyword">break</span>    <span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>cols <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> src_img<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> col<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">and</span> warp_img<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> col<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            right <span class="token operator">=</span> col            <span class="token keyword">break</span>    <span class="token comment"># ================ æ‰¾åˆ°ä¸Šä¸‹é‡å åŒºåŸŸ ================</span>    <span class="token comment"># for row in range(0, rows):</span>    <span class="token comment">#     if src_img[row, :].any() and warp_img[row, :].any():</span>    <span class="token comment">#         up = row</span>    <span class="token comment">#         break</span>    <span class="token comment"># for row in range(rows - 1, 0, -1):</span>    <span class="token comment">#     if src_img[row, :].any() and warp_img[row, :].any():</span>    <span class="token comment">#         down = row</span>    <span class="token comment">#         break</span>    <span class="token comment"># ================ æ ¹æ®æƒé‡è¿›è¡Œå›¾åƒèåˆ ================</span>    <span class="token comment"># FIXME:</span>    <span class="token comment">#  - æ ¹æ®å·¦å³é‡å åŒºåŸŸè¿›è¡Œèåˆä¼šå¯¼è‡´å›¾ç‰‡ä¸­æœ‰æ¨ªå‘çš„æ‹¼æ¥ç—•è¿¹</span>    <span class="token comment">#  - åˆ©ç”¨ä¸Šä¸‹ä¸å·¦å³é‡å çš„åŒºåŸŸè¿›è¡Œç®€å•èåˆçš„æ•ˆæœå¹¶ä¸å¥½ï¼Œéœ€è¦ä¸€äº›åˆ«çš„åŠæ³•</span>    <span class="token keyword">for</span> row <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> rows<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> cols<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> src_img<span class="token punctuation">[</span>row<span class="token punctuation">,</span> col<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># srcä¸å­˜åœ¨</span>                result<span class="token punctuation">[</span>row<span class="token punctuation">,</span> col<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> warp_img<span class="token punctuation">[</span>row<span class="token punctuation">,</span> col<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>            <span class="token keyword">elif</span> <span class="token keyword">not</span> warp_img<span class="token punctuation">[</span>row<span class="token punctuation">,</span> col<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># warp_img ä¸å­˜åœ¨</span>                result<span class="token punctuation">[</span>row<span class="token punctuation">,</span> col<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> src_img<span class="token punctuation">[</span>row<span class="token punctuation">,</span> col<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># src å’Œwarpéƒ½å­˜åœ¨ï¼Œå°±æ˜¯äº¤å‰åŒºåŸŸ</span>                src_len <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span><span class="token builtin">abs</span><span class="token punctuation">(</span>col <span class="token operator">-</span> left<span class="token punctuation">)</span><span class="token punctuation">)</span>                test_len <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span><span class="token builtin">abs</span><span class="token punctuation">(</span>col <span class="token operator">-</span> right<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token comment"># src_width = float(abs(row - down))</span>                <span class="token comment"># test_width = float(abs(row - up))</span>                alpha_1 <span class="token operator">=</span> src_len <span class="token operator">/</span> <span class="token punctuation">(</span>src_len <span class="token operator">+</span> test_len<span class="token punctuation">)</span>                <span class="token comment"># alpha_2 = src_width / (src_width + test_width)</span>                result<span class="token punctuation">[</span>row<span class="token punctuation">,</span> col<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> src_img<span class="token punctuation">[</span>row<span class="token punctuation">,</span> col<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">*</span> alpha_1 <span class="token operator">+</span> \                                      warp_img<span class="token punctuation">[</span>row<span class="token punctuation">,</span> col<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> alpha_1<span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åå¾—åˆ°çš„èåˆç»“æœï¼š</p><p><img src="/images/OpenCV-Notes/6-05.png"></p><h2 id="å…¶ä»–è¿è¡Œç»“æœ"><a href="#å…¶ä»–è¿è¡Œç»“æœ" class="headerlink" title="å…¶ä»–è¿è¡Œç»“æœ"></a>å…¶ä»–è¿è¡Œç»“æœ</h2><h3 id="æµ‹è¯•ä¸€"><a href="#æµ‹è¯•ä¸€" class="headerlink" title="æµ‹è¯•ä¸€"></a>æµ‹è¯•ä¸€</h3><p><img src="/images/OpenCV-Notes/6-06.png"></p><p><img src="/images/OpenCV-Notes/6-07.png"></p><p><img src="/images/OpenCV-Notes/6-08.png"></p><h3 id="æµ‹è¯•äºŒ"><a href="#æµ‹è¯•äºŒ" class="headerlink" title="æµ‹è¯•äºŒ"></a>æµ‹è¯•äºŒ</h3><p><img src="/images/OpenCV-Notes/6-09.png"></p><p><img src="/images/OpenCV-Notes/6-10.png"></p><p><img src="/images/OpenCV-Notes/6-11.png"></p><h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">"""TODO è¦æ±‚ï¼š    1.ç»™å‡ºä½ ç”¨æ‰‹æœºæ‹æ‘„ä¸¤å¼ æœ‰é‡å è§†é‡çš„ç…§ç‰‡ï¼ˆå»ºè®®ä¸¤å¹…å›¾åƒæ‰“å…‰ä¸åŒï¼Œä»¥ä½“ç°ç¬¬äº”æ­¥èåˆçš„æ•ˆæœï¼‰ã€‚    2.ç”¨siftç‰¹å¾æˆ–è€…ä»»æ„ä½ ç†Ÿæ‚‰çš„ç‰¹å¾è¿›è¡ŒåŒ¹é…ã€‚ï¼ˆé™„ç‰¹å¾ç‚¹å›¾ï¼‰    3.ç”¨RANSACæ–¹æ³•å»é™¤è¯¯åŒ¹é…ç‚¹å¯¹ã€‚ï¼ˆé™„ç­›é™¤åçš„ç‰¹å¾ç‚¹å›¾ï¼‰    4.ç»™å‡ºå˜æ¢çŸ©é˜µï¼ˆä»¿å°„æ¨¡å‹æˆ–æŠ•å°„æ¨¡å‹éƒ½å¯ä»¥ï¼Œéœ€æ³¨æ˜ï¼‰ï¼Œå¹¶å®Œæˆæ‹¼æ¥ï¼ˆå‰å‘æ˜ å°„æˆ–åå‘æ˜ å°„éƒ½å¯ä»¥ï¼Œéœ€æ³¨æ˜ï¼‰ï¼Œç»™å‡ºæ‹¼æ¥åçš„å›¾åƒã€‚    5.å¯¹æ‹¼æ¥åçš„å›¾åƒè¿›è¡Œèåˆï¼ˆä»»æ„ä½ å–œæ¬¢çš„èåˆæ–¹æ³•ï¼‰ï¼Œé™„èåˆåçš„å›¾åƒã€‚ æ³¨æ„ï¼š    å°½é‡æè¿°æ¸…æ¥šæ¯ä¸€æ­¥çš„æ€è·¯ï¼Œå¹¶é™„ä¸Šå¯¹åº”ä»£ç ã€‚    å®Œæˆä»»æ„å››æ­¥å°±å¯ä»¥æ‹¿åˆ°æ»¡åˆ†ï¼ˆå³å¯ä»¥ä¸ç­›é™¤ç¦»ç¾¤ç‚¹ï¼Œæˆ–ä¸è¿›è¡Œèåˆï¼‰ã€‚    ç½‘ä¸Šä»£ç è¾ƒå¤šï¼Œå¯ä»¥å‚è€ƒã€‚"""</span><span class="token keyword">import</span> time<span class="token keyword">import</span> cv2<span class="token punctuation">.</span>cv2 <span class="token keyword">as</span> cv<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token comment"># 1.ç»™å‡ºä½ ç”¨æ‰‹æœºæ‹æ‘„ä¸¤å¼ æœ‰é‡å è§†é‡çš„ç…§ç‰‡ï¼ˆå»ºè®®ä¸¤å¹…å›¾åƒæ‰“å…‰ä¸åŒï¼Œä»¥ä½“ç°ç¬¬äº”æ­¥èåˆçš„æ•ˆæœï¼‰ã€‚</span><span class="token keyword">def</span> <span class="token function">load_image</span><span class="token punctuation">(</span>img1_path<span class="token punctuation">,</span> img2_path<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    åŠ è½½ä¸¤å¼ å›¾ç‰‡ï¼Œå¹¶è¿›è¡Œé¢„å¤„ç†    :param img1_path: å›¾ç‰‡1çš„è·¯å¾„    :param img2_path: å›¾ç‰‡2çš„è·¯å¾„    :return: å¤„ç†åçš„å›¾ç‰‡1ä¸å›¾ç‰‡2    """</span>    <span class="token comment"># ================ å›¾ç‰‡åŠ è½½ ================</span>    img1 <span class="token operator">=</span> cv<span class="token punctuation">.</span>imread<span class="token punctuation">(</span>img1_path<span class="token punctuation">)</span>    img2 <span class="token operator">=</span> cv<span class="token punctuation">.</span>imread<span class="token punctuation">(</span>img2_path<span class="token punctuation">)</span>    <span class="token comment"># ================ åˆ†è¾¨ç‡è°ƒæ•´ ================</span>    rate <span class="token operator">=</span> <span class="token number">600</span> <span class="token operator">/</span> img1<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>    img1 <span class="token operator">=</span> cv<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>rate <span class="token operator">*</span> img1<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>rate <span class="token operator">*</span> img1<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    img2 <span class="token operator">=</span> cv<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>img2<span class="token punctuation">,</span> <span class="token punctuation">(</span>img1<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> img1<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># FIXME:</span>    <span class="token comment">#  - ä½¿ç”¨è¾¹ç•Œå¡«å……ï¼šç‰¹å¾ç‚¹åŒ¹é…çš„ç»“æœå›¾å¸¦æœ‰å¾ˆå¤§çš„é»‘åŸŸ</span>    <span class="token comment">#  - ä¸ä½¿ç”¨è¾¹ç•Œå¡«å……ï¼šæœ€åå›¾åƒæ‹¼æ¥å’Œèåˆä¸æ–¹ä¾¿ï¼Œè¿˜æ˜¯éœ€è¦æ–°å»ºä¸€å¼ æ›´å¤§çš„å›¾æˆ–è€…æå‰ç®—å¥½å›¾çš„å¤§å°</span>    <span class="token comment"># ================ è¾¹ç•Œå¡«å…… ================</span>    top<span class="token punctuation">,</span> bot<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">250</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">,</span> <span class="token number">250</span>    img1 <span class="token operator">=</span> cv<span class="token punctuation">.</span>copyMakeBorder<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> top<span class="token punctuation">,</span> bot<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>BORDER_CONSTANT<span class="token punctuation">,</span> value<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    img2 <span class="token operator">=</span> cv<span class="token punctuation">.</span>copyMakeBorder<span class="token punctuation">(</span>img2<span class="token punctuation">,</span> top<span class="token punctuation">,</span> bot<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>BORDER_CONSTANT<span class="token punctuation">,</span> value<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> img1<span class="token punctuation">,</span> img2<span class="token comment"># 2.ç”¨siftç‰¹å¾æˆ–è€…ä»»æ„ä½ ç†Ÿæ‚‰çš„ç‰¹å¾è¿›è¡ŒåŒ¹é…ã€‚ï¼ˆé™„ç‰¹å¾ç‚¹å›¾ï¼‰</span><span class="token keyword">def</span> <span class="token function">match_feather_point</span><span class="token punctuation">(</span>img1<span class="token punctuation">,</span> img2<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    è®¡ç®—ç‰¹å¾ç‚¹å¹¶è¿›è¡ŒåŒ¹é…    :param img1: ç¬¬ä¸€å¼ å›¾ç‰‡    :param img2: ç¬¬äºŒå¼ å›¾ç‰‡    :return: åŒ¹é…çš„ç‰¹å¾ç‚¹    """</span>    <span class="token comment"># ================ è®¡ç®—SIFTç‰¹å¾ ================</span>    sift <span class="token operator">=</span> cv<span class="token punctuation">.</span>SIFT_create<span class="token punctuation">(</span><span class="token punctuation">)</span>    kp1<span class="token punctuation">,</span> des1 <span class="token operator">=</span> sift<span class="token punctuation">.</span>detectAndCompute<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>    kp2<span class="token punctuation">,</span> des2 <span class="token operator">=</span> sift<span class="token punctuation">.</span>detectAndCompute<span class="token punctuation">(</span>img2<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>    <span class="token comment"># ================ FLANNç‰¹å¾åŒ¹é… ================</span>    FLANN_INDEX_KDTREE <span class="token operator">=</span> <span class="token number">1</span>    index_params <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>algorithm<span class="token operator">=</span>FLANN_INDEX_KDTREE<span class="token punctuation">,</span> trees<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>    search_params <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>checks<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span>    flann <span class="token operator">=</span> cv<span class="token punctuation">.</span>FlannBasedMatcher<span class="token punctuation">(</span>index_params<span class="token punctuation">,</span> search_params<span class="token punctuation">)</span>    matches <span class="token operator">=</span> flann<span class="token punctuation">.</span>knnMatch<span class="token punctuation">(</span>des1<span class="token punctuation">,</span> des2<span class="token punctuation">,</span> k<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> kp1<span class="token punctuation">,</span> kp2<span class="token punctuation">,</span> matches<span class="token comment"># 3.ç”¨RANSACæ–¹æ³•å»é™¤è¯¯åŒ¹é…ç‚¹å¯¹ã€‚ï¼ˆé™„ç­›é™¤åçš„ç‰¹å¾ç‚¹å›¾ï¼‰</span><span class="token comment"># 4.ç»™å‡ºå˜æ¢çŸ©é˜µï¼ˆä»¿å°„æ¨¡å‹æˆ–æŠ•å°„æ¨¡å‹éƒ½å¯ä»¥ï¼Œéœ€æ³¨æ˜ï¼‰ï¼Œå¹¶ä¸”è¿›è¡Œå›¾åƒé…å‡†ï¼Œå®Œæˆæ‹¼æ¥ï¼ˆå‰å‘æ˜ å°„æˆ–åå‘æ˜ å°„éƒ½å¯ä»¥ï¼Œéœ€æ³¨æ˜ï¼‰ï¼Œç»™å‡ºæ‹¼æ¥åçš„å›¾åƒã€‚</span><span class="token keyword">def</span> <span class="token function">get_good_match</span><span class="token punctuation">(</span>img1<span class="token punctuation">,</span> img2<span class="token punctuation">,</span> kp1<span class="token punctuation">,</span> kp2<span class="token punctuation">,</span> matches<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    æå–å¥½çš„åŒ¹é…ç‚¹å¯¹ã€è®¡ç®—å˜æ¢çŸ©é˜µå¹¶æ‹¼æ¥å›¾åƒ    :param img1: ç¬¬ä¸€å¼ å›¾ç‰‡    :param img2: ç¬¬äºŒå¼ å›¾ç‰‡    :param kp1: ç¬¬ä¸€å¼ å›¾ç‰‡ç‰¹å¾ç‚¹    :param kp2: ç¬¬äºŒå¼ å›¾ç‰‡ç‰¹å¾ç‚¹    :param matches: åŒ¹é…ç»“æœ    :return: ç¬¬ä¸€å¼ å›¾ç‰‡ï¼Œé…å‡†çš„ç¬¬äºŒå¼ å›¾ç‰‡ï¼ŒåŒ¹é…ç»“æœï¼Œæ‹¼æ¥å›¾ç‰‡ï¼Œå˜æ¢çŸ©é˜µ    """</span>    <span class="token comment"># TODO ä½¿ç”¨RANSACæ–¹æ³•å»é™¤é”™è¯¯åŒ¹é…ç‚¹å¯¹</span>    matches_mask <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>matches<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    good_match <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> i<span class="token punctuation">,</span> <span class="token punctuation">(</span>m<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>matches<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> m<span class="token punctuation">.</span>distance <span class="token operator">&lt;</span> <span class="token number">0.5</span> <span class="token operator">*</span> n<span class="token punctuation">.</span>distance<span class="token punctuation">:</span>            good_match<span class="token punctuation">.</span>append<span class="token punctuation">(</span>m<span class="token punctuation">)</span>            matches_mask<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>    <span class="token comment"># ================ ç”»å‡ºåŒ¹é…ç»“æœå›¾ ================</span>    <span class="token comment"># # ã€€è¿™æ˜¯æ²¡å»é™¤çš„éƒ¨åˆ†</span>    <span class="token comment"># draw_params = dict(matchColor=(0, 255, 0),</span>    <span class="token comment">#                    singlePointColor=(255, 0, 0),</span>    <span class="token comment">#                    matchesMask=None,</span>    <span class="token comment">#                    flags=0)</span>    <span class="token comment"># img3 = cv.drawMatchesKnn(img1, kp1, img2, kp2, matches, None, **draw_params)</span>    <span class="token comment"># cv.imshow("test", img3)</span>    <span class="token comment"># è¿™æ˜¯å»é™¤åçš„éƒ¨åˆ†</span>    draw_params <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>matchColor<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                       singlePointColor<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                       matchesMask<span class="token operator">=</span>matches_mask<span class="token punctuation">,</span>                       flags<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>    img3 <span class="token operator">=</span> cv<span class="token punctuation">.</span>drawMatchesKnn<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> kp1<span class="token punctuation">,</span> img2<span class="token punctuation">,</span> kp2<span class="token punctuation">,</span> matches<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">**</span>draw_params<span class="token punctuation">)</span>    <span class="token comment"># ================ å›¾åƒé…å‡†ï¼Œå¯¹ç¬¬äºŒå¹…å›¾åƒè¿›è¡Œå˜æ¢ ================</span>    MIN_MATCH_COUNT <span class="token operator">=</span> <span class="token number">10</span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>good_match<span class="token punctuation">)</span> <span class="token operator">&lt;</span> MIN_MATCH_COUNT<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Not enough matches are found - {}/{}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>good_match<span class="token punctuation">)</span><span class="token punctuation">,</span> MIN_MATCH_COUNT<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token boolean">None</span>    src_pts <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span><span class="token punctuation">[</span>kp1<span class="token punctuation">[</span>m<span class="token punctuation">.</span>queryIdx<span class="token punctuation">]</span><span class="token punctuation">.</span>pt <span class="token keyword">for</span> m <span class="token keyword">in</span> good_match<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>    dst_pts <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span><span class="token punctuation">[</span>kp2<span class="token punctuation">[</span>m<span class="token punctuation">.</span>trainIdx<span class="token punctuation">]</span><span class="token punctuation">.</span>pt <span class="token keyword">for</span> m <span class="token keyword">in</span> good_match<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>    M<span class="token punctuation">,</span> mask <span class="token operator">=</span> cv<span class="token punctuation">.</span>findHomography<span class="token punctuation">(</span>src_pts<span class="token punctuation">,</span> dst_pts<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>RANSAC<span class="token punctuation">,</span> <span class="token number">5.0</span><span class="token punctuation">)</span>    img2 <span class="token operator">=</span> cv<span class="token punctuation">.</span>warpPerspective<span class="token punctuation">(</span>img2<span class="token punctuation">,</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>M<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>img2<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> img2<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                              flags<span class="token operator">=</span>cv<span class="token punctuation">.</span>WARP_INVERSE_MAP<span class="token punctuation">)</span>    <span class="token comment"># ================ å›¾åƒæ‹¼æ¥ï¼ˆæ‹·è´æ‹¼æ¥ï¼Œæ•ˆæœä¸å¥½ï¼‰ ================</span>    dst <span class="token operator">=</span> img1<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>img2<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>img2<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            pix <span class="token operator">=</span> img2<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span>            <span class="token keyword">if</span> pix<span class="token punctuation">.</span><span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                dst<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> pix    <span class="token keyword">return</span> img1<span class="token punctuation">,</span> img2<span class="token punctuation">,</span> img3<span class="token punctuation">,</span> dst<span class="token punctuation">,</span> M<span class="token comment"># 5.å¯¹æ‹¼æ¥åçš„å›¾åƒè¿›è¡Œèåˆï¼ˆä»»æ„ä½ å–œæ¬¢çš„èåˆæ–¹æ³•ï¼‰ï¼Œé™„èåˆåçš„å›¾åƒã€‚</span><span class="token keyword">def</span> <span class="token function">blend_image</span><span class="token punctuation">(</span>src_img<span class="token punctuation">,</span> warp_img<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    å›¾åƒèåˆ    :param src_img: ç¬¬ä¸€å¼ å›¾ç‰‡    :param warp_img:  ç¬¬äºŒå¼ å›¾ç‰‡    :return:  èåˆåçš„å›¾ç‰‡    """</span>    <span class="token comment"># ================ åŸºæœ¬å˜é‡å®šä¹‰ ================</span>    rows<span class="token punctuation">,</span> cols <span class="token operator">=</span> src_img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>    result <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">[</span>rows<span class="token punctuation">,</span> cols<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>    left <span class="token operator">=</span> <span class="token number">0</span>    right <span class="token operator">=</span> <span class="token number">0</span>    up <span class="token operator">=</span> <span class="token number">0</span>    down <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment"># ================ æ‰¾åˆ°å·¦å³é‡å åŒºåŸŸ ================</span>    <span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> cols<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> src_img<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> col<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">and</span> warp_img<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> col<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            left <span class="token operator">=</span> col            <span class="token keyword">break</span>    <span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>cols <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> src_img<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> col<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">and</span> warp_img<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> col<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            right <span class="token operator">=</span> col            <span class="token keyword">break</span>    <span class="token comment"># ================ æ‰¾åˆ°ä¸Šä¸‹é‡å åŒºåŸŸ ================</span>    <span class="token comment"># for row in range(0, rows):</span>    <span class="token comment">#     if src_img[row, :].any() and warp_img[row, :].any():</span>    <span class="token comment">#         up = row</span>    <span class="token comment">#         break</span>    <span class="token comment"># for row in range(rows - 1, 0, -1):</span>    <span class="token comment">#     if src_img[row, :].any() and warp_img[row, :].any():</span>    <span class="token comment">#         down = row</span>    <span class="token comment">#         break</span>    <span class="token comment"># ================ æ ¹æ®æƒé‡è¿›è¡Œå›¾åƒèåˆ ================</span>    <span class="token comment"># FIXME:</span>    <span class="token comment">#  - æ ¹æ®å·¦å³é‡å åŒºåŸŸè¿›è¡Œèåˆä¼šå¯¼è‡´å›¾ç‰‡ä¸­æœ‰æ¨ªå‘çš„æ‹¼æ¥ç—•è¿¹</span>    <span class="token comment">#  - åˆ©ç”¨ä¸Šä¸‹ä¸å·¦å³é‡å çš„åŒºåŸŸè¿›è¡Œç®€å•èåˆçš„æ•ˆæœå¹¶ä¸å¥½ï¼Œéœ€è¦ä¸€äº›åˆ«çš„åŠæ³•</span>    <span class="token keyword">for</span> row <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> rows<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> col <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> cols<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> src_img<span class="token punctuation">[</span>row<span class="token punctuation">,</span> col<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># srcä¸å­˜åœ¨</span>                result<span class="token punctuation">[</span>row<span class="token punctuation">,</span> col<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> warp_img<span class="token punctuation">[</span>row<span class="token punctuation">,</span> col<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>            <span class="token keyword">elif</span> <span class="token keyword">not</span> warp_img<span class="token punctuation">[</span>row<span class="token punctuation">,</span> col<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># warp_img ä¸å­˜åœ¨</span>                result<span class="token punctuation">[</span>row<span class="token punctuation">,</span> col<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> src_img<span class="token punctuation">[</span>row<span class="token punctuation">,</span> col<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># src å’Œwarpéƒ½å­˜åœ¨ï¼Œå°±æ˜¯äº¤å‰åŒºåŸŸ</span>                src_len <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span><span class="token builtin">abs</span><span class="token punctuation">(</span>col <span class="token operator">-</span> left<span class="token punctuation">)</span><span class="token punctuation">)</span>                test_len <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span><span class="token builtin">abs</span><span class="token punctuation">(</span>col <span class="token operator">-</span> right<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token comment"># src_width = float(abs(row - down))</span>                <span class="token comment"># test_width = float(abs(row - up))</span>                alpha_1 <span class="token operator">=</span> src_len <span class="token operator">/</span> <span class="token punctuation">(</span>src_len <span class="token operator">+</span> test_len<span class="token punctuation">)</span>                <span class="token comment"># alpha_2 = src_width / (src_width + test_width)</span>                result<span class="token punctuation">[</span>row<span class="token punctuation">,</span> col<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> src_img<span class="token punctuation">[</span>row<span class="token punctuation">,</span> col<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">*</span> alpha_1 <span class="token operator">+</span> \                                      warp_img<span class="token punctuation">[</span>row<span class="token punctuation">,</span> col<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> alpha_1<span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token keyword">def</span> <span class="token function">main_process</span><span class="token punctuation">(</span>path1<span class="token operator">=</span><span class="token string">'./images/testA_1.jpg'</span><span class="token punctuation">,</span> path2<span class="token operator">=</span><span class="token string">'./images/testA_2.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">""""""</span>    <span class="token comment"># ================ åŠ è½½å›¾ç‰‡ ================</span>    src_img<span class="token punctuation">,</span> warp_img <span class="token operator">=</span> load_image<span class="token punctuation">(</span>path1<span class="token punctuation">,</span> path2<span class="token punctuation">)</span>    <span class="token comment"># ================ ç‰¹å¾ç‚¹è®¡ç®—ä¸åŒ¹é… ================</span>    start <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    kp1<span class="token punctuation">,</span> kp2<span class="token punctuation">,</span> matches <span class="token operator">=</span> match_feather_point<span class="token punctuation">(</span>src_img<span class="token punctuation">,</span> warp_img<span class="token punctuation">)</span>    end <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'ç‰¹å¾ç‚¹è®¡ç®—ä»¥åŠåŒ¹é…çš„æ—¶é—´ï¼š'</span><span class="token punctuation">,</span> end <span class="token operator">-</span> start<span class="token punctuation">)</span>    <span class="token comment"># ================ å»é™¤è¯¯åŒ¹é…ç‚¹ã€è®¡ç®—å˜æ¢çŸ©é˜µå¹¶è¿›è¡Œæ‹¼æ¥ ================</span>    start <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    img1<span class="token punctuation">,</span> img2<span class="token punctuation">,</span> img3<span class="token punctuation">,</span> dst<span class="token punctuation">,</span> M <span class="token operator">=</span> get_good_match<span class="token punctuation">(</span>src_img<span class="token punctuation">,</span> warp_img<span class="token punctuation">,</span> kp1<span class="token punctuation">,</span> kp2<span class="token punctuation">,</span> matches<span class="token punctuation">)</span>    end <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'å»é™¤è¯¯åŒ¹é…ç‚¹ã€è®¡ç®—å˜æ¢çŸ©é˜µå¹¶è¿›è¡Œæ‹¼æ¥çš„æ—¶é—´ï¼š'</span><span class="token punctuation">,</span> end <span class="token operator">-</span> start<span class="token punctuation">)</span>    <span class="token comment"># ================ å›¾åƒèåˆ ================</span>    start <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    res <span class="token operator">=</span> blend_image<span class="token punctuation">(</span>img1<span class="token punctuation">,</span> img2<span class="token punctuation">)</span>    end <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'å›¾åƒèåˆæ—¶é—´ï¼š'</span><span class="token punctuation">,</span> end <span class="token operator">-</span> start<span class="token punctuation">)</span>    <span class="token comment"># ================ æ‰“å°æœ€åçš„ç»“æœ ================</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å˜æ¢çŸ©é˜µ"</span><span class="token punctuation">,</span> M<span class="token punctuation">)</span>    cv<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">"splicing"</span><span class="token punctuation">,</span> dst<span class="token punctuation">)</span>    cv<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">"sift_match"</span><span class="token punctuation">,</span> img3<span class="token punctuation">)</span>    cv<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">"blend_result"</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> cv<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">27</span><span class="token punctuation">:</span>            <span class="token keyword">break</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    path1 <span class="token operator">=</span> <span class="token string">"./images/testD_2.jpg"</span>    path2 <span class="token operator">=</span> <span class="token string">"./images/testX_1.jpg"</span>    main_process<span class="token punctuation">(</span>path1<span class="token punctuation">,</span> path2<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenCV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆäºŒï¼‰ï¼špthreadçš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="2021/12/05/cpp-notes-4/"/>
      <url>2021/12/05/cpp-notes-4/</url>
      
        <content type="html"><![CDATA[<h1 id="C-å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆäºŒï¼‰ï¼špthreadçš„åŸºæœ¬ä½¿ç”¨"><a href="#C-å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆäºŒï¼‰ï¼špthreadçš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="C++ å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆäºŒï¼‰ï¼špthreadçš„åŸºæœ¬ä½¿ç”¨"></a>C++ å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆäºŒï¼‰ï¼špthreadçš„åŸºæœ¬ä½¿ç”¨</h1><p>åœ¨C++å¼€å‘ä¸­ï¼ŒåŸç”Ÿçš„çº¿ç¨‹åº“ä¸»è¦æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯C++11æä¾›çš„&lt;thread&gt;(std::threadç±»)ï¼Œå¦ä¸€ä¸ªæ˜¯Linuxä¸‹çš„&lt;pthread.h&gt;(p_threadç±»)ï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç»pthreadçš„åŸºæœ¬ä½¿ç”¨æ–¹å¼ï¼Œçº¿ç¨‹åŸºç¡€çŸ¥è¯†å’Œstd::threadçš„ä½¿ç”¨åœ¨<a href="https://immortalqx.github.io/2021/12/04/cpp-notes-3/">ä¸Šä¸€ç¯‡åšå®¢</a>ä¸­å·²ç»æœ‰è¿‡ä»‹ç»ã€‚</p><h2 id="pthreadç®€ä»‹"><a href="#pthreadç®€ä»‹" class="headerlink" title="pthreadç®€ä»‹"></a>pthreadç®€ä»‹</h2><p>pthreadä¸­çš„pæ˜¯POSIXçš„ç¼©å†™ï¼Œè€ŒPOSIXæ˜¯Portable Operating System Interfaceçš„ç¼©å†™ï¼Œæ˜¯IEEEä¸ºè¦åœ¨å„ç§UNIXæ“ä½œç³»ç»Ÿä¸Šè¿è¡Œè½¯ä»¶ï¼Œè€Œå®šä¹‰APIçš„ä¸€ç³»åˆ—äº’ç›¸å…³è”çš„æ ‡å‡†çš„æ€»ç§°ã€‚ï¼ˆWindowsç¯å¢ƒä¸‹æ— pthreadï¼ŒLinux GCC4.6ä»¥ä¸‹ç¼–è¯‘éœ€åŠ -pthreadç¼–è¯‘é€‰é¡¹ï¼‰</p><p><strong>ä¸std::threadå¯¹æ¯”ï¼š</strong></p><p>std::threadæ˜¯C++11ä¸­çš„æ–°ç‰¹æ€§ï¼Œå°†å¤šçº¿ç¨‹ç¨‹åºçš„ç¼–å†™æå‡åˆ°äº†è¯­è¨€å±‚é¢ï¼Œä½¿å¾—ç¼–å†™çš„å¤šçº¿ç¨‹ç¨‹åºçš„å¯ç§»æ¤æ€§å¤§å¤§æé«˜ã€‚</p><p>å¯¹äºŒè€…ç‰¹æ€§å¯¹æ¯”ï¼Œç”¨ä¸€å¥è¯ç®€å•æ¦‚æ‹¬å°±æ˜¯ï¼š<strong>std::threadæ›´åŠ ç®€ä¾¿æ˜“ç”¨ï¼Œè€ŒpthreadåŠŸèƒ½æ›´åŠ å¼ºå¤§ã€‚</strong></p><h2 id="çº¿ç¨‹çš„åˆ›å»ºå’Œç®¡ç†"><a href="#çº¿ç¨‹çš„åˆ›å»ºå’Œç®¡ç†" class="headerlink" title="çº¿ç¨‹çš„åˆ›å»ºå’Œç®¡ç†"></a>çº¿ç¨‹çš„åˆ›å»ºå’Œç®¡ç†</h2><p>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªåœ¨è¿›ç¨‹ä¸­å”¯ä¸€çš„çº¿ç¨‹æ ‡è¯†ç¬¦ï¼Œç”¨ä¸€ä¸ªæ•°æ®ç±»å‹ pthread_t è¡¨ç¤ºï¼Œè¯¥æ•°æ®ç±»å‹åœ¨ Linux ä¸­å°±æ˜¯ä¸€ä¸ªæ— ç¬¦å·é•¿æ•´å‹æ•°æ®ã€‚</p><h3 id="åˆ›å»ºæ–°çš„çº¿ç¨‹"><a href="#åˆ›å»ºæ–°çš„çº¿ç¨‹" class="headerlink" title="åˆ›å»ºæ–°çš„çº¿ç¨‹"></a>åˆ›å»ºæ–°çš„çº¿ç¨‹</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_create</span> <span class="token punctuation">(</span><span class="token class-name">pthread_t</span> <span class="token operator">*</span>thread<span class="token punctuation">,</span><span class="token class-name">pthread_attr_t</span> <span class="token operator">*</span>attr<span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span>start_routine<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è‹¥åˆ›å»ºæˆåŠŸï¼Œè¿”å›0ï¼›è‹¥å‡ºé”™ï¼Œåˆ™è¿”å›é”™è¯¯ç¼–å·ã€‚</p><ul><li>thread æ˜¯çº¿ç¨‹æ ‡è¯†ç¬¦ï¼Œä½†è¿™ä¸ªå‚æ•°ä¸æ˜¯ç”±ç”¨æˆ·æŒ‡å®šçš„ï¼Œè€Œæ˜¯ç”± pthread_create å‡½æ•°åœ¨åˆ›å»ºæ—¶å°†æ–°çš„çº¿ç¨‹çš„æ ‡è¯†ç¬¦æ”¾åˆ°è¿™ä¸ªå˜é‡ä¸­ã€‚</li><li>attr æŒ‡å®šçº¿ç¨‹çš„å±æ€§ï¼Œå¯ä»¥ç”¨ NULL è¡¨ç¤ºé»˜è®¤å±æ€§ã€‚</li><li>start_routine æŒ‡å®šçº¿ç¨‹å¼€å§‹è¿è¡Œçš„å‡½æ•°ã€‚</li><li>arg æ˜¯ start_routine æ‰€éœ€è¦çš„å‚æ•°ï¼Œæ˜¯ä¸€ä¸ªæ— ç±»å‹æŒ‡é’ˆã€‚</li></ul><p>é»˜è®¤åœ°ï¼Œçº¿ç¨‹åœ¨è¢«åˆ›å»ºæ—¶è¦è¢«èµ‹äºˆä¸€å®šçš„å±æ€§ï¼Œè¿™ä¸ªå±æ€§å­˜æ”¾åœ¨æ•°æ®ç±»å‹ pthread_attr_t ä¸­ï¼Œå®ƒåŒ…å«äº†çº¿ç¨‹çš„è°ƒåº¦ç­–ç•¥ï¼Œå †æ ˆçš„ç›¸å…³ä¿¡æ¯ï¼Œjoin or detach çš„çŠ¶æ€ç­‰ã€‚</p><p>pthread_attr_init å’Œ pthread_attr_destroy å‡½æ•°åˆ†åˆ«ç”¨æ¥åˆ›å»ºå’Œé”€æ¯ pthread_attr_tï¼Œå…·ä½“å‡½æ•°å£°æ˜å¯å‚è€ƒmanå¸®åŠ©ã€‚</p><h3 id="ç»“æŸçº¿ç¨‹"><a href="#ç»“æŸçº¿ç¨‹" class="headerlink" title="ç»“æŸçº¿ç¨‹"></a>ç»“æŸçº¿ç¨‹</h3><p>å½“å‘ç”Ÿä»¥ä¸‹æƒ…å½¢ä¹‹ä¸€æ—¶ï¼Œçº¿ç¨‹å°±ä¼šç»“æŸï¼š</p><ul><li>çº¿ç¨‹è¿è¡Œçš„å‡½æ•°returnäº†ï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹çš„ä»»åŠ¡å·²ç»å®Œæˆï¼›</li><li>çº¿ç¨‹è°ƒç”¨äº† pthread_exit å‡½æ•°ï¼›</li><li>å…¶ä»–çº¿ç¨‹è°ƒç”¨ pthread_cancel ç»“æŸè¿™ä¸ªçº¿ç¨‹ï¼›</li><li>è¿›ç¨‹è°ƒç”¨ exec() æˆ– exit()ï¼Œç»“æŸäº†ï¼›</li><li>main() å‡½æ•°å…ˆç»“æŸäº†ï¼Œè€Œä¸” main() è‡ªå·±æ²¡æœ‰è°ƒç”¨ pthread_exit æ¥ç­‰æ‰€æœ‰çº¿ç¨‹å®Œæˆä»»åŠ¡ã€‚</li></ul><p>å½“ç„¶ï¼Œä¸€ä¸ªçº¿ç¨‹ç»“æŸï¼Œå¹¶ä¸æ„å‘³ç€å®ƒçš„æ‰€æœ‰ä¿¡æ¯éƒ½å·²ç»æ¶ˆå¤±ï¼Œåé¢ä¼šçœ‹åˆ°åƒµå°¸çº¿ç¨‹çš„é—®é¢˜ã€‚</p><p>ä¸‹é¢ä»‹ç»è¿™ä¸¤ä¸ªå‡½æ•°ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">pthread_exit</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>retval<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>retval æ˜¯ç”±ç”¨æˆ·æŒ‡å®šçš„å‚æ•°ï¼Œ pthread_exit å®Œæˆä¹‹åå¯ä»¥é€šè¿‡è¿™ä¸ªå‚æ•°è·å¾—çº¿ç¨‹çš„é€€å‡ºçŠ¶æ€ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_cancel</span> <span class="token punctuation">(</span><span class="token class-name">pthread_t</span> thread<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸€ä¸ªçº¿ç¨‹å¯ä»¥é€šè¿‡è°ƒç”¨ pthread_cancel å‡½æ•°æ¥è¯·æ±‚å–æ¶ˆåŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹ç”±thread å‚æ•°æŒ‡å®šã€‚</p><p>å¦‚æœæ“ä½œæˆåŠŸåˆ™è¿”å›0ï¼Œå¤±è´¥åˆ™è¿”å›å¯¹åº”çš„é”™è¯¯ç¼–å·ã€‚</p><h3 id="ä¸€ä¸ªç®€å•çš„å¤šçº¿ç¨‹å®ç°"><a href="#ä¸€ä¸ªç®€å•çš„å¤šçº¿ç¨‹å®ç°" class="headerlink" title="ä¸€ä¸ªç®€å•çš„å¤šçº¿ç¨‹å®ç°"></a>ä¸€ä¸ªç®€å•çš„å¤šçº¿ç¨‹å®ç°</h3><p>è¿™é‡Œæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„åŸºäºpthreadçš„å¤šçº¿ç¨‹å®ç°ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NUM_THREADS</span>    <span class="token expression"><span class="token number">5</span></span></span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">PrintHello</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>threadid<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">long</span> tid<span class="token punctuation">;</span>    tid <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> threadid<span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello World! It's me, thread #%ld!\n"</span><span class="token punctuation">,</span> tid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token class-name">pthread_t</span> threads<span class="token punctuation">[</span>NUM_THREADS<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> rc<span class="token punctuation">;</span>    <span class="token keyword">long</span> t<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> t <span class="token operator">&lt;</span> NUM_THREADS<span class="token punctuation">;</span> t<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"In main: creating thread %ld\n"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>        rc <span class="token operator">=</span> <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>threads<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> PrintHello<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>rc<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ERROR; return code from pthread_create() is %d\n"</span><span class="token punctuation">,</span> rc<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">/* Last thing that main() should do */</span>    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥åœ¨ç»ˆç«¯é€šè¿‡ä¸‹é¢çš„å‘½ä»¤ç¼–è¯‘æ‰§è¡Œï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">gcc <span class="token parameter variable">-Wall</span> hello.c <span class="token parameter variable">-lpthread</span> <span class="token parameter variable">-o</span> hello./hello<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¾“å‡ºçš„ç»“æœä¸ºï¼š</p><pre class="line-numbers language-none"><code class="language-none">In main: creating thread 0In main: creating thread 1Hello World! It's me, thread #0!In main: creating thread 2Hello World! It's me, thread #1!In main: creating thread 3Hello World! It's me, thread #2!In main: creating thread 4Hello World! It's me, thread #3!Hello World! It's me, thread #4!<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„è¾“å‡ºçš„é¡ºåºå¯èƒ½ä¸åŒï¼Œ è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œ main() æ˜¾ç¤ºåœ°è°ƒç”¨äº† pthread_exit() æ¥ç­‰å¾…å…¶ä»–çº¿ç¨‹çš„ç»“æŸã€‚ï¼ˆå¦‚æœä¸ä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„è¯ï¼Œå¯èƒ½main()å‡½æ•°ç»“æŸäº†ä¹Ÿæœ‰çº¿ç¨‹æ²¡æœ‰æ‰§è¡Œå®Œæ¯•ï¼ï¼‰</p><h3 id="ç»™çº¿ç¨‹ä¼ å…¥åˆå§‹åŒ–å‚æ•°"><a href="#ç»™çº¿ç¨‹ä¼ å…¥åˆå§‹åŒ–å‚æ•°" class="headerlink" title="ç»™çº¿ç¨‹ä¼ å…¥åˆå§‹åŒ–å‚æ•°"></a>ç»™çº¿ç¨‹ä¼ å…¥åˆå§‹åŒ–å‚æ•°</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NUM_THREADS</span>    <span class="token expression"><span class="token number">8</span></span></span><span class="token keyword">char</span> <span class="token operator">*</span>messages<span class="token punctuation">[</span>NUM_THREADS<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">struct</span> <span class="token class-name">thread_data</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> thread_id<span class="token punctuation">;</span>    <span class="token keyword">int</span> sum<span class="token punctuation">;</span>    <span class="token keyword">char</span> <span class="token operator">*</span>message<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">struct</span> <span class="token class-name">thread_data</span> thread_data_array<span class="token punctuation">[</span>NUM_THREADS<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">PrintHello</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>threadarg<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> taskid<span class="token punctuation">,</span> sum<span class="token punctuation">;</span>    <span class="token keyword">char</span> <span class="token operator">*</span>hello_msg<span class="token punctuation">;</span>    <span class="token keyword">struct</span> <span class="token class-name">thread_data</span> <span class="token operator">*</span>my_data<span class="token punctuation">;</span>    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    my_data <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">thread_data</span> <span class="token operator">*</span><span class="token punctuation">)</span> threadarg<span class="token punctuation">;</span>    taskid <span class="token operator">=</span> my_data<span class="token operator">-&gt;</span>thread_id<span class="token punctuation">;</span>    sum <span class="token operator">=</span> my_data<span class="token operator">-&gt;</span>sum<span class="token punctuation">;</span>    hello_msg <span class="token operator">=</span> my_data<span class="token operator">-&gt;</span>message<span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %d: %s  Sum=%d\n"</span><span class="token punctuation">,</span> taskid<span class="token punctuation">,</span> hello_msg<span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token class-name">pthread_t</span> threads<span class="token punctuation">[</span>NUM_THREADS<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token operator">*</span>taskids<span class="token punctuation">[</span>NUM_THREADS<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> rc<span class="token punctuation">,</span> t<span class="token punctuation">,</span> sum<span class="token punctuation">;</span>    sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    messages<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"English: Hello World!"</span><span class="token punctuation">;</span>    messages<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"French: Bonjour, le monde!"</span><span class="token punctuation">;</span>    messages<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Spanish: Hola al mundo"</span><span class="token punctuation">;</span>    messages<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Klingon: Nuq neH!"</span><span class="token punctuation">;</span>    messages<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"German: Guten Tag, Welt!"</span><span class="token punctuation">;</span>    messages<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Russian: Zdravstvytye, mir!"</span><span class="token punctuation">;</span>    messages<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Japan: Sekai e konnichiwa!"</span><span class="token punctuation">;</span>    messages<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Latin: Orbis, te saluto!"</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> t <span class="token operator">&lt;</span> NUM_THREADS<span class="token punctuation">;</span> t<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        sum <span class="token operator">=</span> sum <span class="token operator">+</span> t<span class="token punctuation">;</span>        thread_data_array<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>thread_id <span class="token operator">=</span> t<span class="token punctuation">;</span>        thread_data_array<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>sum <span class="token operator">=</span> sum<span class="token punctuation">;</span>        thread_data_array<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>message <span class="token operator">=</span> messages<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Creating thread %d\n"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>        rc <span class="token operator">=</span> <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>threads<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> PrintHello<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span>                <span class="token operator">&amp;</span>thread_data_array<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>rc<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ERROR; return code from pthread_create() is %d\n"</span><span class="token punctuation">,</span> rc<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class="line-numbers language-none"><code class="language-none">Creating thread 0Creating thread 1Creating thread 2Creating thread 3Creating thread 4Creating thread 5Creating thread 6Creating thread 7Thread 4: German: Guten Tag, Welt!  Sum=10Thread 5: Russian: Zdravstvytye, mir!  Sum=15Thread 7: Latin: Orbis, te saluto!  Sum=28Thread 2: Spanish: Hola al mundo  Sum=3Thread 6: Japan: Sekai e konnichiwa!  Sum=21Thread 3: Klingon: Nuq neH!  Sum=6Thread 0: English: Hello World!  Sum=0Thread 1: French: Bonjour, le monde!  Sum=1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¯¹çº¿ç¨‹çš„é˜»å¡ï¼ˆJoining-and-Detaching-Threadsï¼‰"><a href="#å¯¹çº¿ç¨‹çš„é˜»å¡ï¼ˆJoining-and-Detaching-Threadsï¼‰" class="headerlink" title="å¯¹çº¿ç¨‹çš„é˜»å¡ï¼ˆJoining and Detaching Threadsï¼‰"></a>å¯¹çº¿ç¨‹çš„é˜»å¡ï¼ˆJoining and Detaching Threadsï¼‰</h3><p>é˜»å¡æ˜¯çº¿ç¨‹ä¹‹é—´åŒæ­¥çš„ä¸€ç§æ–¹æ³•ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">pthread_join</span><span class="token punctuation">(</span><span class="token class-name">pthread_t</span> threadid<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span><span class="token operator">*</span>value_ptr<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>pthread_join å‡½æ•°ä¼šè®©è°ƒç”¨å®ƒçš„çº¿ç¨‹ç­‰å¾… threadid çº¿ç¨‹è¿è¡Œç»“æŸä¹‹åå†è¿è¡Œã€‚</p><p>value_ptr å­˜æ”¾äº†å…¶ä»–çº¿ç¨‹çš„è¿”å›å€¼ã€‚</p><p>ä¸€ä¸ªå¯ä»¥è¢«joinçš„çº¿ç¨‹ï¼Œä»…ä»…å¯ä»¥è¢«åˆ«çš„ä¸€ä¸ªçº¿ç¨‹ joinï¼Œå¦‚æœåŒæ—¶æœ‰å¤šä¸ªçº¿ç¨‹å°è¯• join åŒä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œæœ€ç»ˆç»“æœæ˜¯æœªçŸ¥çš„ã€‚å¦å¤–ï¼Œçº¿ç¨‹ä¸èƒ½ join è‡ªå·±ã€‚</p><p>ä¸Šé¢æåˆ°è¿‡ï¼Œåˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œè¦èµ‹äºˆå®ƒä¸€å®šçš„å±æ€§ï¼Œè¿™å…¶ä¸­å°±åŒ…æ‹¬joinable or detachable çš„å±æ€§ï¼Œåªæœ‰è¢«å£°æ˜æˆjoinableçš„çº¿ç¨‹ï¼Œå¯ä»¥è¢«å…¶ä»–çº¿ç¨‹joinã€‚</p><p>POSIXæ ‡å‡†çš„æœ€ç»ˆç‰ˆæœ¬æŒ‡å‡ºçº¿ç¨‹åº”è¯¥è¢«è®¾ç½®æˆjoinableçš„ã€‚æ˜¾å¼åœ°è®¾ç½®ä¸€ä¸ªçº¿ç¨‹ä¸ºjoinableï¼Œéœ€è¦ä»¥ä¸‹å››ä¸ªæ­¥éª¤ï¼š</p><ul><li>Declare a pthread attribute variable of the pthread_attr_t data type</li><li>Initialize the attribute variable with pthread_attr_init()</li><li>Set the attribute detached status with pthread_attr_setdetachstate()</li><li>When done, free library resources used by the attribute with pthread_attr_destroy()</li></ul><p>å€¼å¾—æ³¨æ„çš„çš„æ˜¯ï¼šåƒµå°¸çº¿ç¨‹ ( â€œzombieâ€ thread )æ˜¯ä¸€ç§å·²ç»é€€å‡ºäº†çš„ joinable çš„çº¿ç¨‹ï¼Œä½†æ˜¯ç­‰å¾…å…¶ä»–çº¿ç¨‹è°ƒç”¨ pthread_join æ¥ join å®ƒï¼Œä»¥æ”¶é›†å®ƒçš„é€€å‡ºä¿¡æ¯(exit status)ã€‚å¦‚æœæ²¡æœ‰å…¶ä»–çº¿ç¨‹è°ƒç”¨ pthread_join æ¥ join å®ƒçš„è¯ï¼Œå®ƒå ç”¨çš„ä¸€äº›ç³»ç»Ÿèµ„æºä¸ä¼šè¢«é‡Šæ”¾ï¼Œæ¯”å¦‚å †æ ˆã€‚å¦‚æœmain()å‡½æ•°éœ€è¦é•¿æ—¶é—´è¿è¡Œï¼Œå¹¶ä¸”åˆ›å»ºå¤§é‡ joinable çš„çº¿ç¨‹ï¼Œå°±æœ‰å¯èƒ½å‡ºç°å †æ ˆä¸è¶³çš„ error ã€‚</p><p>å¯¹äºé‚£äº›ä¸éœ€è¦ join çš„çº¿ç¨‹ï¼Œæœ€å¥½åˆ©ç”¨ pthread_detachï¼Œè¿™æ ·å®ƒè¿è¡Œç»“æŸåï¼Œèµ„æºå°±ä¼šåŠæ—¶å¾—åˆ°é‡Šæ”¾ã€‚æ³¨æ„ä¸€ä¸ªçº¿ç¨‹è¢«ä½¿ç”¨ pthread_detach ä¹‹åï¼Œå®ƒå°±ä¸èƒ½å†è¢«æ”¹æˆ joinable çš„äº†ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œåˆ›å»ºçš„æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½åº”è¯¥ä½¿ç”¨ pthread_join æˆ–è€… pthread_detach å…¶ä¸­ä¸€ä¸ªï¼Œä»¥é˜²æ­¢åƒµå°¸çº¿ç¨‹çš„å‡ºç°ã€‚</p><p>ç›¸å…³å‡½æ•°ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">pthread_detach</span> <span class="token punctuation">(</span>threadid<span class="token punctuation">)</span><span class="token function">pthread_attr_setdetachstate</span> <span class="token punctuation">(</span>attr<span class="token punctuation">,</span>detachstate<span class="token punctuation">)</span><span class="token function">pthread_attr_getdetachstate</span> <span class="token punctuation">(</span>attr<span class="token punctuation">,</span>detachstate<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="æ˜¾å¼åœ°è®¾ç½®ä¸€ä¸ªçº¿ç¨‹ä¸º-joinable"><a href="#æ˜¾å¼åœ°è®¾ç½®ä¸€ä¸ªçº¿ç¨‹ä¸º-joinable" class="headerlink" title="æ˜¾å¼åœ°è®¾ç½®ä¸€ä¸ªçº¿ç¨‹ä¸º joinable"></a>æ˜¾å¼åœ°è®¾ç½®ä¸€ä¸ªçº¿ç¨‹ä¸º joinable</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;math.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NUM_THREADS</span> <span class="token expression"><span class="token number">4</span></span></span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">BusyWork</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>t<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> i<span class="token punctuation">;</span>    <span class="token keyword">long</span> tid<span class="token punctuation">;</span>    <span class="token keyword">double</span> result <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>    tid <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> t<span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %ld starting...\n"</span><span class="token punctuation">,</span> tid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        result <span class="token operator">=</span> result <span class="token operator">+</span> <span class="token function">sin</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">tan</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %ld done. Result = %e\n"</span><span class="token punctuation">,</span> tid<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token class-name">pthread_t</span> thread<span class="token punctuation">[</span>NUM_THREADS<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token class-name">pthread_attr_t</span> attr<span class="token punctuation">;</span>    <span class="token keyword">int</span> rc<span class="token punctuation">;</span>    <span class="token keyword">long</span> t<span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token operator">*</span>status<span class="token punctuation">;</span><span class="token comment">/* Initialize and set thread detached attribute */</span>    <span class="token function">pthread_attr_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_attr_setdetachstate</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> PTHREAD_CREATE_JOINABLE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> t <span class="token operator">&lt;</span> NUM_THREADS<span class="token punctuation">;</span> t<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Main: creating thread %ld\n"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>        rc <span class="token operator">=</span> <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>thread<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> BusyWork<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>rc<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ERROR; return code from pthread_create() is %d\n"</span><span class="token punctuation">,</span> rc<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token comment">/* Free attribute and wait for the other threads */</span>    <span class="token function">pthread_attr_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> t <span class="token operator">&lt;</span> NUM_THREADS<span class="token punctuation">;</span> t<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        rc <span class="token operator">=</span> <span class="token function">pthread_join</span><span class="token punctuation">(</span>thread<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>rc<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ERROR; return code from pthread_join() is %d\n"</span><span class="token punctuation">,</span> rc<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Main: completed join with thread %ld having a status of %ld\n"</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Main: program completed. Exiting.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class="line-numbers language-none"><code class="language-none">Main: creating thread 0Main: creating thread 1Thread 0 starting...Thread 1 starting...Thread 0 done. Result = 3.135632e+06Main: completed join with thread 0 having a status of 0Thread 1 done. Result = 3.135632e+06Main: completed join with thread 1 having a status of 1Main: program completed. Exiting.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å †æ ˆç®¡ç†-ï¼ˆStack-Managementï¼‰"><a href="#å †æ ˆç®¡ç†-ï¼ˆStack-Managementï¼‰" class="headerlink" title="å †æ ˆç®¡ç† ï¼ˆStack Managementï¼‰"></a>å †æ ˆç®¡ç† ï¼ˆStack Managementï¼‰</h3><p>ç›¸å…³å‡½æ•°ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">pthread_attr_getstacksize</span> <span class="token punctuation">(</span>attr<span class="token punctuation">,</span> stacksize<span class="token punctuation">)</span><span class="token function">pthread_attr_setstacksize</span> <span class="token punctuation">(</span>attr<span class="token punctuation">,</span> stacksize<span class="token punctuation">)</span><span class="token function">pthread_attr_getstackaddr</span> <span class="token punctuation">(</span>attr<span class="token punctuation">,</span> stackaddr<span class="token punctuation">)</span><span class="token function">pthread_attr_setstackaddr</span> <span class="token punctuation">(</span>attr<span class="token punctuation">,</span> stackaddr<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>POSIXæ ‡å‡†æ²¡æœ‰è§„å®šä¸€ä¸ªçº¿ç¨‹çš„å †æ ˆå¤§å°ã€‚å®‰å…¨å¯ç§»æ¤çš„ç¨‹åºä¸ä¼šä¾èµ–äºå…·ä½“å®ç°é»˜è®¤çš„å †æ ˆé™åˆ¶ï¼Œè€Œæ˜¯æ˜¾å¼åœ°è°ƒç”¨ pthread_attr_setstacksize æ¥åˆ†é…è¶³å¤Ÿçš„å †æ ˆç©ºé—´ã€‚</p><h4 id="å…³äºå †æ ˆå¤§å°çš„ä¸€ä¸ªä¾‹å­"><a href="#å…³äºå †æ ˆå¤§å°çš„ä¸€ä¸ªä¾‹å­" class="headerlink" title="å…³äºå †æ ˆå¤§å°çš„ä¸€ä¸ªä¾‹å­"></a>å…³äºå †æ ˆå¤§å°çš„ä¸€ä¸ªä¾‹å­</h4><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NTHREADS</span> <span class="token expression"><span class="token number">4</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">N</span> <span class="token expression"><span class="token number">1000</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MEGEXTRA</span> <span class="token expression"><span class="token number">1000000</span></span></span><span class="token class-name">pthread_attr_t</span> attr<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">dowork</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>threadid<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">double</span> A<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span>    <span class="token keyword">long</span> tid<span class="token punctuation">;</span>    <span class="token class-name">size_t</span> mystacksize<span class="token punctuation">;</span>    tid <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> threadid<span class="token punctuation">;</span>    <span class="token function">pthread_attr_getstacksize</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> <span class="token operator">&amp;</span>mystacksize<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %ld: stack size = %li bytes \n"</span><span class="token punctuation">,</span> tid<span class="token punctuation">,</span> mystacksize<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>            A<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">*</span> j<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3.452</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>N <span class="token operator">-</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token class-name">pthread_t</span> threads<span class="token punctuation">[</span>NTHREADS<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token class-name">size_t</span> stacksize<span class="token punctuation">;</span>    <span class="token keyword">int</span> rc<span class="token punctuation">;</span>    <span class="token keyword">long</span> t<span class="token punctuation">;</span>    <span class="token function">pthread_attr_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_attr_getstacksize</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> <span class="token operator">&amp;</span>stacksize<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Default stack size = %li\n"</span><span class="token punctuation">,</span> stacksize<span class="token punctuation">)</span><span class="token punctuation">;</span>    stacksize <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> <span class="token operator">*</span> N <span class="token operator">*</span> N <span class="token operator">+</span> MEGEXTRA<span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Amount of stack needed per thread = %li\n"</span><span class="token punctuation">,</span> stacksize<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_attr_setstacksize</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> stacksize<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Creating threads with stack size = %li bytes\n"</span><span class="token punctuation">,</span> stacksize<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> t <span class="token operator">&lt;</span> NTHREADS<span class="token punctuation">;</span> t<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        rc <span class="token operator">=</span> <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>threads<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> dowork<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>rc<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ERROR; return code from pthread_create() is %d\n"</span><span class="token punctuation">,</span> rc<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Created %ld threads.\n"</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class="line-numbers language-none"><code class="language-none">Default stack size = 8388608Amount of stack needed per thread = 9000000Creating threads with stack size = 9000000 bytesThread 2: stack size = 9000000 bytes Created 4 threads.Thread 1: stack size = 9000000 bytes Thread 0: stack size = 9000000 bytes Thread 3: stack size = 9000000 bytes <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å…¶ä»–é‡è¦å‡½æ•°"><a href="#å…¶ä»–é‡è¦å‡½æ•°" class="headerlink" title="å…¶ä»–é‡è¦å‡½æ•°"></a>å…¶ä»–é‡è¦å‡½æ•°</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">pthread_self</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pthread_equal</span> <span class="token punctuation">(</span>thread1<span class="token punctuation">,</span>thread2<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è°ƒç”¨pthread_self å¯ä»¥è¿”å›å®ƒçš„ thread IDã€‚</p><p>pthread_equal æ¯”è¾ƒä¸¤ä¸ªçº¿ç¨‹çš„ IDï¼Œå¦‚æœä¸åŒåˆ™è¿”å›0ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªéé›¶å€¼ã€‚</p><h2 id="äº’æ–¥é”-Mutex"><a href="#äº’æ–¥é”-Mutex" class="headerlink" title="äº’æ–¥é” Mutex"></a>äº’æ–¥é” Mutex</h2><p>Mutex å¸¸å¸¸è¢«ç”¨æ¥ä¿æŠ¤é‚£äº›å¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®çš„å…±äº«èµ„æºï¼Œæ¯”å¦‚å¯ä»¥é˜²æ­¢å¤šä¸ªçº¿ç¨‹åŒæ—¶æ›´æ–°åŒä¸€ä¸ªæ•°æ®æ—¶å‡ºç°æ··ä¹±ã€‚</p><p>ä½¿ç”¨äº’æ–¥é”çš„ä¸€èˆ¬æ­¥éª¤æ˜¯ï¼š</p><ul><li>åˆ›å»ºä¸€ä¸ªäº’æ–¥é”ï¼Œå³å£°æ˜ä¸€ä¸ªpthread_mutex_tç±»å‹çš„æ•°æ®ï¼Œç„¶ååˆå§‹åŒ–ï¼Œåªæœ‰åˆå§‹åŒ–ä¹‹åæ‰èƒ½ä½¿ç”¨ï¼›</li><li>å¤šä¸ªçº¿ç¨‹å°è¯•é”å®šè¿™ä¸ªäº’æ–¥é”ï¼›</li><li>åªæœ‰ä¸€ä¸ªæˆåŠŸé”å®šäº’æ–¥é”ï¼Œæˆä¸ºäº’æ–¥é”çš„æ‹¥æœ‰è€…ï¼Œç„¶åè¿›è¡Œä¸€äº›æŒ‡ä»¤ï¼›</li><li>æ‹¥æœ‰è€…è§£é”äº’æ–¥é”ï¼›</li><li>å…¶ä»–çº¿ç¨‹å°è¯•é”å®šè¿™ä¸ªäº’æ–¥é”ï¼Œé‡å¤ä¸Šé¢çš„è¿‡ç¨‹ï¼›</li><li>æœ€åäº’æ–¥é”è¢«æ˜¾å¼åœ°è°ƒç”¨ pthread_mutex_destroy æ¥è¿›è¡Œé”€æ¯ã€‚</li></ul><p>æœ‰ä¸¤ç§æ–¹å¼åˆå§‹åŒ–ä¸€ä¸ªäº’æ–¥é”ï¼š</p><p>ç¬¬ä¸€ç§ï¼Œåˆ©ç”¨å·²ç»å®šä¹‰çš„å¸¸é‡åˆå§‹åŒ–ï¼Œä¾‹å¦‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token class-name">pthread_mutex_t</span> mymutex <span class="token operator">=</span> PTHREAD_MUTEX_INITIALIZER<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¬¬äºŒç§æ–¹å¼æ˜¯è°ƒç”¨ pthread_mutex_init (mutex,attr) è¿›è¡Œåˆå§‹åŒ–ã€‚</p><p>å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶å»é”å®šåŒä¸€ä¸ªäº’æ–¥é”æ—¶ï¼Œå¤±è´¥çš„é‚£äº›çº¿ç¨‹ï¼Œå¦‚æœæ˜¯ç”¨ pthread_mutex_lock å‡½æ•°ï¼Œé‚£ä¹ˆä¼šè¢«é˜»å¡ï¼Œç›´åˆ°è¿™ä¸ªäº’æ–¥é”è¢«è§£é”ï¼Œå®ƒä»¬å†ç»§ç»­ç«äº‰ï¼›å¦‚æœæ˜¯ç”¨ pthread_mutex_trylock å‡½æ•°ï¼Œé‚£ä¹ˆå¤±è´¥è€…åªä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</p><p>æœ€åéœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œä¿æŠ¤å…±äº«æ•°æ®æ˜¯ç¨‹åºå‘˜çš„è´£ä»»ã€‚ç¨‹åºå‘˜è¦è´Ÿè´£æ‰€æœ‰å¯ä»¥è®¿é—®è¯¥æ•°æ®çš„çº¿ç¨‹éƒ½ä½¿ç”¨mutexè¿™ç§æœºåˆ¶ï¼Œå¦åˆ™ï¼Œä¸ä½¿ç”¨ mutex çš„çº¿ç¨‹è¿˜æ˜¯æœ‰å¯èƒ½å¯¹æ•°æ®é€ æˆç ´åã€‚</p><p>ç›¸å…³å‡½æ•° (å…·ä½“å£°æ˜å¯ä»¥ç”¨ man æŸ¥çœ‹ )</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">pthread_mutex_init</span> <span class="token punctuation">(</span>mutex<span class="token punctuation">,</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pthread_mutex_destroy</span> <span class="token punctuation">(</span><span class="token class-name">pthread_mutex_t</span> <span class="token operator">*</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pthread_mutexattr_init</span> <span class="token punctuation">(</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pthread_mutexattr_destroy</span> <span class="token punctuation">(</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">phtread_mutex_lock</span><span class="token punctuation">(</span><span class="token class-name">pthread_mutex_t</span> <span class="token operator">*</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">phtread_mutex_trylock</span><span class="token punctuation">(</span><span class="token class-name">pthread_mutex_t</span> <span class="token operator">*</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">phtread_mutex_unlock</span><span class="token punctuation">(</span><span class="token class-name">pthread_mutex_t</span> <span class="token operator">*</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ©ç”¨å¤šçº¿ç¨‹è¿›è¡Œå‘é‡ç‚¹ä¹˜çš„ç¨‹åºï¼Œå…¶ä¸­éœ€è¦å¯¹ dotstr.sum è¿™ä¸ªå…±åŒè¯»å†™çš„æ•°æ®è¿›è¡Œä¿æŠ¤ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span><span class="token comment">/*   The following structure contains the necessary information  to allow the function "dotprod" to access its input data and place its output into the structure.  This structure is unchanged from the sequential version.*/</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span><span class="token punctuation">{</span>    <span class="token keyword">double</span> <span class="token operator">*</span>a<span class="token punctuation">;</span>    <span class="token keyword">double</span> <span class="token operator">*</span>b<span class="token punctuation">;</span>    <span class="token keyword">double</span> sum<span class="token punctuation">;</span>    <span class="token keyword">int</span> veclen<span class="token punctuation">;</span><span class="token punctuation">}</span> DOTDATA<span class="token punctuation">;</span><span class="token comment">/* Define globally accessible variables and a mutex */</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NUMTHRDS</span> <span class="token expression"><span class="token number">4</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">VECLEN</span> <span class="token expression"><span class="token number">100000</span></span></span>DOTDATA dotstr<span class="token punctuation">;</span><span class="token class-name">pthread_t</span> callThd<span class="token punctuation">[</span>NUMTHRDS<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token class-name">pthread_mutex_t</span> mutexsum<span class="token punctuation">;</span><span class="token comment">/*The function dotprod is activated when the thread is created.As before, all input to this routine is obtained from a structure of type DOTDATA and all output from this function is written intothis structure. The benefit of this approach is apparent for the multi-threaded program: when a thread is created we pass a singleargument to the activated function - typically this argumentis a thread number. All  the other information required by the function is accessed from the globally accessible structure. */</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">dotprod</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>arg<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">/* Define and use local variables for convenience */</span>    <span class="token keyword">int</span> i<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">,</span> len<span class="token punctuation">;</span>    <span class="token keyword">long</span> offset<span class="token punctuation">;</span>    <span class="token keyword">double</span> mysum<span class="token punctuation">,</span> <span class="token operator">*</span>x<span class="token punctuation">,</span> <span class="token operator">*</span>y<span class="token punctuation">;</span>    offset <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> arg<span class="token punctuation">;</span>    len <span class="token operator">=</span> dotstr<span class="token punctuation">.</span>veclen<span class="token punctuation">;</span>    start <span class="token operator">=</span> offset <span class="token operator">*</span> len<span class="token punctuation">;</span>    end <span class="token operator">=</span> start <span class="token operator">+</span> len<span class="token punctuation">;</span>    x <span class="token operator">=</span> dotstr<span class="token punctuation">.</span>a<span class="token punctuation">;</span>    y <span class="token operator">=</span> dotstr<span class="token punctuation">.</span>b<span class="token punctuation">;</span><span class="token comment">/*Perform the dot product and assign resultto the appropriate variable in the structure. */</span>    mysum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        mysum <span class="token operator">+=</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token comment">/*Lock a mutex prior to updating the value in the sharedstructure, and unlock it upon updating.*/</span>    <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutexsum<span class="token punctuation">)</span><span class="token punctuation">;</span>    dotstr<span class="token punctuation">.</span>sum <span class="token operator">+=</span> mysum<span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Thread %ld did %d to %d: mysum=%f global sum=%f\n"</span><span class="token punctuation">,</span> offset<span class="token punctuation">,</span> start<span class="token punctuation">,</span>           end<span class="token punctuation">,</span> mysum<span class="token punctuation">,</span> dotstr<span class="token punctuation">.</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutexsum<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">/* The main program creates threads which do all the work and then print out result upon completion. Before creating the threads, The input data is created. Since all threads update a shared structure, we need a mutex for mutual exclusion. The main thread needs to wait for all threads to complete, it waits for each one of the threads. We specify a thread attribute value that allow the main thread tojoin with the threads it creates. Note also that we free up handles  when theyare no longer needed.*/</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">long</span> i<span class="token punctuation">;</span>    <span class="token keyword">double</span> <span class="token operator">*</span>a<span class="token punctuation">,</span> <span class="token operator">*</span>b<span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token operator">*</span>status<span class="token punctuation">;</span>    <span class="token class-name">pthread_attr_t</span> attr<span class="token punctuation">;</span><span class="token comment">/* Assign storage and initialize values */</span>    a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">double</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token function">malloc</span><span class="token punctuation">(</span>NUMTHRDS <span class="token operator">*</span> VECLEN <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    b <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">double</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token function">malloc</span><span class="token punctuation">(</span>NUMTHRDS <span class="token operator">*</span> VECLEN <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> VECLEN <span class="token operator">*</span> NUMTHRDS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        b<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    dotstr<span class="token punctuation">.</span>veclen <span class="token operator">=</span> VECLEN<span class="token punctuation">;</span>    dotstr<span class="token punctuation">.</span>a <span class="token operator">=</span> a<span class="token punctuation">;</span>    dotstr<span class="token punctuation">.</span>b <span class="token operator">=</span> b<span class="token punctuation">;</span>    dotstr<span class="token punctuation">.</span>sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token function">pthread_mutex_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutexsum<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/* Create threads to perform the dotproduct  */</span>    <span class="token function">pthread_attr_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_attr_setdetachstate</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> PTHREAD_CREATE_JOINABLE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUMTHRDS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token comment">/* Each thread works on a different set of data.         * The offset is specified by 'i'. The size of         * the data for each thread is indicated by VECLEN.         */</span>        <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>callThd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> dotprod<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">pthread_attr_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/* Wait on the other threads */</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUMTHRDS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">pthread_join</span><span class="token punctuation">(</span>callThd<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token comment">/* After joining, print out the results and cleanup */</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Sum =  %f \n"</span><span class="token punctuation">,</span> dotstr<span class="token punctuation">.</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">free</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">free</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_mutex_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mutexsum<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">Thread <span class="token number">0</span> did <span class="token number">0</span> to <span class="token number">100000</span><span class="token operator">:</span>  mysum<span class="token operator">=</span><span class="token number">100000.000000</span> global sum<span class="token operator">=</span><span class="token number">100000.000000</span>Thread <span class="token number">1</span> did <span class="token number">100000</span> to <span class="token number">200000</span><span class="token operator">:</span>  mysum<span class="token operator">=</span><span class="token number">100000.000000</span> global sum<span class="token operator">=</span><span class="token number">200000.000000</span>Thread <span class="token number">2</span> did <span class="token number">200000</span> to <span class="token number">300000</span><span class="token operator">:</span>  mysum<span class="token operator">=</span><span class="token number">100000.000000</span> global sum<span class="token operator">=</span><span class="token number">300000.000000</span>Thread <span class="token number">3</span> did <span class="token number">300000</span> to <span class="token number">400000</span><span class="token operator">:</span>  mysum<span class="token operator">=</span><span class="token number">100000.000000</span> global sum<span class="token operator">=</span><span class="token number">400000.000000</span>Sum <span class="token operator">=</span>  <span class="token number">400000.000000</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ¡ä»¶å˜é‡-Condition-Variable"><a href="#æ¡ä»¶å˜é‡-Condition-Variable" class="headerlink" title="æ¡ä»¶å˜é‡ Condition Variable"></a>æ¡ä»¶å˜é‡ Condition Variable</h2><p>äº’æ–¥é”åªæœ‰ä¸¤ç§çŠ¶æ€ï¼Œè¿™é™åˆ¶äº†å®ƒçš„ç”¨é€”. æ¡ä»¶å˜é‡å…è®¸çº¿ç¨‹åœ¨é˜»å¡çš„æ—¶å€™ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹å‘é€çš„ä¿¡å·ï¼Œå½“æ”¶åˆ°ä¿¡å·åï¼Œé˜»å¡çš„çº¿ç¨‹å°±è¢«å”¤é†’å¹¶è¯•å›¾é”å®šä¸ä¹‹ç›¸å…³çš„äº’æ–¥é”. æ¡ä»¶å˜é‡è¦å’Œäº’æ–¥é”ç»“åˆä½¿ç”¨ã€‚</p><h3 id="æ¡ä»¶å˜é‡çš„å£°æ˜å’Œåˆå§‹åŒ–"><a href="#æ¡ä»¶å˜é‡çš„å£°æ˜å’Œåˆå§‹åŒ–" class="headerlink" title="æ¡ä»¶å˜é‡çš„å£°æ˜å’Œåˆå§‹åŒ–"></a>æ¡ä»¶å˜é‡çš„å£°æ˜å’Œåˆå§‹åŒ–</h3><p>é€šè¿‡å£°æ˜ pthread_cond_t ç±»å‹çš„æ•°æ®,å¹¶ä¸”å¿…é¡»å…ˆåˆå§‹åŒ–æ‰èƒ½ä½¿ç”¨ã€‚</p><p>åˆå§‹åŒ–çš„æ–¹æ³•ä¹Ÿæœ‰ä¸¤ç§ï¼š</p><p>ç¬¬ä¸€ç§ï¼Œåˆ©ç”¨å†…éƒ¨å®šä¹‰çš„å¸¸é‡ï¼Œä¾‹å¦‚ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token class-name">pthread_cond_t</span> myconvar <span class="token operator">=</span> PTHREAD_COND_INITIALIZER<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¬¬äºŒç§ï¼Œåˆ©ç”¨å‡½æ•° pthread_cond_init(cond,attr)ï¼Œå…¶ä¸­ attr ç”± pthread_condattr_init() å’Œ pthread_condattr_destroy() åˆ›å»ºå’Œé”€æ¯ã€‚</p><p>å¯ä»¥ç”¨ pthread_cond_destroy() é”€æ¯ä¸€ä¸ªæ¡ä»¶å˜é‡ã€‚</p><p>ç›¸å…³å‡½æ•°ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">pthread_cond_wait</span> <span class="token punctuation">(</span>condition<span class="token punctuation">,</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pthread_cond_signal</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pthread_cond_broadcast</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>pthread_cond_wait() ä¼šé˜»å¡è°ƒç”¨å®ƒçš„çº¿ç¨‹ï¼Œç›´åˆ°æ”¶åˆ°æŸä¸€ä¿¡å·ã€‚è¿™ä¸ªå‡½æ•°éœ€è¦åœ¨ mutex å·²ç»è¢«é”ä¹‹åè¿›è¡Œè°ƒç”¨ï¼Œå¹¶ä¸”å½“çº¿ç¨‹è¢«é˜»å¡æ—¶ï¼Œä¼šè‡ªåŠ¨è§£é” mutexã€‚ä¿¡å·æ”¶åˆ°åï¼Œçº¿ç¨‹è¢«å”¤é†’ï¼Œè¿™æ—¶ mutex åˆä¼šè¢«è¿™ä¸ªçº¿ç¨‹é”å®šã€‚</p><p>pthread_cond_signal() å‡½æ•°ç»“æŸæ—¶ï¼Œå¿…é¡»è§£é” mutexï¼Œä»¥ä¾› pthread_cond_wait() é”å®šmutexã€‚</p><p>å½“ä¸æ­¢ä¸€ä¸ªçº¿ç¨‹åœ¨ç­‰å¾…ä¿¡å·æ—¶ï¼Œè¦ç”¨ pthread_cond_broadcast() ä»£æ›¿ pthread_cond_signal() æ¥å‘Šè¯‰æ‰€æœ‰è¢«è¯¥æ¡ä»¶å˜é‡é˜»å¡çš„çº¿ç¨‹ç»“æŸé˜»å¡çŠ¶æ€ã€‚</p><h4 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œä¸‰ä¸ªçº¿ç¨‹å…±åŒè®¿é—® count å˜é‡ï¼Œthread 2 å’Œ thread 3 ç«äº‰åœ°å¯¹å…¶è¿›è¡ŒåŠ  1 çš„æ“ä½œï¼Œthread 1 ç­‰ count è¾¾åˆ° 12 çš„æ—¶å€™ï¼Œä¸€æ¬¡æ€§åŠ  125 ã€‚ ç„¶å thread 2 å’Œ thread 3 å†å»ç«äº‰ count çš„æ§åˆ¶æƒï¼Œç›´åˆ°å®Œæˆè‡ªå·±çš„å¯¹ count åŠ  10 æ¬¡çš„ä»»åŠ¡ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pthread.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NUM_THREADS</span>  <span class="token expression"><span class="token number">3</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">TCOUNT</span> <span class="token expression"><span class="token number">10</span></span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">COUNT_LIMIT</span> <span class="token expression"><span class="token number">12</span></span></span><span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token class-name">pthread_mutex_t</span> count_mutex<span class="token punctuation">;</span><span class="token class-name">pthread_cond_t</span> count_threshold_cv<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">inc_count</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>t<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> i<span class="token punctuation">;</span>    <span class="token keyword">long</span> my_id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> t<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> TCOUNT<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>        count<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token comment">/*         Check the value of count and signal waiting thread when condition is        reached.  Note that this occurs while mutex is locked.         */</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">==</span> COUNT_LIMIT<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"inc_count(): thread %ld, count = %d  Threshold reached. "</span><span class="token punctuation">,</span>                   my_id<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">pthread_cond_signal</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count_threshold_cv<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Just sent signal.\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"inc_count(): thread %ld, count = %d, unlocking mutex\n"</span><span class="token punctuation">,</span>               my_id<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">/* Do some work so threads can alternate on mutex lock */</span>        <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">watch_count</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>t<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">long</span> my_id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> t<span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Starting watch_count(): thread %ld\n"</span><span class="token punctuation">,</span> my_id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/*    Lock mutex and wait for signal.  Note that the pthread_cond_wait routine    will automatically and atomically unlock mutex while it waits.     Also, note that if COUNT_LIMIT is reached before this routine is run by    the waiting thread, the loop will be skipped to prevent pthread_cond_wait    from never returning.    */</span>    <span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> COUNT_LIMIT<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"watch_count(): thread %ld Count= %d. Going into wait...\n"</span><span class="token punctuation">,</span> my_id<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">pthread_cond_wait</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count_threshold_cv<span class="token punctuation">,</span> <span class="token operator">&amp;</span>count_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"watch_count(): thread %ld Condition signal received. Count= %d\n"</span><span class="token punctuation">,</span> my_id<span class="token punctuation">,</span>               count<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"watch_count(): thread %ld Updating the value of count...\n"</span><span class="token punctuation">,</span> my_id<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>        count <span class="token operator">+=</span> <span class="token number">125</span><span class="token punctuation">;</span>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"watch_count(): thread %ld count now = %d.\n"</span><span class="token punctuation">,</span> my_id<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"watch_count(): thread %ld Unlocking mutex.\n"</span><span class="token punctuation">,</span> my_id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> i<span class="token punctuation">,</span> rc<span class="token punctuation">;</span>    <span class="token keyword">long</span> t1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> t2 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> t3 <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>    <span class="token class-name">pthread_t</span> threads<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token class-name">pthread_attr_t</span> attr<span class="token punctuation">;</span>    <span class="token comment">/* Initialize mutex and condition variable objects */</span>    <span class="token function">pthread_mutex_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count_mutex<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_cond_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count_threshold_cv<span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/* For portability, explicitly create threads in a joinable state */</span>    <span class="token function">pthread_attr_init</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_attr_setdetachstate</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> PTHREAD_CREATE_JOINABLE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>threads<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> watch_count<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span> t1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>threads<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> inc_count<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span> t2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>threads<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>attr<span class="token punctuation">,</span> inc_count<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span> t3<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/* Wait for all threads to complete */</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_THREADS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">pthread_join</span><span class="token punctuation">(</span>threads<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Main(): Waited and joined with %d threads. Final value of count = %d. Done.\n"</span><span class="token punctuation">,</span>           NUM_THREADS<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/* Clean up and exit */</span>    <span class="token function">pthread_attr_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_mutex_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_cond_destroy</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>count_threshold_cv<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">pthread_exit</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºç»“æœï¼š</p><pre class="line-numbers language-none"><code class="language-none">inc_count(): thread 3, count = 1, unlocking mutexinc_count(): thread 2, count = 2, unlocking mutexStarting watch_count(): thread 1watch_count(): thread 1 Count= 2. Going into wait...inc_count(): thread 3, count = 3, unlocking mutexinc_count(): thread 2, count = 4, unlocking mutexinc_count(): thread 3, count = 5, unlocking mutexinc_count(): thread 2, count = 6, unlocking mutexinc_count(): thread 3, count = 7, unlocking mutexinc_count(): thread 2, count = 8, unlocking mutexinc_count(): thread 3, count = 9, unlocking mutexinc_count(): thread 2, count = 10, unlocking mutexinc_count(): thread 3, count = 11, unlocking mutexinc_count(): thread 2, count = 12  Threshold reached. Just sent signal.inc_count(): thread 2, count = 12, unlocking mutexwatch_count(): thread 1 Condition signal received. Count= 12watch_count(): thread 1 Updating the value of count...watch_count(): thread 1 count now = 137.watch_count(): thread 1 Unlocking mutex.inc_count(): thread 3, count = 138, unlocking mutexinc_count(): thread 2, count = 139, unlocking mutexinc_count(): thread 3, count = 140, unlocking mutexinc_count(): thread 2, count = 141, unlocking mutexinc_count(): thread 3, count = 142, unlocking mutexinc_count(): thread 2, count = 143, unlocking mutexinc_count(): thread 3, count = 144, unlocking mutexinc_count(): thread 2, count = 145, unlocking mutexMain(): Waited and joined with 3 threads. Final value of count = 145. Done.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆä¸€ï¼‰ï¼šstd::threadçš„ä½¿ç”¨</title>
      <link href="2021/12/04/cpp-notes-3/"/>
      <url>2021/12/04/cpp-notes-3/</url>
      
        <content type="html"><![CDATA[<h1 id="C-å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆä¸€ï¼‰ï¼šstd-threadçš„ä½¿ç”¨"><a href="#C-å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆä¸€ï¼‰ï¼šstd-threadçš„ä½¿ç”¨" class="headerlink" title="C++ å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆä¸€ï¼‰ï¼šstd::threadçš„ä½¿ç”¨"></a>C++ å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆä¸€ï¼‰ï¼šstd::threadçš„ä½¿ç”¨</h1><h2 id="å¤šçº¿ç¨‹ç¼–ç¨‹ç®€ä»‹"><a href="#å¤šçº¿ç¨‹ç¼–ç¨‹ç®€ä»‹" class="headerlink" title="å¤šçº¿ç¨‹ç¼–ç¨‹ç®€ä»‹"></a>å¤šçº¿ç¨‹ç¼–ç¨‹ç®€ä»‹</h2><p>è¯´åˆ°å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œå°±ä¸å¾—ä¸æ<strong>å¹¶è¡Œ</strong>å’Œ<strong>å¹¶å‘</strong>ï¼Œå¤šçº¿ç¨‹æ˜¯å®ç°å¹¶å‘å’Œå¹¶è¡Œçš„ä¸€ç§æ‰‹æ®µã€‚</p><ul><li><p><strong>å¹¶è¡Œ</strong>æ˜¯æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªç‹¬ç«‹çš„æ“ä½œ<strong>åŒæ—¶è¿›è¡Œ</strong>ã€‚</p></li><li><p><strong>å¹¶å‘</strong>æ˜¯æŒ‡<strong>ä¸€ä¸ªæ—¶é—´æ®µå†…</strong>æ‰§è¡Œå¤šä¸ªæ“ä½œã€‚</p></li></ul><p>åœ¨å•æ ¸æ—¶ä»£ï¼Œå¤šä¸ªçº¿ç¨‹æ˜¯<strong>å¹¶å‘</strong>çš„ï¼Œåœ¨ä¸€ä¸ªæ—¶é—´æ®µå†…è½®æµæ‰§è¡Œï¼›åœ¨å¤šæ ¸æ—¶ä»£ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥å®ç°çœŸæ­£çš„<strong>å¹¶è¡Œ</strong>ï¼Œåœ¨å¤šæ ¸ä¸ŠçœŸæ­£ç‹¬ç«‹çš„å¹¶è¡Œæ‰§è¡Œã€‚ä¾‹å¦‚ç°åœ¨å¸¸è§çš„<strong>4æ ¸4çº¿ç¨‹</strong>å¯ä»¥å¹¶è¡Œ4ä¸ªçº¿ç¨‹ï¼›<strong>4æ ¸8çº¿ç¨‹</strong>åˆ™ä½¿ç”¨äº†è¶…çº¿ç¨‹æŠ€æœ¯ï¼ŒæŠŠä¸€ä¸ªç‰©ç†æ ¸æ¨¡æ‹Ÿä¸º2ä¸ªé€»è¾‘æ ¸å¿ƒï¼Œå¯ä»¥å¹¶è¡Œ8ä¸ªçº¿ç¨‹ã€‚</p><h3 id="å¹¶å‘ç¼–ç¨‹çš„æ–¹æ³•"><a href="#å¹¶å‘ç¼–ç¨‹çš„æ–¹æ³•" class="headerlink" title="å¹¶å‘ç¼–ç¨‹çš„æ–¹æ³•"></a>å¹¶å‘ç¼–ç¨‹çš„æ–¹æ³•</h3><p>é€šå¸¸ï¼Œè¦å®ç°å¹¶å‘æœ‰ä¸¤ç§æ–¹æ³•ï¼šå¤šè¿›ç¨‹å¹¶å‘å’Œå¤šçº¿ç¨‹å¹¶å‘ã€‚</p><h4 id="å¤šè¿›ç¨‹å¹¶å‘"><a href="#å¤šè¿›ç¨‹å¹¶å‘" class="headerlink" title="å¤šè¿›ç¨‹å¹¶å‘"></a>å¤šè¿›ç¨‹å¹¶å‘</h4><p>ä½¿ç”¨å¤šè¿›ç¨‹å¹¶å‘æ˜¯å°†ä¸€ä¸ªåº”ç”¨ç¨‹åºåˆ’åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼ˆæ¯ä¸ªè¿›ç¨‹åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼‰ï¼Œè¿™äº›ç‹¬ç«‹çš„è¿›ç¨‹é—´å¯ä»¥äº’ç›¸é€šä¿¡ï¼Œå…±åŒå®Œæˆä»»åŠ¡ã€‚</p><p>ç”±äºæ“ä½œç³»ç»Ÿå¯¹è¿›ç¨‹æä¾›äº†å¤§é‡çš„ä¿æŠ¤æœºåˆ¶ï¼Œä»¥é¿å…ä¸€ä¸ªè¿›ç¨‹ä¿®æ”¹äº†å¦ä¸€ä¸ªè¿›ç¨‹çš„æ•°æ®ï¼Œä½¿ç”¨å¤šè¿›ç¨‹æ¯”å¤šçº¿ç¨‹æ›´å®¹æ˜“å†™å‡º<strong>å®‰å…¨</strong>çš„ä»£ç ã€‚ä½†è¿™ä¹Ÿé€ å°±äº†å¤šè¿›ç¨‹å¹¶å‘çš„ä¸¤ä¸ªç¼ºç‚¹ï¼š</p><ul><li>åœ¨è¿›ç¨‹ä»¶çš„é€šä¿¡ï¼Œæ— è®ºæ˜¯ä½¿ç”¨ä¿¡å·ã€å¥—æ¥å­—ï¼Œè¿˜æ˜¯æ–‡ä»¶ã€ç®¡é“ç­‰æ–¹å¼ï¼Œå…¶ä½¿ç”¨è¦ä¹ˆæ¯”è¾ƒå¤æ‚ï¼Œè¦ä¹ˆå°±æ˜¯é€Ÿåº¦è¾ƒæ…¢æˆ–è€…ä¸¤è€…å…¼è€Œæœ‰ä¹‹ã€‚</li><li>è¿è¡Œå¤šä¸ªçº¿ç¨‹çš„å¼€é”€å¾ˆå¤§ï¼Œæ“ä½œç³»ç»Ÿè¦åˆ†é…å¾ˆå¤šçš„èµ„æºæ¥å¯¹è¿™äº›è¿›ç¨‹è¿›è¡Œç®¡ç†ã€‚</li></ul><p>ç”±äºå¤šä¸ªè¿›ç¨‹å¹¶å‘å®ŒæˆåŒä¸€ä¸ªä»»åŠ¡æ—¶ï¼Œä¸å¯é¿å…çš„æ˜¯ï¼šæ“ä½œåŒä¸€ä¸ªæ•°æ®å’Œè¿›ç¨‹é—´çš„ç›¸äº’é€šä¿¡ï¼Œä¸Šè¿°çš„ä¸¤ä¸ªç¼ºç‚¹ä¹Ÿå°±å†³å®šäº†å¤šè¿›ç¨‹çš„å¹¶å‘ä¸æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚</p><h4 id="å¤šçº¿ç¨‹å¹¶å‘"><a href="#å¤šçº¿ç¨‹å¹¶å‘" class="headerlink" title="å¤šçº¿ç¨‹å¹¶å‘"></a>å¤šçº¿ç¨‹å¹¶å‘</h4><p>å¤šçº¿ç¨‹å¹¶å‘æŒ‡çš„æ˜¯åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ã€‚</p><p>æœ‰æ“ä½œç³»ç»Ÿç›¸å…³çŸ¥è¯†çš„åº”è¯¥çŸ¥é“ï¼Œçº¿ç¨‹æ˜¯è½»é‡çº§çš„è¿›ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹å¯ä»¥ç‹¬ç«‹çš„è¿è¡Œä¸åŒçš„æŒ‡ä»¤åºåˆ—ï¼Œä½†æ˜¯çº¿ç¨‹ä¸ç‹¬ç«‹çš„æ‹¥æœ‰èµ„æºï¼Œä¾èµ–äºåˆ›å»ºå®ƒçš„è¿›ç¨‹è€Œå­˜åœ¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>åŒä¸€è¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹å…±äº«ç›¸åŒçš„åœ°å€ç©ºé—´ï¼Œå¯ä»¥è®¿é—®è¿›ç¨‹ä¸­çš„å¤§éƒ¨åˆ†æ•°æ®ï¼ŒæŒ‡é’ˆå’Œå¼•ç”¨å¯ä»¥åœ¨çº¿ç¨‹é—´è¿›è¡Œä¼ é€’</strong>ã€‚è¿™æ ·ï¼ŒåŒä¸€è¿›ç¨‹å†…çš„å¤šä¸ªçº¿ç¨‹èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„è¿›è¡Œæ•°æ®å…±äº«ä»¥åŠé€šä¿¡ï¼Œä¹Ÿå°±æ¯”è¿›ç¨‹æ›´é€‚ç”¨äºå¹¶å‘æ“ä½œã€‚</p><p>ç”±äºç¼ºå°‘æ“ä½œç³»ç»Ÿæä¾›çš„ä¿æŠ¤æœºåˆ¶ï¼Œåœ¨å¤šçº¿ç¨‹å…±äº«æ•°æ®åŠé€šä¿¡æ—¶ï¼Œå°±éœ€è¦ç¨‹åºå‘˜åšæ›´å¤šçš„å·¥ä½œä»¥ä¿è¯å¯¹å…±äº«æ•°æ®æ®µçš„æ“ä½œæ˜¯ä»¥é¢„æƒ³çš„æ“ä½œé¡ºåºè¿›è¡Œçš„ï¼Œå¹¶ä¸”è¦æåŠ›çš„é¿å…**æ­»é”(deadlock)**ã€‚</p><h2 id="std-threadç®€ä»‹"><a href="#std-threadç®€ä»‹" class="headerlink" title="std::threadç®€ä»‹"></a><code>std::thread</code>ç®€ä»‹</h2><p>C++11ä¹‹å‰ï¼Œwindowå’Œlinuxå¹³å°åˆ†åˆ«æœ‰å„è‡ªçš„å¤šçº¿ç¨‹æ ‡å‡†ï¼Œä½¿ç”¨C++ç¼–å†™çš„å¤šçº¿ç¨‹å¾€å¾€æ˜¯ä¾èµ–äºç‰¹å®šå¹³å°çš„ã€‚</p><ul><li>Windowå¹³å°æä¾›ç”¨äºå¤šçº¿ç¨‹åˆ›å»ºå’Œç®¡ç†çš„win32 apiï¼›</li><li>Linuxä¸‹åˆ™æœ‰POSIXå¤šçº¿ç¨‹æ ‡å‡†ï¼ŒThreadsæˆ–Pthreadsåº“æä¾›çš„APIå¯ä»¥åœ¨ç±»Unixä¸Šè¿è¡Œï¼›</li></ul><p>åœ¨C++11æ–°æ ‡å‡†ä¸­ï¼Œå¯ä»¥ç®€å•é€šè¿‡ä½¿ç”¨threadåº“ï¼Œæ¥ç®¡ç†å¤šçº¿ç¨‹ã€‚threadåº“å¯ä»¥çœ‹åšå¯¹ä¸åŒå¹³å°å¤šçº¿ç¨‹APIçš„ä¸€å±‚åŒ…è£…ï¼›å› æ­¤ä½¿ç”¨æ–°æ ‡å‡†æä¾›çš„çº¿ç¨‹åº“ç¼–å†™çš„ç¨‹åºæ˜¯è·¨å¹³å°çš„ã€‚</p><h2 id="ä¸€ä¸ªç®€å•çš„å¤šçº¿ç¨‹å®ç°"><a href="#ä¸€ä¸ªç®€å•çš„å¤šçº¿ç¨‹å®ç°" class="headerlink" title="ä¸€ä¸ªç®€å•çš„å¤šçº¿ç¨‹å®ç°"></a>ä¸€ä¸ªç®€å•çš„å¤šçº¿ç¨‹å®ç°</h2><p>C++11çš„æ ‡å‡†åº“ä¸­æä¾›äº†å¤šçº¿ç¨‹åº“ï¼Œä½¿ç”¨æ—¶éœ€è¦<code>#include &lt;thread&gt;</code>å¤´æ–‡ä»¶ï¼Œè¯¥å¤´æ–‡ä»¶ä¸»è¦åŒ…å«äº†å¯¹çº¿ç¨‹çš„ç®¡ç†ç±»<code>std::thread</code>ä»¥åŠå…¶ä»–ç®¡ç†çº¿ç¨‹ç›¸å…³çš„ç±»ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨C++å¤šçº¿ç¨‹åº“çš„ç®€å•ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;thread&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">output</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">uint8_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>thread <span class="token function">t</span><span class="token punctuation">(</span>output<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>t<span class="token punctuation">.</span><span class="token function">detach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ä¸€ä¸ªforå¾ªç¯å†…ï¼Œåˆ›å»º4ä¸ªçº¿ç¨‹åˆ†åˆ«è¾“å‡ºæ•°å­—0ã€1ã€2ã€3ï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªæ•°å­—çš„æœ«å°¾è¾“å‡ºæ¢è¡Œç¬¦ã€‚è¯­å¥<code>thread t(output, i)</code>åˆ›å»ºä¸€ä¸ªçº¿ç¨‹tï¼Œè¯¥çº¿ç¨‹è¿è¡Œ<code>output</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°iæ˜¯ä¼ é€’ç»™<code>output</code>çš„å‚æ•°ã€‚tåœ¨åˆ›å»ºå®Œæˆåè‡ªåŠ¨å¯åŠ¨ï¼Œ<code>t.detach</code>è¡¨ç¤ºè¯¥çº¿ç¨‹åœ¨åå°å…è®¸ï¼Œæ— éœ€ç­‰å¾…è¯¥çº¿ç¨‹å®Œæˆï¼Œç»§ç»­æ‰§è¡Œåé¢çš„è¯­å¥ã€‚è¿™æ®µä»£ç çš„åŠŸèƒ½æ˜¯å¾ˆç®€å•çš„ï¼Œå¦‚æœæ˜¯é¡ºåºæ‰§è¡Œçš„è¯ï¼Œå…¶ç»“æœå¾ˆå®¹æ˜“é¢„æµ‹å¾—åˆ°ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token number">0</span><span class="token number">1</span><span class="token number">2</span><span class="token number">3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä½†æ˜¯åœ¨å¹¶è¡Œå¤šçº¿ç¨‹ä¸‹ï¼Œå…¶æ‰§è¡Œçš„ç»“æœå°±å¤šç§å¤šæ ·äº†ï¼Œæ¯”å¦‚ä¸‹é¢å°±æ˜¯ä»£ç ä¸€æ¬¡è¿è¡Œçš„ç»“æœï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">01<span class="token number">2</span><span class="token number">3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™å°±æ¶‰åŠåˆ°å¤šçº¿ç¨‹ç¼–ç¨‹æœ€æ ¸å¿ƒçš„é—®é¢˜ï¼š<strong>èµ„æºç«äº‰</strong>ã€‚</p><p>å‡è®¾CPUæœ‰4æ ¸ï¼Œå¯ä»¥åŒæ—¶æ‰§è¡Œ4ä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯<strong>æ§åˆ¶å°å´åªæœ‰ä¸€ä¸ªï¼ŒåŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‹¥æœ‰è¿™ä¸ªå”¯ä¸€çš„æ§åˆ¶å°</strong>ï¼Œå°†æ•°å­—è¾“å‡ºã€‚å°†ä¸Šé¢ä»£ç åˆ›å»ºçš„å››ä¸ªçº¿ç¨‹è¿›è¡Œç¼–å·ï¼št0,t1,t2,t3ï¼Œåˆ†åˆ«è¾“å‡ºçš„æ•°å­—ï¼š0,1,2,3ã€‚å‚ç…§ä¸Šå›¾çš„æ‰§è¡Œç»“æœï¼Œæ§åˆ¶å°çš„æ‹¥æœ‰æƒçš„è½¬ç§»å¦‚ä¸‹ï¼š</p><ul><li>t0æ‹¥æœ‰æ§åˆ¶å°ï¼Œè¾“å‡ºäº†æ•°å­—0ï¼Œä½†æ˜¯å…¶æ²¡æœ‰æ¥çš„åŠè¾“å‡ºæ¢è¡Œç¬¦ï¼Œæ§åˆ¶çš„æ‹¥æœ‰æƒå´è½¬ç§»åˆ°äº†t1ï¼›ï¼ˆ0ï¼‰</li><li>t1å®Œæˆè‡ªå·±çš„è¾“å‡ºï¼Œt1çº¿ç¨‹å®Œæˆ ï¼ˆ1\nï¼‰</li><li>æ§åˆ¶å°æ‹¥æœ‰æƒè½¬ç§»ç»™t0ï¼Œè¾“å‡ºæ¢è¡Œç¬¦ ï¼ˆ\nï¼‰</li><li>t2æ‹¥æœ‰æ§åˆ¶å°ï¼Œå®Œæˆè¾“å‡º ï¼ˆ2\nï¼‰</li><li>t3æ‹¥æœ‰æ§åˆ¶å°ï¼Œå®Œæˆè¾“å‡º ï¼ˆ3\n)</li></ul><p>ç”±äºæ§åˆ¶å°æ˜¯ç³»ç»Ÿèµ„æºï¼Œè¿™é‡Œæ§åˆ¶å°æ‹¥æœ‰æƒçš„ç®¡ç†æ˜¯æ“ä½œç³»ç»Ÿå®Œæˆçš„ã€‚ä½†æ˜¯ï¼Œå‡å¦‚æ˜¯å¤šä¸ªçº¿ç¨‹å…±äº«è¿›ç¨‹ç©ºé—´çš„æ•°æ®ï¼Œè¿™å°±éœ€è¦è‡ªå·±å†™ä»£ç æ§åˆ¶ï¼Œæ¯ä¸ªçº¿ç¨‹ä½•æ—¶èƒ½å¤Ÿæ‹¥æœ‰å…±äº«æ•°æ®è¿›è¡Œæ“ä½œã€‚</p><p><strong>å…±äº«æ•°æ®çš„ç®¡ç†</strong>ä»¥åŠ<strong>çº¿ç¨‹é—´çš„é€šä¿¡</strong>ï¼Œæ˜¯å¤šçº¿ç¨‹ç¼–ç¨‹çš„ä¸¤å¤§æ ¸å¿ƒã€‚</p><h2 id="çº¿ç¨‹ç®¡ç†"><a href="#çº¿ç¨‹ç®¡ç†" class="headerlink" title="çº¿ç¨‹ç®¡ç†"></a>çº¿ç¨‹ç®¡ç†</h2><p>æ¯ä¸ªåº”ç”¨ç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œè€Œæ¯ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œé™¤äº†ä¸»çº¿ç¨‹å¤–ï¼Œåœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­è¿˜å¯ä»¥åˆ›å»ºå¤šä¸ªçº¿ç¨‹ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½éœ€è¦ä¸€ä¸ªå…¥å£å‡½æ•°ï¼Œå…¥å£å‡½æ•°è¿”å›é€€å‡ºï¼Œè¯¥çº¿ç¨‹ä¹Ÿä¼šé€€å‡ºï¼Œä¸»çº¿ç¨‹å°±æ˜¯ä»¥<code>main</code>å‡½æ•°ä½œä¸ºå…¥å£å‡½æ•°çš„çº¿ç¨‹ã€‚</p><p>åœ¨C++ 11çš„çº¿ç¨‹åº“ä¸­ï¼Œå°†çº¿ç¨‹çš„ç®¡ç†æ”¾åœ¨äº†ç±»<code>std::thread</code>ä¸­ï¼Œä½¿ç”¨<code>std::thread</code>å¯ä»¥åˆ›å»ºã€å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶å¯ä»¥å°†çº¿ç¨‹æŒ‚èµ·ã€ç»“æŸç­‰æ“ä½œã€‚</p><h3 id="å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹"><a href="#å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹" class="headerlink" title="å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹"></a>å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹</h3><p>C++ 11çš„çº¿ç¨‹åº“å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ˜¯éå¸¸ç®€å•çš„ï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ª<code>std::thread</code>å¯¹è±¡ï¼Œå°±ä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶ä½¿ç”¨è¯¥<code>std::thread</code>å¯¹è±¡æ¥ç®¡ç†è¯¥çº¿ç¨‹ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token function">do_task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>std<span class="token double-colon punctuation">::</span><span class="token function">thread</span><span class="token punctuation">(</span>do_task<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿™é‡Œåˆ›å»º<code>std::thread</code>ä¼ å…¥çš„å‡½æ•°ï¼Œå®é™…ä¸Šå…¶æ„é€ å‡½æ•°éœ€è¦çš„æ˜¯å¯è°ƒç”¨ï¼ˆcallableï¼‰ç±»å‹ï¼Œåªè¦æ˜¯æœ‰å‡½æ•°è°ƒç”¨ç±»å‹çš„å®ä¾‹éƒ½æ˜¯å¯ä»¥çš„ã€‚æ‰€ä»¥é™¤äº†ä¼ é€’å‡½æ•°å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ï¼š</p><ul><li><p>lambdaè¡¨è¾¾å¼</p><p>ä½¿ç”¨lambdaè¡¨è¾¾å¼å¯åŠ¨çº¿ç¨‹è¾“å‡ºæ•°å­—</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>thread <span class="token function">t</span><span class="token punctuation">(</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>t<span class="token punctuation">.</span><span class="token function">detach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>é‡è½½äº†()è¿ç®—ç¬¦çš„ç±»çš„å®ä¾‹</p><p>ä½¿ç”¨é‡è½½äº†()è¿ç®—ç¬¦çš„ç±»å®ç°å¤šçº¿ç¨‹æ•°å­—è¾“å‡º</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Task</span><span class="token punctuation">{</span><span class="token keyword">public</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">uint8_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>Task task<span class="token punctuation">;</span>thread <span class="token function">t</span><span class="token punctuation">(</span>task<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>t<span class="token punctuation">.</span><span class="token function">detach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>æŠŠå‡½æ•°å¯¹è±¡ä¼ å…¥<code>std::thread</code>çš„æ„é€ å‡½æ•°æ—¶ï¼Œè¦æ³¨æ„ä¸€ä¸ªC++çš„è¯­æ³•è§£æé”™è¯¯ï¼ˆC++â€™s most vexing parseï¼‰ã€‚å‘<code>std::thread</code>çš„æ„é€ å‡½æ•°ä¸­ä¼ å…¥çš„æ˜¯ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œè€Œä¸æ˜¯å‘½åå˜é‡å°±ä¼šå‡ºç°è¯­æ³•è§£æé”™è¯¯ã€‚å¦‚ä¸‹ä»£ç ï¼š</p>  <pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">std<span class="token double-colon punctuation">::</span>thread <span class="token function">t</span><span class="token punctuation">(</span><span class="token function">Task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™é‡Œç›¸å½“äºå£°æ˜äº†ä¸€ä¸ªå‡½æ•°tï¼Œå…¶è¿”å›ç±»å‹ä¸º<code>thread</code>ï¼Œè€Œä¸æ˜¯å¯åŠ¨äº†ä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚å¯ä»¥ä½¿ç”¨æ–°çš„åˆå§‹åŒ–è¯­æ³•é¿å…è¿™ç§æƒ…å†µ</p>  <pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">std<span class="token double-colon punctuation">::</span>thread t<span class="token punctuation">{</span><span class="token function">Task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å½“çº¿ç¨‹å¯åŠ¨åï¼Œ<strong>ä¸€å®šè¦åœ¨å’Œçº¿ç¨‹ç›¸å…³è”çš„<code>thread</code>é”€æ¯å‰ï¼Œç¡®å®šä»¥ä½•ç§æ–¹å¼ç­‰å¾…çº¿ç¨‹æ‰§è¡Œç»“æŸ</strong>ã€‚</p><p>C++11æœ‰ä¸¤ç§æ–¹å¼æ¥ç­‰å¾…çº¿ç¨‹ç»“æŸï¼š</p><ul><li><strong>detachæ–¹å¼</strong>ï¼Œå¯åŠ¨çš„çº¿ç¨‹è‡ªä¸»åœ¨åå°è¿è¡Œï¼Œå½“å‰çš„ä»£ç ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œä¸ç­‰å¾…æ–°çº¿ç¨‹ç»“æŸã€‚å‰é¢ä»£ç æ‰€ä½¿ç”¨çš„å°±æ˜¯è¿™ç§æ–¹å¼ã€‚<ul><li>è°ƒç”¨detachè¡¨ç¤ºthreadå¯¹è±¡å’Œå…¶è¡¨ç¤ºçš„çº¿ç¨‹å®Œå…¨åˆ†ç¦»ï¼›</li><li>åˆ†ç¦»ä¹‹åçš„çº¿ç¨‹æ˜¯ä¸åœ¨å—çº¦æŸå’Œç®¡åˆ¶ï¼Œä¼šå•ç‹¬æ‰§è¡Œï¼Œç›´åˆ°æ‰§è¡Œå®Œæ¯•é‡Šæ”¾èµ„æºï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªdaemonçº¿ç¨‹ï¼›</li><li>åˆ†ç¦»ä¹‹åthreadå¯¹è±¡ä¸å†è¡¨ç¤ºä»»ä½•çº¿ç¨‹ï¼›</li><li>åˆ†ç¦»ä¹‹åjoinable() == falseï¼Œå³ä½¿è¿˜åœ¨æ‰§è¡Œï¼›</li></ul></li><li><strong>joinæ–¹å¼</strong>ï¼Œç­‰å¾…å¯åŠ¨çš„çº¿ç¨‹å®Œæˆï¼Œæ‰ä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚å‡å¦‚å‰é¢çš„ä»£ç ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå…¶è¾“å‡ºå°±ä¼š0,1,2,3ï¼Œå› ä¸ºæ¯æ¬¡éƒ½æ˜¯å‰ä¸€ä¸ªçº¿ç¨‹è¾“å‡ºå®Œæˆäº†æ‰ä¼šè¿›è¡Œä¸‹ä¸€ä¸ªå¾ªç¯ï¼Œå¯åŠ¨ä¸‹ä¸€ä¸ªæ–°çº¿ç¨‹ã€‚<ul><li>åªæœ‰å¤„äºæ´»åŠ¨çŠ¶æ€çº¿ç¨‹æ‰èƒ½è°ƒç”¨joinï¼Œå¯ä»¥é€šè¿‡joinable()å‡½æ•°æ£€æŸ¥;</li><li>joinable() == trueè¡¨ç¤ºå½“å‰çº¿ç¨‹æ˜¯æ´»åŠ¨çº¿ç¨‹ï¼Œæ‰å¯ä»¥è°ƒç”¨joinå‡½æ•°ï¼›</li><li>é»˜è®¤æ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡æ˜¯joinable() == false;</li><li>joinåªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ï¼Œä¹‹åjoinableå°±ä¼šå˜ä¸ºfalseï¼Œè¡¨ç¤ºçº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼›</li><li>è°ƒç”¨ ternimate()çš„çº¿ç¨‹å¿…é¡»æ˜¯ joinable() == false;</li><li>å¦‚æœçº¿ç¨‹ä¸è°ƒç”¨join()å‡½æ•°ï¼Œå³ä½¿æ‰§è¡Œå®Œæ¯•ä¹Ÿæ˜¯ä¸€ä¸ªæ´»åŠ¨çº¿ç¨‹ï¼Œå³joinable() == trueï¼Œä¾ç„¶å¯ä»¥è°ƒç”¨join()å‡½æ•°ï¼›</li></ul></li></ul><p>æ— è®ºåœ¨ä½•ç§æƒ…å½¢ï¼Œä¸€å®šè¦åœ¨<code>thread</code>é”€æ¯å‰ï¼Œè°ƒç”¨<code>t.join</code>æˆ–è€…<code>t.detach</code>ï¼Œæ¥å†³å®šçº¿ç¨‹ä»¥ä½•ç§æ–¹å¼è¿è¡Œã€‚</p><p>å½“ä½¿ç”¨joinæ–¹å¼æ—¶ï¼Œä¼šé˜»å¡å½“å‰ä»£ç ï¼Œç­‰å¾…çº¿ç¨‹å®Œæˆé€€å‡ºåï¼Œæ‰ä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œï¼›</p><p>è€Œä½¿ç”¨detachæ–¹å¼åˆ™ä¸ä¼šå¯¹å½“å‰ä»£ç é€ æˆå½±å“ï¼Œå½“å‰ä»£ç ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œåˆ›å»ºçš„æ–°çº¿ç¨‹åŒæ—¶å¹¶å‘æ‰§è¡Œï¼Œè¿™æ—¶å€™éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š<strong>åˆ›å»ºçš„æ–°çº¿ç¨‹å¯¹å½“å‰ä½œç”¨åŸŸçš„å˜é‡çš„ä½¿ç”¨</strong>ï¼Œåˆ›å»ºæ–°çº¿ç¨‹çš„ä½œç”¨åŸŸç»“æŸåï¼Œæœ‰å¯èƒ½çº¿ç¨‹ä»ç„¶åœ¨æ‰§è¡Œï¼Œè¿™æ—¶å±€éƒ¨å˜é‡éšç€ä½œç”¨åŸŸçš„å®Œæˆéƒ½å·²é”€æ¯ï¼Œå¦‚æœçº¿ç¨‹ç»§ç»­ä½¿ç”¨å±€éƒ¨å˜é‡çš„<strong>å¼•ç”¨æˆ–è€…æŒ‡é’ˆ</strong>ï¼Œä¼šå‡ºç°æ„æƒ³ä¸åˆ°çš„é”™è¯¯ï¼Œå¹¶ä¸”è¿™ç§é”™è¯¯å¾ˆéš¾æ’æŸ¥ã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">auto</span> fn <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1010</span><span class="token punctuation">;</span>    thread <span class="token function">t</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>    t<span class="token punctuation">.</span><span class="token function">detach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨lambdaè¡¨è¾¾å¼ä¸­ï¼Œä½¿ç”¨fnå¯åŠ¨äº†ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œåœ¨è£…ä¸ªæ–°çš„çº¿ç¨‹ä¸­ä½¿ç”¨äº†å±€éƒ¨å˜é‡açš„æŒ‡é’ˆï¼Œå¹¶ä¸”å°†è¯¥çº¿ç¨‹çš„è¿è¡Œæ–¹å¼è®¾ç½®ä¸ºdetachã€‚è¿™æ ·ï¼Œåœ¨lambè¡¨è¾¾å¼æ‰§è¡Œç»“æŸåï¼Œå˜é‡aè¢«é”€æ¯ï¼Œä½†æ˜¯åœ¨åå°è¿è¡Œçš„çº¿ç¨‹ä»ç„¶åœ¨ä½¿ç”¨å·²é”€æ¯å˜é‡açš„æŒ‡é’ˆï¼Œè¿™æ ·å°±å¯èƒ½ä¼šå¯¼è‡´ä¸æ­£ç¡®çš„ç»“æœå‡ºç°ã€‚</p><p>æ‰€ä»¥åœ¨ä»¥detachçš„æ–¹å¼æ‰§è¡Œçº¿ç¨‹æ—¶ï¼Œè¦å°†çº¿ç¨‹è®¿é—®çš„å±€éƒ¨æ•°æ®å¤åˆ¶åˆ°çº¿ç¨‹çš„ç©ºé—´ï¼ˆä½¿ç”¨å€¼ä¼ é€’ï¼‰ï¼Œä¸€å®šè¦ç¡®ä¿çº¿ç¨‹æ²¡æœ‰ä½¿ç”¨å±€éƒ¨å˜é‡çš„å¼•ç”¨æˆ–è€…æŒ‡é’ˆï¼Œé™¤éä½ èƒ½è‚¯å®šè¯¥çº¿ç¨‹ä¼šåœ¨å±€éƒ¨ä½œç”¨åŸŸç»“æŸå‰æ‰§è¡Œç»“æŸã€‚</p><p>å½“ç„¶ï¼Œä½¿ç”¨joinæ–¹å¼çš„è¯å°±ä¸ä¼šå‡ºç°è¿™ç§é—®é¢˜ï¼Œå®ƒä¼šåœ¨ä½œç”¨åŸŸç»“æŸå‰å®Œæˆé€€å‡ºã€‚</p><h3 id="å¼‚å¸¸æƒ…å†µä¸‹ç­‰å¾…çº¿ç¨‹å®Œæˆ"><a href="#å¼‚å¸¸æƒ…å†µä¸‹ç­‰å¾…çº¿ç¨‹å®Œæˆ" class="headerlink" title="å¼‚å¸¸æƒ…å†µä¸‹ç­‰å¾…çº¿ç¨‹å®Œæˆ"></a>å¼‚å¸¸æƒ…å†µä¸‹ç­‰å¾…çº¿ç¨‹å®Œæˆ</h3><p>å½“å†³å®šä»¥detachæ–¹å¼è®©çº¿ç¨‹åœ¨åå°è¿è¡Œæ—¶ï¼Œå¯ä»¥åœ¨åˆ›å»º<code>thread</code>çš„å®ä¾‹åç«‹å³è°ƒç”¨<code>detach</code>ï¼Œè¿™æ ·çº¿ç¨‹å°±ä¼šå<code>thread</code>çš„å®ä¾‹åˆ†ç¦»ï¼Œå³ä½¿å‡ºç°äº†å¼‚å¸¸<code>thread</code>çš„å®ä¾‹è¢«é”€æ¯ï¼Œä»ç„¶èƒ½ä¿è¯çº¿ç¨‹åœ¨åå°è¿è¡Œã€‚</p><p>ä½†çº¿ç¨‹ä»¥joinæ–¹å¼è¿è¡Œæ—¶ï¼Œéœ€è¦åœ¨ä¸»çº¿ç¨‹çš„åˆé€‚ä½ç½®è°ƒç”¨<code>join</code>æ–¹æ³•ï¼Œå¦‚æœè°ƒç”¨<code>join</code>å‰å‡ºç°äº†å¼‚å¸¸ï¼Œ<code>thread</code>è¢«é”€æ¯ï¼Œçº¿ç¨‹å°±ä¼šè¢«å¼‚å¸¸æ‰€ç»ˆç»“ã€‚ä¸ºäº†é¿å…å¼‚å¸¸å°†çº¿ç¨‹ç»ˆç»“ï¼Œæˆ–è€…ç”±äºæŸäº›åŸå› ï¼Œä¾‹å¦‚çº¿ç¨‹è®¿é—®äº†å±€éƒ¨å˜é‡ï¼Œå°±è¦ä¿è¯çº¿ç¨‹ä¸€å®šè¦åœ¨å‡½æ•°é€€å‡ºå‰å®Œæˆï¼Œå°±è¦ä¿è¯è¦åœ¨å‡½æ•°é€€å‡ºå‰è°ƒç”¨<code>join</code></p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>thread <span class="token function">t</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"hello C++ 11"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span><span class="token punctuation">{</span><span class="token function">do_something_else</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">{</span>t<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">throw</span><span class="token punctuation">;</span><span class="token punctuation">}</span>t<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢ä»£ç èƒ½å¤Ÿä¿è¯åœ¨æ­£å¸¸æˆ–è€…å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œéƒ½ä¼šè°ƒç”¨<code>join</code>æ–¹æ³•ï¼Œè¿™æ ·çº¿ç¨‹ä¸€å®šä¼šåœ¨å‡½æ•°<code>func</code>é€€å‡ºå‰å®Œæˆã€‚ä½†æ˜¯ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œä¸ä½†ä»£ç å†—é•¿ï¼Œè€Œä¸”ä¼šå‡ºç°ä¸€äº›ä½œç”¨åŸŸçš„é—®é¢˜ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ³•ã€‚</p><p>ä¸€ç§æ¯”è¾ƒå¥½çš„æ–¹æ³•æ˜¯èµ„æºè·å–å³åˆå§‹åŒ–ï¼ˆRAII,Resource Acquisition Is Initialization)ï¼Œè¯¥æ–¹æ³•æä¾›ä¸€ä¸ªç±»ï¼Œåœ¨ææ„å‡½æ•°ä¸­è°ƒç”¨<code>join</code>ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">thread_guard</span><span class="token punctuation">{</span>thread <span class="token operator">&amp;</span>t<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token operator">:</span><span class="token keyword">explicit</span> <span class="token function">thread_guard</span><span class="token punctuation">(</span>thread<span class="token operator">&amp;</span> _t<span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">t</span><span class="token punctuation">(</span>_t<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">~</span><span class="token function">thread_guard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">joinable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>t<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">thread_guard</span><span class="token punctuation">(</span><span class="token keyword">const</span> thread_guard<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>thread_guard<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> thread_guard<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>thread <span class="token function">t</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Hello thread"</span> <span class="token operator">&lt;&lt;</span>endl <span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>thread_guard <span class="token function">g</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ— è®ºæ˜¯ä½•ç§æƒ…å†µï¼Œå½“å‡½æ•°é€€å‡ºæ—¶ï¼Œå±€éƒ¨å˜é‡<code>g</code>è°ƒç”¨å…¶ææ„å‡½æ•°é”€æ¯ï¼Œä»è€Œèƒ½å¤Ÿä¿è¯<code>join</code>ä¸€å®šä¼šè¢«è°ƒç”¨ã€‚</p><h3 id="å‘çº¿ç¨‹ä¼ é€’å‚æ•°"><a href="#å‘çº¿ç¨‹ä¼ é€’å‚æ•°" class="headerlink" title="å‘çº¿ç¨‹ä¼ é€’å‚æ•°"></a>å‘çº¿ç¨‹ä¼ é€’å‚æ•°</h3><p>å‘çº¿ç¨‹è°ƒç”¨çš„å‡½æ•°ä¼ é€’å‚æ•°ä¹Ÿæ˜¯å¾ˆç®€å•çš„ï¼Œåªéœ€è¦åœ¨æ„é€ <code>thread</code>çš„å®ä¾‹æ—¶ï¼Œä¾æ¬¡ä¼ å…¥å³å¯ã€‚ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">,</span><span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">int</span> buffer<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>thread <span class="token function">t</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span>buffer<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>t<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>é»˜è®¤çš„ä¼šå°†ä¼ é€’çš„å‚æ•°ä»¥æ‹·è´çš„æ–¹å¼å¤åˆ¶åˆ°çº¿ç¨‹ç©ºé—´ï¼Œå³ä½¿å‚æ•°çš„ç±»å‹æ˜¯å¼•ç”¨ã€‚</strong>ä¾‹å¦‚ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>thread <span class="token function">t</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>func</code>çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯<code>string &amp;</code>ï¼Œè€Œä¼ å…¥çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢é‡ã€‚è¯¥å­—é¢é‡ä»¥<code>const char*</code>ç±»å‹ä¼ å…¥çº¿ç¨‹ç©ºé—´åï¼Œåœ¨**çº¿ç¨‹çš„ç©ºé—´å†…è½¬æ¢ä¸º<code>string</code>**ã€‚</p><p>å¦‚æœåœ¨çº¿ç¨‹ä¸­ä½¿ç”¨å¼•ç”¨æ¥æ›´æ–°å¯¹è±¡æ—¶ï¼Œå°±éœ€è¦æ³¨æ„äº†ã€‚é»˜è®¤çš„æ˜¯å°†å¯¹è±¡æ‹·è´åˆ°çº¿ç¨‹ç©ºé—´ï¼Œå…¶å¼•ç”¨çš„æ˜¯æ‹·è´çš„çº¿ç¨‹ç©ºé—´çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯åˆå§‹å¸Œæœ›æ”¹å˜çš„å¯¹è±¡ã€‚å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">_tagNode</span><span class="token punctuation">{</span><span class="token keyword">public</span><span class="token operator">:</span><span class="token keyword">int</span> a<span class="token punctuation">;</span><span class="token keyword">int</span> b<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span>_tagNode <span class="token operator">&amp;</span>node<span class="token punctuation">)</span><span class="token punctuation">{</span>node<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>node<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>_tagNode node<span class="token punctuation">;</span>thread <span class="token function">t</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">;</span>t<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> node<span class="token punctuation">.</span>a <span class="token operator">&lt;&lt;</span> endl <span class="token punctuation">;</span>cout <span class="token operator">&lt;&lt;</span> node<span class="token punctuation">.</span>b <span class="token operator">&lt;&lt;</span> endl <span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨çº¿ç¨‹å†…ï¼Œå°†å¯¹è±¡çš„å­—æ®µaå’Œbè®¾ç½®ä¸ºæ–°çš„å€¼ï¼Œä½†æ˜¯åœ¨çº¿ç¨‹è°ƒç”¨ç»“æŸåï¼Œè¿™ä¸¤ä¸ªå­—æ®µçš„å€¼å¹¶ä¸ä¼šæ”¹å˜ã€‚è¿™æ ·ç”±äºå¼•ç”¨çš„å®é™…ä¸Šæ˜¯å±€éƒ¨å˜é‡<code>node</code>çš„ä¸€ä¸ªæ‹·è´ï¼Œè€Œä¸æ˜¯<code>node</code>æœ¬èº«ã€‚åœ¨å°†å¯¹è±¡ä¼ å…¥çº¿ç¨‹çš„æ—¶å€™ï¼Œè°ƒç”¨<code>std::ref</code>ï¼Œå°†<code>node</code>çš„å¼•ç”¨ä¼ å…¥çº¿ç¨‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ‹·è´ã€‚ä¾‹å¦‚ï¼š<code>thread t(func,std::ref(node));</code></p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»çš„æˆå‘˜å‡½æ•°ä½œä¸ºçº¿ç¨‹å‡½æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">_tagNode</span><span class="token punctuation">{</span><span class="token keyword">public</span><span class="token operator">:</span><span class="token keyword">void</span> <span class="token function">do_some_work</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>_tagNode node<span class="token punctuation">;</span>thread <span class="token function">t</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>_tagNode<span class="token double-colon punctuation">::</span>do_some_work<span class="token punctuation">,</span> <span class="token operator">&amp;</span>node<span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢åˆ›å»ºçš„çº¿ç¨‹ä¼šè°ƒç”¨<code>node.do_some_work(20)</code>ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºæˆå‘˜å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><h3 id="è½¬ç§»çº¿ç¨‹çš„æ‰€æœ‰æƒ"><a href="#è½¬ç§»çº¿ç¨‹çš„æ‰€æœ‰æƒ" class="headerlink" title="è½¬ç§»çº¿ç¨‹çš„æ‰€æœ‰æƒ"></a>è½¬ç§»çº¿ç¨‹çš„æ‰€æœ‰æƒ</h3><p><code>thread</code>æ˜¯å¯ç§»åŠ¨çš„(movable)çš„ï¼Œä½†ä¸å¯å¤åˆ¶(copyable)ã€‚å¯ä»¥é€šè¿‡<code>move</code>æ¥æ”¹å˜çº¿ç¨‹çš„æ‰€æœ‰æƒï¼Œçµæ´»çš„å†³å®šçº¿ç¨‹åœ¨ä»€ä¹ˆæ—¶å€™joinæˆ–è€…detachã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">thread <span class="token function">t1</span><span class="token punctuation">(</span>f1<span class="token punctuation">)</span><span class="token punctuation">;</span>thread <span class="token function">t3</span><span class="token punctuation">(</span><span class="token function">move</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å°†çº¿ç¨‹ä»t1è½¬ç§»ç»™t3,è¿™æ—¶å€™t1å°±ä¸å†æ‹¥æœ‰çº¿ç¨‹çš„æ‰€æœ‰æƒï¼Œè°ƒç”¨<code>t1.join</code>æˆ–<code>t1.detach</code>ä¼šå‡ºç°å¼‚å¸¸ï¼Œè¦ä½¿ç”¨t3æ¥ç®¡ç†çº¿ç¨‹ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€<code>thread</code>å¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›ç±»å‹ï¼Œæˆ–è€…ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œèƒ½å¤Ÿæ›´ä¸ºæ–¹ä¾¿çš„ç®¡ç†çº¿ç¨‹ã€‚</p><p>çº¿ç¨‹çš„æ ‡è¯†ç±»å‹ä¸º<code>std::thread::id</code>ï¼Œæœ‰ä¸¤ç§æ–¹å¼è·å¾—åˆ°çº¿ç¨‹çš„idã€‚</p><ul><li>é€šè¿‡<code>thread</code>çš„å®ä¾‹è°ƒç”¨<code>get_id()</code>ç›´æ¥è·å–</li><li>åœ¨å½“å‰çº¿ç¨‹ä¸Šè°ƒç”¨<code>this_thread::get_id()</code>è·å–</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨RANSACç®—æ³•æ‹Ÿåˆç‚¹äº‘ä¸­çš„å¹³é¢</title>
      <link href="2021/11/28/ransac/"/>
      <url>2021/11/28/ransac/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨RANSACç®—æ³•æ‹Ÿåˆç‚¹äº‘ä¸­çš„å¹³é¢"><a href="#ä½¿ç”¨RANSACç®—æ³•æ‹Ÿåˆç‚¹äº‘ä¸­çš„å¹³é¢" class="headerlink" title="ä½¿ç”¨RANSACç®—æ³•æ‹Ÿåˆç‚¹äº‘ä¸­çš„å¹³é¢"></a>ä½¿ç”¨RANSACç®—æ³•æ‹Ÿåˆç‚¹äº‘ä¸­çš„å¹³é¢</h1><p>æœ€è¿‘åœ¨å†™pi-slam-fusionè¿™ä¸ªé¡¹ç›®ï¼Œéœ€è¦æ ¹æ®pi-slamè®¡ç®—å‡ºæ¥çš„ç‚¹äº‘æ‹Ÿåˆå‡ºå¤§åœ°å¹³é¢çš„æ–¹ç¨‹ï¼Œä»è€Œè®©map2dfusionæ ¹æ®è¿™ä¸ªæ–¹ç¨‹è¿›è¡Œåœ°å›¾æ‹¼æ¥ã€‚</p><p>è¿™ä¸€æ­¥æˆ‘ä½¿ç”¨äº†ransacç®—æ³•ï¼Œå¹¶ä¸”å¯¹ransacç®—æ³•è¿›è¡Œäº†ä¸€ç‚¹æ€»ï¼ˆbanï¼‰ç»“ï¼ˆyunï¼‰ã€‚</p><h2 id="RANSACç®€ä»‹"><a href="#RANSACç®€ä»‹" class="headerlink" title="RANSACç®€ä»‹"></a>RANSACç®€ä»‹</h2><p><strong>RANSAC</strong>(RAndom SAmple Consensus,éšæœºé‡‡æ ·ä¸€è‡´)ç®—æ³•æ˜¯ä»ä¸€ç»„å«æœ‰â€œå¤–ç‚¹â€(outliers)çš„æ•°æ®ä¸­æ­£ç¡®ä¼°è®¡æ•°å­¦æ¨¡å‹å‚æ•°çš„è¿­ä»£ç®—æ³•ã€‚</p><p>â€œå¤–ç‚¹â€ä¸€èˆ¬æŒ‡çš„çš„æ•°æ®ä¸­çš„å™ªå£°ï¼Œæ¯”å¦‚è¯´åŒ¹é…ä¸­çš„è¯¯åŒ¹é…å’Œä¼°è®¡æ›²çº¿ä¸­çš„ç¦»ç¾¤ç‚¹ã€‚æ‰€ä»¥ï¼ŒRANSACä¹Ÿæ˜¯ä¸€ç§â€œå¤–ç‚¹â€æ£€æµ‹ç®—æ³•ã€‚RANSACç®—æ³•æ˜¯ä¸€ç§ä¸ç¡®å®šç®—æ³•ï¼Œå®ƒåªèƒ½åœ¨ä¸€ç§æ¦‚ç‡ä¸‹äº§ç”Ÿç»“æœï¼Œå¹¶ä¸”è¿™ä¸ªæ¦‚ç‡ä¼šéšç€è¿­ä»£æ¬¡æ•°çš„å¢åŠ è€ŒåŠ å¤§ã€‚RANSACç®—æœ€æ—©æ˜¯ç”±Fischlerå’ŒBollesåœ¨SRIä¸Šæå‡ºç”¨æ¥è§£å†³LDP(Location Determination Proble)é—®é¢˜çš„ã€‚</p><h3 id="RANSACçš„åŸºæœ¬å‡è®¾"><a href="#RANSACçš„åŸºæœ¬å‡è®¾" class="headerlink" title="RANSACçš„åŸºæœ¬å‡è®¾"></a>RANSACçš„åŸºæœ¬å‡è®¾</h3><ol><li>â€œ<a href="https://zh.wikipedia.org/w/index.php?title=%E5%85%A7%E7%BE%A4&amp;action=edit&amp;redlink=1">å†…ç¾¤</a>â€(inlier, ä¼¼ä¹è¯‘ä¸ºå†…ç‚¹ç¾¤æ›´åŠ å¦¥å½“ï¼Œå³æ­£å¸¸æ•°æ®ï¼Œæ­£ç¡®æ•°æ®)æ•°æ®å¯ä»¥é€šè¿‡å‡ ç»„æ¨¡å‹çš„å‚æ•°æ¥å™è¿°å…¶åˆ†å¸ƒï¼Œè€Œâ€œ<a href="https://zh.wikipedia.org/w/index.php?title=%E9%9B%A2%E7%BE%A4&amp;action=edit&amp;redlink=1">ç¦»ç¾¤</a>â€(outlier,ä¼¼ä¹è¯‘ä¸ºå¤–ç‚¹ç¾¤æ›´åŠ å¦¥å½“ï¼Œå¼‚å¸¸æ•°æ®)æ•°æ®åˆ™æ˜¯ä¸é€‚åˆæ¨¡å‹åŒ–çš„æ•°æ®ã€‚</li><li>æ•°æ®ä¼šå—å™ªå£°å½±å“ï¼Œå™ªå£°æŒ‡çš„æ˜¯ç¦»ç¾¤ï¼Œä¾‹å¦‚ä»æç«¯çš„å™ªå£°æˆ–é”™è¯¯è§£é‡Šæœ‰å…³æ•°æ®çš„æµ‹é‡æˆ–ä¸æ­£ç¡®çš„å‡è®¾ã€‚</li><li>RANSACå‡å®šï¼Œç»™å®šä¸€ç»„ï¼ˆé€šå¸¸å¾ˆå°ï¼‰çš„å†…ç‚¹ç¾¤ï¼Œå­˜åœ¨ä¸€ä¸ªç¨‹åºï¼Œè¿™ä¸ªç¨‹åºå¯ä»¥ä¼°ç®—æœ€ä½³è§£é‡Šæˆ–æœ€é€‚ç”¨äºè¿™ä¸€æ•°æ®æ¨¡å‹çš„å‚æ•°ã€‚</li></ol><h3 id="èŒƒä¾‹"><a href="#èŒƒä¾‹" class="headerlink" title="èŒƒä¾‹"></a>èŒƒä¾‹</h3><p>è¿™é‡Œç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜ï¼Œåœ¨ä¸€ç»„æ•°æ®ç‚¹ä¸­æ‰¾åˆ°ä¸€æ¡æœ€é€‚åˆçš„çº¿ã€‚å‡è®¾ï¼Œæ­¤æœ‰ä¸€ç»„é›†åˆåŒ…å«äº†å†…ç‚¹ç¾¤ä»¥åŠå¤–ç‚¹ç¾¤ï¼Œå…¶ä¸­å†…ç‚¹ç¾¤åŒ…å«å¯ä»¥è¢«æ‹Ÿåˆåˆ°çº¿æ®µä¸Šçš„ç‚¹ï¼Œè€Œå¤–ç‚¹ç¾¤åˆ™æ˜¯æ— æ³•è¢«æ‹Ÿåˆçš„ç‚¹ã€‚å¦‚æœæˆ‘ä»¬ç”¨ç®€å•çš„æœ€å°äºŒä¹˜æ³•æ¥æ‰¾æ­¤çº¿ï¼Œæˆ‘ä»¬å°†æ— æ³•å¾—åˆ°ä¸€æ¡é€‚åˆäºå†…ç‚¹ç¾¤çš„ç›´çº¿ï¼Œå› ä¸ºæœ€å°äºŒä¹˜æ³•ä¼šå—å¤–ç‚¹ç¾¤å½±å“è€Œå½±å“å…¶ç»“æœã€‚è€Œç”¨RANSACï¼Œå¯ä»¥åªç”±å†…ç‚¹ç¾¤æ¥è®¡ç®—å‡ºæ¨¡å‹ï¼Œè€Œä¸”æ¦‚ç‡è¿˜å¤Ÿé«˜ã€‚ç„¶è€Œï¼ŒRANSACæ— æ³•ä¿è¯ç»“æœä¸€å®šæœ€å¥½ï¼Œæ‰€ä»¥å¿…é¡»å°å¿ƒé€‰æ‹©å‚æ•°ï¼Œä½¿å…¶èƒ½æœ‰è¶³å¤Ÿçš„æ¦‚ç‡ã€‚</p><p><img src="/images/ransac/01.png"></p><h3 id="ç®—æ³•åŸºæœ¬æ€æƒ³å’Œæµç¨‹"><a href="#ç®—æ³•åŸºæœ¬æ€æƒ³å’Œæµç¨‹" class="headerlink" title="ç®—æ³•åŸºæœ¬æ€æƒ³å’Œæµç¨‹"></a>ç®—æ³•åŸºæœ¬æ€æƒ³å’Œæµç¨‹</h3><p>RANSACæ˜¯é€šè¿‡åå¤é€‰æ‹©æ•°æ®é›†å»ä¼°è®¡å‡ºæ¨¡å‹ï¼Œä¸€ç›´è¿­ä»£åˆ°ä¼°è®¡å‡ºè®¤ä¸ºæ¯”è¾ƒå¥½çš„æ¨¡å‹ã€‚<br>å…·ä½“çš„å®ç°æ­¥éª¤å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š</p><ol><li>é€‰æ‹©å‡ºå¯ä»¥ä¼°è®¡å‡ºæ¨¡å‹çš„æœ€å°æ•°æ®é›†ï¼›(å¯¹äºç›´çº¿æ‹Ÿåˆæ¥è¯´å°±æ˜¯2ä¸ªç‚¹ï¼Œå¯¹äºå¹³é¢æ‹Ÿåˆå°±æ˜¯3ä¸ªç‚¹)</li><li>ä½¿ç”¨è¿™ä¸ªæ•°æ®é›†æ¥è®¡ç®—å‡ºæ•°æ®æ¨¡å‹ï¼›</li><li>å°†æ‰€æœ‰æ•°æ®å¸¦å…¥è¿™ä¸ªæ¨¡å‹ï¼Œè®¡ç®—å‡ºâ€œå†…ç‚¹â€çš„æ•°ç›®ï¼›(ç´¯åŠ åœ¨ä¸€å®šè¯¯å·®èŒƒå›´å†…çš„é€‚åˆå½“å‰è¿­ä»£æ¨å‡ºæ¨¡å‹çš„æ•°æ®)</li><li>æ¯”è¾ƒå½“å‰æ¨¡å‹å’Œä¹‹å‰æ¨å‡ºçš„æœ€å¥½çš„æ¨¡å‹çš„â€œå†…ç‚¹â€œçš„æ•°é‡ï¼Œè®°å½•æœ€å¤§â€œå†…ç‚¹â€æ•°çš„æ¨¡å‹å‚æ•°å’Œâ€œå†…ç‚¹â€æ•°ï¼›</li><li>é‡å¤1-4æ­¥ï¼Œç›´åˆ°è¿­ä»£ç»“æŸæˆ–è€…å½“å‰æ¨¡å‹å·²ç»è¶³å¤Ÿå¥½äº†(â€œå†…ç‚¹æ•°ç›®å¤§äºä¸€å®šæ•°é‡â€)ã€‚</li></ol><h2 id="ç¼–ç¨‹å®ç°"><a href="#ç¼–ç¨‹å®ç°" class="headerlink" title="ç¼–ç¨‹å®ç°"></a>ç¼–ç¨‹å®ç°</h2><p>ä»¥RANSACç®—æ³•æ‹Ÿåˆç‚¹äº‘ä¸­çš„å¹³é¢ä¸ºä¾‹ï¼Œä»‹ç»pythonå®ç°çš„æ ¸å¿ƒä»£ç ã€‚</p><h3 id="æ±‚è§£å¹³é¢æ–¹ç¨‹"><a href="#æ±‚è§£å¹³é¢æ–¹ç¨‹" class="headerlink" title="æ±‚è§£å¹³é¢æ–¹ç¨‹"></a>æ±‚è§£å¹³é¢æ–¹ç¨‹</h3><p>è¿™é‡Œæ˜¯æ ¹æ®æœ€å°æ•°æ®é›†ï¼ˆç‚¹Aã€ç‚¹Bã€ç‚¹Cï¼‰æ¥è®¡ç®—æ•°æ®æ¨¡å‹ï¼ˆå¹³é¢æ–¹ç¨‹ï¼‰çš„è¿‡ç¨‹ï¼Œå¯¹åº”ä¸Šé¢çš„1ã€2æ­¥</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">solve_plane</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B<span class="token punctuation">,</span> C<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    æ±‚è§£å¹³é¢æ–¹ç¨‹    :param A: ç‚¹A    :param B: ç‚¹B    :param C: ç‚¹C    :return: Point(å¹³é¢ä¸Šä¸€ç‚¹),Quaternion(å¹³é¢å››å…ƒæ•°),Nx(å¹³é¢çš„æ³•å‘é‡)    """</span>    <span class="token comment"># ä¸¤ä¸ªå¸¸é‡</span>    N <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    Pi <span class="token operator">=</span> <span class="token number">3.1415926535</span>    <span class="token comment"># è®¡ç®—å¹³é¢çš„å•ä½æ³•å‘é‡ï¼Œå³BC ä¸ BAçš„å‰ç§¯</span>    Nx <span class="token operator">=</span> np<span class="token punctuation">.</span>cross<span class="token punctuation">(</span>B <span class="token operator">-</span> C<span class="token punctuation">,</span> B <span class="token operator">-</span> A<span class="token punctuation">)</span>    Nx <span class="token operator">=</span> Nx <span class="token operator">/</span> np<span class="token punctuation">.</span>linalg<span class="token punctuation">.</span>norm<span class="token punctuation">(</span>Nx<span class="token punctuation">)</span>    <span class="token comment"># è®¡ç®—å•ä½æ—‹è½¬å‘é‡ä¸æ—‹è½¬è§’ï¼ˆèŒƒå›´ä¸º0åˆ°Piï¼‰</span>    Nv <span class="token operator">=</span> np<span class="token punctuation">.</span>cross<span class="token punctuation">(</span>Nx<span class="token punctuation">,</span> N<span class="token punctuation">)</span>    angle <span class="token operator">=</span> acos<span class="token punctuation">(</span>np<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>Nx<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># è€ƒè™‘åˆ°ä¸¤ä¸ªå‘é‡å¤¹è§’ä¸å¤§äºPi/2ï¼Œè¿™é‡Œéœ€è¦å¤„ç†ä¸€ä¸‹</span>    <span class="token keyword">if</span> angle <span class="token operator">&gt;</span> Pi <span class="token operator">/</span> <span class="token number">2.0</span><span class="token punctuation">:</span>        angle <span class="token operator">=</span> Pi <span class="token operator">-</span> angle        Nv <span class="token operator">=</span> <span class="token operator">-</span>Nv    <span class="token comment"># FIXME: æ­¤å¤„å¦‚ä½•ç¡®å®šå¹³é¢ä¸Šçš„ä¸€ä¸ªç‚¹ï¼Ÿï¼Ÿï¼Ÿ</span>    <span class="token comment"># Point = (A + B + C) / 3.0</span>    Point <span class="token operator">=</span> B    <span class="token comment"># è®¡ç®—å•ä½å››å…ƒæ•°</span>    Quaternion <span class="token operator">=</span> np<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Nv <span class="token operator">*</span> sin<span class="token punctuation">(</span>angle <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cos<span class="token punctuation">(</span>angle <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># print("æ—‹è½¬å‘é‡:\t", Nv)</span>    <span class="token comment"># print("æ—‹è½¬è§’åº¦:\t", angle)</span>    <span class="token comment"># print("å¯¹åº”å››å…ƒæ•°:\t", Quaternion)</span>    <span class="token keyword">return</span> Point<span class="token punctuation">,</span> Quaternion<span class="token punctuation">,</span> Nx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è®¡ç®—ç‚¹åˆ°å¹³é¢çš„è·ç¦»"><a href="#è®¡ç®—ç‚¹åˆ°å¹³é¢çš„è·ç¦»" class="headerlink" title="è®¡ç®—ç‚¹åˆ°å¹³é¢çš„è·ç¦»"></a>è®¡ç®—ç‚¹åˆ°å¹³é¢çš„è·ç¦»</h3><p>æˆ‘ä»¬å¯ä»¥æ ¹æ®ç‚¹åˆ°å¹³é¢çš„è·ç¦»æ¥åˆ¤æ–­è¿™ä¸ªç‚¹æ˜¯å¦ä¸ºå†…ç‚¹ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">solve_distance</span><span class="token punctuation">(</span>M<span class="token punctuation">,</span> P<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    æ±‚è§£ç‚¹Måˆ°å¹³é¢(P,Q)çš„è·ç¦»    :param M: ç‚¹M    :param P: å¹³é¢ä¸Šä¸€ç‚¹    :param N: å¹³é¢çš„æ³•å‘é‡    :return: ç‚¹åˆ°å¹³é¢çš„è·ç¦»    """</span>    <span class="token comment"># ä»å››å…ƒæ•°åˆ°æ³•å‘é‡</span>    <span class="token comment"># A = 2 * Q[0] * Q[2] + 2 * Q[1] * Q[3]</span>    <span class="token comment"># B = 2 * Q[1] * Q[2] - 2 * Q[0] * Q[3]</span>    <span class="token comment"># C = -Q[0] ** 2 - Q[1] ** 2 + Q[2] ** 2 + Q[3] ** 2</span>    <span class="token comment"># D = -A * P[0] - B * P[1] - C * P[2]</span>    <span class="token comment"># ä¸ºäº†è®¡ç®—ç®€ä¾¿ï¼Œç›´æ¥ä½¿ç”¨æ±‚è§£å‡ºçš„æ³•å‘é‡</span>    A <span class="token operator">=</span> N<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    B <span class="token operator">=</span> N<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>    C <span class="token operator">=</span> N<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>    D <span class="token operator">=</span> <span class="token operator">-</span>A <span class="token operator">*</span> P<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> B <span class="token operator">*</span> P<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> C <span class="token operator">*</span> P<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> fabs<span class="token punctuation">(</span>A <span class="token operator">*</span> M<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> B <span class="token operator">*</span> M<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> C <span class="token operator">*</span> M<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> D<span class="token punctuation">)</span> <span class="token operator">/</span> sqrt<span class="token punctuation">(</span>A <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> B <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> C <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="é€šè¿‡RANSACç®—æ³•è¿›è¡Œæ‹Ÿåˆ"><a href="#é€šè¿‡RANSACç®—æ³•è¿›è¡Œæ‹Ÿåˆ" class="headerlink" title="é€šè¿‡RANSACç®—æ³•è¿›è¡Œæ‹Ÿåˆ"></a>é€šè¿‡RANSACç®—æ³•è¿›è¡Œæ‹Ÿåˆ</h3><p>è¿™é‡Œæ˜¯RANSACç®—æ³•çš„ä¸»è¦å®ç°è¿‡ç¨‹ã€‚</p><p>ä¸‹é¢çš„å‡½æ•°è®¡ç®—å‡ºçš„Pæ˜¯å¹³é¢ä¸Šçš„ä¸€ç‚¹ï¼ŒQæ˜¯å¹³é¢çš„å››å…ƒæ•°ï¼ŒNæ˜¯å¹³é¢çš„æ³•å‘é‡ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">RANSAC</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    ä½¿ç”¨RANSACç®—æ³•ä¼°ç®—æ¨¡å‹    """</span>    <span class="token comment"># æ•°æ®è§„æ¨¡</span>    SIZE <span class="token operator">=</span> data<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token comment"># è¿­ä»£æœ€å¤§æ¬¡æ•°ï¼Œæ¯æ¬¡å¾—åˆ°æ›´å¥½çš„ä¼°è®¡ä¼šä¼˜åŒ–itersçš„æ•°å€¼ï¼Œé»˜è®¤10000</span>    iters <span class="token operator">=</span> <span class="token number">10000</span>    <span class="token comment"># æ•°æ®å’Œæ¨¡å‹ä¹‹é—´å¯æ¥å—çš„å·®å€¼ï¼Œé»˜è®¤0.25</span>    sigma <span class="token operator">=</span> <span class="token number">0.15</span>    <span class="token comment"># å†…ç‚¹æ•°ç›®</span>    pretotal <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment"># å¸Œæœ›çš„å¾—åˆ°æ­£ç¡®æ¨¡å‹çš„æ¦‚ç‡ï¼Œé»˜è®¤0.99</span>    Per <span class="token operator">=</span> <span class="token number">0.999</span>    <span class="token comment"># åˆå§‹åŒ–ä¸€ä¸‹</span>    P <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    Q <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    N <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>iters<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># éšæœºåœ¨æ•°æ®ä¸­é€‰å‡ºä¸‰ä¸ªç‚¹å»æ±‚è§£æ¨¡å‹</span>        sample_index <span class="token operator">=</span> random<span class="token punctuation">.</span>sample<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span>SIZE<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>        P<span class="token punctuation">,</span> Q<span class="token punctuation">,</span> N <span class="token operator">=</span> solve_plane<span class="token punctuation">(</span>data<span class="token punctuation">[</span>sample_index<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span>sample_index<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span>sample_index<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token comment"># ç®—å‡ºå†…ç‚¹æ•°ç›®</span>        total_inlier <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> index <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>SIZE<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> solve_distance<span class="token punctuation">(</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> P<span class="token punctuation">,</span> N<span class="token punctuation">)</span> <span class="token operator">&lt;</span> sigma<span class="token punctuation">:</span>                total_inlier <span class="token operator">=</span> total_inlier <span class="token operator">+</span> <span class="token number">1</span>        <span class="token comment"># åˆ¤æ–­å½“å‰çš„æ¨¡å‹æ˜¯å¦æ¯”ä¹‹å‰ä¼°ç®—çš„æ¨¡å‹å¥½</span>        <span class="token keyword">if</span> total_inlier <span class="token operator">&gt;</span> pretotal<span class="token punctuation">:</span>            iters <span class="token operator">=</span> log<span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> Per<span class="token punctuation">)</span> <span class="token operator">/</span> log<span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token builtin">pow</span><span class="token punctuation">(</span>total_inlier <span class="token operator">/</span> SIZE<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            pretotal <span class="token operator">=</span> total_inlier        <span class="token comment"># åˆ¤æ–­æ˜¯å¦å½“å‰æ¨¡å‹å·²ç»ç¬¦åˆè¶…è¿‡ä¸€åŠçš„ç‚¹</span>        <span class="token keyword">if</span> total_inlier <span class="token operator">&gt;</span> SIZE <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">:</span>            <span class="token keyword">break</span>    <span class="token keyword">return</span> P<span class="token punctuation">,</span> Q<span class="token punctuation">,</span> N<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è¿è¡Œé¡¹ç›®"><a href="#è¿è¡Œé¡¹ç›®" class="headerlink" title="è¿è¡Œé¡¹ç›®"></a>è¿è¡Œé¡¹ç›®</h2><p>å…·ä½“çš„ä»£ç ï¼ˆåŒ…æ‹¬C++å®ç°å’Œpythonå®ç°ï¼‰éƒ½æ”¾åœ¨<a href="https://github.com/Immortalqx/RANSAC.git">https://github.com/Immortalqx/RANSAC.git</a></p><p>ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„æŒ‡ä»¤è¿è¡Œè¿™ç¯‡åšå®¢ä»‹ç»çš„RANSACç®—æ³•ã€‚</p><p><strong>å…‹éš†æœ¬é¡¹ç›®ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/Immortalqx/RANSAC.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>è¿è¡ŒC++éƒ¨åˆ†çš„ä»£ç ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> RANSAC<span class="token function">mkdir</span> build<span class="token builtin class-name">cd</span> buildcmake <span class="token punctuation">..</span><span class="token function">make</span>./RANSAC<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>è¿è¡Œpythonéƒ¨åˆ†çš„ä»£ç ï¼š</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#åœ¨å¹³é¢ä¸­ç”¨ransacç®—æ³•æ‹Ÿåˆç›´çº¿</span>python3 RANSAC_2D.py<span class="token comment">#åœ¨ç‚¹äº‘ä¸­ç”¨ransacç®—æ³•æ‹Ÿåˆå¹³é¢</span>python3 RANSAC_3D.py<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>è¿è¡Œç»“æœï¼š</strong></p><p>å¯¹2Då¹³é¢ä¸­çš„ç›´çº¿è¿›è¡Œæ‹Ÿåˆ</p><img src="/images/ransac/02.png" style="zoom: 50%;"><p>å¯¹ç‚¹äº‘ä¸­çš„å¹³é¢è¿›è¡Œæ‹Ÿåˆ</p><img src="/images/ransac/03.png" style="zoom: 67%;">]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§†è§‰SLAM </tag>
            
            <tag> ç‚¹äº‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ä¸­çš„å¤´æ–‡ä»¶</title>
      <link href="2021/11/21/cpp-notes-0/"/>
      <url>2021/11/21/cpp-notes-0/</url>
      
        <content type="html"><![CDATA[<h1 id="C-ä¸­çš„å¤´æ–‡ä»¶"><a href="#C-ä¸­çš„å¤´æ–‡ä»¶" class="headerlink" title="C++ä¸­çš„å¤´æ–‡ä»¶"></a>C++ä¸­çš„å¤´æ–‡ä»¶</h1><blockquote><p>æœ€è¿‘åœ¨å†™pi-slam-fusionï¼Œé‡åˆ°çš„é—®é¢˜æ¯”è¾ƒå¤šï¼Œæœ€ç¦»è°±çš„é—®é¢˜å¯èƒ½å°±æ˜¯å’Œå¤´æ–‡ä»¶æœ‰å…³çš„è¿™éƒ¨åˆ†äº†ã€‚</p></blockquote><h3 id="1-å…³äºä¸ºä»€ä¹ˆC-éœ€è¦â€œåœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜ï¼Œåœ¨æºæ–‡ä»¶ä¸­å®šä¹‰â€ï¼Ÿ"><a href="#1-å…³äºä¸ºä»€ä¹ˆC-éœ€è¦â€œåœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜ï¼Œåœ¨æºæ–‡ä»¶ä¸­å®šä¹‰â€ï¼Ÿ" class="headerlink" title="1. å…³äºä¸ºä»€ä¹ˆC++éœ€è¦â€œåœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜ï¼Œåœ¨æºæ–‡ä»¶ä¸­å®šä¹‰â€ï¼Ÿ"></a>1. å…³äºä¸ºä»€ä¹ˆC++éœ€è¦â€œåœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜ï¼Œåœ¨æºæ–‡ä»¶ä¸­å®šä¹‰â€ï¼Ÿ</h3><blockquote><p>å½“æ—¶ä¸ºäº†æŠŠpislamå’Œmap2dfusionå¼„åˆ°ä¸€ä¸ªç¨‹åºé‡Œé¢ï¼Œæƒ³å‡ºäº†#include â€œmain.cppâ€ å’ŒæŠŠ â€œmain.cppâ€é‡å‘½åä¸ºâ€pislam.hâ€å†è¿›è¡Œ#includeçš„æ“ä½œï¼Œè¿™æ ·è‚¯å®šæ˜¯æœ‰é—®é¢˜çš„ï¼</p><p>å®é™…ä¸Šå½“æ—¶ä¸€ç¼–è¯‘å°±ä¼šè·Ÿæˆ‘æŠ¥â€œé‡å®šä¹‰â€çš„é”™è¯¯ï¼Œç„¶åæˆ‘å±…ç„¶è¿˜ä»¥ä¸ºæ˜¯CMakeListæ²¡å†™å¥½</p></blockquote><ul><li><p>ç¬¬ä¸€ï¼Œ<strong>é¢„ç¼–è¯‘æŒ‡ä»¤#includeçš„ä½œç”¨æ˜¯å°†æ‰€åŒ…å«çš„æ–‡ä»¶å…¨æ–‡å¤åˆ¶åˆ°#includeçš„ä½ç½®</strong>ï¼Œç›¸å½“äºæ˜¯ä¸ªå±•å¼€ä¸ºä¸€ä¸ªæ–‡ä»¶çš„å®ã€‚</p><p>c++çš„é¢„å¤„ç†å™¨åœ¨ç¼–è¯‘ä¹‹å‰æ‰§è¡Œï¼Œå®ƒçœ‹åˆ°#includeæŒ‡ä»¤ï¼Œå°±ä¼šæŠŠé‚£ä¸ªæ–‡ä»¶çš„å†…å®¹æ›¿æ¢åˆ°å½“å‰ä½ç½®ã€‚å…¶å®ƒçš„é¢„å¤„ç†æŒ‡ä»¤ä¾‹å¦‚#define, #ifdef, ##ç­‰ä¹Ÿåœ¨è¿™ä¸ªé˜¶æ®µè¢«æ‰§è¡Œã€å¹¶äº§ç”Ÿç›¸åº”çš„å†…å®¹ã€‚</p><p>é¢„å¤„ç†å™¨æ‰§è¡Œå®Œæˆåï¼Œæ‰€æœ‰çš„é¢„å¤„ç†æŒ‡ä»¤éƒ½ä¼šè¢«ç§»é™¤ã€‚å…¶ç»“æœæ˜¯ä¸€ä¸ªå•ä¸ªå¤´çš„å¤§æ–‡ä»¶ï¼ˆæˆ‘çŒœæµ‹è¿™æ–‡ä»¶åªå­˜åœ¨äºå†…å­˜é‡Œï¼‰ï¼Œè¿™ä¸ªæ–‡ä»¶æ‰ä¼šè¢«è¿›ä¸€æ­¥ä¼ ç»™ç¼–è¯‘å™¨åšç¼–è¯‘ã€‚</p></li><li><p>ç¬¬äºŒï¼Œ<strong>C++å…è®¸å¤šæ¬¡å£°æ˜ï¼Œä½†åªå…è®¸ä¸€æ¬¡å®ç°ã€‚</strong>æ¯”å¦‚int foo();å°±æ˜¯ä¸€æ¬¡å£°æ˜ï¼Œè€Œint foo(){}å°±æ˜¯ä¸€æ¬¡å®ç°ã€‚</p><p>å¦‚æœç¼–è¯‘æ—¶æœ‰å¤šä¸ª.cppæ–‡ä»¶ä¸­#includeäº†åŒä¸€ä¸ªå«æœ‰å‡½æ•°å®ç°çš„.hï¼Œè¿™æ—¶å€™é“¾æ¥å™¨å°±ä¼šåœ¨å¤šä¸ªç›®æ ‡æ–‡ä»¶ä¸­æ‰¾åˆ°è¿™ä¸ªå‡½æ•°çš„å®ç°ï¼Œè€Œè¿™åœ¨C++ä¸­æ˜¯ä¸å…è®¸çš„ï¼Œæ­¤æ—¶å°±ä¼šå¼•çˆ†<strong>LNK1169é”™è¯¯:æ‰¾åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªé‡å®šä¹‰çš„ç¬¦å·ã€‚</strong></p><p>å› æ­¤ä¸ºäº†è®©å‡½æ•°å¯ä»¥åœ¨å„ä¸ª.cppä¸­å…±äº«ï¼Œæ­£ç¡®çš„åšæ³•å°±æ˜¯åœ¨.hä¸­åªå£°æ˜å‡½æ•°ï¼Œå¹¶åœ¨å¦ã€ ä¸€ä¸ªï¼ˆé‡ç‚¹ï¼‰ã€‘.cppä¸­å®ç°è¿™ä¸ªå‡½æ•°ã€‚è¿™æ ·å°±ä¸ä¼šå†²çªäº†ã€‚</p><blockquote><p>æ‰€ä»¥#includeä¸€ä¸ª.cppæ–‡ä»¶ä¹Ÿæ˜¯ä¸å¯ä»¥çš„ï¼Œè¿™å’Œ#includeä¸€ä¸ªå«æœ‰å‡½æ•°å®ç°çš„.hæ–‡ä»¶æ•ˆæœä¸€æ ·ç³Ÿç³•ã€‚</p></blockquote></li></ul><h3 id="2-å¤´æ–‡ä»¶ä¸­åº”è¯¥å†™ä»€ä¹ˆå†…å®¹ï¼Ÿ"><a href="#2-å¤´æ–‡ä»¶ä¸­åº”è¯¥å†™ä»€ä¹ˆå†…å®¹ï¼Ÿ" class="headerlink" title="2. å¤´æ–‡ä»¶ä¸­åº”è¯¥å†™ä»€ä¹ˆå†…å®¹ï¼Ÿ"></a>2. å¤´æ–‡ä»¶ä¸­åº”è¯¥å†™ä»€ä¹ˆå†…å®¹ï¼Ÿ</h3><blockquote><p>å› ä¸ºé—®é¢˜ä¸€çš„å­˜åœ¨ï¼Œç°åœ¨æˆ‘å…¶å®å¯¹å¤´æ–‡ä»¶é‡Œé¢åº”è¯¥å†™ä»€ä¹ˆä¹Ÿä¸å¤ªæ¸…æ¥šäº†ï¼Œæ‰€ä»¥åˆæŸ¥äº†ä¸€äº›å†…å®¹ã€‚ã€‚ã€‚</p></blockquote><p><strong>å¤´æ–‡ä»¶ä¸­åº”è¯¥åªæ”¾å˜é‡å’Œå‡½æ•°çš„å£°æ˜ï¼Œè€Œä¸èƒ½æ”¾å®ƒä»¬çš„å®šä¹‰ã€‚</strong>ä¸è¿‡è¿™æ ·çš„è§„åˆ™æœ‰ä¸‰ä¸ªä¾‹å¤–ï¼š</p><ol><li><p><strong>å¤´æ–‡ä»¶ä¸­å¯ä»¥å†™ const å¯¹è±¡çš„å®šä¹‰ã€‚</strong></p><p>å› ä¸ºå…¨å±€çš„ const å¯¹è±¡é»˜è®¤æ˜¯æ²¡æœ‰ extern çš„å£°æ˜çš„ï¼Œæ‰€ä»¥å®ƒåªåœ¨å½“å‰æ–‡ä»¶ä¸­æœ‰æ•ˆã€‚</p><p>åŒç†ï¼Œstatic å¯¹è±¡çš„å®šä¹‰ä¹Ÿå¯ä»¥æ”¾è¿›å¤´æ–‡ä»¶ã€‚</p></li><li><p><strong>å¤´æ–‡ä»¶ä¸­å¯ä»¥å†™å†…è”å‡½æ•°ï¼ˆinlineï¼‰çš„å®šä¹‰ã€‚</strong></p><p>C++ è§„å®šï¼Œå†…è”å‡½æ•°å¯ä»¥åœ¨ç¨‹åºä¸­å®šä¹‰å¤šæ¬¡ï¼Œåªè¦å†…è”å‡½æ•°åœ¨ä¸€ä¸ª .cpp æ–‡ä»¶ä¸­åªå‡ºç°ä¸€æ¬¡ï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰çš„ .cpp æ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªå†…è”å‡½æ•°çš„å®šä¹‰æ˜¯ä¸€æ ·çš„ï¼Œå°±èƒ½é€šè¿‡ç¼–è¯‘ã€‚</p><p>é‚£ä¹ˆæ˜¾ç„¶ï¼ŒæŠŠå†…è”å‡½æ•°çš„å®šä¹‰æ”¾è¿›ä¸€ä¸ªå¤´æ–‡ä»¶ä¸­æ˜¯éå¸¸æ˜æ™ºçš„åšæ³•ã€‚</p></li><li><p><strong>å¤´æ–‡ä»¶ä¸­å¯ä»¥å†™ç±»ï¼ˆclassï¼‰çš„å®šä¹‰ã€‚</strong></p><p>ç¼–è¯‘å™¨åªæœ‰åœ¨è¿™ä¸ªç±»çš„å®šä¹‰å®Œå…¨å¯è§çš„æƒ…å†µä¸‹ï¼Œæ‰èƒ½çŸ¥é“è¿™ä¸ªç±»çš„å¯¹è±¡åº”è¯¥å¦‚ä½•å¸ƒå±€ï¼Œæ‰€ä»¥ï¼Œå…³äºç±»çš„å®šä¹‰çš„è¦æ±‚ï¼Œè·Ÿå†…è”å‡½æ•°æ˜¯åŸºæœ¬ä¸€æ ·çš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æŠŠç±»çš„å®šä¹‰æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œè€ŒæŠŠå‡½æ•°æˆå‘˜çš„å®ç°ä»£ç æ”¾åœ¨ä¸€ä¸ª .cpp æ–‡ä»¶ä¸­ã€‚</p><p>ä¹Ÿå¯ä»¥ç›´æ¥æŠŠå‡½æ•°æˆå‘˜çš„å®ç°ä»£ç ä¹Ÿå†™è¿›ç±»å®šä¹‰é‡Œé¢ã€‚<strong>åœ¨ C++ çš„ç±»ä¸­ï¼Œå¦‚æœå‡½æ•°æˆå‘˜åœ¨ç±»çš„å®šä¹‰ä½“ä¸­è¢«å®šä¹‰ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šè§†è¿™ä¸ªå‡½æ•°ä¸ºå†…è”çš„ã€‚</strong>å› æ­¤ï¼ŒæŠŠå‡½æ•°æˆå‘˜çš„å®šä¹‰å†™è¿›ç±»å®šä¹‰ä½“ï¼Œä¸€èµ·æ”¾è¿›å¤´æ–‡ä»¶ä¸­ï¼Œæ˜¯åˆæ³•çš„ã€‚</p><blockquote><p>æ³¨æ„ä¸€ä¸‹ï¼Œå¦‚æœæŠŠå‡½æ•°æˆå‘˜çš„å®šä¹‰å†™åœ¨ç±»å®šä¹‰çš„å¤´æ–‡ä»¶ä¸­ï¼Œè€Œæ²¡æœ‰å†™è¿›ç±»å®šä¹‰ä¸­ï¼Œè¿™æ˜¯ä¸åˆæ³•çš„ï¼Œå› ä¸ºè¿™ä¸ªå‡½æ•°æˆå‘˜æ­¤æ—¶å°±ä¸æ˜¯å†…è”çš„äº†ã€‚ä¸€æ—¦å¤´æ–‡ä»¶è¢«ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„ .cpp æ–‡ä»¶åŒ…å«ï¼Œè¿™ä¸ªå‡½æ•°æˆå‘˜å°±è¢«é‡å®šä¹‰äº†ã€‚</p></blockquote></li></ol><p><strong>å¤´æ–‡ä»¶ä¸­çš„ä¿æŠ¤æªæ–½ï¼š</strong></p><p>è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœ a.h ä¸­å«æœ‰ç±» A çš„å®šä¹‰ï¼Œb.h ä¸­å«æœ‰ç±» B çš„å®šä¹‰ï¼Œç”±äºç±»Bçš„å®šä¹‰ä¾èµ–äº†ç±» Aï¼Œæ‰€ä»¥ b.h ä¸­ä¹Ÿ #includeäº†a.hã€‚ç°åœ¨æœ‰ä¸€ä¸ªæºæ–‡ä»¶ï¼Œå®ƒåŒæ—¶ç”¨åˆ°äº†ç±»Aå’Œç±»Bï¼Œäºæ˜¯ç¨‹åºå‘˜åœ¨è¿™ä¸ªæºæ–‡ä»¶ä¸­æ—¢æŠŠ a.h åŒ…å«è¿›æ¥äº†ï¼Œä¹ŸæŠŠ b.h åŒ…å«è¿›æ¥äº†ã€‚è¿™æ—¶ï¼Œé—®é¢˜å°±æ¥äº†ï¼šç±»Açš„å®šä¹‰åœ¨è¿™ä¸ªæºæ–‡ä»¶ä¸­å‡ºç°äº†ä¸¤æ¬¡ï¼äºæ˜¯æ•´ä¸ªç¨‹åºå°±ä¸èƒ½é€šè¿‡ç¼–è¯‘äº†ã€‚</p><p>ä½¿ç”¨ â€œ#defineâ€ é…åˆæ¡ä»¶ç¼–è¯‘å¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚åœ¨ä¸€ä¸ªå¤´æ–‡ä»¶ä¸­ï¼Œé€šè¿‡ #define å®šä¹‰ä¸€ä¸ªåå­—ï¼Œå¹¶ä¸”é€šè¿‡æ¡ä»¶ç¼–è¯‘ #ifndefâ€¦#endif ä½¿å¾—ç¼–è¯‘å™¨å¯ä»¥æ ¹æ®è¿™ä¸ªåå­—æ˜¯å¦è¢«å®šä¹‰ï¼Œå†å†³å®šè¦ä¸è¦ç»§ç»­ç¼–è¯‘è¯¥å¤´æ–‡ä¸­åç»­çš„å†…å®¹ã€‚è¿™ä¸ªæ–¹æ³•è™½ç„¶ç®€å•ï¼Œä½†æ˜¯å†™å¤´æ–‡ä»¶æ—¶ä¸€å®šè®°å¾—å†™è¿›å»ã€‚</p><p><strong>ç»¼ä¸Šæ‰€è¿°</strong></p><p>.hæ–‡ä»¶ä¸­èƒ½åŒ…å«ï¼š</p><ul><li>ç±»æˆå‘˜æ•°æ®çš„å£°æ˜ï¼Œä½†ä¸èƒ½èµ‹å€¼</li><li>ç±»é™æ€æ•°æ®æˆå‘˜çš„å®šä¹‰å’Œèµ‹å€¼ï¼Œä½†ä¸å»ºè®®ï¼Œåªæ˜¯ä¸ªå£°æ˜å°±å¥½ã€‚</li><li>ç±»çš„æˆå‘˜å‡½æ•°çš„å£°æ˜</li><li>éç±»æˆå‘˜å‡½æ•°çš„å£°æ˜</li><li>å¸¸æ•°çš„å®šä¹‰ï¼šå¦‚ï¼šconstint a=5;</li><li>é™æ€å‡½æ•°çš„å®šä¹‰</li><li>ç±»çš„å†…è”å‡½æ•°çš„å®šä¹‰</li></ul><p>ä¸èƒ½åŒ…å«ï¼š</p><ul><li>æ‰€æœ‰éé™æ€å˜é‡ï¼ˆä¸æ˜¯ç±»çš„æ•°æ®æˆå‘˜ï¼‰çš„å£°æ˜</li><li>é»˜è®¤å‘½åç©ºé—´å£°æ˜ä¸è¦æ”¾åœ¨å¤´æ–‡ä»¶ï¼Œusing namespace std;ç­‰åº”æ”¾åœ¨.cppä¸­ï¼Œåœ¨ .h æ–‡ä»¶ä¸­ä½¿ç”¨ std::string</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Harrisè§’ç‚¹æ£€æµ‹åŸç†</title>
      <link href="2021/11/21/opencv-notes-5/"/>
      <url>2021/11/21/opencv-notes-5/</url>
      
        <content type="html"><![CDATA[<h1 id="Harrisè§’ç‚¹æ£€æµ‹åŸç†"><a href="#Harrisè§’ç‚¹æ£€æµ‹åŸç†" class="headerlink" title="Harrisè§’ç‚¹æ£€æµ‹åŸç†"></a>Harrisè§’ç‚¹æ£€æµ‹åŸç†</h1><p>Harrisè§’ç‚¹æœ€æ—©åœ¨paper A Combined Corner and Edge Detectorä¸­è¢«Chris Harris &amp; Mike Stephensæå‡ºã€‚</p><h2 id="0ã€Harrisè§’ç‚¹æ£€æµ‹çš„åŸºæœ¬æ€æƒ³ï¼š"><a href="#0ã€Harrisè§’ç‚¹æ£€æµ‹çš„åŸºæœ¬æ€æƒ³ï¼š" class="headerlink" title="0ã€Harrisè§’ç‚¹æ£€æµ‹çš„åŸºæœ¬æ€æƒ³ï¼š"></a>0ã€Harrisè§’ç‚¹æ£€æµ‹çš„åŸºæœ¬æ€æƒ³ï¼š</h2><p>ç®—æ³•åŸºæœ¬æ€æƒ³æ˜¯ä½¿ç”¨ä¸€ä¸ªå›ºå®šçª—å£åœ¨å›¾åƒä¸Šè¿›è¡Œä»»æ„æ–¹å‘ä¸Šçš„æ»‘åŠ¨ï¼Œæ¯”è¾ƒæ»‘åŠ¨å‰ä¸æ»‘åŠ¨åä¸¤ç§æƒ…å†µï¼Œçª—å£ä¸­çš„åƒç´ ç°åº¦å˜åŒ–ç¨‹åº¦ï¼Œå¦‚æœå­˜åœ¨ä»»æ„æ–¹å‘ä¸Šçš„æ»‘åŠ¨ï¼Œéƒ½æœ‰ç€è¾ƒå¤§ç°åº¦å˜åŒ–ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®¤ä¸ºè¯¥çª—å£ä¸­å­˜åœ¨è§’ç‚¹ã€‚</p><p><img src="/images/OpenCV-Notes/5-01.png"></p><h2 id="1ã€ç°åº¦å˜åŒ–æè¿°"><a href="#1ã€ç°åº¦å˜åŒ–æè¿°" class="headerlink" title="1ã€ç°åº¦å˜åŒ–æè¿°"></a>1ã€ç°åº¦å˜åŒ–æè¿°</h2><p>å½“çª—å£å‘ç”Ÿ$ [u,v] $ç§»åŠ¨æ—¶ï¼Œé‚£ä¹ˆ<strong>æ»‘åŠ¨å‰ä¸æ»‘åŠ¨åå¯¹åº”çš„çª—å£ä¸­çš„åƒç´ ç‚¹ç°åº¦å˜åŒ–</strong>æè¿°å¦‚ä¸‹ï¼š<br>$$<br>E(u,v)=\sum\limits_{(x,y)â‚¬W}w(x,y)[I(x+u,y+v)-I(x,y)]^2<br>$$<br>å…¶ä¸­</p><ul><li>$[u,v]$æ˜¯çª—å£$W$çš„åç§»é‡ï¼›</li><li>$(x,y)$æ˜¯çª—å£$W$æ‰€å¯¹åº”çš„åƒç´ åæ ‡ä½ç½®ï¼Œçª—å£æœ‰å¤šå¤§ï¼Œå°±æœ‰å¤šå°‘ä¸ªä½ç½®ï¼›</li><li>$I(x,y)$æ˜¯åƒç´ åæ ‡ä½ç½®$(x,y)$çš„å›¾åƒç°åº¦å€¼ï¼›</li><li>$I(x+u,y+v)$æ˜¯åƒç´ åæ ‡ä½ç½®$(x+u,y+v)$çš„å›¾åƒç°åº¦å€¼ï¼›</li><li>$w(x,y)$æ˜¯çª—å£å‡½æ•°ï¼Œæœ€ç®€å•æƒ…å½¢å°±æ˜¯çª—å£$W$å†…çš„æ‰€æœ‰åƒç´ æ‰€å¯¹åº”çš„$w$æƒé‡ç³»æ•°å‡ä¸º1.ä½†æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå°†$w(x,y)$å‡½æ•°è®¾ç½®ä¸ºä»¥çª—å£$W$ä¸­å¿ƒä¸ºåŸç‚¹çš„äºŒå…ƒæ­£å¤ªåˆ†å¸ƒã€‚å¦‚æœçª—å£$W$ä¸­å¿ƒç‚¹æ˜¯è§’ç‚¹æ—¶ï¼Œç§»åŠ¨å‰ä¸ç§»åŠ¨åï¼Œè¯¥ç‚¹åœ¨ç°åº¦å˜åŒ–è´¡çŒ®æœ€å¤§ï¼›è€Œç¦»çª—å£$W$ä¸­å¿ƒ(è§’ç‚¹)è¾ƒè¿œçš„ç‚¹ï¼Œè¿™äº›ç‚¹çš„ç°åº¦å˜åŒ–å‡ è¿‘å¹³ç¼“ï¼Œè¿™äº›ç‚¹çš„æƒé‡ç³»æ•°ï¼Œå¯ä»¥è®¾å®šå°å€¼ï¼Œä»¥ç¤ºè¯¥ç‚¹å¯¹ç°åº¦å˜åŒ–è´¡çŒ®è¾ƒå°ï¼Œé‚£ä¹ˆæˆ‘ä»¬è‡ªç„¶è€Œç„¶æƒ³åˆ°ä½¿ç”¨äºŒå…ƒé«˜æ–¯å‡½æ•°æ¥è¡¨ç¤ºçª—å£å‡½æ•°ï¼›</li></ul><p>æ ¹æ®ä¸Šè¿°è¡¨è¾¾å¼ï¼Œå½“çª—å£åœ¨å¹³å¦åŒºåŸŸä¸Šç§»åŠ¨ç°åº¦ä¸ä¼šå‘ç”Ÿä»€ä¹ˆå˜æ¢ã€‚å¦‚æœçª—å£å¤„åœ¨çº¹ç†æ¯”è¾ƒä¸°å¯Œçš„åŒºåŸŸä¸Šæ»‘åŠ¨ï¼Œé‚£ä¹ˆç°åº¦å˜åŒ–ä¼šå¾ˆå¤§ã€‚</p><p>ç®—æ³•æœ€ç»ˆæ€æƒ³å°±æ˜¯è®¡ç®—ç°åº¦å‘ç”Ÿè¾ƒå¤§å˜åŒ–æ—¶æ‰€å¯¹åº”çš„ä½ç½®ï¼Œå½“ç„¶è¿™ä¸ªè¾ƒå¤§æ˜¯æŒ‡ä»»æ„æ–¹å‘ä¸Šçš„æ»‘åŠ¨ï¼Œå¹¶éå•æŒ‡æŸä¸ªæ–¹å‘ã€‚</p><h2 id="2ã€-E-u-v-åŒ–ç®€"><a href="#2ã€-E-u-v-åŒ–ç®€" class="headerlink" title="2ã€ $E(u,v)$åŒ–ç®€"></a>2ã€ $E(u,v)$åŒ–ç®€</h2><p>æ ¹æ®æ³°å‹’å…¬å¼:<br>$$<br>f(x+u,y+v)â‰ˆf(x,y)+uf_x(x,y)+vf_y(x,y)<br>$$<br>æˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢çš„å…¬å¼åŒ–ç®€ä¸º:<br>$$<br>\sum\limits_{(x,y)â‚¬W}w(x,y)[I(x+u,y+v)-I(x,y)]^2\\<br>â‰ˆ\sum\limits_{(x,y)â‚¬W}w(x,y)[I(x,y)+uI_x+vI_y-I(x,y)]^2\\<br>=\sum\limits_{(x,y)â‚¬W}w(x,y)[u^2I_x^2+2uvI_xI_y+v^2I_y^2]\\<br>=\sum\limits_{(x,y)â‚¬W}w(x,y)\begin{bmatrix}u &amp; v\end{bmatrix}\begin{bmatrix} I_x^2 &amp; I_xIy \   I_xI_y &amp; I_y^2\end{bmatrix}\begin{bmatrix}u \ v\end{bmatrix}\\<br>=\begin{bmatrix}u &amp; v\end{bmatrix}(\sum\limits_{(x,y)â‚¬W}w(x,y)\begin{bmatrix} I_x^2 &amp; I_xIy \   I_xI_y &amp; I_y^2\end{bmatrix})\begin{bmatrix}u \ v\end{bmatrix}<br>$$<br>æ‰€ä»¥$E(u,v)$è¡¨è¾¾å¼å¯ä»¥æ›´æ–°ä¸ºï¼š<br>$$<br>E(u,v)=\begin{bmatrix}u &amp; v\end{bmatrix}M\begin{bmatrix}u \ v\end{bmatrix}<br>$$<br>å…¶ä¸­ï¼š$M=\sum\limits_{(x,y)â‚¬W}w(x,y)\begin{bmatrix} I_x^2 &amp; I_xIy \   I_xI_y &amp; I_y^2\end{bmatrix}$,</p><p>$I_x$,$I_y$åˆ†åˆ«ä¸ºçª—å£å†…åƒç´ ç‚¹$(x,y)$åœ¨$x$æ–¹å‘ä¸Šå’Œ$y$æ–¹å‘ä¸Šçš„æ¢¯åº¦å€¼ã€‚</p><h2 id="3ã€çŸ©é˜µ-M-çš„å…³é”®æ€§"><a href="#3ã€çŸ©é˜µ-M-çš„å…³é”®æ€§" class="headerlink" title="3ã€çŸ©é˜µ$M$çš„å…³é”®æ€§"></a>3ã€çŸ©é˜µ$M$çš„å…³é”®æ€§</h2><p>Harrisè§’ç‚¹æ£€æµ‹ç®—æ³•å¹¶ä¸æ˜¯ç›´æ¥æ ¹æ®$E(u,v)$æ¥åˆ¤æ–­è§’ç‚¹çš„ï¼Œè€Œæ˜¯é€šè¿‡å¯¹çª—å£å†…çš„æ¯ä¸ªåƒç´ çš„$x$æ–¹å‘ä¸Šçš„æ¢¯åº¦ä¸$y$æ–¹å‘ä¸Šçš„æ¢¯åº¦è¿›è¡Œç»Ÿè®¡åˆ†æã€‚å‡è®¾æˆ‘ä»¬è¿™é‡Œä»¥$I_x$å’Œ$I_y$ä¸ºåæ ‡è½´ï¼Œåˆ™æ¯ä¸ªåƒç´ çš„æ¢¯åº¦åæ ‡å¯ä»¥è¡¨ç¤ºæˆ$(I_x,I_y)$ã€‚</p><p>é’ˆå¯¹å¹³å¦åŒºåŸŸï¼Œè¾¹ç¼˜åŒºåŸŸä»¥åŠè§’ç‚¹åŒºåŸŸä¸‰ç§æƒ…å½¢è¿›è¡Œåˆ†æï¼š</p><p><img src="/images/OpenCV-Notes/5-02.png"></p><p>ä¸‹å›¾æ˜¯å¯¹è¿™ä¸‰ç§æƒ…å†µçª—å£ä¸­çš„å¯¹åº”åƒç´ çš„æ¢¯åº¦åˆ†å¸ƒè¿›è¡Œç»˜åˆ¶ï¼š</p><p><img src="/images/OpenCV-Notes/5-03.png"></p><p>æˆ‘ä»¬å¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹å‡ºè¿™ä¸‰ç§åŒºåŸŸçš„ç‰¹ç‚¹:</p><ul><li><p>å¹³å¦åŒºåŸŸä¸Šçš„æ¯ä¸ªåƒç´ ç‚¹æ‰€å¯¹åº”çš„$(I_x,I_y)$åæ ‡åˆ†å¸ƒåœ¨åŸç‚¹é™„è¿‘ã€‚</p><p>å…¶å®ä¹Ÿå¾ˆå¥½ç†è§£ï¼šé’ˆå¯¹å¹³å¦åŒºåŸŸçš„åƒç´ ç‚¹ï¼Œä»–ä»¬çš„æ¢¯åº¦æ–¹å‘è™½ç„¶å„å¼‚ï¼Œä½†æ˜¯å…¶å¹…å€¼éƒ½ä¸æ˜¯å¾ˆå¤§ï¼Œæ‰€ä»¥å‡èšé›†åœ¨åŸç‚¹é™„è¿‘ã€‚</p></li><li><p>è¾¹ç¼˜åŒºåŸŸæœ‰ä¸€åæ ‡è½´åˆ†å¸ƒè¾ƒæ•£ã€‚</p><p>è‡³äºæ˜¯å“ªä¸€ä¸ªåæ ‡ä¸Šçš„æ•°æ®åˆ†å¸ƒè¾ƒæ•£ä¸èƒ½ä¸€æ¦‚è€Œè®ºï¼Œè¿™è¦è§†è¾¹ç¼˜åœ¨å›¾åƒä¸Šçš„å…·ä½“ä½ç½®è€Œå®šï¼Œå¦‚æœè¾¹ç¼˜æ˜¯æ°´å¹³æˆ–è€…å‚ç›´æ–¹å‘ï¼Œé‚£ä¹ˆ$I_y$è½´æ–¹å‘æˆ–è€…$I_x$æ–¹å‘ä¸Šçš„æ•°æ®åˆ†å¸ƒå°±æ¯”è¾ƒæ•£ï¼›</p></li><li><p>è§’ç‚¹åŒºåŸŸçš„$I_x$ã€$I_y$æ–¹å‘ä¸Šçš„æ¢¯åº¦åˆ†å¸ƒéƒ½æ¯”è¾ƒæ•£ã€‚</p></li></ul><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•åˆ©ç”¨è¿™äº›ç‰¹å¾æ¥åˆ¤æ–­å“ªäº›åŒºåŸŸå­˜åœ¨è§’ç‚¹ã€‚</p><p>ä¹‹å‰æˆ‘ä»¬å·²ç»è®¡ç®—å‡ºäº†$M$çŸ©é˜µï¼š<br>$$<br>M=<br>\sum\limits_{(x,y)â‚¬W}w(x,y)\begin{bmatrix} I_x^2 &amp; I_xIy \   I_xI_y &amp; I_y^2\end{bmatrix}=<br>\begin{bmatrix} A &amp; C \   C &amp; B \end{bmatrix}<br>$$<br>æˆ‘ä»¬å¯ä»¥æŠŠ$E(u,v)$è¿‘ä¼¼ä¸ºäºŒé¡¹å‡½æ•°ï¼š$E(u,v)=Au^2+2Cuv+Bv^2$</p><p>å…¶ä¸­ï¼š<br>$$<br>A=\sum\limits_{(x,y)â‚¬W}w(x,y)*I_x^2\<br>B=\sum\limits_{(x,y)â‚¬W}w(x,y)*I_y^2\<br>C=\sum\limits_{(x,y)â‚¬W}w(x,y)*I_xI_y<br>$$<br>äºŒæ¬¡é¡¹å‡½æ•°æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ¤­åœ†å‡½æ•°ã€‚æ¤­åœ†çš„é•¿å’Œå®½æ˜¯ç”±$M$çš„ç‰¹å¾å€¼$Î»1,Î»2$å†³å®šçš„(æ¤­åœ†çš„é•¿çŸ­è½´æ­£æ˜¯çŸ©é˜µ$M$ç‰¹å¾å€¼å¹³æ–¹æ ¹çš„å€’æ•°)ï¼Œæ¤­åœ†çš„æ–¹å‘æ˜¯ç”±$M$çš„ç‰¹å¾å‘é‡å†³å®šçš„ï¼Œæ¤­åœ†æ–¹ç¨‹ä¸ºï¼š<br>$$<br>\begin{bmatrix} u &amp; v \end{bmatrix}M\begin{bmatrix} u \ v \end{bmatrix}=1<br>$$</p><p>å¦‚æœä½¿ç”¨æ¤­åœ†è¿›è¡Œæ•°æ®é›†è¡¨ç¤ºï¼Œåˆ™ç»˜åˆ¶å›¾ç¤ºå¦‚ä¸‹ï¼š</p><p><img src="/images/OpenCV-Notes/5-04.png"></p><p>ä»ä¸Šå›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼š</p><ul><li>å¦‚æœ$Î»1,Î»2$éƒ½å¾ˆå¤§ï¼Œå¹¶ä¸”å¾ˆæ¥è¿‘ï¼Œå°±å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªè§’ç‚¹</li><li>å¦‚æœ$Î»1,Î»2$ä¸­åªæœ‰ä¸€ä¸ªå€¼å¤§ï¼Œé‚£ä¹ˆè¿™åªæ˜¯ä¸€ä¸ªè¾¹ç¼˜ï¼Œä¸æ˜¯è§’ç‚¹</li><li>å¦‚æœ$Î»1,Î»2$å¾ˆæ¥è¿‘ä½†æ˜¯æ•°å€¼æ¯”è¾ƒå°ï¼Œé‚£ä¹ˆè¿™é‡Œå°±æ˜¯ä¸€ä¸ªå¹³å¦åŒºåŸŸ</li></ul><h2 id="4ã€è§’ç‚¹å“åº”çš„åº¦é‡"><a href="#4ã€è§’ç‚¹å“åº”çš„åº¦é‡" class="headerlink" title="4ã€è§’ç‚¹å“åº”çš„åº¦é‡"></a>4ã€è§’ç‚¹å“åº”çš„åº¦é‡</h2><p>é€šå¸¸ç”¨ä¸‹é¢è¡¨è¾¾å¼è¿›è¡Œåº¦é‡ï¼Œå¯¹æ¯ä¸€ä¸ªçª—å£è®¡ç®—å¾—åˆ°ä¸€ä¸ªåˆ†æ•°$R$ï¼Œæ ¹æ®$R$çš„å¤§å°æ¥åˆ¤å®šçª—å£å†…æ˜¯å¦å­˜åœ¨harrisç‰¹å¾è§’ç‚¹ã€‚åˆ†æ•°$R$æ ¹æ®ä¸‹é¢å…¬å¼è®¡ç®—å¾—åˆ°ï¼š<br>$$<br>R=det(M)-k(trace(M))^2\<br>det(M)=Î»_1Î»_2\<br>trace(M)=Î»_1+Î»_2<br>$$<br>è¿™é‡Œ$Î»1,Î»2$æ˜¯çŸ©é˜µ$M$çš„2ä¸ªç‰¹å¾å€¼ï¼Œ$k$æ˜¯ä¸€ä¸ªæŒ‡å®šå€¼ï¼Œè¿™æ˜¯ä¸€ä¸ªç»éªŒå‚æ•°ï¼Œéœ€è¦å®éªŒç¡®å®šå®ƒçš„åˆé€‚å¤§å°ï¼Œé€šå¸¸å®ƒçš„å€¼åœ¨0.04å’Œ0.06ä¹‹é—´,å®ƒçš„å­˜åœ¨åªæ˜¯è°ƒèŠ‚å‡½æ•°çš„å½¢çŠ¶è€Œå·²ã€‚</p><p>$R$å–å†³äº$M$çš„ç‰¹å¾å€¼ï¼Œå¯¹äºè§’ç‚¹$|R|$å¾ˆå¤§ï¼Œå¹³å¦çš„åŒºåŸŸ$|R|$å¾ˆå°ï¼Œè¾¹ç¼˜çš„$R$ä¸ºè´Ÿå€¼;</p><p><img src="/images/OpenCV-Notes/5-05.png"></p><p>æœ€åè®¾å®šRçš„é˜ˆå€¼ï¼Œè¿›è¡Œè§’ç‚¹åˆ¤æ–­å³å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenCV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŒºåˆ†PIXHAWKã€PX4ä¸APM(ardupilot)</title>
      <link href="2021/07/27/uav-notes-1/"/>
      <url>2021/07/27/uav-notes-1/</url>
      
        <content type="html"><![CDATA[<h1 id="åŒºåˆ†PIXHAWKã€PX4ä¸APM-ardupilot"><a href="#åŒºåˆ†PIXHAWKã€PX4ä¸APM-ardupilot" class="headerlink" title="åŒºåˆ†PIXHAWKã€PX4ä¸APM(ardupilot)"></a>åŒºåˆ†PIXHAWKã€PX4ä¸APM(ardupilot)</h1><h3 id="ä¸€ã€PIXHAWKä»‹ç»"><a href="#ä¸€ã€PIXHAWKä»‹ç»" class="headerlink" title="ä¸€ã€PIXHAWKä»‹ç»"></a>ä¸€ã€PIXHAWKä»‹ç»</h3><p><strong>pixhawkæ˜¯ç¡¬ä»¶å¹³å°</strong>ï¼ŒPX4æ˜¯pixhawkçš„åŸç”Ÿå›ºä»¶ï¼Œä¸“é—¨ä¸ºpixhawkå¼€å‘ã€‚</p><img src="/images/UAV-notes/1-1.jpg" alt="" style="zoom: 18%;"><p>Pixhawkæ˜¯ä¸€æ¬¾ç”±PX4å¼€æºé¡¹ç›®è®¾è®¡å¹¶ç”±3DRå…¬å¸åˆ¶é€ ç”Ÿäº§çš„é«˜çº§è‡ªåŠ¨é©¾é©¶ä»ªç³»ç»Ÿï¼Œå…¶å‰èº«æ˜¯APMã€‚APMï¼ˆArdupilot Megaï¼‰ä¹Ÿæ˜¯ç¡¬ä»¶ï¼ŒArdupilotæ˜¯APMçš„å›ºä»¶ï¼Œæ‰€ä»¥ç§°ArduPilotå›ºä»¶ä¹Ÿå«APMã€‚</p><img src="/images/UAV-notes/1-2.png" alt="" style="zoom:30%;"><p>ç”±äºAPMçš„å¤„ç†å™¨å·²ç»æ¥è¿‘æ»¡è´Ÿè·ï¼Œæ²¡æœ‰åŠæ³•æ»¡è¶³æ›´å¤æ‚çš„è¿ç®—å¤„ç†ï¼Œæ‰€ä»¥ç¡¬ä»¶å‚å•†é‡‡ç”¨äº†ç›®å‰æ–°æ ‡å‡†çš„32ä½ARMå¤„ç†å™¨ï¼Œå®ƒé‡‡ç”¨äº†ST Microelectronicå…ˆè¿›çš„å¤„ç†å™¨åŠä¼ æ„Ÿå™¨æŠ€æœ¯ä¸”æ­è½½äº†NuttXçš„å®æ—¶æ“ä½œç³»ç»Ÿï¼Œåœ¨æ¨¡å‹è‡ªåŠ¨æ§åˆ¶æ–¹é¢æœ‰ç€å‡ºè‰²çš„æ€§èƒ½ã€çµæ´»æ€§å’Œå¯é æ€§ã€‚</p><p>PIXHAWKçš„æ‰€æœ‰ç¡¬ä»¶éƒ½æ˜¯é€æ˜çš„ï¼Œå®ƒç”¨çš„æ˜¯ä»€ä¹ˆèŠ¯ç‰‡å’Œä¼ æ„Ÿå™¨ä¸€ç›®äº†ç„¶ï¼Œæ‰€æœ‰çš„æ€»çº¿å’Œå¤–è®¾éƒ½è¿›è¡Œå¼•å‡ºï¼Œä¸ä½†ä»¥åå¯ä»¥å…¼å®¹ä¸€äº›å…¶ä»–å¤–è®¾ï¼Œè€Œä¸”å¯¹äºæœ‰å¼€å‘èƒ½åŠ›çš„ç”¨æˆ·æä¾›äº†æ–¹ä¾¿ã€‚ PIXHAWK æ˜¯ä¸€ä¸ªåŒå¤„ç†å™¨çš„é£è¡Œæ§åˆ¶å™¨ï¼Œä¸€ä¸ªæ“…é•¿äºå¼ºå¤§è¿ç®—çš„ 32 bit STM32F427 Cortex M4 æ ¸å¿ƒ 168 MHz/256 KB RAM/2 MB Flash å¤„ç†å™¨ï¼Œè¿˜æœ‰ä¸€ä¸ªä¸»è¦å®šä½äºå·¥ä¸šç”¨é€”çš„åå¤„ç†å™¨ 32 bit STM32F103ï¼Œå®ƒçš„ç‰¹ç‚¹å°±æ˜¯å®‰å…¨ç¨³å®šã€‚æ‰€ä»¥å°±ç®—ä¸»å¤„ç†å™¨æ­»æœºäº†ï¼Œè¿˜æœ‰ä¸€ä¸ªåå¤„ç†å™¨æ¥ä¿éšœå®‰å…¨ã€‚</p><h3 id="äºŒã€PX4ä»‹ç»"><a href="#äºŒã€PX4ä»‹ç»" class="headerlink" title="äºŒã€PX4ä»‹ç»"></a>äºŒã€PX4ä»‹ç»</h3><p>PX4å›ºä»¶ä¸“ä¸ºPIXHAWKå¼€å‘çš„å›ºä»¶ã€‚ç›¸å¯¹å°é—­ï¼Œä»£ç ä½“ç³»ç›¸å¯¹ç®€å•æ¸…æ™°ï¼Œç¤¾åŒºç›¸å¯¹å°ï¼Œè¿­ä»£æ…¢ä¸€äº›ï¼Œä½†å› ä¸ºç›¸å¯¹æ¸…æ™°ï¼Œé€‚åˆå­¦ä¹ ç ”ç©¶ã€‚</p><p>PX4åœ°é¢æ§åˆ¶ç«™è¢«ç§°ä¸ºQGroundControlï¼Œï¼ˆç®€ç§°QGCï¼‰æ˜¯PX4è‡ªé©¾ç³»ç»Ÿä¸å¯åˆ†å‰²çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥è¿è¡Œåœ¨Windowsï¼ŒOS Xæˆ–Linuxç­‰å¤šä¸ªå¹³å°ã€‚å¯ä»¥å°†PX4å›ºä»¶çƒ§å†™åˆ°ç¡¬ä»¶ï¼Œè®¾ç½®æœºå™¨ï¼Œæ”¹å˜ä¸åŒçš„å‚æ•°ï¼Œè·å¾—å®æ—¶èˆªç­ä¿¡æ¯ï¼Œåˆ›å»ºå’Œæ‰§è¡Œå®Œå…¨è‡ªä¸»çš„ä»»åŠ¡ã€‚</p><h3 id="ä¸‰ã€APMä»‹ç»"><a href="#ä¸‰ã€APMä»‹ç»" class="headerlink" title="ä¸‰ã€APMä»‹ç»"></a>ä¸‰ã€APMä»‹ç»</h3><p>APMå›ºä»¶ä¸“ä¸ºArduupilotå¼€å‘çš„å›ºä»¶ï¼Œç°ä¹Ÿç”¨äºPIXHAWKã€‚æœ‰ArduCopterç¤¾åŒºæ”¯æ’‘ã€å¼€æ”¾ï¼ŒåŠŸèƒ½å…¨ã€è¿­ä»£å‡çº§å¿«ï¼Œé€‚åˆç›´æ¥ç”¨ã€‚ç”±äºæœ‰è¾ƒå¤šçš„å†å²å…¼å®¹æ€§éœ€æ±‚ï¼Œè½¯ä»¶ä»£ç ä½“ç³»ç›¸å¯¹æ‚ä¹±ï¼Œè¿˜å°è£…äº†PX4çš„å†…æ ¸ï¼Œå­¦ä¹ èµ·æ¥å›°éš¾äº›ã€‚</p><p>APMåœ°é¢æ§åˆ¶ç«™è¢«ç§°ä¸ºMission Plannerï¼Œï¼ˆç®€ç§°MPï¼‰æ˜¯APMè‡ªé©¾ç³»ç»Ÿä¸å¯åˆ†å‰²çš„ä¸€éƒ¨åˆ†ã€‚å¯ä»¥å°†APMå›ºä»¶çƒ§å†™åˆ°ç¡¬ä»¶ï¼Œè®¾ç½®æœºå™¨ï¼Œæ”¹å˜ä¸åŒçš„å‚æ•°ï¼Œè·å¾—å®æ—¶èˆªç­ä¿¡æ¯ï¼Œåˆ›å»ºå’Œæ‰§è¡Œå®Œå…¨è‡ªä¸»çš„ä»»åŠ¡ã€‚</p><p>éšç€APMé£æ§è½¯ä»¶çš„å¿«é€Ÿå‘å±•ï¼ŒAVRæ¿å­çš„æ€§èƒ½å·²ç»ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œæ‰€ä»¥åªèƒ½é€æ­¥ç§»æ¤åˆ°Pixhawkçš„ç¡¬ä»¶æ¶æ„ä¸Šæ¥è¿›è¡Œå¼€å‘ã€‚æ‰€ä»¥ï¼ŒAPMè‡ªé©¾ä»ªè½¯ä»¶ä¹Ÿå°±å…¼å®¹PIXHAWKé£æ§ç¡¬ä»¶äº†ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p><strong>PIXHAWKé£æ§æ˜¯ç¡¬ä»¶å¹³å°ï¼ŒPX4å’ŒAPMéƒ½æ˜¯å¼€æºå›ºä»¶ï¼Œå‡å¯ä»¥çƒ§å†™åˆ°PIXHAWKé£æ§ä¸­ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PX4 </tag>
            
            <tag> PIXHAWK </tag>
            
            <tag> APM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PX4 Offboard Control Using MAVROS on Gazebo</title>
      <link href="2021/07/23/ros-notes-6/"/>
      <url>2021/07/23/ros-notes-6/</url>
      
        <content type="html"><![CDATA[<h1 id="PX4-Offboard-Control-Using-MAVROS-on-Gazebo"><a href="#PX4-Offboard-Control-Using-MAVROS-on-Gazebo" class="headerlink" title="PX4 Offboard Control Using MAVROS on Gazebo"></a>PX4 Offboard Control Using MAVROS on Gazebo</h1><p>æœ€è¿‘åœ¨å­¦ä¹ PX4å’Œmavrosï¼Œæ„Ÿè§‰px4å®˜ç½‘çš„æ•™ç¨‹æ€»ä½“ä¸Šè®²å¾—ä¸é”™ï¼Œä½†æœ‰ä¸€äº›åœ°æ–¹ä¸æ˜¯å¾ˆå‹å¥½ï¼Œæ¯”å¦‚offboard controlè¿™ä¸€å—å„¿ï¼Œè®²çš„æ¯”è¾ƒç®€å•ï¼Œçœç•¥äº†gazeboçš„ä½¿ç”¨ï¼Œæˆ‘ä¸Šç½‘æŸ¥äº†ä¸€å¤§å †èµ„æ–™æ‰å‹‰å¼ºæŠŠè¿™ä¸ªç¤ºä¾‹ä»£ç åœ¨gazeboä¸­è·‘å‡ºæ¥ã€‚æ‰€ä»¥è¿™é‡Œåšä¸€ä¸ªè®°å½•ï¼Œå¸Œæœ›å¯¹çœ‹åˆ°çš„äººæœ‰ç‚¹å¸®åŠ©ã€‚</p><h2 id="å®‰è£…MAVROS"><a href="#å®‰è£…MAVROS" class="headerlink" title="å®‰è£…MAVROS"></a>å®‰è£…MAVROS</h2><blockquote><p>ä»‹ç»å®‰è£…mavrosçš„ä¸¤ç§æ–¹å¼ï¼Œå»ºè®®å‚è€ƒï¼š<a href="https://docs.px4.io/master/en/ros/mavros_installation.html">ROS with MAVROS Installation Guide</a>ã€‚</p></blockquote><h3 id="æ–¹æ³•ä¸€ï¼šäºŒè¿›åˆ¶å®‰è£…-Debian-Ubuntu"><a href="#æ–¹æ³•ä¸€ï¼šäºŒè¿›åˆ¶å®‰è£…-Debian-Ubuntu" class="headerlink" title="æ–¹æ³•ä¸€ï¼šäºŒè¿›åˆ¶å®‰è£… (Debian / Ubuntu)"></a>æ–¹æ³•ä¸€ï¼šäºŒè¿›åˆ¶å®‰è£… (Debian / Ubuntu)</h3><p>ROS å­˜å‚¨åº“åŒ…å«é€‚ç”¨äº Ubuntu x86ã€amd64 (x86_64) å’Œ armhf (ARMv7) çš„äºŒè¿›åˆ¶åŒ…ã€‚Kinetic è¿˜æ”¯æŒ Debian Jessie amd64 å’Œ arm64 (ARMv8)ã€‚</p><p>ä½¿ç”¨<code>apt-get</code>å®‰è£…ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> ros-melodic-mavros ros-melodic-mavros-extras<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç„¶åå®‰è£…<a href="https://geographiclib.sourceforge.io/">GeographicLib</a>é€šè¿‡è¿è¡Œ<code>install_geographiclib_datasets.sh</code>è„šæœ¬è·å–æ•°æ®é›†ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">wget</span> https://raw.githubusercontent.com/mavlink/mavros/master/mavros/scripts/install_geographiclib_datasets.sh<span class="token function">sudo</span> <span class="token function">bash</span> ./install_geographiclib_datasets.sh   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="æ–¹æ³•äºŒï¼šæºç å®‰è£…"><a href="#æ–¹æ³•äºŒï¼šæºç å®‰è£…" class="headerlink" title="æ–¹æ³•äºŒï¼šæºç å®‰è£…"></a>æ–¹æ³•äºŒï¼šæºç å®‰è£…</h3><p>æ­¤å®‰è£…å‡å®šæ‚¨æœ‰ä¸€ä¸ª catkin å·¥ä½œåŒºä½äº<code>~/catkin_ws</code>å¦‚æœæ‚¨ä¸ä½¿ç”¨ä»¥ä¸‹å†…å®¹åˆ›å»ºä¸€ä¸ªï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/catkin_ws/src<span class="token builtin class-name">cd</span> ~/catkin_wscatkin initwstool init src<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ‚¨å°†ä½¿ç”¨ ROS Python å·¥å…·ï¼š<em>wstool</em>ï¼ˆç”¨äºæ£€ç´¢æºï¼‰ã€<em>rosinstall</em>å’Œ<em>catkin_tools</em>ï¼ˆæ„å»ºï¼‰è¿›è¡Œæ­¤å®‰è£…ã€‚è™½ç„¶å®ƒä»¬å¯èƒ½æ˜¯åœ¨æ‚¨å®‰è£… ROS æœŸé—´å®‰è£…çš„ï¼Œä½†æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®‰è£…å®ƒä»¬ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> python-catkin-tools python-rosinstall-generator <span class="token parameter variable">-y</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>è™½ç„¶å¯ä»¥ä½¿ç”¨<strong>catkin_make</strong>æ„å»ºåŒ…ï¼Œä½†é¦–é€‰æ–¹æ³•æ˜¯ä½¿ç”¨<strong>catkin_toolsï¼Œ</strong>å› ä¸ºå®ƒæ˜¯ä¸€ç§æ›´é€šç”¨ä¸”â€œå‹å¥½â€çš„æ„å»ºå·¥å…·ã€‚</p></blockquote><p>å¦‚æœè¿™æ˜¯æ‚¨ç¬¬ä¸€æ¬¡ä½¿ç”¨ wstoolï¼Œåˆ™éœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–æºç©ºé—´ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wstool init ~/catkin_ws/src<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç°åœ¨æ‚¨å·²å‡†å¤‡å¥½è¿›è¡Œæ„å»º</p><ol><li><p>å®‰è£… MAVLinkï¼›</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># We use the Kinetic reference for all ROS distros as it's not distro-specific and up to date</span>rosinstall_generator <span class="token parameter variable">--rosdistro</span> kinetic mavlink <span class="token operator">|</span> <span class="token function">tee</span> /tmp/mavros.rosinstall<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>ä½¿ç”¨å·²å‘å¸ƒæˆ–æœ€æ–°ç‰ˆæœ¬ä»æºä»£ç å®‰è£… MAVROSï¼›</p><ul><li><p>å‘è¡Œç‰ˆ / ç¨³å®šç‰ˆ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosinstall_generator <span class="token parameter variable">--upstream</span> mavros <span class="token operator">|</span> <span class="token function">tee</span> <span class="token parameter variable">-a</span> /tmp/mavros.rosinstall<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>æœ€æ–°æºç </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosinstall_generator --upstream-development mavros <span class="token operator">|</span> <span class="token function">tee</span> <span class="token parameter variable">-a</span> /tmp/mavros.rosinstall<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># For fetching all the dependencies into your catkin_ws, </span><span class="token comment"># just add '--deps' to the above scripts, E.g.:</span><span class="token comment">#   rosinstall_generator --upstream mavros --deps | tee -a /tmp/mavros.rosinstall</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p>åˆ›å»ºå·¥ä½œåŒº &amp; å®‰è£…ä¾èµ–ï¼›</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wstool merge <span class="token parameter variable">-t</span> src /tmp/mavros.rosinstallwstool update <span class="token parameter variable">-t</span> src <span class="token parameter variable">-j4rosdep</span> <span class="token function">install</span> --from-paths src --ignore-src <span class="token parameter variable">-y</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>å®‰è£… <a href="https://geographiclib.sourceforge.io/">GeographicLib</a>æ•°æ®é›†ï¼›</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">./src/mavros/mavros/scripts/install_geographiclib_datasets.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>æ„å»ºï¼›</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">catkin build<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>ç¡®ä¿æ‚¨ä½¿ç”¨å·¥ä½œåŒºä¸­çš„ setup.bash æˆ– setup.zshã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#Needed or rosrun can't find nodes from this workspace.</span><span class="token builtin class-name">source</span> devel/setup.bash<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ol><p>å‡ºç°é”™è¯¯çš„æƒ…å†µä¸‹ï¼Œ<a href="https://github.com/mavlink/mavros/tree/master/mavros#installation">mavros repo</a>è¿˜æœ‰é¢å¤–çš„å®‰è£…å’Œæ•…éšœæ’é™¤è¯´æ˜ã€‚</p><h2 id="æ„å»ºoffboard-controlç¤ºä¾‹ç¨‹åº"><a href="#æ„å»ºoffboard-controlç¤ºä¾‹ç¨‹åº" class="headerlink" title="æ„å»ºoffboard controlç¤ºä¾‹ç¨‹åº"></a>æ„å»ºoffboard controlç¤ºä¾‹ç¨‹åº</h2><blockquote><p>è¿™é‡Œä»‹ç»æ„å»ºå®˜ç½‘ç¤ºä¾‹ä»£ç çš„æ­¥éª¤ï¼Œä»£ç è§£è¯»è¯·å‚è€ƒï¼š<a href="https://docs.px4.io/master/en/ros/mavros_offboard.html">MAVROS <em>Offboard</em> control example</a></p></blockquote><p>è¿›å…¥ä½ çš„å·¥ä½œåŒºå¹¶ä¸”åˆ›å»ºä¸€ä¸ªåŒ…ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/catkin_ws/srccatkin_create_pkg offboard_pkg roscpp std_msgs geometry_msgs mavros_msgs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åœ¨ç›®å½•<code>~/catkin_ws/src/offboard_pkg/src/</code>ä¸­ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶<code>offboard_node.cpp</code>ï¼Œå†™å…¥å¦‚ä¸‹çš„ä»£ç ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">/** * @file offb_node.cpp * @brief Offboard control example node, written with MAVROS version 0.19.x, PX4 Pro Flight * Stack and tested in Gazebo SITL */</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ros/ros.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;geometry_msgs/PoseStamped.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mavros_msgs/CommandBool.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mavros_msgs/SetMode.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mavros_msgs/State.h&gt;</span></span>mavros_msgs<span class="token double-colon punctuation">::</span>State current_state<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">state_cb</span><span class="token punctuation">(</span><span class="token keyword">const</span> mavros_msgs<span class="token double-colon punctuation">::</span>State<span class="token double-colon punctuation">::</span>ConstPtr<span class="token operator">&amp;</span> msg<span class="token punctuation">)</span><span class="token punctuation">{</span>    current_state <span class="token operator">=</span> <span class="token operator">*</span>msg<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span><span class="token punctuation">{</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"offb_node"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>NodeHandle nh<span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>Subscriber state_sub <span class="token operator">=</span> nh<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">subscribe</span><span class="token generic class-name"><span class="token operator">&lt;</span>mavros_msgs<span class="token double-colon punctuation">::</span>State<span class="token operator">&gt;</span></span></span>            <span class="token punctuation">(</span><span class="token string">"mavros/state"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> state_cb<span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>Publisher local_pos_pub <span class="token operator">=</span> nh<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">advertise</span><span class="token generic class-name"><span class="token operator">&lt;</span>geometry_msgs<span class="token double-colon punctuation">::</span>PoseStamped<span class="token operator">&gt;</span></span></span>            <span class="token punctuation">(</span><span class="token string">"mavros/setpoint_position/local"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>ServiceClient arming_client <span class="token operator">=</span> nh<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">serviceClient</span><span class="token generic class-name"><span class="token operator">&lt;</span>mavros_msgs<span class="token double-colon punctuation">::</span>CommandBool<span class="token operator">&gt;</span></span></span>            <span class="token punctuation">(</span><span class="token string">"mavros/cmd/arming"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>ServiceClient set_mode_client <span class="token operator">=</span> nh<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">serviceClient</span><span class="token generic class-name"><span class="token operator">&lt;</span>mavros_msgs<span class="token double-colon punctuation">::</span>SetMode<span class="token operator">&gt;</span></span></span>            <span class="token punctuation">(</span><span class="token string">"mavros/set_mode"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//the setpoint publishing rate MUST be faster than 2Hz</span>    ros<span class="token double-colon punctuation">::</span>Rate <span class="token function">rate</span><span class="token punctuation">(</span><span class="token number">20.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// wait for FCU connection</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>ros<span class="token double-colon punctuation">::</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>current_state<span class="token punctuation">.</span>connected<span class="token punctuation">)</span><span class="token punctuation">{</span>        ros<span class="token double-colon punctuation">::</span><span class="token function">spinOnce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        rate<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    geometry_msgs<span class="token double-colon punctuation">::</span>PoseStamped pose<span class="token punctuation">;</span>    pose<span class="token punctuation">.</span>pose<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    pose<span class="token punctuation">.</span>pose<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    pose<span class="token punctuation">.</span>pose<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token comment">//send a few setpoints before starting</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> ros<span class="token double-colon punctuation">::</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>i<span class="token punctuation">)</span><span class="token punctuation">{</span>        local_pos_pub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span>pose<span class="token punctuation">)</span><span class="token punctuation">;</span>        ros<span class="token double-colon punctuation">::</span><span class="token function">spinOnce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        rate<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    mavros_msgs<span class="token double-colon punctuation">::</span>SetMode offb_set_mode<span class="token punctuation">;</span>    offb_set_mode<span class="token punctuation">.</span>request<span class="token punctuation">.</span>custom_mode <span class="token operator">=</span> <span class="token string">"OFFBOARD"</span><span class="token punctuation">;</span>    mavros_msgs<span class="token double-colon punctuation">::</span>CommandBool arm_cmd<span class="token punctuation">;</span>    arm_cmd<span class="token punctuation">.</span>request<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>Time last_request <span class="token operator">=</span> ros<span class="token double-colon punctuation">::</span><span class="token class-name">Time</span><span class="token double-colon punctuation">::</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>ros<span class="token double-colon punctuation">::</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span> current_state<span class="token punctuation">.</span>mode <span class="token operator">!=</span> <span class="token string">"OFFBOARD"</span> <span class="token operator">&amp;&amp;</span>            <span class="token punctuation">(</span>ros<span class="token double-colon punctuation">::</span><span class="token class-name">Time</span><span class="token double-colon punctuation">::</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> last_request <span class="token operator">&gt;</span> ros<span class="token double-colon punctuation">::</span><span class="token function">Duration</span><span class="token punctuation">(</span><span class="token number">5.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span> set_mode_client<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>offb_set_mode<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>                offb_set_mode<span class="token punctuation">.</span>response<span class="token punctuation">.</span>mode_sent<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Offboard enabled"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            last_request <span class="token operator">=</span> ros<span class="token double-colon punctuation">::</span><span class="token class-name">Time</span><span class="token double-colon punctuation">::</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span>current_state<span class="token punctuation">.</span>armed <span class="token operator">&amp;&amp;</span>                <span class="token punctuation">(</span>ros<span class="token double-colon punctuation">::</span><span class="token class-name">Time</span><span class="token double-colon punctuation">::</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> last_request <span class="token operator">&gt;</span> ros<span class="token double-colon punctuation">::</span><span class="token function">Duration</span><span class="token punctuation">(</span><span class="token number">5.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span> arming_client<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arm_cmd<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>                    arm_cmd<span class="token punctuation">.</span>response<span class="token punctuation">.</span>success<span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Vehicle armed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                last_request <span class="token operator">=</span> ros<span class="token double-colon punctuation">::</span><span class="token class-name">Time</span><span class="token double-colon punctuation">::</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        local_pos_pub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span>pose<span class="token punctuation">)</span><span class="token punctuation">;</span>        ros<span class="token double-colon punctuation">::</span><span class="token function">spinOnce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        rate<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åæ‰“å¼€ç›®å½•<code>~/catkin_ws/src/offboard_pkg/</code>ä¸‹çš„<code>CMakeLists.txt</code>æ·»åŠ ä¸‹é¢çš„ä¸¤è¡Œï¼š</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">add_executable</span><span class="token punctuation">(</span>offboard_node src/offboard_node.cpp<span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>offboard_node <span class="token punctuation">${</span>catkin_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç„¶ååˆ°ç›®å½•<code>~/catkin_ws</code>ä¸‹ï¼Œè¿è¡Œå‘½ä»¤ï¼Œå®Œæˆç¼–è¯‘ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">catkin_make<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¹‹åä½ å¯ä»¥åœ¨~.bashrcæˆ–è€…~.zshrcä¸­å†™å…¥sourceè¯¥å·¥ä½œç©ºé—´çš„æŒ‡ä»¤ï¼Œå¦‚æœå‡ºç°äº†å·¥ä½œç©ºé—´è¦†ç›–çš„é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„å¦å¤–ä¸€ç¯‡åšå®¢<a href="https://immortalqx.github.io/2021/07/17/ros-notes-3/">è§£å†³sourceå¤šä¸ªROSå·¥ä½œç©ºé—´æ—¶çš„è¦†ç›–é—®é¢˜</a>ã€‚</p><h2 id="å®‰è£…PX4-Autopilot"><a href="#å®‰è£…PX4-Autopilot" class="headerlink" title="å®‰è£…PX4-Autopilot"></a>å®‰è£…PX4-Autopilot</h2><blockquote><p>ç½‘ä¸Šæœ‰ä¸€äº›æ•™ç¨‹è®²çš„æ˜¯Firmwareï¼Œä½†ä¸¤ä¸ªåº”è¯¥éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p></blockquote><h3 id="ä¸‹è½½PX4-Autopilot"><a href="#ä¸‹è½½PX4-Autopilot" class="headerlink" title="ä¸‹è½½PX4-Autopilot"></a>ä¸‹è½½PX4-Autopilot</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/PX4/PX4-Autopilot.git<span class="token builtin class-name">cd</span> PX4-Autopilot<span class="token function">git</span> checkout v1.12.0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="ç¼–è¯‘PX4-Autopilot"><a href="#ç¼–è¯‘PX4-Autopilot" class="headerlink" title="ç¼–è¯‘PX4-Autopilot"></a>ç¼–è¯‘PX4-Autopilot</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">make</span> distclean<span class="token function">make</span> px4_sitl_default gazebo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¯·ç¡®ä¿<em>make px4_sitl_default gazebo</em>å‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼Œå¦‚æœ‰æŠ¥é”™ä¿¡æ¯ï¼Œæ ¹æ®æŠ¥é”™ä¿¡æ¯æ¥è¿›è¡Œä¿®å¤å³å¯ã€‚</p><p>åœ¨è¿™æ¡æŒ‡ä»¤è¿è¡ŒæˆåŠŸä¹‹åï¼Œgazeboä¼šæ‰“å¼€ï¼Œä½ ä¼šçœ‹åˆ°å¦‚ä¸‹çš„ç•Œé¢ï¼š</p><p><img src="/images/ros-notes/6-1.png"></p><h3 id="ä¿®æ”¹-bashrcæˆ–è€…-zshrcï¼ˆoptionalï¼‰"><a href="#ä¿®æ”¹-bashrcæˆ–è€…-zshrcï¼ˆoptionalï¼‰" class="headerlink" title="ä¿®æ”¹~.bashrcæˆ–è€…~.zshrcï¼ˆoptionalï¼‰"></a>ä¿®æ”¹~.bashrcæˆ–è€…~.zshrcï¼ˆoptionalï¼‰</h3><p>è¿™ä¸€æ­¥ä¸å½±å“æˆ‘ä»¬åœ¨gazeboä¸­è¿è¡ŒOffboard Controlç¤ºä¾‹ç¨‹åºï¼Œä½†è¿˜æ˜¯å»ºè®®ä¿®æ”¹ä¸€ä¸‹ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> ~/PX4-Autopilot/Tools/setup_gazebo.bash ~/PX4-Autopilot ~/PX4-Autopilot/build/px4_sitl_defaultexport<span class="token builtin class-name">export</span> <span class="token assign-left variable">ROS_PACKAGE_PATH</span><span class="token operator">=</span><span class="token variable">$ROS_PACKAGE_PATH</span>:~/PX4-Autopilotexport<span class="token builtin class-name">export</span> <span class="token assign-left variable">ROS_PACKAGE_PATH</span><span class="token operator">=</span><span class="token variable">$ROS_PACKAGE_PATH</span>:~/PX4-Autopilot/Tools/sitl_gazebo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="åœ¨Gazeboä¸­è¿è¡ŒOffboard-Controlç¤ºä¾‹ç¨‹åº"><a href="#åœ¨Gazeboä¸­è¿è¡ŒOffboard-Controlç¤ºä¾‹ç¨‹åº" class="headerlink" title="åœ¨Gazeboä¸­è¿è¡ŒOffboard Controlç¤ºä¾‹ç¨‹åº"></a>åœ¨Gazeboä¸­è¿è¡ŒOffboard Controlç¤ºä¾‹ç¨‹åº</h2><h3 id="å¯åŠ¨Gazebo"><a href="#å¯åŠ¨Gazebo" class="headerlink" title="å¯åŠ¨Gazebo"></a>å¯åŠ¨Gazebo</h3><p>åƒä¹‹å‰ä¸€æ ·ï¼Œè¿›å…¥åˆ°PX4-Autopilotçš„ç›®å½•ä¸­ï¼Œè¿è¡Œå¦‚ä¸‹æŒ‡ä»¤æ‰“å¼€Gazeboï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">make</span> px4_sitl_default gazebo<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="è¿è¡ŒMAVROS"><a href="#è¿è¡ŒMAVROS" class="headerlink" title="è¿è¡ŒMAVROS"></a>è¿è¡ŒMAVROS</h3><p><strong>mavlinkä¼šå¼€æ”¾<code>14557</code>, æ¥åˆ°è¿™ä¸ªç«¯å£å°†ä¼šæ¥æ”¶åˆ°å®é™…é£è¡Œä¸­å‘å‡ºçš„æ‰€æœ‰æ•°æ®ã€‚</strong></p><p>è‹¥è¦è¿æ¥åˆ°ä¸€ä¸ªç‰¹å®šçš„IP(fcu_urlæ˜¯SITLçš„IP/ç«¯å£)ï¼Œè¯·ä½¿ç”¨ä¸€ä¸ªå¦‚ä¸‹å½¢å¼çš„URL:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">roslaunch mavros px4.launch fcu_url:<span class="token operator">=</span><span class="token string">"udp://:14540@192.168.1.36:14557"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿æ¥æœ¬åœ°:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">roslaunch mavros px4.launch fcu_url:<span class="token operator">=</span><span class="token string">"udp://:14540@127.0.0.1:14557"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™é‡Œæˆ‘ä»¬åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šè¿è¡Œï¼Œå› æ­¤ä½¿ç”¨è¿æ¥æœ¬åœ°çš„æŒ‡ä»¤å³å¯ã€‚</p><h3 id="è¿è¡Œoffboard-node"><a href="#è¿è¡Œoffboard-node" class="headerlink" title="è¿è¡Œoffboard_node"></a>è¿è¡Œoffboard_node</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosrun offboard_pkg offboard_node<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æœ€ç»ˆçš„æ•ˆæœåº”è¯¥å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œgazeboä¸­çš„æ— äººæœºèµ·é£å¹¶ä¸”æ‚¬åœåœ¨äº†ç©ºä¸­ã€‚</p><p><img src="/images/ros-notes/6-2.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MAVROS </tag>
            
            <tag> PX4 </tag>
            
            <tag> Gazebo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROSä¸­çš„URDF</title>
      <link href="2021/07/18/ros-notes-5/"/>
      <url>2021/07/18/ros-notes-5/</url>
      
        <content type="html"><![CDATA[<h1 id="ROSä¸­çš„URDF"><a href="#ROSä¸­çš„URDF" class="headerlink" title="ROSä¸­çš„URDF"></a>ROSä¸­çš„URDF</h1><h2 id="ä»€ä¹ˆæ˜¯URDF"><a href="#ä»€ä¹ˆæ˜¯URDF" class="headerlink" title="ä»€ä¹ˆæ˜¯URDF"></a>ä»€ä¹ˆæ˜¯URDF</h2><ul><li><p>Unified Robot Description Formatï¼Œç»Ÿä¸€æœºå™¨äººæè¿°æ ¼å¼ï¼Œç®€ç§°ä¸ºURDFï¼›</p></li><li><p>ROSä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„æœºå™¨äººæ¨¡å‹æè¿°æ ¼å¼ï¼›</p></li><li><p>URDFæ–‡ä»¶ä½¿ç”¨XMLæ ¼å¼æè¿°æœºå™¨äººæ¨¡å‹ï¼›</p></li><li><p>ROSä¸­çš„urdfåŠŸèƒ½åŒ…åŒ…å«ä¸€ä¸ªURDFçš„C++è§£æå™¨ã€‚</p></li></ul><h2 id="URDFæ ‡ç­¾è¯´æ˜"><a href="#URDFæ ‡ç­¾è¯´æ˜" class="headerlink" title="URDFæ ‡ç­¾è¯´æ˜"></a>URDFæ ‡ç­¾è¯´æ˜</h2><h3 id="lt-link-gt"><a href="#lt-link-gt" class="headerlink" title="<link>"></a>&lt;link&gt;</h3><p><strong>ä½œç”¨ï¼š</strong></p><ul><li>æè¿°æœºå™¨äººæŸä¸ªåˆšä½“éƒ¨åˆ†çš„å¤–è§‚å’Œç‰©ç†å±æ€§ï¼›</li><li>å°ºå¯¸ï¼ˆsizeï¼‰ã€é¢œè‰²ï¼ˆcolorï¼‰ã€å½¢çŠ¶ï¼ˆshapeï¼‰ã€æƒ¯æ€§çŸ©é˜µï¼ˆinertial matrixï¼‰ã€ç¢°æ’å‚æ•°ï¼ˆcollision propertiesï¼‰ç­‰ã€‚</li></ul><img src="/images/ros-notes/5-1.png" style="zoom:33%;"><p><strong>å­æ ‡ç­¾ï¼š</strong></p><ul><li>&lt;visual&gt;ï¼šæè¿°æœºå™¨äººlinkéƒ¨åˆ†çš„å¤–è§‚å‚æ•°ï¼›</li><li>&lt;inertial&gt;ï¼šæè¿°linkçš„æƒ¯æ€§å‚æ•°ï¼›</li><li>&lt;collision&gt;ï¼šæè¿°linkçš„ç¢°æ’å±æ€§ã€‚</li></ul><img src="/images/ros-notes/5-2.png" style="zoom: 67%;"><h3 id="lt-joint-gt"><a href="#lt-joint-gt" class="headerlink" title="<joint>"></a>&lt;joint&gt;</h3><p><strong>ä½œç”¨ï¼š</strong></p><ul><li>æè¿°æœºå™¨äººå…³èŠ‚çš„è¿åŠ¨å­¦å’ŒåŠ¨åŠ›å­¦å±æ€§ï¼›</li><li>åŒ…æ‹¬å…³èŠ‚è¿åŠ¨çš„ä½ç½®å’Œé€Ÿåº¦é™åˆ¶ï¼›</li><li>æ ¹æ®å…³èŠ‚è¿åŠ¨çš„å½¢å¼ï¼Œå¯ä»¥å°†å…¶åˆ†ä¸ºå…­ç§ç±»å‹ã€‚</li></ul><img src="/images/ros-notes/5-3.png" style="zoom:33%;"><table><thead><tr><th>å…³èŠ‚ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>continuous</td><td>æ—‹è½¬å…³èŠ‚ï¼Œå¯ä»¥å›´ç»•å•è½´æ— é™æ—‹è½¬</td></tr><tr><td>revolute</td><td>æ—‹è½¬å…³èŠ‚ï¼Œç±»ä¼¼äºcontinuousï¼Œä½†æœ‰æ—‹è½¬çš„è§’åº¦é™åˆ¶</td></tr><tr><td>prismatic</td><td>æ»‘åŠ¨å…³èŠ‚ï¼Œæ²¿æŸä¸€è½´çº¿ç§»åŠ¨çš„å…³èŠ‚ï¼Œå¸¦æœ‰ä½ç½®æé™</td></tr><tr><td>planar</td><td>å¹³é¢å…³èŠ‚ï¼Œå…è®¸åœ¨å¹³é¢æ­£äº¤æ–¹å‘ä¸Šå¹³ç§»æˆ–è€…æ—‹è½¬</td></tr><tr><td>floating</td><td>æµ®åŠ¨å…³èŠ‚ï¼Œå…è®¸è¿›è¡Œå¹³ç§»ã€æ—‹è½¬è¿åŠ¨</td></tr><tr><td>fixed</td><td>å›ºå®šå…³èŠ‚ï¼Œä¸å…è®¸è¿åŠ¨çš„ç‰¹æ®Šå…³èŠ‚</td></tr></tbody></table><p><strong>å­æ ‡ç­¾ï¼š</strong></p><ul><li>&lt;calibration&gt;ï¼šå…³èŠ‚çš„å‚è€ƒä½ç½®ï¼Œç”¨æ¥æ ¡å‡†å…³èŠ‚çš„ç»å¯¹ä½ç½®ï¼›</li><li>&lt;dynamics&gt;ï¼šæè¿°å…³èŠ‚çš„ç‰©ç†å±æ€§ï¼Œä¾‹å¦‚é˜»å°¼å€¼ã€ç‰©ç†é™æ‘©æ“¦åŠ›ç­‰ï¼Œç»å¸¸åœ¨åŠ¨åŠ›å­¦ä»¿çœŸä¸­ç”¨åˆ°ï¼›</li><li>&lt;limit&gt;ï¼šæè¿°è¿åŠ¨çš„ä¸€äº›æé™å€¼ï¼ŒåŒ…æ‹¬å…³èŠ‚è¿åŠ¨çš„ä¸Šä¸‹é™ä½ç½®ã€é€Ÿåº¦é™åˆ¶ã€åŠ›çŸ©é™åˆ¶ç­‰ï¼›</li><li>&lt;mimic&gt;ï¼šæè¿°è¯¥å…³èŠ‚ä¸å·²æœ‰å…³èŠ‚çš„å…³ç³»ï¼›</li><li>&lt;safetyï¼¿controller&gt;ï¼šæè¿°å®‰å…¨æ§åˆ¶å™¨å‚æ•°ã€‚ </li></ul><img src="/images/ros-notes/5-4.png" style="zoom:67%;"><h3 id="lt-robot-gt"><a href="#lt-robot-gt" class="headerlink" title="<robot>"></a>&lt;robot&gt;</h3><ul><li>å®Œæ•´æœºå™¨äººæ¨¡å‹çš„æœ€é¡¶å±‚æ ‡ç­¾ï¼›</li><li>&lt;link&gt;å’Œ&lt;joint&gt;æ ‡ç­¾éƒ½å¿…é¡»åŒ…å«åœ¨&lt;robot&gt;æ ‡ç­¾å†…ã€‚</li></ul><img src="/images/ros-notes/5-5.png" style="zoom:33%;"><p>ä¸€ä¸ªå®Œæ•´çš„æœºå™¨äººæ¨¡å‹ï¼Œç”±ä¸€ç³»åˆ—&lt;link&gt;å’Œ&lt;joint&gt;ç»„æˆã€‚</p><img src="/images/ros-notes/5-6.png" style="zoom:67%;"><h2 id="URDFå»ºæ¨¡ä¼˜åŒ–"><a href="#URDFå»ºæ¨¡ä¼˜åŒ–" class="headerlink" title="URDFå»ºæ¨¡ä¼˜åŒ–"></a>URDFå»ºæ¨¡ä¼˜åŒ–</h2><h3 id="URDFå»ºæ¨¡å­˜åœ¨çš„é—®é¢˜ï¼š"><a href="#URDFå»ºæ¨¡å­˜åœ¨çš„é—®é¢˜ï¼š" class="headerlink" title="URDFå»ºæ¨¡å­˜åœ¨çš„é—®é¢˜ï¼š"></a>URDFå»ºæ¨¡å­˜åœ¨çš„é—®é¢˜ï¼š</h3><ol><li>æ¨¡å‹å†—é•¿ï¼Œé‡å¤å†…å®¹è¿‡å¤šï¼›</li><li>å‚æ•°ä¿®æ”¹éº»çƒ¦ï¼Œä¸ä¾¿äºäºŒæ¬¡å¼€å‘ï¼›</li><li>æ²¡æœ‰å‚æ•°è®¡ç®—çš„åŠŸèƒ½ã€‚</li></ol><h3 id="URDFæ¨¡å‹çš„è¿›åŒ–ç‰ˆæœ¬â€”â€”xacroæ¨¡å‹æ–‡ä»¶"><a href="#URDFæ¨¡å‹çš„è¿›åŒ–ç‰ˆæœ¬â€”â€”xacroæ¨¡å‹æ–‡ä»¶" class="headerlink" title="URDFæ¨¡å‹çš„è¿›åŒ–ç‰ˆæœ¬â€”â€”xacroæ¨¡å‹æ–‡ä»¶"></a>URDFæ¨¡å‹çš„è¿›åŒ–ç‰ˆæœ¬â€”â€”xacroæ¨¡å‹æ–‡ä»¶</h3><ul><li>ç²¾ç®€æ¨¡å‹ä»£ç <ul><li>åˆ›å»ºå®å®šä¹‰</li><li>æ–‡ä»¶åŒ…å«</li></ul></li><li>æä¾›å¯ç¼–ç¨‹æ¥å£<ul><li>å¸¸é‡</li><li>å˜é‡</li><li>æ•°å­¦è®¡ç®—</li><li>æ¡ä»¶è¯­å¥</li></ul></li></ul><h3 id="å¸¸é‡çš„å®šä¹‰å’Œä½¿ç”¨"><a href="#å¸¸é‡çš„å®šä¹‰å’Œä½¿ç”¨" class="headerlink" title="å¸¸é‡çš„å®šä¹‰å’Œä½¿ç”¨"></a>å¸¸é‡çš„å®šä¹‰å’Œä½¿ç”¨</h3><p>å¸¸é‡å®šä¹‰ï¼š</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">sacro:</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>M_PI<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3.14159<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¸¸é‡ä½¿ç”¨ï¼š</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>origin</span> <span class="token attr-name">xyz</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 0 0<span class="token punctuation">"</span></span> <span class="token attr-name">rpy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${M_PI/2} 0 0<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="/images/ros-notes/5-7.png" style="zoom:67%;"><h3 id="æ•°å­¦è®¡ç®—"><a href="#æ•°å­¦è®¡ç®—" class="headerlink" title="æ•°å­¦è®¡ç®—"></a>æ•°å­¦è®¡ç®—</h3><p>æ•°å­¦è®¡ç®—ï¼š</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>origin</span> <span class="token attr-name">xyz</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 ${(motor_length+wheel_length)/2} 0<span class="token punctuation">"</span></span> <span class="token attr-name">rpx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 0 0<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="/images/ros-notes/5-8.png" style="zoom:67%;"><p>æ³¨æ„ï¼šæ‰€æœ‰çš„æ•°å­¦è¿ç®—éƒ½ä¼šè½¬æ¢æˆæµ®ç‚¹æ•°è¿›è¡Œï¼Œä»¥ä¿è¯è¿ç®—ç²¾åº¦ã€‚</p><h3 id="å®å®šä¹‰"><a href="#å®å®šä¹‰" class="headerlink" title="å®å®šä¹‰"></a>å®å®šä¹‰</h3><p>å®å®šä¹‰ï¼š</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">sacro:</span>macro</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">params</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>A B C<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    ......<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">sacro:</span>macros</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å®è°ƒç”¨ï¼š</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span> <span class="token attr-name">A</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>A_value<span class="token punctuation">"</span></span> <span class="token attr-name">B</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>B_value<span class="token punctuation">"</span></span> <span class="token attr-name">C</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>C_value<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="/images/ros-notes/5-9.png" style="zoom:67%;"><h3 id="æ–‡ä»¶åŒ…å«"><a href="#æ–‡ä»¶åŒ…å«" class="headerlink" title="æ–‡ä»¶åŒ…å«"></a>æ–‡ä»¶åŒ…å«</h3><p>æ–‡ä»¶åŒ…å«ï¼š</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">xacro:</span>include</span> <span class="token attr-name">filename</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(find mbot_description)/urdf/xacro/mbot_base.xacro<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><img src="/images/ros-notes/5-10.png" style="zoom:67%;"><h3 id="æ¨¡å‹æ˜¾ç¤º"><a href="#æ¨¡å‹æ˜¾ç¤º" class="headerlink" title="æ¨¡å‹æ˜¾ç¤º"></a>æ¨¡å‹æ˜¾ç¤º</h3><p>æ–¹æ³•ä¸€ï¼šå°†xacroæ–‡ä»¶è½¬æ¢æˆURDFæ–‡ä»¶åæ˜¾ç¤º</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosrun xacro xacro.py mbot.xacro<span class="token operator">&gt;</span>mbot.urdf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ–¹æ³•äºŒï¼šç›´æ¥è°ƒç”¨xacroæ–‡ä»¶è§£æå™¨</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>model<span class="token punctuation">"</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(find xacro)/xacro --inorder '$(find mbot_description)/urdf/xacro/mbot.xacro'<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>robot_description<span class="token punctuation">"</span></span> <span class="token attr-name">command</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg model)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">roslaunch mbot_description display_mbot_base_xacro.launch<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç›¸å…³å­¦ä¹ èµ„æ–™ï¼š<a href="http://wiki.ros.org/urdf/Tutorials">http://wiki.ros.org/urdf/Tutorials</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROSä¸­çš„TF</title>
      <link href="2021/07/18/ros-notes-4/"/>
      <url>2021/07/18/ros-notes-4/</url>
      
        <content type="html"><![CDATA[<h1 id="ROSä¸­çš„TF"><a href="#ROSä¸­çš„TF" class="headerlink" title="ROSä¸­çš„TF"></a>ROSä¸­çš„TF</h1><h2 id="TFä»‹ç»"><a href="#TFä»‹ç»" class="headerlink" title="TFä»‹ç»"></a>TFä»‹ç»</h2><p>TF(TransForm)ï¼Œå°±æ˜¯åæ ‡è½¬æ¢ï¼ŒåŒ…æ‹¬äº†ä½ç½®å’Œå§¿æ€ä¸¤ä¸ªæ–¹é¢çš„å˜æ¢ã€‚è¿™é‡Œéœ€è¦æ³¨æ„<strong>åŒºåˆ†åæ ‡è½¬æ¢å’Œåæ ‡ç³»è½¬æ¢</strong>ï¼Œåæ ‡è½¬æ¢æ˜¯ä¸€ä¸ªåæ ‡åœ¨ä¸åŒåæ ‡ç³»ä¸‹çš„è¡¨ç¤ºï¼Œè€Œåæ ‡ç³»è½¬æ¢ä¸åŒåæ ‡ç³»çš„ç›¸å¯¹ä½å§¿å…³ç³»ã€‚</p><p>ROSä¸­æœºå™¨äººæ¨¡å‹åŒ…å«å¤§é‡çš„éƒ¨ä»¶ï¼Œæ¯ä¸€ä¸ªéƒ¨ä»¶ç»Ÿç§°ä¹‹ä¸º<strong>link</strong>ï¼ˆæ¯”å¦‚æ‰‹éƒ¨ã€å¤´éƒ¨ã€æŸä¸ªå…³èŠ‚ã€æŸä¸ªè¿æ†ï¼‰ï¼Œæ¯ä¸€ä¸ªlinkä¸Šé¢å¯¹åº”ç€ä¸€ä¸ª<strong>frameï¼ˆåæ ‡ç³»ï¼‰</strong>ï¼Œ ç”¨frameè¡¨ç¤ºè¯¥éƒ¨ä»¶çš„åæ ‡ç³»ï¼Œframeå’Œlinkæ˜¯ç»‘å®šåœ¨ä¸€èµ·çš„ã€‚</p><p>tfæ˜¯ä¸€ä¸ªé€šä¿—çš„åç§°ï¼Œå®é™…ä¸Šå®ƒæœ‰å¾ˆå¤šå«ä¹‰ï¼š</p><ol><li>å¯ä»¥è¢«å½“åšæ˜¯ä¸€ç§æ ‡å‡†è§„èŒƒï¼Œè¿™å¥—æ ‡å‡†å®šä¹‰äº†åæ ‡è½¬æ¢çš„æ•°æ®æ ¼å¼å’Œæ•°æ®ç»“æ„ã€‚tfæœ¬è´¨æ˜¯æ ‘çŠ¶çš„æ•°æ®ç»“æ„ï¼Œå³â€<strong>tf tree</strong>â€œã€‚</li><li>tfä¹Ÿå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªè¯é¢˜<code>/tf</code>ï¼Œ<strong>è¯é¢˜ä¸­çš„æ¶ˆæ¯ä¿å­˜çš„å°±æ˜¯tf treeçš„æ•°æ®ç»“æ„æ ¼å¼</strong>ã€‚ç»´æŠ¤äº†æ•´ä¸ªæœºå™¨äººçš„ç”šè‡³æ˜¯åœ°å›¾çš„åæ ‡è½¬æ¢å…³ç³»ã€‚ç»´æŒå¹¶æ›´æ–°æœºå™¨äººæ•´ä¸ªåæ ‡ç³»çš„è¯é¢˜æ˜¯<code>/tf</code>ï¼Œ<code>/tf</code>è¯é¢˜è¡¨ç¤ºçš„å†…å®¹æ˜¯æ•´ä¸ªæœºå™¨äººçš„tfæ ‘ï¼Œè€Œéä»…ä»…æ˜¯æŸä¸¤ä¸ªåæ ‡ç³»çš„è½¬æ¢å…³ç³»ï¼Œè¿™æ ·çš„è¯ï¼Œ<code>/tf</code>è¯é¢˜æ˜¯éœ€è¦å¾ˆå¤šçš„èŠ‚ç‚¹æ¥ç»´æŠ¤çš„ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹ç»´æŠ¤ä¸¤ä¸ªframeä¹‹é—´çš„å…³ç³»ã€‚</li><li>tfè¿˜å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªpackageï¼Œå®ƒå½“ä¸­åŒ…å«äº†å¾ˆå¤šçš„å·¥å…·ã€‚æ¯”å¦‚å¯è§†åŒ–ï¼ŒæŸ¥çœ‹å…³èŠ‚é—´çš„tfï¼Œdebug tfç­‰ç­‰ã€‚</li><li>tfå«æœ‰ä¸€éƒ¨åˆ†çš„APIæ¥å£ï¼Œç”¨æ¥èŠ‚ç‚¹ç¨‹åºä¸­çš„ç¼–ç¨‹ã€‚tfå¯¹å‘å¸ƒå™¨ä¸è®¢é˜…å™¨è¿›è¡Œäº†å°è£…ï¼Œä½¿å¼€å‘è€…é€šè¿‡tfçš„æ¥å£æ›´åŠ ç®€å•åœ°å»ºç«‹å¯¹tfæ ‘ä¸­æŸäº›åæ ‡ç³»è½¬æ¢å…³ç³»çš„ç»´æŠ¤ä¸è®¢é˜…ã€‚</li></ol><p>tfæ˜¯ä¸€ä¸ªæ ‘çŠ¶ç»“æ„ï¼Œç»´æŠ¤åæ ‡ç³»ä¹‹é—´çš„å…³ç³»ï¼Œé <strong>è¯é¢˜é€šä¿¡æœºåˆ¶</strong>æ¥æŒç»­åœ°å‘å¸ƒä¸åŒlinkä¹‹é—´çš„åæ ‡å…³ç³»ã€‚ä½œä¸ºæ ‘çŠ¶ç»“æ„ï¼Œè¦ä¿è¯çˆ¶å­åæ ‡ç³»éƒ½æœ‰æŸä¸ªèŠ‚ç‚¹åœ¨æŒç»­åœ°å‘å¸ƒä»–ä»¬ä¹‹é—´çš„ä½å§¿å…³ç³»ï¼Œæ‰èƒ½ä½¿æ ‘çŠ¶ç»“æ„ä¿æŒå®Œæ•´ã€‚åªæœ‰çˆ¶å­åæ ‡ç³»çš„ä½å§¿å…³ç³»èƒ½è¢«æ­£ç¡®çš„å‘å¸ƒï¼Œæ‰èƒ½ä¿è¯ä»»æ„ä¸¤ä¸ªframeä¹‹é—´çš„è¿é€šã€‚</p><p>å¦‚æœå‡ºç°æŸä¸€ç¯èŠ‚çš„æ–­è£‚ï¼Œå°±ä¼šå¼•å‘errorç³»ç»ŸæŠ¥é”™ã€‚æ‰€ä»¥å®Œæ•´çš„tf treeä¸èƒ½æœ‰ä»»ä½•æ–­å±‚çš„åœ°æ–¹ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½æŸ¥æ¸…æ¥šä»»æ„ä¸¤ä¸ªframeä¹‹é—´çš„å…³ç³»ã€‚</p><p>æ¯ä¸¤ä¸ªç›¸é‚»frameä¹‹é—´é èŠ‚ç‚¹å‘å¸ƒå®ƒä»¬ä¹‹é—´çš„ä½å§¿å…³ç³»ï¼Œè¿™ç§èŠ‚ç‚¹ç§°ä¸ºbroadcasterã€‚broadcasterå°±æ˜¯ä¸€ä¸ªå‘å¸ƒå™¨publisherï¼Œå¦‚æœä¸¤ä¸ªframeä¹‹é—´å‘ç”Ÿäº†ç›¸å¯¹è¿åŠ¨ï¼Œbroadcasterå°±ä¼šå‘å¸ƒç›¸å…³æ¶ˆæ¯ã€‚</p><h2 id="TFçš„åŸç†"><a href="#TFçš„åŸç†" class="headerlink" title="TFçš„åŸç†"></a>TFçš„åŸç†</h2><h3 id="TFæ ‘çš„ç»“æ„"><a href="#TFæ ‘çš„ç»“æ„" class="headerlink" title="TFæ ‘çš„ç»“æ„"></a>TFæ ‘çš„ç»“æ„</h3><p>tfåº“çš„ç›®çš„æ˜¯å®ç°ç³»ç»Ÿä¸­ä»»ä¸€ä¸ªç‚¹åœ¨æ‰€æœ‰åæ ‡ç³»ä¹‹é—´çš„åæ ‡å˜æ¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ç»™å®šä¸€ä¸ªåæ ‡ç³»ä¸‹çš„ä¸€ä¸ªç‚¹çš„åæ ‡ï¼Œå°±èƒ½è·å¾—è¿™ä¸ªç‚¹åœ¨å…¶ä»–ä»»æ„åæ ‡ç³»çš„åæ ‡ã€‚</p><p>ä¸ºäº†è¾¾åˆ°ä¸Šè¿°ç›®çš„ï¼Œå°±éœ€è¦æä¾›å½“å‰ROSç³»ç»Ÿçš„ä¸­ä»»æ„ä¸¤ä¸ªåæ ‡ç³»çš„ä½å§¿å˜æ¢å…³ç³»ã€‚</p><p>é‚£ä¹ˆtfæ˜¯ç”¨ä»€ä¹ˆæ–¹å¼æ¥æè¿°ä¸è®°å½•ä»»æ„ä¸¤ä¸ªåæ ‡ç³»çš„ä½å§¿å˜æ¢å…³ç³»çš„å‘¢ï¼Ÿ</p><blockquote><p>è¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ã€‚å‡è®¾æœ‰nä¸ªåæ ‡ç³»ï¼Œé‚£ä¹ˆä»–ä»¬ä¹‹é—´çš„ç»„åˆå…³ç³»æœ‰cï¼ˆnï¼Œ2ï¼‰ä¸ªã€‚å¦‚æœè¿™æ ·ç©·ä¸¾ä¸ªæ•°ä¼šéå¸¸å¤šï¼Œæ‰€ä»¥ä¸ä¼šé‡‡ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p></blockquote><p>ä¸ºäº†æ›´åˆç†ã€æ›´é«˜æ•ˆåœ°è¡¨ç¤ºä»»æ„åæ ‡ç³»çš„å˜æ¢å…³ç³»ã€‚tfä½¿ç”¨å¤šå±‚å¤šå‰æ ‘çš„å½¢å¼æ¥æè¿°è¿™ä¸ªè¿™ä¸ªROSç³»ç»Ÿçš„åæ ‡ç³»ï¼Œæ ‘ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªåæ ‡ç³»ã€‚tfæ ‘çš„ç‰¹ç‚¹æ˜¯æ¯ä¸ªèŠ‚ç‚¹åªè¦ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ï¼Œå³é‡‡ç”¨æ¯ä¸ªåæ ‡ç³»éƒ½æœ‰ä¸€ä¸ªçˆ¶åæ ‡ç³»ï¼Œå¯ä»¥æœ‰å¤šä¸ªå­åæ ‡ç³»çš„åŸåˆ™ã€‚</p><h3 id="TFåæ ‡ç³»è¡¨ç¤ºè§„èŒƒ"><a href="#TFåæ ‡ç³»è¡¨ç¤ºè§„èŒƒ" class="headerlink" title="TFåæ ‡ç³»è¡¨ç¤ºè§„èŒƒ"></a>TFåæ ‡ç³»è¡¨ç¤ºè§„èŒƒ</h3><p>æ¯ä¸ªåæ ‡ç³»éƒ½æœ‰ä¸€ä¸ªçˆ¶åæ ‡ç³»ï¼Œå¯ä»¥æœ‰å¤šä¸ªå­åæ ‡ç³»ã€‚tfæ ‘å°±æ˜¯ä»¥çˆ¶å­åæ ‡ç³»çš„å½¢å¼æ¥ç»„ç»‡çš„ï¼Œæœ€ä¸Šé¢æ˜¯çˆ¶åæ ‡ç³»ï¼Œå¾€ä¸‹æ˜¯å­åæ ‡ç³»ã€‚</p><p>åœ¨tfæ ‘ä¸­å…·æœ‰çˆ¶å­å…³ç³»çš„åæ ‡ç³»æ˜¯ç›¸é‚»çš„ï¼Œç”¨å¸¦ç®­å¤´çš„çº¿è¿æ¥èµ·æ¥ã€‚åœ¨tfæ ‘ä¸­ç”¨ç®­å¤´è¡¨ç¤ºè¿™ç§çˆ¶å­å…³ç³»ã€‚</p><p><strong>æè¿°è§„èŒƒï¼š</strong></p><ol><li>sourceã€target frameæ˜¯åœ¨<strong>è¿›è¡Œåæ ‡å˜æ¢</strong>æ—¶çš„æ¦‚å¿µï¼Œsourceæ˜¯åæ ‡å˜æ¢çš„æºåæ ‡ç³»ï¼Œtargetæ˜¯ç›®æ ‡åæ ‡ç³»ã€‚è¿™ä¸ªæ—¶å€™ï¼Œè¿™ä¸ªå˜æ¢ä»£è¡¨çš„æ˜¯<strong>åæ ‡å˜æ¢</strong>ã€‚</li><li>parentã€child frameæ˜¯åœ¨<strong>æè¿°åæ ‡ç³»å˜æ¢</strong>æ—¶çš„æ¦‚å¿µï¼Œparentæ˜¯åŸåæ ‡ç³»ï¼Œchildæ˜¯å˜æ¢åçš„åæ ‡ç³»ï¼Œè¿™ä¸ªæ—¶å€™è¿™ä¸ªå˜æ¢<strong>æè¿°çš„æ˜¯åæ ‡ç³»å˜æ¢</strong>ï¼Œä¹Ÿæ˜¯childåæ ‡ç³»åœ¨parentåæ ‡ç³»ä¸‹çš„æè¿°ã€‚</li><li>a frameåˆ°b frameçš„åæ ‡ç³»å˜æ¢ï¼ˆframe transformï¼‰ï¼Œä¹Ÿè¡¨ç¤ºäº†b frameåœ¨a frameçš„æè¿°ï¼Œä¹Ÿä»£è¡¨äº†æŠŠä¸€ä¸ªç‚¹åœ¨b frameé‡Œåæ ‡å˜æ¢æˆåœ¨a frameé‡Œåæ ‡çš„<strong>åæ ‡å˜æ¢</strong>ã€‚</li><li>ä»parentåˆ°childçš„åæ ‡ç³»å˜æ¢ï¼ˆframe transformï¼‰ç­‰åŒäºæŠŠä¸€ä¸ªç‚¹ä»childåæ ‡ç³»å‘parentåæ ‡ç³»çš„<strong>åæ ‡å˜æ¢</strong>ï¼Œç­‰äºchildåæ ‡ç³»åœ¨parent frameåæ ‡ç³»çš„å§¿æ€æè¿°ã€‚</li></ol><h3 id="TFæ ‘çš„é€šä¿¡æ–¹å¼ä¸TFæ ‘çš„å…·ä½“è¡¨ç¤º"><a href="#TFæ ‘çš„é€šä¿¡æ–¹å¼ä¸TFæ ‘çš„å…·ä½“è¡¨ç¤º" class="headerlink" title="TFæ ‘çš„é€šä¿¡æ–¹å¼ä¸TFæ ‘çš„å…·ä½“è¡¨ç¤º"></a>TFæ ‘çš„é€šä¿¡æ–¹å¼ä¸TFæ ‘çš„å…·ä½“è¡¨ç¤º</h3><p>tfæ ‘çš„å»ºç«‹å’Œç»´æŠ¤æ˜¯åŸºäºTopicé€šä¿¡æœºåˆ¶çš„ã€‚</p><p>æ ¹æ®tfæ ‘çš„åŸç†ï¼Œå®ƒæ˜¯é å»ºç«‹ä¸ç»´æŠ¤æ¯ä¸ªçˆ¶å­åæ ‡ç³»çš„å˜æ¢å…³ç³»æ¥ç»´æŠ¤æ•´ä¸ªç³»ç»Ÿçš„æ‰€æœ‰åæ ‡ç³»çš„å˜æ¢å…³ç³»çš„ã€‚æ¯ä¸ªparent åæ ‡ç³»åˆ°childåæ ‡ç³»å˜æ¢å…³ç³»æ˜¯é è¢«ç§°ä¸ºbroadcastorçš„å‘å¸ƒå™¨èŠ‚ç‚¹æ¥æŒç»­å‘å¸ƒçš„ã€‚</p><p>è™½ç„¶æ˜¯é Topicé€šä¿¡æœºåˆ¶å‘å¸ƒçš„parent åæ ‡ç³»åˆ°childåæ ‡ç³»çš„å˜æ¢ï¼Œä½†å¹¶ä¸æ˜¯è®©æ¯ä¸€å¯¹çˆ¶å­åæ ‡ç³»éƒ½å‘å¸ƒä¸€ä¸ªè¯é¢˜ï¼Œ<strong>å®é™…ä¸Šå‘å¸ƒçš„å”¯ä¸€ä¸ªè¯é¢˜æ˜¯<code>/topic</code>ï¼Œè¯¥è¯é¢˜é›†åˆäº†æ‰€æœ‰å‘å¸ƒçš„çˆ¶å­åæ ‡ç³»çš„å˜æ¢å…³ç³»ã€‚</strong></p><p>ä¹Ÿå°±æ˜¯è¯´tfæœºåˆ¶å¹¶ä¸æ˜¯è®©æ¯ä¸€å¯¹çˆ¶å­åæ ‡ç³»éƒ½å‘å¸ƒä¸€ä¸ªè¯é¢˜ï¼Œè€Œæ˜¯å°†æ‰€æœ‰çš„çˆ¶å­åæ ‡ç³»éƒ½é›†åˆåˆ°åˆ°ä¸€ä¸ªè¯é¢˜ä¸Šï¼Œè¯¥è¯é¢˜çš„æ¶ˆæ¯ä¸­ä¼ é€’çš„æ•°æ®æ˜¯æ‰€æœ‰çˆ¶å­åæ ‡ç³»çš„å˜æ¢å…³ç³»ï¼Œæ˜¯çˆ¶å­åæ ‡ç³»å˜æ¢å…³ç³»çš„ä¸€ä¸ªå¤§æ•°ç»„ã€‚</p><p>ä½¿ç”¨tfçš„tflisenerå°±å¯ä»¥ç›‘å¬ä»ä»»æ„ä¸¤ä¸ªåæ ‡ç³»çš„å˜æ¢ã€‚å‰ææ˜¯tfçš„æ ‘ä¸Šèƒ½æŠŠè¿™ä¸¤ä¸ªè”é€šã€‚</p><h3 id="TFæ ‘çš„å»ºç«‹"><a href="#TFæ ‘çš„å»ºç«‹" class="headerlink" title="TFæ ‘çš„å»ºç«‹"></a>TFæ ‘çš„å»ºç«‹</h3><p>åœ¨å¼€å§‹å»ºç«‹tfæ ‘çš„æ—¶å€™éœ€è¦æŒ‡å®šç¬¬ä¸€ä¸ªçˆ¶åæ ‡ç³»ï¼ˆparent frameï¼‰ä½œä¸ºæœ€åˆçš„åæ ‡ç³»ã€‚æ¯”å¦‚æœºå™¨äººç³»ç»Ÿä¸­çš„mapåæ ‡ç³»ã€‚</p><p>åœ¨ç¬¬ä¸€æ¬¡å‘å¸ƒä¸€ä¸ªä»å·²æœ‰çš„parent frameåˆ°æ–°çš„child frameçš„åæ ‡ç³»å˜æ¢æ—¶ï¼Œè¿™æ£µæ ‘å°±ä¼šæ·»åŠ ä¸€ä¸ªæ ‘æï¼Œä¹‹åå°±æ˜¯ç»´æŠ¤ã€‚</p><p>tfæ ‘çš„å»ºç«‹å’Œç»´æŠ¤é çš„æ˜¯tfæä¾›çš„tfbroadcastorç±»çš„sendtransformæ¥å£ã€‚</p><blockquote><p><code>transformBroadcaster</code>ç±»å°±æ˜¯ä¸€ä¸ªpublisherï¼Œè€ŒsendTransformçš„ä½œç”¨æ˜¯æ¥å°è£…publishçš„å‡½æ•°ã€‚</p></blockquote><h3 id="TFæ ‘çš„ç»´æŠ¤"><a href="#TFæ ‘çš„ç»´æŠ¤" class="headerlink" title="TFæ ‘çš„ç»´æŠ¤"></a>TFæ ‘çš„ç»´æŠ¤</h3><p>åœ¨è¿è¡Œè¿‡ç¨‹ä¸­è¦ä¸æ–­æ›´æ–°å·²æœ‰çš„parent frameåˆ°å·²æœ‰çš„child frameçš„åæ ‡ç³»å˜æ¢ï¼Œä»è€Œä¿è¯æœ€æ–°çš„ä½å§¿è½¬æ¢å…³ç³»ã€‚</p><p>ä½œä¸ºæ ‘çŠ¶ç»“æ„ï¼Œè¦ä¿è¯çˆ¶å­frameéƒ½æœ‰æŸä¸ªèŠ‚ç‚¹åœ¨æŒç»­åœ°å‘å¸ƒè¿™ä¸¤ä¸ªframeä¹‹é—´çš„ä½å§¿å…³ç³»ï¼Œæ‰èƒ½ä½¿æ ‘çŠ¶ç»“æ„ä¿æŒå®Œæ•´ã€‚åªæœ‰æ¯ä¸€ä¸ªçˆ¶å­çš„frameçš„ä½å§¿å…³ç³»èƒ½è¢«æ­£ç¡®çš„å‘å¸ƒï¼Œæ‰èƒ½ä¿è¯ä»»æ„ä¸¤ä¸ªframeä¹‹é—´çš„è¿é€šã€‚</p><h3 id="TFæ ‘çš„ä½¿ç”¨"><a href="#TFæ ‘çš„ä½¿ç”¨" class="headerlink" title="TFæ ‘çš„ä½¿ç”¨"></a>TFæ ‘çš„ä½¿ç”¨</h3><p>ä¸€æ—¦æ­£å¸¸çš„å»ºç«‹ä¸€ä¸ªtfæ ‘ï¼Œä¿è¯æ¯ä¸ªçˆ¶å­åæ ‡ç³»éƒ½èƒ½å¾—åˆ°æ­£å¸¸çš„ç»´æŠ¤ï¼Œé‚£ä¹ˆå°±å¯ä»¥åˆ©ç”¨tfæä¾›çš„è®¢é˜…å™¨ï¼Œè®¢é˜…ä»»æ„ä¸¤ä¸ªåæ ‡ç³»çš„è½¬æ¢å…³ç³»ã€‚</p><p><strong>å¦‚ä½•æ ¹æ®tfæ ‘å¾—åˆ°ä»»æ„åæ ‡ç³»çš„è½¬æ¢å…³ç³»ï¼Ÿ</strong></p><p>å¦‚æœæƒ³è¦è·å¾—ä»»æ„ä¸¤ä¸ªåæ ‡ç³»çš„è½¬æ¢å…³ç³»ï¼Œå…¶å®è®¢é˜…å™¨æ˜¯æ”¶å–çš„<code>/tf</code>è¯é¢˜ä¸Šçš„æ¶ˆæ¯ï¼Œè¯¥æ¶ˆæ¯é›†åˆäº†æ‰€æœ‰å‘å¸ƒçš„çˆ¶å­åæ ‡ç³»çš„å˜æ¢å…³ç³»ã€‚è®¢é˜…å™¨æ¥æ”¶çš„å…¶å®æ˜¯å½“å‰æ—¶åˆ»çš„æ•´ä¸ªtfæ ‘ï¼Œç„¶åæœç´¢è¿™æ£µæ ‘ï¼Œæ ¹æ®ä¸åŒçš„çˆ¶å­åæ ‡ç³»å…³ç³»æ‰¾åˆ°ä¸€æ¡å˜æ¢çš„è·¯å¾„ã€‚è¿™æ¡å˜æ¢è·¯å¾„å°±èƒ½é€šè¿‡çˆ¶å­å…³ç³»é€šè·¯è¿æ¥èµ·æ‰€æ±‚çš„è¿™ä¸¤ä¸ªåæ ‡ç³»ï¼Œä»è€Œé€šè¿‡ä¸æ–­å°†è¯¥é€šè·¯ä¸Šçš„å˜æ¢çŸ©é˜µç›¸ä¹˜å¾—åˆ°æœ€ç»ˆçš„æ‰€æ±‚çš„è¿™ä¸¤ä¸ªåæ ‡ç³»çš„å˜æ¢å…³ç³»ã€‚</p><blockquote><p>tfå¯¹å‘å¸ƒå™¨ä¸è®¢é˜…å™¨è¿›è¡Œäº†å°è£…ï¼Œä½¿å¼€å‘è€…é€šè¿‡tfçš„æ¥å£æ›´åŠ ç®€å•åœ°å»ºç«‹å¯¹tfæ ‘ä¸­æŸäº›åæ ‡ç³»è½¬æ¢å…³ç³»çš„ç»´æŠ¤ä¸è®¢é˜…ã€‚ç”¨tfçš„tflisenerç›‘å¬æŸä¸€ä¸ªæŒ‡å®šçš„ä»ä¸€ä¸ªa frameåˆ°b frameçš„å˜æ¢å³å¯ã€‚</p></blockquote><h3 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><p>åŸºæœ¬åŸç†æ˜¯ï¼Œtfbroadcastorçš„ç±»é‡Œæœ‰ä¸ªpublisherï¼Œtflisenerçš„ç±»é‡Œæœ‰ä¸ªsubscriberï¼Œä¸€ä¸ªå‘å¸ƒå«<code>/tf</code>çš„topicï¼Œä¸€ä¸ªè®¢é˜…è¿™ä¸ªtopicï¼Œä¼ é€çš„æ¶ˆæ¯messageé‡ŒåŒ…å«äº†æ¯ä¸€å¯¹parent frameidå’Œchild frameidçš„ä¿¡æ¯ã€‚è¿™ä¸ªæœºåˆ¶æ„å‘³ç€ï¼Œæ‰€æœ‰çš„tfbroadcastorä¼šå‘å¸ƒæŸä¸€ç‰¹å®šçš„parentåˆ°childçš„å˜æ¢ï¼Œè€Œæ‰€æœ‰tflisenerä¼šæ”¶åˆ°æ‰€æœ‰çš„è¿™äº›å˜æ¢ï¼Œç„¶åtfliseneråˆ©ç”¨ä¸€ä¸ªtfbuffercoreçš„æ•°æ®ç»“æ„ç»´æŠ¤ä¸€ä¸ªå®Œæ•´çš„æ ‘ç»“æ„åŠå…¶çŠ¶æ€ã€‚</p><p>åŸºäºæ­¤ï¼Œtfliseneråœ¨ä½¿ç”¨è¿™æ£µæ ‘æ—¶ï¼Œä¼šç”¨lookuptransformæˆ–waitfortransformæ¥è·å¾—ä»»æ„åæ ‡ç³»ä¹‹é—´çš„å˜æ¢ã€‚è¿™æ ·å³ä½¿åªè¦æ˜¯ä¸€ä¸ªtflisenerï¼ˆå³åªç›‘å¬ä¸¤ä¸ªåæ ‡ç³»çš„å˜æ¢å…³ç³»ï¼‰ï¼Œå°±è¦è·Ÿæ‰€æœ‰tfbroadcastorå»ºç«‹è¿æ¥ï¼Œå°±è¦æ”¶å–<code>/tf</code>ä¸Šçš„æ•´ä¸ªtfæ ‘ï¼Œè¿˜è¦è´Ÿè´£æœç´¢è¿™æ£µæ ‘ï¼Œæ‰¾åˆ°ä¸€æ¡å˜æ¢çš„è·¯å¾„ï¼Œç„¶åé€šè¿‡å˜æ¢çŸ©é˜µç›¸ä¹˜å¾—åˆ°ä¸¤ä¸ªåæ ‡ç³»æœ€ç»ˆçš„å˜æ¢å…³ç³»ã€‚</p><h2 id="TFçš„ç‰¹ç‚¹"><a href="#TFçš„ç‰¹ç‚¹" class="headerlink" title="TFçš„ç‰¹ç‚¹"></a>TFçš„ç‰¹ç‚¹</h2><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ol><li>å„ç§æ•°å€¼è®¡ç®—çš„ç»†èŠ‚ï¼Œä½ ä¸ç”¨è€ƒè™‘ï¼Œtfåº“å¯ä»¥å¸®ä½ </li><li>æ¥å£å¾ˆç®€æ´ï¼Œä¼šå¹¿æ’­å’Œç›‘å¬å°±è¡Œï¼›</li><li>é—®é¢˜æ‰¾çš„å¾ˆå‡†ï¼Œé‚£å°±æ˜¯éœ€è¦ç»´æŠ¤åæ ‡ç³»ä¹‹é—´çš„å…³ç³»ï¼Œå°¤å…¶æ˜¯çˆ¶å­åæ ‡ç³»çš„å…³ç³»</li><li>æä¾›äº†å¾ˆå¤šå·¥å…·ç¨‹åº</li><li>è€ƒè™‘äº†ä¸æ—¶é—´ç›¸å…³çš„å˜æ¢</li><li>æ”¯æŒtf-prefixï¼Œå¯ä»¥åœ¨å¤šæœºå™¨äººä¸Šç”¨ã€‚é€šè¿‡è®©ä¸åŒæœºå™¨äººä½¿ç”¨ä¸åŒçš„prefixï¼Œæ¥åŒºåˆ†æœºå™¨äººã€‚å¦‚æœåªæœ‰ä¸€ä¸ªæœºå™¨äººä¸€èˆ¬æ˜¯ä½¿ç”¨<code>/</code></li></ol><p><strong>ç¼ºç‚¹ï¼š</strong></p><ol><li>æ ‘çš„ç»“æ„å¾ˆç®€å•ï¼Œä½†æœ‰æ—¶å€™å¾ˆç¬¨æ‹™ã€‚å¯¹äºåŒçº§çš„åæ ‡ç³»ï¼Œå°±éœ€è¦ä»ä¸‹åˆ°ä¸Šæ‰¾å…±åŒå…ˆè¾ˆï¼Œç„¶åä»è¿™ä¸ªå…ˆè¾ˆå†å¾€ä¸‹æ‰¾ï¼Œè¿›è€Œç¡®å®šäºŒè€…çš„å…³ç³»ã€‚</li><li>æ¯ä¸ªè®¢é˜…å™¨è¦æƒ³è·å¾—æŸä¸¤ä¸ªåæ ‡ç³»çš„å…³ç³»éƒ½è¦æœç´¢åŒä¸€é¢—æ ‘ï¼Œè¿™æ ·çš„å¼€é”€å¤ªå¤§ï¼Œä¸»è¦æ˜¯ç½‘ç»œä¼ è¾“çš„è´Ÿè·æ¯”è¾ƒå¤§ã€‚</li><li>å¾ˆéš¾æ»¡è¶³å®æ—¶æ€§çš„è¦æ±‚ï¼Œè¿™ä¸€ç‚¹æ¯”è¾ƒæ˜¾ç„¶ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆtfä¼šå°†æ¯ä¸ªå˜æ¢å­˜10ç§’é’Ÿçš„æ•°æ®</li><li>è™½ç„¶æ•´ä½“æ¯”è¾ƒå®¹æ˜“ä¸Šæ‰‹ä½†æ˜¯å¾ˆå¤šç»†èŠ‚ä¸æ˜“ç†è§£ã€‚æ¯”å¦‚ï¼Œnowï¼ˆï¼‰å’Œtimeï¼ˆ0ï¼‰ï¼›æ¯”å¦‚ï¼ŒæŠ€æœ¯æ–‡æ¡£é‡Œçš„ä¸€äº›æœ¯è¯­åè¯ï¼›æ¯”å¦‚ï¼Œé‡‡ç”¨äº†æœºå™¨äººé‡Œçš„ä¹ æƒ¯ï¼Œä¸é£è¡Œå™¨ï¼Œæƒ¯å¯¼ï¼Œè½¦è¾†é‡Œçš„ä¹ æƒ¯åŒºåˆ«è¾ƒå¤§ï¼Œä½¿ç”¨æ—¶ä¸èƒ½æƒ³å½“ç„¶ã€‚</li></ol><h2 id="TFæ¶ˆæ¯ï¼šä¸¤ä¸ªframeä¹‹é—´çš„æ¶ˆæ¯"><a href="#TFæ¶ˆæ¯ï¼šä¸¤ä¸ªframeä¹‹é—´çš„æ¶ˆæ¯" class="headerlink" title="TFæ¶ˆæ¯ï¼šä¸¤ä¸ªframeä¹‹é—´çš„æ¶ˆæ¯"></a>TFæ¶ˆæ¯ï¼šä¸¤ä¸ªframeä¹‹é—´çš„æ¶ˆæ¯</h2><p>æ¯ä¸ªçˆ¶å­åæ ‡ç³»ä¹‹é—´éƒ½ä¼šæœ‰broadcasterèŠ‚ç‚¹æ¥å‘å¸ƒæ¶ˆæ¯ç»´ç³»åæ ‡ä¹‹é—´çš„è½¬æ¢å…³ç³»ã€‚<code>TransformStampde.msg</code>å°±æ˜¯<code>/tf</code>è¯é¢˜ä¸Šæ¶ˆæ¯ã€‚è¯¥æ¶ˆæ¯æ ¼å¼ç”¨æ¥è¡¨ç¤ºä¸¤ä¸ªframeä¹‹é—´ä¸€å°æ®µtfå˜æ¢çš„ç›¸å¯¹åæ ‡å…³ç³»çš„ã€‚</p><p>è¯´æ˜ï¼š</p><p>ROSä¸­å®é™…ä¸Šæ˜¯é tf treeæ¥è¡¨ç¤ºæ•´ä¸ªç³»ç»Ÿçš„åæ ‡ç³»å…³ç³»çš„ï¼Œè€Œéç®€å•åœ°é å¤šä¸ªä¸¤ä¸¤çˆ¶å­åæ ‡ç³»çš„è½¬æ¢å…³ç³»æ¥æè¿°çš„ã€‚è¿™é‡Œçš„<code>TransformStampde.msg</code>æ¶ˆæ¯çš„tf treeæ¶ˆæ¯ç±»å‹çš„ç‰‡æ®µå³å…¶ä¸­çš„ä¸€å¯¹çˆ¶å­åæ ‡ç³»ä½å§¿çš„æè¿°æ–¹å¼ï¼Œtf treeæ¶ˆæ¯ç±»å‹åŸºäº<code>TransformStampde.msg</code>æ¶ˆæ¯ï¼Œå› æ­¤å…ˆä»‹ç»<code>TransformStampde.msg</code>ã€‚<code>TransformStampde.msg</code>æœ¬è´¨ä¸Šæè¿°çš„æ˜¯tf treeä¸­ä¸€å°æ®µtfå˜æ¢ã€‚</p><p>å…·ä½“æ¶ˆæ¯ç±»å‹å¦‚ä¸‹ï¼š</p><p><code>geometry_msgs/TransformStamped</code>ï¼ˆå¯è§è¯¥æ¶ˆæ¯ç±»å‹æ˜¯å±äº<code>geometry_msgs</code>ç¨‹åºåŒ…çš„ï¼Œè€ŒétfåŒ…ï¼‰</p><pre class="line-numbers language-none"><code class="language-none">std_mags/Header header        uint32 seq        time stamp        string frame_idstring child_frame_idgeometry_msgs/Transform transform        geometry_msgs/Vector3 translation                float64 x                float64 y                float64 z        geometry_msgs/Quaternion rotation                float64 x                float64 y                flaot64 z                float64 w<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ¶ˆæ¯è§£é‡Šï¼š"><a href="#æ¶ˆæ¯è§£é‡Šï¼š" class="headerlink" title="æ¶ˆæ¯è§£é‡Šï¼š"></a>æ¶ˆæ¯è§£é‡Šï¼š</h3><p>è¯¥æ¶ˆæ¯è¡¨ç¤ºçš„çš„æ˜¯å½“å‰åæ ‡ç³»frame_idå’Œå®ƒçš„å­åæ ‡ç³»child_frame_idä¹‹é—´çš„è½¬æ¢å…³ç³»ã€‚å…·ä½“çš„è½¬æ¢ä½å§¿æ˜¯ç”±<code>geometry_msgs/Transform</code>æ¶ˆæ¯ç±»å‹æ¥å®šä¹‰çš„ï¼Œè¯¥æ¶ˆæ¯ç±»å‹ç”¨ä¸‰ç»´å‘é‡è¡¨ç¤ºå¹³ç§»ï¼Œç”¨å››å…ƒç»„è¡¨ç¤ºæ—‹è½¬ã€‚</p><h2 id="TFæ¶ˆæ¯ï¼šTFæ ‘çš„æ¶ˆæ¯ç±»å‹"><a href="#TFæ¶ˆæ¯ï¼šTFæ ‘çš„æ¶ˆæ¯ç±»å‹" class="headerlink" title="TFæ¶ˆæ¯ï¼šTFæ ‘çš„æ¶ˆæ¯ç±»å‹"></a>TFæ¶ˆæ¯ï¼šTFæ ‘çš„æ¶ˆæ¯ç±»å‹</h2><p><code>/tf</code>è¯é¢˜è¡¨ç¤ºçš„å†…å®¹æ˜¯æ•´ä¸ªæœºå™¨äººçš„tfæ ‘ï¼Œè€Œéä»…ä»…æ˜¯æŸä¸¤ä¸ªåæ ‡ç³»çš„è½¬æ¢å…³ç³»ï¼Œè¿™æ ·çš„è¯ï¼Œ<code>/tf</code>è¯é¢˜æ˜¯éœ€è¦å¾ˆå¤šçš„èŠ‚ç‚¹æ¥ç»´æŠ¤çš„ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹ç»´æŠ¤ä¸¤ä¸ªçˆ¶å­frameä¹‹é—´çš„å…³ç³»ã€‚å³ä¸€ä¸ª<code>/tf</code>è¯é¢˜ä¸Šé¢ï¼Œå¯èƒ½ä¼šæœ‰å¾ˆå¤šä¸ªnodeå‘ä¸Šé¢å‘é€æ¶ˆæ¯ã€‚</p><p>è¿™æ ·å°±ç›¸å½“äºtf treeæ˜¯ç”±å¾ˆå¤šçš„frameä¹‹é—´tfæ‹¼æ¥è€Œæˆã€‚åˆšæ‰è¯´çš„<code>TransformStampde.msg</code>æ¶ˆæ¯ç±»å‹è¡¨ç¤ºçš„æ˜¯ä¸¤ä¸ªframeä¹‹é—´tfå…³ç³»ï¼Œæ¥ä¸‹æ¥è¦ä»‹ç»çœŸæ­£åœ¨<code>/tf</code>è¯é¢˜ä¸Šè¿›è¡Œä¼ è¾“çš„tf treeçš„æ¶ˆæ¯ç±»å‹ã€‚</p><p>åœ¨tf2ä¸­çš„tfæ ‘å¯¹åº”çš„æ¶ˆæ¯ç±»å‹æ˜¯<code>tf2_msgs/TFMessage.msg</code>ã€‚å¯è§è¯¥æ¶ˆæ¯ä½äº<code>tf2_msgs</code>ç¨‹åºåŒ…å†…ã€‚</p><p>tf2_msgs/TFMessageæ¶ˆæ¯çš„å…·ä½“æ ¼å¼ï¼š</p><pre class="line-numbers language-none"><code class="language-none">geometry_msgs/TransformStamped[] transforms        std_msgs/Header header                uint32 seq                time stamp                string frame_id        string child_frame_id        geometry_msgs/Transform transform                geometry_msgs/Vector3 translation                        float64 x                        float64 y                        float64 z                geometry_msgs/Quaternion rotation                        float64 x                        float64 y                        flaot64 z                        float64 w<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹å‡ºtfæ ‘çš„æ¶ˆæ¯ç±»å‹å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ª<code>TransformStamped</code>ç±»å‹å®šä¹‰çš„å¯å˜é•¿åº¦æ•°ç»„ã€‚ä¹Ÿå°±æ˜¯è¯´æœ¬è´¨å°±æ˜¯ç”±å¾ˆå¤šä¸ªä¸¤ä¸ªframeä¹‹é—´çš„tfæ¶ˆæ¯<code>TransformStamped</code>å½¢æˆæè¿°æ•´ä¸ªæœºå™¨äººçš„tfæ ‘çš„æ¶ˆæ¯ç±»å‹<code>tf2_msgs/TFMessage.msg</code>ã€‚</p><h2 id="TFåœ¨roscppä¸rospyä¸­çš„æ¥å£"><a href="#TFåœ¨roscppä¸rospyä¸­çš„æ¥å£" class="headerlink" title="TFåœ¨roscppä¸rospyä¸­çš„æ¥å£"></a>TFåœ¨roscppä¸rospyä¸­çš„æ¥å£</h2><p>æ— è®ºæ˜¯roscppä¸­è¿˜æ˜¯rospyä¸­éƒ½æœ‰tfåº“ï¼Œtfæä¾›äº†å¾ˆå¤šæœ‰ç”¨çš„æ¥å£ã€‚è¿™é‡Œåªå¤§ä½“æè¿°ï¼Œå…·ä½“ä½¿ç”¨çš„æ—¶å€™å†å‚è€ƒå…·ä½“çš„èµ„æ–™ã€‚</p><p>æä¾›çš„ç»“æ„ç§ç±»ï¼š</p><ol><li>æ•°æ®ç±»å‹çš„å®šä¹‰ï¼ˆç±»ï¼‰ï¼šå‘é‡ã€ç‚¹ã€å››å…ƒæ•°ã€3*3æ—‹è½¬çŸ©é˜µã€ä½å§¿ç­‰</li><li>æ•°æ®è½¬æ¢ï¼šç»™å‡ºäº†æ—‹è½¬çŸ©é˜µã€å››å…ƒæ•°ã€æ¬§æ‹‰è§’ã€æ—‹è½¬è½´ä¹‹é—´çš„è½¬æ¢å‡½æ•°</li><li>å…³äºç‚¹ã€å‘é‡ã€è§’åº¦ã€å››å…ƒæ•°ç­‰çš„è¿ç®—çš„å‡½æ•°</li><li>tfç±»ï¼Œå°è£…å¥½äº†å‘å¸ƒå™¨ä¸è®¢é˜…å™¨æ¥å£ã€‚å¯ä»¥å°†åæ ‡ç³»è½¬æ¢å…³ç³»å‘å¸ƒåˆ°<code>/tf</code>è¯é¢˜ä¸Šçš„ä¸€æ®µtransformä¸Šï¼›ä¹Ÿå¯ä»¥è®¢é˜…<code>/tf</code>è¯é¢˜ï¼Œå¹¶ä¸”å¾—åˆ°åˆ°ä»æºåæ ‡ç³»åˆ°ç›®æ ‡åæ ‡ç³»è¿™ä¸¤ä¸ªåæ ‡ç³»ä¹‹é—´çš„è½¬æ¢å…³ç³»ã€‚</li></ol><p><code>TransformBroadcaster</code>ç±»å°±æ˜¯ä¸€ä¸ªpublisherï¼Œè€ŒsendTransform()çš„ä½œç”¨æ˜¯æ¥å°è£…publishçš„å‡½æ•°ã€‚åœ¨å®é™…çš„ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æŸä¸ªNodeä¸­æ„å»ºtf::TransformBroadcasterç±»ï¼Œç„¶åè°ƒç”¨sendTransform()ï¼Œå°†transformå‘å¸ƒåˆ°<code>/tf</code>çš„ä¸€æ®µtransformä¸Šã€‚</p><p><code>TransformListener</code>ç±»å°±æ˜¯ä»<code>/tf</code>ä¸Šæ¥æ”¶çš„ç±»ï¼Œç»§æ‰¿è‡ªtf::Transformerã€‚lookupTransform()ç”¨äºè¿”å›ä¸¤ä¸ªåæ ‡ç³»çš„å˜æ¢ã€‚</p><h2 id="TFç¨‹åºåŒ…ç›¸å…³çš„å‘½ä»¤è¡Œä½¿ç”¨"><a href="#TFç¨‹åºåŒ…ç›¸å…³çš„å‘½ä»¤è¡Œä½¿ç”¨" class="headerlink" title="TFç¨‹åºåŒ…ç›¸å…³çš„å‘½ä»¤è¡Œä½¿ç”¨"></a>TFç¨‹åºåŒ…ç›¸å…³çš„å‘½ä»¤è¡Œä½¿ç”¨</h2><ol><li><p>ç”¨å‘½ä»¤è¡Œæ˜¾ç¤ºå½“å‰æ‰€æœ‰frameçš„æ–¹æ³•ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosrun tf tf_monitor <span class="token comment">#æ˜¾ç¤ºå½“å‰åæ ‡å˜æ¢æ ‘çš„ä¿¡æ¯ï¼Œä¸»è¦æ˜¯åç§°å’Œå®æ—¶çš„æ—¶é—´å»¶æ—¶</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rostopic <span class="token builtin class-name">echo</span> /tf <span class="token comment">#ä»¥TransformStampedæ¶ˆæ¯ç±»å‹çš„æ•°ç»„æ˜¾ç¤ºæ‰€æœ‰çˆ¶å­frameçš„ä½å§¿è½¬æ¢å…³ç³»</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>æ ¹æ®å½“å‰çš„tfæ ‘åˆ›å»ºä¸€ä¸ªpdfå›¾ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosrun tf view_frames<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™ä¸ªå·¥å…·é¦–å…ˆè®¢é˜…<code>/tf</code>ï¼Œè®¢é˜…5ç§’é’Ÿï¼Œæ ¹æ®è¿™æ®µæ—¶é—´æ¥å—åˆ°çš„tfä¿¡æ¯ï¼Œç»˜åˆ¶æˆä¸€å¼ tf treeï¼Œç„¶ååˆ›å»ºæˆä¸€ä¸ªpdfå›¾ã€‚</p><p>å°†ä¼šä»¥å›¾å½¢çš„å½¢å¼æ˜¾ç¤ºå‡ºtfæ ‘ä¸­æ‰€æœ‰çš„frameå’Œä¸¤ä¸ªframe çš„çˆ¶å­å…³ç³»åŠå…¶Broadcasterã€Average rateç­‰</p></li><li><p>æŸ¥çœ‹å½“å‰çš„tfæ ‘ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosrun rqt_tf_tree rqt_tf_tree<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¯¥å‘½ä»¤åŒæ ·æ˜¯æŸ¥è¯¢tf treeçš„ï¼Œä½†æ˜¯ä¸ç¬¬ä¸€ä¸ªå‘½ä»¤çš„åŒºåˆ«æ˜¯è¯¥å‘½ä»¤æ˜¯åŠ¨æ€çš„æŸ¥è¯¢å½“å‰çš„tf treeï¼Œå½“å‰çš„ä»»ä½•å˜åŒ–éƒ½èƒ½å½“å³çœ‹åˆ°ï¼Œä¾‹å¦‚ä½•æ—¶æ–­å¼€ä½•æ—¶è¿æ¥ï¼Œæ•æ‰åˆ°è¿™äº›ç„¶åé€šè¿‡rqtæ’ä»¶æ˜¾ç¤ºå‡ºæ¥ã€‚</p></li><li><p>æŸ¥çœ‹ä¸¤ä¸ªframeä¹‹é—´çš„å˜æ¢å…³ç³»ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosrun tf tf_echo<span class="token punctuation">[</span>source_frame<span class="token punctuation">]</span><span class="token punctuation">[</span>target_frame<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å°†ä¼šæŒç»­çš„æ˜¾ç¤ºæºåæ ‡ç³»å’Œç›®æ ‡åæ ‡ç³»çš„ä½å§¿å˜æ¢å…³ç³»ã€‚</p></li></ol><p>ç›¸å…³å­¦ä¹ èµ„æ–™ï¼š<a href="http://wiki.ros.org/tf/Tutorials">http://wiki.ros.org/tf/Tutorials</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³sourceå¤šä¸ªROSå·¥ä½œç©ºé—´æ—¶çš„è¦†ç›–é—®é¢˜</title>
      <link href="2021/07/17/ros-notes-3/"/>
      <url>2021/07/17/ros-notes-3/</url>
      
        <content type="html"><![CDATA[<h1 id="è§£å†³sourceå¤šä¸ªROSå·¥ä½œç©ºé—´æ—¶çš„è¦†ç›–é—®é¢˜"><a href="#è§£å†³sourceå¤šä¸ªROSå·¥ä½œç©ºé—´æ—¶çš„è¦†ç›–é—®é¢˜" class="headerlink" title="è§£å†³sourceå¤šä¸ªROSå·¥ä½œç©ºé—´æ—¶çš„è¦†ç›–é—®é¢˜"></a>è§£å†³sourceå¤šä¸ªROSå·¥ä½œç©ºé—´æ—¶çš„è¦†ç›–é—®é¢˜</h1><h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><p><strong>åœ¨~/.zshrcæˆ–è€…~/.bashrcä¸­source äº†å¤šä¸ªå·¥ä½œç©ºé—´ï¼Œä½†æœ‰çš„å·¥ä½œç©ºé—´å¹¶æ²¡æœ‰è¢«æˆåŠŸsource</strong></p><p>ä½¿ç”¨rosæœ‰æ—¶éœ€è¦å¤šä¸ªåˆ©ç”¨å¤šä¸ªå·¥ä½œç©ºé—´ï¼Œä½†æ¯æ‰“å¼€ä¸€ä¸ªç»ˆç«¯å°±è¦sourceä¸€æ¬¡å·¥ä½œç©ºé—´æ¯”è¾ƒéº»çƒ¦ã€‚å°†å·¥ä½œç©ºé—´çš„setup.shè„šæœ¬å†™å…¥~/.zshrcæˆ–è€…~/.bashrcä¸­æ˜¯ä¸€ç§è¾ƒä¸ºæ–¹ä¾¿çš„åšæ³•ã€‚</p><p>ä½†æœ‰æ—¶å€™ï¼Œæœ‰ä¸€äº›å·¥ä½œç©ºé—´å¹¶ä¸ä¼šè¢«æˆåŠŸçš„sourceã€‚åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œ<code>roslaunch</code>ä¹Ÿä¸ç»™è‡ªåŠ¨è¡¥å…¨ï¼Œå¼ºè¡Œæ‰“å‡ºå…¨åè¿è¡Œæ—¶ä¹Ÿä¼šæŠ¥é”™ï¼Œ<code>echo $ROS_PACKAGE_PATH </code>è¾“å‡ºçš„ä¿¡æ¯é‡Œé¢ä¹Ÿçœ‹ä¸è§é‚£å‡ ä¸ªåŒ…ã€‚</p><p>å¯èƒ½çš„åŸå› æ˜¯å› ä¸ºsource çš„éƒ¨åˆ†å·¥ä½œç©ºé—´åœ¨å†™å…¥~/.zshrcæˆ–è€…~/.bashrcæ—¶æ²¡æœ‰ç¼–è¯‘å¯¼è‡´é¡ºåºé”™ä¹±ã€‚</p><h3 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h3><h4 id="æ–¹æ³•ä¸€ï¼š"><a href="#æ–¹æ³•ä¸€ï¼š" class="headerlink" title="æ–¹æ³•ä¸€ï¼š"></a>æ–¹æ³•ä¸€ï¼š</h4><p>æ¯”è¾ƒæ–¹ä¾¿çš„è§£å†³æ–¹æ³•æ˜¯ï¼Œæ‰¾åˆ°~/.zshrcæˆ–è€…~/.bashrcä¸­æœ€åè¢«sourceçš„å·¥ä½œç©ºé—´ï¼Œç„¶åä¿®æ”¹å…¶develæ–‡ä»¶å¤¹ä¸‹çš„setup_util.pyæ–‡ä»¶ï¼ŒæŸ¥æ‰¾CMAKE_PREFIX_PATHï¼Œåœ¨å…¶ä¸­é”®å…¥ç¼ºå°‘çš„å·¥ä½œç©ºé—´çš„develè·¯å¾„ï¼Œä¿å­˜é€€å‡ºã€‚ä¹‹åé‡æ–°æ‰“å¼€ä¸€ä¸ªç»ˆç«¯æ—¶ï¼Œåº”è¯¥æ‰€æœ‰å·¥ä½œç©ºé—´éƒ½ä¼šè¢«æˆåŠŸsourceäº†ã€‚</p><p>ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œä½ éœ€è¦æ‰¾åˆ°çš„æ˜¯<code>/home/lqx/catkin_workspace/catkin_drive</code>è¿™ä¸ªå·¥ä½œç©ºé—´ã€‚</p><p><img src="/images/ros-notes/3-1.png"></p><p>ä¹‹åï¼Œåœ¨å…¶develæ–‡ä»¶å¤¹ä¸‹çš„setup_util.pyæ–‡ä»¶ä¸­æŸ¥æ‰¾æŸ¥æ‰¾CMAKE_PREFIX_PATHï¼Œæ‰¾åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„éƒ¨åˆ†ã€‚</p><p><img src="/images/ros-notes/3-2.png"></p><p>åœ¨å…¶ä¸­é”®å…¥ç¼ºå°‘çš„å·¥ä½œç©ºé—´çš„develè·¯å¾„ï¼Œå…·ä½“çš„æ“ä½œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="/images/ros-notes/3-3.png"></p><p>ä¿®æ”¹å¥½ä¹‹åï¼Œé‡æ–°æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œæˆ–è€…åœ¨ç°æœ‰ç»ˆç«¯ä¸‹é‡æ–°source ~/.zshrcæˆ–è€…~/.bashrcæ–‡ä»¶å³å¯ã€‚</p><p><strong>æ£€éªŒï¼š</strong></p><p>å¯ä»¥æŸ¥çœ‹<code>roslaunch</code>æŒ‡ä»¤æ˜¯å¦èƒ½è‡ªåŠ¨è¡¥å…¨å·¥ä½œç©ºé—´ä¸­çš„åŒ…ï¼Œå¹¶ä¸”èƒ½å¦æˆåŠŸçš„è¿è¡Œï¼›</p><p>ä¹Ÿå¯ä»¥æ£€æŸ¥<code>echo $ROS_PACKAGE_PATH </code>æŒ‡ä»¤è¾“å‡ºçš„ä¿¡æ¯ä¸­æ˜¯å¦åŒ…å«ä½ æ‰€æœ‰çš„å·¥ä½œç©ºé—´ã€‚</p><h4 id="æ–¹æ³•äºŒï¼š"><a href="#æ–¹æ³•äºŒï¼š" class="headerlink" title="æ–¹æ³•äºŒï¼š"></a>æ–¹æ³•äºŒï¼š</h4><p>ä¿®æ”¹~/.zshrcæˆ–è€…~/.bashrcä¸­æœ€åè¢«sourceçš„å·¥ä½œç©ºé—´ä¸‹çš„æ–‡ä»¶å¹¶ä¸æ˜¯ä¸€ç§å¾ˆåˆé€‚çš„æ–¹æ³•ï¼Œæ¯•ç«Ÿè¿™ä¸ªå·¥ä½œç©ºé—´ä¸‹è¿˜æ”¾ç€éœ€è¦ä½¿ç”¨çš„åŒ…ï¼Œå¯¹å…¶è¿›è¡Œä¿®æ”¹ã€ç¼–è¯‘ç­‰æ“ä½œéš¾å…ä¼šäº§ç”Ÿä¸€äº›å½±å“ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å•ç‹¬å»ºç«‹ä¸€ä¸ªå·¥ä½œç©ºé—´ä¸“é—¨ç”¨æ¥ç®¡ç†å…¶ä»–æ‰€æœ‰çš„å·¥ä½œç©ºé—´ï¼Œæˆ‘ä»¬åªéœ€è¦å°†å…¶sourceæŒ‡ä»¤å†™å…¥~/.zshrcæˆ–è€…~/.bashrcå³å¯ï¼Œæ¯ä¸€æ¬¡æˆ‘ä»¬æƒ³å¢æ·»æ–°çš„å·¥ä½œç©ºé—´ï¼Œåªè¦ä¿®æ”¹è¿™ä¸ªå·¥ä½œç©ºé—´çš„develæ–‡ä»¶å¤¹ä¸‹çš„_setup_util.pyå°±å¯ä»¥äº†ã€‚</p><p>æ¯”å¦‚è¿™é‡Œæˆ‘å»ºäº†ä¸€ä¸ªå«åšros_managerçš„å·¥ä½œç©ºé—´ï¼Œä¿®æ”¹å¥½_setup_util.pyæ–‡ä»¶ä¹‹åï¼Œå†™å…¥åˆ°~/.zshrcä¸­ï¼ŒæŠŠå…¶ä»–å·¥ä½œç©ºé—´çš„sourceæŒ‡ä»¤éƒ½æ³¨é‡Šæ‰å³å¯ï¼Œä»¥åæ·»åŠ æ–°çš„å·¥ä½œç©ºé—´ï¼Œåªéœ€è¦ä¿®æ”¹ros_managerçš„_setup_util.pyæ–‡ä»¶å³å¯ã€‚</p><p><img src="/images/ros-notes/3-4.png"></p><h4 id="æ–¹æ³•ä¸‰ï¼š"><a href="#æ–¹æ³•ä¸‰ï¼š" class="headerlink" title="æ–¹æ³•ä¸‰ï¼š"></a>æ–¹æ³•ä¸‰ï¼š</h4><p>å…¶å®è¿˜å¯ä»¥å°†<code>--extend</code>å‚æ•°ä¼ é€’ç»™setup.shæ–‡ä»¶ï¼Œå®ƒåªä¼šæ·»åŠ åˆ°ç¯å¢ƒä¸­ï¼Œè€Œä¸ä¼šè®¾ç½®ç¯å¢ƒã€‚</p><p>åœ¨~/.zshrcæˆ–è€…~/.bashrcä¸­ï¼Œå¯¹åº”çš„æ“ä½œæ˜¯åœ¨sourceå‘½ä»¤åé¢åŠ ä¸Š<code>--extend</code>ã€‚</p><p>ä½†æ˜¯è¿™å¯èƒ½æ˜¯å±é™©çš„ï¼Œå»ºè®®åšé€‚å½“çš„å·¥ä½œåŒºé“¾æ¥ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯¦è§£å››å…ƒæ•°</title>
      <link href="2021/07/10/slam-learning-3/"/>
      <url>2021/07/10/slam-learning-3/</url>
      
        <content type="html"><![CDATA[<h1 id="è¯¦è§£å››å…ƒæ•°"><a href="#è¯¦è§£å››å…ƒæ•°" class="headerlink" title="è¯¦è§£å››å…ƒæ•°"></a>è¯¦è§£å››å…ƒæ•°</h1><blockquote><p>æ˜¨å¤©çœ‹äº†ã€Šè§†è§‰SLAMåå››è®²ã€‹ç¬¬ä¸‰è®²å››å…ƒæ•°éƒ¨åˆ†çš„å†…å®¹ï¼Œå¯¹é‡Œé¢çš„ä¸€äº›ä¸œè¥¿ä¸æ˜¯å¾ˆæ‡‚ï¼Œè¿™ä¸¤å¤©å¥½å¥½åœ°æ¨å¯¼äº†ä¸€ä¸‹ã€‚</p></blockquote><p>æœ¬æ–‡ä¸»è¦ä»‹ç»ï¼š</p><ol><li>å››å…ƒæ•°å‡ ä¸ªé‡è¦æ€§è´¨ã€æ¨è®ºçš„æ¨å¯¼</li><li>å¦‚ä½•ç”¨å››å…ƒæ•°è¡¨ç¤º3Dæ—‹è½¬</li><li>å››å…ƒæ•°ã€æ—‹è½¬å‘é‡ã€æ—‹è½¬çŸ©é˜µä¹‹é—´çš„è½¬æ¢å…³ç³»</li><li>å››å…ƒæ•°çš„åŒå€è¦†ç›–ï¼ˆä¸¥è°¨è¯æ˜æš‚æœªç»™å‡ºï¼‰</li></ol><p>ç”±äºå››å…ƒæ•°æ¨å¯¼è¿™è¾¹çš„å…¬å¼æ¯”è¾ƒå¤šï¼Œæ‰‹å†™è¦æ–¹ä¾¿ä¸€äº›ï¼Œæ‰€ä»¥ä¸‹é¢ç›´æ¥ç»™å‡ºæ‰‹å†™çš„æ¨å¯¼è¯æ˜è¿‡ç¨‹ã€‚</p><h3 id="ä¸€ã€å››å…ƒæ•°å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„æ€§è´¨"><a href="#ä¸€ã€å››å…ƒæ•°å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„æ€§è´¨" class="headerlink" title="ä¸€ã€å››å…ƒæ•°å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„æ€§è´¨"></a>ä¸€ã€å››å…ƒæ•°å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„æ€§è´¨</h3><p><img src="/images/slam-learning/3-1.JPG"></p><p><img src="/images/slam-learning/3-2.JPG"></p><h3 id="äºŒã€å››å…ƒæ•°ä¸3Dæ—‹è½¬"><a href="#äºŒã€å››å…ƒæ•°ä¸3Dæ—‹è½¬" class="headerlink" title="äºŒã€å››å…ƒæ•°ä¸3Dæ—‹è½¬"></a>äºŒã€å››å…ƒæ•°ä¸3Dæ—‹è½¬</h3><p><img src="/images/slam-learning/3-3.JPG"></p><p><img src="/images/slam-learning/3-4.JPG"></p><p><img src="/images/slam-learning/3-5.JPG"></p><p><img src="/images/slam-learning/3-6.JPG"></p><h3 id="ä¸‰ã€å››å…ƒæ•°ã€æ—‹è½¬å‘é‡ã€æ—‹è½¬çŸ©é˜µä¹‹é—´çš„ç›¸äº’è¡¨ç¤º"><a href="#ä¸‰ã€å››å…ƒæ•°ã€æ—‹è½¬å‘é‡ã€æ—‹è½¬çŸ©é˜µä¹‹é—´çš„ç›¸äº’è¡¨ç¤º" class="headerlink" title="ä¸‰ã€å››å…ƒæ•°ã€æ—‹è½¬å‘é‡ã€æ—‹è½¬çŸ©é˜µä¹‹é—´çš„ç›¸äº’è¡¨ç¤º"></a>ä¸‰ã€å››å…ƒæ•°ã€æ—‹è½¬å‘é‡ã€æ—‹è½¬çŸ©é˜µä¹‹é—´çš„ç›¸äº’è¡¨ç¤º</h3><p><img src="/images/slam-learning/3-7.JPG"></p><p><img src="/images/slam-learning/3-8.JPG"></p><p><img src="/images/slam-learning/3-9.JPG"></p><h3 id="å››ã€å…³äºå››å…ƒæ•°çš„åŒå€è¦†ç›–"><a href="#å››ã€å…³äºå››å…ƒæ•°çš„åŒå€è¦†ç›–" class="headerlink" title="å››ã€å…³äºå››å…ƒæ•°çš„åŒå€è¦†ç›–"></a>å››ã€å…³äºå››å…ƒæ•°çš„åŒå€è¦†ç›–</h3><p><img src="/images/slam-learning/3-10.JPG"></p>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½—å¾·é‡Œæ ¼æ–¯å…¬å¼æ¨å¯¼</title>
      <link href="2021/07/08/slam-learning-2/"/>
      <url>2021/07/08/slam-learning-2/</url>
      
        <content type="html"><![CDATA[<h1 id="ç½—å¾·é‡Œæ ¼æ–¯å…¬å¼æ¨å¯¼"><a href="#ç½—å¾·é‡Œæ ¼æ–¯å…¬å¼æ¨å¯¼" class="headerlink" title="ç½—å¾·é‡Œæ ¼æ–¯å…¬å¼æ¨å¯¼"></a>ç½—å¾·é‡Œæ ¼æ–¯å…¬å¼æ¨å¯¼</h1><blockquote><p>æœ€è¿‘åšä¸»åœ¨é‡å­¦ã€Šè§†è§‰SLAMåå››è®²ã€‹ï¼Œä¹‹åå¯èƒ½ä¼šé™†é™†ç»­ç»­çš„å‘ä¸€äº›å­¦ä¹ ç¬”è®°æˆ–è€…å…¬å¼çš„æ¨å¯¼ã€‚</p></blockquote><p>ä¹¦ä¸­ç¬¬53é¡µç»™å‡ºäº†ç½—å¾·é‡Œæ ¼æ–¯å…¬å¼ï¼Œè¿™ä¸ªå…¬å¼æè¿°äº†<strong>ä»æ—‹è½¬å‘é‡åˆ°æ—‹è½¬çŸ©é˜µçš„è½¬æ¢è¿‡ç¨‹ã€‚</strong></p><p>è™½ç„¶ä½œè€…åé¢ä¼šä»æä»£æ•°å±‚é¢ç»™å‡ºä¸€ä¸ªè¯æ˜ï¼Œä½†ç›´æ¥ä»çº¿æ€§ä»£æ•°çš„å±‚é¢è¿›è¡Œæ¨å¯¼ä¹Ÿå¹¶ä¸éº»çƒ¦ï¼Œå…·ä½“çš„æ¨å¯¼è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/images/slam-learning/2-1.jpg"></p><p><img src="/images/slam-learning/2-2.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntué…ç½®OpenCVåŠå¤šç‰ˆæœ¬OpenCVå…±å­˜</title>
      <link href="2021/07/06/opencv-notes-0/"/>
      <url>2021/07/06/opencv-notes-0/</url>
      
        <content type="html"><![CDATA[<h1 id="Ubuntué…ç½®OpenCVåŠå¤šç‰ˆæœ¬OpenCVå…±å­˜"><a href="#Ubuntué…ç½®OpenCVåŠå¤šç‰ˆæœ¬OpenCVå…±å­˜" class="headerlink" title="Ubuntué…ç½®OpenCVåŠå¤šç‰ˆæœ¬OpenCVå…±å­˜"></a>Ubuntué…ç½®OpenCVåŠå¤šç‰ˆæœ¬OpenCVå…±å­˜</h1><p>æœ¬æ–‡ä¸»è¦ä»‹ç»ubuntuä¸‹OpenCVçš„å®‰è£…ï¼Œä»¥åŠå¦‚ä½•å®ç°å¤šä¸ªOpenCVç‰ˆæœ¬å…±å­˜ã€‚</p><p>ç¬”è€…ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿä¸ºUbuntu18.04ï¼Œå®‰è£…çš„OpenCVç‰ˆæœ¬æœ‰2.4.9ã€3.2.0ã€3.4.6ã€4.2.0ã€‚</p><h2 id="é…ç½®OpenCV"><a href="#é…ç½®OpenCV" class="headerlink" title="é…ç½®OpenCV"></a>é…ç½®OpenCV</h2><p>è¿™é‡Œä»¥opencv-4.2.0ä¸ºä¾‹ï¼Œä½†å…¶ä»–ç‰ˆæœ¬ä¹ŸåŸºæœ¬é€‚ç”¨ã€‚</p><h3 id="å®‰è£…OpenCVçš„ä¾èµ–åŒ…"><a href="#å®‰è£…OpenCVçš„ä¾èµ–åŒ…" class="headerlink" title="å®‰è£…OpenCVçš„ä¾èµ–åŒ…"></a>å®‰è£…OpenCVçš„ä¾èµ–åŒ…</h3><p>ä¸€æ­¥ä¸€æ­¥å®‰è£…ä¸‹é¢æ‰€æœ‰çš„ä¾èµ–åŒ…ï¼Œå¦‚æœä¸‹é¢çš„å®‰è£…æŠ¥é”™ï¼Œæ ¹æ®æŠ¥é”™çš„å…·ä½“ä¿¡æ¯ä¸Šç½‘æŸ¥æ‰¾ç›¸å…³èµ„æ–™å³å¯è§£å†³ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> update <span class="token parameter variable">-y</span> <span class="token comment"># Update the list of packages</span><span class="token function">sudo</span> <span class="token function">apt-get</span> remove <span class="token parameter variable">-y</span> x264 libx264-dev <span class="token comment"># Remove the older version of libx264-dev and x264</span><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> build-essential checkinstall cmake pkg-config yasm<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">git</span> gfortran<span class="token function">sudo</span> add-apt-repository <span class="token parameter variable">-y</span> <span class="token string">"deb http://security.ubuntu.com/ubuntu xenial-security main"</span><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> libjpeg8-dev libjasper-dev libpng12-dev<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> libtiff5-dev<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> libavcodec-dev libavformat-dev libswscale-dev libdc1394-22-dev<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> libxine2-dev libv4l-dev<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> libgstreamer1.0-dev libgstreamer-plugins-base1.0-dev<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> qt5-default libgtk2.0-dev libtbb-dev<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> libatlas-base-dev<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> libfaac-dev libmp3lame-dev libtheora-dev<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> libvorbis-dev libxvidcore-dev<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> libopencore-amrnb-dev libopencore-amrwb-dev<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> x264 v4l-utils <span class="token comment"># Some Optional Dependencies</span><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> libprotobuf-dev protobuf-compiler<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> libgoogle-glog-dev libgflags-dev<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> libgphoto2-dev libeigen3-dev libhdf5-dev doxygen<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä¸‹è½½éœ€è¦çš„OpenCVç‰ˆæœ¬"><a href="#ä¸‹è½½éœ€è¦çš„OpenCVç‰ˆæœ¬" class="headerlink" title="ä¸‹è½½éœ€è¦çš„OpenCVç‰ˆæœ¬"></a>ä¸‹è½½éœ€è¦çš„OpenCVç‰ˆæœ¬</h3><p>æ‰€æœ‰OpenCVçš„å‘å¸ƒç‰ˆæœ¬éƒ½å¯ä»¥åœ¨ä¸‹é¢è¿™ä¸ªç½‘å€æ‰¾åˆ°ï¼Œæ ¹æ®è‡ªå·±çš„éœ€è¦ä¸‹è½½å³å¯ã€‚</p><p><a href="https://github.com/opencv/opencv/releases">https://github.com/opencv/opencv/releases</a></p><p>æˆ‘ä»¬éœ€è¦å®‰è£…çš„æ˜¯opencv-4.2.0ä»¥åŠå®ƒçš„æ‰©å±•æ¨¡å—opencv_contrib-4.2.0ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨ä¸‹é¢çš„ç½‘å€ä¸­ä¸‹è½½ï¼š</p><p><a href="https://github.com/opencv/opencv/releases/tag/4.2.0">OpenCV 4.2.0</a></p><p><a href="https://github.com/opencv/opencv_contrib/releases/tag/4.2.0">OpenCV Contib 4.2.0</a></p><p>ä¸‹è½½è§£å‹å¥½ä¹‹åï¼Œä¼šå¾—åˆ°ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œä½ å¯ä»¥åƒä¸‹é¢è¿™æ ·å­˜æ”¾è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼š</p><p><img src="/images/OpenCV-Notes/0-1.png"></p><h3 id="ä½¿ç”¨cmakeæ„å»ºåº“"><a href="#ä½¿ç”¨cmakeæ„å»ºåº“" class="headerlink" title="ä½¿ç”¨cmakeæ„å»ºåº“"></a>ä½¿ç”¨cmakeæ„å»ºåº“</h3><p>æˆ‘ä»¬å…ˆè¿›å…¥<code>opencv-4.2.0</code>æ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ª<code>build</code>æ–‡ä»¶ï¼Œä¹‹åå†è¿›å…¥è¿™ä¸ªæ–‡ä»¶å¤¹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> opencv-4.2.0<span class="token function">mkdir</span> build<span class="token builtin class-name">cd</span> build<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¿›å…¥<code>build</code>æ–‡ä»¶å¤¹åï¼Œä½ éœ€è¦è¾“å…¥ä¸‹é¢è¿™ç§æ ¼å¼çš„cmakeæŒ‡ä»¤ï¼Œ<strong>éœ€è¦æ ¹æ®ä½ çš„å®é™…æƒ…å†µï¼Œå¯¹ä¸‹é¢çš„æŒ‡ä»¤å‚æ•°è¿›è¡Œä¿®æ”¹ï¼Œä¸è¦å¤åˆ¶è¿‡å»å°±ç›´æ¥è¿è¡Œã€‚</strong></p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake">cmake -D <span class="token variable">CMAKE_BUILD_TYPE</span>=RELEASE \      -D <span class="token variable">CMAKE_INSTALL_PREFIX</span>=/usr/local/opencv_x.x.x \ <span class="token comment">#ä¿®æ”¹ä¸ºä½ çš„opencvç‰ˆæœ¬</span>      -D INSTALL_C_EXAMPLES=<span class="token boolean">ON</span> \      -D CUDA_ARCH_BIN='<span class="token number">6.1</span>' \ <span class="token comment">#ä¿®æ”¹ä¸ºä½ ä½¿ç”¨çš„ç”µè„‘æ˜¾å¡çš„è®¡ç®—èƒ½åŠ›</span>      -D WITH_CUDA=<span class="token boolean">ON</span> \      -D WITH_TBB=<span class="token boolean">ON</span> \      -D WITH_V4L=<span class="token boolean">ON</span> \      -D WITH_QT=<span class="token boolean">ON</span> \      -D WITH_OPENGL=<span class="token boolean">ON</span> \      -D OPENCV_EXTRA_MODULES_PATH=/YOU_PATH/opencv_contrib-x.x.x/modules \ <span class="token comment">#ä¿®æ”¹ä¸ºä½ æœ¬æœºopencv_contribçš„è·¯å¾„ï¼Œä¸ä½¿ç”¨opencv_contribå°±åˆ æ‰è¿™è¡Œ</span>      -D BUILD_EXAMPLES=<span class="token boolean">ON</span> \      -D OPENCV_GENERATE_PKGCONFIG=YES ..<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p><ul><li><p>ç”±äºOpenCV 4.2.0æ”¯æŒä½¿ç”¨CUDAå¯¹DNNæ¨¡å—è¿›è¡ŒåŠ é€Ÿè®¡ç®—ï¼Œæ‰€ä»¥è¿™é‡Œé…ç½®CUDAï¼›åœ¨æ­¤ä¹‹å‰éœ€è¦è‡ªè¡Œé…ç½®å¥½NVIDIAæ˜¾å¡çš„é©±åŠ¨ä¸CUDAã€‚</p></li><li><p>å…¶ä¸­<code>CUDA_ARCH_BIN='6.1'</code>æŒ‡çš„æ˜¯æ˜¾å¡çš„è®¡ç®—èƒ½åŠ›ï¼Œå¯ä»¥å‚è€ƒï¼š<a href="https://blog.csdn.net/huixingshao/article/details/82215703">NVIDA CUDAæ˜¾å¡è®¡ç®—èƒ½åŠ›å¯¹åº”è¡¨</a></p></li></ul><p>ä¸Šé¢è¿™ç§æ ¼å¼çš„æŒ‡ä»¤åœ¨ç¬”è€…çš„ç”µè„‘ä¸Šæ„å»ºopencv-4.2.0ã€opencv-3.4.6éƒ½æ²¡æœ‰å‘ç°é—®é¢˜ï¼Œåº”è¯¥å¯¹äºopencv3å’Œopencv4éƒ½èƒ½å¤Ÿæ„å»ºæˆåŠŸã€‚</p><p>ä½†æ˜¯åœ¨æ„å»ºopencv2ï¼Œæ¯”å¦‚opencv-2.4.9æ—¶ï¼Œå»ºè®®å‚è€ƒä¸‹é¢çš„æŒ‡ä»¤è¿›è¡Œæ„å»ºï¼š</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake">cmake -D <span class="token variable">CMAKE_BUILD_TYPE</span>=RELEASE \      -D <span class="token variable">CMAKE_INSTALL_PREFIX</span>=/usr/local/opencv_2.<span class="token number">4.9</span> \      -D WITH_CUDA=<span class="token boolean">OFF</span> \      -D WITH_OPENGL=<span class="token boolean">OFF</span> \      -D WITH_OPENCL=<span class="token boolean">OFF</span> \      -D BUILD_JPEG=<span class="token boolean">OFF</span> \      -D BUILD_PNG=<span class="token boolean">OFF</span> \      -D BUILD_JASPER=<span class="token boolean">OFF</span> \      -DBUILD_OPENEXR=<span class="token boolean">OFF</span> \      -D BUILD_TIFF=<span class="token boolean">OFF</span> \      -D BUILD_ZLIB=<span class="token boolean">OFF</span> \      -D WITH_FFMPEG=<span class="token boolean">OFF</span> \      -D <span class="token variable">CMAKE_CXX_FLAGS</span>=<span class="token string">"-std=c++11"</span> \      -D <span class="token variable">CMAKE_CXX_COMPILER</span>=/usr/bin/g++-<span class="token number">4.8</span> \      -D <span class="token variable">CMAKE_C_COMPILER</span>=/usr/bin/gcc-<span class="token number">4.8</span> \       ..<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä½¿ç”¨makeç¼–è¯‘åº“"><a href="#ä½¿ç”¨makeç¼–è¯‘åº“" class="headerlink" title="ä½¿ç”¨makeç¼–è¯‘åº“"></a>ä½¿ç”¨makeç¼–è¯‘åº“</h3><p>å»ºè®®åœ¨makeä¹‹å‰å…ˆæŸ¥çœ‹CPUçš„æ ¸å¿ƒæ•°ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nproc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä½ å¯ä»¥æ ¹æ®ä½ çš„æ ¸å¿ƒæ•°æ¥è°ƒæ•´makeæŒ‡ä»¤çš„å‚æ•°ï¼Œæ¯”å¦‚ç¬”è€…çš„CPUæ ¸å¿ƒæ•°ä¸º12ï¼Œåˆ™å¯ä»¥æ‰§è¡Œï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">make</span> <span class="token parameter variable">-j12</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä½ ä¹Ÿå¯ä»¥ä¸ç®¡CPUçš„æ ¸å¿ƒæ•°ï¼Œç›´æ¥è¿è¡Œï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">make</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä½†æ˜¯ä¸ºäº†é˜²æ­¢ç¼–è¯‘æœŸé—´å†…å­˜å ç”¨è¿‡å¤šï¼Œå¯¼è‡´ç¼–è¯‘å¤±è´¥æˆ–è€…ç³»ç»Ÿå¡æ­»ï¼Œè¿˜æ˜¯å»ºè®®æŸ¥çœ‹ä¸€ä¸‹CPUçš„æ ¸å¿ƒæ•°ï¼Œå¹¶ä¸”ä½¿ç”¨éƒ¨åˆ†çš„æ ¸å¿ƒæ¥è¿›è¡Œç¼–è¯‘ï¼Œæ¯”å¦‚<code>make -j8</code>ã€‚</p><p>åœ¨ç¼–è¯‘ç»“æŸä¹‹åï¼Œæ‰§è¡Œï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡"><a href="#æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡" class="headerlink" title="æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡"></a>æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡</h3><p>ä¿®æ”¹<code>~/.bashrc</code>æˆ–è€…<code>~/.zshrc</code>ï¼ˆç”¨å“ªä¸ªç»ˆç«¯å°±æ”¹å“ªä¸ªï¼‰ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">gedit ~/.bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åŠ å…¥å¦‚ä¸‹çš„å†…å®¹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#OpenCV_4.2.0</span><span class="token builtin class-name">export</span> <span class="token assign-left variable">PKG_CONFIG_PATH</span><span class="token operator">=</span>/usr/local/opencv_4.2.0/lib/pkgconfig<span class="token builtin class-name">export</span> <span class="token assign-left variable">LD_LIBRARY_PATH</span><span class="token operator">=</span>/usr/local/opencv_4.2.0/lib<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="éªŒè¯é…ç½®ç»“æœ"><a href="#éªŒè¯é…ç½®ç»“æœ" class="headerlink" title="éªŒè¯é…ç½®ç»“æœ"></a>éªŒè¯é…ç½®ç»“æœ</h3><p>ä»»æ„ç›®å½•åˆ›å»ºä¸€ä¸ª<code>test.cpp</code>æ–‡ä»¶ï¼Œå†™å…¥å¦‚ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"opencv.hpp"</span></span> <span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span> <span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv <span class="token punctuation">)</span><span class="token punctuation">{</span>  cout <span class="token operator">&lt;&lt;</span> <span class="token string">"OpenCV version : "</span> <span class="token operator">&lt;&lt;</span> CV_VERSION <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Major version : "</span> <span class="token operator">&lt;&lt;</span> CV_MAJOR_VERSION <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Minor version : "</span> <span class="token operator">&lt;&lt;</span> CV_MINOR_VERSION <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Subminor version : "</span> <span class="token operator">&lt;&lt;</span> CV_SUBMINOR_VERSION <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨å‘½ä»¤è¡Œåœ¨å…¶æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ç¼–è¯‘test.cppç¨‹åºï¼Œå¹¶ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶</span>g++ <span class="token parameter variable">-std</span><span class="token operator">=</span>c++11 test.cpp <span class="token variable"><span class="token variable">`</span>pkg-config <span class="token parameter variable">--libs</span> <span class="token parameter variable">--cflags</span> opencv4<span class="token variable">`</span></span> <span class="token parameter variable">-o</span> result<span class="token comment"># æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶</span>./result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºä»¥ä¸‹å†…å®¹ï¼Œå³è¡¨æ˜é…ç½®æˆåŠŸ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">OpenCV version <span class="token builtin class-name">:</span> <span class="token number">4.2</span>.0Major version <span class="token builtin class-name">:</span> <span class="token number">4</span>Minor version <span class="token builtin class-name">:</span> <span class="token number">2</span>Subminor version <span class="token builtin class-name">:</span> <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¤šä¸ªOpenCVç‰ˆæœ¬å…±å­˜"><a href="#å¤šä¸ªOpenCVç‰ˆæœ¬å…±å­˜" class="headerlink" title="å¤šä¸ªOpenCVç‰ˆæœ¬å…±å­˜"></a>å¤šä¸ªOpenCVç‰ˆæœ¬å…±å­˜</h2><p>åœ¨å¼€å‘ä¸åŒå·¥ç¨‹æ—¶å¯èƒ½ä¼šéœ€è¦ä¸åŒç‰ˆæœ¬çš„OpenCVï¼Œå› æ­¤åœ¨ç”µè„‘ä¸Šå®‰è£…å¤šä¸ªç‰ˆæœ¬çš„OpenCVå¾ˆæœ‰å¿…è¦ã€‚å¾ˆå¤šäººä¸æ•¢å°è¯•æ˜¯æ‹…å¿ƒå‡ºé—®é¢˜ï¼Œå…¶å®è¿™å¹¶ä¸éš¾ï¼ŒæˆåŠŸçš„å…³é”®æ˜¯<strong>å®‰è£…åˆ°ä¸åŒçš„è·¯å¾„ï¼Œå¹¶åœ¨CMakeList.txtä¸­æ‰¾åˆ°éœ€è¦çš„ç‰ˆæœ¬ã€‚</strong></p><p>å‡è®¾æˆ‘ä»¬å·²ç»å®‰è£…å¥½ä¸€ç‰ˆOpenCVï¼Œä¸€èˆ¬éƒ½å®‰è£…åœ¨<code>/usr/local</code>ä¸‹ã€‚å¦‚æœéœ€è¦å®‰è£…å¦ä¸€ä¸ªç‰ˆæœ¬çš„OpenCVï¼Œå°±ä¸èƒ½å†å®‰è£…åˆ°<code>/usr/local</code>ï¼Œè€Œæ˜¯é€‰æ‹©å…¶ä»–è·¯å¾„ï¼Œå¦åˆ™ä¼šè¦†ç›–æ‰ä¹‹å‰çš„ç‰ˆæœ¬ã€‚</p><h3 id="å®‰è£…OpenCVåˆ°ä¸åŒçš„è·¯å¾„"><a href="#å®‰è£…OpenCVåˆ°ä¸åŒçš„è·¯å¾„" class="headerlink" title="å®‰è£…OpenCVåˆ°ä¸åŒçš„è·¯å¾„"></a>å®‰è£…OpenCVåˆ°ä¸åŒçš„è·¯å¾„</h3><p>åœ¨ä¸Šé¢çš„å®‰è£…æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»çš„å…¶å®å°±æ˜¯å°†å„ä¸ªç‰ˆæœ¬çš„OpenCVå®‰è£…åˆ°ä¸åŒçš„è·¯å¾„ï¼Œä½ å¯ä»¥ç»§ç»­æ ¹æ®ä¸Šé¢çš„æ•™ç¨‹æ¥å®‰è£…å…¶ä»–çš„OpenCVç‰ˆæœ¬ã€‚</p><h3 id="æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡-1"><a href="#æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡-1" class="headerlink" title="æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡"></a>æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡</h3><p>ä¿®æ”¹<code>~/.bashrc</code>æˆ–è€…<code>~/.zshrc</code>ï¼ˆç”¨å“ªä¸ªç»ˆç«¯å°±æ”¹å“ªä¸ªï¼‰ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">gedit ~/.bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä½ åº”è¯¥åƒä¸‹é¢è¿™æ ·åŠ å…¥æ–°çš„å†…å®¹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#OpenCV_4.2.0</span><span class="token comment">#export PKG_CONFIG_PATH=/usr/local/opencv_4.2.0/lib/pkgconfig</span><span class="token comment">#export LD_LIBRARY_PATH=/usr/local/opencv_4.2.0/lib</span><span class="token comment">#OpenCV_3.4.6</span><span class="token comment">#export PKG_CONFIG_PATH=/usr/local/opencv_3.4.6/lib/pkgconfig</span><span class="token comment">#export LD_LIBRARY_PATH=/usr/local/opencv_3.4.6/lib</span><span class="token comment">#OpenCV_2.4.9</span><span class="token comment">#export PKG_CONFIG_PATH=/usr/local/opencv_2.4.9/lib/pkgconfig</span><span class="token comment">#export LD_LIBRARY_PATH=/usr/local/opencv_2.4.9/lib</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ–°åŠ å…¥OpenCVç‰ˆæœ¬æˆ–è€…æš‚æ—¶ä¸é€‚ç”¨çš„OpenCVç‰ˆæœ¬çš„å»ºè®®æ³¨é‡Šæ‰ã€‚</strong></p><h3 id="åˆ‡æ¢OpenCVçš„ç‰ˆæœ¬"><a href="#åˆ‡æ¢OpenCVçš„ç‰ˆæœ¬" class="headerlink" title="åˆ‡æ¢OpenCVçš„ç‰ˆæœ¬"></a>åˆ‡æ¢OpenCVçš„ç‰ˆæœ¬</h3><p>åœ¨ä¸Šé¢æˆ‘ä»¬æŠŠæ–°ç‰ˆæœ¬OpenCVæ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡æ—¶ï¼Œéƒ½åŠ ä¸Šäº†æ³¨é‡Šï¼Œå› æ­¤ä½ å¯ä»¥é€šè¿‡å»æ‰æ³¨é‡Šæ¥åˆ‡æ¢OpenCVçš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨OpenCV_2.4.9ï¼Œå°±å¯ä»¥æŠŠä¸Šé¢çš„å†…å®¹ä¿®æ”¹ä¸ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#OpenCV_4.2.0</span><span class="token comment">#export PKG_CONFIG_PATH=/usr/local/opencv_4.2.0/lib/pkgconfig</span><span class="token comment">#export LD_LIBRARY_PATH=/usr/local/opencv_4.2.0/lib</span><span class="token comment">#OpenCV_3.4.6</span><span class="token comment">#export PKG_CONFIG_PATH=/usr/local/opencv_3.4.6/lib/pkgconfig</span><span class="token comment">#export LD_LIBRARY_PATH=/usr/local/opencv_3.4.6/lib</span><span class="token comment">#OpenCV_2.4.9</span><span class="token builtin class-name">export</span> <span class="token assign-left variable">PKG_CONFIG_PATH</span><span class="token operator">=</span>/usr/local/opencv_2.4.9/lib/pkgconfig<span class="token builtin class-name">export</span> <span class="token assign-left variable">LD_LIBRARY_PATH</span><span class="token operator">=</span>/usr/local/opencv_2.4.9/lib<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æµ‹è¯•åˆ‡æ¢çš„æ•ˆæœ"><a href="#æµ‹è¯•åˆ‡æ¢çš„æ•ˆæœ" class="headerlink" title="æµ‹è¯•åˆ‡æ¢çš„æ•ˆæœ"></a>æµ‹è¯•åˆ‡æ¢çš„æ•ˆæœ</h3><p>æ¯æ¬¡åˆ‡æ¢åï¼Œéƒ½éœ€è¦æ›´æ–°<code>~/.bashrc</code>æˆ–è€…<code>~/.zshrc</code></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> ~/.bashrc <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æŸ¥è¯¢OpenCVç‰ˆæœ¬ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨ä¸Šé¢å®‰è£…OpenCVæ—¶çš„æµ‹è¯•ä»£ç ï¼‰</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pkg-config <span class="token parameter variable">--modversion</span> opencv<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¬”è€…ç”µè„‘ä¸Šçš„åˆ‡æ¢æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/images/OpenCV-Notes/0-2.png"></p>]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenCV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Kalibrè¿›è¡ŒCamera-IMUè”åˆæ ‡å®š</title>
      <link href="2021/07/04/kalibr-for-camera-imu-calibration/"/>
      <url>2021/07/04/kalibr-for-camera-imu-calibration/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨kalibrè¿›è¡ŒCamera-IMUè”åˆæ ‡å®š"><a href="#ä½¿ç”¨kalibrè¿›è¡ŒCamera-IMUè”åˆæ ‡å®š" class="headerlink" title="ä½¿ç”¨kalibrè¿›è¡ŒCamera-IMUè”åˆæ ‡å®š"></a>ä½¿ç”¨kalibrè¿›è¡ŒCamera-IMUè”åˆæ ‡å®š</h1><p>æœ¬æ–‡ä»¥<u>Intel RealSense D435i</u>ä¸ºä¾‹ï¼Œä»‹ç»ä½¿ç”¨kalibrè¿›è¡ŒCamera-IMUè”åˆæ ‡å®šçš„æ–¹æ³•ã€‚</p><p>æ•´ä¸ªè¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦èŠ±è´¹çš„æ—¶é—´æ¯”è¾ƒå¤šï¼Œè¿›è¡Œçš„å‡†å¤‡å·¥ä½œä¹Ÿæ¯”è¾ƒå¤šã€‚å…·ä½“åˆ†ä¸ºä¸‰æ­¥ï¼Œå³é¦–å…ˆä½¿ç”¨imu_utilsæ ‡å®šIMUï¼Œç„¶åå†é€šè¿‡kalibræ ‡å®šç›¸æœºï¼Œæœ€åç»“åˆå‰é¢ä¸¤æ­¥æ ‡å®šçš„ç»“æœç”¨kalibrè¿›è¡ŒCamera-IMUè”åˆæ ‡å®šã€‚</p><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><h3 id="è½¯ä»¶æ–¹é¢ï¼š"><a href="#è½¯ä»¶æ–¹é¢ï¼š" class="headerlink" title="è½¯ä»¶æ–¹é¢ï¼š"></a>è½¯ä»¶æ–¹é¢ï¼š</h3><ul><li>Linuxç³»ç»Ÿï¼Œä¾‹å¦‚Ubuntu 18.04</li><li>ROSç¯å¢ƒï¼Œä¾‹å¦‚ROS Melodic</li><li><a href="https://github.com/IntelRealSense/librealsense/blob/master/doc/distribution_linux.md">RealSense SDK</a> ä¸ <a href="https://github.com/IntelRealSense/realsense-ros">realsense-ros-wrapper</a></li><li><a href="https://github.com/ethz-asl/kalibr">kalibr</a></li><li><a href="https://github.com/gaowenliang/code_utils">code_utils</a> ä¸ <a href="https://github.com/gaowenliang/imu_utils">imu_utils</a></li><li>å…¶ä»–ç›¸å…³ä¾èµ–</li></ul><h3 id="ç¡¬ä»¶æ–¹é¢ï¼š"><a href="#ç¡¬ä»¶æ–¹é¢ï¼š" class="headerlink" title="ç¡¬ä»¶æ–¹é¢ï¼š"></a>ç¡¬ä»¶æ–¹é¢ï¼š</h3><ul><li>Intel Realsense D435iç›¸æœº</li><li>æ ‡å®šæ¿ä¸€ä¸ªï¼Œä¾‹å¦‚æ‰“å°å¥½çš„AprilTagæˆ–æ£‹ç›˜æ ¼</li></ul><p><strong>æ³¨ï¼š</strong></p><p>ä½¿ç”¨kalibrç”Ÿæˆæ ‡å®šæ¿çš„å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼Œè¿è¡Œåå¯ä»¥å¾—åˆ°ä¸€ä¸ªpdfæ–‡ä»¶ã€‚éœ€è¦ä½¿ç”¨åŸå§‹å°ºå¯¸æ‰“å°å‡ºæ¥ï¼Œå¹¶ä¸”è¿™é‡Œçš„å‚æ•°è¦è®°å¥½ï¼Œåé¢éœ€è¦ç”¨ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">kalibr_create_target_pdf <span class="token parameter variable">--type</span> apriltag <span class="token parameter variable">--nx</span> <span class="token punctuation">[</span>NUM_COLS<span class="token punctuation">]</span> <span class="token parameter variable">--ny</span> <span class="token punctuation">[</span>NUM_ROWS<span class="token punctuation">]</span> <span class="token parameter variable">--tsize</span> <span class="token punctuation">[</span>TAG_WIDTH_M<span class="token punctuation">]</span> <span class="token parameter variable">--tspace</span> <span class="token punctuation">[</span>TAG_SPACING_PERCENT<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨å¼€å§‹ä¸‹é¢çš„å·¥ä½œä¹‹å‰ï¼Œä½ éœ€è¦å…ˆåšå¥½è¿™ä¸ªéƒ¨åˆ†çš„å‡†å¤‡å·¥ä½œã€‚æ ‡å®šæ¿å¯ä»¥ç”¨çº¸å¼ æ‰“å°åå¹³è´´åˆ°å¢™å£ä¸Šï¼Œç›¸å…³è½¯ä»¶ã€ä¾èµ–å‚è€ƒå®˜ç½‘çš„æ•™ç¨‹å³å¯é¡ºåˆ©å®Œæˆï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p><h2 id="ä½¿ç”¨imu-utilsæ ‡å®šimu"><a href="#ä½¿ç”¨imu-utilsæ ‡å®šimu" class="headerlink" title="ä½¿ç”¨imu_utilsæ ‡å®šimu"></a>ä½¿ç”¨imu_utilsæ ‡å®šimu</h2><h3 id="1-è¿è¡ŒD435iç›¸æœº"><a href="#1-è¿è¡ŒD435iç›¸æœº" class="headerlink" title="1.è¿è¡ŒD435iç›¸æœº"></a>1.è¿è¡ŒD435iç›¸æœº</h3><p>ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼æŒ‡å®šå‚æ•°æ¥è¿è¡Œï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">roslaunch realsense2_camera rs_camera.launch <span class="token punctuation">\</span>    unite_imu_method:<span class="token operator">=</span><span class="token string">"linear_interpolation"</span> <span class="token punctuation">\</span>    enable_gyro:<span class="token operator">=</span>true <span class="token punctuation">\</span>     enable_accel:<span class="token operator">=</span>true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹<code>rs_camera.launch</code>è¿™ä¸ªæ–‡ä»¶é‡Œé¢çš„å†…å®¹ï¼ŒæŠŠä¸Šé¢å¯¹åº”çš„éƒ¨åˆ†ä¿®æ”¹å¥½å³å¯ã€‚ç„¶åç›´æ¥è¿è¡Œï¼š</p><pre class="line-numbers language-none"><code class="language-none">roslaunch realsense2_camera rs_camera.launch<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2-å½•åˆ¶IMUæ•°æ®åŒ…"><a href="#2-å½•åˆ¶IMUæ•°æ®åŒ…" class="headerlink" title="2.å½•åˆ¶IMUæ•°æ®åŒ…"></a>2.å½•åˆ¶IMUæ•°æ®åŒ…</h3><p>åœ¨ç›¸æœºè¿è¡Œèµ·æ¥åï¼Œimuæ•°æ®ä¼šåœ¨<code>/camera/imu</code>è¯é¢˜ä¸‹å‘å¸ƒï¼Œå½•åˆ¶è¿™ä¸ªè¯é¢˜çš„ä¿¡æ¯å³å¯ï¼Œå»ºè®®å½•åˆ¶æ¯”è¾ƒé•¿çš„æ—¶é—´ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosbag record <span class="token parameter variable">-O</span> imu_calibration /camera/imu <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="3-ä½¿ç”¨imu-utilsè¿›è¡Œæ ‡å®š"><a href="#3-ä½¿ç”¨imu-utilsè¿›è¡Œæ ‡å®š" class="headerlink" title="3.ä½¿ç”¨imu_utilsè¿›è¡Œæ ‡å®š"></a>3.ä½¿ç”¨imu_utilsè¿›è¡Œæ ‡å®š</h3><p>é¦–å…ˆéœ€è¦æ–°å»ºä¸€ä¸ª<code>imu_utils</code>çš„launchæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>launch</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>imu_utils<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>imu_an<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>imu_an<span class="token punctuation">"</span></span> <span class="token attr-name">output</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--IMUçš„è¯é¢˜--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>imu_topic<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>string<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>/camera/imu<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token comment">&lt;!--è¿™ä¸ªå’Œæœ€åä¿å­˜çš„æ–‡ä»¶åæœ‰å…³ï¼Œæœ€åçš„æ–‡ä»¶åä¸ºD435i_imu_param.yaml--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>imu_name<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>string<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>D435i<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token comment">&lt;!--æ ‡å®šç»“æœå­˜æ”¾çš„æ–‡ä»¶ç›®å½•--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data_save_path<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>string<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>$(find imu_utils)/data/<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token comment">&lt;!--ä¿®æ”¹æ ‡å®šæ—¶é—´ï¼Œå•ä½æ˜¯åˆ†é’Ÿï¼Œéœ€è¦æ ¹æ®æ•°æ®åŒ…çš„æ—¶é•¿æ¥è°ƒæ•´--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>max_time_min<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>int<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>10<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>max_cluster<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>int<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>100<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>node</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>launch</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬æŠŠæ–°å»ºçš„launchæ–‡ä»¶å‘½åä¸º<code>d435i_imu_calibration.launch </code>ï¼Œç„¶åé€šè¿‡å¦‚ä¸‹çš„å‘½ä»¤å°±å¯ä»¥è¿è¡Œäº†ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">roslaunch imu_utils d435i_imu_calibration.launch <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿è¡Œä¹‹åimu_utilsä¼šç­‰å¾…imuæ•°æ®çš„å‘å¸ƒï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦æ’­æ”¾ä¹‹å‰å½•åˆ¶çš„æ•°æ®åŒ…ã€‚æ‰¾åˆ°ä¹‹å‰å½•åˆ¶çš„æ•°æ®åŒ…ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosbag play <span class="token parameter variable">-r</span> <span class="token number">200</span> imu_calibration.bag<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>-r 200</code>æ˜¯ä»¥200å€çš„é€Ÿåº¦æ’­æ”¾è¿™ä¸ªæ•°æ®åŒ…ã€‚</p><p>è¿™ä¸€éƒ¨åˆ†çš„å·¥ä½œéƒ½å®Œæˆä¹‹åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°D435iç›¸æœºIMUçš„æ ‡å®šæ–‡ä»¶<code>D435i_imu_param.yaml</code>ã€‚</p><h2 id="ä½¿ç”¨kalibræ ‡å®šCamera"><a href="#ä½¿ç”¨kalibræ ‡å®šCamera" class="headerlink" title="ä½¿ç”¨kalibræ ‡å®šCamera"></a>ä½¿ç”¨kalibræ ‡å®šCamera</h2><h3 id="1-ç¡®è®¤æ ‡å®šæ¿çš„å‚æ•°"><a href="#1-ç¡®è®¤æ ‡å®šæ¿çš„å‚æ•°" class="headerlink" title="1.ç¡®è®¤æ ‡å®šæ¿çš„å‚æ•°"></a>1.ç¡®è®¤æ ‡å®šæ¿çš„å‚æ•°</h3><p>è¿™é‡Œæˆ‘ä½¿ç”¨kalibrç”Ÿæˆçš„æ ‡å®šæ¿ï¼Œç”Ÿæˆçš„å‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">kalibr_create_target_pdf <span class="token parameter variable">--type</span> apriltag <span class="token parameter variable">--nx</span> <span class="token number">6</span> <span class="token parameter variable">--ny</span> <span class="token number">6</span> <span class="token parameter variable">--tsize</span> <span class="token number">0.03</span> <span class="token parameter variable">--tspace</span> <span class="token number">0.3</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å°†ä¸Šé¢å‘½ä»¤ä¸­å¯¹åº”çš„å‚æ•°ä¿å­˜åˆ°<code>april_s.yaml</code>æ–‡ä»¶ä¸­ï¼Œä¹‹åæˆ‘ä»¬è¿˜éœ€è¦ç”¨åˆ°ã€‚æ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">target_type</span><span class="token punctuation">:</span> <span class="token string">'aprilgrid'</span> <span class="token comment">#gridtype</span><span class="token key atrule">tagCols</span><span class="token punctuation">:</span> <span class="token number">6</span>               <span class="token comment">#number of apriltags</span><span class="token key atrule">tagRows</span><span class="token punctuation">:</span> <span class="token number">6</span>               <span class="token comment">#number of apriltags</span><span class="token key atrule">tagSize</span><span class="token punctuation">:</span> <span class="token number">0.03</span>           <span class="token comment">#size of apriltag, edge to edge [m]</span><span class="token key atrule">tagSpacing</span><span class="token punctuation">:</span> <span class="token number">0.3</span>          <span class="token comment">#ratio of space between tags to tagSize</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-ä¿®æ”¹D435içš„launchæ–‡ä»¶"><a href="#2-ä¿®æ”¹D435içš„launchæ–‡ä»¶" class="headerlink" title="2.ä¿®æ”¹D435içš„launchæ–‡ä»¶"></a>2.ä¿®æ”¹D435içš„launchæ–‡ä»¶</h3><p>ç”±äºéœ€è¦æ ‡å®šçš„æ˜¯D435içš„ä¸¤ä¸ªçº¢å¤–æ‘„åƒå¤´ï¼Œå› æ­¤æˆ‘ä»¬è¦<strong>åœ¨launchæ–‡ä»¶ä¸­å¼€å¯D435içš„çº¢å¤–æ‘„åƒå¤´ï¼ŒåŒæ—¶å…³æ‰D435içš„æ¿€å…‰ï¼Œé˜²æ­¢äº§ç”Ÿå¹²æ‰°ã€‚</strong>å¯¹åº”çš„launchæ–‡ä»¶ä¿å­˜ä¸º<code>rs_d435i.launch</code>ï¼Œå…·ä½“å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼š</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>launch</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>emitter_enable<span class="token punctuation">"</span></span>     <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>serial_no<span class="token punctuation">"</span></span>           <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>usb_port_id<span class="token punctuation">"</span></span>         <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>device_type<span class="token punctuation">"</span></span>         <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>json_file_path<span class="token punctuation">"</span></span>      <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>camera<span class="token punctuation">"</span></span>              <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>camera<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tf_prefix<span class="token punctuation">"</span></span>           <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg camera)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>external_manager<span class="token punctuation">"</span></span>    <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>manager<span class="token punctuation">"</span></span>             <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>realsense2_camera_manager<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>output<span class="token punctuation">"</span></span>              <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>respawn<span class="token punctuation">"</span></span>              <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fisheye_width<span class="token punctuation">"</span></span>       <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fisheye_height<span class="token punctuation">"</span></span>      <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_fisheye<span class="token punctuation">"</span></span>      <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>depth_width<span class="token punctuation">"</span></span>         <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>640<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>depth_height<span class="token punctuation">"</span></span>        <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>480<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_depth<span class="token punctuation">"</span></span>        <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>confidence_width<span class="token punctuation">"</span></span>    <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>confidence_height<span class="token punctuation">"</span></span>   <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_confidence<span class="token punctuation">"</span></span>   <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>confidence_fps<span class="token punctuation">"</span></span>      <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>infra_width<span class="token punctuation">"</span></span>         <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>640<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>infra_height<span class="token punctuation">"</span></span>        <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>480<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_infra<span class="token punctuation">"</span></span>        <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_infra1<span class="token punctuation">"</span></span>       <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_infra2<span class="token punctuation">"</span></span>       <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>infra_rgb<span class="token punctuation">"</span></span>           <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>color_width<span class="token punctuation">"</span></span>         <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>640<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>color_height<span class="token punctuation">"</span></span>        <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>480<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_color<span class="token punctuation">"</span></span>        <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fisheye_fps<span class="token punctuation">"</span></span>         <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>depth_fps<span class="token punctuation">"</span></span>           <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>infra_fps<span class="token punctuation">"</span></span>           <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>color_fps<span class="token punctuation">"</span></span>           <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gyro_fps<span class="token punctuation">"</span></span>            <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>200<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>accel_fps<span class="token punctuation">"</span></span>           <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>250<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_gyro<span class="token punctuation">"</span></span>         <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_accel<span class="token punctuation">"</span></span>        <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_pointcloud<span class="token punctuation">"</span></span>         <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pointcloud_texture_stream<span class="token punctuation">"</span></span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>RS2_STREAM_COLOR<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pointcloud_texture_index<span class="token punctuation">"</span></span>  <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>allow_no_texture_points<span class="token punctuation">"</span></span>   <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ordered_pc<span class="token punctuation">"</span></span>                <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_sync<span class="token punctuation">"</span></span>               <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>align_depth<span class="token punctuation">"</span></span>               <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>publish_tf<span class="token punctuation">"</span></span>                <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tf_publish_rate<span class="token punctuation">"</span></span>           <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>filters<span class="token punctuation">"</span></span>                   <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clip_distance<span class="token punctuation">"</span></span>             <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>-2<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>linear_accel_cov<span class="token punctuation">"</span></span>          <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0.01<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>initial_reset<span class="token punctuation">"</span></span>             <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>unite_imu_method<span class="token punctuation">"</span></span>          <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>linear_interpolation<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>topic_odom_in<span class="token punctuation">"</span></span>             <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odom_in<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>calib_odom_file<span class="token punctuation">"</span></span>           <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>publish_odom_tf<span class="token punctuation">"</span></span>           <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stereo_module/exposure/1<span class="token punctuation">"</span></span>  <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>7500<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stereo_module/gain/1<span class="token punctuation">"</span></span>      <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>16<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stereo_module/exposure/2<span class="token punctuation">"</span></span>  <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stereo_module/gain/2<span class="token punctuation">"</span></span>      <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>16<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>group</span> <span class="token attr-name">ns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg camera)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- rosparam set stereo_module/emitter_enabled false --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rosparam</span><span class="token punctuation">&gt;</span></span>      stereo_module/emitter_enabled: 0    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rosparam</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rosparam</span> <span class="token attr-name">if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg emitter_enable)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>      stereo_module/emitter_enabled: 1    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rosparam</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">file</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(find realsense2_camera)/launch/includes/nodelet.launch.xml<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tf_prefix<span class="token punctuation">"</span></span>                <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg tf_prefix)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>external_manager<span class="token punctuation">"</span></span>         <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg external_manager)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>manager<span class="token punctuation">"</span></span>                  <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg manager)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>output<span class="token punctuation">"</span></span>                   <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg output)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>respawn<span class="token punctuation">"</span></span>                  <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg respawn)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>serial_no<span class="token punctuation">"</span></span>                <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg serial_no)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>usb_port_id<span class="token punctuation">"</span></span>              <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg usb_port_id)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>device_type<span class="token punctuation">"</span></span>              <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg device_type)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>json_file_path<span class="token punctuation">"</span></span>           <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg json_file_path)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_pointcloud<span class="token punctuation">"</span></span>        <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg enable_pointcloud)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pointcloud_texture_stream<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg pointcloud_texture_stream)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pointcloud_texture_index<span class="token punctuation">"</span></span>  <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg pointcloud_texture_index)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_sync<span class="token punctuation">"</span></span>              <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg enable_sync)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>align_depth<span class="token punctuation">"</span></span>              <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg align_depth)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fisheye_width<span class="token punctuation">"</span></span>            <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg fisheye_width)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fisheye_height<span class="token punctuation">"</span></span>           <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg fisheye_height)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_fisheye<span class="token punctuation">"</span></span>           <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg enable_fisheye)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>depth_width<span class="token punctuation">"</span></span>              <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg depth_width)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>depth_height<span class="token punctuation">"</span></span>             <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg depth_height)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_depth<span class="token punctuation">"</span></span>             <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg enable_depth)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>confidence_width<span class="token punctuation">"</span></span>         <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg confidence_width)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>confidence_height<span class="token punctuation">"</span></span>        <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg confidence_height)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_confidence<span class="token punctuation">"</span></span>        <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg enable_confidence)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>confidence_fps<span class="token punctuation">"</span></span>           <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg confidence_fps)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>color_width<span class="token punctuation">"</span></span>              <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg color_width)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>color_height<span class="token punctuation">"</span></span>             <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg color_height)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_color<span class="token punctuation">"</span></span>             <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg enable_color)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>infra_width<span class="token punctuation">"</span></span>              <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg infra_width)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>infra_height<span class="token punctuation">"</span></span>             <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg infra_height)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_infra<span class="token punctuation">"</span></span>             <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg enable_infra)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_infra1<span class="token punctuation">"</span></span>            <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg enable_infra1)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_infra2<span class="token punctuation">"</span></span>            <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg enable_infra2)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>infra_rgb<span class="token punctuation">"</span></span>                <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg infra_rgb)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fisheye_fps<span class="token punctuation">"</span></span>              <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg fisheye_fps)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>depth_fps<span class="token punctuation">"</span></span>                <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg depth_fps)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>infra_fps<span class="token punctuation">"</span></span>                <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg infra_fps)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>color_fps<span class="token punctuation">"</span></span>                <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg color_fps)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gyro_fps<span class="token punctuation">"</span></span>                 <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg gyro_fps)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>accel_fps<span class="token punctuation">"</span></span>                <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg accel_fps)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_gyro<span class="token punctuation">"</span></span>              <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg enable_gyro)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enable_accel<span class="token punctuation">"</span></span>             <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg enable_accel)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>publish_tf<span class="token punctuation">"</span></span>               <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg publish_tf)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tf_publish_rate<span class="token punctuation">"</span></span>          <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg tf_publish_rate)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>filters<span class="token punctuation">"</span></span>                  <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg filters)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clip_distance<span class="token punctuation">"</span></span>            <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg clip_distance)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>linear_accel_cov<span class="token punctuation">"</span></span>         <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg linear_accel_cov)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>initial_reset<span class="token punctuation">"</span></span>            <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg initial_reset)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>unite_imu_method<span class="token punctuation">"</span></span>         <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg unite_imu_method)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>topic_odom_in<span class="token punctuation">"</span></span>            <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg topic_odom_in)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>calib_odom_file<span class="token punctuation">"</span></span>          <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg calib_odom_file)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>publish_odom_tf<span class="token punctuation">"</span></span>          <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg publish_odom_tf)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stereo_module/exposure/1<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg stereo_module/exposure/1)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stereo_module/gain/1<span class="token punctuation">"</span></span>     <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg stereo_module/gain/1)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stereo_module/exposure/2<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg stereo_module/exposure/2)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stereo_module/gain/2<span class="token punctuation">"</span></span>     <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg stereo_module/gain/2)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>allow_no_texture_points<span class="token punctuation">"</span></span>  <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg allow_no_texture_points)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ordered_pc<span class="token punctuation">"</span></span>               <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$(arg ordered_pc)<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>group</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>launch</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-å½•åˆ¶Cameraæ•°æ®åŒ…"><a href="#3-å½•åˆ¶Cameraæ•°æ®åŒ…" class="headerlink" title="3.å½•åˆ¶Cameraæ•°æ®åŒ…"></a>3.å½•åˆ¶Cameraæ•°æ®åŒ…</h3><h4 id="a-å¯åŠ¨RealSenseçš„CameraèŠ‚ç‚¹"><a href="#a-å¯åŠ¨RealSenseçš„CameraèŠ‚ç‚¹" class="headerlink" title="a) å¯åŠ¨RealSenseçš„CameraèŠ‚ç‚¹"></a>a) å¯åŠ¨RealSenseçš„CameraèŠ‚ç‚¹</h4><p>ç»ˆç«¯è¿è¡Œ<code>roslaunch realsense2_camera rs_d435i.launch</code>ï¼Œå³è¿è¡Œæˆ‘ä»¬ä¸Šé¢ç¼–è¾‘çš„launchæ–‡ä»¶ï¼Œå¯åŠ¨RealSenseçš„CameraèŠ‚ç‚¹ã€‚</p><h4 id="b-å¯è§†åŒ–ç›¸æœºå½±åƒ"><a href="#b-å¯è§†åŒ–ç›¸æœºå½±åƒ" class="headerlink" title="b) å¯è§†åŒ–ç›¸æœºå½±åƒ"></a>b) å¯è§†åŒ–ç›¸æœºå½±åƒ</h4><p>æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬éœ€è¦å¯è§†åŒ–ç›¸æœºå½±åƒï¼Œå¯ä»¥åˆ©ç”¨<code>rqt_image_view</code>å·¥å…·æ¥æŸ¥çœ‹å½±åƒæµï¼Œç»ˆç«¯è¿è¡Œ<code>rosrun rqt_image_view rqt_image_view</code>æˆ–è€…<code>rqt_image_view</code>å³å¯ã€‚</p><p>æˆ‘ä»¬éœ€è¦æ ‡å®šçš„æ˜¯D435içš„ä¸¤ä¸ªçº¢å¤–æ‘„åƒå¤´ï¼Œä¸è¿‡ä¸¤ä¸ªæ‘„åƒå¤´è·ç¦»æ¯”è¾ƒè¿‘ï¼Œçœ‹åˆ°çš„ä¸œè¥¿å·®ä¸å¤šã€‚æ‰€ä»¥å¼€ä¸€ä¸ª<code>rqt_image_view</code>ï¼ŒæŸ¥çœ‹<code>/camera/infra1/image_rect_raw</code>æˆ–è€…<code>/camera/infra2/image_rect_raw</code>è¯é¢˜ä¸‹çš„å½±åƒå³å¯ã€‚</p><p>æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="/images/kalibr-for-camera-imu-calibration/1.png" alt="" style="zoom:67%;"><h4 id="c-å½±åƒTopicé‡æ–°å‘å¸ƒ"><a href="#c-å½±åƒTopicé‡æ–°å‘å¸ƒ" class="headerlink" title="c) å½±åƒTopicé‡æ–°å‘å¸ƒ"></a>c) å½±åƒTopicé‡æ–°å‘å¸ƒ</h4><p><strong>ç„¶åéœ€è¦åšçš„æ˜¯ï¼Œå°†ä¼ æ„Ÿå™¨çš„Topicå‘é€é€Ÿç‡â€œè½¬æ¢â€ä¸€ä¸‹ï¼Œå› ä¸ºåœ¨Kalibrçš„<a href="https://github.com/ethz-asl/kalibr/wiki/multiple-camera-calibration">å®˜æ–¹æ–‡æ¡£</a>ä¸­ï¼Œå¯¹äºç›¸æœºæ ‡å®šï¼Œæ¨èçš„é€Ÿç‡æ˜¯æ¯ç§’4å¸§å·¦å³(FPS=4)ï¼Œè€ŒD435ié»˜è®¤æ˜¯30å¸§æ¯ç§’ï¼Œæ‰€ä»¥éœ€è¦è½¬æ¢ä¸€ä¸‹ï¼Œä¸ç„¶æ ‡å®šæ—¶é—´ä¼šéå¸¸æ¼«é•¿ã€‚</strong></p><p>è½¬æ¢ä½¿ç”¨ROSè‡ªå¸¦çš„<code>topic_tools</code>å³å¯ã€‚æ–°æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯ï¼Œåˆ†åˆ«åœ¨å…¶ä¸­è¾“å…¥<code>rosrun topic_tools throttle messages /camera/infra1/image_rect_raw 4.0 /infra1_image_rect_raw</code>å’Œ<code>rosrun topic_tools throttle messages /camera/infra2/image_rect_raw 4.0 /infra2_image_rect_raw</code>å³å¯ã€‚</p><p>è¿™ä¼šå°†<code>/camera/infra1/image_rect_raw</code>å’Œ<code>/camera/infra2/image_rect_raw</code>çš„æ•°æ®é‡æ–°ä»¥4.0çš„é¢‘ç‡åœ¨<code>/infra1_image_rect_raw</code>å’Œ<code>/infra2_image_rect_raw</code>ä¸‹å‘å¸ƒã€‚</p><h4 id="d-å½•åˆ¶Cameraæ•°æ®åŒ…"><a href="#d-å½•åˆ¶Cameraæ•°æ®åŒ…" class="headerlink" title="d) å½•åˆ¶Cameraæ•°æ®åŒ…"></a>d) å½•åˆ¶Cameraæ•°æ®åŒ…</h4><p>ç¡®è®¤å‰å‡ æ­¥éƒ½åšå¥½åï¼Œæˆ‘ä»¬å°†æ ‡å®šæ¿å›ºå®šåœ¨æŸå¤„ï¼Œè®©ç›¸æœºå¯¹ç€æ ‡å®šæ¿è¿åŠ¨ã€‚</p><p><strong>è¿åŠ¨çš„æ–¹å¼ä¸ºï¼šå…ˆç»•ç›¸æœºçš„å„è‡ªä¸‰ä¸ªè½´ï¼Œæ¯ä¸ªè½´æ—‹è½¬ä¸‰æ¬¡ï¼Œç„¶åå†æ²¿ç€ç›¸æœºçš„ä¸‰ä¸ªè½´ï¼Œæ¯ä¸ªè½´å¹³ç§»ä¸‰æ¬¡ï¼ŒåŸºæœ¬å°±å¯ä»¥äº†ï¼Œè¿åŠ¨æœŸé—´è¦ä¿è¯ç›¸æœºåŸºæœ¬èƒ½ä¸€ç›´çœ‹åˆ°æ ‡å®šæ¿çš„å…¨éƒ¨ä¿¡æ¯ã€‚</strong></p><p>ä¸è¿‡å› ä¸ºè¿™æ˜¯æ ‡å®šCameraï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥å°†æ‰“å°å‡ºæ¥çš„æ ‡å®šæ¿æ‹¿å¥½ï¼Œç„¶ååœ¨ç›¸æœºå‰é¢æ¥å›è¿åŠ¨ï¼Œä½†å› ä¸ºç¬”è€…æ˜¯ç”¨çº¸å¼ æ‰“å°çš„æ ‡å®šæ¿ï¼Œæ‰€ä»¥æ²¡é‡‡ç”¨è¿™ç§æ–¹å¼ã€‚</p><p>é€šè¿‡å¦‚ä¸‹å‘½ä»¤å½•åˆ¶cameraæ•°æ®åŒ…ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosbag record <span class="token parameter variable">-O</span> camera_calibration /infra1_image_rect_raw /infra2_image_rect_raw<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="4-ä½¿ç”¨Kalibrè¿›è¡Œæ ‡å®š"><a href="#4-ä½¿ç”¨Kalibrè¿›è¡Œæ ‡å®š" class="headerlink" title="4.ä½¿ç”¨Kalibrè¿›è¡Œæ ‡å®š"></a>4.ä½¿ç”¨Kalibrè¿›è¡Œæ ‡å®š</h3><p>é€šè¿‡å¦‚ä¸‹çš„å‘½ä»¤è¿è¡Œkalibrè¿›è¡Œæ ‡å®šï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">kalibr_calibrate_cameras <span class="token parameter variable">--target</span> ./yaml/april_s.yaml <span class="token parameter variable">--bag</span> ./rosbag/camera_calibration.bag --bag-from-to <span class="token number">30</span> <span class="token number">90</span> <span class="token parameter variable">--models</span> pinhole-radtan pinhole-radtan  <span class="token parameter variable">--topics</span> /infra1_image_rect_raw /infra2_image_rect_raw<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>--target</code>ï¼šæ ‡å®šæ¿å‚æ•°ä¿¡æ¯å­˜æ”¾çš„è·¯å¾„ï¼Œå³æˆ‘ä»¬ä¸Šé¢çš„<code>april_s.yaml</code>çš„è·¯å¾„ã€‚</p><p><code>--bag</code>ï¼šå½•åˆ¶çš„Cameraæ•°æ®åŒ…çš„è·¯å¾„ã€‚</p><p><code>--bag-from-to</code>ï¼šèµ·å§‹å’Œç»ˆæ­¢æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ã€‚ä¸ºäº†é¿å…å¼€å§‹å½•åˆ¶å’Œç»“æŸå½•åˆ¶æ—¶çš„æŠ–åŠ¨ï¼Œè¿™é‡Œå–äº†ç¬¬30ç§’åˆ°ç¬¬90ç§’ä¹‹é—´çš„ä¿¡æ¯ã€‚</p><p><code>models</code>ï¼šç›¸æœºæ¨¡å‹ï¼Œä¸€èˆ¬ä¸ºé’ˆå­”æ¨¡å‹ï¼Œå³pinhole-radtanã€‚æ³¨æ„åé¢æœ‰å‡ ä¸ªè¯é¢˜å‰é¢å°±è¦å†™å‡ æ¬¡æ¨¡å‹ã€‚</p><p><code>--topics</code>ï¼šå½±åƒæµå‘å¸ƒçš„è¯é¢˜ã€‚</p><p>ç­‰å¾…ä¸€æ®µæ¯”è¾ƒé•¿çš„æ—¶é—´åä¼šå¾—åˆ°æ ‡å®šç»“æœã€‚</p><h2 id="ä½¿ç”¨kalibrè¿›è¡ŒCamera-IMUè”åˆæ ‡å®š-1"><a href="#ä½¿ç”¨kalibrè¿›è¡ŒCamera-IMUè”åˆæ ‡å®š-1" class="headerlink" title="ä½¿ç”¨kalibrè¿›è¡ŒCamera-IMUè”åˆæ ‡å®š"></a>ä½¿ç”¨kalibrè¿›è¡ŒCamera-IMUè”åˆæ ‡å®š</h2><p>æœ‰äº†å‰å‡ æ­¥çš„é“ºå«å’Œç§¯ç´¯ï¼Œè¿™é‡Œéœ€è¦è¿›è¡Œçš„å·¥ä½œå¹¶ä¸æ˜¯å¾ˆå¤šã€‚</p><h3 id="1-å½•åˆ¶Camera-IMUæ•°æ®åŒ…"><a href="#1-å½•åˆ¶Camera-IMUæ•°æ®åŒ…" class="headerlink" title="1.å½•åˆ¶Camera-IMUæ•°æ®åŒ…"></a>1.å½•åˆ¶Camera-IMUæ•°æ®åŒ…</h3><h4 id="a-å¯åŠ¨RealSenseçš„CameraèŠ‚ç‚¹-1"><a href="#a-å¯åŠ¨RealSenseçš„CameraèŠ‚ç‚¹-1" class="headerlink" title="a) å¯åŠ¨RealSenseçš„CameraèŠ‚ç‚¹"></a>a) å¯åŠ¨RealSenseçš„CameraèŠ‚ç‚¹</h4><p>ç»ˆç«¯è¿è¡Œ<code>roslaunch realsense2_camera rs_d435i.launch</code>ï¼Œå³è¿è¡Œæˆ‘ä»¬ä¹‹å‰ç¼–è¾‘çš„launchæ–‡ä»¶ï¼Œå¯åŠ¨RealSenseçš„CameraèŠ‚ç‚¹ã€‚</p><h4 id="b-å¯è§†åŒ–ç›¸æœºå½±åƒ-1"><a href="#b-å¯è§†åŒ–ç›¸æœºå½±åƒ-1" class="headerlink" title="b) å¯è§†åŒ–ç›¸æœºå½±åƒ"></a>b) å¯è§†åŒ–ç›¸æœºå½±åƒ</h4><p>å’Œæ ‡å®šCameraæ—¶ä¸€æ ·ï¼Œåˆ©ç”¨<code>rqt_image_view</code>å·¥å…·æ¥æŸ¥çœ‹å½±åƒæµï¼Œç»ˆç«¯è¿è¡Œ<code>rosrun rqt_image_view rqt_image_view</code>æˆ–è€…<code>rqt_image_view</code>å³å¯ã€‚</p><p>æˆ‘ä»¬éœ€è¦æ ‡å®šçš„æ˜¯D435içš„ä¸¤ä¸ªçº¢å¤–æ‘„åƒå¤´ï¼Œå¼€ä¸€ä¸ª<code>rqt_image_view</code>ï¼ŒæŸ¥çœ‹<code>/camera/infra1/image_rect_raw</code>æˆ–è€…<code>/camera/infra2/image_rect_raw</code>è¯é¢˜ä¸‹çš„å½±åƒå³å¯ã€‚</p><h4 id="c-å½±åƒTopicé‡æ–°å‘å¸ƒ-1"><a href="#c-å½±åƒTopicé‡æ–°å‘å¸ƒ-1" class="headerlink" title="c) å½±åƒTopicé‡æ–°å‘å¸ƒ"></a>c) å½±åƒTopicé‡æ–°å‘å¸ƒ</h4><p>è¿™é‡Œä¹Ÿä¸å‰é¢ç±»ä¼¼ï¼Œä½†æ˜¯<strong>å¯¹äºç›¸æœº-IMUæ ‡å®šï¼Œ<a href="https://github.com/ethz-asl/kalibr/wiki/Multi-IMU-and-IMU-intrinsic-calibration">å®˜æ–¹æ–‡æ¡£</a>ç»™å‡ºçš„å»ºè®®å¸§ç‡æ˜¯ï¼šCamera 20FPSï¼ŒIMU 200FPSã€‚</strong></p><p>è½¬æ¢ä¾ç„¶ä½¿ç”¨ROSè‡ªå¸¦çš„<code>topic_tools</code>å³å¯ï¼Œæ–°æ‰“å¼€ä¸‰ä¸ªç»ˆç«¯ï¼Œåˆ†åˆ«åœ¨å…¶ä¸­è¾“å…¥ï¼š</p><p><code>rosrun topic_tools throttle messages /camera/infra1/image_rect_raw 4.0 /infra1_image_rect_raw</code></p><p><code>rosrun topic_tools throttle messages /camera/infra2/image_rect_raw 4.0 /infra2_image_rect_raw</code></p><p><code>rosrun topic_tools throttle messages /camera/imu 200.0 /imu</code></p><h4 id="d-å½•åˆ¶Cameraæ•°æ®åŒ…-1"><a href="#d-å½•åˆ¶Cameraæ•°æ®åŒ…-1" class="headerlink" title="d) å½•åˆ¶Cameraæ•°æ®åŒ…"></a>d) å½•åˆ¶Cameraæ•°æ®åŒ…</h4><p>ç¡®è®¤å‰å‡ æ­¥éƒ½åšå¥½åï¼Œæˆ‘ä»¬å°†æ ‡å®šæ¿å›ºå®šåœ¨æŸå¤„ï¼Œè®©ç›¸æœºå¯¹ç€æ ‡å®šæ¿è¿åŠ¨ï¼Œè¿åŠ¨çš„æ–¹å¼æ˜¯å’Œä¹‹å‰ä¸€æ ·çš„<strong>â€œä¸‰è½¬ã€ä¸‰ç§»â€</strong>ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€å®šè¦è®©ç›¸æœºå¯¹ç€æ ‡å®šæ¿è¿åŠ¨ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦æ ‡å®šimuï¼Œå¦‚æœç›¸æœºä¸åŠ¨ï¼Œimuçš„åŠ é€Ÿåº¦å°±ä¸€ç›´ä¸º0ï¼Œæ— æ³•è¿›è¡Œæ ‡å®šã€‚</p><p>é€šè¿‡å¦‚ä¸‹å‘½ä»¤å½•åˆ¶cameraæ•°æ®åŒ…ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosbag record <span class="token parameter variable">-O</span> camera_imu_calibration /infra1_image_rect_raw /infra2_image_rect_raw /imu<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2ä¿®æ”¹IMUæ ‡å®šæ–‡ä»¶"><a href="#2ä¿®æ”¹IMUæ ‡å®šæ–‡ä»¶" class="headerlink" title="2ä¿®æ”¹IMUæ ‡å®šæ–‡ä»¶"></a>2ä¿®æ”¹IMUæ ‡å®šæ–‡ä»¶</h3><p>æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨<code>imu_utils</code>å·¥å…·æ ‡å®šäº†IMUï¼Œä½†æ˜¯å¾—åˆ°æ ‡å®šæ–‡ä»¶æ˜¯ä¸èƒ½ç›´æ¥ç”¨çš„ï¼Œè¿˜éœ€è¦ä¿®æ”¹æˆkalibræŒ‡å®šçš„æ ¼å¼ã€‚</p><p>åŸæ¥çš„æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">type</span><span class="token punctuation">:</span> IMU<span class="token key atrule">name</span><span class="token punctuation">:</span> D435i<span class="token key atrule">Gyr</span><span class="token punctuation">:</span>   <span class="token key atrule">unit</span><span class="token punctuation">:</span> <span class="token string">" rad/s"</span>   <span class="token key atrule">avg-axis</span><span class="token punctuation">:</span>      <span class="token key atrule">gyr_n</span><span class="token punctuation">:</span> <span class="token number">1.5309108696273642e-03</span>      <span class="token key atrule">gyr_w</span><span class="token punctuation">:</span> <span class="token number">2.0703289176602875e-05</span>   <span class="token key atrule">x-axis</span><span class="token punctuation">:</span>      <span class="token key atrule">gyr_n</span><span class="token punctuation">:</span> <span class="token number">1.4720250697508204e-03</span>      <span class="token key atrule">gyr_w</span><span class="token punctuation">:</span> <span class="token number">3.0849898119446267e-05</span>   <span class="token key atrule">y-axis</span><span class="token punctuation">:</span>      <span class="token key atrule">gyr_n</span><span class="token punctuation">:</span> <span class="token number">1.7709433080656571e-03</span>      <span class="token key atrule">gyr_w</span><span class="token punctuation">:</span> <span class="token number">2.0734874137051272e-05</span>   <span class="token key atrule">z-axis</span><span class="token punctuation">:</span>      <span class="token key atrule">gyr_n</span><span class="token punctuation">:</span> <span class="token number">1.3497642310656153e-03</span>      <span class="token key atrule">gyr_w</span><span class="token punctuation">:</span> <span class="token number">1.0525095273311089e-05</span><span class="token key atrule">Acc</span><span class="token punctuation">:</span>   <span class="token key atrule">unit</span><span class="token punctuation">:</span> <span class="token string">" m/s^2"</span>   <span class="token key atrule">avg-axis</span><span class="token punctuation">:</span>      <span class="token key atrule">acc_n</span><span class="token punctuation">:</span> <span class="token number">2.0588163388565360e-02</span>      <span class="token key atrule">acc_w</span><span class="token punctuation">:</span> <span class="token number">7.8368470789407288e-04</span>   <span class="token key atrule">x-axis</span><span class="token punctuation">:</span>      <span class="token key atrule">acc_n</span><span class="token punctuation">:</span> <span class="token number">1.7835189767520132e-02</span>      <span class="token key atrule">acc_w</span><span class="token punctuation">:</span> <span class="token number">6.6321457518985427e-04</span>   <span class="token key atrule">y-axis</span><span class="token punctuation">:</span>      <span class="token key atrule">acc_n</span><span class="token punctuation">:</span> <span class="token number">2.0230802690153690e-02</span>      <span class="token key atrule">acc_w</span><span class="token punctuation">:</span> <span class="token number">6.7027913345637114e-04</span>   <span class="token key atrule">z-axis</span><span class="token punctuation">:</span>      <span class="token key atrule">acc_n</span><span class="token punctuation">:</span> <span class="token number">2.3698497708022258e-02</span>      <span class="token key atrule">acc_w</span><span class="token punctuation">:</span> <span class="token number">1.0175604150359932e-03</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬éœ€è¦çš„æ˜¯<code>acc_n</code>ã€<code>acc_w</code>ã€<code>gyr_n</code>å’Œ<code>gyr_w</code>è¿™å››ä¸ªæ•°æ®ï¼Œå°†å…¶å¯¹åº”çš„å¡«åˆ°æ–‡ä»¶ä¸­å³å¯ï¼Œæ–‡ä»¶æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">#Accelerometers</span><span class="token key atrule">accelerometer_noise_density</span><span class="token punctuation">:</span> <span class="token number">2.0588163388565360e-02</span>   <span class="token comment">#Noise density (continuous-time)</span><span class="token key atrule">accelerometer_random_walk</span><span class="token punctuation">:</span>   <span class="token number">7.8368470789407288e-04</span>   <span class="token comment">#Bias random walk</span><span class="token comment">#Gyroscopes</span><span class="token key atrule">gyroscope_noise_density</span><span class="token punctuation">:</span>     <span class="token number">1.5309108696273642e-03</span>   <span class="token comment">#Noise density (continuous-time)</span><span class="token key atrule">gyroscope_random_walk</span><span class="token punctuation">:</span>       <span class="token number">2.0703289176602875e-05</span>   <span class="token comment">#Bias random walk</span><span class="token key atrule">rostopic</span><span class="token punctuation">:</span>                   /imu       <span class="token comment">#the IMU ROS topic</span><span class="token key atrule">update_rate</span><span class="token punctuation">:</span>                 <span class="token number">200.0</span>      <span class="token comment">#Hz (for discretization of the values above)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-è¿›è¡ŒCamera-IMUè”åˆæ ‡å®š"><a href="#3-è¿›è¡ŒCamera-IMUè”åˆæ ‡å®š" class="headerlink" title="3.è¿›è¡ŒCamera-IMUè”åˆæ ‡å®š"></a>3.è¿›è¡ŒCamera-IMUè”åˆæ ‡å®š</h3><p>é€šè¿‡å¦‚ä¸‹çš„å‘½ä»¤è¿è¡Œkalibrè¿›è¡Œæ ‡å®šï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">kalibr_calibrate_imu_camera <span class="token parameter variable">--target</span> ./yaml/april_s.yaml  <span class="token parameter variable">--cam</span> ./result/camera/camchain-.rosbagcamera_calibration.yaml <span class="token parameter variable">--imu</span> ./result/imu/D435i_imu_param.yaml <span class="token parameter variable">--bag</span> rosbag/camera_imu_calibration.bag  --bag-from-to <span class="token number">20</span> <span class="token number">130</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>--target</code>ï¼šæ ‡å®šæ¿å‚æ•°ä¿¡æ¯å­˜æ”¾çš„è·¯å¾„ï¼Œå³æˆ‘ä»¬ä¸Šé¢çš„<code>april_s.yaml</code>çš„è·¯å¾„ã€‚</p><p><code>--cam</code>ï¼šCameraçš„æ ‡å®šæ–‡ä»¶è·¯å¾„ã€‚</p><p><code>--imu</code>ï¼šIMUçš„æ ‡å®šæ–‡ä»¶è·¯å¾„ã€‚</p><p><code>--bag</code>ï¼šå½•åˆ¶çš„Camera-IMUæ•°æ®åŒ…çš„è·¯å¾„ã€‚</p><p><code>--bag-from-to</code>ï¼šèµ·å§‹å’Œç»ˆæ­¢æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ã€‚ä¸ºäº†é¿å…å¼€å§‹å½•åˆ¶å’Œç»“æŸå½•åˆ¶æ—¶çš„æŠ–åŠ¨ï¼Œè¿™é‡Œå–äº†ç¬¬30ç§’åˆ°ç¬¬90ç§’ä¹‹é—´çš„ä¿¡æ¯ã€‚</p><p>ç­‰å¾…ä¸€æ®µæ¯”è¾ƒé•¿çš„æ—¶é—´åä¼šå¾—åˆ°æ ‡å®šç»“æœã€‚</p><h2 id="æœ€ç»ˆç»“æœ"><a href="#æœ€ç»ˆç»“æœ" class="headerlink" title="æœ€ç»ˆç»“æœ"></a>æœ€ç»ˆç»“æœ</h2><p>è¿è¡Œç»“æŸåä¼šå¼¹å‡ºresult reportï¼Œå¹¶ä¸”kalibrä¼šè‡ªåŠ¨å¸®ä½ ä¿å­˜æ–‡ä»¶ã€‚</p><p><img src="/images/kalibr-for-camera-imu-calibration/2.png"></p><p>æˆ‘ä»¬æœ€åä¼šå¾—åˆ°ä¸‹å›¾æ‰€ç¤ºçš„å››ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­çš„yamlæ–‡ä»¶å°±æ˜¯æˆ‘ä»¬æœ€åæ ‡å®šå¾—åˆ°çš„ç»“æœã€‚</p><p><img src="/images/kalibr-for-camera-imu-calibration/3.png"></p><p>è¿™ä¸¤ä¸ªæ–‡ä»¶çœ‹èµ·æ¥æ˜¯ä¸‹é¢è¿™ç§æ ·å­çš„ï¼š</p><p><img src="/images/kalibr-for-camera-imu-calibration/4.png"></p>]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç›¸æœºæ ‡å®š </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SLAM for L515</title>
      <link href="2021/07/03/slam-notes-1/"/>
      <url>2021/07/03/slam-notes-1/</url>
      
        <content type="html"><![CDATA[<h1 id="SLAM-for-L515"><a href="#SLAM-for-L515" class="headerlink" title="SLAM for L515"></a>SLAM for L515</h1><p>æœ¬æ–‡ä»‹ç»ä¸¤ç§é€‚åˆIntel RealSense LiDAR Camera L515çš„SLAMæ–¹æ¡ˆï¼ŒæŠŠè¿™ä¸¤ç§æ–¹æ¡ˆè·‘èµ·æ¥éƒ½éå¸¸å®¹æ˜“ï¼Œåªè¦ç¯å¢ƒæ²¡é—®é¢˜ï¼ŒåŸºæœ¬ä¸Šå°±èƒ½è·‘ä¸€ä¸ªå¤§æ¦‚çš„æ•ˆæœå‡ºæ¥ï¼ˆæ•ˆæœå¥½è¿˜æ˜¯å¾—è´¹äº›åŠŸå¤«çš„ï¼‰ã€‚</p><h2 id="SSL-SLAM"><a href="#SSL-SLAM" class="headerlink" title="SSL_SLAM"></a>SSL_SLAM</h2><p>å›ºæ€æ¿€å…‰é›·è¾¾çš„è½»é‡çº§ 3-D å®šä½å’Œæ˜ å°„ï¼ˆSSL_SLAMï¼‰æ˜¯æ–°åŠ å¡å—æ´‹ç†å·¥å¤§å­¦ä¸€ä¸ªåšå£«æå‡ºçš„æ–¹æ¡ˆï¼Œè¿™å¥—æ–¹æ¡ˆåŸºæœ¬ä¸Šå°±æ˜¯æ ¹æ®L515è®¾è®¡å‡ºæ¥çš„ï¼Œæ‹¿è¿‡æ¥èƒ½ç›´æ¥ç”¨ã€‚</p><h3 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/catkin_ws/src<span class="token function">git</span> clone https://github.com/wh200720041/ssl_slam.git<span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>catkin_make<span class="token builtin class-name">source</span> ~/catkin_ws/devel/setup.bash<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#è¿è¡Œssl_slam</span>roslaunch ssl_slam ssl_slam_mapping.launch<span class="token comment">#è¿è¡ŒL515</span>roslaunch ssl_slam ssl_slam_L515.launch<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/images/slam-for-L515/0.png"></p><h2 id="RTAB-Map"><a href="#RTAB-Map" class="headerlink" title="RTAB-Map"></a>RTAB-Map</h2><p><strong>RTAB-Map</strong>ï¼ˆåŸºäºå®æ—¶å¤–è§‚çš„æ˜ å°„ï¼‰æ˜¯ä¸€ç§åŸºäº RGB-Dã€ç«‹ä½“å’Œæ¿€å…‰é›·è¾¾å›¾çš„ SLAM æ–¹æ³•ï¼Œå®ƒåŸºäºå¢é‡å¤–è§‚é—­ç¯æ£€æµ‹å™¨ã€‚é—­ç¯æ£€æµ‹å™¨ä½¿ç”¨è¯è¢‹æ–¹æ³•æ¥ç¡®å®šæ–°å›¾åƒæ¥è‡ªå…ˆå‰ä½ç½®æˆ–æ–°ä½ç½®çš„å¯èƒ½æ€§ã€‚å½“ä¸€ä¸ªé—­ç¯å‡è®¾è¢«æ¥å—æ—¶ï¼Œä¸€ä¸ªæ–°çš„çº¦æŸè¢«æ·»åŠ åˆ°åœ°å›¾çš„å›¾å½¢ä¸­ï¼Œç„¶åå›¾å½¢ä¼˜åŒ–å™¨æœ€å°åŒ–åœ°å›¾ä¸­çš„é”™è¯¯ã€‚å†…å­˜ç®¡ç†æ–¹æ³•ç”¨äºé™åˆ¶ç”¨äºé—­ç¯æ£€æµ‹å’Œå›¾å½¢ä¼˜åŒ–çš„ä½ç½®æ•°é‡ï¼Œä»¥ä¾¿å§‹ç»ˆéµå®ˆå¯¹å¤§è§„æ¨¡ç¯å¢ƒçš„å®æ—¶çº¦æŸã€‚RTAB-Map å¯ä»¥å•ç‹¬ä¸æ‰‹æŒ Kinectã€ç«‹ä½“ç›¸æœºæˆ– 3D æ¿€å…‰é›·è¾¾ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äº 6DoF æ˜ å°„ï¼Œæˆ–ç”¨äºé…å¤‡æ¿€å…‰æµ‹è·ä»ªçš„æœºå™¨äººè¿›è¡Œ 3DoF æ˜ å°„ã€‚</p><h3 id="run-L515"><a href="#run-L515" class="headerlink" title="run L515"></a>run L515</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ISSUE: Use unite_imu_method:="copy" if imu topics keep stopping</span>roslaunch realsense2_camera rs_camera.launch <span class="token punctuation">\</span>    align_depth:<span class="token operator">=</span>true <span class="token punctuation">\</span>    unite_imu_method:<span class="token operator">=</span><span class="token string">"linear_interpolation"</span> <span class="token punctuation">\</span>    enable_gyro:<span class="token operator">=</span>true <span class="token punctuation">\</span>     enable_accel:<span class="token operator">=</span>true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosrun imu_filter_madgwick imu_filter_node <span class="token punctuation">\</span>    _use_mag:<span class="token operator">=</span>false <span class="token punctuation">\</span>    _publish_tf:<span class="token operator">=</span>false <span class="token punctuation">\</span>    _world_frame:<span class="token operator">=</span><span class="token string">"enu"</span> <span class="token punctuation">\</span>    /imu/data_raw:<span class="token operator">=</span>/camera/imu <span class="token punctuation">\</span>    /imu/data:<span class="token operator">=</span>/rtabmap/imu<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Run-RTAB-Map"><a href="#Run-RTAB-Map" class="headerlink" title="Run RTAB-Map"></a>Run RTAB-Map</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosrun nodelet nodelet standalone rtabmap_ros/point_cloud_xyz <span class="token punctuation">\</span>    _approx_sync:<span class="token operator">=</span>false  <span class="token punctuation">\</span>    /depth/image:<span class="token operator">=</span>/camera/depth/image_rect_raw <span class="token punctuation">\</span>    /depth/camera_info:<span class="token operator">=</span>/camera/depth/camera_info <span class="token punctuation">\</span>    _decimation:<span class="token operator">=</span><span class="token number">4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">roslaunch rtabmap_ros rtabmap.launch<span class="token punctuation">\</span>    rtabmap_args:<span class="token operator">=</span><span class="token string">"\      --delete_db_on_start \      --Icp/VoxelSize 0.05 \      --Icp/PointToPlaneRadius 0 \      --Icp/PointToPlaneK 20 \      --Icp/CorrespondenceRatio 0.2 \      --Icp/PMOutlierRatio 0.65 \      --Icp/Epsilon 0.005 \      --Icp/PointToPlaneMinComplexity 0 \      --Odom/ScanKeyFrameThr 0.7 \      --OdomF2M/ScanMaxSize 15000 \      --Optimizer/GravitySigma 0.3 \      --RGBD/ProximityPathMaxNeighbors 1 \      --Reg/Strategy 1"</span> <span class="token punctuation">\</span>    icp_odometry:<span class="token operator">=</span>true <span class="token punctuation">\</span>    scan_cloud_topic:<span class="token operator">=</span>/cloud <span class="token punctuation">\</span>    subscribe_scan_cloud:<span class="token operator">=</span>true <span class="token punctuation">\</span>    depth_topic:<span class="token operator">=</span>/camera/aligned_depth_to_color/image_raw <span class="token punctuation">\</span>    rgb_topic:<span class="token operator">=</span>/camera/color/image_raw <span class="token punctuation">\</span>    camera_info_topic:<span class="token operator">=</span>/camera/color/camera_info <span class="token punctuation">\</span>    approx_sync:<span class="token operator">=</span>false <span class="token punctuation">\</span>    wait_imu_to_init:<span class="token operator">=</span>true <span class="token punctuation">\</span>    imu_topic:<span class="token operator">=</span>/rtabmap/imu<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#delete memory</span>rosservice call /rtabmap/reset<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿è¡Œæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/images/slam-for-L515/1.png"></p><p><img src="/images/slam-for-L515/2.png"></p>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2Dç¢°æ’æ£€æµ‹</title>
      <link href="2021/05/16/2d-collision-detection/"/>
      <url>2021/05/16/2d-collision-detection/</url>
      
        <content type="html"><![CDATA[<h1 id="2Dç¢°æ’æ£€æµ‹"><a href="#2Dç¢°æ’æ£€æµ‹" class="headerlink" title="2Dç¢°æ’æ£€æµ‹"></a>2Dç¢°æ’æ£€æµ‹</h1><p>2Dæ¸¸æˆä¸­ï¼Œé€šå¸¸ä½¿ç”¨çŸ©å½¢ã€åœ†å½¢ç­‰æ¥ä»£æ›¿å¤æ‚å›¾å½¢çš„ç›¸äº¤æ£€æµ‹ï¼Œå› ä¸ºè¿™ä¸¤ç§å½¢çŠ¶çš„ç¢°æ’æ£€æµ‹é€Ÿåº¦æ˜¯æœ€å¿«çš„ã€‚</p><p>å…¶ä¸­çŸ©å½¢åŒ…å›´ç›’åˆå¯ä»¥åˆ†ä¸ºè½´å¯¹é½åŒ…å›´ç›’ï¼ˆAABB, Axis Aligned Bounding Boxï¼‰ä¸è½¬å‘åŒ…å›´ç›’ï¼ˆOBB, Oriented Bounding Boxï¼‰ã€‚AABBä¸OBBçš„åŒºåˆ«åœ¨äºï¼ŒAABBä¸­çš„çŸ©å½¢çš„å…¶ä¸­ä¸€æ¡è¾¹å’Œåæ ‡è½´å¹³è¡Œï¼ŒOBBçš„è®¡ç®—å¤æ‚åº¦è¦é«˜äºAABBã€‚æ ¹æ®ä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼Œå¯ä»¥ç”¨ä¸åŒçš„æ–¹æ¡ˆã€‚</p><h3 id="åœ†å½¢ä¹‹é—´çš„ç¢°æ’æ£€æµ‹"><a href="#åœ†å½¢ä¹‹é—´çš„ç¢°æ’æ£€æµ‹" class="headerlink" title="åœ†å½¢ä¹‹é—´çš„ç¢°æ’æ£€æµ‹"></a>åœ†å½¢ä¹‹é—´çš„ç¢°æ’æ£€æµ‹</h3><p>åœ†å½¢ä¹‹é—´çš„ç¢°æ’æ£€æµ‹æ¯”è¾ƒç®€å•ï¼Œåªéœ€åˆ¤æ–­ä¸¤åœ†å¿ƒä¹‹é—´çš„è·ç¦»æ˜¯å¦å°äºä¸¤åœ†çš„åŠå¾„ä¹‹å’Œå³å¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><img src="/images/2D-Collision-Detection/1.jpg" style="zoom: 33%;"><h3 id="åœ†å½¢ä¸çŸ©å½¢çš„ç¢°æ’æ£€æµ‹"><a href="#åœ†å½¢ä¸çŸ©å½¢çš„ç¢°æ’æ£€æµ‹" class="headerlink" title="åœ†å½¢ä¸çŸ©å½¢çš„ç¢°æ’æ£€æµ‹"></a>åœ†å½¢ä¸çŸ©å½¢çš„ç¢°æ’æ£€æµ‹</h3><p>æ¶‰åŠåˆ°çŸ©å½¢çš„ç¢°æ’æ£€æµ‹é—®é¢˜éƒ½å…ˆè¦åˆ¤æ–­æ˜¯å¦è½´å¯¹ç§°ã€‚</p><h4 id="çŸ©å½¢è½´å¯¹ç§°"><a href="#çŸ©å½¢è½´å¯¹ç§°" class="headerlink" title="çŸ©å½¢è½´å¯¹ç§°"></a>çŸ©å½¢è½´å¯¹ç§°</h4><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè®¾$c$ä¸ºçŸ©å½¢ä¸­å¿ƒï¼Œ$h$ä¸ºçŸ©å½¢åŠé•¿ï¼Œ$p$ä¸ºåœ†å¿ƒï¼Œ$r$ä¸ºåŠå¾„ã€‚</p><p>æ£€æµ‹ç¢°æ’çš„æ–¹æ³•æ˜¯è®¡ç®—åœ†å¿ƒä¸çŸ©å½¢çš„æœ€çŸ­è·ç¦»$ u$ï¼Œè‹¥$ u $çš„é•¿åº¦å°äº$ r $åˆ™ä¸¤è€…ç›¸ç¢°æ’ã€‚</p><p><img src="/images/2D-Collision-Detection/2.jpg"></p><p>ä¸ºäº†è®¡ç®—$u$ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ©ç”¨$p â€“ c$ å°†åœ†å¿ƒå¹³ç§»åˆ°çŸ©å½¢åæ ‡ç³»çš„ç¬¬ä¸€è±¡é™ï¼Œè¿™ä¸å½±å“ç¢°æ’æ£€æµ‹çš„ç»“æœï¼š</p><img src="/images/2D-Collision-Detection/3.jpg" style="zoom: 67%;"><p>ç„¶åï¼Œè®¡ç®—å‘é‡ $v-h$ï¼Œå¦‚æœ$v-h$çš„åˆ†é‡ä¸ºè´Ÿæ•°åˆ™è®¾ç½®ä¸º0ï¼Œæœ€åå¾—åˆ°åœ†å¿ƒä¸çŸ©å½¢æœ€çŸ­è·ç¦»çš„çŸ¢é‡ $u$ã€‚</p><p>ä¸‹å›¾å±•ç¤ºäº†4ç§æƒ…å†µï¼Œçº¢è‰²çš„$u$æ˜¯ç»“æœã€‚</p><p><img src="/images/2D-Collision-Detection/4.jpg"></p><p>æœ€åæ¯”è¾ƒ $u$ å’Œ $r$ æ¨¡é•¿çš„å¤§å°ï¼Œå¦‚æœ$u$çš„æ¨¡é•¿å°åˆ™ä¸¤è€…ç›¸äº¤ã€‚</p><h4 id="çŸ©å½¢éè½´å¯¹ç§°"><a href="#çŸ©å½¢éè½´å¯¹ç§°" class="headerlink" title="çŸ©å½¢éè½´å¯¹ç§°"></a>çŸ©å½¢éè½´å¯¹ç§°</h4><p>å°†çŸ©å½¢çš„ä¸­å¿ƒè§†ä¸ºæ—‹è½¬ä¸­å¿ƒï¼Œå°†çŸ©å½¢å’Œåœ†å½¢ä¸€èµ·åå‘æ—‹è½¬å°†çŸ©å½¢è½¬ä¸ºè½´å¯¹ç§°ï¼Œç„¶åå°±å¯ä»¥å¥—ç”¨ä¸Šé¢çš„è§£æ³•ã€‚</p><img src="/images/2D-Collision-Detection/5.jpg" style="zoom:33%;"><h3 id="ä¸¤çŸ©å½¢éƒ½è½´å¯¹ç§°AABB"><a href="#ä¸¤çŸ©å½¢éƒ½è½´å¯¹ç§°AABB" class="headerlink" title="ä¸¤çŸ©å½¢éƒ½è½´å¯¹ç§°AABB"></a>ä¸¤çŸ©å½¢éƒ½è½´å¯¹ç§°AABB</h3><p>æƒ³è±¡ä¸€ä¸‹ä¸¤ä¸ªçŸ©å½¢Aå’ŒBï¼ŒBç´§è´´ç€Açš„è¾¹èµ°äº†ä¸€åœˆï¼ŒBçš„çŸ©å½¢ä¸­å¿ƒçš„è½¨è¿¹æ˜¯ä¸€ä¸ªæ–°çš„çŸ©å½¢ï¼Œè¿™æ ·å°±ç®€åŒ–æˆæ–°çŸ©å½¢ä¸Bä¸­å¿ƒç‚¹è¿™ä¸€ç‚¹çš„ç›¸äº¤é—®é¢˜ï¼Œåˆå› ä¸ºç‚¹å¯ä»¥çœ‹æˆæ˜¯åŠå¾„ä¸º0çš„åœ†ï¼Œæ‰€ä»¥é—®é¢˜åˆè½¬æ¢ä¸ºåœ†å½¢å’ŒçŸ©å½¢ç›¸äº¤ã€‚</p><img src="/images/2D-Collision-Detection/6.jpg" style="zoom:33%;"><h3 id="ä¸¤çŸ©å½¢ç›¸äº¤éè½´å¯¹ç§°OBB"><a href="#ä¸¤çŸ©å½¢ç›¸äº¤éè½´å¯¹ç§°OBB" class="headerlink" title="ä¸¤çŸ©å½¢ç›¸äº¤éè½´å¯¹ç§°OBB"></a>ä¸¤çŸ©å½¢ç›¸äº¤éè½´å¯¹ç§°OBB</h3><p>ä¸¤ä¸ªçŸ©å½¢çš„OBBæ£€æµ‹ä½¿ç”¨<strong>åˆ†ç¦»è½´å®šç†ï¼ˆSeparating Axis Theoremï¼‰</strong></p><p>åˆ†ç¦»è½´å®šç†ï¼šé€šè¿‡åˆ¤æ–­ä»»æ„ä¸¤ä¸ªçŸ©å½¢åœ¨ä»»æ„è§’åº¦ä¸‹çš„æŠ•å½±æ˜¯å¦å‡å­˜åœ¨é‡å ï¼Œæ¥åˆ¤æ–­æ˜¯å¦å‘ç”Ÿç¢°æ’ã€‚è‹¥åœ¨æŸä¸€è§’åº¦å…‰æºä¸‹ï¼Œä¸¤ç‰©ä½“çš„æŠ•å½±å­˜åœ¨é—´éš™ï¼Œåˆ™ä¸ºä¸ç¢°æ’ï¼Œå¦åˆ™ä¸ºå‘ç”Ÿç¢°æ’ã€‚</p><p>å› ä¸ºçŸ©å½¢çš„å¯¹è¾¹å¹³è¡Œï¼Œæ‰€ä»¥åªè¦åˆ¤æ–­å››æ¡å¯¹ç§°è½´ä¸Šä¸¤ä¸ªçŸ©é˜µçš„æŠ•å½±å³å¯ã€‚å¦‚æœå››æ¡å¯¹ç§°è½´ä¸Šçš„æŠ•å½±å‡æœ‰é‡åˆéƒ¨åˆ†ï¼Œåˆ™çŸ©é˜µå‘ç”Ÿç¢°æ’ï¼Œå¦åˆ™çŸ©é˜µä¹‹é—´ä¸å‘ç”Ÿç¢°æ’ã€‚</p><img src="/images/2D-Collision-Detection/7.jpg" style="zoom:33%;">]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¢°æ’æ£€æµ‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äº‹ä»¶ç›¸æœºä»‹ç»</title>
      <link href="2021/04/17/introduce-event-based-camera/"/>
      <url>2021/04/17/introduce-event-based-camera/</url>
      
        <content type="html"><![CDATA[<h1 id="Event-based-Camera"><a href="#Event-based-Camera" class="headerlink" title="Event-based Camera"></a>Event-based Camera</h1><blockquote><p>æœ¬æ–‡å°†ç½‘ä¸Šçš„ç›¸å…³èµ„æ–™æ•´ç†åˆ°äº†ä¸€èµ·ï¼Œæ–¹ä¾¿é˜…è¯»</p></blockquote><p><strong>å‰è¨€</strong></p><p>äº‹ä»¶ç›¸æœºè‹±æ–‡åä¸ºï¼šEvent-based Cameraï¼Œæˆ–ç®€ç§°ä¸ºEvent Cameraï¼Œç¼©å†™ä¸ºEBã€‚æœ‰æ—¶ä¹Ÿç§°ä½œDVSï¼ˆDynamic Vision Sensor â€œåŠ¨æ€è§†è§‰ä¼ æ„Ÿå™¨â€ï¼‰ã€DAVISï¼ˆDynamic and Active-Pixel Vision Sensorï¼‰ç­‰ã€‚ </p><p>ä¸åŒäºä¼ ç»Ÿç›¸æœºæ‹æ‘„ä¸€å¹…å®Œæ•´çš„å›¾åƒï¼Œäº‹ä»¶ç›¸æœºæ‹æ‘„çš„æ˜¯â€œäº‹ä»¶â€ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºâ€œåƒç´ äº®åº¦çš„å˜åŒ–â€ï¼Œå³äº‹ä»¶ç›¸æœºè¾“å‡ºçš„æ˜¯åƒç´ äº®åº¦çš„å˜åŒ–æƒ…å†µã€‚ç›¸æ¯”äºä»¥å›ºå®šçš„å¸§ç‡é‡‡é›†å›¾åƒï¼Œè¿™ç§ç›¸æœºé€šå¤šæµ‹é‡æ¯ä¸ªåƒç´ çš„äº®åº¦å˜åŒ–æ¥è¾“å‡ºå¼‚æ­¥ä¿¡å·ï¼ˆåŒ…æ‹¬äº‹ä»¶ï¼Œä½ç½®å’Œäº®åº¦å˜åŒ–çš„ç¬¦å·ï¼‰ã€‚</p><p>äº‹ä»¶ç›¸æœºä¸ä¼ ç»Ÿç›¸æœºç›¸æ¯”å…·æœ‰å¾ˆå¤šçš„ä¼˜ç‚¹: é«˜çš„åŠ¨æ€æµ‹é‡èŒƒå›´ï¼ˆ140dB vs. 60dBï¼‰ï¼Œ é«˜æ—¶é—´åˆ†è¾¨ç‡ï¼Œ ä½åŠŸè€—ï¼Œä¸å—è¿åŠ¨æ¨¡ç³Šçš„å½±å“ã€‚åœ¨é«˜é€Ÿã€é«˜åŠ¨æ€èŒƒå›´çš„åœºæ™¯ä¸‹æœ‰ç€å¹¿é˜”çš„åº”ç”¨ç©ºé—´ã€‚</p><h2 id="é›¶ã€ä¼ ç»Ÿç›¸æœºçš„ç¼ºç‚¹"><a href="#é›¶ã€ä¼ ç»Ÿç›¸æœºçš„ç¼ºç‚¹" class="headerlink" title="é›¶ã€ä¼ ç»Ÿç›¸æœºçš„ç¼ºç‚¹"></a>é›¶ã€ä¼ ç»Ÿç›¸æœºçš„ç¼ºç‚¹</h2><p>ä¼ ç»Ÿç›¸æœºï¼Œæ— è®ºæ˜¯CMOSä¼ æ„Ÿå™¨ï¼Œè¿˜æ˜¯CCDä¼ æ„Ÿå™¨ï¼Œäº¦æˆ–æ˜¯RGBDç›¸æœºï¼Œéƒ½æœ‰ä¸€ä¸ªå‚æ•°ï¼šå¸§ç‡ã€‚å®ƒä»¬æ˜¯ä»¥æ’å®šçš„é¢‘ç‡æ‹æ‘„è·å–å›¾åƒã€‚è¿™æ ·ï¼Œå³ä½¿å¸§ç‡èƒ½å¤Ÿè¾¾åˆ°1KHzï¼Œé‚£ä¹Ÿå…·æœ‰1msçš„å»¶æ—¶ã€‚æ‰€ä»¥ä¼ ç»Ÿç›¸æœºå­˜åœ¨ä¸€å®šçš„å»¶è¿Ÿé—®é¢˜ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œä¼ ç»Ÿç›¸æœºéœ€è¦é€šè¿‡ä¸€å®šæ—¶é—´çš„æ›å…‰ï¼Œä½¿æ„Ÿå…‰å™¨ä»¶ç§¯ç´¯ä¸€å®šçš„å…‰å­ï¼Œé‚£ä¹ˆåœ¨æ›å…‰æ—¶é—´ä¹‹å†…å¦‚æœç‰©ä½“åœ¨é«˜é€Ÿè¿åŠ¨ï¼Œåˆ™ä¼šäº§ç”Ÿæ¨¡ç³Šï¼Œè¿™ä¹Ÿæ˜¯ä¼ ç»Ÿç›¸æœºçš„ä¸€ä¸ªé—®é¢˜ã€‚</p><p>å¦å¤–ï¼Œä¼ ç»Ÿç›¸æœºçš„åŠ¨æ€èŒƒå›´è¾ƒä½ï¼Œå…·ä½“è¡¨ç°ä¸ºåœ¨å…‰çº¿æå·®æˆ–è€…äº®åº¦æé«˜æ—¶ï¼Œç›¸æœºè·å–çš„ä¿¡æ¯æœ‰é™ã€‚</p><p>ä»¥ä¸Šä¸‰ç‚¹ï¼Œæ˜¯ç”±äºç›¸æœºè‡ªèº«ç¡¬ä»¶çš„é™åˆ¶ï¼Œå³ä½¿é«˜æ€§èƒ½ç›¸æœºèƒ½å¤Ÿä¸€å®šç¨‹åº¦å‡å°è¿™äº›é—®é¢˜ï¼Œä½†ç”±äºç›¸æœºåŸç†ï¼Œè¿™äº›é—®é¢˜æ— æ³•é¿å…ã€‚è¿™äº›é—®é¢˜æå¤§åœ°é™åˆ¶äº†ä¸€äº›åº”ç”¨åœºæ™¯ã€‚è€Œäº‹ä»¶ç›¸æœºå®Œå…¨ä¸å­˜åœ¨è¿™äº›é—®é¢˜ã€‚ </p><h2 id="ä¸€ã€äº‹ä»¶ç›¸æœºçš„ä»‹ç»"><a href="#ä¸€ã€äº‹ä»¶ç›¸æœºçš„ä»‹ç»" class="headerlink" title="ä¸€ã€äº‹ä»¶ç›¸æœºçš„ä»‹ç»"></a>ä¸€ã€äº‹ä»¶ç›¸æœºçš„ä»‹ç»</h2><p>äº‹ä»¶ç›¸æœºå…·æœ‰ä¼˜åŠ¿çš„å…¸å‹åœºæ™¯åŒ…æ‹¬å®æ—¶äº¤äº’ç³»ç»Ÿï¼Œæ¯”å¦‚æœºå™¨äººä¸å¯ç©¿æˆ´è®¾å¤‡ï¼Œå› ä¸ºè¿™äº›åœºæ™¯ä¸‹çš„å…‰ç…§æ¡ä»¶ä¸å¯æ§ï¼Œå¹¶ä¸”å¯¹äºå»¶æ—¶ä»¥åŠåŠŸç‡æ•æ„Ÿã€‚äº‹ä»¶ç›¸æœºå¯ä»¥ç”¨äºç‰©ä½“è·Ÿè¸ªã€è¯†åˆ«ä»¥åŠæ‰‹åŠ¿æ§åˆ¶ï¼Œä¹Ÿå¯ä»¥åº”ç”¨åœ¨ä¸‰ç»´é‡å»ºã€å…‰æµä¼°è®¡ã€å›¾åƒHDRå’ŒSLAMä¸­ï¼Œéšç€äº‹ä»¶ç›¸æœºçš„å‘å±•ï¼Œå›¾åƒå»æ¨¡ç³Šä»¥åŠæ’æ˜Ÿè·Ÿè¸ªä¹Ÿæˆä¸ºæ–°çš„åº”ç”¨èŒƒå›´ã€‚</p><h2 id="äºŒã€äº‹ä»¶ç›¸æœºçš„åŸç†"><a href="#äºŒã€äº‹ä»¶ç›¸æœºçš„åŸç†" class="headerlink" title="äºŒã€äº‹ä»¶ç›¸æœºçš„åŸç†"></a>äºŒã€äº‹ä»¶ç›¸æœºçš„åŸç†</h2><p><strong>åŸºæœ¬åŸç†</strong></p><p>äº‹ä»¶ç›¸æœºçš„æœ€åŸºæœ¬çš„åŸç†ï¼Œå³ï¼šå½“æŸä¸ªåƒç´ çš„äº®åº¦å˜åŒ–ç´¯è®¡è¾¾åˆ°ä¸€å®šé˜ˆå€¼åï¼Œè¾“å‡ºä¸€ä¸ªäº‹ä»¶ã€‚è¿™é‡Œå¼ºè°ƒå‡ ä¸ªæ¦‚å¿µï¼š</p><p>aï¼‰ äº®åº¦å˜åŒ–ï¼šè¯´æ˜äº‹ä»¶ç›¸æœºçš„è¾“å‡ºå’Œå˜åŒ–æœ‰å…³ï¼Œè€Œä¸äº®åº¦çš„ç»å¯¹å€¼æ²¡æœ‰å…³ç³»ï¼›</p><p>bï¼‰ é˜ˆå€¼ï¼šå½“äº®åº¦å˜åŒ–è¾¾åˆ°ä¸€å®šç¨‹åº¦æ—¶ï¼Œå°†è¾“å‡ºæ•°æ®ï¼Œè¿™ä¸ªé˜ˆå€¼æ˜¯ç›¸æœºçš„å›ºæœ‰å‚æ•°ã€‚</p><p>ä¸‹é¢é‡ç‚¹è§£é‡Šä»€ä¹ˆæ˜¯ä¸€ä¸ªâ€œäº‹ä»¶â€ã€‚äº‹ä»¶å…·æœ‰ä¸‰è¦ç´ ï¼šæ—¶é—´æˆ³ã€åƒç´ åæ ‡ä¸ææ€§ã€‚ä¸€ä¸ªäº‹ä»¶è¡¨è¾¾çš„æ˜¯â€œåœ¨ä»€ä¹ˆæ—¶é—´ï¼Œå“ªä¸ªåƒç´ ç‚¹ï¼Œå‘ç”Ÿäº†äº®åº¦çš„å¢åŠ æˆ–å‡å°â€ã€‚</p><p>å½“åœºæ™¯ä¸­ç”±ç‰©ä½“è¿åŠ¨æˆ–å…‰ç…§æ”¹å˜é€ æˆå¤§é‡åƒç´ å˜åŒ–æ—¶ï¼Œä¼šäº§ç”Ÿä¸€ç³»åˆ—çš„äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶ä»¥äº‹ä»¶æµï¼ˆEvents streamï¼‰æ–¹å¼è¾“å‡ºã€‚äº‹ä»¶æµçš„æ•°æ®é‡è¿œå°äºä¼ ç»Ÿç›¸æœºä¼ è¾“çš„æ•°æ®ï¼Œä¸”äº‹ä»¶æµæ²¡æœ‰æœ€å°æ—¶é—´å•ä½ï¼Œæ‰€ä»¥ä¸åƒä¼ ç»Ÿç›¸æœºå®šæ—¶è¾“å‡ºæ•°æ®ï¼Œå…·æœ‰ä½å»¶è¿Ÿç‰¹æ€§ã€‚ä¸‹é¢çš„åŠ¨å›¾æ­ç¤ºäº†äº‹ä»¶ç›¸æœºä¸ä¼ ç»Ÿç›¸æœºçš„æˆåƒçš„ä¸åŒã€‚</p><p><img src="/images/Event-Camera/001.gif"></p><p><em>ï¼ˆåŠ¨å›¾ï¼šå·¦ä¾§ä¸ºæœ‰ä¸€ä¸ªé»‘è‰²æ–‘å—çš„åœ†ç›˜ï¼ŒåŒ€é€Ÿæ—‹è½¬æ—¶ï¼Œå³ä¸Šæ–¹çš„ä¼ ç»Ÿç›¸æœºä¼šå®šæ—¶æ‹æ‘„å®Œæ•´çš„å›¾åƒï¼Œä¸‹æ–¹äº‹ä»¶ç›¸æœºçš„è¾“å‡ºä¼šä»…è¾“å‡ºå˜åŒ–ï¼Œå³é»‘æ–‘çš„è¿åŠ¨ã€‚å½“åœ†ç›˜ä¸è½¬æ—¶ï¼Œä¼ ç»Ÿç›¸æœºä¾æ—§å‚»å‚»çš„æ‹æ‘„å›¾åƒï¼Œè€Œäº‹ä»¶ç›¸æœºä¸ä¼šäº§ç”Ÿä»»ä½•è¾“å‡ºï¼‰</em></p><p>ç”±äºäº‹ä»¶ç›¸æœºçš„æˆåƒåŸç†ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°åªè¦äº®åº¦ä¸€æœ‰å˜åŒ–å°±ä¼šè¾“å‡ºï¼Œä¸”ä»…è¾“å‡ºå˜åŒ–çš„æ•°æ®å ç”¨äº†å¾ˆå°çš„å¸¦å®½ï¼ŒåŒæ—¶ç”±äºäº‹ä»¶ç›¸æœºæ›´æ“…é•¿æ•æ‰äº®åº¦å˜åŒ–ï¼Œæ‰€ä»¥åœ¨è¾ƒæš—å’Œå¼ºå…‰åœºæ™¯ä¸‹ä¹Ÿèƒ½è¾“å‡ºæœ‰æ•ˆæ•°æ®ã€‚äº‹ä»¶ç›¸æœºå…·æœ‰ä½å»¶è¿Ÿï¼ˆ&lt;ğŸğğ’”ï¼‰ã€é«˜åŠ¨æ€èŒƒå›´ï¼ˆğŸğŸ’ğŸğ’…ğ‘©ï¼‰ã€æä½åŠŸè€—ï¼ˆğŸğ’ğ‘¾ï¼‰ç­‰ç‰¹æ€§ã€‚</p><p><strong>æ·±å…¥äº†è§£</strong></p><p>äº‹ä»¶ç›¸æœºæ˜¯å¯¹æ¯ä¸€ä¸ªåƒç´ ä¸‹é¢æœ‰ä¸€ä¸ªè®¡ç®—ç”µè·¯ï¼Œå·¦è¾¹çš„å…‰ç”µè½¬æ¢ç”µè·¯å°†å…‰å¼ºè½¬æ¢ä¸ºç”µå‹å€¼ï¼Œä¸­é—´æ˜¯ä¸€ä¸ªå·®åˆ†ç”µè·¯ï¼Œç»“æœè¾¾åˆ°è§¦å‘é˜ˆå€¼ä¹‹åä¼šè§¦å‘ä¿¡å·ã€‚ä¿¡å·ä»ç‰‡ä¸Šåˆ°USBæ˜¯é‡‡ç”¨ä¸€ç§AERï¼ˆAddress Event Representationï¼‰ç¼–ç çš„æ–¹å¼ï¼Œå›½å†…æœ‰äººå°†è¿™ç§ç¼–ç ç”¨äºäºŒå€¼å›¾åƒçš„å‹ç¼©ï¼Œå…·ä½“çš„ç»“æœå°±æ˜¯USBä¼ è¾“è¿‡æ¥çš„æ•°æ®ä¸æ˜¯å‰æ–‡æ‰€è¯´çš„$(x, y, polarity, timestamp)$çš„å½¢å¼ï¼Œè€Œæ˜¯éœ€è¦è§£ç ä¹‹åæ‰èƒ½å¾—åˆ°ï¼Œå¸¸è§çš„è§£ç ç¨‹åºæœ‰:</p><blockquote><p><a href="https://github.com/inivation/libcaer">https://github.com/inivation/libcaer</a></p><p><a href="https://github.com/SensorsINI/jaer">https://github.com/SensorsINI/jaer</a></p></blockquote><p>è¿™äº›å¼€æºä»£ç å¾€å¾€å·²ç»åŒ…å«åœ¨äº†äº‹ä»¶ç›¸æœºå‚å•†æä¾›çš„SDKä¸­äº†ã€‚</p><p><img src="/images/Event-Camera/002.jpg" alt="ç®€åŒ–äº‹ä»¶ç›¸æœºçš„ç¡¬ä»¶ç”µè·¯"></p><p>è™½ç„¶äº‹ä»¶ç›¸æœºå¾ˆå¥½ç”¨ï¼Œä½†æœ‰çš„æ—¶å€™è¿˜æ˜¯æœ‰äººæƒ³è¦ä½¿ç”¨ç»å¯¹çš„ç°åº¦å€¼ã€‚ATISå°±å®ç°äº†è¿™æ ·çš„ä¸€ç§ç›¸æœºï¼Œå®ƒé€šè¿‡è§¦å‘äº‹ä»¶åå°†ç”µå®¹å™¨è®¾ç½®ä¸ºé«˜ç”µå‹ï¼Œç„¶ååœ¨ç”¨å¦ä¸€ä¸ªäºŒæç®¡ä»ç”µå®¹å™¨ä¸­æ”¾ç”µï¼Œå…‰å¼ºè¶Šå¤§æ”¾ç”µè¶Šå¿«ï¼ŒATISå¯¹æ”¾ç”µäº‹ä»¶è¿›è¡Œç¼–ç å¾—åˆ°å¼ºåº¦å€¼ã€‚ä½†è¿™æ ·å°±å¯¼è‡´åœ¨è¾ƒæš—çš„ç¯å¢ƒä¸‹æ”¾ç”µé€Ÿåº¦ä¸å¤Ÿå¿«ä¼šå¯¼è‡´æ–°çš„äº‹ä»¶æ‰“æ–­æ”¾ç”µè¿‡ç¨‹ï¼ˆç®—æ³•è§<a href="https://github.com/SensorsINI/jaer/blob/master/src/eu/seebetter/ini/chips/davis/DavisAutoShooter.java">jaer</a>ï¼‰ã€‚DAVISæ˜¯å¦ä¸€ç§ä½¿ç”¨å¹¿æ³›çš„å°†DVSï¼ˆDynamic Vision Sensorï¼‰å’ŒAPSï¼ˆActive Pixel Sensorï¼‰ç»“åˆåœ¨ä¸€èµ·çš„ä¼ æ„Ÿå™¨ï¼Œå®ƒå°†äºŒè€…çš„å…‰ç”µäºŒæç®¡è¿›è¡Œå…±äº«ï¼Œä¸åŒåœ¨åŠ è£…äº†ä¸€ä¸ªè¯»å‡ºç”µè·¯ï¼Œå› æ­¤å¯ä»¥åœ¨è¾“å‡ºäº‹ä»¶çš„åŒæ—¶è¾“å‡ºå¼ºåº¦å¸§ï¼ˆæ¥è‡ªAPSï¼‰ã€‚</p><p>äº‹ä»¶ç›¸æœºçš„ç†æƒ³æ¨¡å‹å¾ˆç®€å•ï¼š<br>$$<br>\Delta L(x_k,t_k)=p_kC<br>$$<br>ç­‰å¼å·¦è¾¹æ˜¯å¯¹æ•°ç°åº¦çš„å˜åŒ–ï¼Œå³è¾¹æ˜¯è¾“å‡ºçš„ææ€§ä»¥åŠé˜ˆå€¼ï¼Œä¸€èˆ¬è€Œè¨€$C$ä¼šè®¾ç½®åœ¨ $15%-50%$ã€‚ä½†æ˜¯å®é™…ä¸­äº‹ä»¶ç›¸æœºä¼šå—åˆ°å™ªå£°ä»¥åŠåƒç´ é”™é…çš„å½±å“ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¼šåœ¨è¯¥æ¨¡å‹åŠ ä¸Šé«˜æ–¯éšæœºå™ªå£°ï¼Œè¿™ä¸€ç‚¹åœ¨äº‹ä»¶ç›¸æœºçš„ä»¿çœŸå™¨ä¸­æœ‰ä½“ç°ï¼š</p><blockquote><p><a href="http://rpg.ifi.uzh.ch/esim.html">http://rpg.ifi.uzh.ch/esim.html</a></p></blockquote><p>è·Ÿæ™®é€šç›¸æœºä¸€æ ·ï¼Œäº‹ä»¶ç›¸æœºä¹Ÿæœ‰éœ€è¦ä¸€ä¸ª<a href="https://en.wikipedia.org/wiki/Fixed-pattern_noise">FPN</a>ï¼ˆFixed Pixel Noiseï¼‰ï¼Œå³ç›¸æœºç°åº¦çš„åˆå§‹biasï¼Œå¯¹äºäº‹ä»¶ç›¸æœºè€Œè¨€ï¼Œbiasçš„å®šä¹‰å°±æ˜¯æŒ‡é˜ˆå€¼ $C$ ï¼Œä¸€èˆ¬è€Œè¨€ä¸åŒåƒç´ ä¹‹é—´çš„ $C$ å¯èƒ½ç›¸å·® $2.5%-4%$ï¼Œç°åœ¨ä¸å­˜åœ¨äº‹ä»¶ç›¸æœºçš„FPNæ ‡å®šè®¡ç®—æ–¹æ¡ˆï¼Œè¿™æ˜¯ä¸€ä¸ªèƒ½åšçš„ç ”ç©¶æ–¹å‘ã€‚</p><p>BSIï¼ˆback-side illuminationï¼‰æŠ€æœ¯æ˜¯å¹¿æ³›åº”ç”¨äºæ™ºèƒ½æ‰‹æœºç›¸æœºä¸Šçš„å¢å¤§å¡«å……ç³»æ•°çš„æŠ€æœ¯ï¼Œç›®å‰äº‹ä»¶ç›¸æœºä¸Šçš„å…‰ç”µèŠ¯ç‰‡çš„FSIæ–¹æ³•ä¼šé˜»ç¢å…‰çº¿åˆ°è¾¾åƒç´ ï¼Œæ„å‘³ç€å¿…é¡»å¢å¤§åƒç´ é¢ç§¯æ‰èƒ½è·å–è¶³å¤Ÿçš„å…‰å¼ºï¼Œä½¿ç”¨BSIæŠ€æœ¯å¯ä»¥ä½¿å¾—ç›¸æœºæ¨¡å—æ›´è–„ã€æ›´å°ï¼Œä½†ç”±äºè¿™é¡¹æŠ€æœ¯çš„éš¾åº¦ä¸èŠ±è´¹ï¼Œç°åœ¨åªæœ‰å°‘æ•°çš„éªŒè¯ç”¨çš„äº‹ä»¶ç›¸æœºã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›ç°æœ‰çš„å•†ä¸šåŒ–çš„äº‹ä»¶ç›¸æœºæ¯”è¾ƒï¼Œæœ€åä¸€åˆ—æ˜¯æ¥è‡ªä¸­å›½ä¸Šæµ·çš„èŠ¯ä»‘ç§‘æŠ€çš„äº‹ä»¶ç›¸æœºï¼Œæœ€æ–°çš„Celex-Vç›¸æœºæ˜¯ä¸–ç•Œä¸Šç¬¬ä¸€å°ç™¾ä¸‡çº§åƒç´ çš„äº‹ä»¶ç›¸æœºã€‚ï¼ˆä½†æ˜¯CeleX-IVçš„å¡«å……ç³»æ•°åªæœ‰9perâ€¦ï¼‰</p><p><img src="/images/Event-Camera/003.jpg" alt="ç°æœ‰çš„å•†ä¸šåŒ–çš„äº‹ä»¶ç›¸æœºæ¯”è¾ƒ"></p><h2 id="ä¸‰ã€äº‹ä»¶ç›¸æœºçš„å¤„ç†èŒƒå¼"><a href="#ä¸‰ã€äº‹ä»¶ç›¸æœºçš„å¤„ç†èŒƒå¼" class="headerlink" title="ä¸‰ã€äº‹ä»¶ç›¸æœºçš„å¤„ç†èŒƒå¼"></a>ä¸‰ã€äº‹ä»¶ç›¸æœºçš„å¤„ç†èŒƒå¼</h2><p>äº‹ä»¶ç›¸æœºçš„è¾“å‡ºæ˜¯äº‹ä»¶æµï¼Œä¸»è¦æœ‰ä¸‰ç§å¸¸è§çš„å¤„ç†èŒƒå¼ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><h3 id="A-Event-by-Event"><a href="#A-Event-by-Event" class="headerlink" title="A. Event-by-Event"></a>A. Event-by-Event</h3><p>Event-by-Eventçš„æ–¹æ³•å¸¸å¸¸ç”¨äºè®¸å¤šä»»åŠ¡ä¸­ï¼Œå¦‚SLAMé‡Œé¢çš„ç‰¹å¾è¿½è¸ªã€ä½å§¿è¿½è¸ªå’Œå›¾åƒé‡å»ºã€‚ä¸€ç±»çš„æ–¹æ³•æ˜¯ä¾èµ–äºæ¨¡å‹çš„ï¼ˆæ¨¡å‹å¯ä»¥ä»å…¶å®ƒç±»å‹çš„ä¼ æ„Ÿå™¨æ•°æ®ä¸­è·å¾—ï¼Œå¦‚è·å¾—ä¸€ä¸ªåŠç¨ å¯†çš„æ·±åº¦å›¾ï¼‰ï¼Œç„¶åå†é€šè¿‡å¤„ç†ä¸€ä¸ªä¸€ä¸ªçš„äº‹ä»¶æ¥æ›´æ–°ç³»ç»Ÿçš„çŠ¶æ€ã€‚å¦ä¸€ç±»æ–¹æ³•æ˜¯ä¸ä¾èµ–äºæ¨¡å‹çš„ï¼ˆæ•°æ®é©±åŠ¨å³æœºå™¨å­¦ä¹ ï¼‰ã€‚</p><h3 id="B-Groups-of-Events"><a href="#B-Groups-of-Events" class="headerlink" title="B. Groups of Events"></a>B. Groups of Events</h3><p>ç”±äºæ¯ä¸ªäº‹ä»¶çš„æºå¸¦çš„ä¿¡æ¯å¾ˆå°‘ï¼Œå¹¶ä¸”å®¹æ˜“å—åˆ°å™ªå£°çš„å½±å“ï¼Œå› æ­¤å°†å‡ ä¸ªäº‹ä»¶ä¸€èµ·å¤„ç†ï¼Œèƒ½å¤Ÿä¸ºéœ€è¦è§£å†³çš„é—®é¢˜äº§ç”Ÿè¶³å¤Ÿçš„ä¿¡å™ªæ¯”ã€‚åŸºäºæ¨¡å‹çš„æ–¹æ³•å¾€å¾€æ˜¯å°†äº‹ä»¶è½¬åŒ–ä¸ºframeï¼Œç„¶åè¿ç”¨ä¼ ç»Ÿçš„è§†è§‰æ–¹æ³•æ¥è§£å†³é—®é¢˜ã€‚è€Œå¦å¤–ä¸€ç§å°±æ˜¯åŸºäºæ•°æ®é©±åŠ¨çš„äº‹ä»¶ç»„æ–¹æ³•ï¼Œå…¶å·²ç»ç”¨åœ¨äº†åˆ†ç±»ã€å…‰æµä¼°è®¡ã€æ·±åº¦ä¼°è®¡ç­‰ä»»åŠ¡ä¸­ã€‚ç»å…¸çš„CNNç½‘ç»œä½¿ç”¨å¼ é‡ä½œä¸ºè¾“å…¥ï¼Œå› æ­¤äº‹ä»¶ç»„å¿…é¡»è½¬ä¸ºç±»ä¼¼çš„å½¢å¼ã€‚ç°æœ‰çš„ä¸€äº›è½¬æ¢æ–¹æ³•æœ‰ï¼šäº‹ä»¶çš„åƒç´ ç›´æ–¹å›¾ã€æœ€è¿‘æ—¶é—´æˆ³è¡¨é¢ï¼ˆSAEï¼‰ã€æ’å€¼ä½“ç´ ç½‘æ ¼ã€‚åœ¨ç½‘ç»œæ¶æ„æ–¹é¢ï¼Œè¿™äº›ä»»åŠ¡å¾€å¾€éƒ½ä¼šä½¿ç”¨æµå½¢çš„Encoder-Decoderæ¶æ„ï¼Œå…·ä½“ç½‘ç»œä¸­çš„å…¶å®ƒç»†èŠ‚å¯ä»¥åœ¨å¼•æ–‡ä¸­æŸ¥æ‰¾å¯¹åº”çš„å¼•ç”¨ã€‚</p><p><img src="/images/Event-Camera/004.jpg" alt="æµå½¢çš„Encoder-Decoderæ¶æ„"></p><h3 id="C-SNN"><a href="#C-SNN" class="headerlink" title="C. SNN"></a>C. SNN</h3><p>äº‹ä»¶ç›¸æœºæ˜¯å—åˆ°ç”Ÿç‰©å­¦å¯å‘çš„ä¼ æ„Ÿå™¨ï¼ŒSNNä¹Ÿæ˜¯ä¸€ç§å—åˆ°ç”Ÿç‰©å­¦å¯å‘çš„ç½‘ç»œã€‚SNN ä½¿ç”¨è„‰å†²ï¼ˆå‘ç”Ÿåœ¨æ—¶é—´ç‚¹ä¸Šçš„ç¦»æ•£äº‹ä»¶ï¼‰è¿›è¡Œè¿æ¥ã€‚ä¸€ä¸ªç¥ç»å…ƒä»è§†è§‰ç©ºé—´çš„ä¸€ä¸ªå°åŒºåŸŸï¼ˆä¸€ä¸ªæ„Ÿå—é‡ï¼‰æ¥å—è¾“å…¥äº‹ä»¶ï¼Œåœ¨çŠ¶æ€è¶…è¿‡é˜ˆå€¼æ—¶äº§ç”Ÿè¾“å‡ºäº‹ä»¶ã€‚ç¥ç»å…ƒä»¥åˆ†å±‚çš„æ–¹å¼è¿æ¥ï¼Œå½¢æˆä¸€ä¸ªç½‘ç»œï¼Œäº‹ä»¶ä»è¾“å…¥åˆ°SNNçš„ç¬¬ä¸€å±‚ä¸€ç›´å¾€åä¼ æ’­ã€‚æ‰€ä»¥SNNè·Ÿäº‹ä»¶ç›¸æœºæ­é…åœ¨ä¸€èµ·å°±è·Ÿçç é…å¥¶èŒ¶ä¸€æ ·è‡ªç„¶ã€‚</p><h2 id="å››ã€äº‹ä»¶ç›¸æœºçš„å‘å±•ä¸ç ”ç©¶ç°çŠ¶"><a href="#å››ã€äº‹ä»¶ç›¸æœºçš„å‘å±•ä¸ç ”ç©¶ç°çŠ¶" class="headerlink" title="å››ã€äº‹ä»¶ç›¸æœºçš„å‘å±•ä¸ç ”ç©¶ç°çŠ¶"></a>å››ã€äº‹ä»¶ç›¸æœºçš„å‘å±•ä¸ç ”ç©¶ç°çŠ¶</h2><p>äº‹ä»¶ç›¸æœºè¯ç”Ÿäº1990å¹´ï¼Œé‚£ä¸ªæ—¶é—´è®¸å¤šç ”ç©¶äººå‘˜æ¢è®¨åŠ¨ç‰©æ„ŸçŸ¥ç¯å¢ƒçš„æ–¹å¼ï¼Œå‘ç°å¯¹å˜åŒ–æ›´ä¸ºæ•æ„Ÿï¼Œæ‰€ä»¥è®¾è®¡å‡ºäº†å®éªŒå®¤ç”¨çš„äº‹ä»¶ç›¸æœºã€‚</p><p>2008å¹´ï¼Œè¯ç”Ÿäº†ç¬¬ä¸€æ¬¾å•†ç”¨çš„äº‹ä»¶ç›¸æœºã€‚è¿™ä¹ˆçœ‹æ¥ï¼Œäº‹ä»¶ç›¸æœºä»å•†ç”¨åˆ°ç°åœ¨ä¹Ÿåˆšåˆšè¿‡äº†åæ¥å¹´ã€‚ç›®å‰ï¼Œè®¸å¤šå•†ä¸šå…¬å¸è‡´åŠ›äºäº‹ä»¶ç›¸æœºçš„å‘å±•ï¼Œæœ‰éŸ©å›½Samsungã€æ³•å›½propheseeã€ç‘å£«iniVationã€ä¸­å›½CelePixelï¼ˆèŠ¯ä»‘ç§‘æŠ€ï¼‰ç­‰ã€‚</p><p>åœ¨å­¦æœ¯ä¸Šï¼Œè‹é»ä¸–è”é‚¦ç†å·¥å­¦é™¢ï¼ˆETHï¼‰çš„æœºå™¨äººä¸æ„ŸçŸ¥å›¢é˜Ÿå¯¹äº‹ä»¶ç›¸æœºæœ‰ç€ç³»ç»Ÿæ·±å…¥çš„ç ”ç©¶ï¼Œå…¶ä»–é«˜æ ¡ä¾‹å¦‚å¸å›½ç†å·¥ã€æ…•å°¼é»‘å¤§å­¦ç­‰ä¹Ÿå¼€å§‹ç›¸å…³ç ”ç©¶ã€‚</p><p>äº‹ä»¶ç›¸æœºï¼Œç›®å‰åœ¨åœ¨ç‰¹å¾æå–ä¸è·Ÿè¸ªã€å…‰æµã€ä¸‰ç»´é‡å»ºã€SLAMã€æ¨¡å¼è¯†åˆ«ã€æ§åˆ¶ç­‰æ–¹å‘æ­£åœ¨ä¸æ–­è¿›è¡Œç€ç ”ç©¶ï¼Œå…·æœ‰å¹¿æ³›çš„åº”ç”¨å‰æ™¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äº‹ä»¶ç›¸æœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Qté€ŸæˆæŒ‡å—</title>
      <link href="2021/04/06/introduce-qt/"/>
      <url>2021/04/06/introduce-qt/</url>
      
        <content type="html"><![CDATA[<h1 id="Qté€ŸæˆæŒ‡å—"><a href="#Qté€ŸæˆæŒ‡å—" class="headerlink" title="Qté€ŸæˆæŒ‡å—"></a>Qté€ŸæˆæŒ‡å—</h1><p>Qt Creatoræ˜¯ä½¿ç”¨Qtå¼€å‘çš„IDEã€‚Qtæ”¯æŒWindowsã€Linux/Unixã€Mac OS Xã€Androidã€BlackBerryã€QNXç­‰å¤šç§å¹³å°ï¼ŒQt Creatorä¸ºä¸åŒå¹³å°æä¾›äº†ç»Ÿä¸€çš„å¼€å‘ç¯å¢ƒã€‚</p><p>Qt Creatoré›†æˆäº†Qt Designerã€Qt Assistantã€Helpç­‰å·¥å…·ã€‚å› æ­¤ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­å¯ä»¥å¾ˆå¿«çš„é€šè¿‡Designeræ¥è®¾è®¡ç•Œé¢ã€‚å¦‚æœæƒ³ä»Qt APIä¸­è·å¾—æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œåªéœ€è¦å°†å…‰æ ‡å®šä½åˆ°ç›¸åº”çš„ç±»æˆ–å‡½æ•°å¹¶æŒ‰ä¸‹F1å³å¯ã€‚</p><h1 id="å®‰è£…Qt-Creator"><a href="#å®‰è£…Qt-Creator" class="headerlink" title="å®‰è£…Qt Creator"></a>å®‰è£…Qt Creator</h1><blockquote><p>è¿™é‡Œä»…ä»‹ç»Linuxä¸‹çš„</p></blockquote><p><strong>åœ¨Linuxä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€æ¡æŒ‡ä»¤å°±å¯ä»¥å®‰è£…å¥½Qtç¯å¢ƒ</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> libqt4-dev libqt4-opengl-dev qtcreator<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„æŒ‡ä»¤æ‰“å¼€é¡¹ç›®æ–‡ä»¶ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">qtcreator simple_draw.pro<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="ç†Ÿæ‚‰Qt-Creator-ç•Œé¢"><a href="#ç†Ÿæ‚‰Qt-Creator-ç•Œé¢" class="headerlink" title="ç†Ÿæ‚‰Qt Creator ç•Œé¢"></a>ç†Ÿæ‚‰Qt Creator ç•Œé¢</h1><blockquote><p>éƒ¨åˆ†è½¬è½½</p></blockquote><h2 id="æ¬¢è¿æ¨¡å¼"><a href="#æ¬¢è¿æ¨¡å¼" class="headerlink" title="æ¬¢è¿æ¨¡å¼"></a>æ¬¢è¿æ¨¡å¼</h2><p>è¿›å…¥Qt Creatoråï¼Œä¼šé»˜è®¤è¿›å…¥æ¬¢è¿æ¨¡å¼ï¼Œé»˜è®¤é€‰æ‹©çš„æ˜¯â€Projectâ€é€‰é¡¹ã€‚å½“ç„¶ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“å¯¹å·¥ç¨‹è¿›è¡Œæ“ä½œã€‚</p><h3 id="å·¥ç¨‹"><a href="#å·¥ç¨‹" class="headerlink" title="å·¥ç¨‹"></a>å·¥ç¨‹</h3><p><strong>New Projectï¼š</strong><br>æ–°å»ºå·¥ç¨‹ã€‚å¯ä»¥ä½¿Qtå·¥ç¨‹ã€Creatoræ’ä»¶ã€C++åº“ã€å…¶ä»–é¡¹ç›®ã€‚</p><p><strong>Open Projectï¼š</strong><br>æ‰“å¼€å·¥ç¨‹</p><p><strong>Seeeionsï¼š</strong><br>ä¼šè¯ã€‚å¯ä»¥å¯¹ä¼šè¯è¿›è¡Œç®¡ç†ï¼ŒåŒ…æ‹¬Cloneã€‚å¦‚æœæ²¡æ‰“å¼€å·¥ç¨‹ï¼Œåˆ™æ˜¾ç¤ºçš„æ˜¯æœ€åä¸€æ¬¡æ‰“å¼€çš„ï¼ˆä¼šè¯ï¼‰å·¥ç¨‹ï¼Œå¦åˆ™ï¼Œæ˜¾ç¤ºå½“å‰çš„ä¼šè¯ï¼ˆå·¥ç¨‹ï¼‰ã€‚</p><p><strong>Recent Projectsï¼š</strong><br>åˆ—å‡ºæœ€è¿‘æ‰“å¼€çš„é¡¹ç›®ï¼Œé€šè¿‡å®ƒå¯ä»¥è¿…é€Ÿæ‰“å¼€æŒ‡å®šé¡¹ç›®ã€‚</p><p><strong>New to Qtï¼š</strong><br>å¯ä»¥å¸®åŠ©ä½ å­¦ä¹ å¼€å‘Qté¡¹ç›®å’Œæµè§ˆQt Creatorã€‚</p><p>Qt Accountï¼šQtè´¦æˆ·<br>Qt Cloud Servicesï¼šQtäº‘æœåŠ¡<br>Online Communityï¼šç½‘ç»œç¤¾åŒº<br>Blogsï¼šåšå®¢<br>User Guideï¼šç”¨æˆ·æ‰‹å†Œ</p><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p>åˆ—å‡ºäº†æ‰€æœ‰çš„Qt Examplesï¼ˆQt Widgetsã€QMLç›¸å…³çš„ï¼‰ï¼Œé€‰æ‹©ä»»æ„ä¸€ä¸ªä½ æƒ³åˆ°å­¦ä¹ çš„ç¤ºä¾‹æ‰“å¼€ï¼Œç„¶åç¼–è¯‘ã€è¿è¡Œã€‚å¦‚æœä½ çœ‹ä¸åˆ°ç¤ºä¾‹æ‰€ç¤ºçš„å†…å®¹ï¼Œä½ å¯ä»¥è¿è¡Œä»¥ä¸‹æŒ‡ä»¤å¹¶ä¸”é‡æ–°æ‰“å¼€Qt creator</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> qtbase5-examples qtbase5-doc-html<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å»ºè®®å¤§å®¶ä¸€å®šè¦æŠŠâ€ç¤ºä¾‹â€ç”¨å¥½ï¼Œè¿™ç»å¯¹æ˜¯ç†Ÿæ‚‰Qtçš„ä¸€æ¡æ·å¾„ï¼Œé‡Œé¢æœ‰æˆä¸ºé«˜æ‰‹çš„å¿…æ€æŠ€ã€‚</p><h3 id="æ•™ç¨‹"><a href="#æ•™ç¨‹" class="headerlink" title="æ•™ç¨‹"></a>æ•™ç¨‹</h3><p>é‡Œé¢åŒ…å«å¤§é‡çš„Qtè®²è§£è§†é¢‘åŠæ–‡æ¡£ã€‚</p><h2 id="ç¼–è¾‘æ¨¡å¼"><a href="#ç¼–è¾‘æ¨¡å¼" class="headerlink" title="ç¼–è¾‘æ¨¡å¼"></a>ç¼–è¾‘æ¨¡å¼</h2><p>å½“æ‰“å¼€ä¸€ä¸ªé¡¹ç›®æˆ–è€…åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®åï¼ŒQt Creatorå°†ä¼šåˆ‡æ¢åˆ°ç¼–è¾‘æ¨¡å¼ä¸‹ã€‚å¯ä»¥åœ¨å·¦è¾¹çœ‹åˆ°é¡¹ç›®æ–‡ä»¶ï¼Œåœ¨ä¸­å¤®åŒºåŸŸçœ‹åˆ°ä»£ç ç¼–è¾‘å™¨ã€‚å·¦è¾¹é€‰ä¸­çš„æ–‡ä»¶å°†ä¼šè¢«ç¼–è¾‘å™¨æ‰“å¼€ã€‚</p><p>ç¼–è¾‘å™¨æä¾›äº†è¯­æ³•é«˜äº®ï¼Œä»£ç è¡¥å…¨å’Œæ™ºèƒ½çº é”™çš„åŠŸèƒ½ï¼Œä¹Ÿæä¾›å„ç§ä»£ç é‡æ„çš„å‘½ä»¤ã€‚å½“ä½¿ç”¨ç¼–è¾‘å™¨å·¥ä½œæ—¶ï¼Œä½ ä¼šè§‰å¾—å®ƒçš„å“åº”å¼‚å¸¸è¿…é€Ÿã€‚è¿™æ„Ÿè°¢Qt Creaotorçš„å¼€å‘è€…å°†è¿™ä¸ªå·¥å…·åšçš„å¦‚æ­¤æ°å‡ºã€‚</p><p><strong>åœ¨ç¼–è¾‘æ¨¡å¼å·¥ä½œ</strong></p><p>å¯ä»¥ç¼–è¾‘å½“å‰æ–‡ä»¶ï¼Œæ·»åŠ æ–°æ–‡ä»¶æˆ–è€…ç°æœ‰æ–‡ä»¶ï¼Œæ·»åŠ åº“ï¼Œè¿˜å¯ä»¥è¿›è¡Œæœç´¢ç»“æœçš„æŸ¥æ‰¾ã€‚</p><p>å¯ä»¥åœ¨ç¼–è¾‘å™¨å·¥å…·æ ä¸­æ‰“å¼€çš„æ–‡ä»¶å’Œç¬¦å·ä¹‹é—´è¿›è¡Œå¯¼èˆªã€‚ä¹Ÿå¯ä»¥æ‹†åˆ†è§†å›¾åŒæ—¶å¯¹å¤šä¸ªæ–‡ä»¶è¿›è¡Œæ“ä½œï¼Œæ·»åŠ ä¹¦ç­¾ï¼Œåˆ‡æ¢å¤´æ–‡ä»¶/æºæ–‡ä»¶ã€ä»¥åŠå‡½æ•°å£°æ˜/å®šä¹‰ç­‰ã€‚</p><h3 id="ç¼–å†™ä»£ç "><a href="#ç¼–å†™ä»£ç " class="headerlink" title="ç¼–å†™ä»£ç "></a>ç¼–å†™ä»£ç </h3><p><strong>è¯­æ³•é«˜äº®</strong></p><p>å¯ä»¥é€šè¿‡çªå‡ºæ˜¾ç¤ºä»£ç å…ƒç´ å’Œå—æ¥ç¼–å†™æ ¼å¼è‰¯å¥½çš„ä»£ç ã€‚ä½¿ç”¨è¯­æ³•é«˜äº®ä¹Ÿå¯ç”¨äºå…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œæ¯”å¦‚C++æˆ–QMLã€‚</p><p><strong>æ£€æŸ¥ä»£ç è¯­æ³•</strong></p><p>å½“å†™ä»£ç æ—¶ï¼ŒQt Creatorä¼šæ£€æŸ¥é”™è¯¯å¹¶æ˜¾ç¤ºå†…åµŒé”™è¯¯å’Œè­¦å‘Šæ¶ˆæ¯ã€‚åŒæ ·ï¼Œå¯ä»¥æ£€æŸ¥ä¸€ä¸ªJSONæ•°æ®ç»“æ„ã€‚æ­¤å¤–ï¼Œå¯ä»¥åœ¨é¡¹ç›®ä¸­è¿è¡ŒQMLå’ŒJavaScriptä»£ç çš„é™æ€æ£€æŸ¥ï¼Œä»¥æ‰¾åˆ°å…±åŒçš„é—®é¢˜ã€‚</p><p><strong>å®Œæˆä»£ç </strong></p><p>Qt Creatorå¯ä»¥é¢„è®¡ä½ å°†å†™ä»€ä¹ˆï¼Œå¹¶ä¸”ä¸ºå…ƒç´ ã€å±æ€§å’Œæ ‡è¯†å®Œæˆä»£ç å’Œä»£ç æ®µã€‚</p><p><strong>ç¼©è¿›æ–‡æœ¬æˆ–ä»£ç </strong></p><p>Qt Creatoræ ¹æ®C++ã€QMLä»£ç æ–‡ä»¶å’Œå…¶å®ƒæ–‡æœ¬æ–‡ä»¶æŒ‡å®šçš„è§„åˆ™ï¼Œè¿›è¡Œç¼©è¿›æ–‡æœ¬å’Œä»£ç ã€‚</p><p><strong>ä½¿ç”¨Qt Quickçš„å·¥å…·æ </strong></p><p>å½“ç¼–è¾‘QMLä»£ç æ—¶ï¼Œå¯ä»¥æŒ‡å®šQMLç»„ä»¶çš„å±æ€§ã€‚å¯¹äºæŸäº›å±æ€§å¹¶ä¸ç®€å•ï¼Œå¦‚é¢œè‰²å’Œå­—ä½“ã€‚ä¾‹å¦‚ï¼Œå¾ˆå°‘æœ‰äººèƒ½æƒ³è±¡é¢œè‰²ï¼ƒ18793fã€‚å¦‚æœè¦è½»æ¾ç¼–è¾‘è¿™äº›å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨Qt Quickå·¥å…·æ ã€‚</p><p><strong>ç²˜è´´å’Œæå–ä»£ç æ®µ</strong></p><p>å¯ä»¥ä¸å…¶ä»–å¼€å‘äººå‘˜åˆä½œé€šè¿‡ä»æœåŠ¡å™¨ç²˜è´´å’Œè·å–ä»£ç ç‰‡æ®µã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½ä¼šè®©åŒäº‹æ¥å®¡æŸ¥ä½ è®¡åˆ’æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­çš„å˜åŒ–ã€‚</p><p><strong>ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å®</strong></p><p>å½“ä½ åœ¨ä»£ç ç¼–è¾‘å™¨ä¸­æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥è®°å½•é”®ç›˜åºåˆ—ä½œä¸ºå®ã€‚ç„¶åï¼Œä½ å¯ä»¥è¿è¡Œé‡å¤åºåˆ—çš„å®ã€‚å¯ä»¥ä¿å­˜æœ€æ–°çš„å®å¹¶åˆ†é…å¿«æ·é”®è¿è¡Œï¼Œæˆ–ä»å®šä½å™¨è¿è¡Œã€‚</p><h3 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h3><p><strong>æŸ¥æ‰¾å’Œæ›¿æ¢</strong></p><p>å½“è¾“å…¥çš„æ—¶å€™ï¼Œå¢é‡æœç´¢ä¼šåŒ¹é…çª—å£ä¸­é«˜äº®çš„å­—ç¬¦ä¸²ï¼ŒåŒæ—¶è¾“å…¥é«˜çº§æœç´¢èƒ½å¤Ÿåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ä»å½“å‰æ‰“å¼€çš„é¡¹ç›®æˆ–æ–‡ä»¶ä¸­æœç´¢ã€‚å¯ä»¥åŒæ—¶è¿›è¡Œå¢é‡æœç´¢å’Œé«˜çº§æœç´¢ã€‚</p><p><strong>ç”¨å®šä½å™¨æœç´¢</strong></p><p>å®šä½å™¨æä¾›äº†Qt Creatorä¸­æœ€ç®€å•çš„æ–¹æ³•ä¹‹ä¸€æ¥æµè§ˆé¡¹ç›®ã€æ–‡ä»¶ã€ç±»ã€å‡½æ•°ã€æ–‡æ¡£å’Œæ–‡ä»¶ç³»ç»Ÿã€‚</p><h3 id="é‡æ„"><a href="#é‡æ„" class="headerlink" title="é‡æ„"></a>é‡æ„</h3><p><strong>é‡æ„ä»£ç </strong></p><ul><li>æé«˜åº”ç”¨ç¨‹åºçš„å†…éƒ¨è´¨é‡</li><li>æé«˜æ€§èƒ½å’Œå¯æ‰©å±•</li><li>æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</li><li>ç®€åŒ–ä»£ç ç»“æ„</li></ul><p><strong>æŸ¥æ‰¾ç¬¦å·</strong></p><p>ä¸ºäº†æŸ¥æ‰¾Qt C++æˆ–Qt Quické¡¹ç›®ä¸­ç‰¹å®šç¬¦å·æˆ–è€…QMLç»„ä»¶çš„å¼•ç”¨ï¼š</p><p>1ã€åœ¨ç¼–è¾‘å™¨ä¸­ï¼Œå°†å…‰æ ‡æ”¾åœ¨ç¬¦å·æˆ–ç»„ä»¶ä¸Šï¼Œç„¶åé€‰æ‹©ï¼š</p><ul><li>Tools -&gt; C++ &gt; Find Usages</li><li>Tools &gt; QML/JS -&gt; Find Usages</li><li>Ctrl+Shift+U</li></ul><p>Qt Creatoråœ¨ä»¥ä¸‹ä½ç½®æŸ¥æ‰¾ç¬¦å·ï¼š</p><ol><li>åˆ—ä¸ºé¡¹ç›®çš„ä¸€éƒ¨åˆ†æ–‡ä»¶</li><li>æ–‡ä»¶ç›´æ¥è¢«é¡¹ç›®æ–‡ä»¶æ‰€ä½¿ç”¨ï¼ˆä¾‹å¦‚ï¼Œç”Ÿæˆçš„æ–‡ä»¶ï¼‰</li><li>ä½¿ç”¨æ¡†æ¶å’Œåº“çš„å¤´æ–‡ä»¶</li></ol><p>æ³¨æ„ï¼šä¹Ÿå¯é€‰æ‹©ï¼šEdit-&gt;Find/Replace-&gt;Advanced Find-&gt;C++ Symbolsï¼Œä»¥ä¾¿æœç´¢ç±»ã€å‡½æ•°ã€æšä¸¾ã€å’Œå£°æ˜æ— è®ºæ˜¯é¡¹ç›®çš„ä¸€éƒ¨åˆ†æ–‡ä»¶æˆ–è¢«ä»£ç ä½¿ç”¨çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¦‚includeæ–‡ä»¶ã€‚</p><p>2ã€â€æœç´¢ç»“æœâ€çª—å£æ‰“å¼€å¹¶æ˜¾ç¤ºå½“å‰é¡¹ç›®ä¸­ç¬¦å·çš„ä½ç½®å’Œæ•°é‡ã€‚</p><p><strong>åº”ç”¨é‡æ„æ“ä½œ</strong></p><p>Qt Creatorå…è®¸å¿«é€Ÿã€æ–¹ä¾¿åœ°é‡æ„ä»£ç ã€‚é‡æ„çš„æ“ä½œæ˜¯å¦å¯ç”¨å–å†³äºå…‰æ ‡åœ¨ä»£ç ç¼–è¾‘å™¨çš„ä½ç½®ä»¥åŠä½ æ˜¯å¦å†™çš„æ˜¯C++æˆ–è€…QMLä»£ç ã€‚</p><p>è¦ä½¿ç”¨é‡æ„ï¼Œä»¥C++ä»£ç ä¸ºä¾‹ï¼Œé¼ æ ‡å³é”®ä¸€ä¸ªæ“ä½œæ•°ã€æ¡ä»¶è¯­å¥ã€å­—ç¬¦ä¸²æˆ–åç§°æ‰“å¼€ä¸Šä¸‹æ–‡èœå•ã€‚åœ¨QMLä»£ç ï¼Œå¯ä»¥ç‚¹å‡»æŸä¸ªé¡¹ç›®çš„IDæˆ–åç§°ï¼Œåœ¨ä¸Šä¸‹æ–‡èœå•ä¸­é€‰æ‹©é‡æ„ï¼Œç„¶åé€‰æ‹©ä¸€ä¸ªé‡æ„æ“ä½œã€‚ä¹Ÿå¯ä»¥æŒ‰Alt+Enteré”®æ‰“å¼€åŒ…å«åœ¨å½“å‰å…‰æ ‡ä½ç½®å¯é‡æ„è¡Œä¸ºçš„ä¸Šä¸‹æ–‡èœå•ã€‚</p><p><strong>é‡æ„C++ä»£ç </strong></p><ul><li>å‚è€ƒï¼š<a href="http://doc.qt.io/qtcreator/creator-editor-refactoring.html">é‡æ„</a></li></ul><h3 id="é…ç½®ç¼–è¾‘å™¨"><a href="#é…ç½®ç¼–è¾‘å™¨" class="headerlink" title="é…ç½®ç¼–è¾‘å™¨"></a>é…ç½®ç¼–è¾‘å™¨</h3><p>Qt Creatorå…è®¸é…ç½®æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä»¥æ»¡è¶³ç‰¹å®šçš„éœ€æ±‚ã€‚è¦é…ç½®ç¼–è¾‘å™¨ï¼Œé€‰æ‹©ï¼šå·¥å…·-&gt;é€‰é¡¹-&gt;æ–‡æœ¬ç¼–è¾‘å™¨ã€‚</p><p>è¿™äº›è®¾ç½®é€‚ç”¨äºæ‰€æœ‰é¡¹ç›®ï¼ˆå…¨å±€è®¾ç½®ï¼‰ï¼Œè‹¥è¦é…ç½®å½“å‰é¡¹ç›®çš„æ–‡æœ¬ç¼–è¾‘è¡Œä¸ºï¼š</p><ol><li>é€‰æ‹©ï¼šé¡¹ç›®-&gt;ç¼–è¾‘å™¨ã€‚</li><li>ç¼–è¾‘å™¨è®¾ç½®é€‰æ‹©â€è‡ªå®šä¹‰è®¾ç½®â€ã€‚</li><li>ä¸ºé¡¹ç›®æŒ‡å®šæ–‡æœ¬ç¼–è¾‘å™¨è®¾ç½®ã€‚</li></ol><h3 id="å­—ä½“å’Œé¢œè‰²"><a href="#å­—ä½“å’Œé¢œè‰²" class="headerlink" title="å­—ä½“å’Œé¢œè‰²"></a>å­—ä½“å’Œé¢œè‰²</h3><p><strong>é…ç½®å­—ä½“</strong></p><p>ä½ å¯ä»¥é€‰æ‹©å­—ä½“å’Œå­—å·ï¼Œå¯ä»¥æŸ¥çœ‹æ–‡æœ¬æŒ‡å®šç™¾åˆ†æ¯”çš„ç¼©æ”¾è®¾ç½®ã€‚ä¹Ÿå¯ä»¥æŒ‰Ctrl++æˆ–Ctrl+- æ”¾å¤§æˆ–ç¼©å°ï¼Œæˆ–è€…æŒ‰ä½Ctrlé”®å‘ä¸Šæˆ–å‘ä¸‹æ»šåŠ¨é¼ æ ‡æ»šè½®ã€‚è¦ç¦ç”¨é¼ æ ‡æ»šè½®çš„åŠŸèƒ½ï¼Œé€‰æ‹©ï¼šå·¥å…·-&gt;é€‰é¡¹-&gt;æ–‡æœ¬ç¼–è¾‘å™¨-&gt;è¡Œä¸ºï¼Œå¹¶å–æ¶ˆé€‰ä¸­â€å¼€å¯é¼ æ ‡æ»šè½®ç¼©æ”¾â€å¤é€‰æ¡†ã€‚</p><p>æŠ—é”¯é½¿é»˜è®¤æƒ…å†µä¸‹å¯ç”¨ï¼Œä»¥ä½¿å±å¹•ä¸Šçš„æ–‡æœ¬çœ‹èµ·æ¥æ›´å¹³æ»‘æ›´æ˜“è¯»ã€‚å–æ¶ˆâ€æŠ—é”¯é½¿â€å¤é€‰æ¡†ä»¥å…³é—­æŠ—é”¯é½¿ã€‚</p><p><strong>å®šä¹‰é…è‰²æ–¹æ¡ˆ</strong></p><p>å¯ä»¥é€‰æ‹©è¯­æ³•é«˜äº®é¢„å®šä¹‰çš„é¢œè‰²æ–¹æ¡ˆä¸­çš„ä¸€ç§æˆ–åˆ›å»ºè‡ªå®šä¹‰é…è‰²æ–¹æ¡ˆã€‚è¯¥é…è‰²æ–¹æ¡ˆé€‚ç”¨äºçªå‡ºC++å’ŒQMLæ–‡ä»¶å’Œé€šç”¨æ–‡ä»¶ã€‚</p><p>è¦åˆ›å»ºä¸€ä¸ªé¢œè‰²æ–¹æ¡ˆï¼š</p><ol><li>é€‰æ‹©å·¥å…·-&gt;é€‰é¡¹-&gt;æ–‡æœ¬ç¼–è¾‘å™¨-&gt;å­—ä½“å’Œé¢œè‰²-&gt;å¤åˆ¶ã€‚</li><li>è¾“å…¥é¢œè‰²æ–¹æ¡ˆçš„åç§°ï¼ˆè‡ªå®šä¹‰ï¼‰ï¼Œç„¶åç¡®å®šã€‚</li><li>é€‰æ‹©å‰æ™¯è‰²ã€‚</li><li>é€‰æ‹©èƒŒæ™¯è‰²ã€‚</li></ol><p>è¿™é‡Œæ˜¯è®©å¤§å®¶äº†è§£å¦‚ä½•è‡ªå®šä¹‰é…è‰²æ–¹æ¡ˆã€‚å½“ç„¶ï¼Œä¸€èˆ¬æˆ‘ä¸ä¼šå»è‡ªå·±è®¾ç½®ï¼Œæˆ‘ä¼šä½¿ç”¨â€é…è‰²æ–¹æ¡ˆâ€ä¸­çš„é»˜è®¤é€‰é¡¹â€Darkâ€ã€ç„¶åâ€å­—å·â€æ”¹ä¸º12ï¼Œå…¶ä»–å‡é»˜è®¤ã€‚è¿™æ ·ï¼Œç¼–è¾‘å™¨çœ‹èµ·æ¥å°±æ²¡æœ‰é‚£ä¹ˆäº®äº†ï¼Œè€Œä¸”å­—ä½“ä¹Ÿå˜å¾—æ¯”è¾ƒå¤§ï¼Œçœ‹èµ·æ¥å¾ˆèˆ’æœã€‚</p><h3 id="è¡Œä¸º"><a href="#è¡Œä¸º" class="headerlink" title="è¡Œä¸º"></a>è¡Œä¸º</h3><p>è¿™é‡Œä¸»è¦ä»‹ç»ç¼©è¿›ã€æ–‡ä»¶ç¼–ç æ ¼å¼</p><p><strong>åˆ¶è¡¨ç¬¦å’Œç¼©è¿›</strong></p><p>å½“é”®å…¥æ–‡å­—æˆ–ä»£ç æ—¶ï¼Œä¼šæ ¹æ®æ‰€é€‰æ‹©çš„æ–‡æœ¬ç¼–è¾‘å™¨æˆ–ä»£ç æ ·å¼é€‰é¡¹è‡ªåŠ¨ç¼©è¿›ã€‚å½“ä½ æŒ‰ä¸‹Tabé”®ï¼Œé€‰æ‹©ä¸€ä¸ªå—ç¼©è¿›ã€‚æŒ‰Shift+Tabé”®æ¥å‡å°‘ç¼©è¿›ã€‚ä¹Ÿå¯ä»¥ç¦ç”¨è‡ªåŠ¨ç¼©è¿›ã€‚</p><p>å¯ä»¥ä¸ºä»¥ä¸‹æ–‡ä»¶æŒ‡å®šç¼©è¿›ï¼š</p><ol><li>C++æ–‡ä»¶</li><li>QMLæ–‡ä»¶</li><li>å…¶ä»–æ–‡æœ¬æ–‡ä»¶</li></ol><p>ä¹Ÿå¯ä»¥åˆ†åˆ«ä¸ºæ¯ä¸ªé¡¹ç›®æŒ‡å®šç¼©è¿›ã€‚å¯ä»¥æŒ‡å®šå¤šå¥—ä»£ç é£æ ¼è®¾ç½®ï¼Œå¹¶åœ¨å®ƒä»¬ä¹‹é—´è½»æ¾åˆ‡æ¢ã€‚æ­¤å¤–ï¼Œä½ å¯ä»¥å¯¼å…¥å’Œå¯¼å‡ºä»£ç æ ·å¼è®¾ç½®ã€‚</p><p>æ›´å¤šå‚è€ƒï¼š<a href="http://doc.qt.io/qtcreator/creator-indenting-code.html">ç¼©è¿›æ–‡ä»¶æˆ–ä»£ç </a></p><p><strong>æ–‡ä»¶ç¼–ç </strong></p><p>Qt5éœ€è¦UTF-8ç¼–ç çš„æºæ–‡ä»¶ï¼Œå› æ­¤åœ¨Qt Creator2.6ç‰ˆæœ¬é»˜è®¤ç¼–ç ä»â€Systemâ€æ”¹ä¸ºâ€UTF-8â€ã€‚å°½ç®¡ç³»ç»Ÿé»˜è®¤çš„ç¼–ç è®¾ç½®ä¸ºUTF-8ï¼Œç„¶è€Œï¼Œé»˜è®¤ç¼–ç å­—æ®µä»ç„¶æ˜¾ç¤ºç³»ç»Ÿå€¼ã€‚</p><p>æ£€æµ‹æ­£ç¡®çš„ç¼–ç æ¯”è¾ƒæ£˜æ‰‹ï¼Œæ‰€ä»¥Qt Creatorä¸­ä¸ä¼šå°è¯•è¿™æ ·åšã€‚ç›¸åï¼Œå½“å°è¯•ç¼–è¾‘ä¸€ä¸ªéUTF-8ç¼–ç çš„æ–‡ä»¶ï¼Œä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼šError: Could not decode â€œfilenameâ€ with â€œUTF-8â€-encoding. Editing not possible.</p><p>è¦è§£å†³æ­¤é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨æ–‡ä»¶è½¬æ¢å·¥å…·ï¼Œå¦‚é‡æ–°å°†æ–‡ä»¶ç¼–ç è½¬æ¢ä¸ºUTF-8ã€‚å¦åˆ™ï¼Œæ­£å¦‚é¢„æœŸä¸€æ ·ï¼Œå¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œã€‚</p><h2 id="è®¾è®¡æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼</h2><p>æ‰“å¼€Qt Creatoråï¼Œä½ ä¼šå‘ç°â€è®¾è®¡â€å‹æ ¹æ˜¯ä¸å¯ç”¨çš„ï¼ŒWhyï¼Ÿå‘µå‘µå“’ã€‚ã€‚ã€‚å› ä¸ºä½ æ²¡æœ‰ç¼–è¾‘uiæ–‡ä»¶ã€‚</p><p>å½“æˆ‘ä»¬åŒå‡»å·¥ç¨‹ä¸­çš„ä¸€ä¸ªuiæ–‡ä»¶æ—¶ï¼Œé»˜è®¤ä¼šè¿›å…¥è®¾è®¡æ¨¡å¼ã€‚è¿™é‡Œä¸»è¦åˆ†ä¸º5ä¸ªåŒºåŸŸï¼š</p><p><strong>çª—å£éƒ¨ä»¶ç›’ï¼š</strong><br>ä¸»è¦åŒ…å«å¸ƒå±€ã€æ‹‰ä¼¸ã€æŒ‰é’®ã€è§†å›¾ï¼ˆåŸºäºModelï¼‰ã€è§†å›¾ï¼ˆåŸºäºItemï¼‰ã€å®¹å™¨ã€è¾“å…¥æ§ä»¶ã€æ˜¾ç¤ºæ§ä»¶ç­‰ã€‚</p><p><strong>çª—å£ç¼–è¾‘å™¨ï¼š</strong><br>å¯ä»¥åˆ©ç”¨æ§ä»¶åŒºçš„éƒ¨ä»¶æ¥å¯¹çª—å£è¿›è¡Œå¸ƒå±€ï¼Œè¾¾åˆ°æƒ³è¦çš„æ•ˆæœã€‚</p><p><strong>å¯¹è±¡æŸ¥çœ‹å™¨ï¼š</strong><br>å°†çª—ä½“ç¼–è¾‘åŒºçš„æ§ä»¶æŒ‰ç…§çˆ¶å­å…³ç³»ä»¥æ ‘å½¢ç»“æ„æ˜¾ç¤ºå‡ºæ¥ã€‚ä¸çª—ä½“ç¼–è¾‘åŒºçš„å…±åŒç‰¹ç‚¹æ˜¯ï¼šå¯ä»¥æ”¹å˜å¯¹è±¡åç§°ã€æ ·å¼è¡¨ã€ä¿¡å·å’Œæ§½ç­‰ã€‚</p><p><strong>å±æ€§å€¼ç¼–è¾‘å™¨ï¼š</strong><br>å¯ä»¥ç¼–è¾‘ç›¸åº”æ§ä»¶çš„å±æ€§å€¼ï¼Œä¾‹å¦‚ï¼šåç§°ã€å¤§å°ã€æ–‡æœ¬ã€æ ·å¼ç­‰ã€‚</p><p><strong>åŠ¨ä½œã€ä¿¡å·/æ§½ç¼–è¾‘å™¨ï¼š</strong><br>å¯ä»¥æŒ‡å®šç¼–è¾‘åŠ¨ä½œåŠç›¸åº”æ§ä»¶çš„ä¿¡å·ä¸æ§½ã€‚</p><p>è¿™é‡Œå…ˆåšç®€å•çš„ä¸€äº›äº†è§£ï¼Œåé¢ä¼šå¯¹Designeråšè¯¦ç»†çš„ä»‹ç»ï¼Œæ›´å¤šç²¾å½©å¾…ç»­ã€‚ã€‚ã€‚</p><h2 id="è°ƒè¯•æ¨¡å¼"><a href="#è°ƒè¯•æ¨¡å¼" class="headerlink" title="è°ƒè¯•æ¨¡å¼"></a>è°ƒè¯•æ¨¡å¼</h2><h3 id="è°ƒè¯•C-ç¨‹åº"><a href="#è°ƒè¯•C-ç¨‹åº" class="headerlink" title="è°ƒè¯•C++ç¨‹åº"></a>è°ƒè¯•C++ç¨‹åº</h3><p>è¦æŸ¥çœ‹ç±»åŠå­˜å‚¨çš„æ•°æ®ï¼Œéœ€è¦ä¸ºç¨‹åºè®¾ç½®æ–­ç‚¹ã€‚</p><p>å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>1ã€ä¸ºéœ€è¦è°ƒè¯•çš„ä»£ç è®¾ç½®æ–­ç‚¹ã€‚</p><p>2ã€å¼€å§‹â€è°ƒè¯•â€ã€‚</p><p>æˆ–æŒ‰ä¸‹F5ï¼ˆè°ƒè¯•-&gt;å¼€å§‹è°ƒè¯•-&gt;å¼€å§‹è°ƒè¯•ï¼‰ã€‚</p><p>3ã€é€‰æ‹©â€Locals and Expressionsâ€ï¼ŒæŸ¥çœ‹ç±»åŠæ•°æ®æˆå‘˜ä¿¡æ¯ã€‚</p><p>ä¹Ÿå¯ä»¥å°†é¼ æ ‡æ»‘è¿‡è¿›è¡ŒæŸ¥çœ‹ã€‚</p><p>4ã€é€‰æ‹©â€Breakpointsâ€ï¼ŒæŸ¥çœ‹æ–­ç‚¹ä¿¡æ¯ã€‚</p><p>åŒ…å«ï¼šç¼–å·ã€å‡½æ•°ã€æ–‡ä»¶ã€è¡Œå·ç­‰ä¿¡æ¯</p><p>5ã€é€‰æ‹©â€Stackâ€ï¼ŒæŸ¥çœ‹å †æ ˆä¿¡æ¯ã€‚</p><p>åŒ…æ‹¬ï¼šçº§åˆ«ã€å‡½æ•°ã€æ–‡ä»¶ã€è¡Œå·ç­‰ä¿¡æ¯</p><h2 id="å¸®åŠ©æ¨¡å¼"><a href="#å¸®åŠ©æ¨¡å¼" class="headerlink" title="å¸®åŠ©æ¨¡å¼"></a>å¸®åŠ©æ¨¡å¼</h2><h3 id="ä½¿ç”¨å¸®åŠ©æ¨¡å¼"><a href="#ä½¿ç”¨å¸®åŠ©æ¨¡å¼" class="headerlink" title="ä½¿ç”¨å¸®åŠ©æ¨¡å¼"></a>ä½¿ç”¨å¸®åŠ©æ¨¡å¼</h3><p>Qt Creatorå®Œå…¨é›†æˆQtæ–‡æ¡£å’ŒQtç¤ºä¾‹ä½¿ç”¨å¸®åŠ©æ’ä»¶ã€‚ä½ å¯ä»¥ä¸ºå¸®åŠ©æ¨¡å¼æ·»åŠ å¤–éƒ¨æ–‡æ¡£ï¼Œå¹¶ä¸”è¿‡æ»¤æ–‡ä»¶æ˜¾ç¤ºæ›´å¿«åœ°æ‰¾åˆ°ç›¸å…³ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥ä¸ºå¸®åŠ©é¡µé¢æ·»åŠ ä¹¦ç­¾ã€‚</p><ul><li>è¦æŸ¥çœ‹æ–‡æ¡£ï¼Œåˆ‡æ¢åˆ°å¸®åŠ©æ¨¡å¼ã€‚</li><li>è¦æŸ¥çœ‹Qtç±»æˆ–å‡½æ•°çš„æç¤ºï¼ˆToolTipï¼‰ä¸Šä¸‹æ–‡æ•æ„Ÿå¸®åŠ©ï¼Œç§»åŠ¨é¼ æ ‡è‡³ç±»æˆ–å‡½æ•°ä¸Šå³å¯ï¼Œå¦‚æœå¸®åŠ©ä¸å¯ç”¨ï¼Œåˆ™æç¤ºæ˜¾ç¤ºç¬¦å·çš„ç±»å‹ä¿¡æ¯ã€‚</li><li>è¦æ˜¾ç¤ºä¸€ä¸ªQtç±»æˆ–å‡½æ•°çš„å…¨éƒ¨ä¿¡æ¯ï¼ŒæŒ‰F1ã€‚æ–‡æ¡£æ˜¾ç¤ºåœ¨ä»£ç ç¼–è¾‘æ—è¾¹çš„ä¸€ä¸ªçª—å£ï¼Œå¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„å‚ç›´ç©ºé—´ï¼Œåˆ™å…¨å±æ˜¾ç¤ºå¸®åŠ©æ¨¡å¼ã€‚</li><li>è¦é€‰æ‹©å’Œé…ç½®æ–‡æ¡£åœ¨å¸®åŠ©æ¨¡å¼ä¸‹çš„æ˜¾ç¤ºæ–¹å¼ï¼Œé€‰æ‹©ï¼šå·¥å…·-&gt;é€‰é¡¹-&gt;å¸®åŠ©ã€‚</li></ul><h3 id="æŸ¥çœ‹åŠŸèƒ½æç¤º"><a href="#æŸ¥çœ‹åŠŸèƒ½æç¤º" class="headerlink" title="æŸ¥çœ‹åŠŸèƒ½æç¤º"></a>æŸ¥çœ‹åŠŸèƒ½æç¤º</h3><p>è‹¥è¦éšè—é»˜è®¤çš„æç¤ºåŠŸèƒ½ï¼Œé€‰æ‹©ï¼šå·¥å…·-&gt;é€‰é¡¹-&gt;æ–‡æœ¬ç¼–è¾‘å™¨-&gt;è¡Œä¸ºï¼Œâ€é¼ æ ‡å’Œé”®ç›˜â€é€‰é¡¹ä¸­â€Show help tooltips using the mouseâ€é€‰æ‹©â€Shift+é¼ æ ‡æ‚¬åœæ—¶â€ ã€‚è¿™æ ·å°±å¯ä»¥é€šè¿‡æŒ‰ä½Shifté”®æ¥æŸ¥çœ‹æç¤ºã€‚è¦ä½¿ç”¨é”®ç›˜å¿«æ·é”®æ¥æŸ¥çœ‹å¸®åŠ©æç¤ºï¼Œé€‰æ‹©â€Show help tooltips using keyboard shortcut(Alt)â€ã€‚</p><h3 id="åœ¨æ–‡æ¡£ä¸­æŸ¥æ‰¾ä¿¡æ¯"><a href="#åœ¨æ–‡æ¡£ä¸­æŸ¥æ‰¾ä¿¡æ¯" class="headerlink" title="åœ¨æ–‡æ¡£ä¸­æŸ¥æ‰¾ä¿¡æ¯"></a>åœ¨æ–‡æ¡£ä¸­æŸ¥æ‰¾ä¿¡æ¯</h3><p>Qt Creatorã€Qtå’Œå…¶ä»–Qtäº¤ä»˜çš„äº§å“åŒ…å«äº†å¦‚.qchæ–‡ä»¶çš„æ–‡æ¡£ã€‚æ‰€æœ‰çš„æ–‡ä»¶æ˜¯åœ¨å¸®åŠ©æ¨¡å¼ä¸‹è®¿é—®ã€‚</p><p>è¦æŸ¥æ‰¾æ–‡æ¡£ä¸­çš„ä¿¡æ¯ï¼Œè¯·é€‰æ‹©ï¼š</p><ul><li>ä¹¦ç­¾ï¼šæŸ¥çœ‹æ·»åŠ è‡³ä¹¦ç­¾çš„é¡µé¢åˆ—è¡¨ã€‚</li><li>å†…å®¹ï¼šæŸ¥æ‰¾å®‰è£…åœ¨å¼€å‘ç”µè„‘ä¸­çš„æ‰€æœ‰æ–‡æ¡£ï¼Œæ¥æµè§ˆæ–‡æ¡£å†…å®¹ã€‚</li><li>ç´¢å¼•ï¼šåŸºäºæ‰€æœ‰å·²å®‰è£…çš„æ–‡æ¡£ä¸­çš„å…³é”®å­—åˆ—è¡¨æŸ¥æ‰¾ã€‚</li><li>æ‰“å¼€é¡µé¢ï¼Œä»¥æŸ¥çœ‹å½“å‰æ‰“å¼€çš„æ–‡æ¡£é¡µé¢çš„åˆ—è¡¨ã€‚</li><li>æŸ¥æ‰¾ï¼šåœ¨æ‰€æœ‰å·²å®‰è£…çš„æ–‡æ¡£ä¸­è¿›è¡ŒæŸ¥æ‰¾ã€‚</li></ul><h3 id="æ·»åŠ ä¹¦ç­¾åˆ°å¸®åŠ©é¡µ"><a href="#æ·»åŠ ä¹¦ç­¾åˆ°å¸®åŠ©é¡µ" class="headerlink" title="æ·»åŠ ä¹¦ç­¾åˆ°å¸®åŠ©é¡µ"></a>æ·»åŠ ä¹¦ç­¾åˆ°å¸®åŠ©é¡µ</h3><p>å¯ä»¥å°†ä¹¦ç­¾æ·»åŠ åˆ°æœ‰ç”¨çš„å¸®åŠ©é¡µé¢ï¼Œä¹‹ååœ¨â€ä¹¦ç­¾â€è§†å›¾å°±å¯ä»¥è½»æ¾åœ°æ‰¾åˆ°å®ƒä»¬ã€‚å¯ä»¥ç”¨é¡µé¢æ ‡é¢˜ä½œä¸ºä¹¦ç­¾ï¼Œä¹Ÿå¯ä»¥å°†å…¶æ›´æ”¹ä¸ºä»»ä½•æ–‡æœ¬ã€‚å¯ä»¥åœ¨è§†å›¾æ–‡ä»¶å¤¹é‡Œç»„ç»‡ä¹¦ç­¾ã€‚</p><p>è¦å°†ä¹¦ç­¾æ·»åŠ åˆ°æ‰“å¼€çš„å¸®åŠ©é¡µé¢ï¼š</p><ol><li>å•å‡»å·¥å…·æ ä¸Šçš„æŒ‰é’®ã€‚</li><li>åœ¨â€æ·»åŠ ä¹¦ç­¾â€å¯¹è¯æ¡†ä¸­ï¼Œå•å‡»ç¡®å®šï¼Œåœ¨é€‰ä¸­çš„æ–‡ä»¶å¤¹ä¸­ä¿å­˜ä¹¦ç­¾ã€‚</li></ol><p>è¦å¯¼å…¥å’Œå¯¼å‡ºä¹¦ç­¾ï¼Œé€‰æ‹©ï¼šå·¥å…·-&gt;é€‰é¡¹-&gt;å¸®åŠ©-&gt;æ¦‚è¦-&gt;å¯¼å…¥æˆ–å¯¼å‡ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Qt </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cartographeræ¢ç´¢è®°å½•</title>
      <link href="2021/03/28/learning-cartographer/"/>
      <url>2021/03/28/learning-cartographer/</url>
      
        <content type="html"><![CDATA[<h1 id="Cartographeræ¢ç´¢ç¬”è®°"><a href="#Cartographeræ¢ç´¢ç¬”è®°" class="headerlink" title="Cartographeræ¢ç´¢ç¬”è®°"></a>Cartographeræ¢ç´¢ç¬”è®°</h1><h2 id="Luaé…ç½®æ–‡ä»¶å‚æ•°è§£æ"><a href="#Luaé…ç½®æ–‡ä»¶å‚æ•°è§£æ" class="headerlink" title="Luaé…ç½®æ–‡ä»¶å‚æ•°è§£æ"></a>Luaé…ç½®æ–‡ä»¶å‚æ•°è§£æ</h2><table border="1" cellpadding="1" cellspacing="1"><tbody><tr><td style="width:153px;">å‚æ•°</td><td style="width:590px;">è§£æ</td><td>å¸¸ç”¨å€¼</td></tr><tr><td style="width:153px;">map_frame</td><td style="width:590px;">ç”¨äºå‘å¸ƒsubmapsçš„ROSåæ ‡ç³»IDï¼Œä½å§¿çš„çˆ¶åæ ‡ç³»ï¼Œé€šå¸¸ä½¿ç”¨â€œmapâ€</td><td>â€œmapâ€</td></tr><tr><td style="width:153px;">tracking_frame</td><td style="width:590px;">ç”±SLAMç®—æ³•è¿½è¸ªçš„ROSåæ ‡ç³»IDï¼Œå¦‚æœä½¿ç”¨IMUï¼Œåº”è¯¥ä½¿ç”¨å…¶åæ ‡ç³»ï¼Œé€šå¸¸é€‰æ‹©æ˜¯ â€œimu_linkâ€</td><td>"base_footprint"</td></tr><tr><td style="width:153px;">published_frame</td><td style="width:590px;">ç”¨äºå‘å¸ƒä½å§¿å­åæ ‡ç³»çš„ROSåæ ‡ç³»IDï¼Œä¾‹å¦‚â€œodomâ€åæ ‡ç³»ï¼Œå¦‚æœä¸€ä¸ªâ€œodomâ€åæ ‡ç³»ç”±ç³»ç»Ÿçš„ä¸åŒéƒ¨åˆ†æä¾›ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œmap_frameä¸­çš„â€œodomâ€å§¿åŠ¿å°†è¢«å‘å¸ƒã€‚ å¦åˆ™ï¼Œå°†å…¶è®¾ç½®ä¸ºâ€œbase_linkâ€å¯èƒ½æ˜¯åˆé€‚çš„</td><td>"odom"</td></tr><tr><td style="width:153px;">odom_frame</td><td style="width:590px;">åœ¨provide_odom_frameä¸ºçœŸæ‰å¯ç”¨ï¼Œåæ ‡ç³»åœ¨published_frameå’Œmap_frameä¹‹é—´ç”¨äºå‘å¸ƒå±€éƒ¨SLAMç»“æœï¼Œé€šå¸¸æ˜¯â€œodomâ€</td><td>"odom"</td></tr><tr><td style="width:153px;">provide_odom_frame</td><td style="width:590px;">å¦‚æœå¯ç”¨ï¼Œå±€éƒ¨ï¼Œéé—­ç¯ï¼ŒæŒç»­ä½å§¿ä¼šä½œä¸ºodom_frameå‘å¸ƒåœ¨map_frameä¸­å‘å¸ƒã€‚</td><td>true</td></tr><tr><td style="width:153px;">use_odometry</td><td style="width:590px;">å¦‚æœå¯ç”¨ï¼Œè®¢é˜…å…³äºâ€œodomâ€è¯é¢˜çš„nav_msgs/Odometryæ¶ˆæ¯ã€‚é‡Œç¨‹ä¿¡æ¯ä¼šæä¾›ï¼Œè¿™äº›ä¿¡æ¯åŒ…å«åœ¨SLAMé‡Œ</td><td>false</td></tr><tr><td style="width:153px;">num_laser_scans</td><td style="width:590px;"> <p style="margin-left:0pt;">è®¢é˜…çš„æ¿€å…‰æ‰«æè¯é¢˜æ•°é‡ã€‚</p> <p style="margin-left:0pt;">åœ¨ä¸€ä¸ªæ¿€å…‰æ‰«æä»ªçš„â€œscanâ€è¯é¢˜ä¸Šè®¢é˜…sensor_msgs/LaserScan</p> <p style="margin-left:0pt;">æˆ–åœ¨å¤šä¸ªæ¿€å…‰æ‰«æä»ªä¸Šè®¢é˜…è¯é¢˜â€œscan_1â€ï¼Œâ€œscan_2â€ç­‰</p> </td><td>1</td></tr><tr><td style="width:153px;">num_multi_echo_laser_scans</td><td style="width:590px;"> <p style="margin-left:0pt;">è®¢é˜…çš„å¤šå›æ³¢æ¿€å…‰æ‰«æä¸»é¢˜çš„æ•°é‡ã€‚</p> <p style="margin-left:0pt;">åœ¨ä¸€ä¸ªæ¿€å…‰æ‰«æä»ªçš„â€œechoesâ€è¯é¢˜ä¸Šè®¢é˜…sensor_msgs/MultiEchoLaserScan</p> <p style="margin-left:0pt;">æˆ–è€…ä¸ºå¤šä¸ªæ¿€å…‰æ‰«æä»ªè®¢é˜…è¯é¢˜â€œechoes_1â€ï¼Œâ€œechoes_2â€ç­‰ã€‚</p> </td><td>0</td></tr><tr><td style="width:153px;">num_subdivisions_per_laser_scan</td><td style="width:590px;"> <p style="margin-left:0pt;">å°†æ¯ä¸ªæ¥æ”¶åˆ°çš„ï¼ˆå¤šå›æ³¢ï¼‰æ¿€å…‰æ‰«æåˆ†æˆçš„ç‚¹äº‘æ•°ã€‚</p> <p style="margin-left:0pt;">ç»†åˆ†æ‰«æå¯ä»¥åœ¨æ‰«æä»ªç§»åŠ¨æ—¶å–æ¶ˆæ‰«æè·å–çš„æ‰«æã€‚</p> <p style="margin-left:0pt;">æœ‰ä¸€ä¸ªç›¸åº”çš„è½¨è¿¹æ„å»ºå™¨é€‰é¡¹å¯å°†ç»†åˆ†æ‰«æç´¯ç§¯åˆ°å°†ç”¨äºæ‰«æåŒ¹é…çš„ç‚¹äº‘ä¸­ã€‚</p> </td><td>1</td></tr><tr><td style="width:153px;">num_point_clouds</td><td style="width:590px;"> <p style="margin-left:0pt;">è¦è®¢é˜…çš„ç‚¹äº‘è¯é¢˜çš„æ•°é‡ã€‚</p> <p style="margin-left:0pt;">åœ¨ä¸€ä¸ªæµ‹è·ä»ªçš„â€œpoints2â€è¯é¢˜ä¸Šè®¢é˜…sensor_msgs/PointCloud2</p> <p style="margin-left:0pt;">æˆ–è€…ä¸ºå¤šä¸ªæµ‹è·ä»ªè®¢é˜…è¯é¢˜â€œpoints2_1â€ï¼Œâ€œpoints2_2â€ç­‰ã€‚</p> </td><td>0</td></tr><tr><td style="width:153px;"> <p style="margin-left:0pt;">lookup_transform_timeout_sec</p> </td><td style="width:590px;">ä½¿ç”¨tf2æŸ¥æ‰¾å˜æ¢çš„è¶…æ—¶ç§’æ•°</td><td>0.2</td></tr><tr><td style="width:153px;">submap_publish_period_sec</td><td style="width:590px;">å‘å¸ƒsubmapçš„é—´éš”ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ï¼Œä¾‹å¦‚ï¼Œ 0.3ç§’</td><td>0.3</td></tr><tr><td style="width:153px;">pose_publish_period_sec</td><td style="width:590px;">å‘å¸ƒå§¿åŠ¿çš„é—´éš”ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ï¼Œä¾‹å¦‚ 5e-3ï¼Œé¢‘ç‡ä¸º200 Hzã€‚</td><td>5e-3</td></tr><tr><td style="width:153px;"> <p style="margin-left:0pt;">trajectory_publish_period_sec</p> </td><td style="width:590px;">ä»¥ç§’ä¸ºå•ä½å‘å¸ƒè½¨è¿¹æ ‡è®°çš„æ—¶é—´é—´éš”ï¼Œä¾‹å¦‚ï¼Œ 30e-3æŒç»­30æ¯«ç§’</td><td>30e-3</td></tr></tbody></table><h2 id="urdfæ–‡ä»¶ä¸­çš„ä¸€äº›é—®é¢˜"><a href="#urdfæ–‡ä»¶ä¸­çš„ä¸€äº›é—®é¢˜" class="headerlink" title="urdfæ–‡ä»¶ä¸­çš„ä¸€äº›é—®é¢˜"></a>urdfæ–‡ä»¶ä¸­çš„ä¸€äº›é—®é¢˜</h2><ul><li><p><strong>æŠŠæ‰€æœ‰çš„åæ ‡ç³»è½¬åŒ–åˆ°ä¸€èµ·å»æ²¡ç”¨ï¼Œç›¸æœºå’Œé›·è¾¾æœ¬èº«çš„åæ ‡ç³»æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œå°±åº”è¯¥åœ¨urdfä¸­æè¿°æˆä»€ä¹ˆæ ·å­ã€‚</strong></p></li><li><p><strong>urdfä¸­çš„rpyæ˜¯ç»•xyzè½´æ—‹è½¬ï¼Œå¹¶ä¸”æ˜¯å®šè½´ï¼ï¼ï¼</strong></p><p>ç»•åŠ¨è½´z-y-xæ—‹è½¬çš„æ˜¯Eulerè§’(ypr)</p></li><li><p><strong>imuå’Œé›·è¾¾æ˜¯ç»‘å®šçš„ï¼Œè½¬ä¸€ä¸ªçš„åæ ‡ç³»ï¼Œå¦å¤–ä¸€ä¸ªä¹Ÿä¼šè·Ÿç€è½¬</strong></p></li></ul><h2 id="ä½¿ç”¨cartographerå»ºå›¾"><a href="#ä½¿ç”¨cartographerå»ºå›¾" class="headerlink" title="ä½¿ç”¨cartographerå»ºå›¾"></a>ä½¿ç”¨cartographerå»ºå›¾</h2><blockquote><p>å»ºå›¾ã€å¯¼å…¥ä¿å­˜æœ¬åœ°çš„åœ°å›¾ã€å¯¼å…¥åœ°å›¾æ—¶å¸¦å…¥åˆå§‹çš„ä½å§¿</p></blockquote><h4 id="ä¿å­˜åœ°å›¾åˆ°æœ¬åœ°"><a href="#ä¿å­˜åœ°å›¾åˆ°æœ¬åœ°" class="headerlink" title="ä¿å­˜åœ°å›¾åˆ°æœ¬åœ°"></a>ä¿å­˜åœ°å›¾åˆ°æœ¬åœ°</h4><p>1ã€Finish the first trajectory. No further data will be accepted on it.</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosservice call /finish_trajectory <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>2ã€Ask Cartographer to serialize its current state.</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosservice call /write_state <span class="token string">"{filename: '<span class="token variable">${<span class="token environment constant">HOME</span>}</span>/Downloads/mapName.pbstream'}"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>3ã€transform pbstream to pgm and yaml</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">roslaunch cartographer_ros assets_writer_ros_map.launch bag_filenames:<span class="token operator">=</span><span class="token variable">${<span class="token environment constant">HOME</span>}</span>/Downloads/***.bag pose_graph_filename:<span class="token operator">=</span><span class="token variable">${<span class="token environment constant">HOME</span>}</span>/Downloads/***.pbstream<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>or</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosrun cartographer_ros cartographer_pbstream_to_ros_map <span class="token parameter variable">-map_filestem</span><span class="token operator">=</span>/home/lqx/Downloads/savemap <span class="token parameter variable">-pbstream_filename</span><span class="token operator">=</span>/home/lqx/Downloads/***.pbstream <span class="token parameter variable">-resolution</span><span class="token operator">=</span><span class="token number">0.05</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="ä»æœ¬åœ°å¯¼å…¥åœ°å›¾"><a href="#ä»æœ¬åœ°å¯¼å…¥åœ°å›¾" class="headerlink" title="ä»æœ¬åœ°å¯¼å…¥åœ°å›¾"></a>ä»æœ¬åœ°å¯¼å…¥åœ°å›¾</h4><blockquote><p>cartographer pure localization</p></blockquote><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cartographer_node<span class="token punctuation">"</span></span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cartographer_ros<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cartographer_node<span class="token punctuation">"</span></span> <span class="token attr-name">args</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>-load_state_filename $MAP_NAME.pbstream<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸‹é¢è¿™ä¸ªä¸å¤ªæ¸…æ¥šï¼Œä¼¼ä¹ä¸éœ€è¦</p><pre class="line-numbers language-lua" data-language="lua"><code class="language-lua">TRAJECTORY_BUILDER<span class="token punctuation">.</span>pure_localization <span class="token operator">=</span> <span class="token keyword">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="å¸¦å…¥åˆå§‹ä½å§¿ä¿¡æ¯"><a href="#å¸¦å…¥åˆå§‹ä½å§¿ä¿¡æ¯" class="headerlink" title="å¸¦å…¥åˆå§‹ä½å§¿ä¿¡æ¯"></a>å¸¦å…¥åˆå§‹ä½å§¿ä¿¡æ¯</h4><blockquote><p>cartographer pure localization initial pose</p></blockquote><p>åœ¨launchæ–‡ä»¶ä¸­åŠ å…¥ <code>        -start_trajectory_with_default_topics=false</code>ï¼Œæœ€åçš„æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-none"><code class="language-none">  &lt;node name="cartographer_node"        pkg="cartographer_ros"        type="cartographer_node"        args="-configuration_directory $(find cartographer_ros_launcher)/configuration_files -configuration_basename cartographer.lua -load_state_filename /home/lqx/Downloads/2021_map.pbstream -start_trajectory_with_default_topics=false"        output="screen"&gt;  &lt;/node&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è®¾ç½®åˆå§‹ä½å§¿æ—¶ï¼Œéœ€è¦æ³¨æ„å››å…ƒæ•°çš„å½’ä¸€åŒ–ï¼Œå¹¶ä¸”mapåæ ‡æ˜¯å»ºå›¾çš„æ—¶å€™å°±ç¡®å®šäº†çš„ã€‚ä½¿ç”¨çš„æŒ‡ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rosservice call /start_trajectory <span class="token string">"configuration_directory: '/home/lqx/catkin_cv/src/cartographer_ros_launcher/configuration_files'configuration_basename: 'cartographer.lua'use_initial_pose: trueinitial_pose:  position: {x: 1.0, y: -1.5, z: 0.0}  orientation: {x: 0, y: 0, z: 0, w: 1}relative_to_trajectory_id: 0"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¤šæœºååŒï¼Œå…±ç”¨ä¸€å¼ åœ°å›¾"><a href="#å¤šæœºååŒï¼Œå…±ç”¨ä¸€å¼ åœ°å›¾" class="headerlink" title="å¤šæœºååŒï¼Œå…±ç”¨ä¸€å¼ åœ°å›¾"></a>å¤šæœºååŒï¼Œå…±ç”¨ä¸€å¼ åœ°å›¾</h2><h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><ul><li>å•æœºå™¨äººçš„é—­ç¯æ£€æµ‹ï¼Œä¿®æ­£è¯¯å·®ç´¯è®¡ï¼Œä¿è¯åœ°å›¾ä¸€è‡´æ€§</li><li>å®ç°åœºæ™¯è¯†åˆ«ï¼Œä»è€Œå»ºç«‹å¤šæœºå™¨äººé—´çš„çº¦æŸ</li><li>å‹ç¼©åœ°å›¾æ•°æ®ï¼Œä½¿å…¶æ»¡è¶³å¸¦å®½æœ‰é™çš„æœºå™¨äººé—´çš„æ•°æ®å…±äº«</li></ul><p><strong>To be continuedâ€¦â€¦</strong></p>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¿€å…‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›¾ç‰‡ä¸Šæ‰“å°å¸§ç‡ç­‰ä¿¡æ¯</title>
      <link href="2021/02/24/opencv-notes-1/"/>
      <url>2021/02/24/opencv-notes-1/</url>
      
        <content type="html"><![CDATA[<h1 id="å›¾ç‰‡ä¸Šæ‰“å°å¸§ç‡ç­‰ä¿¡æ¯"><a href="#å›¾ç‰‡ä¸Šæ‰“å°å¸§ç‡ç­‰ä¿¡æ¯" class="headerlink" title="å›¾ç‰‡ä¸Šæ‰“å°å¸§ç‡ç­‰ä¿¡æ¯"></a>å›¾ç‰‡ä¸Šæ‰“å°å¸§ç‡ç­‰ä¿¡æ¯</h1><h2 id="è®¡ç®—æŸä¸€ä¸ªç®—æ³•çš„å¸§ç‡"><a href="#è®¡ç®—æŸä¸€ä¸ªç®—æ³•çš„å¸§ç‡" class="headerlink" title="è®¡ç®—æŸä¸€ä¸ªç®—æ³•çš„å¸§ç‡"></a>è®¡ç®—æŸä¸€ä¸ªç®—æ³•çš„å¸§ç‡</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// Start timer</span><span class="token keyword">double</span> timer <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¾…æµ‹ç®—æ³•</span><span class="token function">algorithm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Calculate Frames per second (FPS)</span><span class="token keyword">float</span> fps <span class="token operator">=</span> <span class="token function">getTickFrequency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> <span class="token function">getTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> timer<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä½¿ç”¨putText-å‡½æ•°å°†ä¿¡æ¯ç›´æ¥è¾“å‡ºåˆ°å›¾ç‰‡ä¸Š"><a href="#ä½¿ç”¨putText-å‡½æ•°å°†ä¿¡æ¯ç›´æ¥è¾“å‡ºåˆ°å›¾ç‰‡ä¸Š" class="headerlink" title="ä½¿ç”¨putText()å‡½æ•°å°†ä¿¡æ¯ç›´æ¥è¾“å‡ºåˆ°å›¾ç‰‡ä¸Š"></a>ä½¿ç”¨putText()å‡½æ•°å°†ä¿¡æ¯ç›´æ¥è¾“å‡ºåˆ°å›¾ç‰‡ä¸Š</h2><h3 id="å‡½æ•°åŸå‹"><a href="#å‡½æ•°åŸå‹" class="headerlink" title="å‡½æ•°åŸå‹"></a>å‡½æ•°åŸå‹</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> cv<span class="token double-colon punctuation">::</span><span class="token function">putText</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat<span class="token operator">&amp;</span> img<span class="token punctuation">,</span> <span class="token comment">// å¾…ç»˜åˆ¶çš„å›¾åƒ</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> text<span class="token punctuation">,</span> <span class="token comment">// å¾…ç»˜åˆ¶çš„æ–‡å­—</span>cv<span class="token double-colon punctuation">::</span>Point origin<span class="token punctuation">,</span> <span class="token comment">// æ–‡æœ¬æ¡†çš„å·¦ä¸‹è§’</span><span class="token keyword">int</span> fontFace<span class="token punctuation">,</span> <span class="token comment">// å­—ä½“ (å¦‚cv::FONT_HERSHEY_PLAIN)</span><span class="token keyword">double</span> fontScale<span class="token punctuation">,</span> <span class="token comment">// å°ºå¯¸å› å­ï¼Œå€¼è¶Šå¤§æ–‡å­—è¶Šå¤§</span>cv<span class="token double-colon punctuation">::</span>Scalar color<span class="token punctuation">,</span> <span class="token comment">// çº¿æ¡çš„é¢œè‰²ï¼ˆRGBï¼‰</span><span class="token keyword">int</span> thickness <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// çº¿æ¡å®½åº¦</span><span class="token keyword">int</span> lineType <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token comment">// çº¿å‹ï¼ˆ4é‚»åŸŸæˆ–8é‚»åŸŸï¼Œé»˜è®¤8é‚»åŸŸï¼‰</span><span class="token keyword">bool</span> bottomLeftOrigin <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// true='origin at lower left'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä½¿ç”¨ç¤ºä¾‹"><a href="#ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h3><p>åœ¨å›¾ç‰‡å·¦ä¸Šè§’æ˜¾ç¤ºä½¿ç”¨çš„ç®—æ³•ï¼Œå¸§ç‡ï¼Œæ˜¯å¦æ£€æµ‹åˆ°ç›®æ ‡ç‰©</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token function">putText</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> detectionType<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FONT_HERSHEY_SIMPLEX<span class="token punctuation">,</span> <span class="token number">0.75</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">170</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">putText</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> <span class="token string">"FPS : "</span> <span class="token operator">+</span> <span class="token function">to_string</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">(</span>fps<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FONT_HERSHEY_SIMPLEX<span class="token punctuation">,</span> <span class="token number">0.75</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">170</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span>detection_failed<span class="token punctuation">)</span><span class="token function">putText</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> <span class="token string">" Detection failed"</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FONT_HERSHEY_SIMPLEX<span class="token punctuation">,</span> <span class="token number">0.75</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸‹é¢æ˜¯æ•ˆæœå›¾ï¼š</p><p><img src="/images/OpenCV-Notes/1-1.png"></p><p><img src="/images/OpenCV-Notes/1-2.png"></p>]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenCV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç†è§£SVMçš„ä¸‰å±‚å¢ƒç•Œ</title>
      <link href="2021/02/23/opencv-notes-4/"/>
      <url>2021/02/23/opencv-notes-4/</url>
      
        <content type="html"><![CDATA[<h1 id="ç†è§£SVMçš„ä¸‰å±‚å¢ƒç•Œ"><a href="#ç†è§£SVMçš„ä¸‰å±‚å¢ƒç•Œ" class="headerlink" title="ç†è§£SVMçš„ä¸‰å±‚å¢ƒç•Œ"></a>ç†è§£SVMçš„ä¸‰å±‚å¢ƒç•Œ</h1><p>SVMæ˜¯ä»€ä¹ˆ? å…ˆæ¥çœ‹çœ‹ç»´åŸºç™¾ç§‘ä¸Šå¯¹<a href="https://link.zhihu.com/?target=https://zh.wikipedia.org/wiki/%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA">SVMçš„å®šä¹‰</a>:</p><blockquote><p>æ”¯æŒå‘é‡æœºï¼ˆè‹±è¯­ï¼šsupport vector machineï¼Œå¸¸ç®€ç§°ä¸ºSVMï¼Œåˆåæ”¯æŒå‘é‡ç½‘ç»œï¼‰æ˜¯åœ¨åˆ†ç±»ä¸å›å½’åˆ†æä¸­åˆ†ææ•°æ®çš„ç›‘ç£å¼å­¦ä¹ æ¨¡å‹ä¸ç›¸å…³çš„å­¦ä¹ ç®—æ³•ã€‚ç»™å®šä¸€ç»„è®­ç»ƒå®ä¾‹ï¼Œæ¯ä¸ªè®­ç»ƒå®ä¾‹è¢«æ ‡è®°ä¸ºå±äºä¸¤ä¸ªç±»åˆ«ä¸­çš„ä¸€ä¸ªæˆ–å¦ä¸€ä¸ªï¼ŒSVMè®­ç»ƒç®—æ³•åˆ›å»ºä¸€ä¸ªå°†æ–°çš„å®ä¾‹åˆ†é…ç»™ä¸¤ä¸ªç±»åˆ«ä¹‹ä¸€çš„æ¨¡å‹ï¼Œä½¿å…¶æˆä¸ºéæ¦‚ç‡äºŒå…ƒçº¿æ€§åˆ†ç±»å™¨ã€‚SVMæ¨¡å‹æ˜¯å°†å®ä¾‹è¡¨ç¤ºä¸ºç©ºé—´ä¸­çš„ç‚¹ï¼Œè¿™æ ·æ˜ å°„å°±ä½¿å¾—å•ç‹¬ç±»åˆ«çš„å®ä¾‹è¢«å°½å¯èƒ½å®½çš„æ˜æ˜¾çš„é—´éš”åˆ†å¼€ã€‚ç„¶åï¼Œå°†æ–°çš„å®ä¾‹æ˜ å°„åˆ°åŒä¸€ç©ºé—´ï¼Œå¹¶åŸºäºå®ƒä»¬è½åœ¨é—´éš”çš„å“ªä¸€ä¾§æ¥é¢„æµ‹æ‰€å±ç±»åˆ«ã€‚</p></blockquote><p>å¦‚æœä»æœªæ¥è§¦SVMçš„è¯ï¼Œç»´åŸºçš„è¿™ä¸€å¤§æ®µè§£é‡Šè‚¯å®šä¼šè®©ä½ ä¸€å¤´é›¾æ°´ã€‚ç®€å•ç‚¹è®²ï¼ŒSVMå°±æ˜¯ä¸€ç§äºŒç±»åˆ†ç±»æ¨¡å‹ï¼Œä»–çš„åŸºæœ¬æ¨¡å‹æ˜¯çš„å®šä¹‰åœ¨ç‰¹å¾ç©ºé—´ä¸Šçš„<strong>é—´éš”æœ€å¤§</strong>çš„çº¿æ€§åˆ†ç±»å™¨ï¼ŒSVMçš„å­¦ä¹ ç­–ç•¥å°±æ˜¯é—´éš”æœ€å¤§åŒ–ã€‚</p><p>ä¸‹é¢æ˜¯æˆ‘ä»ç½‘ä¸Šæ‰¾åˆ°çš„ä¸€ç¯‡è®²è§£SVMæ¯”è¾ƒå¥½çš„æ–‡ç« ï¼š</p><object data="/pdf/ç†è§£SVMçš„ä¸‰å±‚å¢ƒç•Œ.pdf" type="application/pdf" width="100%" height="1000"></object>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SLAMé—®é¢˜çš„æ•°å­¦è¡¨è¿°</title>
      <link href="2021/02/05/slam-learning-1/"/>
      <url>2021/02/05/slam-learning-1/</url>
      
        <content type="html"><![CDATA[<h1 id="SLAMé—®é¢˜çš„æ•°å­¦è¡¨è¿°"><a href="#SLAMé—®é¢˜çš„æ•°å­¦è¡¨è¿°" class="headerlink" title="SLAMé—®é¢˜çš„æ•°å­¦è¡¨è¿°"></a>SLAMé—®é¢˜çš„æ•°å­¦è¡¨è¿°</h1><blockquote><p>æœ¬æ–‡æ˜¯ä½œè€…å¯¹äºSLAMé—®é¢˜æ•°å­¦è¡¨è¿°çš„ä¸€äº›ç†è§£ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œéå¸¸éå¸¸éå¸¸æ¬¢è¿æŒ‡æ­£ï¼</p></blockquote><h2 id="ç»å…¸SLAMæ¨¡å‹"><a href="#ç»å…¸SLAMæ¨¡å‹" class="headerlink" title="ç»å…¸SLAMæ¨¡å‹"></a>ç»å…¸SLAMæ¨¡å‹</h2><p>ç»å…¸SLAMæ¨¡å‹ç”±ä¸€ä¸ª<strong>è¿åŠ¨æ–¹ç¨‹</strong>å’Œä¸€ä¸ª<strong>è§‚æµ‹æ–¹ç¨‹</strong>æ„æˆï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br>$$<br>\begin{cases}<br>x_k &amp;= \ f(x_{k-1},u_k,w_k) \\<br>z_{k,j} &amp;= \ h(y_j,x_k,v_{k,j})<br>\end{cases}<br>$$<br>æœ‰æ—¶å€™ä¹Ÿä¼šå†™æˆä¸‹é¢è¿™æ ·çš„å½¢å¼ï¼š<br>$$<br>\begin{cases}<br>x_k &amp;= \ f(x_{k-1},u_k) +w_k \\<br>z_{k,j} &amp;= \ h(y_j,x_k)+v_{k,j}<br>\end{cases}<br>$$<br>è¿™ä¸¤ç§å½¢å¼æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€æ ·çš„ã€‚å…¶ä¸­ï¼Œ$ x_k $è¡¨ç¤ºç¬¬kæ¬¡çš„ä½ç½®æˆ–è€…ä½å§¿ï¼Œ$ u_k $è¡¨ç¤ºç¬¬kæ¬¡ä¼ æ„Ÿå™¨çš„è¯»æ•°æˆ–è€…è¾“å…¥ï¼Œ$ w_k $è¡¨ç¤ºç¬¬kæ¬¡è¿åŠ¨è¿‡ç¨‹ä¸­çš„å™ªå£°ï¼›è€Œ$ y_j $ä¸ºè§‚æµ‹åˆ°çš„è·¯æ ‡ç‚¹jï¼Œ$ z_{k,j} $åˆ™è¡¨ç¤ºç¬¬kæ¬¡è§‚æµ‹ä¸­å¯¹äºè·¯æ ‡ç‚¹jæ‰€å¾—åˆ°çš„è§‚æµ‹ç»“æœï¼Œ$ v_{k,j} $ä¸ºæœ¬æ¬¡è§‚æµ‹è¿‡ç¨‹ä¸­çš„å™ªå£°ã€‚è€Œä¸Šé¢çš„å‡½æ•° $ f $ å’Œ $ h $ ï¼Œéœ€è¦æ ¹æ®å…·ä½“çš„æƒ…å†µæ¥ç¡®å®šã€‚</p><p>ä¹‹åï¼Œæˆ‘ä»¬å°†ä»¥è§†è§‰SLAMä¸ºä¾‹æ¥æ›´æ·±å…¥çš„ç†è§£SLAMçš„æ•°å­¦è¡¨è¿°ã€‚</p><h2 id="é’ˆå­”ç›¸æœºæ¨¡å‹"><a href="#é’ˆå­”ç›¸æœºæ¨¡å‹" class="headerlink" title="é’ˆå­”ç›¸æœºæ¨¡å‹"></a>é’ˆå­”ç›¸æœºæ¨¡å‹</h2><p>è€ƒè™‘åˆ°è§†è§‰SLAMçš„ä¼ æ„Ÿå™¨æ˜¯ç›¸æœºï¼Œå¹¶ä¸”é€šå¸¸ç¬¦åˆé’ˆå­”ç›¸æœºæ¨¡å‹ã€‚æ‰€ä»¥åœ¨ç»§ç»­æ¢è®¨ä¹‹å‰ï¼Œæˆ‘ä»¬å°†å¯¹é’ˆå­”ç›¸æœºæ¨¡å‹åšä¸€ä¸ªç®€å•çš„ä»‹ç»ã€‚</p><h3 id="ä»ç›¸æœºåæ ‡ç³»åˆ°å›¾åƒåæ ‡ç³»"><a href="#ä»ç›¸æœºåæ ‡ç³»åˆ°å›¾åƒåæ ‡ç³»" class="headerlink" title="ä»ç›¸æœºåæ ‡ç³»åˆ°å›¾åƒåæ ‡ç³»"></a>ä»ç›¸æœºåæ ‡ç³»åˆ°å›¾åƒåæ ‡ç³»</h3><p>å¦‚ä¸‹å›¾ï¼Œç›¸æœºåæ ‡ç³»ä¸‹çš„ä¸€ç‚¹$ P(X, Y, Z) $ï¼Œé€šè¿‡å°å­”æˆåƒåœ¨ç›¸æœºçš„ç‰©ç†æˆåƒå¹³é¢ä¸Šï¼Œè®°ä¸º$ Pâ€™(Xâ€™, Yâ€™) $ã€‚</p><p><img src="/images/slam-learning/1-1.png"></p><p>æˆ‘ä»¬èƒ½å¤Ÿå¾ˆå®¹æ˜“çš„å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š<br>$$<br>\frac Zf=- \frac X{Xâ€™}=- \frac Y{Yâ€™}<br>$$<br>ç”±äºæˆ‘ä»¬é€šå¸¸çœ‹åˆ°çš„åƒéƒ½æ˜¯æ­£çš„ï¼Œå¹¶ä¸”ä¸ºäº†å…¬å¼çš„ç®€æ´ï¼Œæˆ‘ä»¬å¯¹ä¸Šå¼åŠ ä»¥æ•´ç†ï¼Œå¾—åˆ°ï¼š<br>$$<br>Xâ€™=f \frac XZ \\<br>Yâ€™=f \frac YZ<br>$$</p><h3 id="ä»å›¾åƒåæ ‡ç³»åˆ°åƒç´ åæ ‡ç³»"><a href="#ä»å›¾åƒåæ ‡ç³»åˆ°åƒç´ åæ ‡ç³»" class="headerlink" title="ä»å›¾åƒåæ ‡ç³»åˆ°åƒç´ åæ ‡ç³»"></a>ä»å›¾åƒåæ ‡ç³»åˆ°åƒç´ åæ ‡ç³»</h3><p>äº‹å®ä¸Šï¼Œè®¡ç®—æœºçœ‹åˆ°çš„å›¾åƒéƒ½æ˜¯ç”±åƒç´ æ„æˆçš„ï¼Œä»å›¾åƒåæ ‡ç³»åˆ°åƒç´ åæ ‡ç³»è¿˜éœ€è¦ç»è¿‡ä¸€æ¬¡è½¬åŒ–ã€‚è¿™é‡Œæˆ‘ä»¬è®°åƒç´ åæ ‡ä¸º$ Pâ€™â€™(u,v) $ã€‚<br>$$<br>\begin{cases}<br>u=\alpha Xâ€™+c_x \\<br>v=\beta Yâ€™+c_y<br>\end{cases}<br>$$<br>å…¶ä¸­$ \alpha $å’Œ$ \beta $åˆ†åˆ«è¡¨ç¤ºxè½´å’Œyè½´çš„ç¼©æ”¾ç³»æ•°ï¼Œè€Œ$ c_x $å’Œ$ c_y $åˆ™è¡¨ç¤ºå¹³ç§»é‡ã€‚</p><p>æˆ‘ä»¬å°†ä¹‹å‰å¾—åˆ°çš„ç»“è®ºä»£å…¥ä¸Šå¼ï¼Œå¯ä»¥å¾—åˆ°ï¼š<br>$$<br>\begin{cases}<br>u=f_x\frac XZ+c_x \\<br>v=f_y\frac YZ+c_y<br>\end{cases}<br>$$<br>å…¶çŸ©é˜µå½¢å¼å¯ä»¥è¡¨ç¤ºä¸ºï¼š<br>$$<br>\begin{pmatrix} u\\v\\1 \end{pmatrix}=\frac1Z\begin{pmatrix}f_x &amp; 0 &amp; c_x \\ 0 &amp; f_y &amp; c_y\\0 &amp; 0 &amp; 1 \end{pmatrix}<br>\begin{pmatrix}X\\Y\\Z\end{pmatrix}<br>\overset{\text{def}}{=}\frac 1ZKP<br>$$<br>ä½†æˆ‘ä»¬é€šå¸¸ä½¿ç”¨ä¸‹é¢çš„å…¬å¼æ¥è¡¨ç¤ºï¼Œå®ƒçœ‹ä¸Šå»æ›´ç®€æ´ï¼š<br>$$<br>Z\begin{pmatrix} u\\v\\1 \end{pmatrix}=\begin{pmatrix}f_x &amp; 0 &amp; c_x \\ 0 &amp; f_y &amp; c_y\\0 &amp; 0 &amp; 1 \end{pmatrix}<br>\begin{pmatrix}X\\Y\\Z\end{pmatrix}<br>\overset{\text{def}}{=}KP<br>$$<br>å·¦è¾¹çš„æ˜¯é½æ¬¡åæ ‡ï¼Œè€Œå³è¾¹çš„æ˜¯éé½æ¬¡åæ ‡ã€‚æˆ‘ä»¬æŠŠä¸­é—´çš„çŸ©é˜µç§°ä¸ºå†…å‚æ•°ï¼Œè®°ä¸ºKï¼Œå†…å‚é€šå¸¸åœ¨ç›¸æœºç”Ÿäº§ä¹‹åå°±å·²ç»å›ºå®šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥è¯¢æˆ–è€…æ ‡å®šè·å¾—ç›¸æœºçš„å†…å‚ã€‚</p><h3 id="ä»ä¸–ç•Œåæ ‡ç³»åˆ°ç›¸æœºåæ ‡ç³»"><a href="#ä»ä¸–ç•Œåæ ‡ç³»åˆ°ç›¸æœºåæ ‡ç³»" class="headerlink" title="ä»ä¸–ç•Œåæ ‡ç³»åˆ°ç›¸æœºåæ ‡ç³»"></a>ä»ä¸–ç•Œåæ ‡ç³»åˆ°ç›¸æœºåæ ‡ç³»</h3><p>ä¸Šé¢æˆ‘ä»¬ä»…ä»…æè¿°äº†ç‰©ä½“ä»ç›¸æœºåæ ‡ç³»åˆ°åƒç´ åæ ‡ç³»çš„è½¬åŒ–ã€‚è€Œåœ¨SLAMä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦è®¾ç½®ä¸€ä¸ªä¸–ç•Œåæ ‡ç³»ä»¥æè¿°ç›¸æœºæˆ–æœºå™¨äººçš„ä½ç½®ä¿¡æ¯ã€‚å› æ­¤ä»ç‰©ä½“è¢«è§‚æµ‹ï¼Œå†åˆ°è·å¾—è§‚æµ‹ç»“æœï¼Œå³ç‰©ä½“çš„åƒç´ åæ ‡ï¼Œä¸­é—´è¿˜æœ‰ä¸€ä¸ªè½¬åŒ–è¿‡ç¨‹ã€‚æˆ‘ä»¬ä½¿ç”¨å¦‚ä¸‹çš„ä¸€ä¸ªå¼å­è¿›è¡Œæè¿°ï¼š<br>$$<br>ZP_{uv}=Z\begin{pmatrix} u\\v\\1 \end{pmatrix}=KP=K(RP_w+t)=KTP_w<br>$$<br>è¿™é‡Œï¼Œ$ R $æ˜¯æ—‹è½¬çŸ©é˜µï¼Œ$ t $æ˜¯å¹³ç§»çŸ©é˜µï¼Œ$ T= \begin{pmatrix} R &amp; t \\ 0 &amp; 1 \end{pmatrix} $ã€‚å¯ä»¥ç†è§£ä¸ºä½¿ç”¨ä¸–ç•Œåæ ‡ç³»æè¿°çš„ç‚¹$ P_w $ç»è¿‡æ—‹è½¬å˜åŒ–å’Œå¹³ç§»å˜åŒ–ï¼Œå¾—åˆ°äº†ä½¿ç”¨ç›¸æœºåæ ‡ç³»æè¿°çš„ç‚¹$ P $ã€‚</p><p><strong>å…¶ä¸­Rï¼Œt æˆ–Tè¢«ç§°ä¸ºå¤–å‚ï¼Œè€Œå¤–å‚æ­£æ˜¯SLAMä¼°è®¡çš„ç›®æ ‡ã€‚</strong></p><h2 id="æ›´å…·ä½“çš„æ•°å­¦è¡¨è¿°"><a href="#æ›´å…·ä½“çš„æ•°å­¦è¡¨è¿°" class="headerlink" title="æ›´å…·ä½“çš„æ•°å­¦è¡¨è¿°"></a>æ›´å…·ä½“çš„æ•°å­¦è¡¨è¿°</h2><p>å†å›åˆ°æœ€å¼€å§‹æåˆ°çš„è¿åŠ¨æ–¹ç¨‹å’Œè§‚æµ‹æ–¹ç¨‹ï¼š<br>$$<br>\begin{cases}<br>x_k &amp;= \ f(x_{k-1},u_k) +w_k \\<br>z_{k,j} &amp;= \ h(y_j,x_k)+v_{k,j}<br>\end{cases}<br>$$</p><p>æˆ‘ä»¬çŸ¥é“æœºå™¨äººæœ‰å…­ä¸ªè‡ªç”±åº¦ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠ$ x_k $ç†è§£ä¸ºç¬¬kæ¬¡è§‚æµ‹æ—¶æœºå™¨äººçš„ä½å§¿ï¼Œå®ƒæ˜¯å…­ç»´çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‘é‡è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å˜æ¢çŸ©é˜µè¡¨ç¤ºï¼Œå³ä¸Šé¢çš„$ T $ï¼ˆå¯ä»¥è®¤ä¸ºå½“å‰æœºå™¨äººçš„ä½å§¿æ˜¯ç”±æœºå™¨äººåœ¨åŸç‚¹ç»è¿‡$ R $æ—‹è½¬å’Œ$ t $å¹³ç§»å¾—åˆ°çš„ï¼‰ã€‚æ­¤æ—¶è¿åŠ¨æ–¹ç¨‹æè¿°çš„æ˜¯æœºå™¨äººåœ¨ç¬¬k-1æ¬¡è§‚æµ‹åï¼Œå¯¹å…¶ä¼ æ„Ÿå™¨è¾“å…¥$ u_k $ï¼Œä½¿æœºå™¨äººçš„ä½å§¿ä»$ x_{k-1} $å˜æ¢åˆ°äº†$ x_k $ï¼Œè€Œ$ w_k $åˆ™æ˜¯æ­¤æ¬¡è¿åŠ¨ä¸­çš„å™ªå£°ã€‚</p><p>è€Œæˆ‘ä»¬ä¸Šé¢è®²çš„é’ˆå­”ç›¸æœºæ¨¡å‹ï¼Œå®é™…ä¸Šå°±æ˜¯è§†è§‰SLAMä¸­çš„è§‚æµ‹æ¨¡å‹ã€‚å…¬å¼ä¸­$ y_j $å°±æ˜¯é’ˆå­”ç›¸æœºæ¨¡å‹ä¸­æˆ‘ä»¬è§‚æµ‹çš„ç‚¹$ P_w $ï¼Œè¡¨ç¤ºä¸–ç•Œåæ ‡ç³»ä¸‹è·¯æ ‡ç‚¹jçš„åæ ‡ï¼Œè€Œ$ z_{k,j} $å°±æ˜¯è§‚æµ‹çš„æœ€ç»ˆç»“æœâ€”â€”åƒç´ åæ ‡$ P_{uv} $ã€‚$ x_k $æ—¢æ˜¯æœºå™¨äººçš„ä½å§¿ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯æ¨¡å‹ä¸­çš„å¤–å‚$ T $ã€‚$ v_{k,j} $åˆ™æ˜¯æ­¤æ¬¡è§‚æµ‹ä¸­çš„å™ªå£°ã€‚</p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ç§æ›´å…·ä½“çš„å½¢å¼é‡å†™ä¸Šé¢çš„è¿åŠ¨æ–¹ç¨‹å’Œè§‚æµ‹æ–¹ç¨‹ï¼š<br>$$<br>\begin{cases}<br>T_k &amp;= \ f(T_{k-1},u_k) +w_k \\<br>s_j P_{uv(k,j)} &amp;= \ K(R_kP_{w(j)}+t_k)+v_{k,j}=KT_kP_{w(j)}+v_{k,j}<br>\end{cases}<br>$$<br>å…¶ä¸­$ s_j $æ˜¯è·¯æ ‡ç‚¹jåˆ°ç›¸æœºå…‰å¿ƒçš„è·ç¦»ã€‚</p><h2 id="å¯¹SLAMé—®é¢˜çš„æ€»ç»“"><a href="#å¯¹SLAMé—®é¢˜çš„æ€»ç»“" class="headerlink" title="å¯¹SLAMé—®é¢˜çš„æ€»ç»“"></a>å¯¹SLAMé—®é¢˜çš„æ€»ç»“</h2><p>é€šå¸¸ï¼Œç”±äºå„ç§å¤æ‚å› ç´ çš„å½±å“ï¼Œæˆ‘ä»¬æ— æ³•ç›´æ¥æ±‚è§£æœºå™¨äººå®é™…çš„è¿åŠ¨æ–¹ç¨‹ï¼Œä¹Ÿæ— æ³•é€šè¿‡ç†è®ºä¸Šçš„è¿åŠ¨æ–¹ç¨‹ç²¾ç¡®è®¡ç®—å‡ºæœºå™¨äººçš„ä½å§¿ï¼Œå› æ­¤æˆ‘ä»¬é€šè¿‡æ±‚è§£è§‚æµ‹æ–¹ç¨‹æ¥ç›¸å¯¹ç²¾ç¡®åœ°è®¡ç®—æœºå™¨äººçš„ä½ç½®ä¿¡æ¯ã€‚</p><p>åœ¨è§†è§‰SLAMä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥è¡¨è¿°ä¸ºï¼šå·²çŸ¥ç›¸æœºå†…å‚$ K $ï¼Œç›¸æœºè§‚æµ‹åˆ°çš„ç›®æ ‡ç‰©åæ ‡$ P_w $ï¼Œç›®æ ‡ç‰©è·ç¦»ç›¸æœºçš„è·ç¦»$ s $ä»¥åŠå®ƒåœ¨å›¾åƒä¸Šçš„åƒç´ åæ ‡$ P_{uv} $ï¼Œæ±‚è§£æœºå™¨äººçš„ä½å§¿$ T $ã€‚</p><p>å½“ç„¶ï¼Œç”±äºè§‚æµ‹æ•°æ®åŒæ ·å—å™ªå£°å½±å“ï¼Œæœ€ç»ˆå¾—åˆ°çš„ä½å§¿ä¹Ÿä¸æ˜¯å‡†ç¡®çš„ï¼Œè¿˜éœ€è¦é€šè¿‡ä¸€äº›å¤„ç†æ¥å‡å°è¯¯å·®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> slam </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è§†è§‰SLAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ›å»ºæŒ‡å®šOpenCVç‰ˆæœ¬çš„ROSå·¥ç¨‹</title>
      <link href="2020/12/19/opencv-notes-3/"/>
      <url>2020/12/19/opencv-notes-3/</url>
      
        <content type="html"><![CDATA[<h1 id="åˆ›å»ºæŒ‡å®šOpenCVç‰ˆæœ¬çš„ROSå·¥ç¨‹"><a href="#åˆ›å»ºæŒ‡å®šOpenCVç‰ˆæœ¬çš„ROSå·¥ç¨‹" class="headerlink" title="åˆ›å»ºæŒ‡å®šOpenCVç‰ˆæœ¬çš„ROSå·¥ç¨‹"></a>åˆ›å»ºæŒ‡å®šOpenCVç‰ˆæœ¬çš„ROSå·¥ç¨‹</h1><h3 id="ä¸€ã€åˆ›å»ºå·¥ä½œç©ºé—´å’Œç¨‹åºåŒ…"><a href="#ä¸€ã€åˆ›å»ºå·¥ä½œç©ºé—´å’Œç¨‹åºåŒ…" class="headerlink" title="ä¸€ã€åˆ›å»ºå·¥ä½œç©ºé—´å’Œç¨‹åºåŒ…"></a>ä¸€ã€åˆ›å»ºå·¥ä½œç©ºé—´å’Œç¨‹åºåŒ…</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/catkin_cv/src<span class="token builtin class-name">cd</span> catkin_cv/catkin_make<span class="token builtin class-name">source</span> devel/setup.sh<span class="token builtin class-name">cd</span> srccatkin_create_pkg ballseeker roscpp rospy std_msgs sensor_msgs cv_bridge image_transport dynamic_reconfigure<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="äºŒã€åˆ›å»ºå¹¶ä¸”ç¼–å†™cppæ–‡ä»¶ä¸hppæ–‡ä»¶"><a href="#äºŒã€åˆ›å»ºå¹¶ä¸”ç¼–å†™cppæ–‡ä»¶ä¸hppæ–‡ä»¶" class="headerlink" title="äºŒã€åˆ›å»ºå¹¶ä¸”ç¼–å†™cppæ–‡ä»¶ä¸hppæ–‡ä»¶"></a>äºŒã€åˆ›å»ºå¹¶ä¸”ç¼–å†™cppæ–‡ä»¶ä¸hppæ–‡ä»¶</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">gedit ballseeker/include/ballseeker/seek.hppgedit ballseeker/src/seek.cppgedit ballseeker/src/seekernode.cpp<span class="token comment">#ä»£ç è§é™„å½•</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä¸‰ã€ä¿®æ”¹CMakeLists-txt"><a href="#ä¸‰ã€ä¿®æ”¹CMakeLists-txt" class="headerlink" title="ä¸‰ã€ä¿®æ”¹CMakeLists.txt"></a>ä¸‰ã€ä¿®æ”¹CMakeLists.txt</h3><p>åœ¨CMakeListsæœ€ååŠ ä¸Šï¼š</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token comment"># catkin_add_nosetests(test)</span><span class="token keyword">set</span><span class="token punctuation">(</span>OpenCV_DIR   /usr/local/share/OpenCV4<span class="token punctuation">)</span><span class="token keyword">find_package</span><span class="token punctuation">(</span>OpenCV REQUIRED<span class="token punctuation">)</span><span class="token keyword">add_library</span><span class="token punctuation">(</span><span class="token punctuation">${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span>  src/seek.cpp<span class="token punctuation">)</span><span class="token keyword">add_dependencies</span><span class="token punctuation">(</span>   <span class="token punctuation">${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span>    <span class="token punctuation">${</span><span class="token punctuation">${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span>_EXPORTED_TARGETS<span class="token punctuation">}</span>    <span class="token punctuation">${</span>catkin_EXPORTED_TARGETS<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>   <span class="token punctuation">${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span>   <span class="token punctuation">${</span>catkin_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">#add the publisher example  </span><span class="token keyword">add_executable</span><span class="token punctuation">(</span>seekernode src/seek.cpp include/ballseeker/seek.hpp src/seekernode.cpp<span class="token punctuation">)</span>  <span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>seekernode <span class="token punctuation">${</span>catkin_LIBRARIES<span class="token punctuation">}</span> <span class="token punctuation">${</span>OpenCV_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span>   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å››ã€ç¼–è¯‘ä¸è¿è¡Œ"><a href="#å››ã€ç¼–è¯‘ä¸è¿è¡Œ" class="headerlink" title="å››ã€ç¼–è¯‘ä¸è¿è¡Œ"></a>å››ã€ç¼–è¯‘ä¸è¿è¡Œ</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> catkin_cv/<span class="token builtin class-name">source</span> ~/catkin_cv/devel/setup.shcatkin_make<span class="token comment">#æ–°å¼€ä¸€ä¸ªç»ˆç«¯è¿è¡Œï¼š</span>roscore<span class="token comment">#å†å›ä¹‹å‰çš„ç»ˆç«¯è¿è¡Œï¼š</span>rosrun ballseeker seekernode<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="äº”ã€ç¼–å†™launchæ–‡ä»¶å¿«é€Ÿå¯åŠ¨"><a href="#äº”ã€ç¼–å†™launchæ–‡ä»¶å¿«é€Ÿå¯åŠ¨" class="headerlink" title="äº”ã€ç¼–å†™launchæ–‡ä»¶å¿«é€Ÿå¯åŠ¨"></a>äº”ã€ç¼–å†™launchæ–‡ä»¶å¿«é€Ÿå¯åŠ¨</h3><p>åœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/catkin_cv/src/ballseeker/launchgedit quickstart.launch<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>åœ¨quickstart.launchä¸­å†™å…¥ï¼š</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>launch</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span><span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>ballseeker<span class="token punctuation">"</span></span><span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>quickseeknode<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>seekernode<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>launch</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å›åˆ°ç»ˆç«¯å†è¿è¡Œï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> ~/catkin_cv/devel/setup.shroslaunch ballseeker quickstart.launch<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="å…­ã€dynamic-reconfigure"><a href="#å…­ã€dynamic-reconfigure" class="headerlink" title="å…­ã€dynamic_reconfigure"></a>å…­ã€dynamic_reconfigure</h3><p>ç•¥</p><h3 id="ä¸ƒã€è°ƒæ•´ä¸ä¿å­˜å‚æ•°"><a href="#ä¸ƒã€è°ƒæ•´ä¸ä¿å­˜å‚æ•°" class="headerlink" title="ä¸ƒã€è°ƒæ•´ä¸ä¿å­˜å‚æ•°"></a>ä¸ƒã€è°ƒæ•´ä¸ä¿å­˜å‚æ•°</h3><p>ç•¥</p><h3 id="å…«ã€é™„å½•ï¼ˆç¤ºä¾‹ä»£ç ï¼‰"><a href="#å…«ã€é™„å½•ï¼ˆç¤ºä¾‹ä»£ç ï¼‰" class="headerlink" title="å…«ã€é™„å½•ï¼ˆç¤ºä¾‹ä»£ç ï¼‰"></a>å…«ã€é™„å½•ï¼ˆç¤ºä¾‹ä»£ç ï¼‰</h3><blockquote><p>è¿™é‡Œçš„ä»£ç çš„ä½œç”¨æ˜¯è°ƒç”¨æ‘„åƒå¤´æ¥æ£€æµ‹å®ƒçœ‹åˆ°çš„ç½‘çƒ</p></blockquote><p>åœ¨seek.hppä¸­å†™å…¥ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ros/ros.h"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"opencv2/opencv.hpp"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"vector"</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"sstream"</span></span><span class="token keyword">const</span> <span class="token keyword">int</span> red_ball <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> yellow_ball <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token keyword">int</span> blue_ball <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">seek</span><span class="token punctuation">{</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token function">seek</span><span class="token punctuation">(</span><span class="token keyword">int</span> service_id<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">~</span><span class="token function">seek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">getstart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//ä»æ‘„åƒå¤´è·å–å›¾ç‰‡ã€åŒè¾¹æ»¤æ³¢ã€è½¬åŒ–hsv</span>    <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">//æ‰¾çƒå¹¶å±•ç¤ºä¸­é—´æ•ˆæœå’Œæœ€ç»ˆæ•ˆæœ</span>    <span class="token keyword">void</span> <span class="token function">creatbar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//åˆ›å»ºæ»‘åŠ¨æ¡è°ƒæ•´å‚æ•°</span><span class="token keyword">private</span><span class="token operator">:</span>    <span class="token keyword">int</span> bgr_min<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> bgr_max<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> hsv_min<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> hsv_max<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat src<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat bgr_dst<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat hsv_dst<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat see_red<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat see_yellow<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat see_blue<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>VideoCapture capture<span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">updateparam</span><span class="token punctuation">(</span><span class="token keyword">int</span> type_of_ball<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat<span class="token operator">&amp;</span> input<span class="token punctuation">,</span><span class="token keyword">int</span> type_of_ball<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é˜ˆå€¼åŒ–ã€è†¨èƒ€ã€æ‰¾è½®å»“ã€æ‰¾çŸ©å½¢å¹¶ç­›é€‰ã€ç”»åœ†</span>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">on_change</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨seek.cppä¸­å†™å…¥ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"../include/ballseeker/seek.hpp"</span></span>seek<span class="token double-colon punctuation">::</span><span class="token function">seek</span><span class="token punctuation">(</span><span class="token keyword">int</span> service_id<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//è®¾ç½®æ‘„åƒæœºå‚æ•°</span>    capture<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    capture<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>CV_CAP_PROP_FRAME_WIDTH<span class="token punctuation">,</span><span class="token number">640</span><span class="token punctuation">)</span><span class="token punctuation">;</span>capture<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>CV_CAP_PROP_FRAME_HEIGHT<span class="token punctuation">,</span><span class="token number">480</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token class-name">seek</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">seek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">void</span> seek<span class="token double-colon punctuation">::</span><span class="token function">getstart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    capture<span class="token operator">&gt;&gt;</span>src<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">bilateralFilter</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span>bgr_dst<span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">cvtColor</span><span class="token punctuation">(</span>bgr_dst<span class="token punctuation">,</span>hsv_dst<span class="token punctuation">,</span>CV_BGR2HSV<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> seek<span class="token double-colon punctuation">::</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">process</span><span class="token punctuation">(</span>see_red<span class="token punctuation">,</span>red_ball<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//å¯èƒ½å¾—ä¼šç”¨bgrå¤„ç†çº¢çƒäº†ï¼ŒHSVä¸‹æ•ˆæœä¸å¤ªå¥½</span>    <span class="token function">process</span><span class="token punctuation">(</span>see_yellow<span class="token punctuation">,</span>yellow_ball<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">process</span><span class="token punctuation">(</span>see_blue<span class="token punctuation">,</span>blue_ball<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"SEE_RED_BALL"</span><span class="token punctuation">,</span>see_red<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"SEE_YELLOW_BALL"</span><span class="token punctuation">,</span>see_yellow<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"SEE_BLUE_BALL"</span><span class="token punctuation">,</span>see_blue<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"FINALLY"</span><span class="token punctuation">,</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> seek<span class="token double-colon punctuation">::</span><span class="token function">process</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat<span class="token operator">&amp;</span> input<span class="token punctuation">,</span> <span class="token keyword">int</span> type_of_ball<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">updateparam</span><span class="token punctuation">(</span>type_of_ball<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">inRange</span><span class="token punctuation">(</span>hsv_dst<span class="token punctuation">,</span>cv<span class="token double-colon punctuation">::</span><span class="token function">Scalar</span><span class="token punctuation">(</span>hsv_min<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>hsv_min<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>hsv_min<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        cv<span class="token double-colon punctuation">::</span><span class="token function">Scalar</span><span class="token punctuation">(</span>hsv_max<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>hsv_max<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>hsv_max<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span>Mat element <span class="token operator">=</span>cv<span class="token double-colon punctuation">::</span><span class="token function">getStructuringElement</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>MORPH_RECT<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       cv<span class="token double-colon punctuation">::</span><span class="token function">dilate</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> input<span class="token punctuation">,</span> element<span class="token punctuation">)</span><span class="token punctuation">;</span>    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>cv<span class="token double-colon punctuation">::</span>Point<span class="token operator">&gt;</span> <span class="token operator">&gt;</span> contours<span class="token punctuation">;</span>    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>cv<span class="token double-colon punctuation">::</span>Vec4i<span class="token operator">&gt;</span> hierarchy<span class="token punctuation">;</span>    std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>cv<span class="token double-colon punctuation">::</span>Rect<span class="token operator">&gt;</span> rects<span class="token punctuation">;</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">findContours</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> contours<span class="token punctuation">,</span> hierarchy<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>RETR_CCOMP<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>CHAIN_APPROX_SIMPLE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> contours<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        rects<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span><span class="token function">boundingRect</span><span class="token punctuation">(</span>contours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>rects<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>height <span class="token operator">&lt;</span> <span class="token number">100</span> <span class="token operator">||</span> rects<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">||</span>            <span class="token function">fabsf</span><span class="token punctuation">(</span>rects<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>height <span class="token operator">-</span> rects<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">20</span><span class="token punctuation">)</span>            rects<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>rects<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> rects<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">double</span> R <span class="token operator">=</span> <span class="token punctuation">(</span>rects<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>height <span class="token operator">+</span> rects<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">;</span>        <span class="token keyword">double</span> x <span class="token operator">=</span> rects<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+</span> R<span class="token punctuation">;</span>        <span class="token keyword">double</span> y <span class="token operator">=</span> rects<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">+</span> R<span class="token punctuation">;</span>        cv<span class="token double-colon punctuation">::</span>Point <span class="token function">center</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        cv<span class="token double-colon punctuation">::</span><span class="token function">circle</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> center<span class="token punctuation">,</span> R <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> seek<span class="token double-colon punctuation">::</span><span class="token function">updateparam</span><span class="token punctuation">(</span><span class="token keyword">int</span> type_of_ball<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">switch</span> <span class="token punctuation">(</span>type_of_ball<span class="token punctuation">)</span>    <span class="token punctuation">{</span>    <span class="token keyword">case</span> red_ball<span class="token operator">:</span>        hsv_min<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>hsv_min<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token number">105</span> <span class="token punctuation">;</span>hsv_min<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token number">108</span> <span class="token punctuation">;</span>        hsv_max<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token number">11</span> <span class="token punctuation">;</span>hsv_max<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token number">255</span> <span class="token punctuation">;</span>hsv_max<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token number">255</span> <span class="token punctuation">;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> yellow_ball<span class="token operator">:</span>        hsv_min<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token number">18</span> <span class="token punctuation">;</span>hsv_min<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token number">56</span> <span class="token punctuation">;</span>hsv_min<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token number">177</span> <span class="token punctuation">;</span>        hsv_max<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token number">71</span> <span class="token punctuation">;</span>hsv_max<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token number">187</span> <span class="token punctuation">;</span>hsv_max<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token number">255</span> <span class="token punctuation">;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> blue_ball<span class="token operator">:</span>        hsv_min<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token number">85</span> <span class="token punctuation">;</span>hsv_min<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token number">129</span> <span class="token punctuation">;</span>hsv_min<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token number">128</span> <span class="token punctuation">;</span>        hsv_max<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token number">124</span> <span class="token punctuation">;</span>hsv_max<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token number">255</span> <span class="token punctuation">;</span>hsv_max<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span> <span class="token number">255</span> <span class="token punctuation">;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token keyword">default</span><span class="token operator">:</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">void</span> seek<span class="token double-colon punctuation">::</span><span class="token function">creatbar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    cv<span class="token double-colon punctuation">::</span><span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"SetParam"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>cv<span class="token double-colon punctuation">::</span><span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"minH"</span><span class="token punctuation">,</span> <span class="token string">"SetParam"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>hsv_min<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">,</span> on_change<span class="token punctuation">)</span><span class="token punctuation">;</span>cv<span class="token double-colon punctuation">::</span><span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"minS"</span><span class="token punctuation">,</span> <span class="token string">"SetParam"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>hsv_min<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> on_change<span class="token punctuation">)</span><span class="token punctuation">;</span>cv<span class="token double-colon punctuation">::</span><span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"minV"</span><span class="token punctuation">,</span> <span class="token string">"SetParam"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>hsv_min<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> on_change<span class="token punctuation">)</span><span class="token punctuation">;</span>cv<span class="token double-colon punctuation">::</span><span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"maxH"</span><span class="token punctuation">,</span> <span class="token string">"SetParam"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>hsv_max<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">,</span> on_change<span class="token punctuation">)</span><span class="token punctuation">;</span>cv<span class="token double-colon punctuation">::</span><span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"maxS"</span><span class="token punctuation">,</span> <span class="token string">"SetParam"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>hsv_max<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> on_change<span class="token punctuation">)</span><span class="token punctuation">;</span>cv<span class="token double-colon punctuation">::</span><span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"maxV"</span><span class="token punctuation">,</span> <span class="token string">"SetParam"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>hsv_max<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> on_change<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">on_change</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> seek<span class="token double-colon punctuation">::</span><span class="token function">on_change</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨seekernode.cppä¸­å†™å…¥ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"../include/ballseeker/seek.hpp"</span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv<span class="token punctuation">)</span><span class="token punctuation">{</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span>argv<span class="token punctuation">,</span><span class="token string">"seekernode"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>NodeHandle n<span class="token punctuation">;</span>    seek <span class="token function">icu</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    icu<span class="token punctuation">.</span><span class="token function">creatbar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>ros<span class="token double-colon punctuation">::</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        icu<span class="token punctuation">.</span><span class="token function">getstart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        icu<span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ros<span class="token double-colon punctuation">::</span><span class="token function">spinOnce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenCV </tag>
            
            <tag> ROSåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROSä¸­ä½¿ç”¨ddynamicReconfigure</title>
      <link href="2020/09/05/ros-notes-1/"/>
      <url>2020/09/05/ros-notes-1/</url>
      
        <content type="html"><![CDATA[<h1 id="ROSä¸­ä½¿ç”¨ddynamicReconfigure"><a href="#ROSä¸­ä½¿ç”¨ddynamicReconfigure" class="headerlink" title="ROSä¸­ä½¿ç”¨ddynamicReconfigure"></a>ROSä¸­ä½¿ç”¨ddynamicReconfigure</h1><h2 id="å…³äºddynamicReconfigureç±»"><a href="#å…³äºddynamicReconfigureç±»" class="headerlink" title="å…³äºddynamicReconfigureç±»"></a>å…³äºddynamicReconfigureç±»</h2><p>The DDynamicReconfigure class allows to use ROS dynamic reconfigure without the need to write a custom cpf file, <strong>variables are registered and exposed at run time</strong>.  Modification of the variables is done through a variable pointer or through a callback function.</p><p>The <a href="http://docs.ros.org/kinetic/api/ddynamic_reconfigure/html/classddynamic__reconfigure_1_1DDynamicReconfigure.html">DDynamicReconfigure</a> class is the main class responsible for keeping track of parameters basic properties, values, descriptions, etc. </p><p>It is also responsible of handling callbacks, config change requests, description setup and config setup, and the ROS publishers and  services.</p><p>To operate a DDynamic instance, you must go through the following procedure:</p><ol><li>Construct a <a href="http://docs.ros.org/kinetic/api/ddynamic_reconfigure/html/classddynamic__reconfigure_1_1DDynamicReconfigure.html">DDynamicReconfigure</a> instance with proper handling.</li><li>Add parameters to the instance as needed with any of the â€œaddâ€ methods.</li><li>Start the ROS services with any of the â€œstartâ€ methods.</li><li>If you need to change the callback after startup you may do so using â€œsetCallbackâ€.</li><li>When you need to get any of the stored parameters, call either â€œgetâ€ or â€œatâ€ on this instance, rather than through the callback. </li></ol><h2 id="å¸¸ç”¨å‡½æ•°åŸå‹-amp-è§£æ"><a href="#å¸¸ç”¨å‡½æ•°åŸå‹-amp-è§£æ" class="headerlink" title="å¸¸ç”¨å‡½æ•°åŸå‹&amp;è§£æ"></a>å¸¸ç”¨å‡½æ•°åŸå‹&amp;è§£æ</h2><p>registerVariable register a variable to be modified via the dynamic_reconfigure API. </p><p>When a change is made, <strong>it will be reflected in the variable directly.</strong></p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>  <span class="token keyword">void</span> <span class="token function">registerVariable</span><span class="token punctuation">(</span>  <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>name<span class="token punctuation">,</span>   T <span class="token operator">*</span>variable<span class="token punctuation">,</span>  <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>description <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>   T min <span class="token operator">=</span> <span class="token generic-function"><span class="token function">getMin</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   T max <span class="token operator">=</span> <span class="token generic-function"><span class="token function">getMax</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>  <span class="token keyword">void</span> <span class="token function">registerEnumVariable</span><span class="token punctuation">(</span>  <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>name<span class="token punctuation">,</span>   T <span class="token operator">*</span>variable<span class="token punctuation">,</span>  <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>description <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>  std<span class="token double-colon punctuation">::</span>map<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>string<span class="token punctuation">,</span> T<span class="token operator">&gt;</span> enum_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>enum_description <span class="token operator">=</span> <span class="token string">""</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p>registerVariable register a variable to be modified via the dynamic_reconfigure API. </p><p>When a change is made, <strong>the callback will be called with the new value.</strong></p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>  <span class="token keyword">void</span> <span class="token function">registerVariable</span><span class="token punctuation">(</span>  <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>name<span class="token punctuation">,</span>   T current_value<span class="token punctuation">,</span>  <span class="token keyword">const</span> boost<span class="token double-colon punctuation">::</span>function<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token punctuation">(</span>T value<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span>callback<span class="token punctuation">,</span>  <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>description <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>   T min <span class="token operator">=</span> <span class="token generic-function"><span class="token function">getMin</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   T max <span class="token operator">=</span> <span class="token generic-function"><span class="token function">getMax</span><span class="token generic class-name"><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>  <span class="token keyword">void</span> <span class="token function">registerEnumVariable</span><span class="token punctuation">(</span>  <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>name<span class="token punctuation">,</span>   T current_value<span class="token punctuation">,</span>  <span class="token keyword">const</span> boost<span class="token double-colon punctuation">::</span>function<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span>callback<span class="token punctuation">,</span>  <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>description<span class="token punctuation">,</span>  std<span class="token double-colon punctuation">::</span>map<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>string<span class="token punctuation">,</span> T<span class="token operator">&gt;</span> enum_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>enum_description <span class="token operator">=</span> <span class="token string">""</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p>publishServicesTopics <strong>starts the server</strong> once all the needed variables are registered.</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">publishServicesTopics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å…³äºgetMin()ä¸getMax()</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token keyword">inline</span> T <span class="token function">getMin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">return</span> std<span class="token double-colon punctuation">::</span><span class="token class-name">numeric_limits</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token keyword">inline</span> <span class="token keyword">bool</span> <span class="token function">getMin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token keyword">inline</span> std<span class="token double-colon punctuation">::</span>string <span class="token generic-function"><span class="token function">getMin</span><span class="token generic class-name"><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token keyword">inline</span> T <span class="token function">getMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">return</span> std<span class="token double-colon punctuation">::</span><span class="token class-name">numeric_limits</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token keyword">inline</span> <span class="token keyword">bool</span> <span class="token function">getMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token keyword">inline</span> std<span class="token double-colon punctuation">::</span>string <span class="token function">getMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç®€å•ç¤ºä¾‹"><a href="#ç®€å•ç¤ºä¾‹" class="headerlink" title="ç®€å•ç¤ºä¾‹"></a>ç®€å•ç¤ºä¾‹</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ros/ros.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ddynamic_reconfigure/ddynamic_reconfigure.h&gt;</span></span><span class="token keyword">int</span> global_int<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">paramCb</span><span class="token punctuation">(</span><span class="token keyword">int</span> new_value<span class="token punctuation">)</span><span class="token punctuation">{</span>   global_int <span class="token operator">=</span> new_value<span class="token punctuation">;</span>   <span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Param modified: %d"</span><span class="token punctuation">,</span> global_int<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// ROS init stage</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">init</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">,</span> <span class="token string">"ddynamic_tutorials"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ros<span class="token double-colon punctuation">::</span>NodeHandle nh<span class="token punctuation">;</span>    ddynamic_reconfigure<span class="token double-colon punctuation">::</span>DDynamicReconfigure ddr<span class="token punctuation">;</span>        ddr<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">registerVariable</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"int_param"</span><span class="token punctuation">,</span><span class="token number">124</span><span class="token punctuation">,</span> boost<span class="token double-colon punctuation">::</span><span class="token function">bind</span><span class="token punctuation">(</span>paramCb<span class="token punctuation">,</span> _1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"param description"</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token number">2357</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ddr<span class="token punctuation">.</span><span class="token function">publishServicesTopics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// Now parameter can be modified from the dynamic_reconfigure GUI or other tools and the callback is called on each update</span>    ros<span class="token double-colon punctuation">::</span><span class="token function">spin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROSä¸­nodeletçš„ä½¿ç”¨</title>
      <link href="2020/09/04/ros-notes-2/"/>
      <url>2020/09/04/ros-notes-2/</url>
      
        <content type="html"><![CDATA[<h1 id="ROSä¸­nodeletçš„ä½¿ç”¨"><a href="#ROSä¸­nodeletçš„ä½¿ç”¨" class="headerlink" title="ROSä¸­nodeletçš„ä½¿ç”¨"></a>ROSä¸­nodeletçš„ä½¿ç”¨</h1><h2 id="1-ä¸ºä»€ä¹ˆä½¿ç”¨nodeletï¼Ÿ"><a href="#1-ä¸ºä»€ä¹ˆä½¿ç”¨nodeletï¼Ÿ" class="headerlink" title="1. ä¸ºä»€ä¹ˆä½¿ç”¨nodeletï¼Ÿ"></a>1. ä¸ºä»€ä¹ˆä½¿ç”¨nodeletï¼Ÿ</h2><p>Nodeletæä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥åœ¨åŒä¸€å°è®¡ç®—æœºä¸Šï¼Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹å†…ï¼Œè¿è¡Œå¤šä¸ªç®—æ³•ï¼Œä¸”åœ¨è¿›ç¨‹å†…æ¶ˆæ¯ä¼ é€’æ—¶ä¸äº§ç”Ÿå¤åˆ¶æˆæœ¬ï¼ˆzero  copyï¼‰ã€‚åœ¨ä¸€ä¸ªnodeé‡Œé¢ï¼Œroscppåˆ©ç”¨æŒ‡é’ˆä¼ é€’å¯ä»¥å®ç°åœ¨publishå’Œsubscribeè°ƒç”¨æ—¶çš„é›¶æ‹·è´ã€‚ä¸ºäº†å®ç°ç›¸ä¼¼çš„æ•ˆæœï¼Œå¤šä¸ªnodeletså…è®¸å°†å¤šä¸ªç±»åŠ¨æ€åŠ è½½åˆ°åŒä¸€ä¸ªnodeé‡Œï¼ŒåŒæ—¶è¿˜æä¾›ç‹¬ç«‹çš„å‘½åç©ºé—´ï¼Œä»è€Œä½¿å¾—è¿™äº›nodeletså°½ç®¡è¿è¡Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹é‡Œï¼Œä½†å´ä»ç„¶åƒå•ç‹¬çš„nodeä¸€æ ·å·¥ä½œã€‚ä¹Ÿå°±å®ç°äº†â€œåœ¨ä¸€ä¸ªè¿›ç¨‹ï¼ˆnodeï¼‰é‡Œè¿è¡Œå¤šä¸ªnodeletâ€çš„æ•ˆæœã€‚</p><p>å› æ­¤ï¼Œå¤§é€šé‡æ•°æ®æµå¯èƒ½åŒ…å«å¤šä¸ªnodeletï¼Œæ­¤æ—¶è‹¥å°†ä»–ä»¬åŠ è½½åˆ°åŒä¸€ä¸ªè¿›ç¨‹é‡Œï¼Œå°±å¯ä»¥é¿å…æ•°æ®æ‹·è´å’Œç½‘ç»œä¼ è¾“ã€‚</p><h2 id="2-åœ¨ROSå·¥ç¨‹ä¸­ä½¿ç”¨nodelet"><a href="#2-åœ¨ROSå·¥ç¨‹ä¸­ä½¿ç”¨nodelet" class="headerlink" title="2. åœ¨ROSå·¥ç¨‹ä¸­ä½¿ç”¨nodelet"></a>2. åœ¨ROSå·¥ç¨‹ä¸­ä½¿ç”¨nodelet</h2><h3 id="2-1-åˆ›å»ºå·¥ä½œç©ºé—´å’Œç¨‹åºåŒ…"><a href="#2-1-åˆ›å»ºå·¥ä½œç©ºé—´å’Œç¨‹åºåŒ…" class="headerlink" title="2.1 åˆ›å»ºå·¥ä½œç©ºé—´å’Œç¨‹åºåŒ…"></a>2.1 åˆ›å»ºå·¥ä½œç©ºé—´å’Œç¨‹åºåŒ…</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> ~/catkin_ar/src<span class="token builtin class-name">cd</span> catkin_ar/catkin_make<span class="token builtin class-name">source</span> devel/setup.sh<span class="token builtin class-name">cd</span> srccatkin_create_pkg try_nodelet roscpp rospy nodelet std_msgs sensor_msgs cv_bridge image_transport ddynamic_reconfigure<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-2-åˆ›å»ºå¹¶ä¸”ç¼–å†™cppæ–‡ä»¶ä¸hppæ–‡ä»¶"><a href="#2-2-åˆ›å»ºå¹¶ä¸”ç¼–å†™cppæ–‡ä»¶ä¸hppæ–‡ä»¶" class="headerlink" title="2.2 åˆ›å»ºå¹¶ä¸”ç¼–å†™cppæ–‡ä»¶ä¸hppæ–‡ä»¶"></a>2.2 åˆ›å»ºå¹¶ä¸”ç¼–å†™cppæ–‡ä»¶ä¸hppæ–‡ä»¶</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">//try_use.hpp</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;nodelet/nodelet.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;ros/ros.h&gt;</span></span><span class="token keyword">namespace</span> try_nodelet<span class="token punctuation">{</span>    <span class="token keyword">class</span> <span class="token class-name">try_use</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> nodelet<span class="token double-colon punctuation">::</span><span class="token class-name">Nodelet</span></span>    <span class="token punctuation">{</span>    <span class="token keyword">public</span><span class="token operator">:</span>        <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">onInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">//try_use.cpp</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;pluginlib/class_list_macros.h&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;../include/try_nodelet/try_use.hpp&gt;</span></span><span class="token function">PLUGINLIB_EXPORT_CLASS</span><span class="token punctuation">(</span>try_nodelet<span class="token double-colon punctuation">::</span>try_use<span class="token punctuation">,</span>nodelet<span class="token double-colon punctuation">::</span>Nodelet<span class="token punctuation">)</span><span class="token keyword">namespace</span> try_nodelet<span class="token punctuation">{</span>    <span class="token keyword">void</span> try_use<span class="token double-colon punctuation">::</span><span class="token function">onInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">NODELET_DEBUG</span><span class="token punctuation">(</span><span class="token string">"Initializing nodelet..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">ROS_INFO</span><span class="token punctuation">(</span><span class="token string">"Nodelet is Ok for test!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-3-ç¼–å†™nodelet-plugins-xml"><a href="#2-3-ç¼–å†™nodelet-plugins-xml" class="headerlink" title="2.3 ç¼–å†™nodelet_plugins.xml"></a>2.3 ç¼–å†™nodelet_plugins.xml</h3><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>library</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>lib/libtry_nodelet<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--ä¸Šé¢è¿™ä¸ªtry_nodeletæ˜¯åŒ…çš„åå­—ï¼Œä¸‹é¢çš„é‚£ä¸ªæ˜¯å‘½åç©ºé—´çš„åå­—--&gt;</span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>try_nodelet/try_use<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>try_nodelet::try_use<span class="token punctuation">"</span></span> <span class="token attr-name">base_class_type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nodelet::Nodelet<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>  Trying to use nodelet in ROS.  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>library</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-4-ä¿®æ”¹CMakeLists-txtä¸package-xml"><a href="#2-4-ä¿®æ”¹CMakeLists-txtä¸package-xml" class="headerlink" title="2.4 ä¿®æ”¹CMakeLists.txtä¸package.xml"></a>2.4 ä¿®æ”¹CMakeLists.txtä¸package.xml</h3><p>ä¿®æ”¹CMakeLists.txt</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.0.2</span><span class="token punctuation">)</span><span class="token keyword">project</span><span class="token punctuation">(</span>try_nodelet<span class="token punctuation">)</span><span class="token keyword">add_compile_options</span><span class="token punctuation">(</span>-std=c++<span class="token number">11</span><span class="token punctuation">)</span><span class="token comment">#ä¸Šé¢è¿™ä¸ªæœ€å¥½åŠ ä¸Šï¼Œå¦åˆ™å¯èƒ½ä¼šç¼–è¯‘å¤±è´¥</span><span class="token keyword">find_package</span><span class="token punctuation">(</span>catkin REQUIRED COMPONENTS  cv_bridge  ddynamic_reconfigure  image_transport  nodelet  roscpp  rospy  sensor_msgs  std_msgs<span class="token punctuation">)</span><span class="token function">catkin_package</span><span class="token punctuation">(</span>  INCLUDE_DIRS include  LIBRARIES try_nodelet  CATKIN_DEPENDS cv_bridge ddynamic_reconfigure image_transport nodelet roscpp rospy sensor_msgs std_msgs<span class="token comment">#  DEPENDS system_lib</span><span class="token punctuation">)</span><span class="token keyword">include_directories</span><span class="token punctuation">(</span>   include  <span class="token punctuation">${</span>catkin_INCLUDE_DIRS<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">add_library</span><span class="token punctuation">(</span><span class="token punctuation">${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span>     src/try_use.cpp<span class="token punctuation">)</span><span class="token keyword">add_dependencies</span><span class="token punctuation">(</span>    <span class="token punctuation">${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span>     <span class="token punctuation">${</span><span class="token punctuation">${</span><span class="token variable">PROJECT_NAME</span><span class="token punctuation">}</span>_EXPORTED_TARGETS<span class="token punctuation">}</span>     <span class="token punctuation">${</span>catkin_EXPORTED_TARGETS<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¿®æ”¹package.xml</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0"?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>try_nodelet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>The try_nodelet package<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maintainer</span> <span class="token attr-name">email</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>npu-lqx@todo.todo<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>npu-lqx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maintainer</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>license</span><span class="token punctuation">&gt;</span></span>TODO<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>license</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>buildtool_depend</span><span class="token punctuation">&gt;</span></span>catkin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>buildtool_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_depend</span><span class="token punctuation">&gt;</span></span>cv_bridge<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_depend</span><span class="token punctuation">&gt;</span></span>ddynamic_reconfigure<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_depend</span><span class="token punctuation">&gt;</span></span>image_transport<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_depend</span><span class="token punctuation">&gt;</span></span>nodelet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_depend</span><span class="token punctuation">&gt;</span></span>roscpp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_depend</span><span class="token punctuation">&gt;</span></span>rospy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_depend</span><span class="token punctuation">&gt;</span></span>sensor_msgs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_depend</span><span class="token punctuation">&gt;</span></span>std_msgs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_export_depend</span><span class="token punctuation">&gt;</span></span>cv_bridge<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_export_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_export_depend</span><span class="token punctuation">&gt;</span></span>ddynamic_reconfigure<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_export_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_export_depend</span><span class="token punctuation">&gt;</span></span>image_transport<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_export_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_export_depend</span><span class="token punctuation">&gt;</span></span>nodelet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_export_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_export_depend</span><span class="token punctuation">&gt;</span></span>roscpp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_export_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_export_depend</span><span class="token punctuation">&gt;</span></span>rospy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_export_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_export_depend</span><span class="token punctuation">&gt;</span></span>sensor_msgs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_export_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_export_depend</span><span class="token punctuation">&gt;</span></span>std_msgs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_export_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exec_depend</span><span class="token punctuation">&gt;</span></span>cv_bridge<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exec_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exec_depend</span><span class="token punctuation">&gt;</span></span>ddynamic_reconfigure<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exec_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exec_depend</span><span class="token punctuation">&gt;</span></span>image_transport<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exec_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exec_depend</span><span class="token punctuation">&gt;</span></span>nodelet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exec_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exec_depend</span><span class="token punctuation">&gt;</span></span>roscpp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exec_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exec_depend</span><span class="token punctuation">&gt;</span></span>rospy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exec_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exec_depend</span><span class="token punctuation">&gt;</span></span>sensor_msgs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exec_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exec_depend</span><span class="token punctuation">&gt;</span></span>std_msgs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exec_depend</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>export</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nodelet</span> <span class="token attr-name">plugin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${prefix}/nodelet_plugins.xml<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>export</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>package</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-å¯åŠ¨ROSèŠ‚ç‚¹"><a href="#3-å¯åŠ¨ROSèŠ‚ç‚¹" class="headerlink" title="3.å¯åŠ¨ROSèŠ‚ç‚¹"></a>3.å¯åŠ¨ROSèŠ‚ç‚¹</h2><h3 id="3-1-ç¼–å†™launchæ–‡ä»¶è¿›è¡Œå¿«é€Ÿå¯åŠ¨"><a href="#3-1-ç¼–å†™launchæ–‡ä»¶è¿›è¡Œå¿«é€Ÿå¯åŠ¨" class="headerlink" title="3.1 ç¼–å†™launchæ–‡ä»¶è¿›è¡Œå¿«é€Ÿå¯åŠ¨"></a>3.1 ç¼–å†™launchæ–‡ä»¶è¿›è¡Œå¿«é€Ÿå¯åŠ¨</h3><p>æ–°å»ºä¸€ä¸ªlaunchæ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨æ–‡ä»¶å¤¹ä¸­æ–°å»ºä¸€ä¸ªstart.launchæ–‡ä»¶</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>launch</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nodelet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nodelet<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>standalone_nodelet<span class="token punctuation">"</span></span>  <span class="token attr-name">args</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>manager<span class="token punctuation">"</span></span> <span class="token attr-name">output</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>node</span> <span class="token attr-name">pkg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nodelet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nodelet<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>using_nodelet<span class="token punctuation">"</span></span> <span class="token attr-name">args</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>load try_nodelet/try_use standalone_nodelet<span class="token punctuation">"</span></span> <span class="token attr-name">output</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>node</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>launch</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-2-é€šè¿‡å‘½ä»¤è¡Œè¿è¡Œ"><a href="#3-2-é€šè¿‡å‘½ä»¤è¡Œè¿è¡Œ" class="headerlink" title="3.2 é€šè¿‡å‘½ä»¤è¡Œè¿è¡Œ"></a>3.2 é€šè¿‡å‘½ä»¤è¡Œè¿è¡Œ</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#ç»ˆç«¯1</span>roscore<span class="token comment">#ç»ˆç«¯2</span>rosrun nodelet nodelet manager __name:<span class="token operator">=</span>nodelet_manager<span class="token comment">#ç»ˆç«¯3</span>rosrun nodelet nodelet load try_nodelet/try_use nodelet_manager __name:<span class="token operator">=</span>using_nodelet<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„ï¼Œå¦‚æœè¿™é‡ŒæŠ¥é”™â€œAccording to the loaded plugin descriptions the class try_nodelet/try_use with base class type nodelet::Nodelet does not exist.â€  ä¸€èˆ¬æ˜¯å› ä¸ºè¿è¡Œmanagerçš„çª—å£ï¼ˆç»ˆç«¯2ï¼‰æ²¡æœ‰source</p><p>æ‰€ä»¥è¦ä¹ˆä¸€å¼€å§‹å°±æŠŠsourceå†™è¿›é…ç½®æ–‡ä»¶ä¸­ï¼Œè¦ä¹ˆå°±æ¯ä¸ªç›¸å…³çš„çª—å£éƒ½è¦sourceï¼Œè¿™æ ·èƒ½å¤Ÿé¿å…å¾ˆå¤šé—®é¢˜ï¼Œä¹Ÿæ–¹ä¾¿è‡ªå·±æ‰¾åˆ°ç¨‹åºçš„bugæ‰€åœ¨ã€‚</p><h2 id="4-å°†å·²æœ‰çš„ROSå·¥ç¨‹æ”¹å†™ä¸ºnodelet"><a href="#4-å°†å·²æœ‰çš„ROSå·¥ç¨‹æ”¹å†™ä¸ºnodelet" class="headerlink" title="4.å°†å·²æœ‰çš„ROSå·¥ç¨‹æ”¹å†™ä¸ºnodelet"></a>4.å°†å·²æœ‰çš„ROSå·¥ç¨‹æ”¹å†™ä¸ºnodelet</h2><p>å¾…è¡¥å……~</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç±»çš„å…­ä¸ªé»˜è®¤çš„æˆå‘˜å‡½æ•°</title>
      <link href="2020/08/22/cpp-notes-1/"/>
      <url>2020/08/22/cpp-notes-1/</url>
      
        <content type="html"><![CDATA[<h1 id="ç±»çš„å…­ä¸ªé»˜è®¤çš„æˆå‘˜å‡½æ•°"><a href="#ç±»çš„å…­ä¸ªé»˜è®¤çš„æˆå‘˜å‡½æ•°" class="headerlink" title="ç±»çš„å…­ä¸ªé»˜è®¤çš„æˆå‘˜å‡½æ•°"></a>ç±»çš„å…­ä¸ªé»˜è®¤çš„æˆå‘˜å‡½æ•°</h1><h2 id="ç±»çš„6ä¸ªé»˜è®¤çš„æˆå‘˜å‡½æ•°åŒ…æ‹¬ï¼š"><a href="#ç±»çš„6ä¸ªé»˜è®¤çš„æˆå‘˜å‡½æ•°åŒ…æ‹¬ï¼š" class="headerlink" title="ç±»çš„6ä¸ªé»˜è®¤çš„æˆå‘˜å‡½æ•°åŒ…æ‹¬ï¼š"></a>ç±»çš„6ä¸ªé»˜è®¤çš„æˆå‘˜å‡½æ•°åŒ…æ‹¬ï¼š</h2><p>æ„é€ å‡½æ•°ã€ææ„å‡½æ•°ã€æ‹·è´æ„é€ å‡½æ•°ã€èµ‹å€¼è¿ç®—ç¬¦é‡è½½å‡½æ•°ã€å–åœ°å€æ“ä½œç¬¦é‡è½½ã€constä¿®é¥°çš„å–åœ°å€æ“ä½œç¬¦é‡è½½ã€‚</p><h3 id="ï¼ˆä¸€ï¼‰æ„é€ å‡½æ•°"><a href="#ï¼ˆä¸€ï¼‰æ„é€ å‡½æ•°" class="headerlink" title="ï¼ˆä¸€ï¼‰æ„é€ å‡½æ•°"></a>ï¼ˆä¸€ï¼‰æ„é€ å‡½æ•°</h3><p>æ„é€ å‡½æ•°ï¼Œé¡¾åæ€ä¹‰ï¼Œä¸ºå¯¹è±¡åˆ†é…ç©ºé—´ï¼Œè¿›è¡Œåˆå§‹åŒ–ã€‚å®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„æˆå‘˜å‡½æ•°ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹:</p><ol><li><p>å‡½æ•°åä¸ç±»åç›¸åŒã€‚</p></li><li><p>æ— è¿”å›å€¼ã€‚</p></li><li><p>æ„é€ å¯¹è±¡çš„æ—¶å€™ç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°ã€‚</p></li><li><p>å¯ä»¥é‡è½½ã€‚</p></li><li><p>å¯ä»¥åœ¨ç±»ä¸­å®šä¹‰ï¼Œä¹Ÿå¯ä»¥åœ¨ç±»å¤–å®šä¹‰ã€‚</p></li><li><p>å¦‚æœç±»ä¸­æ²¡æœ‰ç»™å‡ºæ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨äº§ç”Ÿä¸€ä¸ªç¼ºçœçš„æ„é€ å‡½æ•°ï¼Œå¦‚æœç±»ä¸­æœ‰æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šäº§ç”Ÿç¼ºçœæ„é€ å‡½æ•°ã€‚</p></li><li><p>å…¨ç¼ºçœçš„æ„é€ å‡½æ•°å’Œæ— å‚çš„æ„é€ å‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªï¼Œå¦åˆ™è°ƒç”¨çš„æ—¶å€™å°±ä¼šäº§ç”Ÿå†²çªã€‚</p></li><li><p>æ²¡æœ‰thisæŒ‡é’ˆã€‚å› ä¸ºæ„é€ å‡½æ•°æ‰æ˜¯åˆ›å»ºå¯¹è±¡çš„ï¼Œæ²¡æœ‰åˆ›å»ºå¯¹è±¡å°±ä¸ä¼šæœ‰å¯¹è±¡çš„é¦–åœ°å€ã€‚</p></li></ol><p>æ„é€ å‡½æ•°ï¼Œè¯´æ¥å°±æ˜¯ç»™æˆå‘˜å˜é‡è¿›è¡Œåˆå§‹åŒ–ã€‚è€Œåˆå§‹åŒ–å´æœ‰ä¸¤ç§æ–¹æ³•ï¼šåˆå§‹åŒ–åˆ—è¡¨ã€æ„é€ å‡½æ•°å‡½æ•°ä½“å†…èµ‹å€¼ã€‚å°½é‡ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ï¼Œå› ä¸ºå®ƒæ›´é«˜æ•ˆã€‚</p><h4 id="æœ‰äº›æˆå‘˜å˜é‡å¿…é¡»å†åˆå§‹åŒ–åˆ—è¡¨ä¸­åˆå§‹åŒ–ï¼Œæ¯”å¦‚ï¼š"><a href="#æœ‰äº›æˆå‘˜å˜é‡å¿…é¡»å†åˆå§‹åŒ–åˆ—è¡¨ä¸­åˆå§‹åŒ–ï¼Œæ¯”å¦‚ï¼š" class="headerlink" title="æœ‰äº›æˆå‘˜å˜é‡å¿…é¡»å†åˆå§‹åŒ–åˆ—è¡¨ä¸­åˆå§‹åŒ–ï¼Œæ¯”å¦‚ï¼š"></a>æœ‰äº›æˆå‘˜å˜é‡å¿…é¡»å†åˆå§‹åŒ–åˆ—è¡¨ä¸­åˆå§‹åŒ–ï¼Œæ¯”å¦‚ï¼š</h4><ol><li><p>å¸¸é‡æˆå‘˜å˜é‡ã€‚ï¼ˆå¸¸é‡åˆ›å»ºæ—¶å¿…é¡»åˆå§‹åŒ–ï¼Œå› ä¸ºå¯¹äºä¸€ä¸ªå¸¸é‡ï¼Œæˆ‘ä»¬ç»™å®ƒèµ‹å€¼ï¼Œæ˜¯ä¸å¯¹çš„ï¼‰</p></li><li><p>å¼•ç”¨ç±»å‹æˆå‘˜å˜é‡ã€‚ï¼ˆå¼•ç”¨åˆ›å»ºæ—¶å¿…é¡»åˆå§‹åŒ–ï¼‰</p></li><li><p>æ²¡æœ‰ç¼ºçœæ„é€ å‡½æ•°çš„ç±»æˆå‘˜å˜é‡ã€‚ï¼ˆå¦‚æœæ„é€ å‡½æ•°çš„å‚æ•°åˆ—è¡¨ä¸­æœ‰ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œå¹¶ä¸”è¯¥å¯¹è±¡çš„ç±»é‡Œæ²¡æœ‰ç¼ºçœå‚æ•°çš„æ„é€ å‡½æ•°æ—¶ï¼Œè¦æ˜¯ä¸ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ï¼Œå‚æ•°ä¸­ä¼šè°ƒç”¨æ— å‚æˆ–è€…å…¨ç¼ºçœçš„æ„é€ å‡½æ•°ï¼Œè€Œé‚£ä¸ªç±»ä¸­åˆæ²¡æœ‰ã€‚ï¼‰</p></li></ol><h3 id="ï¼ˆäºŒï¼‰ææ„å‡½æ•°"><a href="#ï¼ˆäºŒï¼‰ææ„å‡½æ•°" class="headerlink" title="ï¼ˆäºŒï¼‰ææ„å‡½æ•°"></a>ï¼ˆäºŒï¼‰ææ„å‡½æ•°</h3><h4 id="ææ„å‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šçš„æˆå‘˜å‡½æ•°ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š"><a href="#ææ„å‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šçš„æˆå‘˜å‡½æ•°ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š" class="headerlink" title="ææ„å‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šçš„æˆå‘˜å‡½æ•°ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š"></a>ææ„å‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šçš„æˆå‘˜å‡½æ•°ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</h4><ol><li><p>ææ„å‡½æ•°å‡½æ•°åæ˜¯åœ¨ç±»ååŠ ä¸Šå­—ç¬¦ ~ ã€‚</p></li><li><p>æ— å‚æ•°æ— è¿”å›å€¼ï¼ˆä½†æœ‰thisæŒ‡é’ˆï¼‰ã€‚</p></li><li><p>ä¸€ä¸ªç±»æœ‰ä¸”åªæœ‰ä¸€ä¸ªææ„å‡½æ•°ï¼Œæ‰€ä»¥è‚¯å®šä¸èƒ½é‡è½½ã€‚è‹¥æœªæ˜¾ç¤ºå®šä¹‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆç¼ºçœçš„ææ„å‡½æ•°ã€‚</p></li><li><p>å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ï¼ŒC++ç¼–è¯‘ç³»ç»Ÿç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°ã€‚</p></li><li><p>æ³¨æ„ææ„å‡½æ•°ä½“å†…å¹¶ä¸æ˜¯åˆ é™¤å¯¹è±¡ï¼Œè€Œæ˜¯åšä¸€äº›æ¸…ç†å·¥ä½œã€‚ï¼ˆæ¯”å¦‚æˆ‘ä»¬åœ¨æ„é€ å‡½æ•°ä¸­åŠ¨æ€å¼€è¾Ÿè¿‡ä¸€æ®µç©ºé—´ï¼Œå‡½æ•°ç»“æŸåéœ€è¦é‡Šæ”¾ï¼Œè€Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„ææ„å‡½æ•°æ‰ä¸ç®¡å†…å­˜é‡Šæ”¾å‘¢ï¼Œæ‰€ä»¥éœ€è¦äººä¸ºåœ°å†™å‡ºææ„å‡½æ•°ï¼‰</p></li></ol><p>æ³¨æ„ï¼šå¯¹è±¡ç”Ÿå‘½å‘¨æœŸç»“æŸåï¼Œåæ„é€ çš„å¯¹è±¡å…ˆé‡Šæ”¾ã€‚</p><h3 id="ï¼ˆä¸‰ï¼‰æ‹·è´æ„é€ å‡½æ•°"><a href="#ï¼ˆä¸‰ï¼‰æ‹·è´æ„é€ å‡½æ•°" class="headerlink" title="ï¼ˆä¸‰ï¼‰æ‹·è´æ„é€ å‡½æ•°"></a>ï¼ˆä¸‰ï¼‰æ‹·è´æ„é€ å‡½æ•°</h3><p>ç”¨å·²æœ‰çš„å¯¹è±¡åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</p><p>åˆ›å»ºå¯¹è±¡æ—¶ä½¿ç”¨åŒç±»å¯¹è±¡æ¥è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ—¶æ‰€ç”¨çš„æ„é€ å‡½æ•°å°±æ˜¯æ‹·è´æ„é€ å‡½æ•°ï¼ˆCopy  Constructorï¼‰ã€‚æ‹·è´æ„é€ å‡½æ•°ä¹Ÿæ˜¯æ„é€ å‡½æ•°ï¼Œä½†å®ƒåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°åªèƒ½æ˜¯æœ¬ç±»çš„ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸”é‡‡ç”¨å¯¹è±¡çš„å¸¸å¼•ç”¨å½¢å¼ã€‚æ‹·è´æ„é€ å‡½æ•°çš„ä½œç”¨å°±æ˜¯å°†å®å‚å¯¹è±¡çš„å„æˆå‘˜å€¼ä¸€ä¸€èµ‹ç»™æ–°çš„å¯¹è±¡ä¸­å¯¹åº”çš„æˆå‘˜ã€‚</p><p>è¯¥å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªå¸¸å¼•ç”¨ï¼Œå¦‚æœä¸æ˜¯å¼•ç”¨ï¼Œå½¢å‚æ˜¯å®å‚çš„ä¸€ä»½ä¸´æ—¶æ‹·è´ï¼Œç”±äºä¸¤è€…éƒ½æ˜¯å¯¹è±¡ï¼Œæ­¤æ—¶å°±ä¼šè°ƒç”¨è‡ªå·±çš„æ‹·è´æ„é€ å‡½æ•°ï¼Œé™·å…¥æ— é™é€’å½’ä¸­â€¦â€¦.</p><h4 id="æ‹·è´æ„é€ å‡½æ•°çš„ç‰¹å¾"><a href="#æ‹·è´æ„é€ å‡½æ•°çš„ç‰¹å¾" class="headerlink" title="æ‹·è´æ„é€ å‡½æ•°çš„ç‰¹å¾"></a>æ‹·è´æ„é€ å‡½æ•°çš„ç‰¹å¾</h4><p> ï¼ˆ1ï¼‰æ‹·è´æ„é€ å‡½æ•°å…¶å®æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°çš„é‡è½½ã€‚<br> ï¼ˆ2ï¼‰æ‹·è´æ„é€ å‡½æ•°çš„å‚æ•°å¿…é¡»ä½¿ç”¨å¼•ç”¨ä¼ å‚ï¼Œä½¿ç”¨ä¼ å‚æ–¹å¼ä¼šå¼•å‘æ— ç©·é€’å½’è°ƒç”¨ã€‚<br> ï¼ˆ3ï¼‰è‹¥ä¸ºæ˜¾ç¤ºå®šä¹‰ï¼Œç³»ç»Ÿé»˜è®¤ç”Ÿæˆç¼ºçœçš„æ‹·è´æ„é€ å‡½æ•°ï¼Œç¼ºçœçš„æ‹·è´æ„é€ å‡½æ•°ä¼šæŒ‰ç…§æˆå‘˜çš„å£°æ˜é¡ºåºä¾æ¬¡æ‹·è´ç±»æˆå‘˜è¿›è¡Œåˆå§‹åŒ–</p><h4 id="è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°çš„ä¸¤ç§æ–¹æ³•ï¼š"><a href="#è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°çš„ä¸¤ç§æ–¹æ³•ï¼š" class="headerlink" title="è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°çš„ä¸¤ç§æ–¹æ³•ï¼š"></a>è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°çš„ä¸¤ç§æ–¹æ³•ï¼š</h4><ol><li><p>ä»£å…¥æ³•ï¼š</p><p>Person p2(p1);</p></li><li><p>èµ‹å€¼æ³•ï¼š</p><p>Person p2 = p1;</p></li></ol><h4 id="ä¸ºä»€ä¹ˆè¿™é‡Œçš„å¯¹è±¡å¯ä»¥ç›´æ¥è®¿é—®ç§æœ‰æˆå‘˜å˜é‡ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¿™é‡Œçš„å¯¹è±¡å¯ä»¥ç›´æ¥è®¿é—®ç§æœ‰æˆå‘˜å˜é‡ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¿™é‡Œçš„å¯¹è±¡å¯ä»¥ç›´æ¥è®¿é—®ç§æœ‰æˆå‘˜å˜é‡ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¿™é‡Œçš„å¯¹è±¡å¯ä»¥ç›´æ¥è®¿é—®ç§æœ‰æˆå‘˜å˜é‡ï¼Ÿ</h4><p> 1ï¼‰åœ¨ç±»çš„æˆå‘˜å‡½æ•°é‡Œå¯ä»¥ç›´æ¥è®¿é—®åŒç±»å¯¹è±¡çš„ç§æœ‰æˆ–ä¿æŠ¤çš„æˆå‘˜ã€‚<br> 2ï¼‰C++çš„è®¿é—®é™å®šç¬¦æ˜¯ä»¥ç±»ä¸ºå•ä½çš„ï¼Œå³ï¼šåœ¨è¿™ä¸ªå•ä½å†…çš„æˆå‘˜å¯ä»¥äº’ç›¸è®¿é—®ã€‚</p><h3 id="ï¼ˆå››ï¼‰èµ‹å€¼è¿ç®—ç¬¦é‡è½½å‡½æ•°"><a href="#ï¼ˆå››ï¼‰èµ‹å€¼è¿ç®—ç¬¦é‡è½½å‡½æ•°" class="headerlink" title="ï¼ˆå››ï¼‰èµ‹å€¼è¿ç®—ç¬¦é‡è½½å‡½æ•°"></a>ï¼ˆå››ï¼‰èµ‹å€¼è¿ç®—ç¬¦é‡è½½å‡½æ•°</h3><p>ç”¨ä¸€ä¸ªå¯¹è±¡ä¿®æ”¹å·²ç»å­˜åœ¨å¯¹è±¡çš„å†…å®¹ï¼Œä¸æ˜¯å»åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œä¿®æ”¹ä¹‹åï¼Œä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹ä¸€è‡´</p><blockquote><ol><li>å¯ä»¥é€šè¿‡æ£€æŸ¥æ˜¯å¦ç»™è‡ªå·±èµ‹å€¼ï¼Œè¿›è¡Œä¼˜åŒ–</li><li><strong>å¦‚æœéœ€è¦è¿ç»­èµ‹å€¼ï¼Œè¿”å›å€¼ä¸èƒ½æ˜¯voidï¼Œä¸€èˆ¬ä¸ºå¼•ç”¨ç±»å‹</strong></li><li>*<em>è¿”å›å€¼ä¸€èˆ¬æ˜¯ <em>this</em></em></li><li>ç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„èµ‹å€¼è¿ç®—ç¬¦ä¸ºå­—èŠ‚æ‹·è´ï¼Œå³æµ…æ‹·è´ï¼Œå¦‚æœèµ„æºéœ€è¦æ‹·è´ï¼Œéœ€è¦æ˜¾ç¤ºå®šä¹‰ï¼Œå®Œæˆæ·±æ‹·è´</li></ol><p>=è°ƒç”¨ï¼šå¦‚æœå¯¹è±¡éƒ½å­˜åœ¨ï¼Œè°ƒç”¨èµ‹å€¼è¿ç®—ç¬¦é‡è½½å‡½æ•°</p><p>â€‹              å¦‚æœå·¦è¾¹å¯¹è±¡ä¸å­˜åœ¨ï¼Œè°ƒç”¨æ‹·è´æ„é€ åˆ›å»ºå·¦è¾¹å¯¹è±¡</p></blockquote><p><em>èµ‹å€¼æ˜¯ä»å³å‘å·¦è¿›è¡Œçš„</em></p><p>å¦‚æœä¸å†™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œé»˜è®¤ç”Ÿæˆçš„ä¹Ÿæ˜¯å­—èŠ‚æ‹·è´ï¼Œæµ…æ‹·è´</p><p>å¦‚æœå½“å‰ç±»ä¸­æœ‰èµ„æºï¼Œåˆ™å¿…é¡»æ˜¾ç¤ºå®šä¹‰è¿ç®—ç¬¦é‡è½½å‡½æ•°ï¼Œå®Œæˆæ·±æ‹·è´</p><h4 id="æ™®é€šè¿ç®—ç¬¦é‡è½½å‡½æ•°"><a href="#æ™®é€šè¿ç®—ç¬¦é‡è½½å‡½æ•°" class="headerlink" title="æ™®é€šè¿ç®—ç¬¦é‡è½½å‡½æ•°"></a>æ™®é€šè¿ç®—ç¬¦é‡è½½å‡½æ•°</h4><blockquote><ol><li>ä¸èƒ½åˆ›å»ºæ–°çš„æ“ä½œç¬¦ï¼Œå¦‚operator@</li><li>é‡è½½æ“ä½œç¬¦å¿…é¡»æœ‰ä¸€ä¸ªç±»ç±»å‹æˆ–è€…æšä¸¾ç±»å‹çš„æ“ä½œç¬¦</li><li>ç”¨äºå†…ç½®ç±»å‹çš„æ“ä½œç¬¦ï¼Œå…¶å«ä¹‰ä¸èƒ½æ”¹å˜</li><li>è¿ç®—ç¬¦é‡è½½å‡½æ•°å¦‚æœæ˜¯æˆå‘˜å‡½æ•°ï¼Œåˆ™å‚æ•°çš„ä¸ªæ•°æ¯”è¿ç®—ç¬¦éœ€è¦çš„ä¸ªæ•°å°‘ä¸€ä¸ªï¼Œè¿™é‡Œç¼–è¯‘å™¨ä¼šä¼ å…¥thisæŒ‡é’ˆä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°</li><li>æ™®é€šçš„è¿ç®—ç¬¦é‡è½½å‡½æ•°ï¼Œå‚æ•°çš„ä¸ªæ•°å’Œè¿ç®—ç¬¦éœ€è¦çš„ä¸ªæ•°ä¸€è‡´</li></ol></blockquote><p><strong>.*ï¼ˆæˆå‘˜æŒ‡é’ˆè®¿é—®è¿ç®—ç¬¦ï¼‰ ,  ::  ,  sizeof  ,  ? :  ,  .   äº”ä¸ªè¿ç®—ç¬¦ä¸èƒ½è¢«é‡è½½</strong></p><h3 id="ï¼ˆäº”ï¼‰å–åœ°å€è¿ç®—ç¬¦é‡è½½å‡½æ•°-constå–åœ°å€è¿ç®—ç¬¦é‡è½½å‡½æ•°ï¼šè·å–å¯¹è±¡çš„åœ°å€"><a href="#ï¼ˆäº”ï¼‰å–åœ°å€è¿ç®—ç¬¦é‡è½½å‡½æ•°-constå–åœ°å€è¿ç®—ç¬¦é‡è½½å‡½æ•°ï¼šè·å–å¯¹è±¡çš„åœ°å€" class="headerlink" title="ï¼ˆäº”ï¼‰å–åœ°å€è¿ç®—ç¬¦é‡è½½å‡½æ•° / constå–åœ°å€è¿ç®—ç¬¦é‡è½½å‡½æ•°ï¼šè·å–å¯¹è±¡çš„åœ°å€**"></a>ï¼ˆäº”ï¼‰å–åœ°å€è¿ç®—ç¬¦é‡è½½å‡½æ•° / constå–åœ°å€è¿ç®—ç¬¦é‡è½½å‡½æ•°ï¼šè·å–å¯¹è±¡çš„åœ°å€**</h3><p>ä¸€èˆ¬ä¸éœ€è¦æ˜¾ç¤ºå®šä¹‰ï¼Œç›´æ¥ä½¿ç”¨ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å³å¯</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++æè¿°ç¬¦deleteä¸override</title>
      <link href="2020/08/21/cpp-notes-2/"/>
      <url>2020/08/21/cpp-notes-2/</url>
      
        <content type="html"><![CDATA[<h1 id="deleteä¸override"><a href="#deleteä¸override" class="headerlink" title="deleteä¸override"></a>deleteä¸override</h1><h2 id="ä¼˜å…ˆä½¿ç”¨deleteå…³é”®å­—åˆ é™¤å‡½æ•°è€Œéprivateå´åˆä¸å®ç°çš„å‡½æ•°"><a href="#ä¼˜å…ˆä½¿ç”¨deleteå…³é”®å­—åˆ é™¤å‡½æ•°è€Œéprivateå´åˆä¸å®ç°çš„å‡½æ•°" class="headerlink" title="ä¼˜å…ˆä½¿ç”¨deleteå…³é”®å­—åˆ é™¤å‡½æ•°è€Œéprivateå´åˆä¸å®ç°çš„å‡½æ•°"></a>ä¼˜å…ˆä½¿ç”¨deleteå…³é”®å­—åˆ é™¤å‡½æ•°è€Œéprivateå´åˆä¸å®ç°çš„å‡½æ•°</h2><h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨deleteï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨deleteï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨deleteï¼Ÿ"></a>ä¸ºä»€ä¹ˆä½¿ç”¨deleteï¼Ÿ</h3><p>â€‹    ä¸æƒ³è®©åˆ«çš„å¼€å‘è€…è°ƒç”¨ç‰¹å®šçš„å‡½æ•°,ä½ åªéœ€è¦ä¸å£°æ˜è¿™ä¸ªå‡½æ•°å°±å¯ä»¥äº†ã€‚ä½†æœ‰æ—¶å€™ C++ä¸ºä½ å£°æ˜äº†ä¸€äº›å‡½æ•°,å¦‚æœä½ æƒ³é˜»æ­¢å®¢æˆ·è°ƒç”¨è¿™äº›å‡½æ•°,å°±ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“çš„äº‹äº†ã€‚</p><p>â€‹    è¿™ç§æƒ…å†µåªæœ‰å¯¹â€œç‰¹æ®Šçš„æˆå‘˜å‡½æ•°â€æ‰ä¼šå‡ºç°,å³è¿™ä¸ªæˆå‘˜å‡½æ•°æ˜¯éœ€è¦çš„æ—¶å€™C++è‡ªåŠ¨ç”Ÿæˆçš„ã€‚    </p><p>åœ¨C++98ä¸­é˜»æ­¢è¿™ç±»å‡½æ•°è¢«ä½¿ç”¨çš„æ–¹æ³•æ˜¯å°†è¿™äº›å‡½æ•°å£°æ˜ä¸ºprivate,å¹¶ä¸”ä¸å®šä¹‰å®ƒä»¬ã€‚</p><p>â€‹    å°†è¿™äº›å‡½æ•°å£°æ˜ä¸ºç§æœ‰æ¥é˜»æ­¢å®¢æˆ·è°ƒç”¨ä»–ä»¬ã€‚æ•…æ„ä¸å®šä¹‰å®ƒä»¬æ˜¯å› ä¸º,å¦‚æœæœ‰å‡½æ•°è®¿é—®è¿™äº›<br>å‡½æ•°(é€šè¿‡æˆå‘˜å‡½æ•°æˆ–è€…å‹å¥½ç±»)åœ¨é“¾æ¥çš„æ—¶å€™ä¼šå¯¼è‡´æ²¡æœ‰å®šä¹‰è€Œè§¦å‘çš„é”™è¯¯ã€‚</p><p>â€‹    åœ¨C++11ä¸­,æœ‰ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•å¯ä»¥åŸºæœ¬ä¸Šå®ç°åŒæ ·çš„åŠŸèƒ½:ç”¨ =deleteæ ‡è¯†æ‹·è´å¤åˆ¶å‡½æ•°<br>å’Œæ‹·è´èµ‹å€¼å‡½æ•°ä¸ºåˆ é™¤çš„å‡½æ•°deleted functions ã€‚</p><h3 id="deleteçš„ä¼˜ç‚¹"><a href="#deleteçš„ä¼˜ç‚¹" class="headerlink" title="deleteçš„ä¼˜ç‚¹"></a>deleteçš„ä¼˜ç‚¹</h3><p>â€‹    åˆ é™¤å‡½æ•°ä¸€ä¸ªé‡è¦çš„ä¼˜åŠ¿æ˜¯ä»»ä½•å‡½æ•°éƒ½å¯ä»¥æ˜¯åˆ é™¤çš„,ç„¶è€Œä»…æœ‰æˆå‘˜å‡½æ•°æ‰å¯ä»¥æ˜¯ç§æœ‰çš„ã€‚</p><h4 id="é˜²æ­¢æ™®é€šéæˆå‘˜å‡½æ•°ä¸­çš„éšå¼è½¬åŒ–"><a href="#é˜²æ­¢æ™®é€šéæˆå‘˜å‡½æ•°ä¸­çš„éšå¼è½¬åŒ–" class="headerlink" title="é˜²æ­¢æ™®é€šéæˆå‘˜å‡½æ•°ä¸­çš„éšå¼è½¬åŒ–"></a>é˜²æ­¢æ™®é€šéæˆå‘˜å‡½æ•°ä¸­çš„éšå¼è½¬åŒ–</h4><p>â€‹    C++ç»§æ‰¿äºCæ„å‘³ç€,å¾ˆå¤šå…¶ä»–ç±»å‹è¢«éšå¼çš„è½¬æ¢ä¸ºin ç±»å‹,ä½†æ˜¯æœ‰äº›è°ƒç”¨å¯ä»¥ç¼–è¯‘ä½†æ˜¯æ²¡æœ‰ä»»ä½•æ„ä¹‰.</p><p>â€‹    ä¸¾ä¸ªä¾‹å­,åŠ å…¥æˆ‘ä»¬æœ‰ä¸ªéæˆå‘˜å‡½æ•°,ä»¥ä¸€ä¸ªæ•´æ•°ä½å‚æ•°,ç„¶åè¿”å›è¿™ä¸ªå‚æ•°æ˜¯ä¸æ˜¯å¹¸è¿æ•°å­—:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">bool</span> <span class="token function">isLucky</span><span class="token punctuation">(</span><span class="token keyword">int</span> number<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">isLucky</span><span class="token punctuation">(</span><span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">isLucky</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">isLucky</span><span class="token punctuation">(</span><span class="token number">3.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â€‹    å¦‚æœå¹¸è¿æ•°å­—ä¸€å®šè¦æ˜¯ä¸€ä¸ªæ•´æ•°,æˆ‘ä»¬å¸Œæœ›èƒ½åˆ°é˜»æ­¢ä¸Šé¢é‚£ç§å½¢å¼çš„è°ƒç”¨ã€‚</p><p>â€‹    å®Œæˆè¿™ä¸ªä»»åŠ¡çš„ä¸€ä¸ªæ–¹æ³•æ˜¯ä¸ºæƒ³è¢«æ’é™¤å‡ºå»çš„ç±»å‹çš„é‡è½½å‡½æ•°å£°æ˜ä¸ºåˆ é™¤çš„:</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">bool</span> <span class="token function">isLucky</span><span class="token punctuation">(</span><span class="token keyword">int</span> number<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">bool</span> <span class="token function">isLucky</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token keyword">delete</span><span class="token punctuation">;</span><span class="token keyword">bool</span> <span class="token function">isLucky</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token keyword">delete</span><span class="token punctuation">;</span><span class="token keyword">bool</span> <span class="token function">isLucky</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token keyword">delete</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â€‹    å¦‚æœç»™floatä¸€ä¸ªè½¬æ¢ä¸ºintæˆ–è€…doubleçš„å¯èƒ½æ€§, C++æ€»æ˜¯å€¾å‘äºè½¬åŒ–ä¸ºdoubleçš„ã€‚ä»¥floatç±»å‹è°ƒç”¨isLuckyæ€»æ˜¯è°ƒç”¨å¯¹åº”çš„doubleé‡è½½,è€Œä¸æ˜¯intç±»å‹çš„é‚£ä¸ªé‡è½½ã€‚ç»“æœå°±æ˜¯å°†doubleç±»å‹çš„é‡è½½åˆ é™¤å°†ä¼šé˜»æ­¢floatç±»å‹çš„è°ƒç”¨ç¼–è¯‘ã€‚</p><h4 id="é˜»æ­¢åº”è¯¥è¢«ç¦ç”¨çš„æ¨¡æ¿å®ç°"><a href="#é˜»æ­¢åº”è¯¥è¢«ç¦ç”¨çš„æ¨¡æ¿å®ç°" class="headerlink" title="é˜»æ­¢åº”è¯¥è¢«ç¦ç”¨çš„æ¨¡æ¿å®ç°"></a>é˜»æ­¢åº”è¯¥è¢«ç¦ç”¨çš„æ¨¡æ¿å®ç°</h4><p>â€‹    å‡è®¾ä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªå†…åµŒæŒ‡é’ˆçš„æ¨¡æ¿ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token keyword">void</span> <span class="token function">processPointer</span><span class="token punctuation">(</span>T<span class="token operator">*</span> ptr<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>â€‹    ä½†æ˜¯åœ¨æŒ‡é’ˆå®¶æ—ä¸­ï¼Œæœ‰ä¸¤ä¸ªç‰¹æ®Šçš„æŒ‡é’ˆã€‚</p><p>ä¸€ä¸ªæ˜¯ void* æŒ‡é’ˆï¼Œå› ä¸ºæ²¡æœ‰åŠæ³•å¯¹å®ƒä»¬è§£æå¼•ç”¨ï¼Œé€’å¢æˆ–è€…é€’å‡ã€‚</p><p>å¦ä¸€ä¸ªæ˜¯ char* æŒ‡é’ˆï¼Œå› ä¸ºå®ƒä»¬å¾€å¾€è¡¨ç¤ºæŒ‡å‘Cç±»å‹çš„å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯æŒ‡å‘ç‹¬ç«‹å­—ç¬¦çš„æŒ‡é’ˆã€‚</p><p>â€‹    è¿™äº›ç‰¹æ®Šæƒ…å†µç»å¸¸éœ€è¦ç‰¹æ®Šå¤„ç†ã€‚å¦‚æœå¸Œæœ›ä¸èƒ½ä»¥ void* æˆ–è€… char* ä¸ºå‚æ•°è°ƒç”¨è¯¥å‡½æ•°ï¼Œåªéœ€è¦åˆ é™¤è¿™äº›å®ç°ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token keyword">void</span> <span class="token generic-function"><span class="token function">processPointer</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token keyword">delete</span><span class="token punctuation">;</span><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token keyword">void</span> <span class="token generic-function"><span class="token function">processPointer</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token keyword">delete</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç°åœ¨ï¼Œä½¿ç”¨ void* æˆ–è€… char* è°ƒç”¨è¯¥å‡½æ•°éƒ½æ˜¯æ— æ•ˆçš„ï¼Œä½†ä½¿ç”¨ const void* æˆ–è€… const char* è°ƒç”¨ä¹Ÿéœ€è¦æ˜¯æ— æ•ˆçš„ï¼Œ æ‰€ä»¥è¿™äº›å®ç°ä¹Ÿéœ€è¦è¢«åˆ é™¤ã€‚ï¼ˆç•¥ï¼‰</p><p>å¦‚æœç±»å†…éƒ¨æœ‰ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ï¼Œæƒ³é€šè¿‡å£°æ˜å®ƒä»¬ä¸ºç§æœ‰æ¥ç¦æ­¢æŸäº›å®ç°ï¼Œæ˜¯åšä¸åˆ°çš„ï¼Œå› ä¸ºèµ‹äºˆä¸€ä¸ªæˆå‘˜å‡½æ•°æ¨¡æ¿çš„æŸç§ç‰¹æ®Šæƒ…å†µä¸‹çš„æ‹¥æœ‰ä¸åŒäºæ¨¡æ¿ä¸»ä½“çš„è®¿é—®æƒé™æ˜¯ä¸å¯èƒ½çš„ã€‚</p><p>ï¼ˆå¯ä»¥å£°æ˜ void* å’Œ char* çš„ç‰ˆæœ¬å´ä¸å®ç°å®ƒä»¬ ï¼‰</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">MyClass</span><span class="token punctuation">{</span><span class="token keyword">public</span><span class="token operator">:</span><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token keyword">void</span> <span class="token function">function</span><span class="token punctuation">(</span>T t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">private</span><span class="token operator">:</span><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token comment">//é”™è¯¯ï¼ï¼ï¼</span><span class="token keyword">void</span> <span class="token function">function</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¹¶ä¸”æ¨¡æ¿çš„ç‰¹æ®Šæƒ…å†µå¿…é¡»è¦å†™åœ¨å‘½åç©ºé—´çš„ä½œç”¨åŸŸå†…ï¼Œè€Œä¸æ˜¯ç±»çš„ä½œç”¨åŸŸå†…ã€‚</p><p>ä¸è¿‡ï¼Œè¿™ä¸ªé—®é¢˜å¯¹äºåˆ é™¤å‡½æ•°æ˜¯ä¸å­˜åœ¨çš„ï¼Œå®ƒä»¬ä¹Ÿå¯ä»¥åœ¨ç±»å¤–è¢«å£°æ˜ä¸ºæ˜¯è¢«åˆ é™¤çš„ï¼ˆä¹Ÿå°±æ˜¯åœ¨å‘½åç©ºé—´çš„ä½œç”¨åŸŸå†…ï¼‰</p><h3 id="deleteçš„æ³¨æ„äº‹é¡¹"><a href="#deleteçš„æ³¨æ„äº‹é¡¹" class="headerlink" title="deleteçš„æ³¨æ„äº‹é¡¹"></a>deleteçš„æ³¨æ„äº‹é¡¹</h3><p>â€‹    åˆ é™¤çš„å‡½æ•°ä¸èƒ½é€šè¿‡ä»»ä½•æ–¹å¼è¢«ä½¿ç”¨</p><p>â€‹    æ–¹ä¾¿èµ·è§,åˆ é™¤å‡½æ•°è¢«å£°æ˜ä¸ºå…¬æœ‰çš„,è€Œä¸æ˜¯ç§æœ‰çš„ã€‚è¿™æ ·è®¾è®¡çš„åŸå› æ˜¯,å½“å®¢æˆ·ç«¯ç¨‹åºå°è¯•ä½¿ç”¨ä¸€ä¸ªæˆå‘˜å‡½æ•°çš„æ—¶å€™, C++ä¼šåœ¨æ£€æŸ¥åˆ é™¤çŠ¶æ€ä¹‹å‰æ£€æŸ¥å¯è®¿é—®æƒé™ã€‚å½“å®¢æˆ·ç«¯ä»£ç å°è¯•è®¿é—®ä¸€ä¸ªåˆ é™¤çš„ç§æœ‰å‡½æ•°æ—¶,ä¸€äº›ç¼–è¯‘å™¨ä»…ä»…ä¼šè­¦æŠ¥è¯¥å‡½æ•°ä¸ºç§æœ‰,å°½ç®¡è¿™é‡Œå‡½æ•°çš„å¯è®¿é—®æ€§å¹¶ä¸æœ¬è´¨ä¸Šå½±å“å®ƒæ˜¯å¦å¯ä»¥è¢«ä½¿ç”¨ã€‚å½“æŠŠç§æœ‰æœªå®šä¹‰çš„å‡½æ•°æ”¹ä¸ºå¯¹åº”çš„åˆ é™¤å‡½æ•°æ—¶,ç‰¢è®°è¿™ä¸€ç‚¹æ˜¯å¾ˆæœ‰æ„ä¹‰çš„,å› ä¸ºä½¿è¿™ä¸ªå‡½æ•°ä¸ºå…¬æœ‰çš„å¯ä»¥äº§ç”Ÿæ›´æ˜“è¯»çš„é”™è¯¯ä¿¡æ¯ã€‚</p><h3 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a>å°ç»“ï¼š</h3><ol><li>ä¼˜å…ˆä½¿ç”¨åˆ é™¤å‡½æ•°è€Œä¸æ˜¯ç§æœ‰è€Œä¸å®šä¹‰çš„å‡½æ•°</li><li>ä»»ä½•å‡½æ•°éƒ½å¯ä»¥è¢«å£°æ˜ä¸ºåˆ é™¤ï¼ŒåŒ…æ‹¬éæˆå‘˜å‡½æ•°å’Œæ¨¡æ¿å®ç°</li></ol><h3 id="æ‰©å±•ï¼š"><a href="#æ‰©å±•ï¼š" class="headerlink" title="æ‰©å±•ï¼š"></a>æ‰©å±•ï¼š</h3><h4 id="å¯¹äºæˆå‘˜å‡½æ•°ï¼š"><a href="#å¯¹äºæˆå‘˜å‡½æ•°ï¼š" class="headerlink" title="å¯¹äºæˆå‘˜å‡½æ•°ï¼š"></a>å¯¹äºæˆå‘˜å‡½æ•°ï¼š</h4><ol><li>è¢«deleteäº†è¿˜æ˜¯å¯ä»¥é‡è½½çš„</li><li>è¢«deleteäº†ï¼Œé‡Œé¢å†™ä¸ªé»˜è®¤å‚æ•°æ²¡é—®é¢˜</li><li>deleteå‡½æ•°å¯ä»¥è¢«ç»§æ‰¿çš„ï¼ï¼ï¼ï¼ˆçœ‹IDEçš„æŠ¥é”™ï¼‰(ä½†ä¸èƒ½ç”¨)</li><li>ç§æœ‰çš„deleteå‡½æ•°è¢«ç±»ç”¨æˆ·ä½¿ç”¨äº†ä¼šä»¥â€œä½¿ç”¨ç§æœ‰æˆå‘˜å‡½æ•°â€çš„åä¹‰æŠ¥é”™</li><li>deleteå‡½æ•°ä¸èƒ½å¤Ÿè¢«å®šä¹‰ï¼Œåªèƒ½å¤Ÿè¢«å£°æ˜</li></ol><h4 id="å¯¹äºæ™®é€šå‡½æ•°ï¼š"><a href="#å¯¹äºæ™®é€šå‡½æ•°ï¼š" class="headerlink" title="å¯¹äºæ™®é€šå‡½æ•°ï¼š"></a>å¯¹äºæ™®é€šå‡½æ•°ï¼š</h4><ol><li>å¯ä»¥é˜²æ­¢ä¸æƒ³è¦çš„éšå¼è½¬åŒ–</li><li>ä½†åˆ é™¤ä¸€ç§ç±»å‹çš„ï¼Œå¯èƒ½ä¼šå½±å“ä¸æ­¢ä¸€ç§ç±»å‹çš„éšå¼è½¬åŒ–ï¼ˆä¼šå¯¼è‡´å…¶ä»–ç±»å‹çš„ä¸æ˜ç¡®ï¼Œambiguousï¼‰</li><li>æ¨¡æ¿ç±»çš„åˆ é™¤æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§ä½¿ç”¨templateï¼Œä¸€ç§ç›´æ¥å†™å‡ºï¼ˆæš‚æ—¶æ²¡å‘ç°ä¼šå‡ºå•¥é—®é¢˜ï¼‰</li></ol><h2 id="ä½¿ç”¨overrideå…³é”®å­—å£°æ˜è¦†ç›–çš„å‡½æ•°"><a href="#ä½¿ç”¨overrideå…³é”®å­—å£°æ˜è¦†ç›–çš„å‡½æ•°" class="headerlink" title="ä½¿ç”¨overrideå…³é”®å­—å£°æ˜è¦†ç›–çš„å‡½æ•°"></a>ä½¿ç”¨overrideå…³é”®å­—å£°æ˜è¦†ç›–çš„å‡½æ•°</h2><p>åœ¨C++98ä¸­ï¼Œå¦‚æœè¦å‘ç”Ÿå‡½æ•°çš„è¦†ç›–ï¼Œå¿…é¡»æ»¡è¶³ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶ï¼š</p><ul><li>åŸºç±»ä¸­çš„å‡½æ•°å¿…é¡»æ˜¯è™šå‡½æ•°</li><li>åŸºç±»å’Œæ´¾ç”Ÿç±»ä¸­å‡½æ•°çš„åå­—å¿…é¡»å®Œå…¨ç›¸åŒï¼ˆææ„å‡½æ•°é™¤å¤–ï¼‰</li><li>åŸºç±»å’Œæ´¾ç”Ÿç±»ä¸­çš„å‡½æ•°å½¢å‚ç±»å‹å¿…é¡»å®Œå…¨ä¸€æ ·</li><li>åŸºç±»å’Œæ´¾ç”Ÿç±»ä¸­çš„å‡½æ•°çš„å¸¸é‡ç‰¹æ€§å¿…é¡»å®Œå…¨ä¸€æ ·</li><li>åŸºç±»å’Œæ´¾ç”Ÿç±»ä¸­çš„å‡½æ•°è¿”å›å€¼å’Œå¼‚å¸¸å£°æ˜å¿…é¡»æ˜¯å…¼å®¹çš„</li></ul><p>åœ¨C++11ä¸­ï¼Œè¿˜æœ‰ä¸€æ¡ï¼š</p><ul><li><p>åŸºç±»å’Œæ´¾ç”Ÿç±»çš„å¼•ç”¨ä¿®é¥°ç¬¦å¿…é¡»å®Œå…¨ä¸€æ ·</p><p>ï¼ˆå¼•ç”¨ä¿®é¥°ç¬¦æ˜¯ä¸ºäº†å®ç°é™åˆ¶æˆå‘˜å‡½æ•°ä»…ç”¨äºå·¦å€¼æˆ–è€…å³å€¼ï¼‰</p></li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Widget</span><span class="token punctuation">{</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">void</span> <span class="token function">doWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span><span class="token punctuation">;</span><span class="token comment">//åªæœ‰*thisä¸ºå·¦å€¼æ—¶ï¼Œè¿™ä¸ªç‰ˆæœ¬æ‰ä¼šè¢«è°ƒç”¨</span>    <span class="token keyword">void</span> <span class="token function">doWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span><span class="token punctuation">;</span><span class="token comment">//åªæœ‰*thisä¸ºå³å€¼æ—¶ï¼Œè¿™ä¸ªå‡½æ•°æ‰ä¼šè¢«è°ƒç”¨</span><span class="token punctuation">}</span><span class="token punctuation">;</span>Widget <span class="token function">makeWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å·¥å‚å‡½æ•°ï¼Œè¿”å›å³å€¼</span>Widget w<span class="token punctuation">;</span><span class="token comment">//æ­£å¸¸å¯¹è±¡ï¼ˆå·¦å€¼ï¼‰</span>w<span class="token punctuation">.</span><span class="token function">doWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è°ƒç”¨äº†Widget::doWork &amp;</span><span class="token function">makeWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è°ƒç”¨äº†Widget::doWork &amp;&amp;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­£æ˜¯å› ä¸ºè¦†ç›–æœ‰è¿™ä¹ˆå¤šçš„è¦æ±‚ï¼Œæ‰€ä»¥ä¸€ä¸ªå¾ˆå°çš„é”™è¯¯éƒ½å¯ä»¥é€ æˆå¾ˆå¤§çš„åå·®ã€‚å¹¶ä¸”è¦†ç›–å‡½æ•°ä¸­å‡ºç°çš„é”™è¯¯é€šå¸¸è¿˜æ˜¯åˆæ³•çš„ï¼Œï¼Œä½†å®ƒå¯¼è‡´çš„ç»“æœå¹¶ä¸æ˜¯ä½ æƒ³è¦çš„ã€‚æ‰€ä»¥å½“ä½ çŠ¯äº†æŸäº›é”™è¯¯çš„æ—¶å€™ï¼Œä½ å¹¶ä¸èƒ½ä¾èµ–äºç¼–è¯‘å™¨å¯¹ä½ çš„é€šçŸ¥ã€‚</p><p>ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œè¿™äº›ä»£ç æ˜¯å®Œå…¨åˆæ³•çš„ï¼Œä½†å®ƒä¸€ä¸ªè™šå‡½æ•°éƒ½æ²¡æœ‰è¢«è¦†ç›–â€”â€”æ²¡æœ‰ä»»ä½•ä¸€ä¸ªæ´¾ç”Ÿç±»çš„å‡½æ•°æ˜¯å’ŒåŸºç±»çš„å¯¹åº”å‡½æ•°ç»‘å®šçš„ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span><span class="token class-name">Base</span><span class="token punctuation">{</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">virtual</span><span class="token keyword">void</span><span class="token function">mf1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span>    <span class="token keyword">virtual</span><span class="token keyword">void</span><span class="token function">mf2</span><span class="token punctuation">(</span><span class="token keyword">int</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">virtual</span><span class="token keyword">void</span><span class="token function">mf3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token punctuation">;</span>    <span class="token keyword">void</span><span class="token function">mf4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">class</span><span class="token class-name">Derived</span><span class="token operator">:</span><span class="token base-clause"><span class="token keyword">public</span><span class="token class-name">Base</span></span><span class="token punctuation">{</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">virtual</span><span class="token keyword">void</span><span class="token function">mf1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">virtual</span><span class="token keyword">void</span><span class="token function">mf2</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token keyword">int</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">virtual</span><span class="token keyword">void</span><span class="token function">mf3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">;</span>    <span class="token keyword">void</span><span class="token function">mf4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æç¤ºï¼š</p><ul><li>mf1åœ¨Baseä¸­å£°æ˜å¸¸æˆå‘˜å‡½æ•°,ä½†æ˜¯åœ¨Derivedä¸­æ²¡æœ‰</li><li>mf2åœ¨Baseä¸­ä»¥intä¸ºå‚æ•°,ä½†æ˜¯åœ¨Derivedä¸­ä»¥unsigned intä¸ºå‚æ•°</li><li>mf3åœ¨Baseä¸­æœ‰å·¦å€¼ä¿®é¥°ç¬¦,ä½†æ˜¯åœ¨Derivedä¸­æ˜¯å³å€¼ä¿®é¥°ç¬¦</li><li>mf4æ²¡æœ‰ç»§æ‰¿Baseä¸­çš„è™šå‡½æ•°</li></ul><p>å› ä¸ºå£°æ˜æ´¾ç”Ÿç±»çš„è¦†ç›–å‡½æ•°å¾ˆé‡è¦ï¼Œåˆå¦‚æ­¤å®¹æ˜“å‡ºé”™ï¼Œæ‰€ä»¥C++11æä¾›äº†ä¸€ç§æ–¹æ³•æ¥æ˜¾ç¤ºçš„æ ‡æ˜æ´¾ç”Ÿç±»ä¸­çš„å‡½æ•°æ˜¯ä¸ºäº†æ”¹å†™åŸºç±»çš„ç‰ˆæœ¬ï¼Œä¸ºå…¶åŠ ä¸Šoverrideå£°æ˜å³å¯ã€‚</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span><span class="token class-name">Derived</span><span class="token operator">:</span><span class="token base-clause"><span class="token keyword">public</span><span class="token class-name">Base</span></span> <span class="token punctuation">{</span><span class="token keyword">public</span><span class="token operator">:</span>    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">mf1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span>    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">mf2</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span>    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">mf3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">override</span><span class="token punctuation">;</span>    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">mf4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token keyword">override</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·ï¼Œä¸Šé¢è¿™äº›ä»£ç å°±æ— æ³•é€šè¿‡ç¼–è¯‘äº†ï¼Œå¹¶ä¸”ç¼–è¯‘å™¨ä¼šæŠŠè¦†ç›–å‡½æ•°æ‰€æœ‰çš„é—®é¢˜æ­éœ²å‡ºæ¥ã€‚</p><h3 id="æ‰©å±•ï¼š-1"><a href="#æ‰©å±•ï¼š-1" class="headerlink" title="æ‰©å±•ï¼š"></a>æ‰©å±•ï¼š</h3><h4 id="ä¸æˆå‘˜å‡½æ•°æœ‰å…³çš„å‡ ä¸ªæè¿°ç¬¦ï¼š"><a href="#ä¸æˆå‘˜å‡½æ•°æœ‰å…³çš„å‡ ä¸ªæè¿°ç¬¦ï¼š" class="headerlink" title="ä¸æˆå‘˜å‡½æ•°æœ‰å…³çš„å‡ ä¸ªæè¿°ç¬¦ï¼š"></a>ä¸æˆå‘˜å‡½æ•°æœ‰å…³çš„å‡ ä¸ªæè¿°ç¬¦ï¼š</h4><ol><li>æˆå‘˜å‡½æ•°å‰é¢ä½¿ç”¨const è¡¨ç¤ºè¿”å›å€¼ä¸ºconst</li><li>æˆå‘˜å‡½æ•°åé¢åŠ  constè¡¨ç¤ºå‡½æ•°ä¸å¯ä»¥ä¿®æ”¹classçš„æˆå‘˜</li><li>å¦‚æœ<strong>æ´¾ç”Ÿç±»</strong>åœ¨è™šå‡½æ•°å£°æ˜æ—¶ä½¿ç”¨äº†overrideæè¿°ç¬¦ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°å¿…é¡»é‡è½½å…¶åŸºç±»ä¸­çš„åŒåå‡½æ•°ï¼Œå¦åˆ™ä»£ç å°†æ— æ³•é€šè¿‡ç¼–è¯‘ã€‚</li><li>å½“ä¸å¸Œæœ›æŸä¸ªç±»è¢«ç»§æ‰¿ï¼Œæˆ–ä¸å¸Œæœ›æŸä¸ªè™šå‡½æ•°è¢«é‡å†™ï¼Œå¯ä»¥åœ¨ç±»åå’Œè™šå‡½æ•°åæ·»åŠ finalå…³é”®å­—ï¼Œæ·»åŠ finalå…³é”®å­—åè¢«ç»§æ‰¿æˆ–é‡å†™ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™</li></ol><h4 id="é‡è½½ä¸è¦†ç›–"><a href="#é‡è½½ä¸è¦†ç›–" class="headerlink" title="é‡è½½ä¸è¦†ç›–"></a>é‡è½½ä¸è¦†ç›–</h4><p>â€‹    è¦†ç›–æ˜¯æŒ‡æ´¾ç”Ÿç±»ä¸­å¦‚æœå­˜åœ¨é‡æ–°å®šä¹‰çš„å‡½æ•°ï¼Œå…¶å‡½æ•°åã€å‚æ•°åˆ—ã€è¿”å›å€¼ç±»å‹å¿…é¡»åŒçˆ¶ç±»ä¸­çš„ç›¸å¯¹åº”è¢«è¦†ç›–çš„å‡½æ•°ä¸¥æ ¼ä¸€è‡´ã€‚è¦†ç›–å‡½æ•°å’Œè¢«è¦†ç›–å‡½æ•°åªæœ‰å‡½æ•°ä½“ä¸åŒï¼Œå½“æ´¾ç”Ÿç±»å¯¹è±¡è°ƒç”¨å­ç±»ä¸­è¯¥åŒåå‡½æ•°æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨å­ç±»ä¸­çš„è¦†ç›–ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯çˆ¶ç±»ä¸­çš„è¢«è¦†ç›–å‡½æ•°ç‰ˆæœ¬ã€‚</p><h5 id="æˆå‘˜å‡½æ•°è¢«é‡è½½çš„ç‰¹å¾ï¼š"><a href="#æˆå‘˜å‡½æ•°è¢«é‡è½½çš„ç‰¹å¾ï¼š" class="headerlink" title="æˆå‘˜å‡½æ•°è¢«é‡è½½çš„ç‰¹å¾ï¼š"></a>æˆå‘˜å‡½æ•°è¢«é‡è½½çš„ç‰¹å¾ï¼š</h5><p>ï¼ˆ1ï¼‰ç›¸åŒçš„èŒƒå›´ï¼ˆåœ¨åŒä¸€ä¸ªç±»ä¸­ï¼‰ï¼›</p><p>ï¼ˆ2ï¼‰å‡½æ•°åå­—ç›¸åŒï¼ˆå¿…é¡»çš„ï¼Œå¦åˆ™å±äºä¸åŒçš„å‡½æ•°äº†ï¼Œæ›´è°ˆä¸ä¸Šé‡è½½ï¼‰ï¼›</p><p>ï¼ˆ3ï¼‰å‚æ•°ç±»å‹æˆ–ä¸ªæ•°ï¼Œè‡³å°‘æœ‰ä¸€ç§ä¸åŒï¼ˆå¦‚æœéƒ½ç›¸åŒçš„è¯ï¼Œå°±æ˜¯å‡½æ•°çš„é‡å®šä¹‰äº†ï¼›è¿˜è¦æ³¨æ„çš„æ˜¯ï¼šå¦‚æœå‡½æ•°å‚æ•°ç›¸åŒï¼Œä»…è¿”å›å€¼ä¸åŒçš„è¯ï¼Œä¸æ˜¯é‡è½½å‡½æ•°ï¼Œç¼–è¯‘æ—¶ä¼šæŠ¥â€œæœ‰æ­§ä¹‰â€çš„é”™è¯¯ï¼‰ï¼›</p><p>ï¼ˆ4ï¼‰virtualå…³é”®å­—å¯æœ‰å¯æ— ï¼ˆè¿™ä¸ªé‡è½½å‡½æ•°ä¸è™šå‡½æ•°ä¸€ç‚¹å…³ç³»æ²¡æœ‰ï¼Œå³ä½¿åŠ ä¸Šäº†ä¹Ÿä¸æ˜¯è™šå‡½æ•°ã€‚å¦‚æœåœ¨é¢è¯•é¢˜ä¸­é‡åˆ°äº†ï¼Œçº¯ç²¹æ˜¯ä¸ºäº†æ··æ·†ä½ çš„æ€ç»´ï¼Œè€ƒå¯Ÿä½ å¯¹æ¦‚å¿µçš„ç†è§£ï¼‰ã€‚</p><h5 id="è¦†ç›–æ˜¯æŒ‡æ´¾ç”Ÿç±»å‡½æ•°è¦†ç›–åŸºç±»å‡½æ•°ï¼Œç‰¹å¾æ˜¯ï¼š"><a href="#è¦†ç›–æ˜¯æŒ‡æ´¾ç”Ÿç±»å‡½æ•°è¦†ç›–åŸºç±»å‡½æ•°ï¼Œç‰¹å¾æ˜¯ï¼š" class="headerlink" title="è¦†ç›–æ˜¯æŒ‡æ´¾ç”Ÿç±»å‡½æ•°è¦†ç›–åŸºç±»å‡½æ•°ï¼Œç‰¹å¾æ˜¯ï¼š"></a>è¦†ç›–æ˜¯æŒ‡æ´¾ç”Ÿç±»å‡½æ•°è¦†ç›–åŸºç±»å‡½æ•°ï¼Œç‰¹å¾æ˜¯ï¼š</h5><p><strong>ï¼ˆ1ï¼‰ä¸åŒçš„èŒƒå›´ï¼ˆåˆ†åˆ«ä½äºæ´¾ç”Ÿç±»ä¸åŸºç±»ï¼‰ï¼›</strong></p><p><strong>ï¼ˆ2ï¼‰å‡½æ•°åå­—ç›¸åŒï¼›</strong></p><p><strong>ï¼ˆ3ï¼‰å‚æ•°ç›¸åŒï¼ˆè¿™å°±å±äºé‡å®šä¹‰å‡½æ•°äº†ï¼‰ï¼›</strong></p><p><strong>ï¼ˆ4ï¼‰åŸºç±»å‡½æ•°å¿…é¡»æœ‰virtualå…³é”®å­—ï¼ˆè¿™å°±æ˜¯è™šå‡½æ•°äº†ï¼‰ã€‚</strong></p><h4 id="ä»¤äººè¿·æƒ‘çš„éšè—è§„åˆ™"><a href="#ä»¤äººè¿·æƒ‘çš„éšè—è§„åˆ™" class="headerlink" title="ä»¤äººè¿·æƒ‘çš„éšè—è§„åˆ™"></a>ä»¤äººè¿·æƒ‘çš„éšè—è§„åˆ™</h4><p>æœ¬æ¥ä»…ä»…åŒºåˆ«é‡è½½ä¸è¦†ç›–å¹¶ä¸ç®—å›°éš¾ï¼Œä½†æ˜¯C++çš„éšè—è§„åˆ™ä½¿é—®é¢˜å¤æ‚æ€§é™¡ç„¶å¢åŠ ã€‚è¿™é‡Œâ€œéšè—â€æ˜¯æŒ‡æ´¾ç”Ÿç±»çš„å‡½æ•°å±è”½äº†ä¸å…¶åŒåçš„åŸºç±»å‡½æ•°ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š </p><p><strong>ï¼ˆ1ï¼‰å¦‚æœæ´¾ç”Ÿç±»çš„å‡½æ•°ä¸åŸºç±»çš„å‡½æ•°åŒåï¼Œä½†æ˜¯å‚æ•°ä¸åŒã€‚æ­¤æ—¶ï¼Œä¸è®ºæœ‰æ— virtualå…³é”®å­—ï¼ŒåŸºç±»çš„å‡½æ•°å°†è¢«éšè—ï¼ˆæ³¨æ„åˆ«ä¸é‡è½½æ··æ·†ï¼‰ã€‚</strong></p><p><strong>ï¼ˆ2ï¼‰å¦‚æœæ´¾ç”Ÿç±»çš„å‡½æ•°ä¸åŸºç±»çš„å‡½æ•°åŒåï¼Œå¹¶ä¸”å‚æ•°ä¹Ÿç›¸åŒï¼Œä½†æ˜¯åŸºç±»å‡½æ•°æ²¡æœ‰virtualå…³é”®å­—ã€‚æ­¤æ—¶ï¼ŒåŸºç±»çš„å‡½æ•°è¢«éšè—ï¼ˆæ³¨æ„åˆ«ä¸è¦†ç›–æ··æ·†ï¼›å¦‚æœåŸºç±»å‡½æ•°æœ‰virtualå…³é”®å­—ï¼Œå°±å±äºå‡½æ•°çš„è¦†ç›–äº†ï¼‰ã€‚</strong></p><h4 id="å…³äºè™šå‡½æ•°ä¸çº¯è™šå‡½æ•°ï¼š"><a href="#å…³äºè™šå‡½æ•°ä¸çº¯è™šå‡½æ•°ï¼š" class="headerlink" title="å…³äºè™šå‡½æ•°ä¸çº¯è™šå‡½æ•°ï¼š"></a>å…³äºè™šå‡½æ•°ä¸çº¯è™šå‡½æ•°ï¼š</h4><p>å®šä¹‰ä¸€ä¸ªå‡½æ•°ä¸ºè™šå‡½æ•°ï¼Œä¸ä»£è¡¨å‡½æ•°ä¸ºä¸è¢«å®ç°çš„å‡½æ•°ã€‚</p><p>å®šä¹‰å®ƒä¸ºè™šå‡½æ•°æ˜¯ä¸ºäº†å…è®¸ç”¨åŸºç±»çš„æŒ‡é’ˆæ¥è°ƒç”¨å­ç±»çš„è¿™ä¸ªå‡½æ•°ã€‚</p><p>å®šä¹‰ä¸€ä¸ªå‡½æ•°ä¸ºçº¯è™šå‡½æ•°ï¼Œæ‰ä»£è¡¨å‡½æ•°æ²¡æœ‰è¢«å®ç°ã€‚ï¼ˆè¿™é‡Œå¥½åƒæœ‰é—®é¢˜ã€‚ã€‚ã€‚ï¼‰</p><p>å®šä¹‰çº¯è™šå‡½æ•°æ˜¯ä¸ºäº†å®ç°ä¸€ä¸ªæ¥å£ï¼Œèµ·åˆ°ä¸€ä¸ªè§„èŒƒçš„ä½œç”¨ï¼Œè§„èŒƒç»§æ‰¿è¿™ä¸ªç±»çš„ç¨‹åºå‘˜å¿…é¡»å®ç°è¿™ä¸ªå‡½æ•°ã€‚</p><p>è™šå‡½æ•°åªèƒ½å€ŸåŠ©äºæŒ‡é’ˆæˆ–è€…å¼•ç”¨æ¥è¾¾åˆ°å¤šæ€çš„æ•ˆæœ</p>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡ ç§å¸¸è§çš„é¢œè‰²ç©ºé—´</title>
      <link href="2020/08/17/opencv-notes-2/"/>
      <url>2020/08/17/opencv-notes-2/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢œè‰²ç©ºé—´"><a href="#é¢œè‰²ç©ºé—´" class="headerlink" title="é¢œè‰²ç©ºé—´"></a>é¢œè‰²ç©ºé—´</h1><p><strong>é¢œè‰²ç©ºé—´</strong>ï¼ˆè‹±è¯­ï¼šColor spaceï¼‰æ˜¯å¯¹<a href="https://zh.wikipedia.org/wiki/%E8%89%B2%E5%BD%A9">è‰²å½©</a>çš„ç»„ç»‡æ–¹å¼ã€‚å€ŸåŠ©è‰²å½©ç©ºé—´å’Œé’ˆå¯¹ç‰©ç†è®¾å¤‡çš„æµ‹è¯•ï¼Œå¯ä»¥å¾—åˆ°è‰²å½©çš„å›ºå®š<a href="https://zh.wikipedia.org/wiki/%E6%A8%A1%E6%93%AC%E4%BF%A1%E8%99%9F">æ¨¡æ‹Ÿ</a>å’Œ<a href="https://zh.wikipedia.org/wiki/%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7">æ•°å­—</a>è¡¨ç¤ºã€‚è‰²å½©ç©ºé—´å¯ä»¥åªé€šè¿‡ä»»æ„æŒ‘é€‰ä¸€äº›é¢œè‰²æ¥å®šä¹‰ï¼Œæ¯”å¦‚åƒ<a href="https://zh.wikipedia.org/wiki/%E5%BD%A9%E9%80%9A">å½©é€š</a>ç³»ç»Ÿå°±åªæ˜¯æŠŠä¸€ç»„ç‰¹å®šçš„é¢œè‰²ä½œä¸º<a href="https://zh.wikipedia.org/wiki/%E8%AA%BF%E8%89%B2%E7%9B%A4_(%E9%9B%BB%E8%85%A6%E5%9C%96%E5%BD%A2%E5%AD%B8)">æ ·æœ¬</a>ï¼Œç„¶åç»™æ¯ä¸ªé¢œè‰²å®šä¹‰åå­—å’Œä»£ç ï¼›ä¹Ÿå¯ä»¥æ˜¯åŸºäºä¸¥è°¨çš„æ•°å­¦å®šä¹‰ï¼Œæ¯”å¦‚ <a href="https://zh.wikipedia.org/wiki/Adobe_RGB%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4">Adobe RGB</a>ã€<a href="https://zh.wikipedia.org/wiki/SRGB%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4">sRGB</a>ã€‚</p><p>åœ¨è®¡ç®—æœºè§†è§‰ï¼Œå°¤å…¶é¢œè‰²è¯†åˆ«ç›¸å…³çš„ç®—æ³•ä¸­ï¼Œrgb,hsv,labé¢œè‰²ç©ºé—´æ··ç”¨æ˜¯å¸¸ç”¨çš„æ–¹æ³•ã€‚</p><h2 id="RGB"><a href="#RGB" class="headerlink" title="RGB"></a>RGB</h2><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><p>RGBé¢œè‰²ç©ºé—´ä»¥R(Red:çº¢)ã€G(Green:ç»¿)ã€B(Blue:è“)ä¸‰ç§åŸºæœ¬è‰²ä¸ºåŸºç¡€ï¼Œè¿›è¡Œä¸åŒç¨‹åº¦çš„å åŠ ï¼Œäº§ç”Ÿä¸°å¯Œè€Œå¹¿æ³›çš„é¢œè‰²ï¼Œæ‰€ä»¥ä¿—ç§°ä¸‰åŸºè‰²æ¨¡å¼ã€‚åœ¨å¤§è‡ªç„¶ä¸­æœ‰æ— ç©·å¤šç§ä¸åŒçš„é¢œè‰²ï¼Œè€Œäººçœ¼åªèƒ½åˆ†è¾¨æœ‰é™ç§ä¸åŒçš„é¢œè‰²ï¼ŒRGBæ¨¡å¼å¯è¡¨ç¤ºä¸€åƒå…­ç™¾å¤šä¸‡ç§ä¸åŒçš„é¢œè‰²ï¼Œåœ¨äººçœ¼çœ‹æ¥å®ƒéå¸¸æ¥è¿‘å¤§è‡ªç„¶çš„é¢œè‰²ï¼Œæ•…åˆç§°ä¸ºè‡ªç„¶è‰²å½©æ¨¡å¼ã€‚çº¢ç»¿è“ä»£è¡¨å¯è§å…‰è°±ä¸­çš„ä¸‰ç§åŸºæœ¬é¢œè‰²æˆ–ç§°ä¸ºä¸‰åŸè‰²ï¼Œæ¯ä¸€ç§é¢œè‰²æŒ‰å…¶äº®åº¦çš„ä¸åŒåˆ†ä¸º256ä¸ªç­‰çº§ã€‚å½“è‰²å…‰ä¸‰åŸè‰²é‡å æ—¶ï¼Œç”±äºä¸åŒçš„æ··è‰²æ¯”ä¾‹èƒ½äº§ç”Ÿå„ç§ä¸­é—´è‰²ï¼Œä¾‹å¦‚ï¼Œä¸‰åŸè‰²ç›¸åŠ å¯äº§ç”Ÿç™½è‰²ã€‚æ‰€ä»¥RGBæ¨¡å¼æ˜¯åŠ è‰²è¿‡ç¨‹ã€‚å±å¹•æ˜¾ç¤ºçš„åŸºç¡€æ˜¯RGBæ¨¡å¼ï¼Œå½©è‰²å°åˆ·å“å´æ— æ³•ç”¨RGBæ¨¡å¼æ¥äº§ç”Ÿå„ç§å½©è‰²ï¼Œæ‰€ä»¥ï¼Œ<strong>RGBæ¨¡å¼å¸¸ç”¨äºè§†é¢‘ã€å¤šåª’ä½“ä¸ç½‘é¡µè®¾è®¡</strong>ã€‚</p><h3 id="ç©ºé—´æ¨¡å‹"><a href="#ç©ºé—´æ¨¡å‹" class="headerlink" title="ç©ºé—´æ¨¡å‹"></a>ç©ºé—´æ¨¡å‹</h3><p>å¯¹å›¾åƒå¤„ç†è€Œè¨€ï¼ŒRGBæ˜¯æœ€ä¸ºé‡è¦å’Œå¸¸è§çš„é¢œè‰²æ¨¡å‹ï¼Œå®ƒå»ºç«‹åœ¨ç¬›å¡å°”åæ ‡ç³»ä¸­ï¼Œä»¥çº¢ã€ç»¿ã€è“ä¸‰ç§åŸºæœ¬è‰²ä¸ºåŸºç¡€ï¼Œ<strong>è¿›è¡Œä¸åŒç¨‹åº¦çš„å åŠ </strong>ï¼Œäº§ç”Ÿä¸°å¯Œè€Œå¹¿æ³›çš„é¢œè‰²ï¼Œä¿—ç§°ä¸‰åŸºè‰²æ¨¡å¼ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9nc3MwLmJkc3RhdGljLmNvbS85NG8zZFNhZ194STRraEdrcG9XSzFIRjZoaHkvYmFpa2UvYzAlM0RiYWlrZTgwJTJDNSUyQzUlMkM4MCUyQzI2L3NpZ249MjdmYjUwZjlhYWVjMDhmYTMyMGQxYmY1Mzg4NzU2MDgvZTFmZTk5MjViYzMxNWM2MGU0NTA5ZmE5ODdiMWNiMTM0ODU0NzdhYi5qcGc?x-oss-process=image/format,png"></p><h3 id="åŸºæœ¬åŸç†"><a href="#åŸºæœ¬åŸç†" class="headerlink" title="åŸºæœ¬åŸç†"></a>åŸºæœ¬åŸç†</h3><p>RGBæ¨¡å‹çš„åŸç†æ¥è‡ªäºé¢œè‰²çš„ä¸‰åˆºæ¿€ç†è®ºï¼Œå®ƒåŸºäºä»¥ä¸‹å‡è®¾:åœ¨çœ¼ç›çš„ä¸­å¤®éƒ¨ä½æœ‰3ç§ç±»å‹çš„å¯¹è‰²å½©æ•æ„Ÿçš„é”¥çŠ¶ç»†èƒã€‚å…¶ä¸­ä¸€ç±»å¯¹ä½äºå¯è§å…‰è°±ä¸­é—´ä½ç½®çš„å…‰æ³¢æ•æ„Ÿï¼Œè¿™ç§å…‰æ³¢ç»äººçš„è§†è§‰ç³»ç»Ÿè½¬æ¢äº§ç”Ÿç»¿è‰²æ„Ÿã€‚è€Œå…¶ä»–ä¸¤ç§é”¥çŠ¶ç»†èƒå¯¹ä½äºå¯è§å…‰æ³¢çš„ä¸Šã€ä¸‹ç«¯å³è¾ƒé•¿å’Œè¾ƒçŸ­çš„æ³¢é•¿çš„å…‰æ³¢æ•æ„Ÿï¼Œå®ƒä»¬åˆ†åˆ«è¢«è¯†åˆ«ä¸ºçº¢è‰²å’Œè“è‰²ã€‚ä»ç”Ÿç†å­¦çš„è§’åº¦æ¥çœ‹ï¼Œç”±äºçœ¼ç›ä»…åŒ…å«3ç§ä¸åŒç±»å‹çš„é”¥çŠ¶ç»†èƒï¼Œå› è€Œå¯¹ä»»æ„3ç§é¢œè‰²é€‚å½“æ··åˆå‡å¯äº§ç”Ÿç™½å…‰è§†è§‰ï¼Œæ¡ä»¶æ˜¯è¿™3ä¸­é¢œè‰²ä¸­ä»»æ„ä¸¤ç§çš„ç»„åˆéƒ½å¹¶ä¸èƒ½äº§ç”Ÿç¬¬3ç§é¢œè‰²ï¼Œåˆ™è¿™ä¸‰ç§é¢œè‰²å°±è¢«ç§°ä¸ºä¸‰åŸè‰²ã€‚</p><h3 id="è¡¨è¾¾æ–¹å¼"><a href="#è¡¨è¾¾æ–¹å¼" class="headerlink" title="è¡¨è¾¾æ–¹å¼"></a>è¡¨è¾¾æ–¹å¼</h3><p> RGBç©ºé—´æ˜¯ç›®å‰æœ€å¸¸ç”¨çš„å½©è‰²ä¿¡æ¯è¡¨è¾¾æ–¹å¼ï¼Œä½¿ç”¨çº¢ã€ç»¿ã€è“ä¸‰åŸè‰²çš„äº®åº¦æ¥å®šé‡è¡¨ç¤ºé¢œè‰²ï¼Œ<strong>æ˜¯ä»¥RGBä¸‰è‰²å…‰äº’ç›¸å åŠ æ¥å®ç°æ··è‰²çš„æ–¹å¼</strong>ã€‚ä¸‰ç§é¢œè‰²æ‰€å æ¯”ä¾‹ä¸åŒï¼Œå¾—åˆ°çš„é¢œè‰²å°±ä¸åŒã€‚å˜æ¢æ··åˆçš„æ¯”ä¾‹ï¼Œå°±ä¼šå¾—åˆ°å„ç§å„æ ·çš„æ··åˆæ•ˆæœã€‚RGBé¢œè‰²ç©ºé—´å¯ä»¥çœ‹ä½œæ˜¯ä¸‰ç»´ç›´è§’åæ ‡ç³»ä¸­çš„ä¸€ä¸ªå•ä½æ­£æ–¹ä½“ã€‚ä»»ä½•ä¸€ç§é¢œè‰²åœ¨RGBé¢œè‰²ç©ºé—´ä¸­éƒ½å¯ä»¥ç”¨ä¸‰ç»´ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹æ¥è¡¨ç¤ºã€‚åœ¨RGBé¢œè‰²ç©ºé—´ï¼Œä»»æ„è‰²å…‰Féƒ½å¯ä»¥ç”¨RGBä¸‰ç§é¢œè‰²ä¸åŒåˆ†é‡çš„ç›¸åŠ æ··åˆè€Œæˆï¼šF=r[R]+g[G]+b[B]</p><h4 id="è‰²åº¦å­¦è§„åˆ™ï¼š"><a href="#è‰²åº¦å­¦è§„åˆ™ï¼š" class="headerlink" title="è‰²åº¦å­¦è§„åˆ™ï¼š"></a>è‰²åº¦å­¦è§„åˆ™ï¼š</h4><p> ã€€(1)é€šè¿‡R,G,Bè¿™ä¸‰ç§é¢œè‰²èƒ½äº§ç”Ÿä»»ä½•é¢œè‰²ï¼Œå¹¶ä¸”è¿™ä¸‰ç§é¢œè‰²æ··åˆåäº§ç”Ÿçš„é¢œè‰²æ˜¯å”¯ä¸€çš„ã€‚<br> ã€€(2)å¦‚æœä¸¤ä¸ªé¢œè‰²ç›¸ç­‰ï¼Œè¿™ä¸‰ä¸ªé¢œè‰²åˆ†é‡å†ä¹˜ä»¥æˆ–è€…é™¤ä»¥ç›¸åŒçš„æ•°ï¼Œå¾—åˆ°çš„é¢œè‰²ä»ç„¶ç›¸ç­‰ã€‚<br> ã€€(3)æ··åˆè‰²çš„äº®åº¦ç­‰äºæ¯ç§é¢œè‰²äº®åº¦çš„å’Œã€‚</p><h3 id="ä¼˜ç‚¹ä¸ç¼ºç‚¹"><a href="#ä¼˜ç‚¹ä¸ç¼ºç‚¹" class="headerlink" title="ä¼˜ç‚¹ä¸ç¼ºç‚¹"></a>ä¼˜ç‚¹ä¸ç¼ºç‚¹</h3><p>ä¼˜ç‚¹ï¼š RGBé¢œè‰²ç©ºé—´æœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯ç›´è§‚ï¼Œå®¹æ˜“ç†è§£ã€‚</p><p>ç¼ºç‚¹ï¼š<strong>R,G,Bè¿™3ä¸ªåˆ†é‡æ˜¯é«˜åº¦ç›¸å…³çš„</strong>ï¼Œå³å¦‚æœä¸€ä¸ªé¢œè‰²çš„æŸä¸€ä¸ªåˆ†é‡å‘ç”Ÿäº†ä¸€å®šç¨‹åº¦çš„æ”¹å˜ï¼Œé‚£ä¹ˆè¿™ä¸ªé¢œè‰²å¾ˆå¯èƒ½è¦å‘ç”Ÿæ”¹å˜ï¼›äººçœ¼å¯¹äºå¸¸è§çš„çº¢ç»¿è“ä¸‰è‰²çš„æ•æ„Ÿç¨‹åº¦æ˜¯ä¸ä¸€æ ·çš„ï¼Œå› æ­¤RGBé¢œè‰²ç©ºé—´çš„å‡åŒ€æ€§éå¸¸å·®ï¼Œä¸”ä¸¤ç§é¢œè‰²ä¹‹é—´çš„çŸ¥è§‰å·®å¼‚è‰²å·®ä¸èƒ½è¡¨ç¤ºä¸ºè¯¥é¢œè‰²ç©ºé—´ä¸­ä¸¤ç‚¹é—´çš„è·ç¦»ï¼Œä½†æ˜¯åˆ©ç”¨çº¿æ€§æˆ–éçº¿æ€§å˜æ¢ï¼Œåˆ™å¯ä»¥ä»RGBé¢œè‰²ç©ºé—´æ¨å¯¼å‡ºå…¶ä»–çš„é¢œè‰²ç‰¹å¾ç©ºé—´ã€‚</p><h2 id="HSV"><a href="#HSV" class="headerlink" title="HSV"></a>HSV</h2><h3 id="åŸºæœ¬æ¦‚å¿µ-1"><a href="#åŸºæœ¬æ¦‚å¿µ-1" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><p>HSV(Hue, Saturation, Value)æ˜¯æ ¹æ®é¢œè‰²çš„ç›´è§‚ç‰¹æ€§ç”±A. R.  Smithåœ¨1978å¹´åˆ›å»ºçš„ä¸€ç§é¢œè‰²ç©ºé—´, ä¹Ÿç§°å…­è§’é”¥ä½“æ¨¡å‹(Hexcone  Model)ã€‚è¿™ä¸ªæ¨¡å‹ä¸­é¢œè‰²çš„å‚æ•°åˆ†åˆ«æ˜¯ï¼š<strong>è‰²è°ƒï¼ˆHï¼‰ï¼Œé¥±å’Œåº¦ï¼ˆSï¼‰ï¼Œæ˜åº¦ï¼ˆVï¼‰</strong>ã€‚</p><h3 id="ç©ºé—´æ¨¡å‹-1"><a href="#ç©ºé—´æ¨¡å‹-1" class="headerlink" title="ç©ºé—´æ¨¡å‹"></a>ç©ºé—´æ¨¡å‹</h3><h4 id="è‰²è°ƒHï¼š"><a href="#è‰²è°ƒHï¼š" class="headerlink" title="è‰²è°ƒHï¼š"></a>è‰²è°ƒHï¼š</h4><p>ç”¨è§’åº¦åº¦é‡ï¼Œå–å€¼èŒƒå›´ä¸º0Â°ï½360Â°ï¼Œä»çº¢è‰²å¼€å§‹æŒ‰é€†æ—¶é’ˆæ–¹å‘è®¡ç®—ï¼Œçº¢è‰²ä¸º0Â°ï¼Œç»¿è‰²ä¸º120Â°,è“è‰²ä¸º240Â°ã€‚å®ƒä»¬çš„è¡¥è‰²æ˜¯ï¼šé»„è‰²ä¸º60Â°ï¼Œé’è‰²ä¸º180Â°,å“çº¢ä¸º300Â°ï¼›</p><h4 id="é¥±å’Œåº¦Sï¼š"><a href="#é¥±å’Œåº¦Sï¼š" class="headerlink" title="é¥±å’Œåº¦Sï¼š"></a>é¥±å’Œåº¦Sï¼š</h4><p>é¥±å’Œåº¦Sè¡¨ç¤ºé¢œè‰²æ¥è¿‘å…‰è°±è‰²çš„ç¨‹åº¦ã€‚ä¸€ç§é¢œè‰²ï¼Œå¯ä»¥çœ‹æˆæ˜¯æŸç§å…‰è°±è‰²ä¸ç™½è‰²æ··åˆçš„ç»“æœã€‚å…¶ä¸­å…‰è°±è‰²æ‰€å çš„æ¯”ä¾‹æ„ˆå¤§ï¼Œé¢œè‰²æ¥è¿‘å…‰è°±è‰²çš„ç¨‹åº¦å°±æ„ˆé«˜ï¼Œé¢œè‰²çš„é¥±å’Œåº¦ä¹Ÿå°±æ„ˆé«˜ã€‚é¥±å’Œåº¦é«˜ï¼Œé¢œè‰²åˆ™æ·±è€Œè‰³ã€‚å…‰è°±è‰²çš„ç™½å…‰æˆåˆ†ä¸º0ï¼Œé¥±å’Œåº¦è¾¾åˆ°æœ€é«˜ã€‚é€šå¸¸å–å€¼èŒƒå›´ä¸º0%ï½100%ï¼Œå€¼è¶Šå¤§ï¼Œé¢œè‰²è¶Šé¥±å’Œã€‚</p><h4 id="æ˜åº¦Vï¼š"><a href="#æ˜åº¦Vï¼š" class="headerlink" title="æ˜åº¦Vï¼š"></a>æ˜åº¦Vï¼š</h4><p>æ˜åº¦è¡¨ç¤ºé¢œè‰²æ˜äº®çš„ç¨‹åº¦ï¼Œå¯¹äºå…‰æºè‰²ï¼Œæ˜åº¦å€¼ä¸å‘å…‰ä½“çš„å…‰äº®åº¦æœ‰å…³ï¼›å¯¹äºç‰©ä½“è‰²ï¼Œæ­¤å€¼å’Œç‰©ä½“çš„é€å°„æ¯”æˆ–åå°„æ¯”æœ‰å…³ã€‚é€šå¸¸å–å€¼èŒƒå›´ä¸º0%ï¼ˆé»‘ï¼‰åˆ°100%ï¼ˆç™½ï¼‰ã€‚</p><p><strong>RGBå’ŒCMYé¢œè‰²æ¨¡å‹éƒ½æ˜¯é¢å‘ç¡¬ä»¶çš„ï¼Œè€ŒHSVï¼ˆHue Saturation  Valueï¼‰é¢œè‰²æ¨¡å‹æ˜¯é¢å‘ç”¨æˆ·çš„ã€‚</strong>HSVæ¨¡å‹çš„ä¸‰ç»´è¡¨ç¤ºä»RGBç«‹æ–¹ä½“æ¼”åŒ–è€Œæ¥ã€‚è®¾æƒ³ä»RGBæ²¿ç«‹æ–¹ä½“å¯¹è§’çº¿çš„ç™½è‰²é¡¶ç‚¹å‘é»‘è‰²é¡¶ç‚¹è§‚å¯Ÿï¼Œå°±å¯ä»¥çœ‹åˆ°ç«‹æ–¹ä½“çš„å…­è¾¹å½¢å¤–å½¢ã€‚å…­è¾¹å½¢è¾¹ç•Œè¡¨ç¤ºè‰²å½©ï¼Œæ°´å¹³è½´è¡¨ç¤ºçº¯åº¦ï¼Œæ˜åº¦æ²¿å‚ç›´è½´æµ‹é‡ã€‚</p><p> <img src="https://img-blog.csdnimg.cn/20181128220932509.png"> </p><p> <img src="https://img-blog.csdnimg.cn/20181128220957174.png"></p><h3 id="ä»RGBåˆ°HSVçš„è½¬æ¢"><a href="#ä»RGBåˆ°HSVçš„è½¬æ¢" class="headerlink" title="ä»RGBåˆ°HSVçš„è½¬æ¢"></a>ä»RGBåˆ°HSVçš„è½¬æ¢</h3><p>HSV åœ¨æ•°å­¦ä¸Šå®šä¹‰ä¸ºåœ¨ RGB ç©ºé—´ä¸­çš„é¢œè‰²çš„ R, G å’Œ B çš„åæ ‡çš„å˜æ¢ã€‚è®¾ (r, g, b) åˆ†åˆ«æ˜¯ä¸€ä¸ªé¢œè‰²çš„çº¢ã€ç»¿å’Œè“åæ ‡ï¼Œå®ƒä»¬çš„å€¼æ˜¯åœ¨ 0 åˆ° 1 ä¹‹é—´çš„å®æ•°ã€‚è®¾ max ç­‰ä»·äº r, g å’Œ b ä¸­çš„æœ€å¤§è€…ï¼Œè®¾ min ç­‰äºè¿™äº›å€¼ä¸­çš„æœ€å°è€…ã€‚è¦æ‰¾åˆ°åœ¨ HSV ç©ºé—´ä¸­çš„ (h, s, v) å€¼ï¼Œè¿™é‡Œçš„ h âˆˆ [0,  360ï¼‰æ˜¯è§’åº¦çš„è‰²ç›¸è§’ï¼Œè€Œ s, v âˆˆ [0,1] æ˜¯é¥±å’Œåº¦å’Œäº®åº¦ï¼Œè®¡ç®—å…¬å¼ä¸ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/20181128221242343.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0ppYW5nSHVpMTIxMQ==,size_16,color_FFFFFF,t_70"></p><p><img src="https://img-blog.csdnimg.cn/20181128221304329.png"></p><p><img src="https://img-blog.csdnimg.cn/2018112822132243.png"></p><p>HSVå¯¹ç”¨æˆ·æ¥è¯´æ˜¯ä¸€ç§ç›´è§‚çš„é¢œè‰²æ¨¡å‹ã€‚æˆ‘ä»¬å¯ä»¥ä»ä¸€ç§çº¯è‰²å½©å¼€å§‹ï¼Œå³æŒ‡å®šè‰²å½©è§’Hï¼Œå¹¶è®©V=S=1ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥é€šè¿‡å‘å…¶ä¸­åŠ å…¥é»‘è‰²å’Œç™½è‰²æ¥å¾—åˆ°æˆ‘ä»¬éœ€è¦çš„é¢œè‰²ã€‚<strong>å¢åŠ é»‘è‰²å¯ä»¥å‡å°Vè€ŒSä¸å˜ï¼ŒåŒæ ·å¢åŠ ç™½è‰²å¯ä»¥å‡å°Sè€ŒVä¸å˜ã€‚</strong>ä¾‹å¦‚ï¼Œè¦å¾—åˆ°æ·±è“è‰²ï¼ŒV=0.4 S=1 H=240åº¦ã€‚è¦å¾—åˆ°æ·¡è“è‰²ï¼ŒV=1 S=0.4 H=240åº¦ã€‚</p><p>ä¸€èˆ¬è¯´æ¥ï¼Œäººçœ¼æœ€å¤§èƒ½åŒºåˆ†128ç§ä¸åŒçš„è‰²å½©ï¼Œ130ç§è‰²é¥±å’Œåº¦ï¼Œ23ç§æ˜æš—åº¦ã€‚å¦‚æœæˆ‘ä»¬ç”¨16Bitè¡¨ç¤ºHSVçš„è¯ï¼Œå¯ä»¥ç”¨7ä½å­˜æ”¾Hï¼Œ4ä½å­˜æ”¾Sï¼Œ5ä½å­˜æ”¾Vï¼Œå³745æˆ–è€…655å°±å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€è¦äº†ã€‚</p><p>ç”±äºHSVæ˜¯ä¸€ç§æ¯”è¾ƒç›´è§‚çš„é¢œè‰²æ¨¡å‹ï¼Œæ‰€ä»¥åœ¨è®¸å¤šå›¾åƒç¼–è¾‘å·¥å…·ä¸­åº”ç”¨æ¯”è¾ƒå¹¿æ³›ï¼Œå¦‚Photoshopï¼ˆåœ¨Photoshopä¸­å«HSBï¼‰ç­‰ç­‰ï¼Œä½†è¿™ä¹Ÿå†³å®šäº†<strong>å®ƒä¸é€‚åˆä½¿ç”¨åœ¨å…‰ç…§æ¨¡å‹ä¸­ï¼Œè®¸å¤šå…‰çº¿æ··åˆè¿ç®—ã€å…‰å¼ºè¿ç®—ç­‰éƒ½æ— æ³•ç›´æ¥ä½¿ç”¨HSVæ¥å®ç°ã€‚</strong></p><h2 id="LAB"><a href="#LAB" class="headerlink" title="LAB"></a>LAB</h2><h3 id="åŸºæœ¬æ¦‚å¿µ-2"><a href="#åŸºæœ¬æ¦‚å¿µ-2" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><p><a href="https://baike.baidu.com/item/Lab%E6%A8%A1%E5%BC%8F/7362402">Labæ¨¡å¼</a>æ˜¯æ ¹æ®Commission International Eclairageï¼ˆCIEï¼‰åœ¨1931å¹´æ‰€åˆ¶å®šçš„ä¸€ç§æµ‹å®šé¢œè‰²çš„å›½é™…æ ‡å‡†å»ºç«‹çš„ã€‚äº1976å¹´è¢«æ”¹è¿›ï¼Œå¹¶ä¸”å‘½åçš„ä¸€ç§è‰²å½©æ¨¡å¼ã€‚Labé¢œè‰²æ¨¡å‹å¼¥è¡¥äº†<a href="https://baike.baidu.com/item/RGB/342517">RGB</a>å’ŒCMYKä¸¤ç§è‰²å½©æ¨¡å¼çš„ä¸è¶³ã€‚å®ƒæ˜¯ä¸€ç§<strong>è®¾å¤‡æ— å…³çš„é¢œè‰²æ¨¡å‹</strong>ï¼Œä¹Ÿæ˜¯ä¸€ç§<strong>åŸºäºç”Ÿç†ç‰¹å¾çš„é¢œè‰²æ¨¡å‹</strong>ã€‚ Labé¢œè‰²æ¨¡å‹ç”±ä¸‰ä¸ªè¦ç´ ç»„æˆï¼Œä¸€ä¸ªè¦ç´ æ˜¯äº®åº¦ï¼ˆLï¼‰ï¼Œa å’Œbæ˜¯ä¸¤ä¸ª<a href="https://baike.baidu.com/item/%E9%A2%9C%E8%89%B2%E9%80%9A%E9%81%93/5706858">é¢œè‰²é€šé“</a>ã€‚aåŒ…æ‹¬çš„é¢œè‰²æ˜¯ä»<a href="https://baike.baidu.com/item/%E6%B7%B1%E7%BB%BF%E8%89%B2/2192808">æ·±ç»¿è‰²</a>ï¼ˆä½äº®åº¦å€¼ï¼‰åˆ°ç°è‰²ï¼ˆä¸­äº®åº¦å€¼ï¼‰å†åˆ°äº®ç²‰çº¢è‰²ï¼ˆé«˜äº®åº¦å€¼ï¼‰ï¼›bæ˜¯ä»äº®è“è‰²ï¼ˆä½äº®åº¦å€¼ï¼‰åˆ°ç°è‰²ï¼ˆä¸­äº®åº¦å€¼ï¼‰å†åˆ°é»„è‰²ï¼ˆé«˜äº®åº¦å€¼ï¼‰ã€‚å› æ­¤ï¼Œè¿™ç§é¢œè‰²æ··åˆåå°†äº§ç”Ÿå…·æœ‰æ˜äº®æ•ˆæœçš„è‰²å½©ã€‚</p><h3 id="ç©ºé—´æ¨¡å‹-2"><a href="#ç©ºé—´æ¨¡å‹-2" class="headerlink" title="ç©ºé—´æ¨¡å‹"></a>ç©ºé—´æ¨¡å‹</h3><p><a href="https://baike.baidu.com/item/Lab%E6%A8%A1%E5%BC%8F/7362402">Labæ¨¡å¼</a>æ—¢ä¸ä¾èµ–å…‰çº¿ï¼Œä¹Ÿä¸ä¾èµ–äºé¢œæ–™ï¼Œå®ƒæ˜¯CIEç»„ç»‡ç¡®å®šçš„ä¸€ä¸ªç†è®ºä¸ŠåŒ…æ‹¬äº†äººçœ¼å¯ä»¥çœ‹è§çš„æ‰€æœ‰è‰²å½©çš„è‰²å½©æ¨¡å¼ã€‚Labæ¨¡å¼å¼¥è¡¥äº†<a href="https://baike.baidu.com/item/RGB/342517">RGB</a>å’ŒCMYKä¸¤ç§è‰²å½©æ¨¡å¼çš„ä¸è¶³ã€‚åŒRGBé¢œè‰²ç©ºé—´ç›¸æ¯”ï¼ŒLabæ˜¯ä¸€ç§ä¸å¸¸ç”¨çš„è‰²å½©ç©ºé—´ã€‚å®ƒæ˜¯ä¸€ç§è®¾å¤‡æ— å…³çš„é¢œè‰²ç³»ç»Ÿï¼Œä¹Ÿæ˜¯ä¸€ç§åŸºäºç”Ÿç†ç‰¹å¾çš„é¢œè‰²ç³»ç»Ÿã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œ<strong>å®ƒæ˜¯ç”¨æ•°å­—åŒ–çš„æ–¹æ³•æ¥æè¿°äººçš„è§†è§‰æ„Ÿåº”</strong>ã€‚Labé¢œè‰²ç©ºé—´ä¸­çš„Låˆ†é‡ç”¨äºè¡¨ç¤ºåƒç´ çš„äº®åº¦ï¼Œå–å€¼èŒƒå›´æ˜¯[0,100],è¡¨ç¤ºä»çº¯é»‘åˆ°çº¯ç™½ï¼›aè¡¨ç¤ºä»çº¢è‰²åˆ°ç»¿è‰²çš„èŒƒå›´ï¼Œå–å€¼èŒƒå›´æ˜¯[127,-128]ï¼›bè¡¨ç¤ºä»é»„è‰²åˆ°è“è‰²çš„èŒƒå›´ï¼Œå–å€¼èŒƒå›´æ˜¯[127,-128]ã€‚ä¸‹å›¾æ‰€ç¤ºä¸ºLabé¢œè‰²ç©ºé—´çš„å›¾ç¤ºï¼š</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9nc3MzLmJkc3RhdGljLmNvbS8tUG8zZFNhZ194STRraEdrcG9XSzFIRjZoaHkvYmFpa2UvYzAlM0RiYWlrZTgwJTJDNSUyQzUlMkM4MCUyQzI2L3NpZ249ZTM1OWY1YTZhNDRiZDExMzEwYzBiZjYwM2JjNmNmNmEvMDIzYjViYjVjOWVhMTVjZTFkMWZmMWRjYmYwMDNhZjMzYjg3YjI3NS5qcGc?x-oss-process=image/format,png"></p><h3 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h3><p><strong>Labé¢œè‰²ç©ºé—´æ¯”è®¡ç®—æœºæ˜¾ç¤ºå™¨ç”šè‡³æ¯”äººç±»è§†è§‰çš„è‰²åŸŸéƒ½è¦å¤§ **ï¼Œè¡¨ç¤ºä¸ºLabçš„ä½å›¾æ¯”RGBæˆ–CMYKä½å›¾è·å¾—åŒæ ·çš„ç²¾åº¦éœ€è¦è¦æ±‚æ›´å¤šçš„åƒç´ æ•°æ®ã€‚<a href="https://baike.baidu.com/item/Lab%E6%A8%A1%E5%BC%8F/7362402">Labæ¨¡å¼</a>æ‰€å®šä¹‰çš„è‰²å½©æœ€å¤šï¼Œä¸”ä¸å…‰çº¿åŠè®¾å¤‡æ— å…³å¹¶ä¸”</strong>å¤„ç†é€Ÿåº¦ä¸<a href="https://baike.baidu.com/item/RGB%E6%A8%A1%E5%BC%8F/7362104">RGBæ¨¡å¼</a>åŒæ ·å¿«**ï¼Œæ¯”<a href="https://baike.baidu.com/item/CMYK%E6%A8%A1%E5%BC%8F/305545">CMYKæ¨¡å¼</a>å¿«å¾ˆå¤šã€‚å› æ­¤ï¼Œå¯ä»¥æ”¾å¿ƒå¤§èƒ†çš„åœ¨å›¾è±¡ç¼–è¾‘ä¸­ä½¿ç”¨Labæ¨¡ å¼ã€‚è€Œä¸”ï¼ŒLabæ¨¡å¼åœ¨è½¬æ¢æˆCMYKæ¨¡å¼æ—¶è‰²å½©æ²¡æœ‰ä¸¢å¤±æˆ–è¢«æ›¿æ¢ã€‚å› æ­¤ï¼Œæœ€ä½³é¿å…è‰²å½©æŸå¤±çš„æ–¹æ³•æ˜¯ï¼šåº”ç”¨Labæ¨¡å¼ç¼–è¾‘å›¾è±¡ï¼Œå†è½¬æ¢ä¸ºCMYKæ¨¡å¼æ‰“å°è¾“å‡ºã€‚</p><h2 id="CMYK"><a href="#CMYK" class="headerlink" title="CMYK"></a>CMYK</h2><h3 id="åŸºæœ¬æ¦‚å¿µ-3"><a href="#åŸºæœ¬æ¦‚å¿µ-3" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><p>å½“é˜³å…‰ç…§å°„åˆ°ä¸€ä¸ªç‰©ä½“ä¸Šæ—¶ï¼Œè¿™ä¸ªç‰©ä½“å°†å¸æ”¶ä¸€éƒ¨åˆ†å…‰çº¿ï¼Œå¹¶å°†å‰©ä¸‹çš„å…‰çº¿è¿›è¡Œåå°„ï¼Œåå°„çš„å…‰çº¿å°±æ˜¯æˆ‘ä»¬æ‰€çœ‹è§çš„ç‰©ä½“é¢œè‰²ã€‚è¿™æ˜¯ä¸€ç§**å‡è‰²<a href="https://baike.baidu.com/item/%E8%89%B2%E5%BD%A9%E6%A8%A1%E5%BC%8F/10209468">è‰²å½©æ¨¡å¼</a>**ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸<a href="https://baike.baidu.com/item/RGB%E6%A8%A1%E5%BC%8F">RGBæ¨¡å¼</a>çš„æ ¹æœ¬ä¸åŒä¹‹å¤„ã€‚ä¸ä½†æˆ‘ä»¬çœ‹ç‰©ä½“çš„é¢œè‰²æ—¶ç”¨åˆ°äº†è¿™ç§å‡è‰²æ¨¡å¼ï¼Œè€Œä¸”åœ¨çº¸ä¸Šå°åˆ·æ—¶åº”ç”¨çš„ä¹Ÿæ˜¯è¿™ç§å‡è‰²æ¨¡å¼ã€‚CMYKä»£è¡¨å°åˆ·ä¸Šç”¨çš„å››ç§é¢œè‰²ï¼ŒCä»£è¡¨é’è‰²ï¼ˆCyanï¼‰ï¼ŒMä»£è¡¨<a href="https://baike.baidu.com/item/%E6%B4%8B%E7%BA%A2%E8%89%B2/6833575">æ´‹çº¢è‰²</a>ï¼ˆMagentaï¼‰ï¼ŒYä»£è¡¨é»„è‰²ï¼ˆYellowï¼‰ï¼ŒKä»£è¡¨é»‘è‰²ï¼ˆBlackï¼‰ã€‚å› ä¸ºåœ¨å®é™…åº”ç”¨ä¸­ï¼Œé’è‰²ã€æ´‹çº¢è‰²å’Œé»„è‰²å¾ˆéš¾å åŠ å½¢æˆçœŸæ­£çš„é»‘è‰²ï¼Œæœ€å¤šä¸è¿‡æ˜¯è¤è‰²è€Œå·²ã€‚å› æ­¤æ‰å¼•å…¥äº†Kâ€”â€”é»‘è‰²ã€‚é»‘è‰²çš„ä½œç”¨æ˜¯å¼ºåŒ–æš—è°ƒï¼ŒåŠ æ·±æš—éƒ¨è‰²å½©ã€‚</p><h3 id="æ‰“å°æ¨¡å¼"><a href="#æ‰“å°æ¨¡å¼" class="headerlink" title="æ‰“å°æ¨¡å¼"></a>æ‰“å°æ¨¡å¼</h3><p><strong>CMYKæ¨¡å¼ä¿—ç§°å››è‰²æ‰“å°æ¨¡å¼ï¼Œæ˜¯æœ€ä½³çš„æ‰“å°æ¨¡å¼</strong>ã€‚ä½†æ˜¯åœ¨è¿›è¡Œå®é™…æ‰“å°æ—¶ï¼Œä¸¤ç§æ¨¡å¼å­˜åœ¨è½¬æ¢é—®é¢˜ï¼Œå…·ä½“åŸå› å¦‚ä¸‹ï¼š</p><ol><li><p>CMYKæ¨¡å¼ç¼–è¾‘è™½ç„¶èƒ½å¤Ÿé¿å…è‰²å½©çš„æŸå¤±ï¼Œä½†è¿ç®—é€Ÿåº¦å¾ˆæ…¢ã€‚ä¸»è¦åŸå› å¦‚ä¸‹ï¼š</p><p>1ï¼‰ã€å³ä½¿åœ¨CMYKæ¨¡å¼ä¸‹å·¥ä½œï¼Œ<a href="https://baike.baidu.com/item/Photoshop/133866">Photoshop</a>ä¹Ÿå¿…é¡»å°†CMYKæ¨¡å¼è½¬å˜ä¸ºæ˜¾ç¤ºå™¨æ‰€ä½¿ç”¨çš„RGBæ¨¡å¼ã€‚</p><p>2ï¼‰ã€å¯¹äºåŒæ ·çš„å›¾åƒï¼ŒRGBæ¨¡å¼åªéœ€è¦å¤„ç†ä¸‰ä¸ª<a href="https://baike.baidu.com/item/%E9%80%9A%E9%81%93">é€šé“</a>å³å¯ï¼Œè€ŒCMYKæ¨¡å¼åˆ™éœ€è¦å¤„ç†å››ä¸ªã€‚</p></li><li><p> ç”¨æˆ·æ‰€ä½¿ç”¨çš„æ‰«æä»ªå’Œæ˜¾ç¤ºå™¨éƒ½æ˜¯<a href="https://baike.baidu.com/item/RGB/342517">RGB</a>è®¾å¤‡ï¼Œæ‰€ä»¥æ— è®ºä»€ä¹ˆæ—¶å€™ä½¿ç”¨CMYKæ¨¡å¼å·¥ä½œéƒ½æœ‰æŠŠRGBæ¨¡å¼è½¬æ¢ä¸ºCMYKæ¨¡å¼è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ã€‚å› æ­¤ï¼Œæ˜¯å¦åº”ç”¨CMYKæ¨¡å¼è¿›è¡Œç¼–è¾‘éƒ½å­˜åœ¨<a href="https://baike.baidu.com/item/RGB%E6%A8%A1%E5%BC%8F/7362104">RGBæ¨¡å¼</a>å’ŒCMYKæ¨¡å¼è½¬æ¢çš„é—®é¢˜ã€‚</p></li></ol><p>å¯¹äº<a href="https://baike.baidu.com/item/RGB%E6%A8%A1%E5%BC%8F/7362104">RGBæ¨¡å¼</a>å’ŒCMYKæ¨¡å¼è½¬æ¢çš„é—®é¢˜ï¼Œå¯ä»¥å…ˆç”¨RGBæ¨¡å¼è¿›è¡Œç¼–è¾‘å·¥ä½œï¼Œå†ç”¨CMYKæ¨¡å¼è¿›è¡Œæ‰“å°å·¥ä½œï¼Œåœ¨æ‰“å°å‰æ‰è¿›è¡Œè½¬æ¢ï¼Œç„¶ååŠ å…¥å¿…è¦çš„<a href="https://baike.baidu.com/item/%E8%89%B2%E5%BD%A9%E6%A0%A1%E6%AD%A3/10786529">è‰²å½©æ ¡æ­£</a>ï¼Œ<a href="https://baike.baidu.com/item/%E9%94%90%E5%8C%96/2189784">é”åŒ–</a>å’Œä¿®æ•´ã€‚è¿™æ ·è™½ç„¶ä½¿<a href="https://baike.baidu.com/item/Photoshop/133866">Photoshop</a>åœ¨CMYKæ¨¡å¼ä¸‹é€Ÿåº¦æ…¢ä¸€äº›ï¼Œä½†å¯èŠ‚çœå¤§éƒ¨åˆ†ç¼–è¾‘æ—¶é—´ã€‚è¿™ç§æ‰“å°å‰çš„æ¨¡å¼è½¬æ¢ï¼Œå¹¶ä¸æ˜¯é¿å…å›¾åƒæŸå¤±æœ€ä½³çš„é€”å¾„ï¼Œæœ€ä½³æ–¹æ³•æ˜¯å°†<a href="https://baike.baidu.com/item/Lab%E6%A8%A1%E5%BC%8F">Labæ¨¡å¼</a>å’ŒCMYKæ¨¡å¼ç›¸ç»“åˆä½¿ç”¨ï¼Œè¿™æ ·å¯ä»¥æœ€å¤§ç¨‹åº¦çš„å‡å°‘å›¾åƒå¤±çœŸã€‚</p><h3 id="ä¼˜ç¼ºç‚¹-1"><a href="#ä¼˜ç¼ºç‚¹-1" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹ï¼šå¯ä»¥æ»¡è¶³æ‰“å°çš„éœ€æ±‚ï¼Œè§£å†³RGBä¸èƒ½æ‰“å°çš„é—®é¢˜</p><p>ç¼ºç‚¹ï¼šä¸€å®šç¨‹åº¦ä¸Šå­˜åœ¨è‰²å½©çš„ç¼ºå¤±ï¼Œè¿è¡Œé€Ÿåº¦æ…¢</p>]]></content>
      
      
      <categories>
          
          <category> ä¸‰ç»´è§†è§‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenCV </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
